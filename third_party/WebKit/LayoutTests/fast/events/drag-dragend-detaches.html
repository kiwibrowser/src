<!doctype html>
<html>
<body>
<iframe src="resources/iframe-drag-dragend-detaches.html"></iframe>
<script>
function updateResult(msg) {
    document.getElementById('results').innerHTML = msg;
}

function test() {
    updateResult('Test failed.');

    testRunner.dumpAsText();
    testRunner.waitUntilDone();

    var ifr = document.querySelector("iframe");
    ifr.contentWindow.test(ifr.offsetLeft, ifr.offsetTop);
}

function finishUp() {
    updateResult('Test passed (no crash.)');
    document.querySelector("iframe").remove();
    // This will detach the iframe, verifying in the process
    // if the tail end of the drag operation handles that as
    // wanted (== gracefully, no crashing.)
}
window.onload = test;
</script>
<div id="results"></div>
</body>
</html>
