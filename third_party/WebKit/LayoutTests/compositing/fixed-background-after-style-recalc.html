<!doctype html>
<style>
    body {
        background-image: url('resources/simple_image.png');
        background-size: 200px 200px;
        height: 3000px;
    }

    body.fixed {
        background-attachment: fixed;
    }
</style>
<script>
    if (window.testRunner)
        testRunner.dumpAsTextWithPixelResults();

    if (window.internals) {
        internals.settings.setPreferCompositingToLCDTextEnabled(true);
    }

    window.onload = function() {
        window.scrollTo(0, 300);
        // crbug.com/343132 LayerCompositor::rootFixedBackgroundsChanged should not query stale compositing state
        document.querySelector('body').classList.add('fixed');
    }
</script>
