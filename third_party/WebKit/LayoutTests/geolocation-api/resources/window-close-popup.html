<script src="file:///gen/layout_test_data/mojo/public/js/mojo_bindings.js"></script>
<script src="file:///gen/device/geolocation/public/interfaces/geolocation.mojom.js"></script>
<script src="file:///gen/third_party/blink/public/platform/modules/geolocation/geolocation_service.mojom.js"></script>
<script src="file:///gen/third_party/blink/public/platform/modules/permissions/permission.mojom.js"></script>
<script src="geolocation-mock.js"></script>
<script>
var mockLatitude = 51.478;
var mockLongitude = -0.166;
var mockAccuracy = 100.0;

function loadNext() {
    let mock = geolocationMock;
    mock.setGeolocationPermission(true);
    mock.setGeolocationPosition(mockLatitude, mockLongitude, mockAccuracy);

    navigator.geolocation.watchPosition(window.opener.gotPosition);
}
</script>
<body onload="loadNext()"></body>
