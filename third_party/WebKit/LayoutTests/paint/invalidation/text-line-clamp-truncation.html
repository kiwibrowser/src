<!DOCTYPE html>
<head>
<script src="resources/text-based-repaint.js"></script>
<script>
  function repaintTest() {
    document.getElementById('container').classList.toggle('folded');
  }

  if (window.testRunner)
    testRunner.dumpAsTextWithPixelResults();

</script>

<style>
div {
  width: 285px;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  line-height: 1.5em;
  overflow: hidden;
}

.folded {
  -webkit-line-clamp: 1;
  max-height: 1.5em;
}
</style>
</head>

<body onload="runRepaintAndPixelTest()">
  <div id="container" class="folded">
    ___these_two_lines_should_be_identical___
    ___these_two_lines_should_be_identical___
  </div>
</body>
