LavaPack.loadBundle([[6113,{buffer:2478,"buffer-from":2490,duplexify:6114,through2:6115},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r=e("duplexify"),i=e("through2"),s=e("buffer-from"),a=function(e,t){if("number"==typeof e&&(e={maxBuffer:e}),"function"==typeof e)return a(null,e);e||(e={});var o="number"==typeof e.maxBuffer?e.maxBuffer:65535,u=e.strict,c=!1!==e.newline,l=[],d=0,h=r.obj(),f=i.obj({highWaterMark:1},(function(e,t,r){if(function(e){return!n.isBuffer(e)&&"string"!=typeof e}(e))return p(e,null,r);if(n.isBuffer(e)||(e=s(e)),c){var i=Array.prototype.indexOf.call(e,10);if(i>0&&13===e[i-1]&&i--,i>-1)return l.push(e.slice(0,i)),p(n.concat(l),e.slice(i),r)}return l.push(e),(d+=e.length)<o?r():u?r(new Error("No newline found")):void p(n.concat(l),null,r)})),m=function(){if(u)return h.destroy(new Error("No newline found"));h.cork(),p(n.concat(l),null,(function(e){if(e)return h.destroy(e);h.uncork()}))},p=function(e,n,r){h.removeListener("preend",m),t(e,(function(t,i){if(t)return r(t);h.setWritable(i),h.setReadable(i),e&&i.write(e),n&&i.write(n),n=l=f=null,r()}))};return h.on("preend",m),h.setWritable(f),h};t.exports=a}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"peek-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/peek-stream/index.js"}],[5009,{"./binding":5008,_process:6127,_stream_transform:6411,assert:2088,buffer:2478,util:2485},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t,r){(function(){var i=e("_stream_transform"),s=e("./binding"),a=e("util"),o=e("assert").ok;function u(e,t,n){var i=[],s=0;function a(){for(var t;null!==(t=e.read());)i.push(t),s+=t.length;e.once("readable",a)}function o(){var t=r.concat(i,s);i=[],n(null,t),e.close()}e.on("error",(function(t){e.removeListener("end",o),e.removeListener("readable",a),n(t)})),e.on("end",o),e.end(t),a()}function c(e,t){if("string"==typeof t&&(t=new r(t)),!r.isBuffer(t))throw new TypeError("Not a string or buffer");var n=s.Z_FINISH;return e._processChunk(t,n)}function l(e){if(!(this instanceof l))return new l(e);b.call(this,e,s.DEFLATE)}function d(e){if(!(this instanceof d))return new d(e);b.call(this,e,s.INFLATE)}function h(e){if(!(this instanceof h))return new h(e);b.call(this,e,s.GZIP)}function f(e){if(!(this instanceof f))return new f(e);b.call(this,e,s.GUNZIP)}function m(e){if(!(this instanceof m))return new m(e);b.call(this,e,s.DEFLATERAW)}function p(e){if(!(this instanceof p))return new p(e);b.call(this,e,s.INFLATERAW)}function g(e){if(!(this instanceof g))return new g(e);b.call(this,e,s.UNZIP)}function b(e,t){if(this._opts=e=e||{},this._chunkSize=e.chunkSize||n.Z_DEFAULT_CHUNK,i.call(this,e),e.flush&&e.flush!==s.Z_NO_FLUSH&&e.flush!==s.Z_PARTIAL_FLUSH&&e.flush!==s.Z_SYNC_FLUSH&&e.flush!==s.Z_FULL_FLUSH&&e.flush!==s.Z_FINISH&&e.flush!==s.Z_BLOCK)throw new Error("Invalid flush flag: "+e.flush);if(this._flushFlag=e.flush||s.Z_NO_FLUSH,e.chunkSize&&(e.chunkSize<n.Z_MIN_CHUNK||e.chunkSize>n.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<n.Z_MIN_WINDOWBITS||e.windowBits>n.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<n.Z_MIN_LEVEL||e.level>n.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<n.Z_MIN_MEMLEVEL||e.memLevel>n.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=n.Z_FILTERED&&e.strategy!=n.Z_HUFFMAN_ONLY&&e.strategy!=n.Z_RLE&&e.strategy!=n.Z_FIXED&&e.strategy!=n.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!r.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._binding=new s.Zlib(t);var a=this;this._hadError=!1,this._binding.onerror=function(e,t){a._binding=null,a._hadError=!0;var r=new Error(e);r.errno=t,r.code=n.codes[t],a.emit("error",r)};var o=n.Z_DEFAULT_COMPRESSION;"number"==typeof e.level&&(o=e.level);var u=n.Z_DEFAULT_STRATEGY;"number"==typeof e.strategy&&(u=e.strategy),this._binding.init(e.windowBits||n.Z_DEFAULT_WINDOWBITS,o,e.memLevel||n.Z_DEFAULT_MEMLEVEL,u,e.dictionary),this._buffer=new r(this._chunkSize),this._offset=0,this._closed=!1,this._level=o,this._strategy=u,this.once("end",this.close)}s.Z_MIN_WINDOWBITS=8,s.Z_MAX_WINDOWBITS=15,s.Z_DEFAULT_WINDOWBITS=15,s.Z_MIN_CHUNK=64,s.Z_MAX_CHUNK=Infinity,s.Z_DEFAULT_CHUNK=16384,s.Z_MIN_MEMLEVEL=1,s.Z_MAX_MEMLEVEL=9,s.Z_DEFAULT_MEMLEVEL=8,s.Z_MIN_LEVEL=-1,s.Z_MAX_LEVEL=9,s.Z_DEFAULT_LEVEL=s.Z_DEFAULT_COMPRESSION,Object.keys(s).forEach((function(e){e.match(/^Z/)&&(n[e]=s[e])})),n.codes={Z_OK:s.Z_OK,Z_STREAM_END:s.Z_STREAM_END,Z_NEED_DICT:s.Z_NEED_DICT,Z_ERRNO:s.Z_ERRNO,Z_STREAM_ERROR:s.Z_STREAM_ERROR,Z_DATA_ERROR:s.Z_DATA_ERROR,Z_MEM_ERROR:s.Z_MEM_ERROR,Z_BUF_ERROR:s.Z_BUF_ERROR,Z_VERSION_ERROR:s.Z_VERSION_ERROR},Object.keys(n.codes).forEach((function(e){n.codes[n.codes[e]]=e})),n.Deflate=l,n.Inflate=d,n.Gzip=h,n.Gunzip=f,n.DeflateRaw=m,n.InflateRaw=p,n.Unzip=g,n.createDeflate=function(e){return new l(e)},n.createInflate=function(e){return new d(e)},n.createDeflateRaw=function(e){return new m(e)},n.createInflateRaw=function(e){return new p(e)},n.createGzip=function(e){return new h(e)},n.createGunzip=function(e){return new f(e)},n.createUnzip=function(e){return new g(e)},n.deflate=function(e,t,n){return"function"==typeof t&&(n=t,t={}),u(new l(t),e,n)},n.deflateSync=function(e,t){return c(new l(t),e)},n.gzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),u(new h(t),e,n)},n.gzipSync=function(e,t){return c(new h(t),e)},n.deflateRaw=function(e,t,n){return"function"==typeof t&&(n=t,t={}),u(new m(t),e,n)},n.deflateRawSync=function(e,t){return c(new m(t),e)},n.unzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),u(new g(t),e,n)},n.unzipSync=function(e,t){return c(new g(t),e)},n.inflate=function(e,t,n){return"function"==typeof t&&(n=t,t={}),u(new d(t),e,n)},n.inflateSync=function(e,t){return c(new d(t),e)},n.gunzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),u(new f(t),e,n)},n.gunzipSync=function(e,t){return c(new f(t),e)},n.inflateRaw=function(e,t,n){return"function"==typeof t&&(n=t,t={}),u(new p(t),e,n)},n.inflateRawSync=function(e,t){return c(new p(t),e)},a.inherits(b,i),b.prototype.params=function(e,r,i){if(e<n.Z_MIN_LEVEL||e>n.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(r!=n.Z_FILTERED&&r!=n.Z_HUFFMAN_ONLY&&r!=n.Z_RLE&&r!=n.Z_FIXED&&r!=n.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+r);if(this._level!==e||this._strategy!==r){var a=this;this.flush(s.Z_SYNC_FLUSH,(function(){a._binding.params(e,r),a._hadError||(a._level=e,a._strategy=r,i&&i())}))}else t.nextTick(i)},b.prototype.reset=function(){return this._binding.reset()},b.prototype._flush=function(e){this._transform(new r(0),"",e)},b.prototype.flush=function(e,n){var i=this._writableState;if(("function"==typeof e||void 0===e&&!n)&&(n=e,e=s.Z_FULL_FLUSH),i.ended)n&&t.nextTick(n);else if(i.ending)n&&this.once("end",n);else if(i.needDrain){var a=this;this.once("drain",(function(){a.flush(n)}))}else this._flushFlag=e,this.write(new r(0),"",n)},b.prototype.close=function(e){if(e&&t.nextTick(e),!this._closed){this._closed=!0,this._binding.close();var n=this;t.nextTick((function(){n.emit("close")}))}},b.prototype._transform=function(e,t,n){var i,a=this._writableState,o=(a.ending||a.ended)&&(!e||a.length===e.length);if(null===!e&&!r.isBuffer(e))return n(new Error("invalid input"));o?i=s.Z_FINISH:(i=this._flushFlag,e.length>=a.length&&(this._flushFlag=this._opts.flush||s.Z_NO_FLUSH));this._processChunk(e,i,n)},b.prototype._processChunk=function(e,t,n){var i=e&&e.length,s=this._chunkSize-this._offset,a=0,u=this,c="function"==typeof n;if(!c){var l,d=[],h=0;this.on("error",(function(e){l=e}));do{var f=this._binding.writeSync(t,e,a,i,this._buffer,this._offset,s)}while(!this._hadError&&g(f[0],f[1]));if(this._hadError)throw l;var m=r.concat(d,h);return this.close(),m}var p=this._binding.write(t,e,a,i,this._buffer,this._offset,s);function g(l,f){if(!u._hadError){var m=s-f;if(o(m>=0,"have should not go down"),m>0){var p=u._buffer.slice(u._offset,u._offset+m);u._offset+=m,c?u.push(p):(d.push(p),h+=p.length)}if((0===f||u._offset>=u._chunkSize)&&(s=u._chunkSize,u._offset=0,u._buffer=new r(u._chunkSize)),0===f){if(a+=i-l,i=l,!c)return!0;var b=u._binding.write(t,e,a,i,u._buffer,u._offset,u._chunkSize);return b.callback=g,void(b.buffer=e)}if(!c)return!1;n()}}p.buffer=e,p.callback=g},a.inherits(l,b),a.inherits(d,b),a.inherits(h,b),a.inherits(f,b),a.inherits(m,b),a.inherits(p,b),a.inherits(g,b)}).call(this)}).call(this,e("_process"),e("buffer").Buffer)}}},{package:"browserify-zlib",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/gunzip-maybe/node_modules/browserify-zlib/src/index.js"}],[1457,{"fast-deep-equal":4967},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("fast-deep-equal");r.code='require("ajv/dist/runtime/equal").default',n.default=r}}},{package:"ajv",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/ajv/dist/runtime/equal.js"}],[1458,{},function(){with(this)return function(){"use strict";return function(e,t,n){function r(e){const t=e.length;let n,r=0,i=0;for(;i<t;)r++,n=e.charCodeAt(i++),n>=55296&&n<=56319&&i<t&&(n=e.charCodeAt(i),56320==(64512&n)&&i++);return r}Object.defineProperty(n,"__esModule",{value:!0}),n.default=r,r.code='require("ajv/dist/runtime/ucs2length").default'}}},{package:"ajv",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/ajv/dist/runtime/ucs2length.js"}],[1387,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BaseController=void 0;class r{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,n=!0){if(n){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e in this.internalConfig)void 0!==this.internalConfig[e]&&(this[e]=this.internalConfig[e])}else for(const t in e)void 0!==this.internalConfig[t]&&(this.internalConfig[t]=e[t],this[t]=e[t])}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}}n.BaseController=r,n.default=r}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/BaseController.js"}],[1390,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ControllerMessenger=n.RestrictedControllerMessenger=void 0;class r{constructor({controllerMessenger:e,name:t,allowedActions:n,allowedEvents:r}){this.controllerMessenger=e,this.controllerName=t,this.allowedActions=n||null,this.allowedEvents=r||null}registerActionHandler(e,t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed registering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.registerActionHandler(e,t)}unregisterActionHandler(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed unregistering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.unregisterActionHandler(e)}call(e,...t){if(null===this.allowedActions)throw new Error("No actions allowed");if(!this.allowedActions.includes(e))throw new Error(`Action missing from allow list: ${e}`);return this.controllerMessenger.call(e,...t)}publish(e,...t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed publishing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.publish(e,...t)}subscribe(e,t,n){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);return n?this.controllerMessenger.subscribe(e,t,n):this.controllerMessenger.subscribe(e,t)}unsubscribe(e,t){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);this.controllerMessenger.unsubscribe(e,t)}clearEventSubscriptions(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed clearing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.clearEventSubscriptions(e)}}n.RestrictedControllerMessenger=r;n.ControllerMessenger=class{constructor(){this.actions=new Map,this.events=new Map,this.eventPayloadCache=new Map}registerActionHandler(e,t){if(this.actions.has(e))throw new Error(`A handler for ${e} has already been registered`);this.actions.set(e,t)}unregisterActionHandler(e){this.actions.delete(e)}clearActions(){this.actions.clear()}call(e,...t){const n=this.actions.get(e);if(!n)throw new Error(`A handler for ${e} has not been registered`);return n(...t)}publish(e,...t){const n=this.events.get(e);if(n)for(const[e,r]of n.entries())if(r){const n=this.eventPayloadCache.get(e),i=r(...t);i!==n&&(this.eventPayloadCache.set(e,i),e(i,n))}else e(...t)}subscribe(e,t,n){let r=this.events.get(e);r||(r=new Map,this.events.set(e,r)),r.set(t,n)}unsubscribe(e,t){const n=this.events.get(e);if(!n||!n.has(t))throw new Error(`Subscription not found for event: ${e}`);n.get(t)&&this.eventPayloadCache.delete(t),n.delete(t)}clearEventSubscriptions(e){this.events.delete(e)}clearSubscriptions(){this.events.clear()}getRestricted({name:e,allowedActions:t,allowedEvents:n}){return new r({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:n})}}}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/ControllerMessenger.js"}],[1389,{"./BaseController":1387},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ComposableController=void 0;const r=e("./BaseController");class i extends r.BaseController{constructor(e,t){super(undefined,e.reduce(((e,t)=>(e[t.name]=t.state,e)),{})),this.controllers=[],this.name="ComposableController",this.initialize(),this.controllers=e,this.messagingSystem=t,this.controllers.forEach((e=>{const{name:t}=e;if(e.subscribe!==undefined)e.subscribe((e=>{this.update({[t]:e})}));else{if(!this.messagingSystem)throw new Error("Messaging system required if any BaseControllerV2 controllers are used");this.messagingSystem.subscribe(`${t}:stateChange`,(e=>{this.update({[t]:e})}))}}))}get flatState(){let e={};for(const t of this.controllers)e=Object.assign(Object.assign({},e),t.state);return e}}n.ComposableController=i,n.default=i}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/ComposableController.js"}],[1449,{"../BaseController":1387,"../util":1450},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.PreferencesController=void 0;const r=e("../BaseController"),i=e("../util");class s extends r.BaseController{constructor(e,t){super(e,t),this.name="PreferencesController",this.defaultState={featureFlags:{},frequentRpcList:[],identities:{},ipfsGateway:"https://ipfs.io/ipfs/",lostIdentities:{},selectedAddress:"",useStaticTokenList:!1,useCollectibleDetection:!1,openSeaEnabled:!1},this.initialize()}addIdentities(e){const{identities:t}=this.state;e.forEach((e=>{if(e=i.toChecksumHexAddress(e),t[e])return;const n=Object.keys(t).length;t[e]={name:`Account ${n+1}`,address:e,importTime:Date.now()}})),this.update({identities:Object.assign({},t)})}removeIdentity(e){e=i.toChecksumHexAddress(e);const{identities:t}=this.state;t[e]&&(delete t[e],this.update({identities:Object.assign({},t)}),e===this.state.selectedAddress&&this.update({selectedAddress:Object.keys(t)[0]}))}setAccountLabel(e,t){e=i.toChecksumHexAddress(e);const{identities:n}=this.state;n[e]=n[e]||{},n[e].name=t,this.update({identities:Object.assign({},n)})}setFeatureFlag(e,t){const n=this.state.featureFlags,r=Object.assign(Object.assign({},n),{[e]:t});this.update({featureFlags:Object.assign({},r)})}syncIdentities(e){e=e.map((e=>i.toChecksumHexAddress(e)));const{identities:t,lostIdentities:n}=this.state,r={};for(const n in t)-1===e.indexOf(n)&&(r[n]=t[n],delete t[n]);if(Object.keys(r).length>0)for(const e in r)n[e]=r[e];return this.update({identities:Object.assign({},t),lostIdentities:Object.assign({},n)}),this.addIdentities(e),-1===e.indexOf(this.state.selectedAddress)&&this.update({selectedAddress:e[0]}),this.state.selectedAddress}updateIdentities(e){e=e.map((e=>i.toChecksumHexAddress(e)));const t=this.state.identities,n=e.reduce(((e,n,r)=>(e[n]=t[n]||{address:n,name:`Account ${r+1}`,importTime:Date.now()},e)),{});let{selectedAddress:r}=this.state;Object.keys(n).includes(r)||(r=Object.keys(n)[0]),this.update({identities:Object.assign({},n),selectedAddress:r})}addToFrequentRpcList(e,t,n,r,i){const{frequentRpcList:s}=this.state,a=s.findIndex((({rpcUrl:t})=>t===e));-1!==a&&s.splice(a,1);const o={rpcUrl:e,chainId:t,ticker:n,nickname:r,rpcPrefs:i};s.push(o),this.update({frequentRpcList:[...s]})}removeFromFrequentRpcList(e){const{frequentRpcList:t}=this.state,n=t.findIndex((({rpcUrl:t})=>t===e));-1!==n&&t.splice(n,1),this.update({frequentRpcList:[...t]})}setSelectedAddress(e){this.update({selectedAddress:i.toChecksumHexAddress(e)})}setIpfsGateway(e){this.update({ipfsGateway:e})}setUseStaticTokenList(e){this.update({useStaticTokenList:e})}setUseCollectibleDetection(e){if(e&&!this.state.openSeaEnabled)throw new Error("useCollectibleDetection cannot be enabled if openSeaEnabled is false");this.update({useCollectibleDetection:e})}setOpenSeaEnabled(e){this.update({openSeaEnabled:e}),e||this.update({useCollectibleDetection:!1})}}n.PreferencesController=s,n.default=s}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/user/PreferencesController.js"}],[1448,{"../BaseController":1387,"../util":1450},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AddressBookController=void 0;const r=e("../util"),i=e("../BaseController");class s extends i.BaseController{constructor(e,t){super(e,t),this.name="AddressBookController",this.defaultState={addressBook:{}},this.initialize()}clear(){this.update({addressBook:{}})}delete(e,t){if(t=r.toChecksumHexAddress(t),!r.isValidHexAddress(t)||!this.state.addressBook[e]||!this.state.addressBook[e][t])return!1;const n=Object.assign({},this.state.addressBook);return delete n[e][t],0===Object.keys(n[e]).length&&delete n[e],this.update({addressBook:n}),!0}set(e,t,n="1",i=""){if(e=r.toChecksumHexAddress(e),!r.isValidHexAddress(e))return!1;const s={address:e,chainId:n,isEns:!1,memo:i,name:t},a=r.normalizeEnsName(t);return a&&(s.name=a,s.isEns=!0),this.update({addressBook:Object.assign(Object.assign({},this.state.addressBook),{[n]:Object.assign(Object.assign({},this.state.addressBook[n]),{[e]:s})})}),!0}}n.AddressBookController=s,n.default=s}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/user/AddressBookController.js"}],[1403,{"../BaseController":1387,"../constants":1408,"../util":1450},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{u(r.next(e))}catch(e){s(e)}}function o(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.TokenDetectionController=void 0;const i=e("../BaseController"),s=e("../util"),a=e("../constants");class o extends i.BaseController{constructor({onTokensStateChange:e,onPreferencesStateChange:t,onNetworkStateChange:n,getBalancesInSingleCall:r,addTokens:i,getTokenListState:s,getTokensState:o},u,c){super(u,c),this.name="TokenDetectionController",this.isMainnet=()=>this.config.networkType===a.MAINNET,this.defaultConfig={interval:18e4,networkType:a.MAINNET,selectedAddress:"",tokens:[]},this.initialize(),this.getTokensState=o,this.getTokenListState=s,this.addTokens=i,e((({tokens:e})=>{this.configure({tokens:e})})),t((({selectedAddress:e})=>{e!==this.config.selectedAddress&&(this.configure({selectedAddress:e}),this.detectTokens())})),n((({provider:e})=>{this.configure({networkType:e.type})})),this.getBalancesInSingleCall=r}start(){return r(this,void 0,void 0,(function*(){this.isMainnet()&&!this.disabled&&(yield this.startPolling())}))}stop(){this.stopPolling()}stopPolling(){this.intervalId&&clearInterval(this.intervalId)}startPolling(e){return r(this,void 0,void 0,(function*(){e&&this.configure({interval:e},!1,!1),this.stopPolling(),yield this.detectTokens(),this.intervalId=setInterval((()=>r(this,void 0,void 0,(function*(){yield this.detectTokens()}))),this.config.interval)}))}detectTokens(){return r(this,void 0,void 0,(function*(){if(!this.isMainnet()||this.disabled)return;const e=this.config.tokens.map((e=>e.address.toLowerCase())),{tokenList:t}=this.getTokenListState(),n=[];for(const r in t)e.includes(r)||n.push(r);const i=[];i[0]=n.slice(0,1e3),i[1]=n.slice(1e3,n.length-1);const{selectedAddress:a}=this.config;if(a)for(const e of i){if(0===e.length)break;yield s.safelyExecute((()=>r(this,void 0,void 0,(function*(){const n=yield this.getBalancesInSingleCall(a,e),r=[];for(const e in n){let n;const{ignoredTokens:i}=this.getTokensState();i.length&&(n=i.find((t=>t===s.toChecksumHexAddress(e))));const a=Object.keys(t).find((t=>t.toLowerCase()===e.toLowerCase()))||"";n===undefined&&r.push({address:e,decimals:t[a].decimals,symbol:t[a].symbol})}r.length&&(yield this.addTokens(r))}))))}}))}}n.TokenDetectionController=o,n.default=o}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/assets/TokenDetectionController.js"}],[1396,{"../BaseController":1387,"../constants":1408,"../util":1450},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{u(r.next(e))}catch(e){s(e)}}function o(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.CollectibleDetectionController=void 0;const i=e("../BaseController"),s=e("../util"),a=e("../constants");class o extends i.BaseController{constructor({onPreferencesStateChange:e,onNetworkStateChange:t,getOpenSeaApiKey:n,addCollectible:r,getCollectiblesState:i},s,o){super(s,o),this.name="CollectibleDetectionController",this.isMainnet=()=>this.config.networkType===a.MAINNET,this.defaultConfig={interval:18e4,networkType:a.MAINNET,chainId:"1",selectedAddress:"",disabled:!0},this.initialize(),this.getCollectiblesState=i,e((({selectedAddress:e,useCollectibleDetection:t})=>{const{selectedAddress:n,disabled:r}=this.config;e===n&&!t===r||this.configure({selectedAddress:e,disabled:!t}),t!==undefined&&(t?this.start():this.stop())})),t((({provider:e})=>{this.configure({networkType:e.type,chainId:e.chainId})})),this.getOpenSeaApiKey=n,this.addCollectible=r}getOwnerCollectiblesApi(e,t){return`https://api.opensea.io/api/v1/assets?owner=${e}&offset=${t}&limit=50`}getOwnerCollectibles(e){var t;return r(this,void 0,void 0,(function*(){let n,r=[];const i=this.getOpenSeaApiKey();try{let a=0,o=!1;do{const u=this.getOwnerCollectiblesApi(e,a);n=yield s.timeoutFetch(u,i?{headers:{"X-API-KEY":i}}:{},15e3);const c=yield n.json();0!==(null===(t=c.assets)||void 0===t?void 0:t.length)?r=[...r,...c.assets]:o=!0,a+=50}while(!o)}catch(e){return[]}return r}))}start(){return r(this,void 0,void 0,(function*(){this.isMainnet()&&!this.disabled&&(yield this.startPolling())}))}stop(){this.stopPolling()}stopPolling(){this.intervalId&&clearInterval(this.intervalId)}startPolling(e){return r(this,void 0,void 0,(function*(){e&&this.configure({interval:e},!1,!1),this.stopPolling(),yield this.detectCollectibles(),this.intervalId=setInterval((()=>r(this,void 0,void 0,(function*(){yield this.detectCollectibles()}))),this.config.interval)}))}detectCollectibles(){return r(this,void 0,void 0,(function*(){if(!this.isMainnet()||this.disabled)return;const{selectedAddress:e,chainId:t}=this.config;e&&(yield s.safelyExecute((()=>r(this,void 0,void 0,(function*(){const n=(yield this.getOwnerCollectibles(e)).map((n=>r(this,void 0,void 0,(function*(){const{token_id:r,num_sales:i,background_color:a,image_url:o,image_preview_url:u,image_thumbnail_url:c,image_original_url:l,animation_url:d,animation_original_url:h,name:f,description:m,external_link:p,creator:g,asset_contract:{address:b,schema_name:y},last_sale:v}=n;let w;const{ignoredCollectibles:_}=this.getCollectiblesState();if(_.length&&(w=_.find((e=>e.address===s.toChecksumHexAddress(b)&&e.tokenId===r))),!w){const n=Object.assign({},{name:f},g&&{creator:g},m&&{description:m},o&&{image:o},i&&{numberOfSales:i},a&&{backgroundColor:a},u&&{imagePreview:u},c&&{imageThumbnail:c},l&&{imageOriginal:l},d&&{animation:d},h&&{animationOriginal:h},y&&{standard:y},p&&{externalLink:p},v&&{lastSale:v});yield this.addCollectible(b,r,n,{userAddress:e,chainId:t})}}))));yield Promise.all(n)})))))}))}}n.CollectibleDetectionController=o,n.default=o}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/assets/CollectibleDetectionController.js"}],[1430,{"../BaseController":1387},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NotificationController=void 0;const r=e("../BaseController"),i={notifications:{}};class s extends r.BaseController{constructor(e,t){super(e,t||i),this.initialize(),this._addNotifications()}_addNotifications(){const e={},{allNotifications:t}=this.config;Object.values(t).forEach((t=>{e[t.id]=this.state.notifications[t.id]?this.state.notifications[t.id]:Object.assign(Object.assign({},t),{isShown:!1})})),this.update({notifications:e})}updateViewed(e){const t=this.state.notifications;for(const n of Object.keys(e).map(Number))t[n].isShown=e[n];this.update({notifications:t},!0)}}n.NotificationController=s}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/notification/NotificationController.js"}],[1405,{"../BaseController":1387,"../apis/crypto-compare":1391,"../constants":1408,"../util":1450},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{u(r.next(e))}catch(e){s(e)}}function o(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.TokenRatesController=void 0;const i=e("../BaseController"),s=e("../util"),a=e("../constants"),o=e("../apis/crypto-compare"),u={BASE_URL:"https://api.coingecko.com/api/v3",getTokenPriceURL(e,t){return`${this.BASE_URL}/simple/token_price/${e}?${t}`},getPlatformsURL(){return`${this.BASE_URL}/asset_platforms`},getSupportedVsCurrencies(){return`${this.BASE_URL}/simple/supported_vs_currencies`}};function c(e,t){var n;if(!t)return null;const r=null!==(n=t.find((({chain_identifier:t})=>null!==t&&String(t)===e)))&&void 0!==n?n:null;return(null==r?void 0:r.id)||null}class l extends i.BaseController{constructor({onTokensStateChange:e,onCurrencyRateStateChange:t,onNetworkStateChange:n},r,i){super(r,i),this.tokenList=[],this.supportedChains={timestamp:0,data:null},this.supportedVsCurrencies={timestamp:0,data:[]},this.name="TokenRatesController",this.defaultConfig={disabled:!0,interval:18e4,nativeCurrency:"eth",chainId:"",tokens:[],threshold:216e5},this.defaultState={contractExchangeRates:{}},this.initialize(),this.configure({disabled:!1},!1,!1),e((e=>{this.configure({tokens:e.tokens})})),t((e=>{this.configure({nativeCurrency:e.nativeCurrency})})),n((({provider:e})=>{const{chainId:t}=e;this.update({contractExchangeRates:{}}),this.configure({chainId:t})})),this.poll()}poll(e){return r(this,void 0,void 0,(function*(){e&&this.configure({interval:e},!1,!1),this.handle&&clearTimeout(this.handle),yield s.safelyExecute((()=>this.updateExchangeRates())),this.handle=setTimeout((()=>{this.poll(this.config.interval)}),this.config.interval)}))}set chainId(e){!this.disabled&&s.safelyExecute((()=>this.updateExchangeRates()))}get chainId(){throw new Error("Property only used for setting")}set tokens(e){this.tokenList=e,!this.disabled&&s.safelyExecute((()=>this.updateExchangeRates()))}get tokens(){throw new Error("Property only used for setting")}fetchExchangeRate(e,t){return r(this,void 0,void 0,(function*(){const n=`contract_addresses=${this.tokenList.map((e=>e.address)).join(",")}&vs_currencies=${t.toLowerCase()}`;return s.handleFetch(u.getTokenPriceURL(e,n))}))}checkIsSupportedVsCurrency(e){return r(this,void 0,void 0,(function*(){const{threshold:t}=this.config,{timestamp:n,data:r}=this.supportedVsCurrencies;if(Date.now()-n>t){const t=yield s.handleFetch(u.getSupportedVsCurrencies());return this.supportedVsCurrencies={data:t,timestamp:Date.now()},t.includes(e.toLowerCase())}return r.includes(e.toLowerCase())}))}getChainSlug(){return r(this,void 0,void 0,(function*(){const{threshold:e,chainId:t}=this.config,{data:n,timestamp:r}=this.supportedChains;if(Date.now()-r>e){const e=yield s.handleFetch(u.getPlatformsURL());return this.supportedChains={data:e,timestamp:Date.now()},c(t,e)}return c(t,n)}))}updateExchangeRates(){return r(this,void 0,void 0,(function*(){if(0===this.tokenList.length||this.disabled)return;const e=yield this.getChainSlug();let t={};if(e){const{nativeCurrency:n}=this.config;t=yield this.fetchAndMapExchangeRates(n,e)}else this.tokenList.forEach((e=>{const n=s.toChecksumHexAddress(e.address);t[n]=undefined}));this.update({contractExchangeRates:t})}))}fetchAndMapExchangeRates(e,t){return r(this,void 0,void 0,(function*(){const n={};if(yield this.checkIsSupportedVsCurrency(e)){const r=yield this.fetchExchangeRate(t,e);this.tokenList.forEach((t=>{const i=r[t.address.toLowerCase()];n[s.toChecksumHexAddress(t.address)]=i?i[e.toLowerCase()]:0}))}else{let r,i=0;try{[r,{conversionRate:i}]=yield Promise.all([this.fetchExchangeRate(t,a.FALL_BACK_VS_CURRENCY),o.fetchExchangeRate(e,a.FALL_BACK_VS_CURRENCY,!1)])}catch(e){if(e.message.includes("market does not exist for this coin pair"))return{};throw e}for(const[e,t]of Object.entries(r)){const r=t[a.FALL_BACK_VS_CURRENCY.toLowerCase()];n[s.toChecksumHexAddress(e)]=r*i}}return n}))}}n.TokenRatesController=l,n.default=l}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/assets/TokenRatesController.js"}],[1445,{"./SubjectMetadataController":1444},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),i(e("./SubjectMetadataController"),n)}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/subject-metadata/index.js"}],[1388,{immer:5092},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getPersistentState=n.getAnonymizedState=n.BaseController=void 0;const r=e("immer");r.enablePatches();function i(e,t,n){return Object.keys(e).reduce(((r,i)=>{const s=t[i][n],a=e[i];return"function"==typeof s?r[i]=s(a):s&&(r[i]=a),r}),{})}n.BaseController=class{constructor({messenger:e,metadata:t,name:n,state:r}){this.messagingSystem=e,this.name=n,this.internalState=r,this.metadata=t,this.messagingSystem.registerActionHandler(`${n}:getState`,(()=>this.state))}get state(){return this.internalState}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,n]=r.produceWithPatches(this.internalState,e);this.internalState=t,this.messagingSystem.publish(`${this.name}:stateChange`,t,n)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},n.getAnonymizedState=function(e,t){return i(e,t,"anonymous")},n.getPersistentState=function(e,t){return i(e,t,"persist")}}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/BaseControllerV2.js"}],[1394,{"../BaseController":1387,"../util":1450,"async-mutex":2116,"eth-query":3125},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{u(r.next(e))}catch(e){s(e)}}function o(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.AccountTrackerController=void 0;const s=i(e("eth-query")),a=e("async-mutex"),o=e("../BaseController"),u=e("../util");class c extends o.BaseController{constructor({onPreferencesStateChange:e,getIdentities:t},n,i){super(n,i),this.mutex=new a.Mutex,this.name="AccountTrackerController",this.refresh=()=>r(this,void 0,void 0,(function*(){this.syncAccounts();const{accounts:e}=this.state;for(const t in e)yield u.safelyExecuteWithTimeout((()=>r(this,void 0,void 0,(function*(){const n=yield u.query(this.ethQuery,"getBalance",[t]);e[t]={balance:u.BNToHex(n)},this.update({accounts:Object.assign({},e)})}))))})),this.defaultConfig={interval:1e4},this.defaultState={accounts:{}},this.initialize(),this.getIdentities=t,e((()=>{this.refresh()})),this.poll()}syncAccounts(){const{accounts:e}=this.state,t=Object.keys(this.getIdentities()),n=Object.keys(e),r=t.filter((e=>-1===n.indexOf(e))),i=n.filter((e=>-1===t.indexOf(e)));r.forEach((t=>{e[t]={balance:"0x0"}})),i.forEach((t=>{delete e[t]})),this.update({accounts:Object.assign({},e)})}set provider(e){this.ethQuery=new s.default(e)}get provider(){throw new Error("Property only used for setting")}poll(e){return r(this,void 0,void 0,(function*(){const t=yield this.mutex.acquire();e&&this.configure({interval:e},!1,!1),this.handle&&clearTimeout(this.handle),yield this.refresh(),this.handle=setTimeout((()=>{t(),this.poll(this.config.interval)}),this.config.interval)}))}}n.AccountTrackerController=c,n.default=c}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/assets/AccountTrackerController.js"}],[1426,{"../util":1450,"./AbstractMessageManager":1425,uuid:6724},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MessageManager=void 0;const r=e("uuid"),i=e("../util"),s=e("./AbstractMessageManager");class a extends s.AbstractMessageManager{constructor(){super(...arguments),this.name="MessageManager"}addUnapprovedMessageAsync(e,t){return new Promise(((n,r)=>{i.validateSignMessageData(e);const s=this.addUnapprovedMessage(e,t);this.hub.once(`${s}:finished`,(t=>{switch(t.status){case"signed":return n(t.rawSig);case"rejected":return r(new Error("MetaMask Message Signature: User denied message signature."));default:return r(new Error(`MetaMask Message Signature: Unknown problem: ${JSON.stringify(e)}`))}}))}))}addUnapprovedMessage(e,t){t&&(e.origin=t.origin),e.data=i.normalizeMessageData(e.data);const n=r.v1(),s={id:n,messageParams:e,status:"unapproved",time:Date.now(),type:"eth_sign"};return this.addMessage(s),this.hub.emit("unapprovedMessage",Object.assign(Object.assign({},e),{metamaskId:n})),n}prepMessageForSigning(e){return delete e.metamaskId,Promise.resolve(e)}}n.MessageManager=a,n.default=a}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/message-manager/MessageManager.js"}],[1398,{"../BaseControllerV2":1388,"../apis/crypto-compare":1391,"../util":1450,"async-mutex":2116},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{u(r.next(e))}catch(e){s(e)}}function o(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.CurrencyRateController=void 0;const i=e("async-mutex"),s=e("../BaseControllerV2"),a=e("../util"),o=e("../apis/crypto-compare"),u={conversionDate:{persist:!0,anonymous:!0},conversionRate:{persist:!0,anonymous:!0},currentCurrency:{persist:!0,anonymous:!0},nativeCurrency:{persist:!0,anonymous:!0},pendingCurrentCurrency:{persist:!1,anonymous:!0},pendingNativeCurrency:{persist:!1,anonymous:!0},usdConversionRate:{persist:!0,anonymous:!0}},c={conversionDate:0,conversionRate:0,currentCurrency:"usd",nativeCurrency:"ETH",pendingCurrentCurrency:null,pendingNativeCurrency:null,usdConversionRate:null};class l extends s.BaseController{constructor({includeUsdRate:e=!1,interval:t=18e4,messenger:n,state:r,fetchExchangeRate:s=o.fetchExchangeRate}){super({name:"CurrencyRateController",metadata:u,messenger:n,state:Object.assign(Object.assign({},c),r)}),this.mutex=new i.Mutex,this.includeUsdRate=e,this.intervalDelay=t,this.fetchExchangeRate=s}start(){return r(this,void 0,void 0,(function*(){yield this.startPolling()}))}stop(){this.stopPolling()}destroy(){super.destroy(),this.stopPolling()}setCurrentCurrency(e){return r(this,void 0,void 0,(function*(){this.update((t=>{t.pendingCurrentCurrency=e})),yield this.updateExchangeRate()}))}setNativeCurrency(e){return r(this,void 0,void 0,(function*(){this.update((t=>{t.pendingNativeCurrency=e})),yield this.updateExchangeRate()}))}stopPolling(){this.intervalId&&clearInterval(this.intervalId)}startPolling(){return r(this,void 0,void 0,(function*(){this.stopPolling(),yield a.safelyExecute((()=>this.updateExchangeRate())),this.intervalId=setInterval((()=>r(this,void 0,void 0,(function*(){yield a.safelyExecute((()=>this.updateExchangeRate()))}))),this.intervalDelay)}))}updateExchangeRate(){return r(this,void 0,void 0,(function*(){const e=yield this.mutex.acquire(),{currentCurrency:t,nativeCurrency:n,pendingCurrentCurrency:r,pendingNativeCurrency:i}=this.state;let s=null,a=null,o=null;const u=null!=r?r:t,c=null!=i?i:n;try{u&&c&&""!==u&&""!==c&&(({conversionRate:a,usdConversionRate:o}=yield this.fetchExchangeRate(u,c,this.includeUsdRate)),s=Date.now()/1e3)}catch(e){if(!e.message.includes("market does not exist for this coin pair"))throw e}finally{try{this.update((()=>({conversionDate:s,conversionRate:a,nativeCurrency:c,currentCurrency:u,pendingCurrentCurrency:null,pendingNativeCurrency:null,usdConversionRate:o})))}finally{e()}}return this.state}))}}n.CurrencyRateController=l,n.default=l}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/assets/CurrencyRateController.js"}],[1397,{"../BaseController":1387,"../constants":1408,"../util":1450,"./assetsUtil":1407,"async-mutex":2116,"ethereumjs-util":3195,events:2479},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{u(r.next(e))}catch(e){s(e)}}function o(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.CollectiblesController=void 0;const i=e("events"),s=e("ethereumjs-util"),a=e("async-mutex"),o=e("../BaseController"),u=e("../util"),c=e("../constants"),l=e("./assetsUtil"),d="allCollectibles",h="allCollectibleContracts";class f extends o.BaseController{constructor({onPreferencesStateChange:e,onNetworkStateChange:t,getERC721AssetName:n,getERC721AssetSymbol:r,getERC721TokenURI:s,getERC721OwnerOf:o,getERC1155BalanceOf:u,getERC1155TokenURI:l},d,h){super(d,h),this.mutex=new a.Mutex,this.hub=new i.EventEmitter,this.name="CollectiblesController",this.defaultConfig={networkType:c.MAINNET,selectedAddress:"",chainId:"",ipfsGateway:c.IPFS_DEFAULT_GATEWAY_URL,openSeaEnabled:!1,useIPFSSubdomains:!0},this.defaultState={allCollectibleContracts:{},allCollectibles:{},ignoredCollectibles:[]},this.initialize(),this.getERC721AssetName=n,this.getERC721AssetSymbol=r,this.getERC721TokenURI=s,this.getERC721OwnerOf=o,this.getERC1155BalanceOf=u,this.getERC1155TokenURI=l,e((({selectedAddress:e,ipfsGateway:t,openSeaEnabled:n})=>{this.configure({selectedAddress:e,ipfsGateway:t,openSeaEnabled:n})})),t((({provider:e})=>{const{chainId:t}=e;this.configure({chainId:t})}))}getCollectibleApi(e,t){const{chainId:n}=this.config;return n===c.RINKEBY_CHAIN_ID?`https://testnets-api.opensea.io/api/v1/asset/${e}/${t}`:`https://api.opensea.io/api/v1/asset/${e}/${t}`}getCollectibleContractInformationApi(e){const{chainId:t}=this.config;return t===c.RINKEBY_CHAIN_ID?`https://testnets-api.opensea.io/api/v1/asset_contract/${e}`:`https://api.opensea.io/api/v1/asset_contract/${e}`}updateNestedCollectibleState(e,t,{userAddress:n,chainId:r}={userAddress:this.config.selectedAddress,chainId:this.config.chainId}){const{[t]:i}=this.state,s=i[n],a=Object.assign(Object.assign({},s),{[r]:e}),o=Object.assign(Object.assign({},i),{[n]:a});this.update({[t]:o})}getCollectibleInformationFromApi(e,t){return r(this,void 0,void 0,(function*(){const n=this.getCollectibleApi(e,t);let r;r=this.openSeaApiKey?yield u.handleFetch(n,{headers:{"X-API-KEY":this.openSeaApiKey}}):yield u.handleFetch(n);const{num_sales:i,background_color:s,image_url:a,image_preview_url:o,image_thumbnail_url:c,image_original_url:l,animation_url:d,animation_original_url:h,name:f,description:m,external_link:p,creator:g,last_sale:b,asset_contract:{schema_name:y}}=r;return Object.assign({},{name:f||null},{description:m||null},{image:a||null},g&&{creator:g},i&&{numberOfSales:i},s&&{backgroundColor:s},o&&{imagePreview:o},c&&{imageThumbnail:c},l&&{imageOriginal:l},d&&{animation:d},h&&{animationOriginal:h},p&&{externalLink:p},b&&{lastSale:b},y&&{standard:y})}))}getCollectibleInformationFromTokenURI(e,t){return r(this,void 0,void 0,(function*(){const{ipfsGateway:n,useIPFSSubdomains:r}=this.config,i=yield this.getCollectibleURIAndStandard(e,t);let s=i[0];const a=i[1];s.startsWith("ipfs://")&&(s=u.getFormattedIpfsUrl(n,s,r));try{const e=yield u.handleFetch(s);return{image:e[Object.prototype.hasOwnProperty.call(e,"image")?"image":"image_url"],name:e.name,description:e.description,standard:a,favorite:!1}}catch(e){return{image:null,name:null,description:null,standard:a||null,favorite:!1}}}))}getCollectibleURIAndStandard(e,t){return r(this,void 0,void 0,(function*(){try{return[yield this.getERC721TokenURI(e,t),c.ERC721]}catch(e){}try{const n=yield this.getERC1155TokenURI(e,t);if(!n.includes("{id}"))return[n,c.ERC1155];const r=s.stripHexPrefix(u.BNToHex(new s.BN(t))).padStart(64,"0").toLowerCase();return[n.replace("{id}",r),c.ERC1155]}catch(e){}return["",""]}))}getCollectibleInformation(e,t){var n,i,s,a,o,c,l,d;return r(this,void 0,void 0,(function*(){const h=yield u.safelyExecute((()=>r(this,void 0,void 0,(function*(){return yield this.getCollectibleInformationFromTokenURI(e,t)}))));let f;return this.config.openSeaEnabled&&(f=yield u.safelyExecute((()=>r(this,void 0,void 0,(function*(){return yield this.getCollectibleInformationFromApi(e,t)}))))),Object.assign(Object.assign({},f),{name:null!==(i=null!==(n=h.name)&&void 0!==n?n:null==f?void 0:f.name)&&void 0!==i?i:null,description:null!==(a=null!==(s=h.description)&&void 0!==s?s:null==f?void 0:f.description)&&void 0!==a?a:null,image:null!==(c=null!==(o=h.image)&&void 0!==o?o:null==f?void 0:f.image)&&void 0!==c?c:null,standard:null!==(d=null!==(l=h.standard)&&void 0!==l?l:null==f?void 0:f.standard)&&void 0!==d?d:null})}))}getCollectibleContractInformationFromApi(e){return r(this,void 0,void 0,(function*(){const t=this.getCollectibleContractInformationApi(e);let n;return n=this.openSeaApiKey?yield u.handleFetch(t,{headers:{"X-API-KEY":this.openSeaApiKey}}):yield u.handleFetch(t),n}))}getCollectibleContractInformationFromContract(e){return r(this,void 0,void 0,(function*(){return{collection:{name:yield this.getERC721AssetName(e)},symbol:yield this.getERC721AssetSymbol(e),address:e}}))}getCollectibleContractInformation(e){return r(this,void 0,void 0,(function*(){const t=yield u.safelyExecute((()=>r(this,void 0,void 0,(function*(){return yield this.getCollectibleContractInformationFromContract(e)}))));let n;return this.config.openSeaEnabled&&(n=yield u.safelyExecute((()=>r(this,void 0,void 0,(function*(){return yield this.getCollectibleContractInformationFromApi(e)}))))),t||n?Object.assign(Object.assign(Object.assign({},n),t),{collection:Object.assign(Object.assign({image_url:null},null==n?void 0:n.collection),null==t?void 0:t.collection)}):{address:e,asset_contract_type:null,created_date:null,schema_name:null,symbol:null,total_supply:null,description:null,external_link:null,collection:{name:null,image_url:null}}}))}addIndividualCollectible(e,t,n,i){var s;return r(this,void 0,void 0,(function*(){const r=yield this.mutex.acquire();try{e=u.toChecksumHexAddress(e);const{allCollectibles:a}=this.state;let o,c;i?(o=i.chainId,c=i.userAddress):(o=this.config.chainId,c=this.config.selectedAddress);const h=(null===(s=a[c])||void 0===s?void 0:s[o])||[],f=h.find((n=>n.address.toLowerCase()===e.toLowerCase()&&n.tokenId===t));if(f){if(!l.compareCollectiblesMetadata(n,f))return h;{const n=h.findIndex((n=>n.address.toLowerCase()===e.toLowerCase()&&n.tokenId===t));-1!==n&&h.splice(n,1)}}const m=Object.assign({address:e,tokenId:t,favorite:(null==f?void 0:f.favorite)||!1,isCurrentlyOwned:!0},n),p=[...h,m];return this.updateNestedCollectibleState(p,d,{chainId:o,userAddress:c}),p}finally{r()}}))}addCollectibleContract(e,t){var n;return r(this,void 0,void 0,(function*(){const r=yield this.mutex.acquire();try{e=u.toChecksumHexAddress(e);const{allCollectibleContracts:i}=this.state;let s,a;t?(s=t.chainId,a=t.userAddress):(s=this.config.chainId,a=this.config.selectedAddress);const o=(null===(n=i[a])||void 0===n?void 0:n[s])||[];if(o.find((t=>t.address.toLowerCase()===e.toLowerCase())))return o;const c=yield this.getCollectibleContractInformation(e),{asset_contract_type:l,created_date:d,schema_name:f,symbol:m,total_supply:p,description:g,external_link:b,collection:{name:y,image_url:v}}=c;if(t&&!y||0===Object.keys(c).length)return o;const w=Object.assign({},{address:e},g&&{description:g},y&&{name:y},v&&{logo:v},m&&{symbol:m},null!=p&&{totalSupply:p},l&&{assetContractType:l},d&&{createdDate:d},f&&{schemaName:f},b&&{externalLink:b}),_=[...o,w];return this.updateNestedCollectibleState(_,h,{chainId:s,userAddress:a}),_}finally{r()}}))}removeAndIgnoreIndividualCollectible(e,t){var n;e=u.toChecksumHexAddress(e);const{allCollectibles:r,ignoredCollectibles:i}=this.state,{chainId:s,selectedAddress:a}=this.config,o=[...i],c=((null===(n=r[a])||void 0===n?void 0:n[s])||[]).filter((n=>{if(n.address.toLowerCase()===e.toLowerCase()&&n.tokenId===t){return!o.find((n=>n.address===e&&n.tokenId===t))&&o.push(n),!1}return!0}));this.updateNestedCollectibleState(c,d),this.update({ignoredCollectibles:o})}removeIndividualCollectible(e,t){var n;e=u.toChecksumHexAddress(e);const{allCollectibles:r}=this.state,{chainId:i,selectedAddress:s}=this.config,a=((null===(n=r[s])||void 0===n?void 0:n[i])||[]).filter((n=>!(n.address.toLowerCase()===e.toLowerCase()&&n.tokenId===t)));this.updateNestedCollectibleState(a,d)}removeCollectibleContract(e){var t;e=u.toChecksumHexAddress(e);const{allCollectibleContracts:n}=this.state,{chainId:r,selectedAddress:i}=this.config,s=((null===(t=n[i])||void 0===t?void 0:t[r])||[]).filter((t=>!(t.address.toLowerCase()===e.toLowerCase())));return this.updateNestedCollectibleState(s,h),s}setApiKey(e){this.openSeaApiKey=e}isCollectibleOwner(e,t,n){return r(this,void 0,void 0,(function*(){try{const r=yield this.getERC721OwnerOf(t,n);return e.toLowerCase()===r.toLowerCase()}catch(e){}try{return(yield this.getERC1155BalanceOf(e,t,n))>0}catch(e){}throw new Error("Unable to verify ownership. Probably because the standard is not supported or the chain is incorrect.")}))}addCollectibleVerifyOwnership(e,t){return r(this,void 0,void 0,(function*(){const{selectedAddress:n}=this.config;if(!(yield this.isCollectibleOwner(n,e,t)))throw new Error("This collectible is not owned by the user");yield this.addCollectible(e,t)}))}addCollectible(e,t,n,i){return r(this,void 0,void 0,(function*(){e=u.toChecksumHexAddress(e);const r=yield this.addCollectibleContract(e,i);n=n||(yield this.getCollectibleInformation(e,t));r.find((t=>t.address.toLowerCase()===e.toLowerCase()))&&(yield this.addIndividualCollectible(e,t,n,i))}))}removeCollectible(e,t){var n;e=u.toChecksumHexAddress(e),this.removeIndividualCollectible(e,t);const{allCollectibles:r}=this.state,{chainId:i,selectedAddress:s}=this.config;((null===(n=r[s])||void 0===n?void 0:n[i])||[]).find((t=>t.address.toLowerCase()===e.toLowerCase()))||this.removeCollectibleContract(e)}removeAndIgnoreCollectible(e,t){var n;e=u.toChecksumHexAddress(e),this.removeAndIgnoreIndividualCollectible(e,t);const{allCollectibles:r}=this.state,{chainId:i,selectedAddress:s}=this.config;((null===(n=r[s])||void 0===n?void 0:n[i])||[]).find((t=>t.address.toLowerCase()===e.toLowerCase()))||this.removeCollectibleContract(e)}clearIgnoredCollectibles(){this.update({ignoredCollectibles:[]})}checkAndUpdateSingleCollectibleOwnershipStatus(e,t,{userAddress:n,chainId:i}={userAddress:this.config.selectedAddress,chainId:this.config.chainId}){var s;return r(this,void 0,void 0,(function*(){const{address:r,tokenId:a}=e;let o=e.isCurrentlyOwned;try{o=yield this.isCollectibleOwner(n,r,a)}catch(e){if(!e.message.includes("Unable to verify ownership"))throw e}if(e.isCurrentlyOwned=o,!0===t)return e;const{allCollectibles:u}=this.state,c=(null===(s=u[n])||void 0===s?void 0:s[i])||[],l=c.find((e=>e.tokenId===a&&e.address.toLowerCase()===r.toLowerCase()));return l&&(l.isCurrentlyOwned=o,this.updateNestedCollectibleState(c,d,{userAddress:n,chainId:i})),e}))}checkAndUpdateAllCollectiblesOwnershipStatus(){var e;return r(this,void 0,void 0,(function*(){const{allCollectibles:t}=this.state,{chainId:n,selectedAddress:i}=this.config,s=(null===(e=t[i])||void 0===e?void 0:e[n])||[],a=yield Promise.all(s.map((e=>r(this,void 0,void 0,(function*(){var t;return null!==(t=yield this.checkAndUpdateSingleCollectibleOwnershipStatus(e,!0))&&void 0!==t?t:e})))));this.updateNestedCollectibleState(a,d)}))}updateCollectibleFavoriteStatus(e,t,n){var r;const{allCollectibles:i}=this.state,{chainId:s,selectedAddress:a}=this.config,o=(null===(r=i[a])||void 0===r?void 0:r[s])||[],u=o.findIndex((n=>n.address===e&&n.tokenId===t));if(-1===u)return;const c=Object.assign(Object.assign({},o[u]),{favorite:n});o[u]=c,this.updateNestedCollectibleState(o,d)}}n.CollectiblesController=f,n.default=f}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/assets/CollectiblesController.js"}],[1393,{"../BaseControllerV2":1388,"eth-rpc-errors":3129,nanoid:1499},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ApprovalController=void 0;const r=e("eth-rpc-errors"),i=e("nanoid"),s=e("../BaseControllerV2"),a="ApprovalController",o={pendingApprovals:{persist:!1,anonymous:!0},pendingApprovalCount:{persist:!1,anonymous:!1}};class u extends s.BaseController{constructor({messenger:e,showApprovalRequest:t,state:n={}}){super({name:a,metadata:o,messenger:e,state:Object.assign(Object.assign({},{pendingApprovals:{},pendingApprovalCount:0}),n)}),this._approvals=new Map,this._origins=new Map,this._showApprovalRequest=t,this.registerMessageHandlers()}registerMessageHandlers(){this.messagingSystem.registerActionHandler(`${a}:clearRequests`,this.clear.bind(this)),this.messagingSystem.registerActionHandler(`${a}:addRequest`,((e,t)=>t?this.addAndShowApprovalRequest(e):this.add(e))),this.messagingSystem.registerActionHandler(`${a}:hasRequest`,this.has.bind(this)),this.messagingSystem.registerActionHandler(`${a}:acceptRequest`,this.accept.bind(this)),this.messagingSystem.registerActionHandler(`${a}:rejectRequest`,this.reject.bind(this))}addAndShowApprovalRequest(e){const t=this._add(e.origin,e.type,e.id,e.requestData);return this._showApprovalRequest(),t}add(e){return this._add(e.origin,e.type,e.id,e.requestData)}get(e){return this.state.pendingApprovals[e]}getApprovalCount(e={}){var t,n;if(!e.origin&&!e.type)throw new Error("Must specify origin, type, or both.");const{origin:r,type:i}=e;if(r&&i)return Number(Boolean(null===(t=this._origins.get(r))||void 0===t?void 0:t.has(i)));if(r)return(null===(n=this._origins.get(r))||void 0===n?void 0:n.size)||0;let s=0;for(const e of Object.values(this.state.pendingApprovals))e.type===i&&(s+=1);return s}getTotalApprovalCount(){return this.state.pendingApprovalCount}has(e={}){var t;const{id:n,origin:r,type:i}=e;if(n){if("string"!=typeof n)throw new Error("May not specify non-string id.");return this._approvals.has(n)}if(i&&"string"!=typeof i)throw new Error("May not specify non-string type.");if(r){if("string"!=typeof r)throw new Error("May not specify non-string origin.");return i?Boolean(null===(t=this._origins.get(r))||void 0===t?void 0:t.has(i)):this._origins.has(r)}if(i){for(const e of Object.values(this.state.pendingApprovals))if(e.type===i)return!0;return!1}throw new Error("Must specify a valid combination of id, origin, and type.")}accept(e,t){this._deleteApprovalAndGetCallbacks(e).resolve(t)}reject(e,t){this._deleteApprovalAndGetCallbacks(e).reject(t)}clear(e){for(const t of this._approvals.keys())this.reject(t,e);this._origins.clear(),this.update((()=>({pendingApprovals:{},pendingApprovalCount:0})))}_add(e,t,n=i.nanoid(),s){var a;if(this._validateAddParams(n,e,t,s),null===(a=this._origins.get(e))||void 0===a?void 0:a.has(t))throw r.ethErrors.rpc.resourceUnavailable(((e,t)=>`Request of type '${t}' already pending for origin ${e}. Please wait.`)(e,t));return new Promise(((r,i)=>{this._approvals.set(n,{resolve:r,reject:i}),this._addPendingApprovalOrigin(e,t),this._addToStore(n,e,t,s)}))}_validateAddParams(e,t,n,i){let s=null;if(e&&"string"==typeof e?this._approvals.has(e)?s=`Approval request with id '${e}' already exists.`:t&&"string"==typeof t?n&&"string"==typeof n?i&&("object"!=typeof i||Array.isArray(i))&&(s="Request data must be a plain object if specified."):s="Must specify non-empty string type.":s="Must specify non-empty string origin.":s="Must specify non-empty string id.",s)throw r.ethErrors.rpc.internal(s)}_addPendingApprovalOrigin(e,t){const n=this._origins.get(e)||new Set;n.add(t),this._origins.has(e)||this._origins.set(e,n)}_addToStore(e,t,n,r){const i={id:e,origin:t,type:n,time:Date.now(),requestData:r||null};this.update((t=>{t.pendingApprovals[e]=i,t.pendingApprovalCount=Object.keys(t.pendingApprovals).length}))}_delete(e){this._approvals.delete(e);const{origin:t,type:n}=this.state.pendingApprovals[e];this._origins.get(t).delete(n),this._isEmptyOrigin(t)&&this._origins.delete(t),this.update((t=>{delete t.pendingApprovals[e],t.pendingApprovalCount=Object.keys(t.pendingApprovals).length}))}_deleteApprovalAndGetCallbacks(e){const t=this._approvals.get(e);if(!t)throw new Error(`Approval request with id '${e}' not found.`);return this._delete(e),t}_isEmptyOrigin(e){var t;return!(null===(t=this._origins.get(e))||void 0===t?void 0:t.size)}}n.ApprovalController=u,n.default=u}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/approval/ApprovalController.js"}],[1402,{"../BaseController":1387,"../util":1450,"ethereumjs-util":3195},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{u(r.next(e))}catch(e){s(e)}}function o(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.TokenBalancesController=n.BN=void 0;const i=e("ethereumjs-util");Object.defineProperty(n,"BN",{enumerable:!0,get:function(){return i.BN}});const s=e("../BaseController"),a=e("../util");class o extends s.BaseController{constructor({onTokensStateChange:e,getSelectedAddress:t,getERC20BalanceOf:n},r,i){super(r,i),this.name="TokenBalancesController",this.defaultConfig={interval:18e4,tokens:[]},this.defaultState={contractBalances:{}},this.initialize(),e((({tokens:e})=>{this.configure({tokens:e}),this.updateBalances()})),this.getSelectedAddress=t,this.getERC20BalanceOf=n,this.poll()}poll(e){return r(this,void 0,void 0,(function*(){e&&this.configure({interval:e},!1,!1),this.handle&&clearTimeout(this.handle),yield a.safelyExecute((()=>this.updateBalances())),this.handle=setTimeout((()=>{this.poll(this.config.interval)}),this.config.interval)}))}updateBalances(){return r(this,void 0,void 0,(function*(){if(this.disabled)return;const{tokens:e}=this.config,t={};for(const n in e){const{address:r}=e[n];try{t[r]=yield this.getERC20BalanceOf(r,this.getSelectedAddress()),e[n].balanceError=null}catch(s){t[r]=new i.BN(0),e[n].balanceError=s}}this.update({contractBalances:t})}))}}n.TokenBalancesController=o,n.default=o}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/assets/TokenBalancesController.js"}],[1443,{"../BaseControllerV2":1388,"eth-rpc-errors":3129},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{u(r.next(e))}catch(e){s(e)}}function o(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.RateLimitController=void 0;const i=e("eth-rpc-errors"),s=e("../BaseControllerV2"),a="RateLimitController",o={requests:{persist:!1,anonymous:!1}};class u extends s.BaseController{constructor({rateLimitTimeout:e=5e3,rateLimitCount:t=1,messenger:n,state:r,implementations:i}){const s={requests:Object.keys(i).reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:{}})),{})};super({name:a,metadata:o,messenger:n,state:Object.assign(Object.assign({},s),r)}),this.implementations=i,this.rateLimitTimeout=e,this.rateLimitCount=t,this.messagingSystem.registerActionHandler(`${a}:call`,((e,t,...n)=>this.call(e,t,...n)))}call(e,t,...n){return r(this,void 0,void 0,(function*(){if(this.isRateLimited(t,e))throw i.ethErrors.rpc.limitExceeded({message:`"${t}" is currently rate-limited. Please try again later.`});this.recordRequest(t,e);const r=this.implementations[t];if(!r)throw new Error("Invalid api type");return r(...n)}))}isRateLimited(e,t){return this.state.requests[e][t]>=this.rateLimitCount}recordRequest(e,t){this.update((n=>{var r;n.requests[e][t]=(null!==(r=n.requests[e][t])&&void 0!==r?r:0)+1,setTimeout((()=>this.resetRequestCount(e,t)),this.rateLimitTimeout)}))}resetRequestCount(e,t){this.update((n=>{n.requests[e][t]=0}))}}n.RateLimitController=u}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/ratelimit/RateLimitController.js"}],[1427,{"../util":1450,"./AbstractMessageManager":1425,uuid:6724},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.PersonalMessageManager=void 0;const r=e("uuid"),i=e("../util"),s=e("./AbstractMessageManager");class a extends s.AbstractMessageManager{constructor(){super(...arguments),this.name="PersonalMessageManager"}addUnapprovedMessageAsync(e,t){return new Promise(((n,r)=>{i.validateSignMessageData(e);const s=this.addUnapprovedMessage(e,t);this.hub.once(`${s}:finished`,(t=>{switch(t.status){case"signed":return n(t.rawSig);case"rejected":return r(new Error("MetaMask Personal Message Signature: User denied message signature."));default:return r(new Error(`MetaMask Personal Message Signature: Unknown problem: ${JSON.stringify(e)}`))}}))}))}addUnapprovedMessage(e,t){t&&(e.origin=t.origin),e.data=i.normalizeMessageData(e.data);const n=r.v1(),s={id:n,messageParams:e,status:"unapproved",time:Date.now(),type:"personal_sign"};return this.addMessage(s),this.hub.emit("unapprovedMessage",Object.assign(Object.assign({},e),{metamaskId:n})),n}prepMessageForSigning(e){return delete e.metamaskId,Promise.resolve(e)}}n.PersonalMessageManager=a,n.default=a}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/message-manager/PersonalMessageManager.js"}],[1428,{"../util":1450,"./AbstractMessageManager":1425,uuid:6724},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TypedMessageManager=void 0;const r=e("uuid"),i=e("../util"),s=e("./AbstractMessageManager");class a extends s.AbstractMessageManager{constructor(){super(...arguments),this.name="TypedMessageManager"}addUnapprovedMessageAsync(e,t,n){return new Promise(((r,s)=>{"V1"===t&&i.validateTypedSignMessageDataV1(e),"V3"===t&&i.validateTypedSignMessageDataV3(e);const a=this.addUnapprovedMessage(e,t,n);this.hub.once(`${a}:finished`,(t=>{switch(t.status){case"signed":return r(t.rawSig);case"rejected":return s(new Error("MetaMask Typed Message Signature: User denied message signature."));case"errored":return s(new Error(`MetaMask Typed Message Signature: ${t.error}`));default:return s(new Error(`MetaMask Typed Message Signature: Unknown problem: ${JSON.stringify(e)}`))}}))}))}addUnapprovedMessage(e,t,n){const i=r.v1(),s=Object.assign(Object.assign({},e),{metamaskId:i,version:t});n&&(e.origin=n.origin);const a={id:i,messageParams:e,status:"unapproved",time:Date.now(),type:"eth_signTypedData"};return this.addMessage(a),this.hub.emit("unapprovedMessage",s),i}setMessageStatusErrored(e,t){const n=this.getMessage(e);n&&(n.error=t,this.updateMessage(n),this.setMessageStatus(e,"errored"))}prepMessageForSigning(e){return delete e.metamaskId,delete e.version,Promise.resolve(e)}}n.TypedMessageManager=a,n.default=a}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/message-manager/TypedMessageManager.js"}],[1450,{"./constants":1408,buffer:2478,"eth-ens-namehash":3042,"eth-rpc-errors":3129,"eth-sig-util":3131,"ethereumjs-util":3195,"ethjs-unit":3247,"fast-deep-equal":4967,jsonschema:5432,"multiformats/cid":5923},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{u(r.next(e))}catch(e){s(e)}}function o(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.isValidJson=n.isNonEmptyArray=n.hasProperty=n.isPlainObject=n.getFormattedIpfsUrl=n.addUrlProtocolPrefix=n.getIpfsCIDv1AndPath=n.removeIpfsProtocolPrefix=n.validateMinimumIncrease=n.isGasPriceValue=n.isFeeMarketEIP1559Values=n.validateGasValues=n.getIncreasedPriceFromExisting=n.getIncreasedPriceHex=n.convertPriceToDecimal=n.isEIP1559Transaction=n.query=n.normalizeEnsName=n.timeoutFetch=n.handleFetch=n.successfulFetch=n.isSmartContractCode=n.validateTokenToWatch=n.validateTypedSignMessageDataV3=n.validateTypedSignMessageDataV1=n.validateSignMessageData=n.normalizeMessageData=n.validateTransaction=n.isValidHexAddress=n.toChecksumHexAddress=n.safelyExecuteWithTimeout=n.safelyExecute=n.normalizeTransaction=n.toHex=n.fromHex=n.hexToText=n.hexToBN=n.handleTransactionFetch=n.getEtherscanApiUrl=n.getBuyURL=n.weiHexToGweiDec=n.gweiDecToWEIBN=n.fractionBN=n.BNToHex=void 0;const s=e("ethereumjs-util"),a=e("ethjs-unit"),o=e("eth-rpc-errors"),u=i(e("eth-ens-namehash")),c=e("eth-sig-util"),l=e("jsonschema"),d=e("multiformats/cid"),h=i(e("fast-deep-equal")),f=e("./constants"),m=/^[0-9A-Fa-f]+$/gu,p={data:e=>s.addHexPrefix(e),from:e=>s.addHexPrefix(e).toLowerCase(),gas:e=>s.addHexPrefix(e),gasPrice:e=>s.addHexPrefix(e),nonce:e=>s.addHexPrefix(e),to:e=>s.addHexPrefix(e).toLowerCase(),value:e=>s.addHexPrefix(e),maxFeePerGas:e=>s.addHexPrefix(e),maxPriorityFeePerGas:e=>s.addHexPrefix(e),estimatedBaseFee:e=>s.addHexPrefix(e)};function g(e,t){let n="api";e!==f.MAINNET&&(n=`api-${e}`);let r=`${`https://${n}.etherscan.io`}/api?`;for(const e in t)t[e]&&(r+=`${e}=${t[e]}&`);return r+="tag=latest&page=1",r}function b(e){return new s.BN(s.stripHexPrefix(e),16)}function y(e,{allowNonPrefixed:t=!0}={}){const n=t?s.addHexPrefix(e):e;return!!s.isHexString(n)&&s.isValidAddress(n)}function v(e,t){return r(this,void 0,void 0,(function*(){const n=yield fetch(e,t);if(!n.ok)throw new Error(`Fetch failed with status '${n.status}' for request '${e}'`);return n}))}function w(e,t){return r(this,void 0,void 0,(function*(){const n=yield v(e,t);return yield n.json()}))}n.BNToHex=function(e){return s.addHexPrefix(e.toString(16))},n.fractionBN=function(e,t,n){const r=new s.BN(t),i=new s.BN(n);return e.mul(r).div(i)},n.gweiDecToWEIBN=function(e){if(Number.isNaN(e))return new s.BN(0);const t=e.toString().split("."),n=t[0]||"0";let r=t[1]||"";if(!r)return a.toWei(n,"gwei");if(r.length<=9)return a.toWei(`${n}.${r}`,"gwei");const i=r.slice(9)[0];r=r.slice(0,9);let o=a.toWei(`${n}.${r}`,"gwei");return Number(i)>=5&&(o=o.add(new s.BN(1))),o},n.weiHexToGweiDec=function(e){const t=new s.BN(s.stripHexPrefix(e),16);return a.fromWei(t,"gwei").toString(10)},n.getBuyURL=function(e="1",t,n=5){switch(e){case"1":return`https://buy.coinbase.com/?code=9ec56d01-7e81-5017-930c-513daa27bb6a&amount=${n}&address=${t}&crypto_currency=ETH`;case"3":return"https://faucet.metamask.io/";case"4":return"https://www.rinkeby.io/";case"5":return"https://goerli-faucet.slock.it/";case"42":return"https://github.com/kovan-testnet/faucet";default:return undefined}},n.getEtherscanApiUrl=g,n.handleTransactionFetch=function(e,t,n,i){return r(this,void 0,void 0,(function*(){const r={module:"account",address:t,startBlock:null==i?void 0:i.fromBlock,apikey:null==i?void 0:i.etherscanApiKey,offset:n.toString(),order:"desc"},s=w(g(e,Object.assign(Object.assign({},r),{action:"txlist"}))),a=w(g(e,Object.assign(Object.assign({},r),{action:"tokentx"})));let[o,u]=yield Promise.all([s,a]);return("0"===o.status||o.result.length<=0)&&(o={status:o.status,result:[]}),("0"===u.status||u.result.length<=0)&&(u={status:u.status,result:[]}),[o,u]}))},n.hexToBN=b,n.hexToText=function(e){try{const n=s.stripHexPrefix(e);return t.from(n,"hex").toString("utf8")}catch(t){return e}},n.fromHex=function(e){return s.BN.isBN(e)?e:new s.BN(b(e).toString(10))},n.toHex=function(e){return"string"==typeof e&&s.isHexString(e)?e:`0x${s.BN.isBN(e)?e.toString(16):new s.BN(e.toString(),10).toString(16)}`},n.normalizeTransaction=function(e){const t={from:""};let n;for(n in p)e[n]&&(t[n]=p[n](e[n]));return t},n.safelyExecute=function(e,t=!1,n){return r(this,void 0,void 0,(function*(){try{return yield e()}catch(e){return t&&console.error(e),null==n||n(e),undefined}}))},n.safelyExecuteWithTimeout=function(e,t=!1,n=500){return r(this,void 0,void 0,(function*(){try{return yield Promise.race([e(),new Promise(((e,t)=>setTimeout((()=>{t(new Error("timeout"))}),n)))])}catch(e){return t&&console.error(e),undefined}}))},n.toChecksumHexAddress=function(e){const t=s.addHexPrefix(e);return s.isHexString(t)?s.toChecksumAddress(t):t},n.isValidHexAddress=y,n.validateTransaction=function(e){if(!e.from||"string"!=typeof e.from||!y(e.from))throw new Error(`Invalid "from" address: ${e.from} must be a valid string.`);if("0x"===e.to||e.to===undefined){if(!e.data)throw new Error(`Invalid "to" address: ${e.to} must be a valid string.`);delete e.to}else if(e.to!==undefined&&!y(e.to))throw new Error(`Invalid "to" address: ${e.to} must be a valid string.`);if(e.value!==undefined){const t=e.value.toString();if(t.includes("-"))throw new Error(`Invalid "value": ${t} is not a positive number.`);if(t.includes("."))throw new Error(`Invalid "value": ${t} number must be denominated in wei.`);const n=parseInt(e.value,10);if(!(Number.isFinite(n)&&!Number.isNaN(n)&&!isNaN(Number(t))&&Number.isSafeInteger(n)))throw new Error(`Invalid "value": ${t} number must be a valid number.`)}},n.normalizeMessageData=function(e){try{const t=s.stripHexPrefix(e);if(t.match(m))return s.addHexPrefix(t)}catch(e){}return s.bufferToHex(t.from(e,"utf8"))},n.validateSignMessageData=function(e){const{from:t,data:n}=e;if(!t||"string"!=typeof t||!y(t))throw new Error(`Invalid "from" address: ${t} must be a valid string.`);if(!n||"string"!=typeof n)throw new Error(`Invalid message "data": ${n} must be a valid string.`)},n.validateTypedSignMessageDataV1=function(e){if(!e.from||"string"!=typeof e.from||!y(e.from))throw new Error(`Invalid "from" address: ${e.from} must be a valid string.`);if(!e.data||!Array.isArray(e.data))throw new Error(`Invalid message "data": ${e.data} must be a valid array.`);try{c.typedSignatureHash(e.data)}catch(e){throw new Error("Expected EIP712 typed data.")}},n.validateTypedSignMessageDataV3=function(e){if(!e.from||"string"!=typeof e.from||!y(e.from))throw new Error(`Invalid "from" address: ${e.from} must be a valid string.`);if(!e.data||"string"!=typeof e.data)throw new Error(`Invalid message "data": ${e.data} must be a valid array.`);let t;try{t=JSON.parse(e.data)}catch(e){throw new Error("Data must be passed as a valid JSON string.")}if(l.validate(t,c.TYPED_MESSAGE_SCHEMA).errors.length>0)throw new Error("Data must conform to EIP-712 schema. See https://git.io/fNtcx.")},n.validateTokenToWatch=function(e){const{address:t,symbol:n,decimals:r}=e;if(!t||!n||void 0===r)throw o.ethErrors.rpc.invalidParams("Must specify address, symbol, and decimals.");if("string"!=typeof n)throw o.ethErrors.rpc.invalidParams("Invalid symbol: not a string.");if(n.length>11)throw o.ethErrors.rpc.invalidParams(`Invalid symbol "${n}": longer than 11 characters.`);const i=parseInt(r,10);if(isNaN(i)||i>36||i<0)throw o.ethErrors.rpc.invalidParams(`Invalid decimals "${r}": must be 0 <= 36.`);if(!y(t))throw o.ethErrors.rpc.invalidParams(`Invalid address "${t}".`)},n.isSmartContractCode=function(e){return!!e&&("0x"!==e&&"0x0"!==e)},n.successfulFetch=v,n.handleFetch=w,n.timeoutFetch=function(e,t,n=500){return r(this,void 0,void 0,(function*(){return Promise.race([v(e,t),new Promise(((e,t)=>setTimeout((()=>{t(new Error("timeout"))}),n)))])}))},n.normalizeEnsName=function(e){if(e&&"string"==typeof e)try{const t=u.default.normalize(e.trim());if(t.match(/^(([\w\d-]+)\.)*[\w\d-]{7,}\.(eth|test)$/u))return t}catch(e){}return null},n.query=function(e,t,n=[]){return new Promise(((r,i)=>{const s=(e,t)=>{e?i(e):r(t)};"function"==typeof e[t]?e[t](...n,s):e.sendAsync({method:t,params:n},s)}))};n.isEIP1559Transaction=e=>{const t=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);return t(e,"maxFeePerGas")&&t(e,"maxPriorityFeePerGas")};n.convertPriceToDecimal=e=>parseInt(e===undefined?"0x0":e,16);n.getIncreasedPriceHex=(e,t)=>s.addHexPrefix(`${parseInt(""+e*t,10).toString(16)}`);n.getIncreasedPriceFromExisting=(e,t)=>n.getIncreasedPriceHex(n.convertPriceToDecimal(e),t);n.validateGasValues=e=>{Object.keys(e).forEach((t=>{const n=e[t];if("string"!=typeof n||!s.isHexString(n))throw new TypeError(`expected hex string for ${t} but received: ${n}`)}))};n.isFeeMarketEIP1559Values=e=>{var t,n;return(null===(t=e)||void 0===t?void 0:t.maxFeePerGas)!==undefined||(null===(n=e)||void 0===n?void 0:n.maxPriorityFeePerGas)!==undefined};function _(e){if(e.startsWith("ipfs://ipfs/"))return e.replace("ipfs://ipfs/","");if(e.startsWith("ipfs://"))return e.replace("ipfs://","");throw new Error("this method should not be used with non ipfs urls")}function k(e){const t=_(e),n=t.indexOf("/"),r=-1!==n?t.substring(0,n):t,i=-1!==n?t.substring(n):undefined;return{cid:d.CID.parse(r).toV1().toString(),path:i}}function E(e){return e.match(/(^http:\/\/)|(^https:\/\/)/u)?e:`https://${e}`}n.isGasPriceValue=e=>{var t;return(null===(t=e)||void 0===t?void 0:t.gasPrice)!==undefined},n.validateMinimumIncrease=function(e,t){const r=n.convertPriceToDecimal(e),i=n.convertPriceToDecimal(t);if(r>=i)return e;throw new Error(`The proposed value: ${r} should meet or exceed the minimum value: ${i}`)},n.removeIpfsProtocolPrefix=_,n.getIpfsCIDv1AndPath=k,n.addUrlProtocolPrefix=E,n.getFormattedIpfsUrl=function(e,t,n){const{host:r,protocol:i,origin:s}=new URL(E(e));if(n){const{cid:e,path:n}=k(t);return`${i}//${e}.ipfs.${r}${null!=n?n:""}`}return`${s}/ipfs/${_(t)}`},n.isPlainObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};n.hasProperty=(e,t)=>Reflect.hasOwnProperty.call(e,t),n.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},n.isValidJson=function(e){try{return h.default(e,JSON.parse(JSON.stringify(e)))}catch(e){return!1}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/util.js"}],[1404,{"../BaseControllerV2":1388,"../apis/token-service":1392,"../util":1450,"@metamask/contract-metadata":1049,"abort-controller":2057,"async-mutex":2116},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{u(r.next(e))}catch(e){s(e)}}function o(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.TokenListController=void 0;const a=s(e("@metamask/contract-metadata")),o=e("async-mutex"),u=s(e("abort-controller")),c=e("../BaseControllerV2"),l=e("../util"),d=e("../apis/token-service"),h={tokenList:{persist:!0,anonymous:!0},tokensChainsCache:{persist:!0,anonymous:!0}},f={tokenList:{},tokensChainsCache:{}};class m extends c.BaseController{constructor({chainId:e,useStaticTokenList:t,onNetworkStateChange:n,onPreferencesStateChange:i,interval:s=36e5,cacheRefreshThreshold:a=18e5,messenger:c,state:l}){super({name:"TokenListController",metadata:h,messenger:c,state:Object.assign(Object.assign({},f),l)}),this.mutex=new o.Mutex,this.intervalDelay=s,this.cacheRefreshThreshold=a,this.chainId=e,this.useStaticTokenList=t,this.abortController=new u.default,n((e=>r(this,void 0,void 0,(function*(){this.chainId!==e.provider.chainId&&(this.abortController.abort(),this.abortController=new u.default,this.chainId=e.provider.chainId,yield this.restart())})))),i((e=>r(this,void 0,void 0,(function*(){this.useStaticTokenList!==e.useStaticTokenList&&(this.abortController.abort(),this.abortController=new u.default,this.useStaticTokenList=e.useStaticTokenList,yield this.restart())}))))}start(){return r(this,void 0,void 0,(function*(){yield this.startPolling()}))}restart(){return r(this,void 0,void 0,(function*(){this.stopPolling(),yield this.startPolling()}))}stop(){this.stopPolling()}destroy(){super.destroy(),this.stopPolling()}stopPolling(){this.intervalId&&clearInterval(this.intervalId)}startPolling(){return r(this,void 0,void 0,(function*(){yield l.safelyExecute((()=>this.fetchTokenList())),this.intervalId=setInterval((()=>r(this,void 0,void 0,(function*(){yield l.safelyExecute((()=>this.fetchTokenList()))}))),this.intervalDelay)}))}fetchTokenList(){return r(this,void 0,void 0,(function*(){this.useStaticTokenList?yield this.fetchFromStaticTokenList():yield this.fetchFromDynamicTokenList()}))}fetchFromStaticTokenList(){return r(this,void 0,void 0,(function*(){const e={};for(const t in a.default){const n=a.default[t],{erc20:r,logo:s}=n,o=i(n,["erc20","logo"]);r&&(e[t]=Object.assign(Object.assign({},o),{address:t,iconUrl:s,occurrences:null}))}this.update((()=>({tokenList:e,tokensChainsCache:{}})))}))}fetchFromDynamicTokenList(){return r(this,void 0,void 0,(function*(){const e=yield this.mutex.acquire();try{const t=yield l.safelyExecute((()=>this.fetchFromCache())),n=this.state,{tokensChainsCache:r}=n,s=i(n,["tokensChainsCache"]),a={};if(t)for(const e of t)a[e.address]=e;else{const e=yield l.safelyExecute((()=>d.fetchTokenList(this.chainId,this.abortController.signal)));if(!e){const e=r[this.chainId]?r[this.chainId].data:[];for(const t of e)a[t.address]=t;return void this.update((()=>Object.assign(Object.assign({},s),{tokenList:a,tokensChainsCache:r})))}const t=e.filter((e=>e.occurrences&&e.occurrences>=2)),n=t.map((e=>e.symbol)),i=[...new Set(n.filter(((e,t)=>n.indexOf(e)!==t)))],o=t.filter((e=>!i.includes(e.symbol)));for(const e of o)a[e.address]=e}const o=Object.assign(Object.assign({},r),{[this.chainId]:{timestamp:Date.now(),data:Object.values(a)}});this.update((()=>Object.assign(Object.assign({},s),{tokenList:a,tokensChainsCache:o})))}finally{e()}}))}fetchFromCache(){return r(this,void 0,void 0,(function*(){const{tokensChainsCache:e}=this.state,t=e[this.chainId],n=Date.now();return(null==t?void 0:t.data)&&n-(null==t?void 0:t.timestamp)<this.cacheRefreshThreshold?t.data:null}))}fetchTokenMetadata(e){return r(this,void 0,void 0,(function*(){const t=yield this.mutex.acquire();try{return yield d.fetchTokenMetadata(this.chainId,e,this.abortController.signal)}finally{t()}}))}}n.TokenListController=m,n.default=m}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/assets/TokenListController.js"}],[1406,{"../BaseController":1387,"../constants":1408,"../util":1450,"@metamask/contract-metadata":1049,"@metamask/metamask-eth-abis":1228,"async-mutex":2116,ethers:3219,events:2479,uuid:6724},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{u(r.next(e))}catch(e){s(e)}}function o(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.TokensController=void 0;const s=e("events"),a=i(e("@metamask/contract-metadata")),o=e("@metamask/metamask-eth-abis"),u=e("uuid"),c=e("async-mutex"),l=e("ethers"),d=e("../BaseController"),h=e("../util"),f=e("../constants");var m;!function(e){e.accepted="accepted",e.failed="failed",e.pending="pending",e.rejected="rejected"}(m||(m={}));class p extends d.BaseController{constructor({onPreferencesStateChange:e,onNetworkStateChange:t,config:n,state:r}){super(n,r),this.mutex=new c.Mutex,this.hub=new s.EventEmitter,this.name="TokensController",this.defaultConfig=Object.assign({networkType:f.MAINNET,selectedAddress:"",chainId:"",provider:undefined},n),this.defaultState=Object.assign({allTokens:{},allIgnoredTokens:{},ignoredTokens:[],suggestedAssets:[],tokens:[]},r),this.initialize(),e((({selectedAddress:e})=>{var t,n;const{allTokens:r,allIgnoredTokens:i}=this.state,{chainId:s}=this.config;this.configure({selectedAddress:e}),this.update({tokens:(null===(t=r[s])||void 0===t?void 0:t[e])||[],ignoredTokens:(null===(n=i[s])||void 0===n?void 0:n[e])||[]})})),t((({provider:e})=>{var t,n;const{allTokens:r,allIgnoredTokens:i}=this.state,{selectedAddress:s}=this.config,{chainId:a}=e;this.configure({chainId:a}),this.ethersProvider=this._instantiateNewEthersProvider(),this.update({tokens:(null===(t=r[a])||void 0===t?void 0:t[s])||[],ignoredTokens:(null===(n=i[a])||void 0===n?void 0:n[s])||[]})}))}failSuggestedAsset(e,t){const n=Object.assign(Object.assign({},e),{status:m.failed,error:t});this.hub.emit(`${e.id}:finished`,n)}_instantiateNewEthersProvider(){var e;return new l.ethers.providers.Web3Provider(null===(e=this.config)||void 0===e?void 0:e.provider)}addToken(e,t,n,i){return r(this,void 0,void 0,(function*(){const r=yield this.mutex.acquire();try{e=h.toChecksumHexAddress(e);const{tokens:s,ignoredTokens:a}=this.state,o=yield this._detectIsERC721(e),u={address:e,symbol:t,decimals:n,image:i,isERC721:o},c=s.find((t=>t.address.toLowerCase()===e.toLowerCase()));if(c){const e=s.indexOf(c);s[e]=u}else s.push(u);const l=a.filter((t=>t.toLowerCase()!==e.toLowerCase())),{newAllTokens:d,newAllIgnoredTokens:f}=this._getNewAllTokensState(s,l);return this.update({allTokens:d,tokens:s,allIgnoredTokens:f,ignoredTokens:l}),s}finally{r()}}))}addTokens(e){return r(this,void 0,void 0,(function*(){const t=yield this.mutex.acquire(),{tokens:n,ignoredTokens:i}=this.state;try{e=yield Promise.all(e.map((e=>r(this,void 0,void 0,(function*(){return e.isERC721=yield this._detectIsERC721(e.address),e})))));let s=i;e.forEach((e=>{const{address:t,symbol:r,decimals:i,image:a,isERC721:o}=e,u=h.toChecksumHexAddress(t),c={address:u,symbol:r,decimals:i,image:a,isERC721:o},l=n.find((e=>e.address.toLowerCase()===u.toLowerCase()));if(l){const e=n.indexOf(l);n[e]=c}else n.push(c);s=s.filter((e=>e.toLowerCase()!==t.toLowerCase()))}));const{newAllTokens:a,newAllIgnoredTokens:o}=this._getNewAllTokensState(n,s);return this.update({tokens:n,allTokens:a,allIgnoredTokens:o,ignoredTokens:s}),n}finally{t()}}))}updateTokenType(e){return r(this,void 0,void 0,(function*(){const t=yield this._detectIsERC721(e),{tokens:n}=this.state,r=n.findIndex((t=>t.address.toLowerCase()===e.toLowerCase()));return n[r].isERC721=t,this.update({tokens:n}),n[r]}))}_detectIsERC721(e){var t,n;return r(this,void 0,void 0,(function*(){const r=h.toChecksumHexAddress(e);if(!0===(null===(t=a.default[r])||void 0===t?void 0:t.erc721))return Promise.resolve(!0);if(!0===(null===(n=a.default[r])||void 0===n?void 0:n.erc20))return Promise.resolve(!1);const i=yield this._createEthersContract(e,o.abiERC721,this.ethersProvider);try{return yield i.supportsInterface(f.ERC721_INTERFACE_ID)}catch(e){return!1}}))}_createEthersContract(e,t,n){return r(this,void 0,void 0,(function*(){return yield new l.ethers.Contract(e,t,n)}))}_generateRandomId(){return u.v1()}watchAsset(e,t){return r(this,void 0,void 0,(function*(){const n={asset:e,id:this._generateRandomId(),status:m.pending,time:Date.now(),type:t};try{if("ERC20"!==t)throw new Error(`Asset of type ${t} not supported`);h.validateTokenToWatch(e)}catch(e){return this.failSuggestedAsset(n,e),Promise.reject(e)}const r=new Promise(((e,t)=>{this.hub.once(`${n.id}:finished`,(n=>{switch(n.status){case m.accepted:return e(n.asset.address);case m.rejected:return t(new Error("User rejected to watch the asset."));case m.failed:return t(new Error(n.error.message));default:return t(new Error(`Unknown status: ${n.status}`))}}))})),{suggestedAssets:i}=this.state;return i.push(n),this.update({suggestedAssets:[...i]}),this.hub.emit("pendingSuggestedAsset",n),{result:r,suggestedAssetMeta:n}}))}acceptWatchAsset(e){return r(this,void 0,void 0,(function*(){const{suggestedAssets:t}=this.state,n=t.findIndex((({id:t})=>e===t)),r=t[n];try{if("ERC20"!==r.type)throw new Error(`Asset of type ${r.type} not supported`);{const{address:e,symbol:t,decimals:n,image:i}=r.asset;yield this.addToken(e,t,n,i),r.status=m.accepted,this.hub.emit(`${r.id}:finished`,r)}}catch(e){this.failSuggestedAsset(r,e)}const i=t.filter((({id:t})=>t!==e));this.update({suggestedAssets:[...i]})}))}rejectWatchAsset(e){const{suggestedAssets:t}=this.state,n=t.findIndex((({id:t})=>e===t)),r=t[n];if(!r)return;r.status=m.rejected,this.hub.emit(`${r.id}:finished`,r);const i=t.filter((({id:t})=>t!==e));this.update({suggestedAssets:[...i]})}removeAndIgnoreToken(e){e=h.toChecksumHexAddress(e);const{tokens:t,ignoredTokens:n}=this.state,r=n.find((t=>t.toLowerCase()===e.toLowerCase())),i=t.filter((t=>t.address.toLowerCase()!==e.toLowerCase()||(!r&&n.push(e),!1))),{newAllTokens:s,newAllIgnoredTokens:a}=this._getNewAllTokensState(i,n);this.update({allTokens:s,tokens:i,allIgnoredTokens:a,ignoredTokens:n})}_getNewAllTokensState(e,t){const{allTokens:n,allIgnoredTokens:r}=this.state,{chainId:i,selectedAddress:s}=this.config,a=n[i],o=r[i],u=Object.assign(Object.assign({},a),{[s]:e}),c=Object.assign(Object.assign({},o),{[s]:t});return{newAllTokens:Object.assign(Object.assign({},n),{[i]:u}),newAllIgnoredTokens:Object.assign(Object.assign({},r),{[i]:c})}}clearIgnoredTokens(){this.update({ignoredTokens:[],allIgnoredTokens:{}})}}n.TokensController=p,n.default=p}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/assets/TokensController.js"}],[1409,{"../BaseControllerV2":1388,"../util":1450,"./determineGasFeeCalculations":1410,"./fetchGasEstimatesViaEthFeeHistory":1412,"./gas-util":1422,"eth-query":3125,"ethereumjs-util":3195,uuid:6724},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{u(r.next(e))}catch(e){s(e)}}function o(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.GasFeeController=n.GAS_ESTIMATE_TYPES=n.LEGACY_GAS_PRICES_API_URL=void 0;const s=i(e("eth-query")),a=e("uuid"),o=e("ethereumjs-util"),u=e("../BaseControllerV2"),c=e("../util"),l=e("./gas-util"),d=i(e("./determineGasFeeCalculations")),h=i(e("./fetchGasEstimatesViaEthFeeHistory"));n.LEGACY_GAS_PRICES_API_URL="https://api.metaswap.codefi.network/gasPrices",n.GAS_ESTIMATE_TYPES={FEE_MARKET:"fee-market",LEGACY:"legacy",ETH_GASPRICE:"eth_gasPrice",NONE:"none"};const f={gasFeeEstimates:{persist:!0,anonymous:!1},estimatedGasFeeTimeBounds:{persist:!0,anonymous:!1},gasEstimateType:{persist:!0,anonymous:!1}},m={gasFeeEstimates:{},estimatedGasFeeTimeBounds:{},gasEstimateType:n.GAS_ESTIMATE_TYPES.NONE};class p extends u.BaseController{constructor({interval:e=15e3,messenger:t,state:i,getCurrentNetworkEIP1559Compatibility:a,getCurrentAccountEIP1559Compatibility:o,getChainId:u,getCurrentNetworkLegacyGasAPICompatibility:c,getProvider:l,onNetworkStateChange:d,legacyAPIEndpoint:h=n.LEGACY_GAS_PRICES_API_URL,EIP1559APIEndpoint:p="https://mock-gas-server.herokuapp.com/",clientId:g}){super({name:"GasFeeController",metadata:f,messenger:t,state:Object.assign(Object.assign({},m),i)}),this.intervalDelay=e,this.pollTokens=new Set,this.getCurrentNetworkEIP1559Compatibility=a,this.getCurrentNetworkLegacyGasAPICompatibility=c,this.getCurrentAccountEIP1559Compatibility=o,this.EIP1559APIEndpoint=p,this.legacyAPIEndpoint=h,this.getChainId=u,this.currentChainId=this.getChainId();const b=l();this.ethQuery=new s.default(b),this.clientId=g,d((()=>r(this,void 0,void 0,(function*(){const e=l(),t=this.getChainId();this.ethQuery=new s.default(e),this.currentChainId!==t&&(this.currentChainId=t,yield this.resetPolling())}))))}resetPolling(){return r(this,void 0,void 0,(function*(){if(0!==this.pollTokens.size){const e=Array.from(this.pollTokens);this.stopPolling(),yield this.getGasFeeEstimatesAndStartPolling(e[0]),e.slice(1).forEach((e=>{this.pollTokens.add(e)}))}}))}fetchGasFeeEstimates(e){return r(this,void 0,void 0,(function*(){return yield this._fetchGasFeeEstimateData(e)}))}getGasFeeEstimatesAndStartPolling(e){return r(this,void 0,void 0,(function*(){const t=e||a.v1();return this.pollTokens.add(t),1===this.pollTokens.size&&(yield this._fetchGasFeeEstimateData(),this._poll()),t}))}_fetchGasFeeEstimateData(e={}){return r(this,void 0,void 0,(function*(){const{shouldUpdateState:t=!0}=e;let n;const r=this.getCurrentNetworkLegacyGasAPICompatibility();let i=this.getChainId();"string"==typeof i&&o.isHexString(i)&&(i=parseInt(i,16));try{n=yield this.getEIP1559Compatibility()}catch(e){console.error(e),n=!1}const s=yield d.default({isEIP1559Compatible:n,isLegacyGasAPICompatible:r,fetchGasEstimates:l.fetchGasEstimates,fetchGasEstimatesUrl:this.EIP1559APIEndpoint.replace("<chain_id>",`${i}`),fetchGasEstimatesViaEthFeeHistory:h.default,fetchLegacyGasPriceEstimates:l.fetchLegacyGasPriceEstimates,fetchLegacyGasPriceEstimatesUrl:this.legacyAPIEndpoint.replace("<chain_id>",`${i}`),fetchEthGasPriceEstimate:l.fetchEthGasPriceEstimate,calculateTimeEstimate:l.calculateTimeEstimate,clientId:this.clientId,ethQuery:this.ethQuery});return t&&this.update((e=>{e.gasFeeEstimates=s.gasFeeEstimates,e.estimatedGasFeeTimeBounds=s.estimatedGasFeeTimeBounds,e.gasEstimateType=s.gasEstimateType})),s}))}disconnectPoller(e){this.pollTokens.delete(e),0===this.pollTokens.size&&this.stopPolling()}stopPolling(){this.intervalId&&clearInterval(this.intervalId),this.pollTokens.clear(),this.resetState()}destroy(){super.destroy(),this.stopPolling()}_poll(){this.intervalId&&clearInterval(this.intervalId),this.intervalId=setInterval((()=>r(this,void 0,void 0,(function*(){yield c.safelyExecute((()=>this._fetchGasFeeEstimateData()))}))),this.intervalDelay)}resetState(){this.update((()=>m))}getEIP1559Compatibility(){var e,t;return r(this,void 0,void 0,(function*(){const n=yield this.getCurrentNetworkEIP1559Compatibility(),r=null===(t=null===(e=this.getCurrentAccountEIP1559Compatibility)||void 0===e?void 0:e.call(this))||void 0===t||t;return n&&r}))}getTimeEstimate(e,t){return this.state.gasFeeEstimates&&this.state.gasEstimateType===n.GAS_ESTIMATE_TYPES.FEE_MARKET?l.calculateTimeEstimate(e,t,this.state.gasFeeEstimates):{}}}n.GasFeeController=p,n.default=p}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/gas/GasFeeController.js"}],[1437,{"./Caveat":1431,"./Permission":1432,"./PermissionController":1433,"./endowments":1434,"./rpc-methods":1440,"./utils":1442},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(n,"__esModule",{value:!0}),n.endowmentPermissionBuilders=n.permissionRpcMethods=void 0,s(e("./Caveat"),n),s(e("./Permission"),n),s(e("./PermissionController"),n),s(e("./utils"),n),n.permissionRpcMethods=a(e("./rpc-methods"));var o=e("./endowments");Object.defineProperty(n,"endowmentPermissionBuilders",{enumerable:!0,get:function(){return o.endowmentPermissionBuilders}})}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/permissions/index.js"}],[1446,{"../BaseController":1387,"../util":1450,"eth-phishing-detect/src/config.json":3123,"eth-phishing-detect/src/detector":3124,"punycode/":6227},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{u(r.next(e))}catch(e){s(e)}}function o(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.PhishingController=void 0;const s=e("punycode/"),a=i(e("eth-phishing-detect/src/config.json")),o=i(e("eth-phishing-detect/src/detector")),u=e("../BaseController"),c=e("../util");class l extends u.BaseController{constructor(e,t){super(e,t),this.configUrl="https://cdn.jsdelivr.net/gh/MetaMask/eth-phishing-detect@master/src/config.json",this.name="PhishingController",this.defaultConfig={interval:36e5},this.defaultState={phishing:a.default,whitelist:[]},this.detector=new o.default(this.defaultState.phishing),this.initialize(),this.poll()}poll(e){return r(this,void 0,void 0,(function*(){e&&this.configure({interval:e},!1,!1),this.handle&&clearTimeout(this.handle),yield c.safelyExecute((()=>this.updatePhishingLists())),this.handle=setTimeout((()=>{this.poll(this.config.interval)}),this.config.interval)}))}test(e){const t=s.toASCII(e);return-1===this.state.whitelist.indexOf(t)&&this.detector.check(t).result}bypass(e){const t=s.toASCII(e),{whitelist:n}=this.state;-1===n.indexOf(t)&&this.update({whitelist:[...n,t]})}updatePhishingLists(){return r(this,void 0,void 0,(function*(){if(this.disabled)return;const e=yield this.queryConfig(this.configUrl);e&&(this.detector=new o.default(e),this.update({phishing:e}))}))}queryConfig(e){return r(this,void 0,void 0,(function*(){const t=yield fetch(e,{cache:"no-cache"});switch(t.status){case 200:return yield t.json();case 304:case 403:return null;default:throw new Error(`Fetch failed with status '${t.status}' for request '${e}'`)}}))}}n.PhishingController=l,n.default=l}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/third-party/PhishingController.js"}],[1429,{"../BaseController":1387,"../constants":1408,"async-mutex":2116,"eth-json-rpc-infura/src/createProvider":3073,"eth-query":3125,"web3-provider-engine/subproviders/provider":6805,"web3-provider-engine/zero":6815},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{u(r.next(e))}catch(e){s(e)}}function o(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.NetworkController=n.NetworksChainId=void 0;const a=s(e("eth-query")),o=s(e("web3-provider-engine/subproviders/provider")),u=s(e("eth-json-rpc-infura/src/createProvider")),c=s(e("web3-provider-engine/zero")),l=e("async-mutex"),d=e("../BaseController"),h=e("../constants");var f;!function(e){e.mainnet="1",e.kovan="42",e.rinkeby="4",e.goerli="5",e.ropsten="3",e.localhost="",e.rpc="",e.optimism="10",e.optimismTest="69"}(f=n.NetworksChainId||(n.NetworksChainId={}));class m extends d.BaseController{constructor(e,t){super(e,t),this.internalProviderConfig={},this.mutex=new l.Mutex,this.name="NetworkController",this.defaultState={network:"loading",isCustomNetwork:!1,provider:{type:h.MAINNET,chainId:f.mainnet},properties:{isEIP1559Compatible:!1}},this.initialize(),this.getEIP1559Compatibility()}initializeProvider(e,t,n,r,i){switch(this.update({isCustomNetwork:this.getIsCustomNetwork(n)}),e){case"kovan":case h.MAINNET:case"rinkeby":case"goerli":case"optimism":case"optimismTest":case"ropsten":this.setupInfuraProvider(e);break;case"localhost":this.setupStandardProvider("http://localhost:8545");break;case h.RPC:t&&this.setupStandardProvider(t,n,r,i);break;default:throw new Error(`Unrecognized network type: '${e}'`)}}refreshNetwork(){this.update({network:"loading",properties:{}});const{rpcTarget:e,type:t,chainId:n,ticker:r}=this.state.provider;this.initializeProvider(t,e,n,r),this.lookupNetwork()}registerProvider(){this.provider.on("error",this.verifyNetwork.bind(this)),this.ethQuery=new a.default(this.provider)}setupInfuraProvider(e){const t=u.default({network:e,projectId:this.config.infuraProjectId}),n=new o.default(t),r=Object.assign(Object.assign({},this.internalProviderConfig),{dataSubprovider:n,engineParams:{blockTrackerProvider:t,pollingInterval:12e3}});this.updateProvider(c.default(r))}getIsCustomNetwork(e){return e!==f.mainnet&&e!==f.kovan&&e!==f.rinkeby&&e!==f.goerli&&e!==f.ropsten&&e!==f.localhost}setupStandardProvider(e,t,n,r){const i=Object.assign(Object.assign({},this.internalProviderConfig),{chainId:t,engineParams:{pollingInterval:12e3},nickname:r,rpcUrl:e,ticker:n});this.updateProvider(c.default(i))}updateProvider(e){this.safelyStopProvider(this.provider),this.provider=e,this.registerProvider()}safelyStopProvider(e){setTimeout((()=>{null==e||e.stop()}),500)}verifyNetwork(){"loading"===this.state.network&&this.lookupNetwork()}set providerConfig(e){this.internalProviderConfig=e;const{type:t,rpcTarget:n,chainId:r,ticker:i,nickname:s}=this.state.provider;this.initializeProvider(t,n,r,i,s),this.registerProvider(),this.lookupNetwork()}get providerConfig(){throw new Error("Property only used for setting")}lookupNetwork(){return r(this,void 0,void 0,(function*(){if(!this.ethQuery||!this.ethQuery.sendAsync)return;const e=yield this.mutex.acquire();this.ethQuery.sendAsync({method:"net_version"},((t,n)=>{this.update({network:t?"loading":n}),e()}))}))}setProviderType(e){const t=this.state.provider,{rpcTarget:n,chainId:r,nickname:s}=t,a=i(t,["rpcTarget","chainId","nickname"]);this.update({provider:Object.assign(Object.assign({},a),{type:e,ticker:"ETH",chainId:f[e]})}),this.refreshNetwork()}setRpcTarget(e,t,n,r){this.update({provider:Object.assign(Object.assign({},this.state.provider),{type:h.RPC,ticker:n,rpcTarget:e,chainId:t,nickname:r})}),this.refreshNetwork()}getEIP1559Compatibility(){var e;const{properties:t={}}=this.state;return t.isEIP1559Compatible||"function"!=typeof(null===(e=this.ethQuery)||void 0===e?void 0:e.sendAsync)?Promise.resolve(!0):new Promise(((e,n)=>{this.ethQuery.sendAsync({method:"eth_getBlockByNumber",params:["latest",!1]},((r,i)=>{if(r)n(r);else{const n=void 0!==i.baseFeePerGas;t.isEIP1559Compatible!==n&&this.update({properties:{isEIP1559Compatible:n}}),e(n)}}))}))}}n.NetworkController=m,n.default=m}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/network/NetworkController.js"}],[1424,{"../BaseController":1387,"../util":1450,"async-mutex":2116,"eth-keyring-controller":3116,"eth-sig-util":3131,"ethereumjs-util":3195,"ethereumjs-wallet":1480},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{u(r.next(e))}catch(e){s(e)}}function o(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.KeyringController=n.SignTypedDataVersion=n.AccountImportStrategy=n.KeyringTypes=void 0;const u=e("ethereumjs-util"),c=e("eth-sig-util"),l=s(e("ethereumjs-wallet")),d=o(e("eth-keyring-controller")),h=e("async-mutex"),f=e("../BaseController"),m=e("../util"),p=new WeakMap;var g,b;!function(e){e.simple="Simple Key Pair",e.hd="HD Key Tree"}(g=n.KeyringTypes||(n.KeyringTypes={})),function(e){e.privateKey="privateKey",e.json="json"}(n.AccountImportStrategy||(n.AccountImportStrategy={})),function(e){e.V1="V1",e.V3="V3",e.V4="V4"}(b=n.SignTypedDataVersion||(n.SignTypedDataVersion={}));class y extends f.BaseController{constructor({removeIdentity:e,syncIdentities:t,updateIdentities:n,setSelectedAddress:r},i,s){super(i,s),this.mutex=new h.Mutex,this.name="KeyringController",p.set(this,{keyring:new d.default(Object.assign({initState:s},i))}),this.defaultState=Object.assign(Object.assign({},p.get(this).keyring.store.getState()),{keyrings:[]}),this.removeIdentity=e,this.syncIdentities=t,this.updateIdentities=n,this.setSelectedAddress=r,this.initialize(),this.fullUpdate()}addNewAccount(){return a(this,void 0,void 0,(function*(){const e=p.get(this).keyring.getKeyringsByType("HD Key Tree")[0];if(!e)throw new Error("No HD keyring found");const t=yield p.get(this).keyring.getAccounts();yield p.get(this).keyring.addNewAccount(e);const n=yield p.get(this).keyring.getAccounts();return yield this.verifySeedPhrase(),this.updateIdentities(n),n.forEach((e=>{t.includes(e)||this.setSelectedAddress(e)})),this.fullUpdate()}))}addNewAccountWithoutUpdate(){return a(this,void 0,void 0,(function*(){const e=p.get(this).keyring.getKeyringsByType("HD Key Tree")[0];if(!e)throw new Error("No HD keyring found");return yield p.get(this).keyring.addNewAccount(e),yield this.verifySeedPhrase(),this.fullUpdate()}))}createNewVaultAndRestore(e,t){return a(this,void 0,void 0,(function*(){const n=yield this.mutex.acquire();try{this.updateIdentities([]);const r=yield p.get(this).keyring.createNewVaultAndRestore(e,t);return this.updateIdentities(yield p.get(this).keyring.getAccounts()),this.fullUpdate(),r}finally{n()}}))}createNewVaultAndKeychain(e){return a(this,void 0,void 0,(function*(){const t=yield this.mutex.acquire();try{const n=yield p.get(this).keyring.createNewVaultAndKeychain(e);return this.updateIdentities(yield p.get(this).keyring.getAccounts()),this.fullUpdate(),n}finally{t()}}))}isUnlocked(){return p.get(this).keyring.memStore.getState().isUnlocked}exportSeedPhrase(e){if(p.get(this).keyring.password===e)return p.get(this).keyring.keyrings[0].mnemonic;throw new Error("Invalid password")}exportAccount(e,t){if(p.get(this).keyring.password===e)return p.get(this).keyring.exportAccount(t);throw new Error("Invalid password")}getAccounts(){return p.get(this).keyring.getAccounts()}importAccountWithStrategy(e,t){return a(this,void 0,void 0,(function*(){let n;switch(e){case"privateKey":const[r]=t;if(!r)throw new Error("Cannot import an empty key.");const i=u.addHexPrefix(r);if(!u.isValidPrivate(u.toBuffer(i)))throw new Error("Cannot import invalid private key.");n=u.stripHexPrefix(i);break;case"json":let s;const[a,o]=t;try{s=l.thirdparty.fromEtherWallet(a,o)}catch(e){s=s||(yield l.default.fromV3(a,o,!0))}n=u.bufferToHex(s.getPrivateKey());break;default:throw new Error(`Unexpected import strategy: '${e}'`)}const r=yield p.get(this).keyring.addNewKeyring(g.simple,[n]),i=yield r.getAccounts(),s=yield p.get(this).keyring.getAccounts();return this.updateIdentities(s),this.setSelectedAddress(i[0]),this.fullUpdate()}))}removeAccount(e){return a(this,void 0,void 0,(function*(){return this.removeIdentity(e),yield p.get(this).keyring.removeAccount(e),this.fullUpdate()}))}setLocked(){return p.get(this).keyring.setLocked()}signMessage(e){return p.get(this).keyring.signMessage(e)}signPersonalMessage(e){return p.get(this).keyring.signPersonalMessage(e)}signTypedMessage(e,t){return a(this,void 0,void 0,(function*(){try{const n=c.normalize(e.from),{password:r}=p.get(this).keyring,i=yield this.exportAccount(r,n),s=u.toBuffer(u.addHexPrefix(i));switch(t){case b.V1:return c.signTypedDataLegacy(s,{data:e.data});case b.V3:return c.signTypedData(s,{data:JSON.parse(e.data)});case b.V4:return c.signTypedData_v4(s,{data:JSON.parse(e.data)});default:throw new Error(`Unexpected signTypedMessage version: '${t}'`)}}catch(e){throw new Error(`Keyring Controller signTypedMessage: ${e}`)}}))}signTransaction(e,t){return p.get(this).keyring.signTransaction(e,t)}submitPassword(e){return a(this,void 0,void 0,(function*(){yield p.get(this).keyring.submitPassword(e);const t=yield p.get(this).keyring.getAccounts();return yield this.syncIdentities(t),this.fullUpdate()}))}subscribe(e){p.get(this).keyring.store.subscribe(e)}unsubscribe(e){return p.get(this).keyring.store.unsubscribe(e)}onLock(e){return p.get(this).keyring.on("lock",e)}onUnlock(e){return p.get(this).keyring.on("unlock",e)}verifySeedPhrase(){return a(this,void 0,void 0,(function*(){const e=p.get(this).keyring.getKeyringsByType(g.hd)[0];if(!e)throw new Error("No HD keyring found.");const t=(yield e.serialize()).mnemonic,n=yield e.getAccounts();if(0===n.length)throw new Error("Cannot verify an empty keyring.");const r=new(p.get(this).keyring.getKeyringClassForType(g.hd))({mnemonic:t,numberOfAccounts:n.length}),i=yield r.getAccounts();if(i.length!==n.length)throw new Error("Seed phrase imported incorrect number of accounts.");return i.forEach(((e,t)=>{if(e.toLowerCase()!==n[t].toLowerCase())throw new Error("Seed phrase imported different accounts.")})),t}))}fullUpdate(){return a(this,void 0,void 0,(function*(){const e=yield Promise.all(p.get(this).keyring.keyrings.map(((e,t)=>a(this,void 0,void 0,(function*(){const n=yield e.getAccounts();return{accounts:Array.isArray(n)?n.map((e=>m.toChecksumHexAddress(e))):[],index:t,type:e.type}})))));return this.update({keyrings:[...e]}),p.get(this).keyring.fullUpdate()}))}}n.KeyringController=y,n.default=y}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/keyring/KeyringController.js"}],[1395,{"../BaseController":1387,"../constants":1408,"./Standards/CollectibleStandards/ERC1155/ERC1155Standard":1399,"./Standards/CollectibleStandards/ERC721/ERC721Standard":1400,"./Standards/ERC20Standard":1401,"single-call-balance-checker-abi":6547,web3:6823},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{u(r.next(e))}catch(e){s(e)}}function o(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.AssetsContractController=void 0;const s=i(e("web3")),a=i(e("single-call-balance-checker-abi")),o=e("../BaseController"),u=e("../constants"),c=e("./Standards/CollectibleStandards/ERC721/ERC721Standard"),l=e("./Standards/CollectibleStandards/ERC1155/ERC1155Standard"),d=e("./Standards/ERC20Standard"),h="AssetsContractController failed to set the provider correctly. A provider must be set for this method to be available";class f extends o.BaseController{constructor({onPreferencesStateChange:e},t,n){super(t,n),this.name="AssetsContractController",this.defaultConfig={provider:undefined,ipfsGateway:u.IPFS_DEFAULT_GATEWAY_URL},this.initialize(),e((({ipfsGateway:e})=>{this.configure({ipfsGateway:e})}))}set provider(e){this.web3=new s.default(e),this.erc721Standard=new c.ERC721Standard(this.web3),this.erc1155Standard=new l.ERC1155Standard(this.web3),this.erc20Standard=new d.ERC20Standard(this.web3)}get provider(){throw new Error("Property only used for setting")}getERC20BalanceOf(e,t){return r(this,void 0,void 0,(function*(){if(!this.erc20Standard)throw new Error(h);return this.erc20Standard.getBalanceOf(e,t)}))}getERC20TokenDecimals(e){return r(this,void 0,void 0,(function*(){if(this.erc20Standard===undefined)throw new Error(h);return yield this.erc20Standard.getTokenDecimals(e)}))}getERC721CollectibleTokenId(e,t,n){if(this.erc721Standard===undefined)throw new Error(h);return this.erc721Standard.getCollectibleTokenId(e,t,n)}getTokenStandardAndDetails(e,t,n){return r(this,void 0,void 0,(function*(){if(this.erc721Standard===undefined||this.erc1155Standard===undefined||this.erc20Standard===undefined)throw new Error(h);const{ipfsGateway:r}=this.config;try{return Object.assign({},yield this.erc721Standard.getDetails(e,r,n))}catch(e){}try{return Object.assign({},yield this.erc1155Standard.getDetails(e,r,n))}catch(e){}try{return Object.assign({},yield this.erc20Standard.getDetails(e,t))}catch(e){}throw new Error("Unable to determine contract standard")}))}getERC721TokenURI(e,t){return r(this,void 0,void 0,(function*(){if(this.erc721Standard===undefined)throw new Error(h);return this.erc721Standard.getTokenURI(e,t)}))}getERC721AssetName(e){return r(this,void 0,void 0,(function*(){if(this.erc721Standard===undefined)throw new Error(h);return this.erc721Standard.getAssetName(e)}))}getERC721AssetSymbol(e){return r(this,void 0,void 0,(function*(){if(this.erc721Standard===undefined)throw new Error(h);return this.erc721Standard.getAssetSymbol(e)}))}getERC721OwnerOf(e,t){return r(this,void 0,void 0,(function*(){if(this.erc721Standard===undefined)throw new Error(h);return this.erc721Standard.getOwnerOf(e,t)}))}getERC1155TokenURI(e,t){return r(this,void 0,void 0,(function*(){if(this.erc1155Standard===undefined)throw new Error(h);return this.erc1155Standard.getTokenURI(e,t)}))}getERC1155BalanceOf(e,t,n){return r(this,void 0,void 0,(function*(){if(this.erc1155Standard===undefined)throw new Error(h);return yield this.erc1155Standard.getBalanceOf(t,e,n)}))}transferSingleERC1155(e,t,n,i,s){return r(this,void 0,void 0,(function*(){if(this.erc1155Standard===undefined)throw new Error(h);return yield this.erc1155Standard.transferSingle(e,t,n,i,s)}))}getBalancesInSingleCall(e,t){return r(this,void 0,void 0,(function*(){const n=this.web3.eth.contract(a.default).at("0xb1f8e55c7f64d203c1400b9d8555d050f94adf39");return new Promise(((r,i)=>{n.balances([e],t,((e,n)=>{if(e)return void i(e);const s={};n.length>0&&t.forEach(((e,t)=>{const r=n[t];r.isZero()||(s[e]=r)})),r(s)}))}))}))}}n.AssetsContractController=f,n.default=f}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/assets/AssetsContractController.js"}],[1447,{"../BaseController":1387,"../constants":1408,"../util":1450,"@ethereumjs/common":439,"@ethereumjs/tx":443,"async-mutex":2116,"eth-method-registry":1477,"eth-query":3125,"eth-rpc-errors":3129,"ethereumjs-util":3195,events:2479,uuid:6724},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{u(r.next(e))}catch(e){s(e)}}function o(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.TransactionController=n.SPEED_UP_RATE=n.CANCEL_RATE=n.WalletDevice=n.TransactionStatus=void 0;const s=e("events"),a=e("ethereumjs-util"),o=e("eth-rpc-errors"),u=i(e("eth-method-registry")),c=i(e("eth-query")),l=i(e("@ethereumjs/common")),d=e("@ethereumjs/tx"),h=e("uuid"),f=e("async-mutex"),m=e("../BaseController"),p=e("../util"),g=e("../constants"),b="london";var y;!function(e){e.approved="approved",e.cancelled="cancelled",e.confirmed="confirmed",e.failed="failed",e.rejected="rejected",e.signed="signed",e.submitted="submitted",e.unapproved="unapproved"}(y=n.TransactionStatus||(n.TransactionStatus={})),function(e){e.MM_MOBILE="metamask_mobile",e.MM_EXTENSION="metamask_extension",e.OTHER="other_device"}(n.WalletDevice||(n.WalletDevice={})),n.CANCEL_RATE=1.5,n.SPEED_UP_RATE=1.1;class v extends m.BaseController{constructor({getNetworkState:e,onNetworkStateChange:t,getProvider:n},r,i){super(r,i),this.mutex=new f.Mutex,this.normalizeTokenTx=(e,t,n)=>{const r=1e3*parseInt(e.timeStamp,10),{to:i,from:s,gas:a,gasPrice:o,gasUsed:u,hash:c,contractAddress:l,tokenDecimal:d,tokenSymbol:f,value:m}=e;return{id:h.v1({msecs:r}),isTransfer:!0,networkID:t,chainId:n,status:y.confirmed,time:r,transaction:{chainId:1,from:s,gas:a,gasPrice:o,gasUsed:u,to:i,value:m},transactionHash:c,transferInformation:{contractAddress:l,decimals:Number(d),symbol:f},verifiedOnBlockchain:!1}},this.hub=new s.EventEmitter,this.name="TransactionController",this.defaultConfig={interval:15e3,txHistoryLimit:40},this.defaultState={methodData:{},transactions:[]},this.initialize();const a=n();this.getNetworkState=e,this.ethQuery=new c.default(a),this.registry=new u.default({provider:a}),t((()=>{const e=n();this.ethQuery=new c.default(e),this.registry=new u.default({provider:e})})),this.poll()}failTransaction(e,t){const n=Object.assign(Object.assign({},e),{error:t,status:y.failed});this.updateTransaction(n),this.hub.emit(`${e.id}:finished`,n)}registryLookup(e){return r(this,void 0,void 0,(function*(){const t=yield this.registry.lookup(e);return{registryMethod:t,parsedRegistryMethod:this.registry.parse(t)}}))}normalizeTx(e,t,n){const r=1e3*parseInt(e.timeStamp,10),i={blockNumber:e.blockNumber,id:h.v1({msecs:r}),networkID:t,chainId:n,time:r,transaction:{data:e.input,from:e.from,gas:p.BNToHex(new a.BN(e.gas)),gasPrice:p.BNToHex(new a.BN(e.gasPrice)),gasUsed:p.BNToHex(new a.BN(e.gasUsed)),nonce:p.BNToHex(new a.BN(e.nonce)),to:e.to,value:p.BNToHex(new a.BN(e.value))},transactionHash:e.hash,verifiedOnBlockchain:!1};return"0"===e.isError?Object.assign(Object.assign({},i),{status:y.confirmed}):Object.assign(Object.assign({},i),{error:new Error("Transaction failed"),status:y.failed})}poll(e){return r(this,void 0,void 0,(function*(){e&&this.configure({interval:e},!1,!1),this.handle&&clearTimeout(this.handle),yield p.safelyExecute((()=>this.queryTransactionStatuses())),this.handle=setTimeout((()=>{this.poll(this.config.interval)}),this.config.interval)}))}handleMethodData(e){return r(this,void 0,void 0,(function*(){const t=yield this.mutex.acquire();try{const{methodData:n}=this.state;if(Object.keys(n).find((t=>e===t)))return n[e];const r=yield this.registryLookup(e);return this.update({methodData:Object.assign(Object.assign({},n),{[e]:r})}),r}finally{t()}}))}addTransaction(e,t,n){return r(this,void 0,void 0,(function*(){const{provider:r,network:i}=this.getNetworkState(),{transactions:s}=this.state;e=p.normalizeTransaction(e),p.validateTransaction(e);const a={id:h.v1(),networkID:i,chainId:r.chainId,origin:t,status:y.unapproved,time:Date.now(),transaction:e,deviceConfirmedOn:n,verifiedOnBlockchain:!1};try{const{gas:t}=yield this.estimateGas(e);e.gas=t}catch(e){return this.failTransaction(a,e),Promise.reject(e)}const u=new Promise(((e,t)=>{this.hub.once(`${a.id}:finished`,(n=>{switch(n.status){case y.submitted:return e(n.transactionHash);case y.rejected:return t(o.ethErrors.provider.userRejectedRequest("User rejected the transaction"));case y.cancelled:return t(o.ethErrors.rpc.internal("User cancelled the transaction"));case y.failed:return t(o.ethErrors.rpc.internal(n.error.message));default:return t(o.ethErrors.rpc.internal(`MetaMask Tx Signature: Unknown problem: ${JSON.stringify(n)}`))}}))}));return s.push(a),this.update({transactions:this.trimTransactionsForState(s)}),this.hub.emit("unapprovedTransaction",a),{result:u,transactionMeta:a}}))}prepareUnsignedEthTx(e){return d.TransactionFactory.fromTxData(e,{common:this.getCommonConfiguration(),freeze:!1})}getCommonConfiguration(){const{network:e,provider:{type:t,chainId:n,nickname:r}}=this.getNetworkState();if(t!==g.RPC)return new l.default({chain:t,hardfork:b});const i={name:r,chainId:parseInt(n,undefined),networkId:parseInt(e,undefined)};return l.default.forCustomChain(g.MAINNET,i,b)}approveTransaction(e){return r(this,void 0,void 0,(function*(){const{transactions:t}=this.state,n=yield this.mutex.acquire(),{provider:r}=this.getNetworkState(),{chainId:i}=r,s=t.findIndex((({id:t})=>e===t)),o=t[s],{nonce:u}=o.transaction;try{const{from:e}=o.transaction;if(!this.sign)return n(),void this.failTransaction(o,new Error("No sign method defined."));if(!i)return n(),void this.failTransaction(o,new Error("No chainId defined."));const t=parseInt(i,undefined),{approved:r}=y,s=u||(yield p.query(this.ethQuery,"getTransactionCount",[e,"pending"]));o.status=r,o.transaction.nonce=s,o.transaction.chainId=t;const c=Object.assign(Object.assign({},o.transaction),{gasLimit:o.transaction.gas,chainId:t,nonce:s,status:r}),l=p.isEIP1559Transaction(o.transaction),d=l?Object.assign(Object.assign({},c),{maxFeePerGas:o.transaction.maxFeePerGas,maxPriorityFeePerGas:o.transaction.maxPriorityFeePerGas,estimatedBaseFee:o.transaction.estimatedBaseFee,type:2}):c;l&&delete d.gasPrice;const h=this.prepareUnsignedEthTx(d),f=yield this.sign(h,e);o.status=y.signed,this.updateTransaction(o);const m=a.bufferToHex(f.serialize());o.rawTransaction=m,this.updateTransaction(o);const g=yield p.query(this.ethQuery,"sendRawTransaction",[m]);o.transactionHash=g,o.status=y.submitted,this.updateTransaction(o),this.hub.emit(`${o.id}:finished`,o)}catch(e){this.failTransaction(o,e)}finally{n()}}))}cancelTransaction(e){const t=this.state.transactions.find((({id:t})=>t===e));if(!t)return;t.status=y.rejected,this.hub.emit(`${t.id}:finished`,t);const n=this.state.transactions.filter((({id:t})=>t!==e));this.update({transactions:this.trimTransactionsForState(n)})}stopTransaction(e,t){var i,s;return r(this,void 0,void 0,(function*(){t&&p.validateGasValues(t);const r=this.state.transactions.find((({id:t})=>t===e));if(!r)return;if(!this.sign)throw new Error("No sign method defined.");const o=p.getIncreasedPriceFromExisting(r.transaction.gasPrice,n.CANCEL_RATE),u=p.isGasPriceValue(t)&&t.gasPrice,c=u&&p.validateMinimumIncrease(u,o)||o,l=null===(i=r.transaction)||void 0===i?void 0:i.maxFeePerGas,d=p.getIncreasedPriceFromExisting(l,n.CANCEL_RATE),h=p.isFeeMarketEIP1559Values(t)&&t.maxFeePerGas,f=h&&p.validateMinimumIncrease(h,d)||l&&d,m=null===(s=r.transaction)||void 0===s?void 0:s.maxPriorityFeePerGas,g=p.getIncreasedPriceFromExisting(m,n.CANCEL_RATE),b=p.isFeeMarketEIP1559Values(t)&&t.maxPriorityFeePerGas,v=b&&p.validateMinimumIncrease(b,g)||m&&g,w=f&&v?{from:r.transaction.from,gasLimit:r.transaction.gas,maxFeePerGas:f,maxPriorityFeePerGas:v,type:2,nonce:r.transaction.nonce,to:r.transaction.from,value:"0x0"}:{from:r.transaction.from,gasLimit:r.transaction.gas,gasPrice:c,nonce:r.transaction.nonce,to:r.transaction.from,value:"0x0"},_=this.prepareUnsignedEthTx(w),k=yield this.sign(_,r.transaction.from),E=a.bufferToHex(k.serialize());yield p.query(this.ethQuery,"sendRawTransaction",[E]),r.status=y.cancelled,this.hub.emit(`${r.id}:finished`,r)}))}speedUpTransaction(e,t){var i,s;return r(this,void 0,void 0,(function*(){t&&p.validateGasValues(t);const r=this.state.transactions.find((({id:t})=>t===e));if(!r)return;if(!this.sign)throw new Error("No sign method defined.");const{transactions:o}=this.state,u=p.getIncreasedPriceFromExisting(r.transaction.gasPrice,n.SPEED_UP_RATE),c=p.isGasPriceValue(t)&&t.gasPrice,l=c&&p.validateMinimumIncrease(c,u)||u,d=null===(i=r.transaction)||void 0===i?void 0:i.maxFeePerGas,f=p.getIncreasedPriceFromExisting(d,n.SPEED_UP_RATE),m=p.isFeeMarketEIP1559Values(t)&&t.maxFeePerGas,g=m&&p.validateMinimumIncrease(m,f)||d&&f,b=null===(s=r.transaction)||void 0===s?void 0:s.maxPriorityFeePerGas,y=p.getIncreasedPriceFromExisting(b,n.SPEED_UP_RATE),v=p.isFeeMarketEIP1559Values(t)&&t.maxPriorityFeePerGas,w=v&&p.validateMinimumIncrease(v,y)||b&&y,_=g&&w?Object.assign(Object.assign({},r.transaction),{gasLimit:r.transaction.gas,maxFeePerGas:g,maxPriorityFeePerGas:w,type:2}):Object.assign(Object.assign({},r.transaction),{gasLimit:r.transaction.gas,gasPrice:l}),k=this.prepareUnsignedEthTx(_),E=yield this.sign(k,r.transaction.from),S=a.bufferToHex(E.serialize()),C=yield p.query(this.ethQuery,"sendRawTransaction",[S]),x=Object.assign(Object.assign({},r),{id:h.v1(),time:Date.now(),transactionHash:C}),M=g&&w?Object.assign(Object.assign({},x),{transaction:Object.assign(Object.assign({},r.transaction),{maxFeePerGas:g,maxPriorityFeePerGas:w})}):Object.assign(Object.assign({},x),{transaction:Object.assign(Object.assign({},r.transaction),{gasPrice:l})});o.push(M),this.update({transactions:this.trimTransactionsForState(o)}),this.hub.emit(`${r.id}:speedup`,M)}))}estimateGas(e){return r(this,void 0,void 0,(function*(){const t=Object.assign({},e),{gas:n,gasPrice:r,to:i,value:s,data:o}=t,u=void 0===r?yield p.query(this.ethQuery,"gasPrice"):r,{isCustomNetwork:c}=this.getNetworkState();if(void 0!==n)return{gas:n,gasPrice:u};const{gasLimit:l}=yield p.query(this.ethQuery,"getBlockByNumber",["latest",!1]),d=i?yield p.query(this.ethQuery,"getCode",[i]):undefined;if(!c&&(!i||i&&!o&&(!d||"0x"===d)))return{gas:"0x5208",gasPrice:u};t.data=o?a.addHexPrefix(o):o,t.value=void 0===s?"0x0":s;const h=p.hexToBN(l);t.gas=p.BNToHex(p.fractionBN(h,19,20));const f=yield p.query(this.ethQuery,"estimateGas",[t]),m=p.hexToBN(f),g=h.muln(.9),b=m.muln(1.5);return m.gt(g)||c?{gas:a.addHexPrefix(f),gasPrice:u}:b.lt(g)?{gas:a.addHexPrefix(p.BNToHex(b)),gasPrice:u}:{gas:a.addHexPrefix(p.BNToHex(g)),gasPrice:u}}))}queryTransactionStatuses(){return r(this,void 0,void 0,(function*(){const{transactions:e}=this.state,{provider:t,network:n}=this.getNetworkState(),{chainId:i}=t;let s=!1;yield p.safelyExecute((()=>Promise.all(e.map(((t,a)=>r(this,void 0,void 0,(function*(){const r=t.chainId===i||!t.chainId&&t.networkID===n;if(!t.verifiedOnBlockchain&&r){const[n,r]=yield this.blockchainTransactionStateReconciler(t);r&&(e[a]=n,s=r)}}))))))),s&&this.update({transactions:this.trimTransactionsForState(e)})}))}updateTransaction(e){const{transactions:t}=this.state;e.transaction=p.normalizeTransaction(e.transaction),p.validateTransaction(e.transaction);const n=t.findIndex((({id:t})=>e.id===t));t[n]=e,this.update({transactions:this.trimTransactionsForState(t)})}wipeTransactions(e){if(e)return void this.update({transactions:[]});const{provider:t,network:n}=this.getNetworkState(),{chainId:r}=t,i=this.state.transactions.filter((({networkID:e,chainId:t})=>!(t===r||!t&&e===n)));this.update({transactions:this.trimTransactionsForState(i)})}fetchAll(e,t){return r(this,void 0,void 0,(function*(){const{provider:n,network:i}=this.getNetworkState(),{chainId:s,type:a}=n,{transactions:o}=this.state;if(-1===["1","3","4","42"].indexOf(i))return undefined;const[u,c]=yield p.handleTransactionFetch(a,e,this.config.txHistoryLimit,t),l=u.result.map((e=>this.normalizeTx(e,i,s))),d=c.result.map((e=>this.normalizeTokenTx(e,i,s))),[h,f]=this.etherscanTransactionStateReconciler([...l,...d],o);let m;return f.sort(((e,t)=>e.time<t.time?-1:1)),f.forEach((t=>r(this,void 0,void 0,(function*(){if((t.chainId===s||!t.chainId&&t.networkID===i)&&t.transaction.to&&t.transaction.to.toLowerCase()===e.toLowerCase()&&t.blockNumber&&(!m||parseInt(m,10)<parseInt(t.blockNumber,10))&&(m=t.blockNumber),t.toSmartContract===undefined)if(!t.transaction.to||t.transaction.data&&"0x"===t.transaction.data)t.toSmartContract=!1;else{const e=yield p.query(this.ethQuery,"getCode",[t.transaction.to]);t.toSmartContract=p.isSmartContractCode(e)}})))),h&&this.update({transactions:this.trimTransactionsForState(f)}),m}))}trimTransactionsForState(e){const t=new Set,n=e.reverse().filter((e=>{const{chainId:n,networkID:r,status:i,transaction:s,time:a}=e;if(s){const e=`${s.nonce}-${null!=n?n:r}-${new Date(a).toDateString()}`;if(t.has(e))return!0;if(t.size<this.config.txHistoryLimit||!this.isFinalState(i))return t.add(e),!0}return!1}));return n.reverse(),n}isFinalState(e){return e===y.rejected||e===y.confirmed||e===y.failed||e===y.cancelled}blockchainTransactionStateReconciler(e){return r(this,void 0,void 0,(function*(){const{status:t,transactionHash:n}=e;switch(t){case y.confirmed:const t=yield p.query(this.ethQuery,"getTransactionReceipt",[n]);if(!t)return[e,!1];if(e.verifiedOnBlockchain=!0,e.transaction.gasUsed=t.gasUsed,0===Number(t.status)){const t=new Error("Transaction failed. The transaction was reversed");return this.failTransaction(e,t),[e,!1]}return[e,!0];case y.submitted:const r=yield p.query(this.ethQuery,"getTransactionByHash",[n]);if(!r){if(yield this.checkTxReceiptStatusIsFailed(n)){const t=new Error("Transaction failed. The transaction was dropped or replaced by a new one");this.failTransaction(e,t)}}return(null==r?void 0:r.blockNumber)?(e.status=y.confirmed,this.hub.emit(`${e.id}:confirmed`,e),[e,!0]):[e,!1];default:return[e,!1]}}))}checkTxReceiptStatusIsFailed(e){return r(this,void 0,void 0,(function*(){const t=yield p.query(this.ethQuery,"getTransactionReceipt",[e]);return!!t&&0===Number(t.status)}))}etherscanTransactionStateReconciler(e,t){const n=this.getUpdatedTransactions(e,t),r=this.getNewTransactions(e,t),i=t.map((e=>{const t=n.findIndex((({transactionHash:t})=>t===e.transactionHash));return-1===t?e:n[t]}));return[r.length>0||i.length>0,[...r,...i]]}getNewTransactions(e,t){return e.filter((e=>!t.find((({transactionHash:t})=>t===e.transactionHash))))}getUpdatedTransactions(e,t){return e.filter((e=>t.find((t=>e.transactionHash===t.transactionHash&&this.isTransactionOutdated(e,t)))))}isTransactionOutdated(e,t){const n=this.isStatusOutdated(e.transactionHash,t.transactionHash,e.status,t.status),r=this.isGasDataOutdated(e.transaction.gasUsed,t.transaction.gasUsed);return n||r}isStatusOutdated(e,t,n,r){return e===t&&n!==r}isGasDataOutdated(e,t){return e!==t}}n.TransactionController=v,n.default=v}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/transaction/TransactionController.js"}],[1199,{"../constants":1197,"../utils":1203,buffer:2478,crypto:2592,keccak:5447,secp256k1:6461},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.deriveChildKey=n.privateKeyToEthAddress=void 0;const i=r(e("crypto")),s=r(e("secp256k1")),a=r(e("keccak")),o=e("../constants"),u=e("../utils"),c=2147483648;n.privateKeyToEthAddress=function(e){if(!t.isBuffer(e)||!u.isValidBufferKey(e))throw new Error("Invalid key: The key must be a 64-byte, non-zero Buffer.");const n=e.slice(0,32),r=s.default.publicKeyCreate(new Uint8Array(n),!1).slice(1);return function(e,t="256"){return a.default(`keccak${t}`).update(e).digest()}(t.from(r)).slice(-20)},n.deriveChildKey=function(e,n){if(!n)throw new Error("Invalid parameters: Must specify a parent key.");if(n.length!==o.BUFFER_KEY_LENGTH)throw new Error("Invalid parent key: Must be 64 bytes long.");const r=e.includes("'"),a=e.split("'")[0],u=parseInt(a,10);if(!/^\d+$/u.test(a)||!Number.isInteger(u)||u<0||u>=c)throw new Error("Invalid BIP-32 index: The index must be a non-negative decimal integer less than 2147483648.");const l=n.slice(0,32),d=n.slice(32),h=function({parentPrivateKey:e,childIndex:n,isHardened:r}){if(r){const r=t.allocUnsafe(4);r.writeUInt32BE(n+c,0);const i=e,s=t.alloc(1,0);return t.concat([s,i,r])}const i=t.allocUnsafe(4);i.writeUInt32BE(n,0);const a=s.default.publicKeyCreate(new Uint8Array(e),!0);return t.concat([a,i])}({parentPrivateKey:l,childIndex:u,isHardened:r}),{privateKey:f,extraEntropy:m}=function({parentPrivateKey:e,parentExtraEntropy:t,secretExtension:n}){const r=i.default.createHmac("sha512",t).update(n).digest(),a=r.slice(0,32),o=r.slice(32);return{privateKey:s.default.privateKeyTweakAdd(new Uint8Array(e),new Uint8Array(a)),extraEntropy:o}}({parentPrivateKey:l,parentExtraEntropy:d,secretExtension:h});return t.concat([f,m])}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/key-tree",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/key-tree/dist/derivers/bip32.js"}],[1200,{bip39:1205,buffer:2478,crypto:2592},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.createBip39KeyFromSeed=n.deriveChildKey=n.bip39MnemonicToMultipath=void 0;const i=r(e("crypto")),s=e("bip39"),a=t.from("Bitcoin seed","utf8");function o(e){return i.default.createHmac("sha512",a).update(e).digest()}n.bip39MnemonicToMultipath=function(e){return`bip39:${e.toLowerCase().trim()}`},n.deriveChildKey=function(e,t){return o(s.mnemonicToSeedSync(e))},n.createBip39KeyFromSeed=o}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/key-tree",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/key-tree/dist/derivers/bip39.js"}],[3010,{immediate:5084},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=e("immediate")}}},{package:"abstract-leveldown",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/encoding-down/node_modules/abstract-leveldown/next-tick-browser.js"}],[3011,{xtend:6886,"xtend/mutable":6887},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("xtend"),i=e("xtend/mutable");t.exports=function(){var e=r.apply(null,arguments);return i(e,{bufferKeys:e.bufferKeys||!1,snapshots:e.snapshots||!1,permanence:e.permanence||!1,seek:e.seek||!1,clear:e.clear||!1,status:e.status||!1,createIfMissing:e.createIfMissing||!1,errorIfExists:e.errorIfExists||!1,deferredOpen:e.deferredOpen||!1,openCallback:e.openCallback||!1,promises:e.promises||!1,streams:e.streams||!1,encodings:e.encodings||!1,additionalMethods:r(e.additionalMethods)})}}}},{package:"level-supports",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/encoding-down/node_modules/level-supports/index.js"}],[5535,{"./bn":5533},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./bn");function i(e,t,n){null===e&&null===t&&null===n?(this.x=i.one,this.y=i.one,this.z=i.zero):(this.x=e,this.y=t,this.z=n),this.zOne=this.z===i.one}i.zero=r.fromNumber(0),i.one=r.fromNumber(1),i.prototype.neg=function(){return this.inf?this:new i(this.x,this.y.redNeg(),this.z)},i.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;var t=e.z.redSqr(),n=this.z.redSqr(),r=this.x.redMul(t),s=e.x.redMul(n),a=this.y.redMul(t).redMul(e.z),o=e.y.redMul(n).redMul(this.z),u=r.redSub(s),c=a.redSub(o);if(u.isZero())return c.isZero()?this.dbl():new i(null,null,null);var l=u.redSqr(),d=r.redMul(l),h=l.redMul(u),f=c.redSqr().redIAdd(h).redISub(d).redISub(d);return new i(f,c.redMul(d.redISub(f)).redISub(a.redMul(h)),this.z.redMul(e.z).redMul(u))},i.prototype.mixedAdd=function(e){if(this.inf)return e.toECJPoint();if(e.inf)return this;var t=this.z.redSqr(),n=this.x,r=e.x.redMul(t),s=this.y,a=e.y.redMul(t).redMul(this.z),o=n.redSub(r),u=s.redSub(a);if(o.isZero())return u.isZero()?this.dbl():new i(null,null,null);var c=o.redSqr(),l=n.redMul(c),d=c.redMul(o),h=u.redSqr().redIAdd(d).redISub(l).redISub(l);return new i(h,u.redMul(l.redISub(h)).redISub(s.redMul(d)),this.z.redMul(o))},i.prototype.dbl=function(){if(this.inf)return this;var e,t,n;if(this.zOne){var r=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),o=this.x.redAdd(s).redSqr().redISub(r).redISub(a);o=o.redIAdd(o);var u=r.redAdd(r).redIAdd(r),c=u.redSqr().redISub(o).redISub(o),l=a.redIAdd(a).redIAdd(a).redIAdd(a);e=c,t=u.redMul(o.redISub(c)).redISub(l),n=this.y.redAdd(this.y)}else{var d=this.x.redSqr(),h=this.y.redSqr(),f=h.redSqr(),m=this.x.redAdd(h).redSqr().redISub(d).redISub(f);m=m.redIAdd(m);var p=d.redAdd(d).redIAdd(d),g=p.redSqr(),b=f.redIAdd(f).redIAdd(f).redIAdd(f);e=g.redISub(m).redISub(m),t=p.redMul(m.redISub(e)).redISub(b),n=(n=this.y.redMul(this.z)).redIAdd(n)}return new i(e,t,n)},i.prototype.dblp=function(e){if(0===e||this.inf)return this;for(var t=this,n=0;n<e;n++)t=t.dbl();return t},Object.defineProperty(i.prototype,"inf",{enumerable:!0,get:function(){return this.z.isZero()}}),t.exports=i}}},{package:"secp256k1",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/libp2p-crypto/node_modules/secp256k1/lib/js/ecjpoint.js"}],[5534,{},function(){with(this)return function(){"use strict";return function(e,t,n){n.umulTo10x10=function(e,t,n){var r,i,s,a=e.words,o=t.words,u=n.words,c=0,l=0|a[0],d=8191&l,h=l>>>13,f=0|a[1],m=8191&f,p=f>>>13,g=0|a[2],b=8191&g,y=g>>>13,v=0|a[3],w=8191&v,_=v>>>13,k=0|a[4],E=8191&k,S=k>>>13,C=0|a[5],x=8191&C,M=C>>>13,R=0|a[6],T=8191&R,A=R>>>13,P=0|a[7],I=8191&P,j=P>>>13,O=0|a[8],N=8191&O,L=O>>>13,B=0|a[9],U=8191&B,D=B>>>13,F=0|o[0],H=8191&F,q=F>>>13,G=0|o[1],W=8191&G,$=G>>>13,V=0|o[2],z=8191&V,K=V>>>13,Z=0|o[3],Y=8191&Z,X=Z>>>13,J=0|o[4],Q=8191&J,ee=J>>>13,te=0|o[5],ne=8191&te,re=te>>>13,ie=0|o[6],se=8191&ie,ae=ie>>>13,oe=0|o[7],ue=8191&oe,ce=oe>>>13,le=0|o[8],de=8191&le,he=le>>>13,fe=0|o[9],me=8191&fe,pe=fe>>>13;n.length=19,r=Math.imul(d,H),i=Math.imul(d,q);var ge=c+r+((8191&(i+=Math.imul(h,H)))<<13);c=(s=Math.imul(h,q))+(i>>>13)+(ge>>>26),ge&=67108863,r=Math.imul(m,H),i=Math.imul(m,q),i+=Math.imul(p,H),s=Math.imul(p,q),r+=Math.imul(d,W),i+=Math.imul(d,$);var be=c+r+((8191&(i+=Math.imul(h,W)))<<13);c=(s+=Math.imul(h,$))+(i>>>13)+(be>>>26),be&=67108863,r=Math.imul(b,H),i=Math.imul(b,q),i+=Math.imul(y,H),s=Math.imul(y,q),r+=Math.imul(m,W),i+=Math.imul(m,$),i+=Math.imul(p,W),s+=Math.imul(p,$),r+=Math.imul(d,z),i+=Math.imul(d,K);var ye=c+r+((8191&(i+=Math.imul(h,z)))<<13);c=(s+=Math.imul(h,K))+(i>>>13)+(ye>>>26),ye&=67108863,r=Math.imul(w,H),i=Math.imul(w,q),i+=Math.imul(_,H),s=Math.imul(_,q),r+=Math.imul(b,W),i+=Math.imul(b,$),i+=Math.imul(y,W),s+=Math.imul(y,$),r+=Math.imul(m,z),i+=Math.imul(m,K),i+=Math.imul(p,z),s+=Math.imul(p,K),r+=Math.imul(d,Y),i+=Math.imul(d,X);var ve=c+r+((8191&(i+=Math.imul(h,Y)))<<13);c=(s+=Math.imul(h,X))+(i>>>13)+(ve>>>26),ve&=67108863,r=Math.imul(E,H),i=Math.imul(E,q),i+=Math.imul(S,H),s=Math.imul(S,q),r+=Math.imul(w,W),i+=Math.imul(w,$),i+=Math.imul(_,W),s+=Math.imul(_,$),r+=Math.imul(b,z),i+=Math.imul(b,K),i+=Math.imul(y,z),s+=Math.imul(y,K),r+=Math.imul(m,Y),i+=Math.imul(m,X),i+=Math.imul(p,Y),s+=Math.imul(p,X),r+=Math.imul(d,Q),i+=Math.imul(d,ee);var we=c+r+((8191&(i+=Math.imul(h,Q)))<<13);c=(s+=Math.imul(h,ee))+(i>>>13)+(we>>>26),we&=67108863,r=Math.imul(x,H),i=Math.imul(x,q),i+=Math.imul(M,H),s=Math.imul(M,q),r+=Math.imul(E,W),i+=Math.imul(E,$),i+=Math.imul(S,W),s+=Math.imul(S,$),r+=Math.imul(w,z),i+=Math.imul(w,K),i+=Math.imul(_,z),s+=Math.imul(_,K),r+=Math.imul(b,Y),i+=Math.imul(b,X),i+=Math.imul(y,Y),s+=Math.imul(y,X),r+=Math.imul(m,Q),i+=Math.imul(m,ee),i+=Math.imul(p,Q),s+=Math.imul(p,ee),r+=Math.imul(d,ne),i+=Math.imul(d,re);var _e=c+r+((8191&(i+=Math.imul(h,ne)))<<13);c=(s+=Math.imul(h,re))+(i>>>13)+(_e>>>26),_e&=67108863,r=Math.imul(T,H),i=Math.imul(T,q),i+=Math.imul(A,H),s=Math.imul(A,q),r+=Math.imul(x,W),i+=Math.imul(x,$),i+=Math.imul(M,W),s+=Math.imul(M,$),r+=Math.imul(E,z),i+=Math.imul(E,K),i+=Math.imul(S,z),s+=Math.imul(S,K),r+=Math.imul(w,Y),i+=Math.imul(w,X),i+=Math.imul(_,Y),s+=Math.imul(_,X),r+=Math.imul(b,Q),i+=Math.imul(b,ee),i+=Math.imul(y,Q),s+=Math.imul(y,ee),r+=Math.imul(m,ne),i+=Math.imul(m,re),i+=Math.imul(p,ne),s+=Math.imul(p,re),r+=Math.imul(d,se),i+=Math.imul(d,ae);var ke=c+r+((8191&(i+=Math.imul(h,se)))<<13);c=(s+=Math.imul(h,ae))+(i>>>13)+(ke>>>26),ke&=67108863,r=Math.imul(I,H),i=Math.imul(I,q),i+=Math.imul(j,H),s=Math.imul(j,q),r+=Math.imul(T,W),i+=Math.imul(T,$),i+=Math.imul(A,W),s+=Math.imul(A,$),r+=Math.imul(x,z),i+=Math.imul(x,K),i+=Math.imul(M,z),s+=Math.imul(M,K),r+=Math.imul(E,Y),i+=Math.imul(E,X),i+=Math.imul(S,Y),s+=Math.imul(S,X),r+=Math.imul(w,Q),i+=Math.imul(w,ee),i+=Math.imul(_,Q),s+=Math.imul(_,ee),r+=Math.imul(b,ne),i+=Math.imul(b,re),i+=Math.imul(y,ne),s+=Math.imul(y,re),r+=Math.imul(m,se),i+=Math.imul(m,ae),i+=Math.imul(p,se),s+=Math.imul(p,ae),r+=Math.imul(d,ue),i+=Math.imul(d,ce);var Ee=c+r+((8191&(i+=Math.imul(h,ue)))<<13);c=(s+=Math.imul(h,ce))+(i>>>13)+(Ee>>>26),Ee&=67108863,r=Math.imul(N,H),i=Math.imul(N,q),i+=Math.imul(L,H),s=Math.imul(L,q),r+=Math.imul(I,W),i+=Math.imul(I,$),i+=Math.imul(j,W),s+=Math.imul(j,$),r+=Math.imul(T,z),i+=Math.imul(T,K),i+=Math.imul(A,z),s+=Math.imul(A,K),r+=Math.imul(x,Y),i+=Math.imul(x,X),i+=Math.imul(M,Y),s+=Math.imul(M,X),r+=Math.imul(E,Q),i+=Math.imul(E,ee),i+=Math.imul(S,Q),s+=Math.imul(S,ee),r+=Math.imul(w,ne),i+=Math.imul(w,re),i+=Math.imul(_,ne),s+=Math.imul(_,re),r+=Math.imul(b,se),i+=Math.imul(b,ae),i+=Math.imul(y,se),s+=Math.imul(y,ae),r+=Math.imul(m,ue),i+=Math.imul(m,ce),i+=Math.imul(p,ue),s+=Math.imul(p,ce),r+=Math.imul(d,de),i+=Math.imul(d,he);var Se=c+r+((8191&(i+=Math.imul(h,de)))<<13);c=(s+=Math.imul(h,he))+(i>>>13)+(Se>>>26),Se&=67108863,r=Math.imul(U,H),i=Math.imul(U,q),i+=Math.imul(D,H),s=Math.imul(D,q),r+=Math.imul(N,W),i+=Math.imul(N,$),i+=Math.imul(L,W),s+=Math.imul(L,$),r+=Math.imul(I,z),i+=Math.imul(I,K),i+=Math.imul(j,z),s+=Math.imul(j,K),r+=Math.imul(T,Y),i+=Math.imul(T,X),i+=Math.imul(A,Y),s+=Math.imul(A,X),r+=Math.imul(x,Q),i+=Math.imul(x,ee),i+=Math.imul(M,Q),s+=Math.imul(M,ee),r+=Math.imul(E,ne),i+=Math.imul(E,re),i+=Math.imul(S,ne),s+=Math.imul(S,re),r+=Math.imul(w,se),i+=Math.imul(w,ae),i+=Math.imul(_,se),s+=Math.imul(_,ae),r+=Math.imul(b,ue),i+=Math.imul(b,ce),i+=Math.imul(y,ue),s+=Math.imul(y,ce),r+=Math.imul(m,de),i+=Math.imul(m,he),i+=Math.imul(p,de),s+=Math.imul(p,he),r+=Math.imul(d,me),i+=Math.imul(d,pe);var Ce=c+r+((8191&(i+=Math.imul(h,me)))<<13);c=(s+=Math.imul(h,pe))+(i>>>13)+(Ce>>>26),Ce&=67108863,r=Math.imul(U,W),i=Math.imul(U,$),i+=Math.imul(D,W),s=Math.imul(D,$),r+=Math.imul(N,z),i+=Math.imul(N,K),i+=Math.imul(L,z),s+=Math.imul(L,K),r+=Math.imul(I,Y),i+=Math.imul(I,X),i+=Math.imul(j,Y),s+=Math.imul(j,X),r+=Math.imul(T,Q),i+=Math.imul(T,ee),i+=Math.imul(A,Q),s+=Math.imul(A,ee),r+=Math.imul(x,ne),i+=Math.imul(x,re),i+=Math.imul(M,ne),s+=Math.imul(M,re),r+=Math.imul(E,se),i+=Math.imul(E,ae),i+=Math.imul(S,se),s+=Math.imul(S,ae),r+=Math.imul(w,ue),i+=Math.imul(w,ce),i+=Math.imul(_,ue),s+=Math.imul(_,ce),r+=Math.imul(b,de),i+=Math.imul(b,he),i+=Math.imul(y,de),s+=Math.imul(y,he),r+=Math.imul(m,me),i+=Math.imul(m,pe);var xe=c+r+((8191&(i+=Math.imul(p,me)))<<13);c=(s+=Math.imul(p,pe))+(i>>>13)+(xe>>>26),xe&=67108863,r=Math.imul(U,z),i=Math.imul(U,K),i+=Math.imul(D,z),s=Math.imul(D,K),r+=Math.imul(N,Y),i+=Math.imul(N,X),i+=Math.imul(L,Y),s+=Math.imul(L,X),r+=Math.imul(I,Q),i+=Math.imul(I,ee),i+=Math.imul(j,Q),s+=Math.imul(j,ee),r+=Math.imul(T,ne),i+=Math.imul(T,re),i+=Math.imul(A,ne),s+=Math.imul(A,re),r+=Math.imul(x,se),i+=Math.imul(x,ae),i+=Math.imul(M,se),s+=Math.imul(M,ae),r+=Math.imul(E,ue),i+=Math.imul(E,ce),i+=Math.imul(S,ue),s+=Math.imul(S,ce),r+=Math.imul(w,de),i+=Math.imul(w,he),i+=Math.imul(_,de),s+=Math.imul(_,he),r+=Math.imul(b,me),i+=Math.imul(b,pe);var Me=c+r+((8191&(i+=Math.imul(y,me)))<<13);c=(s+=Math.imul(y,pe))+(i>>>13)+(Me>>>26),Me&=67108863,r=Math.imul(U,Y),i=Math.imul(U,X),i+=Math.imul(D,Y),s=Math.imul(D,X),r+=Math.imul(N,Q),i+=Math.imul(N,ee),i+=Math.imul(L,Q),s+=Math.imul(L,ee),r+=Math.imul(I,ne),i+=Math.imul(I,re),i+=Math.imul(j,ne),s+=Math.imul(j,re),r+=Math.imul(T,se),i+=Math.imul(T,ae),i+=Math.imul(A,se),s+=Math.imul(A,ae),r+=Math.imul(x,ue),i+=Math.imul(x,ce),i+=Math.imul(M,ue),s+=Math.imul(M,ce),r+=Math.imul(E,de),i+=Math.imul(E,he),i+=Math.imul(S,de),s+=Math.imul(S,he),r+=Math.imul(w,me),i+=Math.imul(w,pe);var Re=c+r+((8191&(i+=Math.imul(_,me)))<<13);c=(s+=Math.imul(_,pe))+(i>>>13)+(Re>>>26),Re&=67108863,r=Math.imul(U,Q),i=Math.imul(U,ee),i+=Math.imul(D,Q),s=Math.imul(D,ee),r+=Math.imul(N,ne),i+=Math.imul(N,re),i+=Math.imul(L,ne),s+=Math.imul(L,re),r+=Math.imul(I,se),i+=Math.imul(I,ae),i+=Math.imul(j,se),s+=Math.imul(j,ae),r+=Math.imul(T,ue),i+=Math.imul(T,ce),i+=Math.imul(A,ue),s+=Math.imul(A,ce),r+=Math.imul(x,de),i+=Math.imul(x,he),i+=Math.imul(M,de),s+=Math.imul(M,he),r+=Math.imul(E,me),i+=Math.imul(E,pe);var Te=c+r+((8191&(i+=Math.imul(S,me)))<<13);c=(s+=Math.imul(S,pe))+(i>>>13)+(Te>>>26),Te&=67108863,r=Math.imul(U,ne),i=Math.imul(U,re),i+=Math.imul(D,ne),s=Math.imul(D,re),r+=Math.imul(N,se),i+=Math.imul(N,ae),i+=Math.imul(L,se),s+=Math.imul(L,ae),r+=Math.imul(I,ue),i+=Math.imul(I,ce),i+=Math.imul(j,ue),s+=Math.imul(j,ce),r+=Math.imul(T,de),i+=Math.imul(T,he),i+=Math.imul(A,de),s+=Math.imul(A,he),r+=Math.imul(x,me),i+=Math.imul(x,pe);var Ae=c+r+((8191&(i+=Math.imul(M,me)))<<13);c=(s+=Math.imul(M,pe))+(i>>>13)+(Ae>>>26),Ae&=67108863,r=Math.imul(U,se),i=Math.imul(U,ae),i+=Math.imul(D,se),s=Math.imul(D,ae),r+=Math.imul(N,ue),i+=Math.imul(N,ce),i+=Math.imul(L,ue),s+=Math.imul(L,ce),r+=Math.imul(I,de),i+=Math.imul(I,he),i+=Math.imul(j,de),s+=Math.imul(j,he),r+=Math.imul(T,me),i+=Math.imul(T,pe);var Pe=c+r+((8191&(i+=Math.imul(A,me)))<<13);c=(s+=Math.imul(A,pe))+(i>>>13)+(Pe>>>26),Pe&=67108863,r=Math.imul(U,ue),i=Math.imul(U,ce),i+=Math.imul(D,ue),s=Math.imul(D,ce),r+=Math.imul(N,de),i+=Math.imul(N,he),i+=Math.imul(L,de),s+=Math.imul(L,he),r+=Math.imul(I,me),i+=Math.imul(I,pe);var Ie=c+r+((8191&(i+=Math.imul(j,me)))<<13);c=(s+=Math.imul(j,pe))+(i>>>13)+(Ie>>>26),Ie&=67108863,r=Math.imul(U,de),i=Math.imul(U,he),i+=Math.imul(D,de),s=Math.imul(D,he),r+=Math.imul(N,me),i+=Math.imul(N,pe);var je=c+r+((8191&(i+=Math.imul(L,me)))<<13);c=(s+=Math.imul(L,pe))+(i>>>13)+(je>>>26),je&=67108863,r=Math.imul(U,me),i=Math.imul(U,pe);var Oe=c+r+((8191&(i+=Math.imul(D,me)))<<13);return c=(s=Math.imul(D,pe))+(i>>>13)+(Oe>>>26),Oe&=67108863,u[0]=ge,u[1]=be,u[2]=ye,u[3]=ve,u[4]=we,u[5]=_e,u[6]=ke,u[7]=Ee,u[8]=Se,u[9]=Ce,u[10]=xe,u[11]=Me,u[12]=Re,u[13]=Te,u[14]=Ae,u[15]=Pe,u[16]=Ie,u[17]=je,u[18]=Oe,0!==c&&(u[19]=c,n.length++),n}}}},{package:"secp256k1",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/libp2p-crypto/node_modules/secp256k1/lib/js/bn/optimized.js"}],[2987,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports={sha1:{securityStrength:128,outlen:160,seedlen:440},sha224:{securityStrength:192,outlen:224,seedlen:440},sha256:{securityStrength:256,outlen:256,seedlen:440},sha384:{securityStrength:256,outlen:384,seedlen:888},sha512:{securityStrength:256,outlen:512,seedlen:888}}}}},{package:"drbg.js",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/drbg.js/lib/hash-info.json"}],[5979,{"./forge":5964,"./random":5980,"./util":5986},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./forge");e("./random"),e("./util"),(t.exports=r.pss=r.pss||{}).create=function(e){3===arguments.length&&(e={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var t,n=e.md,i=e.mgf,s=n.digestLength,a=e.salt||null;if("string"==typeof a&&(a=r.util.createBuffer(a)),"saltLength"in e)t=e.saltLength;else{if(null===a)throw new Error("Salt length not specified or specific salt not given.");t=a.length()}if(null!==a&&a.length()!==t)throw new Error("Given salt length does not match length of given salt.");var o=e.prng||r.random,u={encode:function(e,u){var c,l,d=u-1,h=Math.ceil(d/8),f=e.digest().getBytes();if(h<s+t+2)throw new Error("Message is too long to encrypt.");l=null===a?o.getBytesSync(t):a.bytes();var m=new r.util.ByteBuffer;m.fillWithByte(0,8),m.putBytes(f),m.putBytes(l),n.start(),n.update(m.getBytes());var p=n.digest().getBytes(),g=new r.util.ByteBuffer;g.fillWithByte(0,h-t-s-2),g.putByte(1),g.putBytes(l);var b=g.getBytes(),y=h-s-1,v=i.generate(p,y),w="";for(c=0;c<y;c++)w+=String.fromCharCode(b.charCodeAt(c)^v.charCodeAt(c));var _=65280>>8*h-d&255;return(w=String.fromCharCode(w.charCodeAt(0)&~_)+w.substr(1))+p+String.fromCharCode(188)},verify:function(e,a,o){var u,c=o-1,l=Math.ceil(c/8);if(a=a.substr(-l),l<s+t+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(188!==a.charCodeAt(l-1))throw new Error("Encoded message does not end in 0xBC.");var d=l-s-1,h=a.substr(0,d),f=a.substr(d,s),m=65280>>8*l-c&255;if(0!=(h.charCodeAt(0)&m))throw new Error("Bits beyond keysize not zero as expected.");var p=i.generate(f,d),g="";for(u=0;u<d;u++)g+=String.fromCharCode(h.charCodeAt(u)^p.charCodeAt(u));g=String.fromCharCode(g.charCodeAt(0)&~m)+g.substr(1);var b=l-s-t-2;for(u=0;u<b;u++)if(0!==g.charCodeAt(u))throw new Error("Leftmost octets not zero as expected");if(1!==g.charCodeAt(b))throw new Error("Inconsistent PSS signature, 0x01 marker not found");var y=g.substr(-t),v=new r.util.ByteBuffer;return v.fillWithByte(0,8),v.putBytes(e),v.putBytes(y),n.start(),n.update(v.getBytes()),f===n.digest().getBytes()}};return u}}}},{package:"node-forge",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/node-forge/lib/pss.js"}],[5968,{"./forge":5964,"./mgf1":5969},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./forge");e("./mgf1"),t.exports=r.mgf=r.mgf||{},r.mgf.mgf1=r.mgf1}}},{package:"node-forge",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/node-forge/lib/mgf.js"}],[5113,{_process:6127,buffer:2478},function(){with(this)return function(){"use strict";return function(e,t,n){(function(e,t){(function(){n.toCallback=t=>function(n,r){let i;try{i=t(n)}catch(t){return void e.nextTick(r,t)}e.nextTick(r,null,i)},n.toBuf=(e,n)=>r=>{let i=e(r,n);return t.from(i,"hex")},n.fromString=(e,n)=>r=>{const i=t.isBuffer(r)?r.toString():r;return e(i,n)},n.fromNumberTo32BitBuf=(e,n)=>r=>{let i=e(r,n);const s=new Array(4);for(let e=0;e<4;e++)s[e]=255&i,i>>=8;return t.from(s)}}).call(this)}).call(this,e("_process"),e("buffer").Buffer)}}},{package:"multihashing-async",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/ipfs-bitswap/node_modules/multihashing-async/src/utils.js"}],[5110,{buffer:2478,nodeify:5990},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){const r=e("nodeify"),i=function(){if(self.crypto)return self.crypto.subtle||self.crypto.webkitSubtle;if(self.msCrypto)return self.msCrypto.subtle}();function s(e){if(!i)throw new Error("Please use a browser with webcrypto support and ensure the code has been delivered securely via HTTPS/TLS and run within a Secure Context");return(t,s)=>{const a=i.digest({name:e},t);if("function"!=typeof a.then)return a.onerror=()=>{s(new Error(`hashing data using ${e}`))},void(a.oncomplete=e=>{s(null,e.target.result)});r(a.then((e=>n.from(new Uint8Array(e)))),s)}}t.exports={sha1:function(e,t){s("SHA-1")(e,t)},sha2256:function(e,t){s("SHA-256")(e,t)},sha2512:function(e,t){s("SHA-512")(e,t)}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"multihashing-async",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/ipfs-bitswap/node_modules/multihashing-async/src/crypto-sha1-2-browser.js"}],[5109,{"./utils":5113,blakejs:2429,buffer:2478},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){const r=e("blakejs"),i=e("./utils").toCallback,s={init:r.blake2bInit,update:r.blake2bUpdate,digest:r.blake2bFinal},a={init:r.blake2sInit,update:r.blake2sUpdate,digest:r.blake2sFinal},o=(e,t)=>i((r=>{const i=t.init(e,null);return t.update(i,r),n.from(t.digest(i))}));t.exports=e=>{for(let t=0;t<64;t++)e[45569+t]=o(t+1,s);for(let t=0;t<32;t++)e[45633+t]=o(t+1,a)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"multihashing-async",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/ipfs-bitswap/node_modules/multihashing-async/src/blake.js"}],[6180,{buffer:2478},function(){with(this)return function(){"use strict";return function(e,t,n){(function(e){(function(){t.exports=function(){var t=[],n=0;return{length:n,data:this,add:function(r){if(!e.isBuffer(r))throw new Error("data must be a buffer, was: "+JSON.stringify(r));return this.length=n+=r.length,t.push(r),this},has:function(e){return null==e?n>0:n>=e},get:function(r){var i;if(null==r||r===n){n=0;var s=t;return t=[],1==s.length?s[0]:e.concat(s)}if(t.length>1&&r<=(i=t[0].length)){var a=t[0].slice(0,r);return r===i?t.shift():t[0]=t[0].slice(r,i),n-=r,a}if(r<n){for(var o=[],u=0;u+t[0].length<r;){var c=t.shift();u+=c.length,o.push(c)}return u<r&&(o.push(t[0].slice(0,r-u)),t[0]=t[0].slice(r-u,t[0].length),this.length=n-=r),e.concat(o)}throw new Error("could not get "+r+" bytes")}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"pull-reader",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/pull-reader/state.js"}],[5617,{"./crypto":5616,buffer:2478,multihashes:5929},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){const r=e("multihashes"),i=e("./crypto");function s(e,t,n,i){if("function"==typeof n&&(i=n,n=undefined),!i)throw new Error("Missing callback");s.digest(e,t,n,((e,s)=>{if(e)return i(e);i(null,r.encode(s,t,n))}))}t.exports=s,s.Buffer=n,s.multihash=r,s.digest=function(e,t,n,r){if("function"==typeof n&&(r=n,n=undefined),!r)throw new Error("Missing callback");let i,a=r;n&&(a=(e,t)=>{if(e)return r(e);r(null,t.slice(0,n))});try{i=s.createHash(t)}catch(e){return a(e)}i(e,a)},s.createHash=function(e){if(e=r.coerceCode(e),!s.functions[e])throw new Error("multihash function "+e+" not yet supported");return s.functions[e]},s.functions={17:i.sha1,18:i.sha2256,19:i.sha2512,20:i.sha3512,21:i.sha3384,22:i.sha3256,23:i.sha3224,24:i.shake128,25:i.shake256,26:i.keccak224,27:i.keccak256,28:i.keccak384,29:i.keccak512,34:i.murmur3128,35:i.murmur332,86:i.dblSha2256},i.addBlake(s.functions),s.validate=(e,t,i)=>{s(e,r.decode(t).name,((e,r)=>{if(e)return i(e);i(e,0===n.compare(t,r))}))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"multihashing-async",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/libp2p-record/node_modules/multihashing-async/src/index.js"}],[6220,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e,t){var n=e&&(e.removeEventListener||e.removeListener);function r(){"function"==typeof n&&(n.call(e,"open",i),n.call(e,"error",s))}function i(e){r(),t()}function s(e){r(),t(e)}return e.readyState>=2?t(!0):1===e.readyState?t():(e.addEventListener("open",i),void e.addEventListener("error",s))}}}},{package:"pull-ws",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/pull-ws/ready.js"}],[5632,{"./crypto":5631,buffer:2478,multihashes:5929},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){const r=e("multihashes"),i=e("./crypto");function s(e,t,n,i){if("function"==typeof n&&(i=n,n=undefined),!i)throw new Error("Missing callback");s.digest(e,t,n,((e,s)=>{if(e)return i(e);i(null,r.encode(s,t,n))}))}t.exports=s,s.Buffer=n,s.multihash=r,s.digest=function(e,t,n,r){if("function"==typeof n&&(r=n,n=undefined),!r)throw new Error("Missing callback");let i,a=r;n&&(a=(e,t)=>{if(e)return r(e);r(null,t.slice(0,n))});try{i=s.createHash(t)}catch(e){return a(e)}i(e,a)},s.createHash=function(e){if(e=r.coerceCode(e),!s.functions[e])throw new Error("multihash function "+e+" not yet supported");return s.functions[e]},s.functions={17:i.sha1,18:i.sha2256,19:i.sha2512,20:i.sha3512,21:i.sha3384,22:i.sha3256,23:i.sha3224,24:i.shake128,25:i.shake256,26:i.keccak224,27:i.keccak256,28:i.keccak384,29:i.keccak512,34:i.murmur3128,35:i.murmur332,86:i.dblSha2256},i.addBlake(s.functions)}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"multihashing-async",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/libp2p-secio/node_modules/multihashing-async/src/index.js"}],[5640,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports="message Propose {\n  optional bytes rand = 1;\n  optional bytes pubkey = 2;\n  optional string exchanges = 3;\n  optional string ciphers = 4;\n  optional string hashes = 5;\n}\n\nmessage Exchange {\n  optional bytes epubkey = 1;\n  optional bytes signature = 2;\n}"}}},{package:"libp2p-secio",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/libp2p-secio/src/handshake/secio.proto.js"}],[5570,{_process:6127,buffer:2478},function(){with(this)return function(){"use strict";return function(e,t,n){(function(e,t){(function(){n.toCallback=t=>function(n,r){let i;try{i=t(n)}catch(t){return void e.nextTick(r,t)}e.nextTick(r,null,i)},n.toBuf=(e,n)=>r=>{let i=e(r,n);return t.from(i,"hex")},n.fromString=(e,n)=>r=>{const i=t.isBuffer(r)?r.toString():r;return e(i,n)},n.fromNumberTo32BitBuf=(e,n)=>r=>{let i=e(r,n);const s=new Array(4);for(let e=0;e<4;e++)s[e]=255&i,i>>=8;return t.from(s)}}).call(this)}).call(this,e("_process"),e("buffer").Buffer)}}},{package:"multihashing-async",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/libp2p-kad-dht/node_modules/multihashing-async/src/utils.js"}],[5566,{"./utils":5570,blakejs:2429,buffer:2478},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){const r=e("blakejs"),i=e("./utils").toCallback,s={init:r.blake2bInit,update:r.blake2bUpdate,digest:r.blake2bFinal},a={init:r.blake2sInit,update:r.blake2sUpdate,digest:r.blake2sFinal},o=(e,t)=>i((r=>{const i=t.init(e,null);return t.update(i,r),n.from(t.digest(i))}));t.exports=e=>{for(let t=0;t<64;t++)e[45569+t]=o(t+1,s);for(let t=0;t<32;t++)e[45633+t]=o(t+1,a)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"multihashing-async",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/libp2p-kad-dht/node_modules/multihashing-async/src/blake.js"}],[5567,{buffer:2478,nodeify:5990},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){const r=e("nodeify"),i=function(){if(self.crypto)return self.crypto.subtle||self.crypto.webkitSubtle;if(self.msCrypto)return self.msCrypto.subtle}();function s(e){if(!i)throw new Error("Please use a browser with webcrypto support and ensure the code has been delivered securely via HTTPS/TLS and run within a Secure Context");return(t,s)=>{const a=i.digest({name:e},t);if("function"!=typeof a.then)return a.onerror=()=>{s(new Error(`hashing data using ${e}`))},void(a.oncomplete=e=>{s(null,e.target.result)});r(a.then((e=>n.from(new Uint8Array(e)))),s)}}t.exports={sha1:function(e,t){s("SHA-1")(e,t)},sha2256:function(e,t){s("SHA-256")(e,t)},sha2512:function(e,t){s("SHA-512")(e,t)}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"multihashing-async",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/libp2p-kad-dht/node_modules/multihashing-async/src/crypto-sha1-2-browser.js"}],[5579,{"./utils":5597,debug:2927,heap:5067,"promisify-es6":6131,"xor-distance":6885},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("heap"),i=e("xor-distance"),s=e("debug"),a=e("promisify-es6"),o=e("./utils"),u=s("libp2p:dht:peer-queue");class c{static async fromPeerId(e){const t=await a((t=>o.convertPeerId(e,t)))();return new c(t)}static async fromKey(e){const t=await a((t=>o.convertBuffer(e,t)))();return new c(t)}constructor(e){u("create: %b",e),this.from=e,this.heap=new r(o.xorCompare)}async enqueue(e){u("enqueue %s",e.toB58String());const t=await a((t=>o.convertPeerId(e,t)))(),n={id:e,distance:i(this.from,t)};this.heap.push(n)}dequeue(){const e=this.heap.pop();return u("dequeue %s",e.id.toB58String()),e.id}get length(){return this.heap.size()}}t.exports=c}}},{package:"libp2p-kad-dht",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/libp2p-kad-dht/src/peer-queue.js"}],[5594,{"../../utils":5597},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("../../utils");t.exports=e=>{const t=r.logger(e.peerInfo.id,"rpc:ping");return function(e,n,r){t("from %s",e.id.toB58String()),r(null,n)}}}}},{package:"libp2p-kad-dht",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/libp2p-kad-dht/src/rpc/handlers/ping.js"}],[5595,{"../../utils":5597,"err-code":3029},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("../../utils"),i=e("err-code");t.exports=e=>{const t=r.logger(e.peerInfo.id,"rpc:put-value");return function(n,s,a){const o=s.key;t("key: %b",o);const u=s.record;if(!u){const e=`Empty record from: ${n.id.toB58String()}`;return t.error(e),a(i(new Error(e),"ERR_EMPTY_RECORD"))}e._verifyRecordLocally(u,(n=>{if(n)return t.error(n.message),a(n);u.timeReceived=new Date;const i=r.bufferToKey(u.key);e.datastore.put(i,u.serialize(),(e=>{if(e)return a(e);a(null,s)}))}))}}}}},{package:"libp2p-kad-dht",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/libp2p-kad-dht/src/rpc/handlers/put-value.js"}],[5589,{"../../utils":5597,cids:2520,"err-code":3029,"promise-to-callback":6129},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("cids"),i=e("err-code"),s=e("promise-to-callback"),a=e("../../utils");t.exports=e=>{const t=a.logger(e.peerInfo.id,"rpc:add-provider");return function(n,a,o){if(t("start"),!a.key||0===a.key.length)return o(i(new Error("Missing key"),"ERR_MISSING_KEY"));let u;try{u=new r(a.key)}catch(e){const t=`Invalid CID: ${e.message}`;return o(i(new Error(t),"ERR_INVALID_CID"))}let c=!1;a.providerPeers.forEach((r=>{r.id.isEqual(n.id)?r.multiaddrs.size<1?t("no valid addresses for provider %s. Ignore",n.id.toB58String()):(t("received provider %s for %s (addrs %s)",n.id.toB58String(),u.toBaseEncodedString(),r.multiaddrs.toArray().map((e=>e.toString()))),e._isSelf(r.id)||(c=!0,e.peerBook.put(r),s(e.providers.addProvider(u,r.id))((e=>o(e))))):t("invalid provider peer %s from %s",r.id.toB58String(),n.id.toB58String())})),c||s(e.providers.addProvider(u,n.id))((e=>o(e)))}}}}},{package:"libp2p-kad-dht",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/libp2p-kad-dht/src/rpc/handlers/add-provider.js"}],[5590,{"../../message":5575,"../../utils":5597,"async/waterfall":2167,buffer:2478},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){const r=e("async/waterfall"),i=e("../../message"),s=e("../../utils");t.exports=e=>{const t=s.logger(e.peerInfo.id,"rpc:find-node");return function(s,a,o){t("start"),r([t=>{if(a.key.equals(e.peerInfo.id.id))return t(null,[e.peerInfo]);e._betterPeersToQuery(a,s,t)},(e,r)=>{const o=new i(a.type,n.alloc(0),a.clusterLevel);e.length>0?o.closerPeers=e:t("handle FindNode %s: could not find anything",s.id.toB58String()),r(null,o)}],o)}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"libp2p-kad-dht",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/libp2p-kad-dht/src/rpc/handlers/find-node.js"}],[5591,{"../../message":5575,"../../utils":5597,"async/parallel":2156,cids:2520,"err-code":3029,"peer-info":6118,"promise-to-callback":6129},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("cids"),i=e("async/parallel"),s=e("peer-info"),a=e("promise-to-callback"),o=e("err-code"),u=e("../../message"),c=e("../../utils");t.exports=e=>{const t=c.logger(e.peerInfo.id,"rpc:get-providers");return function(n,l,d){let h;try{h=new r(l.key)}catch(e){return d(o(new Error(`Invalid CID: ${e.message}`),"ERR_INVALID_CID"))}t("%s",h.toBaseEncodedString());const f=c.bufferToKey(h.buffer);i([n=>e.datastore.has(f,((e,r)=>{if(e)return t.error("Failed to check datastore existence",e),n(null,!1);n(null,r)})),t=>a(e.providers.getProviders(h))(t),t=>e._betterPeersToQuery(l,n,t)],((n,r)=>{if(n)return d(n);const i=r[0],a=r[2],o=r[1].map((t=>e.peerBook.has(t)?e.peerBook.get(t):e.peerBook.put(new s(t))));i&&o.push(e.peerInfo);const c=new u(l.type,l.key,l.clusterLevel);o.length>0&&(c.providerPeers=o),a.length>0&&(c.closerPeers=a),t("got %s providers %s closerPeers",o.length,a.length),d(null,c)}))}}}}},{package:"libp2p-kad-dht",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/libp2p-kad-dht/src/rpc/handlers/get-providers.js"}],[5592,{"../../message":5575,"../../utils":5597,"async/parallel":2156,"err-code":3029,"libp2p-record":5619},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("async/parallel"),i=e("libp2p-record").Record,s=e("err-code"),a=e("../../message"),o=e("../../utils");t.exports=e=>{const t=o.logger(e.peerInfo.id,"rpc:get-value");return function(n,u,c){const l=u.key;if(t("key: %b",l),!l||0===l.length)return c(s(new Error("Invalid key"),"ERR_INVALID_KEY"));const d=new a(a.TYPES.GET_VALUE,l,u.clusterLevel);if(o.isPublicKeyKey(l)){t("is public key");const n=o.fromPublicKeyKey(l);let r;if(e._isSelf(n)?r=e.peerInfo:e.peerBook.has(n)&&(r=e.peerBook.get(n)),r&&r.id.pubKey)return t("returning found public key"),d.record=new i(l,r.id.pubKey.bytes),c(null,d)}r([t=>e._checkLocalDatastore(l,t),t=>e._betterPeersToQuery(u,n,t)],((e,n)=>{if(e)return c(e);const r=n[0],i=n[1];r&&(t("got record"),d.record=r),i.length>0&&(t("got closer %s",i.length),d.closerPeers=i),c(null,d)}))}}}}},{package:"libp2p-kad-dht",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/libp2p-kad-dht/src/rpc/handlers/get-value.js"}],[2632,{events:2479},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("events").EventEmitter;t.exports=function(){const e=new r;let t,n=[];function i(){e.removeAllListeners("err"),e.removeAllListeners("data")}return{append:r=>{if(t)return t;n.push(r),e.emit("data")},prepend:e=>{if(t)return t;n.unshift(e)},error:n=>{t=n,e.emit("err",n)},get:r=>(i(),t?r(t):n.length?r(null,n.shift()):(e.once("err",(e=>{i(),r(e)})),void e.once("data",(()=>(i(),r(null,n.shift())))))),height:()=>n.length}}}}},{package:"data-queue",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/data-queue/index.js"}],[6566,{"./v1":6569,"./v4":6570},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./v1"),i=e("./v4"),s=i;s.v1=r,s.v4=i,t.exports=s}}},{package:"uuid",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/socket.io-pull-stream/node_modules/uuid/index.js"}],[6564,{"./common":6565,_process:6127},function(){with(this)return function(){"use strict";return function(e,t,n){(function(r){(function(){function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}n.log=function(){var e;return"object"===("undefined"==typeof console?"undefined":i(console))&&console.log&&(e=console).log.apply(e,arguments)},n.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(r++,"%c"===e&&(i=r))})),e.splice(i,0,n)},n.save=function(e){try{e?n.storage.setItem("debug",e):n.storage.removeItem("debug")}catch(e){}},n.load=function(){var e;try{e=n.storage.getItem("debug")}catch(e){}!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG);return e},n.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},n.storage=function(){try{return localStorage}catch(e){}}(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.exports=e("./common")(n),t.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this)}).call(this,e("_process"))}}},{package:"debug",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/socket.io-pull-stream/node_modules/debug/src/browser.js"}],[6531,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r={};function i(e,t,n){n||(n=Error);var i=function(e){var n,r;function i(n,r,i){return e.call(this,function(e,n,r){return"string"==typeof t?t:t(e,n,r)}(n,r,i))||this}return r=e,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,i}(n);i.prototype.name=n.name,i.prototype.code=e,r[e]=i}function s(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}i("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(e,t,n){var r,i,a,o;if("string"==typeof t&&(i="not ",t.substr(!a||a<0?0:+a,i.length)===i)?(r="must not be",t=t.replace(/^not /,"")):r="must be",function(e,t,n){return(n===undefined||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))o="The ".concat(e," ").concat(r," ").concat(s(t,"type"));else{var u=function(e,t,n){return"number"!=typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}(e,".")?"property":"argument";o='The "'.concat(e,'" ').concat(u," ").concat(r," ").concat(s(t,"type"))}return o+=". Received type ".concat(typeof n)}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=r}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/simple-peer/node_modules/readable-stream/errors-browser.js"}],[6544,{events:2479},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=e("events").EventEmitter}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/simple-peer/node_modules/readable-stream/lib/internal/streams/stream-browser.js"}],[6543,{"../../../errors":6531},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(e,t,n,i){var s=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,i,n);if(null!=s){if(!isFinite(s)||Math.floor(s)!==s||s<0)throw new r(i?n:"highWaterMark",s);return Math.floor(s)}return e.objectMode?16:16384}}}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/simple-peer/node_modules/readable-stream/lib/internal/streams/state.js"}],[6539,{_process:6127},function(){with(this)return function(){"use strict";return function(e,t,n){(function(e){(function(){function n(e,t){i(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}t.exports={destroy:function(t,s){var a=this,o=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return o||u?(s?s(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(i,this,t)):e.nextTick(i,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!s&&t?a._writableState?a._writableState.errorEmitted?e.nextTick(r,a):(a._writableState.errorEmitted=!0,e.nextTick(n,a,t)):e.nextTick(n,a,t):s?(e.nextTick(r,a),s(t)):e.nextTick(r,a)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this)}).call(this,e("_process"))}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/simple-peer/node_modules/readable-stream/lib/internal/streams/destroy.js"}],[6541,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(){throw new Error("Readable.from is not available in the browser")}}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/simple-peer/node_modules/readable-stream/lib/internal/streams/from-browser.js"}],[6538,{buffer:2478,util:2477},function(){with(this)return function(){"use strict";return function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=e("buffer").Buffer,o=e("util").inspect,u=o&&o.custom||"inspect";t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n,c;return t=e,n=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return a.alloc(0);for(var t,n,r,i=a.allocUnsafe(e>>>0),s=this.head,o=0;s;)t=s.data,n=i,r=o,a.prototype.copy.call(t,n,r),o+=s.data.length,s=s.next;return i}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,s=e>i.length?i.length:e;if(s===i.length?r+=i:r+=i.slice(0,e),0==(e-=s)){s===i.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(s));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=a.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var i=n.data,s=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,s),0==(e-=s)){s===i.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=i.slice(s));break}++r}return this.length-=r,t}},{key:u,value:function(e,t){return o(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}],n&&s(t.prototype,n),c&&s(t,c),e}()}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/simple-peer/node_modules/readable-stream/lib/internal/streams/buffer_list.js"}],[6537,{"./end-of-stream":6540,_process:6127},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r;function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=e("./end-of-stream"),a=Symbol("lastResolve"),o=Symbol("lastReject"),u=Symbol("error"),c=Symbol("ended"),l=Symbol("lastPromise"),d=Symbol("handlePromise"),h=Symbol("stream");function f(e,t){return{value:e,done:t}}function m(e){var t=e[a];if(null!==t){var n=e[h].read();null!==n&&(e[l]=null,e[a]=null,e[o]=null,t(f(n,!1)))}}function p(e){n.nextTick(m,e)}var g=Object.getPrototypeOf((function(){})),b=Object.setPrototypeOf((i(r={get stream(){return this[h]},next:function(){var e=this,t=this[u];if(null!==t)return Promise.reject(t);if(this[c])return Promise.resolve(f(undefined,!0));if(this[h].destroyed)return new Promise((function(t,r){n.nextTick((function(){e[u]?r(e[u]):t(f(undefined,!0))}))}));var r,i=this[l];if(i)r=new Promise(function(e,t){return function(n,r){e.then((function(){t[c]?n(f(undefined,!0)):t[d](n,r)}),r)}}(i,this));else{var s=this[h].read();if(null!==s)return Promise.resolve(f(s,!1));r=new Promise(this[d])}return this[l]=r,r}},Symbol.asyncIterator,(function(){return this})),i(r,"return",(function(){var e=this;return new Promise((function(t,n){e[h].destroy(null,(function(e){e?n(e):t(f(undefined,!0))}))}))})),r),g);t.exports=function(e){var t,n=Object.create(b,(i(t={},h,{value:e,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,o,{value:null,writable:!0}),i(t,u,{value:null,writable:!0}),i(t,c,{value:e._readableState.endEmitted,writable:!0}),i(t,d,{value:function(e,t){var r=n[h].read();r?(n[l]=null,n[a]=null,n[o]=null,e(f(r,!1))):(n[a]=e,n[o]=t)},writable:!0}),t));return n[l]=null,s(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[o];return null!==t&&(n[l]=null,n[a]=null,n[o]=null,t(e)),void(n[u]=e)}var r=n[a];null!==r&&(n[l]=null,n[a]=null,n[o]=null,r(f(undefined,!0))),n[c]=!0})),e.on("readable",p.bind(null,n)),n}}).call(this)}).call(this,e("_process"))}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/simple-peer/node_modules/readable-stream/lib/internal/streams/async_iterator.js"}],[6546,{"safe-buffer":6450},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("safe-buffer").Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=c,t=4;break;case"utf8":this.fillLast=o,t=4;break;case"base64":this.text=l,this.end=d,t=3;break;default:return this.write=h,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function o(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return n!==undefined?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function l(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}n.StringDecoder=s,s.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if((t=this.fillLast(e))===undefined)return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},s.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},s.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=a(t[r]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=a(t[r]))>=0)return i>0&&(e.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=a(t[r]))>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}}}},{package:"string_decoder",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/simple-peer/node_modules/string_decoder/lib/string_decoder.js"}],[5030,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}}}},{package:"isarray",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/has-binary2/node_modules/isarray/index.js"}],[6556,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r=1e3,i=60*r,s=60*i,a=24*s,o=365.25*a;function u(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}t.exports=function(e,t){t=t||{};var n,c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*o;case"days":case"day":case"d":return n*a;case"hours":case"hour":case"hrs":case"hr":case"h":return n*s;case"minutes":case"minute":case"mins":case"min":case"m":return n*i;case"seconds":case"second":case"secs":case"sec":case"s":return n*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return undefined}}(e);if("number"===c&&!1===isNaN(e))return t.long?u(n=e,a,"day")||u(n,s,"hour")||u(n,i,"minute")||u(n,r,"second")||n+" ms":function(e){if(e>=a)return Math.round(e/a)+"d";if(e>=s)return Math.round(e/s)+"h";if(e>=i)return Math.round(e/i)+"m";if(e>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}}}},{package:"ms",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/socket.io-client/node_modules/ms/index.js"}],[6561,{ms:6563},function(){with(this)return function(){"use strict";return function(e,t,n){function r(e){var t;function r(){if(r.enabled){var e=r,i=+new Date,s=i-(t||i);e.diff=s,e.prev=t,e.curr=i,t=i;for(var a=new Array(arguments.length),o=0;o<a.length;o++)a[o]=arguments[o];a[0]=n.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var u=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,(function(t,r){if("%%"===t)return t;u++;var i=n.formatters[r];if("function"==typeof i){var s=a[u];t=i.call(e,s),a.splice(u,1),u--}return t})),n.formatArgs.call(e,a);var c=r.log||n.log||console.log.bind(console);c.apply(e,a)}}return r.namespace=e,r.enabled=n.enabled(e),r.useColors=n.useColors(),r.color=function(e){var t,r=0;for(t in e)r=(r<<5)-r+e.charCodeAt(t),r|=0;return n.colors[Math.abs(r)%n.colors.length]}(e),r.destroy=i,"function"==typeof n.init&&n.init(r),n.instances.push(r),r}function i(){var e=n.instances.indexOf(this);return-1!==e&&(n.instances.splice(e,1),!0)}(n=t.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},n.disable=function(){n.enable("")},n.enable=function(e){var t;n.save(e),n.names=[],n.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(t=0;t<i;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")));for(t=0;t<n.instances.length;t++){var s=n.instances[t];s.enabled=n.enabled(s.namespace)}},n.enabled=function(e){if("*"===e[e.length-1])return!0;var t,r;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=e("ms"),n.instances=[],n.names=[],n.skips=[],n.formatters={}}}},{package:"debug",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/socket.io-parser/node_modules/debug/src/debug.js"}],[3026,{"./keys":3027,"./utf8":3028,after:2064,"arraybuffer.slice":2070,"base64-arraybuffer":2341,blob:2431,"has-binary2":5029},function(){with(this)return function(){"use strict";return function(e,t,n){var r,i=e("./keys"),s=e("has-binary2"),a=e("arraybuffer.slice"),o=e("after"),u=e("./utf8");"undefined"!=typeof ArrayBuffer&&(r=e("base64-arraybuffer"));var c="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),l="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),d=c||l;n.protocol=3;var h=n.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},f=i(h),m={type:"error",data:"parser error"},p=e("blob");function g(e,t,n){for(var r=new Array(e.length),i=o(e.length,n),s=function(e,n,i){t(n,(function(t,n){r[e]=n,i(t,r)}))},a=0;a<e.length;a++)s(a,e[a],i)}n.encodePacket=function(e,t,r,i){"function"==typeof t&&(i=t,t=!1),"function"==typeof r&&(i=r,r=null);var s=e.data===undefined?undefined:e.data.buffer||e.data;if("undefined"!=typeof ArrayBuffer&&s instanceof ArrayBuffer)return function(e,t,r){if(!t)return n.encodeBase64Packet(e,r);var i=e.data,s=new Uint8Array(i),a=new Uint8Array(1+i.byteLength);a[0]=h[e.type];for(var o=0;o<s.length;o++)a[o+1]=s[o];return r(a.buffer)}(e,t,i);if(void 0!==p&&s instanceof p)return function(e,t,r){if(!t)return n.encodeBase64Packet(e,r);if(d)return function(e,t,r){if(!t)return n.encodeBase64Packet(e,r);var i=new FileReader;return i.onload=function(){n.encodePacket({type:e.type,data:i.result},t,!0,r)},i.readAsArrayBuffer(e.data)}(e,t,r);var i=new Uint8Array(1);i[0]=h[e.type];var s=new p([i.buffer,e.data]);return r(s)}(e,t,i);if(s&&s.base64)return function(e,t){var r="b"+n.packets[e.type]+e.data.data;return t(r)}(e,i);var a=h[e.type];return undefined!==e.data&&(a+=r?u.encode(String(e.data),{strict:!1}):String(e.data)),i(""+a)},n.encodeBase64Packet=function(e,t){var r,i="b"+n.packets[e.type];if(void 0!==p&&e.data instanceof p){var s=new FileReader;return s.onload=function(){var e=s.result.split(",")[1];t(i+e)},s.readAsDataURL(e.data)}try{r=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(t){for(var a=new Uint8Array(e.data),o=new Array(a.length),u=0;u<a.length;u++)o[u]=a[u];r=String.fromCharCode.apply(null,o)}return i+=btoa(r),t(i)},n.decodePacket=function(e,t,r){if(e===undefined)return m;if("string"==typeof e){if("b"===e.charAt(0))return n.decodeBase64Packet(e.substr(1),t);if(r&&!1===(e=function(e){try{e=u.decode(e,{strict:!1})}catch(e){return!1}return e}(e)))return m;var i=e.charAt(0);return Number(i)==i&&f[i]?e.length>1?{type:f[i],data:e.substring(1)}:{type:f[i]}:m}i=new Uint8Array(e)[0];var s=a(e,1);return p&&"blob"===t&&(s=new p([s])),{type:f[i],data:s}},n.decodeBase64Packet=function(e,t){var n=f[e.charAt(0)];if(!r)return{type:n,data:{base64:!0,data:e.substr(1)}};var i=r.decode(e.substr(1));return"blob"===t&&p&&(i=new p([i])),{type:n,data:i}},n.encodePayload=function(e,t,r){"function"==typeof t&&(r=t,t=null);var i=s(e);if(t&&i)return p&&!d?n.encodePayloadAsBlob(e,r):n.encodePayloadAsArrayBuffer(e,r);if(!e.length)return r("0:");g(e,(function(e,r){n.encodePacket(e,!!i&&t,!1,(function(e){r(null,function(e){return e.length+":"+e}(e))}))}),(function(e,t){return r(t.join(""))}))},n.decodePayload=function(e,t,r){if("string"!=typeof e)return n.decodePayloadAsBinary(e,t,r);var i;if("function"==typeof t&&(r=t,t=null),""===e)return r(m,0,1);for(var s,a,o="",u=0,c=e.length;u<c;u++){var l=e.charAt(u);if(":"===l){if(""===o||o!=(s=Number(o)))return r(m,0,1);if(o!=(a=e.substr(u+1,s)).length)return r(m,0,1);if(a.length){if(i=n.decodePacket(a,t,!1),m.type===i.type&&m.data===i.data)return r(m,0,1);if(!1===r(i,u+s,c))return}u+=s,o=""}else o+=l}return""!==o?r(m,0,1):void 0},n.encodePayloadAsArrayBuffer=function(e,t){if(!e.length)return t(new ArrayBuffer(0));g(e,(function(e,t){n.encodePacket(e,!0,!0,(function(e){return t(null,e)}))}),(function(e,n){var r=n.reduce((function(e,t){var n;return e+(n="string"==typeof t?t.length:t.byteLength).toString().length+n+2}),0),i=new Uint8Array(r),s=0;return n.forEach((function(e){var t="string"==typeof e,n=e;if(t){for(var r=new Uint8Array(e.length),a=0;a<e.length;a++)r[a]=e.charCodeAt(a);n=r.buffer}i[s++]=t?0:1;var o=n.byteLength.toString();for(a=0;a<o.length;a++)i[s++]=parseInt(o[a]);i[s++]=255;for(r=new Uint8Array(n),a=0;a<r.length;a++)i[s++]=r[a]})),t(i.buffer)}))},n.encodePayloadAsBlob=function(e,t){g(e,(function(e,t){n.encodePacket(e,!0,!0,(function(e){var n=new Uint8Array(1);if(n[0]=1,"string"==typeof e){for(var r=new Uint8Array(e.length),i=0;i<e.length;i++)r[i]=e.charCodeAt(i);e=r.buffer,n[0]=0}var s=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),a=new Uint8Array(s.length+1);for(i=0;i<s.length;i++)a[i]=parseInt(s[i]);if(a[s.length]=255,p){var o=new p([n.buffer,a.buffer,e]);t(null,o)}}))}),(function(e,n){return t(new p(n))}))},n.decodePayloadAsBinary=function(e,t,r){"function"==typeof t&&(r=t,t=null);for(var i=e,s=[];i.byteLength>0;){for(var o=new Uint8Array(i),u=0===o[0],c="",l=1;255!==o[l];l++){if(c.length>310)return r(m,0,1);c+=o[l]}i=a(i,2+c.length),c=parseInt(c);var d=a(i,0,c);if(u)try{d=String.fromCharCode.apply(null,new Uint8Array(d))}catch(e){var h=new Uint8Array(d);d="";for(l=0;l<h.length;l++)d+=String.fromCharCode(h[l])}s.push(d),i=a(i,c)}var f=s.length;s.forEach((function(e,i){r(n.decodePacket(e,t,!0),i,f)}))}}}},{package:"engine.io-parser",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/engine.io-parser/lib/browser.js"}],[3015,{"./transport":3016,"./transports/index":3017,"component-emitter":2549,debug:3023,"engine.io-parser":3026,indexof:5093,parseqs:6100,parseuri:6101},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./transports/index"),i=e("component-emitter"),s=e("debug")("engine.io-client:socket"),a=e("indexof"),o=e("engine.io-parser"),u=e("parseuri"),c=e("parseqs");function l(e,t){if(!(this instanceof l))return new l(e,t);t=t||{},e&&"object"==typeof e&&(t=e,e=null),e?(e=u(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=u(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=c.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.withCredentials=!1!==t.withCredentials,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=t.rejectUnauthorized===undefined||t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}t.exports=l,l.priorWebsocketSuccess=!1,i(l.prototype),l.protocol=o.protocol,l.Socket=l,l.Transport=e("./transport"),l.transports=e("./transports/index"),l.parser=e("engine.io-parser"),l.prototype.createTransport=function(e){s('creating transport "%s"',e);var t=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.query);t.EIO=o.protocol,t.transport=e;var n=this.transportOptions[e]||{};return this.id&&(t.sid=this.id),new r[e]({query:t,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,withCredentials:n.withCredentials||this.withCredentials,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0,isReactNative:this.isReactNative})},l.prototype.open=function(){var e;if(this.rememberUpgrade&&l.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout((function(){t.emit("error","No transports available")}),0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},l.prototype.setTransport=function(e){s("setting transport %s",e.name);var t=this;this.transport&&(s("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",(function(){t.onDrain()})).on("packet",(function(e){t.onPacket(e)})).on("error",(function(e){t.onError(e)})).on("close",(function(){t.onClose("transport close")}))},l.prototype.probe=function(e){s('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),n=!1,r=this;function i(){if(r.onlyBinaryUpgrades){var i=!this.supportsBinary&&r.transport.supportsBinary;n=n||i}n||(s('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",(function(i){if(!n)if("pong"===i.type&&"probe"===i.data){if(s('probe transport "%s" pong',e),r.upgrading=!0,r.emit("upgrading",t),!t)return;l.priorWebsocketSuccess="websocket"===t.name,s('pausing current transport "%s"',r.transport.name),r.transport.pause((function(){n||"closed"!==r.readyState&&(s("changing transport and sending upgrade packet"),h(),r.setTransport(t),t.send([{type:"upgrade"}]),r.emit("upgrade",t),t=null,r.upgrading=!1,r.flush())}))}else{s('probe transport "%s" failed',e);var a=new Error("probe error");a.transport=t.name,r.emit("upgradeError",a)}})))}function a(){n||(n=!0,h(),t.close(),t=null)}function o(n){var i=new Error("probe error: "+n);i.transport=t.name,a(),s('probe transport "%s" failed because of error: %s',e,n),r.emit("upgradeError",i)}function u(){o("transport closed")}function c(){o("socket closed")}function d(e){t&&e.name!==t.name&&(s('"%s" works - aborting "%s"',e.name,t.name),a())}function h(){t.removeListener("open",i),t.removeListener("error",o),t.removeListener("close",u),r.removeListener("close",c),r.removeListener("upgrading",d)}l.priorWebsocketSuccess=!1,t.once("open",i),t.once("error",o),t.once("close",u),this.once("close",c),this.once("upgrading",d),t.open()},l.prototype.onOpen=function(){if(s("socket open"),this.readyState="open",l.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){s("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},l.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(s('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else s('packet received with socket readyState "%s"',this.readyState)},l.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},l.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout((function(){"closed"!==t.readyState&&t.onClose("ping timeout")}),e||t.pingInterval+t.pingTimeout)},l.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout((function(){s("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)}),e.pingInterval)},l.prototype.ping=function(){var e=this;this.sendPacket("ping",(function(){e.emit("ping")}))},l.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},l.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(s("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},l.prototype.write=l.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},l.prototype.sendPacket=function(e,t,n,r){if("function"==typeof t&&(r=t,t=undefined),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var i={type:e,data:t,options:n};this.emit("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}},l.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",(function(){this.upgrading?r():t()})):this.upgrading?r():t()}function t(){e.onClose("forced close"),s("socket closing - telling transport to close"),e.transport.close()}function n(){e.removeListener("upgrade",n),e.removeListener("upgradeError",n),t()}function r(){e.once("upgrade",n),e.once("upgradeError",n)}return this},l.prototype.onError=function(e){s("socket error %j",e),l.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},l.prototype.onClose=function(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){s('socket close with reason: "%s"',e);clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0}},l.prototype.filterUpgrades=function(e){for(var t=[],n=0,r=e.length;n<r;n++)~a(this.transports,e[n])&&t.push(e[n]);return t}}}},{package:"engine.io-client",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/engine.io-client/lib/socket.js"}],[5610,{"./index":5608,buffer:2478},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){const{Message:r}=e("./index"),i=n.from("libp2p-pubsub:");t.exports.SignPrefix=i,t.exports.signMessage=function(e,t,s){const a=n.concat([i,r.encode(t)]);e.privKey.sign(a,((n,r)=>{if(n)return s(n);s(null,{...t,signature:r,key:e.pubKey.bytes})}))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"libp2p-pubsub",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/libp2p-pubsub/src/message/sign.js"}],[5613,{"../../is-buffer/index.js":5378,bs58:2486,"libp2p-crypto":5544},function(){with(this)return function(){"use strict";return function(e,t,n){(function(r){(function(){const i=e("libp2p-crypto"),s=e("bs58");(n=t.exports).randomSeqno=()=>i.randomBytes(20),n.msgId=(e,t)=>e+t.toString("hex"),n.anyMatch=(e,t)=>{let n;n=Array.isArray(t)?e=>t.indexOf(e)>-1:e=>t.has(e);for(let t of e)if(n(t))return!0;return!1},n.ensureArray=e=>Array.isArray(e)?e:[e],n.normalizeInRpcMessages=e=>e?e.map((e=>{const t=Object.assign({},e);return r.isBuffer(e.from)&&(t.from=s.encode(e.from)),t})):e,n.normalizeOutRpcMessage=e=>{const t=Object.assign({},e);return("string"==typeof e.from||e.from instanceof String)&&(t.from=s.decode(e.from)),t},n.normalizeOutRpcMessages=e=>e?e.map(n.normalizeOutRpcMessage):e}).call(this)}).call(this,{isBuffer:e("../../is-buffer/index.js")})}}},{package:"libp2p-pubsub",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/libp2p-pubsub/src/utils.js"}],[5612,{"./message":5608,"async/setImmediate":2161,events:2479,"pull-length-prefixed":6166,"pull-pushable":6178,"pull-stream":6184},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("pull-length-prefixed"),i=e("pull-pushable"),s=e("pull-stream"),a=e("async/setImmediate"),o=e("events"),{RPC:u}=e("./message");t.exports=class extends o{constructor(e){super(),this.info=e,this.conn=null,this.topics=new Set,this.stream=null,this._references=0}get isConnected(){return Boolean(this.conn)}get isWritable(){return Boolean(this.stream)}write(e){if(!this.isWritable){const e=this.info.id.toB58String();throw new Error("No writable connection to "+e)}this.stream.push(e)}attachConnection(e){this.conn=e,this.stream=new i,s(this.stream,r.encode(),e,s.onEnd((()=>{this.conn=null,this.stream=null,this.emit("close")}))),this.emit("connection")}_sendRawSubscriptions(e,t){if(0===e.size)return;const n=[];e.forEach((e=>{n.push({subscribe:t,topicID:e})})),this.write(u.encode({subscriptions:n}))}sendSubscriptions(e){this._sendRawSubscriptions(e,!0)}sendUnsubscriptions(e){this._sendRawSubscriptions(e,!1)}sendMessages(e){this.write(u.encode({msgs:e}))}updateSubscriptions(e){e.forEach((e=>{e.subscribe?this.topics.add(e.topicID):this.topics.delete(e.topicID)}))}close(e){this._references=1,this.stream&&this.stream.end(),a((()=>{this.conn=null,this.stream=null,this.emit("close"),e()}))}}}}},{package:"libp2p-pubsub",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/libp2p-pubsub/src/peer.js"}],[5608,{"./rpc.proto.js":5609,"./topic-descriptor.proto.js":5611,protons:6147},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("protons"),i=r(e("./rpc.proto.js")),s=i.RPC,a=r(e("./topic-descriptor.proto.js"));(n=t.exports).rpc=i,n.td=a,n.RPC=s,n.Message=s.Message,n.SubOpts=s.SubOpts}}},{package:"libp2p-pubsub",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/libp2p-pubsub/src/message/index.js"}],[6646,{"lodash.throttle":5696},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("lodash.throttle");t.exports=function e(t){if(!(this instanceof e))return new e(t);const n=(t=t||{}).validity||30,i=new Map,s=r((()=>{i.forEach(((e,t)=>{const r=e.validity||n;(function(e){const t=(new Date).getTime()-e.getTime();return Math.floor(t/1e3)})(e.timestamp)>r&&i.delete(t)}))}),200);this.put=(e,t,n)=>{this.has(e)||i.set(e,{value:t,timestamp:new Date,validity:n}),s()},this.get=e=>{if(i.has(e))return i.get(e).value;throw new Error("key does not exist")},this.has=e=>i.has(e)}}}},{package:"time-cache",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/time-cache/src/index.js"}],[5471,{debug:5473,events:2479},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("events"),a=(r=s)&&r.__esModule?r:{default:r};function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=e("debug")("latency-monitor:VisibilityChangeEmitter"),c=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return"undefined"==typeof document?(u('This is not a browser, no "document" found. Stopping.'),o(e)):(e._initializeVisibilityVarNames(),e._addVisibilityChangeListener(),e)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"_initializeVisibilityVarNames",value:function(){var e=void 0,t=void 0;void 0!==document.hidden?(e="hidden",t="visibilitychange"):void 0!==document.mozHidden?(e="mozHidden",t="mozvisibilitychange"):void 0!==document.msHidden?(e="msHidden",t="msvisibilitychange"):void 0!==document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange"),this._hidden=e,this._visibilityChange=t}},{key:"_addVisibilityChangeListener",value:function(){void 0===document.addEventListener||void 0===document[this._hidden]?u("Checking page visibility requires a browser that supports the Page Visibility API."):document.addEventListener(this._visibilityChange,this._handleVisibilityChange.bind(this),!1)}},{key:"isVisible",value:function(){return this._hidden===undefined||document[this._hidden]===undefined?undefined:!document[this._hidden]}},{key:"_handleVisibilityChange",value:function(){var e=!document[this._hidden];u(e?"Page Visible":"Page Hidden"),this.emit("visibilityChange",e)}}]),t}(a.default);n.default=c}}},{package:"latency-monitor",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/latency-monitor/dist/VisibilityChangeEmitter.js"}],[5473,{"./debug":5474,_process:6127},function(){with(this)return function(){"use strict";return function(e,t,n){(function(r){(function(){function i(){var e;try{e=n.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}(n=t.exports=e("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},n.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,s=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(i++,"%c"===e&&(s=i))})),e.splice(s,0,r)},n.save=function(e){try{null==e?n.storage.removeItem("debug"):n.storage.debug=e}catch(e){}},n.load=i,n.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},n.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},n.enable(i())}).call(this)}).call(this,e("_process"))}}},{package:"debug",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/latency-monitor/node_modules/debug/src/browser.js"}],[5644,{},function(){with(this)return function(){"use strict";return function(e,t,n){!function(e){var n,r=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,s=Math.ceil,a=Math.floor,o="[BigNumber Error] ",u=o+"Number primitive has more than 15 significant digits: ",c=1e14,l=14,d=9007199254740991,h=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],f=1e7,m=1e9;function p(e){var t=0|e;return e>0||e===t?t:t-1}function g(e){for(var t,n,r=1,i=e.length,s=e[0]+"";r<i;){for(t=e[r++]+"",n=l-t.length;n--;t="0"+t);s+=t}for(i=s.length;48===s.charCodeAt(--i););return s.slice(0,i+1||1)}function b(e,t){var n,r,i=e.c,s=t.c,a=e.s,o=t.s,u=e.e,c=t.e;if(!a||!o)return null;if(n=i&&!i[0],r=s&&!s[0],n||r)return n?r?0:-o:a;if(a!=o)return a;if(n=a<0,r=u==c,!i||!s)return r?0:!i^n?1:-1;if(!r)return u>c^n?1:-1;for(o=(u=i.length)<(c=s.length)?u:c,a=0;a<o;a++)if(i[a]!=s[a])return i[a]>s[a]^n?1:-1;return u==c?0:u>c^n?1:-1}function y(e,t,n,r){if(e<t||e>n||e!==a(e))throw Error(o+(r||"Argument")+("number"==typeof e?e<t||e>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function v(e){var t=e.c.length-1;return p(e.e/l)==t&&e.c[t]%2!=0}function w(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function _(e,t,n){var r,i;if(t<0){for(i=n+".";++t;i+=n);e=i+e}else if(++t>(r=e.length)){for(i=n,t-=r;--t;i+=n);e+=i}else t<r&&(e=e.slice(0,t)+"."+e.slice(t));return e}n=function e(t){var n,k,E,S,C,x,M,R,T,A,P=W.prototype={constructor:W,toString:null,valueOf:null},I=new W(1),j=20,O=4,N=-7,L=21,B=-1e7,U=1e7,D=!1,F=1,H=0,q={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},G="0123456789abcdefghijklmnopqrstuvwxyz";function W(e,t){var n,i,s,o,c,h,f,m,p=this;if(!(p instanceof W))return new W(e,t);if(null==t){if(e&&!0===e._isBigNumber)return p.s=e.s,void(!e.c||e.e>U?p.c=p.e=null:e.e<B?p.c=[p.e=0]:(p.e=e.e,p.c=e.c.slice()));if((h="number"==typeof e)&&0*e==0){if(p.s=1/e<0?(e=-e,-1):1,e===~~e){for(o=0,c=e;c>=10;c/=10,o++);return void(o>U?p.c=p.e=null:(p.e=o,p.c=[e]))}m=String(e)}else{if(!r.test(m=String(e)))return E(p,m,h);p.s=45==m.charCodeAt(0)?(m=m.slice(1),-1):1}(o=m.indexOf("."))>-1&&(m=m.replace(".","")),(c=m.search(/e/i))>0?(o<0&&(o=c),o+=+m.slice(c+1),m=m.substring(0,c)):o<0&&(o=m.length)}else{if(y(t,2,G.length,"Base"),10==t)return K(p=new W(e),j+p.e+1,O);if(m=String(e),h="number"==typeof e){if(0*e!=0)return E(p,m,h,t);if(p.s=1/e<0?(m=m.slice(1),-1):1,W.DEBUG&&m.replace(/^0\.0*|\./,"").length>15)throw Error(u+e)}else p.s=45===m.charCodeAt(0)?(m=m.slice(1),-1):1;for(n=G.slice(0,t),o=c=0,f=m.length;c<f;c++)if(n.indexOf(i=m.charAt(c))<0){if("."==i){if(c>o){o=f;continue}}else if(!s&&(m==m.toUpperCase()&&(m=m.toLowerCase())||m==m.toLowerCase()&&(m=m.toUpperCase()))){s=!0,c=-1,o=0;continue}return E(p,String(e),h,t)}h=!1,(o=(m=k(m,t,10,p.s)).indexOf("."))>-1?m=m.replace(".",""):o=m.length}for(c=0;48===m.charCodeAt(c);c++);for(f=m.length;48===m.charCodeAt(--f););if(m=m.slice(c,++f)){if(f-=c,h&&W.DEBUG&&f>15&&(e>d||e!==a(e)))throw Error(u+p.s*e);if((o=o-c-1)>U)p.c=p.e=null;else if(o<B)p.c=[p.e=0];else{if(p.e=o,p.c=[],c=(o+1)%l,o<0&&(c+=l),c<f){for(c&&p.c.push(+m.slice(0,c)),f-=l;c<f;)p.c.push(+m.slice(c,c+=l));c=l-(m=m.slice(c)).length}else c-=f;for(;c--;m+="0");p.c.push(+m)}}else p.c=[p.e=0]}function $(e,t,n,r){var i,s,a,o,u;if(null==n?n=O:y(n,0,8),!e.c)return e.toString();if(i=e.c[0],a=e.e,null==t)u=g(e.c),u=1==r||2==r&&(a<=N||a>=L)?w(u,a):_(u,a,"0");else if(s=(e=K(new W(e),t,n)).e,o=(u=g(e.c)).length,1==r||2==r&&(t<=s||s<=N)){for(;o<t;u+="0",o++);u=w(u,s)}else if(t-=a,u=_(u,s,"0"),s+1>o){if(--t>0)for(u+=".";t--;u+="0");}else if((t+=s-o)>0)for(s+1==o&&(u+=".");t--;u+="0");return e.s<0&&i?"-"+u:u}function V(e,t){for(var n,r=1,i=new W(e[0]);r<e.length;r++){if(!(n=new W(e[r])).s){i=n;break}t.call(i,n)&&(i=n)}return i}function z(e,t,n){for(var r=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,r++);return(n=r+n*l-1)>U?e.c=e.e=null:n<B?e.c=[e.e=0]:(e.e=n,e.c=t),e}function K(e,t,n,r){var i,o,u,d,f,m,p,g=e.c,b=h;if(g){e:{for(i=1,d=g[0];d>=10;d/=10,i++);if((o=t-i)<0)o+=l,u=t,p=(f=g[m=0])/b[i-u-1]%10|0;else if((m=s((o+1)/l))>=g.length){if(!r)break e;for(;g.length<=m;g.push(0));f=p=0,i=1,u=(o%=l)-l+1}else{for(f=d=g[m],i=1;d>=10;d/=10,i++);p=(u=(o%=l)-l+i)<0?0:f/b[i-u-1]%10|0}if(r=r||t<0||null!=g[m+1]||(u<0?f:f%b[i-u-1]),r=n<4?(p||r)&&(0==n||n==(e.s<0?3:2)):p>5||5==p&&(4==n||r||6==n&&(o>0?u>0?f/b[i-u]:0:g[m-1])%10&1||n==(e.s<0?8:7)),t<1||!g[0])return g.length=0,r?(t-=e.e+1,g[0]=b[(l-t%l)%l],e.e=-t||0):g[0]=e.e=0,e;if(0==o?(g.length=m,d=1,m--):(g.length=m+1,d=b[l-o],g[m]=u>0?a(f/b[i-u]%b[u])*d:0),r)for(;;){if(0==m){for(o=1,u=g[0];u>=10;u/=10,o++);for(u=g[0]+=d,d=1;u>=10;u/=10,d++);o!=d&&(e.e++,g[0]==c&&(g[0]=1));break}if(g[m]+=d,g[m]!=c)break;g[m--]=0,d=1}for(o=g.length;0===g[--o];g.pop());}e.e>U?e.c=e.e=null:e.e<B&&(e.c=[e.e=0])}return e}function Z(e){var t,n=e.e;return null===n?e.toString():(t=g(e.c),t=n<=N||n>=L?w(t,n):_(t,n,"0"),e.s<0?"-"+t:t)}return W.clone=e,W.ROUND_UP=0,W.ROUND_DOWN=1,W.ROUND_CEIL=2,W.ROUND_FLOOR=3,W.ROUND_HALF_UP=4,W.ROUND_HALF_DOWN=5,W.ROUND_HALF_EVEN=6,W.ROUND_HALF_CEIL=7,W.ROUND_HALF_FLOOR=8,W.EUCLID=9,W.config=W.set=function(e){var t,n;if(null!=e){if("object"!=typeof e)throw Error(o+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(y(n=e[t],0,m,t),j=n),e.hasOwnProperty(t="ROUNDING_MODE")&&(y(n=e[t],0,8,t),O=n),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((n=e[t])&&n.pop?(y(n[0],-m,0,t),y(n[1],0,m,t),N=n[0],L=n[1]):(y(n,-m,m,t),N=-(L=n<0?-n:n))),e.hasOwnProperty(t="RANGE"))if((n=e[t])&&n.pop)y(n[0],-m,-1,t),y(n[1],1,m,t),B=n[0],U=n[1];else{if(y(n,-m,m,t),!n)throw Error(o+t+" cannot be zero: "+n);B=-(U=n<0?-n:n)}if(e.hasOwnProperty(t="CRYPTO")){if((n=e[t])!==!!n)throw Error(o+t+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw D=!n,Error(o+"crypto unavailable");D=n}else D=n}if(e.hasOwnProperty(t="MODULO_MODE")&&(y(n=e[t],0,9,t),F=n),e.hasOwnProperty(t="POW_PRECISION")&&(y(n=e[t],0,m,t),H=n),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(n=e[t]))throw Error(o+t+" not an object: "+n);q=n}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(n=e[t])||/^.$|[+-.\s]|(.).*\1/.test(n))throw Error(o+t+" invalid: "+n);G=n}}return{DECIMAL_PLACES:j,ROUNDING_MODE:O,EXPONENTIAL_AT:[N,L],RANGE:[B,U],CRYPTO:D,MODULO_MODE:F,POW_PRECISION:H,FORMAT:q,ALPHABET:G}},W.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!W.DEBUG)return!0;var t,n,r=e.c,i=e.e,s=e.s;e:if("[object Array]"=={}.toString.call(r)){if((1===s||-1===s)&&i>=-m&&i<=m&&i===a(i)){if(0===r[0]){if(0===i&&1===r.length)return!0;break e}if((t=(i+1)%l)<1&&(t+=l),String(r[0]).length==t){for(t=0;t<r.length;t++)if((n=r[t])<0||n>=c||n!==a(n))break e;if(0!==n)return!0}}}else if(null===r&&null===i&&(null===s||1===s||-1===s))return!0;throw Error(o+"Invalid BigNumber: "+e)},W.maximum=W.max=function(){return V(arguments,P.lt)},W.minimum=W.min=function(){return V(arguments,P.gt)},W.random=(S=9007199254740992,C=Math.random()*S&2097151?function(){return a(Math.random()*S)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,n,r,i,u,c=0,d=[],f=new W(I);if(null==e?e=j:y(e,0,m),i=s(e/l),D)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(i*=2));c<i;)(u=131072*t[c]+(t[c+1]>>>11))>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),t[c]=n[0],t[c+1]=n[1]):(d.push(u%1e14),c+=2);c=i/2}else{if(!crypto.randomBytes)throw D=!1,Error(o+"crypto unavailable");for(t=crypto.randomBytes(i*=7);c<i;)(u=281474976710656*(31&t[c])+1099511627776*t[c+1]+4294967296*t[c+2]+16777216*t[c+3]+(t[c+4]<<16)+(t[c+5]<<8)+t[c+6])>=9e15?crypto.randomBytes(7).copy(t,c):(d.push(u%1e14),c+=7);c=i/7}if(!D)for(;c<i;)(u=C())<9e15&&(d[c++]=u%1e14);for(i=d[--c],e%=l,i&&e&&(u=h[l-e],d[c]=a(i/u)*u);0===d[c];d.pop(),c--);if(c<0)d=[r=0];else{for(r=-1;0===d[0];d.splice(0,1),r-=l);for(c=1,u=d[0];u>=10;u/=10,c++);c<l&&(r-=l-c)}return f.e=r,f.c=d,f}),W.sum=function(){for(var e=1,t=arguments,n=new W(t[0]);e<t.length;)n=n.plus(t[e++]);return n},k=function(){var e="0123456789";function t(e,t,n,r){for(var i,s,a=[0],o=0,u=e.length;o<u;){for(s=a.length;s--;a[s]*=t);for(a[0]+=r.indexOf(e.charAt(o++)),i=0;i<a.length;i++)a[i]>n-1&&(null==a[i+1]&&(a[i+1]=0),a[i+1]+=a[i]/n|0,a[i]%=n)}return a.reverse()}return function(r,i,s,a,o){var u,c,l,d,h,f,m,p,b=r.indexOf("."),y=j,v=O;for(b>=0&&(d=H,H=0,r=r.replace(".",""),f=(p=new W(i)).pow(r.length-b),H=d,p.c=t(_(g(f.c),f.e,"0"),10,s,e),p.e=p.c.length),l=d=(m=t(r,i,s,o?(u=G,e):(u=e,G))).length;0==m[--d];m.pop());if(!m[0])return u.charAt(0);if(b<0?--l:(f.c=m,f.e=l,f.s=a,m=(f=n(f,p,y,v,s)).c,h=f.r,l=f.e),b=m[c=l+y+1],d=s/2,h=h||c<0||null!=m[c+1],h=v<4?(null!=b||h)&&(0==v||v==(f.s<0?3:2)):b>d||b==d&&(4==v||h||6==v&&1&m[c-1]||v==(f.s<0?8:7)),c<1||!m[0])r=h?_(u.charAt(1),-y,u.charAt(0)):u.charAt(0);else{if(m.length=c,h)for(--s;++m[--c]>s;)m[c]=0,c||(++l,m=[1].concat(m));for(d=m.length;!m[--d];);for(b=0,r="";b<=d;r+=u.charAt(m[b++]));r=_(r,l,u.charAt(0))}return r}}(),n=function(){function e(e,t,n){var r,i,s,a,o=0,u=e.length,c=t%f,l=t/f|0;for(e=e.slice();u--;)o=((i=c*(s=e[u]%f)+(r=l*s+(a=e[u]/f|0)*c)%f*f+o)/n|0)+(r/f|0)+l*a,e[u]=i%n;return o&&(e=[o].concat(e)),e}function t(e,t,n,r){var i,s;if(n!=r)s=n>r?1:-1;else for(i=s=0;i<n;i++)if(e[i]!=t[i]){s=e[i]>t[i]?1:-1;break}return s}function n(e,t,n,r){for(var i=0;n--;)e[n]-=i,i=e[n]<t[n]?1:0,e[n]=i*r+e[n]-t[n];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(r,i,s,o,u){var d,h,f,m,g,b,y,v,w,_,k,E,S,C,x,M,R,T=r.s==i.s?1:-1,A=r.c,P=i.c;if(!(A&&A[0]&&P&&P[0]))return new W(r.s&&i.s&&(A?!P||A[0]!=P[0]:P)?A&&0==A[0]||!P?0*T:T/0:NaN);for(w=(v=new W(T)).c=[],T=s+(h=r.e-i.e)+1,u||(u=c,h=p(r.e/l)-p(i.e/l),T=T/l|0),f=0;P[f]==(A[f]||0);f++);if(P[f]>(A[f]||0)&&h--,T<0)w.push(1),m=!0;else{for(C=A.length,M=P.length,f=0,T+=2,(g=a(u/(P[0]+1)))>1&&(P=e(P,g,u),A=e(A,g,u),M=P.length,C=A.length),S=M,k=(_=A.slice(0,M)).length;k<M;_[k++]=0);R=P.slice(),R=[0].concat(R),x=P[0],P[1]>=u/2&&x++;do{if(g=0,(d=t(P,_,M,k))<0){if(E=_[0],M!=k&&(E=E*u+(_[1]||0)),(g=a(E/x))>1)for(g>=u&&(g=u-1),y=(b=e(P,g,u)).length,k=_.length;1==t(b,_,y,k);)g--,n(b,M<y?R:P,y,u),y=b.length,d=1;else 0==g&&(d=g=1),y=(b=P.slice()).length;if(y<k&&(b=[0].concat(b)),n(_,b,k,u),k=_.length,-1==d)for(;t(P,_,M,k)<1;)g++,n(_,M<k?R:P,k,u),k=_.length}else 0===d&&(g++,_=[0]);w[f++]=g,_[0]?_[k++]=A[S]||0:(_=[A[S]],k=1)}while((S++<C||null!=_[0])&&T--);m=null!=_[0],w[0]||w.splice(0,1)}if(u==c){for(f=1,T=w[0];T>=10;T/=10,f++);K(v,s+(v.e=f+h*l-1)+1,o,m)}else v.e=h,v.r=+m;return v}}(),x=/^(-?)0([xbo])(?=\w[\w.]*$)/i,M=/^([^.]+)\.$/,R=/^\.([^.]+)$/,T=/^-?(Infinity|NaN)$/,A=/^\s*\+(?=[\w.])|^\s+|\s+$/g,E=function(e,t,n,r){var i,s=n?t:t.replace(A,"");if(T.test(s))e.s=isNaN(s)?null:s<0?-1:1;else{if(!n&&(s=s.replace(x,(function(e,t,n){return i="x"==(n=n.toLowerCase())?16:"b"==n?2:8,r&&r!=i?e:t})),r&&(i=r,s=s.replace(M,"$1").replace(R,"0.$1")),t!=s))return new W(s,i);if(W.DEBUG)throw Error(o+"Not a"+(r?" base "+r:"")+" number: "+t);e.s=null}e.c=e.e=null},P.absoluteValue=P.abs=function(){var e=new W(this);return e.s<0&&(e.s=1),e},P.comparedTo=function(e,t){return b(this,new W(e,t))},P.decimalPlaces=P.dp=function(e,t){var n,r,i,s=this;if(null!=e)return y(e,0,m),null==t?t=O:y(t,0,8),K(new W(s),e+s.e+1,t);if(!(n=s.c))return null;if(r=((i=n.length-1)-p(this.e/l))*l,i=n[i])for(;i%10==0;i/=10,r--);return r<0&&(r=0),r},P.dividedBy=P.div=function(e,t){return n(this,new W(e,t),j,O)},P.dividedToIntegerBy=P.idiv=function(e,t){return n(this,new W(e,t),0,1)},P.exponentiatedBy=P.pow=function(e,t){var n,r,i,u,c,d,h,f,m=this;if((e=new W(e)).c&&!e.isInteger())throw Error(o+"Exponent not an integer: "+Z(e));if(null!=t&&(t=new W(t)),c=e.e>14,!m.c||!m.c[0]||1==m.c[0]&&!m.e&&1==m.c.length||!e.c||!e.c[0])return f=new W(Math.pow(+Z(m),c?2-v(e):+Z(e))),t?f.mod(t):f;if(d=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new W(NaN);(r=!d&&m.isInteger()&&t.isInteger())&&(m=m.mod(t))}else{if(e.e>9&&(m.e>0||m.e<-1||(0==m.e?m.c[0]>1||c&&m.c[1]>=24e7:m.c[0]<8e13||c&&m.c[0]<=9999975e7)))return u=m.s<0&&v(e)?-0:0,m.e>-1&&(u=1/u),new W(d?1/u:u);H&&(u=s(H/l+2))}for(c?(n=new W(.5),d&&(e.s=1),h=v(e)):h=(i=Math.abs(+Z(e)))%2,f=new W(I);;){if(h){if(!(f=f.times(m)).c)break;u?f.c.length>u&&(f.c.length=u):r&&(f=f.mod(t))}if(i){if(0===(i=a(i/2)))break;h=i%2}else if(K(e=e.times(n),e.e+1,1),e.e>14)h=v(e);else{if(0===(i=+Z(e)))break;h=i%2}m=m.times(m),u?m.c&&m.c.length>u&&(m.c.length=u):r&&(m=m.mod(t))}return r?f:(d&&(f=I.div(f)),t?f.mod(t):u?K(f,H,O,undefined):f)},P.integerValue=function(e){var t=new W(this);return null==e?e=O:y(e,0,8),K(t,t.e+1,e)},P.isEqualTo=P.eq=function(e,t){return 0===b(this,new W(e,t))},P.isFinite=function(){return!!this.c},P.isGreaterThan=P.gt=function(e,t){return b(this,new W(e,t))>0},P.isGreaterThanOrEqualTo=P.gte=function(e,t){return 1===(t=b(this,new W(e,t)))||0===t},P.isInteger=function(){return!!this.c&&p(this.e/l)>this.c.length-2},P.isLessThan=P.lt=function(e,t){return b(this,new W(e,t))<0},P.isLessThanOrEqualTo=P.lte=function(e,t){return-1===(t=b(this,new W(e,t)))||0===t},P.isNaN=function(){return!this.s},P.isNegative=function(){return this.s<0},P.isPositive=function(){return this.s>0},P.isZero=function(){return!!this.c&&0==this.c[0]},P.minus=function(e,t){var n,r,i,s,a=this,o=a.s;if(t=(e=new W(e,t)).s,!o||!t)return new W(NaN);if(o!=t)return e.s=-t,a.plus(e);var u=a.e/l,d=e.e/l,h=a.c,f=e.c;if(!u||!d){if(!h||!f)return h?(e.s=-t,e):new W(f?a:NaN);if(!h[0]||!f[0])return f[0]?(e.s=-t,e):new W(h[0]?a:3==O?-0:0)}if(u=p(u),d=p(d),h=h.slice(),o=u-d){for((s=o<0)?(o=-o,i=h):(d=u,i=f),i.reverse(),t=o;t--;i.push(0));i.reverse()}else for(r=(s=(o=h.length)<(t=f.length))?o:t,o=t=0;t<r;t++)if(h[t]!=f[t]){s=h[t]<f[t];break}if(s&&(i=h,h=f,f=i,e.s=-e.s),(t=(r=f.length)-(n=h.length))>0)for(;t--;h[n++]=0);for(t=c-1;r>o;){if(h[--r]<f[r]){for(n=r;n&&!h[--n];h[n]=t);--h[n],h[r]+=c}h[r]-=f[r]}for(;0==h[0];h.splice(0,1),--d);return h[0]?z(e,h,d):(e.s=3==O?-1:1,e.c=[e.e=0],e)},P.modulo=P.mod=function(e,t){var r,i,s=this;return e=new W(e,t),!s.c||!e.s||e.c&&!e.c[0]?new W(NaN):!e.c||s.c&&!s.c[0]?new W(s):(9==F?(i=e.s,e.s=1,r=n(s,e,0,3),e.s=i,r.s*=i):r=n(s,e,0,F),(e=s.minus(r.times(e))).c[0]||1!=F||(e.s=s.s),e)},P.multipliedBy=P.times=function(e,t){var n,r,i,s,a,o,u,d,h,m,g,b,y,v,w,_=this,k=_.c,E=(e=new W(e,t)).c;if(!(k&&E&&k[0]&&E[0]))return!_.s||!e.s||k&&!k[0]&&!E||E&&!E[0]&&!k?e.c=e.e=e.s=null:(e.s*=_.s,k&&E?(e.c=[0],e.e=0):e.c=e.e=null),e;for(r=p(_.e/l)+p(e.e/l),e.s*=_.s,(u=k.length)<(m=E.length)&&(y=k,k=E,E=y,i=u,u=m,m=i),i=u+m,y=[];i--;y.push(0));for(v=c,w=f,i=m;--i>=0;){for(n=0,g=E[i]%w,b=E[i]/w|0,s=i+(a=u);s>i;)n=((d=g*(d=k[--a]%w)+(o=b*d+(h=k[a]/w|0)*g)%w*w+y[s]+n)/v|0)+(o/w|0)+b*h,y[s--]=d%v;y[s]=n}return n?++r:y.splice(0,1),z(e,y,r)},P.negated=function(){var e=new W(this);return e.s=-e.s||null,e},P.plus=function(e,t){var n,r=this,i=r.s;if(t=(e=new W(e,t)).s,!i||!t)return new W(NaN);if(i!=t)return e.s=-t,r.minus(e);var s=r.e/l,a=e.e/l,o=r.c,u=e.c;if(!s||!a){if(!o||!u)return new W(i/0);if(!o[0]||!u[0])return u[0]?e:new W(o[0]?r:0*i)}if(s=p(s),a=p(a),o=o.slice(),i=s-a){for(i>0?(a=s,n=u):(i=-i,n=o),n.reverse();i--;n.push(0));n.reverse()}for((i=o.length)-(t=u.length)<0&&(n=u,u=o,o=n,t=i),i=0;t;)i=(o[--t]=o[t]+u[t]+i)/c|0,o[t]=c===o[t]?0:o[t]%c;return i&&(o=[i].concat(o),++a),z(e,o,a)},P.precision=P.sd=function(e,t){var n,r,i,s=this;if(null!=e&&e!==!!e)return y(e,1,m),null==t?t=O:y(t,0,8),K(new W(s),e,t);if(!(n=s.c))return null;if(r=(i=n.length-1)*l+1,i=n[i]){for(;i%10==0;i/=10,r--);for(i=n[0];i>=10;i/=10,r++);}return e&&s.e+1>r&&(r=s.e+1),r},P.shiftedBy=function(e){return y(e,-9007199254740991,d),this.times("1e"+e)},P.squareRoot=P.sqrt=function(){var e,t,r,i,s,a=this,o=a.c,u=a.s,c=a.e,l=j+4,d=new W("0.5");if(1!==u||!o||!o[0])return new W(!u||u<0&&(!o||o[0])?NaN:o?a:1/0);if(0==(u=Math.sqrt(+Z(a)))||u==1/0?(((t=g(o)).length+c)%2==0&&(t+="0"),u=Math.sqrt(+t),c=p((c+1)/2)-(c<0||c%2),r=new W(t=u==1/0?"1e"+c:(t=u.toExponential()).slice(0,t.indexOf("e")+1)+c)):r=new W(u+""),r.c[0])for((u=(c=r.e)+l)<3&&(u=0);;)if(s=r,r=d.times(s.plus(n(a,s,l,1))),g(s.c).slice(0,u)===(t=g(r.c)).slice(0,u)){if(r.e<c&&--u,"9999"!=(t=t.slice(u-3,u+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(K(r,r.e+j+2,1),e=!r.times(r).eq(a));break}if(!i&&(K(s,s.e+j+2,0),s.times(s).eq(a))){r=s;break}l+=4,u+=4,i=1}return K(r,r.e+j+1,O,e)},P.toExponential=function(e,t){return null!=e&&(y(e,0,m),e++),$(this,e,t,1)},P.toFixed=function(e,t){return null!=e&&(y(e,0,m),e=e+this.e+1),$(this,e,t)},P.toFormat=function(e,t,n){var r,i=this;if(null==n)null!=e&&t&&"object"==typeof t?(n=t,t=null):e&&"object"==typeof e?(n=e,e=t=null):n=q;else if("object"!=typeof n)throw Error(o+"Argument not an object: "+n);if(r=i.toFixed(e,t),i.c){var s,a=r.split("."),u=+n.groupSize,c=+n.secondaryGroupSize,l=n.groupSeparator||"",d=a[0],h=a[1],f=i.s<0,m=f?d.slice(1):d,p=m.length;if(c&&(s=u,u=c,c=s,p-=s),u>0&&p>0){for(s=p%u||u,d=m.substr(0,s);s<p;s+=u)d+=l+m.substr(s,u);c>0&&(d+=l+m.slice(s)),f&&(d="-"+d)}r=h?d+(n.decimalSeparator||"")+((c=+n.fractionGroupSize)?h.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(n.fractionGroupSeparator||"")):h):d}return(n.prefix||"")+r+(n.suffix||"")},P.toFraction=function(e){var t,r,i,s,a,u,c,d,f,m,p,b,y=this,v=y.c;if(null!=e&&(!(c=new W(e)).isInteger()&&(c.c||1!==c.s)||c.lt(I)))throw Error(o+"Argument "+(c.isInteger()?"out of range: ":"not an integer: ")+Z(c));if(!v)return new W(y);for(t=new W(I),f=r=new W(I),i=d=new W(I),b=g(v),a=t.e=b.length-y.e-1,t.c[0]=h[(u=a%l)<0?l+u:u],e=!e||c.comparedTo(t)>0?a>0?t:f:c,u=U,U=1/0,c=new W(b),d.c[0]=0;m=n(c,t,0,1),1!=(s=r.plus(m.times(i))).comparedTo(e);)r=i,i=s,f=d.plus(m.times(s=f)),d=s,t=c.minus(m.times(s=t)),c=s;return s=n(e.minus(r),i,0,1),d=d.plus(s.times(f)),r=r.plus(s.times(i)),d.s=f.s=y.s,p=n(f,i,a*=2,O).minus(y).abs().comparedTo(n(d,r,a,O).minus(y).abs())<1?[f,i]:[d,r],U=u,p},P.toNumber=function(){return+Z(this)},P.toPrecision=function(e,t){return null!=e&&y(e,1,m),$(this,e,t,2)},P.toString=function(e){var t,n=this,r=n.s,i=n.e;return null===i?r?(t="Infinity",r<0&&(t="-"+t)):t="NaN":(null==e?t=i<=N||i>=L?w(g(n.c),i):_(g(n.c),i,"0"):10===e?t=_(g((n=K(new W(n),j+i+1,O)).c),n.e,"0"):(y(e,2,G.length,"Base"),t=k(_(g(n.c),i,"0"),10,e,r,!0)),r<0&&n.c[0]&&(t="-"+t)),t},P.valueOf=P.toJSON=function(){return Z(this)},P._isBigNumber=!0,i&&(P[Symbol.toStringTag]="BigNumber",P[Symbol.for("nodejs.util.inspect.custom")]=P.valueOf),null!=t&&W.set(t),W}(),n.default=n.BigNumber=n,"function"==typeof define&&define.amd?define((function(){return n})):void 0!==t&&t.exports?t.exports=n:(e||(e="undefined"!=typeof self&&self?self:window),e.BigNumber=n)}(this)}}},{package:"bignumber.js",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/libp2p-switch/node_modules/bignumber.js/bignumber.js"}],[6444,{"./time":6445},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./time");function i(e,t,n){var i=this;this._started=r(),this._rescheduled=0,this._scheduled=t,this._args=n,this._timer=setTimeout((function t(){i._rescheduled>0?(i._scheduled=i._rescheduled-(r()-i._started),i._timer=setTimeout(t,i._scheduled),i._rescheduled=0):e.apply(null,i._args)}),t)}i.prototype.reschedule=function(e){var t=r();return!(t+e-(this._started+this._scheduled)<0)&&(this._started=t,this._rescheduled=e,!0)},i.prototype.clear=function(){clearTimeout(this._timer)},t.exports=function(){if("function"!=typeof arguments[0])throw new Error("callback needed");if("number"!=typeof arguments[1])throw new Error("timeout needed");var e;if(arguments.length>0){e=new Array(arguments.length-2);for(var t=0;t<e.length;t++)e[t]=arguments[t+2]}return new i(arguments[0],arguments[1],e)}}}},{package:"retimer",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/retimer/retimer.js"}],[5645,{"class-is":2522,debug:2927,events:2479},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("events").EventEmitter,i=e("debug"),s=e("class-is");t.exports=s(class extends r{constructor({_switch:e,name:t}){super(),this.switch=e,this.ourPeerInfo=this.switch._peerInfo,this.log=i(`libp2p:conn:${t}`),this.log.error=i(`libp2p:conn:${t}:error`)}close(e){"DISCONNECTING"!==this._state._state&&(this.log("closing connection to %s",this.theirB58Id),e&&this._events.error&&this.emit("error",e),this._state("disconnect"))}emit(e,...t){"error"!==e||this._events.error?super.emit(e,...t):this.log.error(...t)}getState(){return this._state._state}encrypt(){this._state("encrypt")}protect(){this._state("privatize")}upgrade(){this._state("upgrade")}_onDisconnected(){this.switch.connection.remove(this),this.log("disconnected from %s",this.theirB58Id),this.emit("close"),this.removeAllListeners()}_onPrivatized(){this.emit("private",this.conn)}_onPrivatizing(){if(!this.switch.protector)return this._state("done");this.conn=this.switch.protector.protect(this.conn,(e=>{if(e)return this.close(e);this.log("successfully privatized conn to %s",this.theirB58Id),this.conn.setPeerInfo(this.theirPeerInfo),this._state("done")}))}},{className:"BaseConnection",symbolName:"libp2p-switch/BaseConnection"})}}},{package:"libp2p-switch",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/libp2p-switch/src/connection/base.js"}],[5652,{"../connection":5648,"../errors":5654,"async/nextTick":2155,debug:2927,once:6003},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("../connection"),{DIAL_ABORTED:i,ERR_BLACKLISTED:s}=e("../errors"),a=e("async/nextTick"),o=e("once"),u=e("debug"),c=u("libp2p:switch:dial");function l({protocol:e,connection:t,callback:n}){if(!e)return n();t.shake(e,((e,r)=>{if(!r)return n(e);r.setPeerInfo(t.theirPeerInfo),n(null,r)}))}c.error=u("libp2p:switch:dial:error");t.exports=class{constructor(e,t,n){this.id=e,this.switch=t,this._queue=[],this.blackListed=null,this.blackListCount=0,this.isRunning=!1,this.onStopped=n}get length(){return this._queue.length}add(e,t,n){if(!this.isDialAllowed())return a(n,s());this._queue.push({protocol:e,useFSM:t,callback:n})}isDialAllowed(){return!this.blackListed||Date.now()>this.blackListed&&(this.blackListed=null,!0)}start(){return!this.isRunning&&(c("starting dial queue to %s",this.id),this.isRunning=!0,this._run(),!0)}stop(){this.isRunning&&(c("stopping dial queue to %s",this.id),this.isRunning=!1,this.onStopped(this.id))}abort(){for(;this.length>0;){this._queue.shift().callback(i())}this.stop()}blacklist(){if(this.blackListCount++,this.blackListCount>=this.switch.dialer.BLACK_LIST_ATTEMPTS)return void(this.blackListed=Infinity);let e=this.switch.dialer.BLACK_LIST_TTL*Math.pow(this.blackListCount,3);const t=.9*e,n=1.1*e;e=Math.floor(Math.random()*(n-t)+t),this.blackListed=Date.now()+e,this.abort()}_getOrCreateConnection(e){let t=this.switch.connection.getOne(this.id),n=!1;return t||(t=new r({_switch:this.switch,peerInfo:e,muxer:null,conn:null}),this.switch.connection.add(t),t.once("connected",(()=>t.protect())),t.once("private",(()=>t.encrypt())),t.once("encrypted",(()=>t.upgrade())),n=!0),{connectionFSM:t,didCreate:n}}_run(){if(this.length<1||!this.isRunning)return c("stopping the queue for %s",this.id),this.stop();const e=o((()=>{c("starting next dial to %s",this.id),this._run()})),t=this.switch._peerBook.get(this.id);let n=this._queue.shift(),{connectionFSM:r,didCreate:i}=this._getOrCreateConnection(t);if(n.useFSM&&a(n.callback,null,r),["MUXED","CONNECTED"].includes(r.getState()))return n.connection=r,l(n),void e();r.once("error",(e=>{n.callback(e),t.protocols.size>0&&t.isConnected()||this.blacklist()})),r.once("close",(()=>{e()})),r.once("muxed",(()=>{this.blackListCount=0,n.connection=r,l(n),e()})),r.once("unmuxed",(()=>{this.blackListCount=0,n.connection=r,l(n),e()})),i&&r.dial()}}}}},{package:"libp2p-switch",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/libp2p-switch/src/dialer/queue.js"}],[5658,{"async/queue":2157,"async/timeout":2165,debug:2927,"interface-connection":5096,once:6003,"pull-stream/pull":6185,"pull-stream/sources/empty":6195},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("interface-connection").Connection,i=e("pull-stream/pull"),s=e("pull-stream/sources/empty"),a=e("async/timeout"),o=e("async/queue"),u=e("debug"),c=e("once"),l=u("libp2p:switch:dialer:queue");l.error=u("libp2p:switch:dialer:queue:error");t.exports=class{constructor(e,t){this.dialTimeout=t,this.queue=o(((e,t)=>{this._doWork(e.transport,e.addr,e.token,t)}),e)}_doWork(e,t,n,a){a=c(a),l("work:start"),this._dialWithTimeout(e,t,((o,u)=>{if(o)return l.error(`${e.constructor.name}:work`,o),a(o);if(n.cancel)return l("work:cancel"),i(s(),u),"function"==typeof u.close?u.close((e=>a(null))):a(null);n.cancel=!0,l("work:success");(new r).setInnerConn(u),a(null,{multiaddr:t,conn:u})}))}_dialWithTimeout(e,t,n){a((n=>{const r=e.dial(t,(e=>{if(e)return n(e);n(null,r)}))}),this.dialTimeout)(n)}push(e,t,n,r){this.queue.push({transport:e,addr:t,token:n},r)}}}}},{package:"libp2p-switch",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/libp2p-switch/src/limit-dialer/queue.js"}],[5936,{},function(){with(this)return function(){"use strict";return function(e,t,n){(n=t.exports).PROTOCOL_ID="/multistream/1.0.0",n.errors={MULTICODEC_NOT_SUPPORTED:"ERR_MULTICODEC_NOT_SUPPORTED"}}}},{package:"multistream-select",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/multistream-select/src/constants.js"}],[5941,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e,t,n){n(null,e===t)}}}},{package:"multistream-select",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/multistream-select/src/listener/match-exact.js"}],[5942,{semver:5935},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("semver");t.exports=function(e,t,n){const i=e.split("/"),s=t.split("/"),a=i[1],o=i[2],u=s[1],c=s[2];if(a!==u)return n(null,!1);n(null,r.satisfies(o,"~"+c))}}}},{package:"multistream-select",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/multistream-select/src/listener/match-semver.js"}],[5937,{"../select":5944,"../util":5945,"./../constants":5936,"interface-connection":5096,once:6003,"pull-length-prefixed":6166,"pull-stream/pull":6185,"pull-stream/sinks/collect":6186,"pull-stream/throughs/map":6207,"pull-stream/throughs/take":6209,varint:6746},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("varint"),i=e("pull-stream/pull"),s=e("pull-stream/throughs/map"),a=e("pull-stream/sinks/collect"),o=e("pull-stream/throughs/take"),u=e("pull-length-prefixed"),c=e("interface-connection").Connection,l=e("../util"),d=e("../select"),h=e("once"),f=e("./../constants").PROTOCOL_ID;function m(e){return e.toString().slice(0,-1)}t.exports=class{constructor(){this.conn=null,this.log=l.log.dialer()}handle(e,t){this.log("dialer handle conn"),t=h(t);const n=d(f,((n,r)=>{if(n)return t(n);this.log("handshake success"),this.conn=new c(r,e),t()}),this.log);try{i(e,n,e)}catch(e){this.log.error(e),t(e)}}select(e,t){if(this.log("dialer select "+e),t=h(t),!this.conn)return t(new Error("multistream handshake has not finalized yet"));const n=d(e,((e,n)=>{if(e)return this.conn=new c(n,this.conn),t(e);t(null,new c(n,this.conn))}),this.log);i(this.conn,n,this.conn)}ls(e){e=h(e);const t=d("ls",((t,n)=>{if(t)return e(t);i(n,u.decode(),function(e){let t=!0,n=0;return o((e=>t?(r.decode(e),n=r.decode(e,r.decode.bytes),!0):n-- >0))}(),s(m),a(((t,n)=>{if(t)return e(t);e(null,n.slice(1))})))}),this.log);i(this.conn,t,this.conn)}}}}},{package:"multistream-select",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/multistream-select/src/dialer/index.js"}],[5939,{"../select":5944,"./../constants":5936,"./../util":5945,"./ls-handler":5940,"./match-exact":5941,"./select-handler":5943,assert:2088,"interface-connection":5096,"pull-stream/pull":6185},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("pull-stream/pull"),i=e("assert"),s=e("../select"),a=e("./select-handler"),o=e("./ls-handler"),u=e("./match-exact"),c=e("./../util"),l=e("interface-connection").Connection,d=e("./../constants").PROTOCOL_ID;t.exports=class{constructor(){this.handlers={ls:{handlerFunc:(e,t)=>o(this,t),matchFunc:u}},this.log=c.log.listener()}handle(e,t){this.log("listener handle conn");const n=s(d,((n,i)=>{if(n)return t(n);const s=new l(i,e),o=a(s,this.handlers,this.log);r(s,o,s),t()}),this.log);r(e,n,e)}addHandler(e,t,n){this.log("adding handler: "+e),i("function"==typeof t,"handler must be a function"),this.handlers[e]&&this.log("overwriting handler for "+e),n||(n=u),this.handlers[e]={handlerFunc:t,matchFunc:n}}}}}},{package:"multistream-select",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/multistream-select/src/listener/index.js"}],[5565,{protons:6147},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("protons");t.exports=r("\nmessage Identify {\n  // protocolVersion determines compatibility between peers\n  optional string protocolVersion = 5; // e.g. ipfs/1.0.0\n\n  // agentVersion is like a UserAgent string in browsers, or client version in bittorrent\n  // includes the client name and client.\n  optional string agentVersion = 6; // e.g. go-ipfs/0.1.0\n\n  // publicKey is this node's public key (which also gives its node.ID)\n  // - may not need to be sent, as secure channel implies it has been sent.\n  // - then again, if we change / disable secure channel, may still want it.\n  optional bytes publicKey = 1;\n\n  // listenAddrs are the multiaddrs the sender node listens for open connections on\n  repeated bytes listenAddrs = 2;\n\n  // oservedAddr is the multiaddr of the remote endpoint that the sender node perceives\n  // this is useful information to convey to the other side, as it helps the remote endpoint\n  // determine whether its connection to the local peer goes through NAT.\n  optional bytes observedAddr = 4;\n\n  repeated string protocols = 3;\n}\n").Identify}}},{package:"libp2p-identify",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/libp2p-identify/src/message.js"}],[5564,{"./message":5565,buffer:2478,"pull-length-prefixed":6166,"pull-stream/pull":6185,"pull-stream/sources/values":6201},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){const r=e("pull-stream/pull"),i=e("pull-stream/sources/values"),s=e("pull-length-prefixed"),a=e("./message");t.exports=(e,t)=>{e.getObservedAddrs(((o,u)=>{if(o)return;u=u[0];let c=n.alloc(0);t.id.pubKey&&(c=t.id.pubKey.bytes);const l=a.encode({protocolVersion:"ipfs/0.1.0",agentVersion:"na",publicKey:c,listenAddrs:t.multiaddrs.toArray().map((e=>e.buffer)),observedAddr:u?u.buffer:n.from(""),protocols:Array.from(t.protocols)});r(i([l]),s.encode(),e)}))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"libp2p-identify",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/libp2p-identify/src/listener.js"}],[5562,{"./message":5565,multiaddr:5903,"peer-id":6117,"peer-info":6118,"pull-length-prefixed":6166,"pull-stream/pull":6185,"pull-stream/sinks/collect":6186,"pull-stream/throughs/take":6209},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("peer-info"),i=e("peer-id"),s=e("multiaddr"),a=e("pull-stream/pull"),o=e("pull-stream/throughs/take"),u=e("pull-stream/sinks/collect"),c=e("pull-length-prefixed"),l=e("./message");t.exports=(e,t,n)=>{"function"==typeof t&&(n=t,t=null,console.warn("WARNING: no expected peer info was given, identify will not be able to verify peer integrity")),a(e,c.decode(),o(1),u(((e,a)=>{if(e)return n(e);if(0===a.length)return n(new Error("conn was closed, did not receive data"));const o=l.decode(a[0]);i.createFromPubKey(o.publicKey,((e,i)=>{if(e)return n(e);const a=new r(i);if(t&&t.id.toB58String()!==i.toB58String())return n(new Error("invalid peer"));try{o.listenAddrs.map(s).forEach((e=>a.multiaddrs.add(e)))}catch(e){return n(e)}let u;try{u=function(e){if(!function(e){return e.observedAddr&&e.observedAddr.length>0}(e))return[];let t=e.observedAddr;Array.isArray(t)||(t=[t]);return t.map((e=>s(e)))}(o)}catch(e){return n(e)}a.protocols=new Set(o.protocols),n(null,a,u)}))})))}}}},{package:"libp2p-identify",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/libp2p-identify/src/dialer.js"}],[5511,{"../protocol":5515,multiaddr:5903,"peer-id":6117,"peer-info":6118},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("multiaddr"),i=e("peer-info"),s=e("peer-id"),a=e("../protocol");t.exports=function(e){function t(e,t,n){return n=n||(()=>{}),e.write(a.CircuitRelay.encode({type:a.CircuitRelay.Type.STATUS,code:t})),n()}return{getB58String:function(e){let t=null;if(r.isMultiaddr(e)){t=r(e).getPeerId()}else i.isPeerInfo(e)&&(t=e.id.toB58String());return t},peerInfoFromMa:function(t){let n;if(i.isPeerInfo(t))n=t;else if(r.isMultiaddr(t)){const r=t.getPeerId();try{n=e._peerBook.get(r)}catch(e){n=new i(s.createFromB58String(r))}n.multiaddrs.add(t)}else if(s.isPeerId(t)){const r=t.toB58String();n=e._peerBook.has(r)?e._peerBook.get(r):t}return n},isPeerConnected:function(t){return e.muxedConns[t]||e.conns[t]},validateAddrs:function(e,n,i,s){try{e.dstPeer.addrs.forEach((e=>r(e)))}catch(e){return t(n,i===a.CircuitRelay.Type.HOP?a.CircuitRelay.Status.HOP_DST_MULTIADDR_INVALID:a.CircuitRelay.Status.STOP_DST_MULTIADDR_INVALID),s(e)}try{e.srcPeer.addrs.forEach((e=>r(e)))}catch(e){return t(n,i===a.CircuitRelay.Type.HOP?a.CircuitRelay.Status.HOP_SRC_MULTIADDR_INVALID:a.CircuitRelay.Status.STOP_SRC_MULTIADDR_INVALID),s(e)}return s(null)},writeResponse:t,peerIdFromId:function(e){return"string"==typeof e?s.createFromB58String(e):s.createFromBytes(e)}}}}}},{package:"libp2p-circuit",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/libp2p-circuit/src/circuit/utils.js"}],[5507,{"../multicodec":5514,"../protocol":5515,"./stream-handler":5510,"./utils":5511,"async/setImmediate":2161,"async/waterfall":2167,debug:2927,"interface-connection":5096,multiaddr:5903,once:6003,"peer-id":6117},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("once"),i=e("peer-id"),s=e("async/waterfall"),a=e("async/setImmediate"),o=e("multiaddr"),u=e("interface-connection").Connection,c=e("./utils"),l=e("./stream-handler"),d=e("debug"),h=d("libp2p:circuit:dialer");h.err=d("libp2p:circuit:error:dialer");const f=e("../multicodec"),m=e("../protocol");t.exports=class{constructor(e,t){this.swarm=e,this.relayPeers=new Map,this.relayConns=new Map,this.options=t,this.utils=c(e)}_dialRelayHelper(e,t){return this.relayConns.has(e.id.toB58String())?t(null,this.relayConns.get(e.id.toB58String())):this._dialRelay(e,t)}dial(e,t){t=t||(()=>{});const n=e.toString();if(!n.includes("/p2p-circuit"))return h.err("invalid circuit address"),t(new Error("invalid circuit address"));const r=n.split("p2p-circuit"),i="/"===r[0]?null:o(r[0]),s=o(r[1]||r[0]),c=new u;return a(this._dialPeer.bind(this),s,i,((e,n)=>{if(e)return h.err(e),t(e);c.setInnerConn(n),t(null,c)})),c}canHop(e,t){t=r(t||(()=>{})),this._dialRelayHelper(e,((n,r)=>{if(n)return t(n);const i=new l(r);s([e=>i.write(m.CircuitRelay.encode({type:m.CircuitRelay.Type.CAN_HOP}),e),e=>i.read(e)],((n,r)=>{if(n)return t(n);if(m.CircuitRelay.decode(r).code!==m.CircuitRelay.Status.SUCCESS){const n=new Error(`HOP not supported, skipping - ${this.utils.getB58String(e)}`);return h(n),t(n)}h("HOP supported adding as relay - %s",this.utils.getB58String(e)),this.relayPeers.set(this.utils.getB58String(e),e),i.close(),t()}))}))}_dialPeer(e,t,n){if("function"==typeof t&&(n=t,t=null),n||(n=()=>{}),e=o(e),t)return this._negotiateRelay(t,e,((e,t)=>e?(h.err("An error has occurred negotiating the relay connection",e),n(e)):n(null,t)));{const t=Array.from(this.relayPeers.values());let r=i=>{if(!i){let e="no relay peers were found or all relays failed to dial";return h.err(e),n(e)}return this._negotiateRelay(i,e,((e,i)=>{if(e)return h.err(e),r(t.shift());n(null,i)}))};r(t.shift())}}_negotiateRelay(e,t,n){t=o(t),e=this.utils.peerInfoFromMa(e);const r=this.swarm._peerInfo.multiaddrs.toArray();this._dialRelayHelper(e,((e,a)=>{if(e)return h.err(e),n(e);let o=new l(a);s([e=>{let n;h("negotiating relay for peer %s",t.getPeerId());try{n=i.createFromB58String(t.getPeerId()).id}catch(t){return e(t)}o.write(m.CircuitRelay.encode({type:m.CircuitRelay.Type.HOP,srcPeer:{id:this.swarm._peerInfo.id.id,addrs:r.map((e=>e.buffer))},dstPeer:{id:n,addrs:[t.buffer]}}),e)},e=>o.read(e)],((e,t)=>{if(e)return n(e);const r=m.CircuitRelay.decode(t);return r.type!==m.CircuitRelay.Type.STATUS?n(new Error(`Got invalid message type - expected ${m.CircuitRelay.Type.STATUS} got ${r.type}`)):r.code!==m.CircuitRelay.Status.SUCCESS?n(new Error(`Got ${r.code} error code trying to dial over relay`)):void n(null,new u(o.rest()))}))}))}_dialRelay(e,t){t=r(t||(()=>{})),this.swarm.dial(e,f.relay,r(((e,n)=>{if(e)return h.err(e),t(e);t(null,n)})))}}}}},{package:"libp2p-circuit",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/libp2p-circuit/src/circuit/dialer.js"}],[5513,{"./circuit/hop":5508,"./circuit/stop":5509,"./circuit/stream-handler":5510,"./circuit/utils":5511,"./multicodec":5514,"./protocol":5515,"async/setImmediate":2161,debug:2927,events:2479,mafmt:5884,multiaddr:5903},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("async/setImmediate"),i=e("./multicodec"),s=e("events").EventEmitter,a=e("multiaddr"),o=e("mafmt"),u=e("./circuit/stop"),c=e("./circuit/hop"),l=e("./protocol"),d=e("./circuit/utils"),h=e("./circuit/stream-handler"),f=e("debug"),m=f("libp2p:circuit:listener");m.err=f("libp2p:circuit:error:listener"),t.exports=(e,t,n)=>{const f=new s,p=d(e);return f.stopHandler=new u(e),f.stopHandler.on("connection",(e=>f.emit("connection",e))),f.hopHandler=new c(e,t.hop),f.listen=(t,s)=>{s=s||(()=>{}),e.handle(i.relay,((e,t)=>{const r=new h(t);r.read(((e,t)=>{if(e)return void m.err(e);let i=null;try{i=l.CircuitRelay.decode(t)}catch(e){return p.writeResponse(r,l.CircuitRelay.Status.MALFORMED_MESSAGE)}switch(i.type){case l.CircuitRelay.Type.CAN_HOP:case l.CircuitRelay.Type.HOP:return f.hopHandler.handle(i,r);case l.CircuitRelay.Type.STOP:return f.stopHandler.handle(i,r,n);default:return p.writeResponse(r,l.CircuitRelay.Status.INVALID_MSG_TYPE),r.close()}}))})),r((()=>f.emit("listen"))),s()},f.close=t=>{e.unhandle(i.relay),r((()=>f.emit("close"))),t()},f.getAddrs=t=>{let n=e._peerInfo.multiaddrs.toArray(),r=n.filter((t=>o.Circuit.matches(t)&&!t.toString().includes(e._peerInfo.id.toB58String())));r.length&&(n=r);let i=[];n.forEach((t=>{const n=`/p2p-circuit/ipfs/${e._peerInfo.id.toB58String()}`;if(t.toString()!==n)if(o.Circuit.matches(t))i.push(t.encapsulate(`/ipfs/${e._peerInfo.id.toB58String()}`));else if(t.getPeerId())i.push(a("/p2p-circuit").encapsulate(t));else{const n=`${t}/ipfs/${e._peerInfo.id.toB58String()}`;i.push(a("/p2p-circuit").encapsulate(n))}else i.push(a(n))})),t(null,i)},f}}}},{package:"libp2p-circuit",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/libp2p-circuit/src/listener.js"}],[5025,{"./consumable-hash":5027,"sparse-array":6573},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("sparse-array"),i=e("./consumable-hash"),s={bits:8};class a{constructor(e,t,n){if(this._options=Object.assign({},s,e),this._popCount=0,this._parent=t,this._posAtParent=n,!this._options.hashFn)throw new Error("please define an options.hashFn");this._options.hash||(this._options.hash=i(this._options.hashFn)),this._children=new r}static isBucket(e){return e instanceof a}async put(e,t){const n=await this._findNewBucketAndPos(e);await n.bucket._putAt(n,e,t)}async get(e){const t=await this._findChild(e);if(t)return t.value}async del(e){const t=await this._findPlace(e),n=t.bucket._at(t.pos);n&&n.key===e&&t.bucket._delAt(t.pos)}leafCount(){return this._children.compactArray().reduce(((e,t)=>t instanceof a?e+t.leafCount():e+1),0)}childrenCount(){return this._children.length}onlyChild(){return this._children.get(0)}*eachLeafSeries(){const e=this._children.compactArray();for(const t of e)if(t instanceof a)for(const e of t.eachLeafSeries())yield e;else yield t}serialize(e,t){return t(this._children.reduce(((n,r,i)=>(r&&(r instanceof a?n.push(r.serialize(e,t)):n.push(e(r,i))),n)),[]))}async asyncTransform(e,t){return l(this,e,t)}toJSON(){return this.serialize(u,c)}prettyPrint(){return JSON.stringify(this.toJSON(),null,"  ")}tableSize(){return Math.pow(2,this._options.bits)}async _findChild(e){const t=await this._findPlace(e),n=t.bucket._at(t.pos);if(n&&n.key===e)return n}async _findPlace(e){const t=this._options.hash(e),n=await t.take(this._options.bits),r=this._children.get(n);return r instanceof a?r._findPlace(t):{bucket:this,pos:n,hash:t}}async _findNewBucketAndPos(e){const t=await this._findPlace(e),n=t.bucket._at(t.pos);if(n&&n.key!==e){const e=new a(this._options,t.bucket,t.pos);t.bucket._putObjectAt(t.pos,e);const r=await e._findPlace(n.hash);return r.bucket._putAt(r,n.key,n.value),e._findNewBucketAndPos(t.hash)}return t}_putAt(e,t,n){this._putObjectAt(e.pos,{key:t,value:n,hash:e.hash})}_putObjectAt(e,t){this._children.get(e)||this._popCount++,this._children.set(e,t)}_delAt(e){this._children.get(e)&&this._popCount--,this._children.unset(e),this._level()}_level(){if(this._parent&&this._popCount<=1)if(1===this._popCount){const e=this._children.find(o);if(!(e instanceof a)){const t=e.hash;t.untake(this._options.bits);const n={pos:this._posAtParent,hash:t};this._parent._putAt(n,e.key,e.value)}}else this._parent._delAt(this._posAtParent)}_at(e){return this._children.get(e)}}function o(e){return Boolean(e)}function u(e,t){return e.key}function c(e){return e}async function l(e,t,n){const r=[];for(const i of e._children.compactArray()){if(i instanceof a)await l(i,t,n);else{const n=await t(i);r.push({bitField:e._children.bitField(),children:n})}return n(r)}}t.exports=a}}},{package:"hamt-sharding",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/hamt-sharding/src/bucket.js"}],[2930,{buffer:2478},function(){with(this)return function(){"use strict";return function(e,t,n){(function(e){(function(){function n(t){return t instanceof e||t instanceof Date||t instanceof RegExp}function r(t){if(t instanceof e){var n=e.alloc?e.alloc(t.length):new e(t.length);return t.copy(n),n}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t);throw new Error("Unexpected situation")}function i(e){var t=[];return e.forEach((function(e,s){"object"==typeof e&&null!==e?Array.isArray(e)?t[s]=i(e):n(e)?t[s]=r(e):t[s]=a({},e):t[s]=e})),t}function s(e,t){return"__proto__"===t?undefined:e[t]}var a=t.exports=function(){if(arguments.length<1||"object"!=typeof arguments[0])return!1;if(arguments.length<2)return arguments[0];var e,t,o=arguments[0],u=Array.prototype.slice.call(arguments,1);return u.forEach((function(u){"object"!=typeof u||null===u||Array.isArray(u)||Object.keys(u).forEach((function(c){return t=s(o,c),(e=s(u,c))===o?void 0:"object"!=typeof e||null===e?void(o[c]=e):Array.isArray(e)?void(o[c]=i(e)):n(e)?void(o[c]=r(e)):"object"!=typeof t||null===t||Array.isArray(t)?void(o[c]=a({},e)):void(o[c]=a(t,e))}))})),o}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"deep-extend",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/deep-extend/lib/deep-extend.js"}],[5028,{"./bucket":5025},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("./bucket");t.exports=function(e){return new r(e)},t.exports.isBucket=r.isBucket}}},{package:"hamt-sharding",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/hamt-sharding/src/index.js"}],[5895,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports={WORKER_REQUEST_READ_LOCK:"lock:worker:request-read",WORKER_RELEASE_READ_LOCK:"lock:worker:release-read",MASTER_GRANT_READ_LOCK:"lock:master:grant-read",WORKER_REQUEST_WRITE_LOCK:"lock:worker:request-write",WORKER_RELEASE_WRITE_LOCK:"lock:worker:release-write",MASTER_GRANT_WRITE_LOCK:"lock:master:grant-write"}}}},{package:"mortice",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/mortice/lib/constants.js"}],[6520,{"./lib/index":6524},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=e("./lib/index")}}},{package:"shortid",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/shortid/index.js"}],[2093,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=async function*(e,t){let n=[];for await(const r of e)for(n=n.concat(r);n.length>=t;)yield n.slice(0,t),n=n.slice(t);for(;n.length;)yield n.slice(0,t),n=n.slice(t)}}}},{package:"async-iterator-batch",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/async-iterator-batch/index.js"}],[2410,{buffer:2478,"readable-stream":2425,util:2485},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r=e("readable-stream").Duplex;function i(e){if(!(this instanceof i))return new i(e);if(this._bufs=[],this.length=0,"function"==typeof e){this._callback=e;var t=function(e){this._callback&&(this._callback(e),this._callback=null)}.bind(this);this.on("pipe",(function(e){e.on("error",t)})),this.on("unpipe",(function(e){e.removeListener("error",t)}))}else this.append(e);r.call(this)}e("util").inherits(i,r),i.prototype._offset=function(e){var t,n=0,r=0;if(0===e)return[0,0];for(;r<this._bufs.length;r++){if(e<(t=n+this._bufs[r].length)||r==this._bufs.length-1)return[r,e-n];n=t}},i.prototype._reverseOffset=function(e){for(var t=e[0],n=e[1],r=0;r<t;r++)n+=this._bufs[r].length;return n},i.prototype.append=function(e){var t=0;if(n.isBuffer(e))this._appendBuffer(e);else if(Array.isArray(e))for(;t<e.length;t++)this.append(e[t]);else if(e instanceof i)for(;t<e._bufs.length;t++)this.append(e._bufs[t]);else null!=e&&("number"==typeof e&&(e=e.toString()),this._appendBuffer(n.from(e)));return this},i.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length},i.prototype._write=function(e,t,n){this._appendBuffer(e),"function"==typeof n&&n()},i.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)},i.prototype.end=function(e){r.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)},i.prototype.get=function(e){if(e>this.length||e<0)return undefined;var t=this._offset(e);return this._bufs[t[0]][t[1]]},i.prototype.slice=function(e,t){return"number"==typeof e&&e<0&&(e+=this.length),"number"==typeof t&&t<0&&(t+=this.length),this.copy(null,0,e,t)},i.prototype.copy=function(e,t,r,i){if(("number"!=typeof r||r<0)&&(r=0),("number"!=typeof i||i>this.length)&&(i=this.length),r>=this.length)return e||n.alloc(0);if(i<=0)return e||n.alloc(0);var s,a,o=!!e,u=this._offset(r),c=i-r,l=c,d=o&&t||0,h=u[1];if(0===r&&i==this.length){if(!o)return 1===this._bufs.length?this._bufs[0]:n.concat(this._bufs,this.length);for(a=0;a<this._bufs.length;a++)this._bufs[a].copy(e,d),d+=this._bufs[a].length;return e}if(l<=this._bufs[u[0]].length-h)return o?this._bufs[u[0]].copy(e,t,h,h+l):this._bufs[u[0]].slice(h,h+l);for(o||(e=n.allocUnsafe(c)),a=u[0];a<this._bufs.length;a++){if(!(l>(s=this._bufs[a].length-h))){this._bufs[a].copy(e,d,h,h+l),d+=s;break}this._bufs[a].copy(e,d,h),d+=s,l-=s,h&&(h=0)}return e.length>d?e.slice(0,d):e},i.prototype.shallowSlice=function(e,t){if(e=e||0,t="number"!=typeof t?this.length:t,e<0&&(e+=this.length),t<0&&(t+=this.length),e===t)return new i;var n=this._offset(e),r=this._offset(t),s=this._bufs.slice(n[0],r[0]+1);return 0==r[1]?s.pop():s[s.length-1]=s[s.length-1].slice(0,r[1]),0!=n[1]&&(s[0]=s[0].slice(n[1])),new i(s)},i.prototype.toString=function(e,t,n){return this.slice(t,n).toString(e)},i.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;){if(!(e>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},i.prototype.duplicate=function(){for(var e=0,t=new i;e<this._bufs.length;e++)t.append(this._bufs[e]);return t},i.prototype._destroy=function(e,t){this._bufs.length=0,this.length=0,t(e)},i.prototype.indexOf=function(e,t,r){if(r===undefined&&"string"==typeof t&&(r=t,t=undefined),"function"==typeof e||Array.isArray(e))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"==typeof e?e=n.from([e]):"string"==typeof e?e=n.from(e,r):e instanceof i?e=e.slice():n.isBuffer(e)||(e=n.from(e)),t=Number(t||0),isNaN(t)&&(t=0),t<0&&(t=this.length+t),t<0&&(t=0),0===e.length)return t>this.length?this.length:t;for(var s=this._offset(t),a=s[0],o=s[1];a<this._bufs.length;a++){for(var u=this._bufs[a];o<u.length;){if(u.length-o>=e.length){var c=u.indexOf(e,o);if(-1!==c)return this._reverseOffset([a,c]);o=u.length-e.length+1}else{var l=this._reverseOffset([a,o]);if(this._match(l,e))return l;o++}}o=0}return-1},i.prototype._match=function(e,t){if(this.length-e<t.length)return!1;for(var n=0;n<t.length;n++)if(this.get(e+n)!==t[n])return!1;return!0},function(){var e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(var t in e)!function(t){i.prototype[t]=null===e[t]?function(e,n){return this.slice(e,e+n)[t](0,n)}:function(n){return this.slice(n,n+e[t])[t](0)}}(t)}(),t.exports=i}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"bl",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/bl/bl.js"}],[6259,{"../dist/rabin-wasm.node.js":6258,"./rabin":6260},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("./rabin"),i=e("../dist/rabin-wasm.node.js");t.exports={Rabin:r,create:async(e,t,n,s)=>{const a=await i();return new r(e,t,n,s,a)}}}}},{package:"rabin-wasm",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/rabin-wasm/src/index.js"}],[1347,{"bn.js":1336,buffer:2478,"js-sha3":1356,"number-to-bn":5994},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r=e("bn.js"),i=e("number-to-bn"),s=e("js-sha3").keccak_256;function a(e){for(var t=e,n=t[0];t.length>0&&"0"===n.toString();)n=(t=t.slice(1))[0];return t}function o(e){var t=e.toString(16);return t.length%2&&(t="0"+t),a(new n(t,"hex"))}function u(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}function c(e,t){var r=e;if(!n.isBuffer(r)){if(!u(r)){var i=new Error(t?"[ethjs-abi] invalid "+t:"[ethjs-abi] invalid hex or buffer, must be a prefixed alphanumeric even length hex string");throw i.reason="[ethjs-abi] invalid hex string, hex must be prefixed and alphanumeric (e.g. 0x023..)",i.value=r,i}(r=r.substring(2)).length%2&&(r="0"+r),r=new n(r,"hex")}return r}function l(e,t){return{encode:function(r){var s=r;return"object"==typeof s&&s.toString&&(s.toTwos||s.dividedToIntegerBy)&&(s=s.toString(10).split(".")[0]),"string"!=typeof s&&"number"!=typeof s||(s=String(s).split(".")[0]),s=(s=i(s)).toTwos(8*e).maskn(8*e),t&&(s=s.fromTwos(8*e).toTwos(256)),s.toArrayLike(n,"be",32)},decode:function(n,i){var s=32-e,a=new r(n.slice(i+s,i+32));return a=t?a.fromTwos(8*e):a.maskn(8*e),{consumed:32,value:new r(a.toString(10))}}}}var d=l(32,!1),h={encode:function(e){return d.encode(e?1:0)},decode:function(e,t){var n=d.decode(e,t);return{consumed:n.consumed,value:!n.value.isZero()}}};function f(e){return{encode:function(e){var t=e;if(32===(t=c(t)).length)return t;var r=new n(32);return r.fill(0),t.copy(r),r},decode:function(t,n){if(0!==t.length&&t.length<n+32)throw new Error("[ethjs-abi] while decoding fixed bytes, invalid bytes data length: "+e);return{consumed:32,value:"0x"+t.slice(n,n+e).toString("hex")}}}}var m={encode:function(e){var t=e,r=new n(32);if(!u(t,20))throw new Error("[ethjs-abi] while encoding address, invalid address value, not alphanumeric 20 byte hex string");return t=c(t),r.fill(0),t.copy(r,12),r},decode:function(e,t){if(0===e.length)return{consumed:32,value:"0x"};if(0!==e.length&&e.length<t+32)throw new Error("[ethjs-abi] while decoding address data, invalid address data, invalid byte length "+e.length);return{consumed:32,value:"0x"+e.slice(t+12,t+32).toString("hex")}}};function p(e){var t=parseInt(32*Math.ceil(e.length/32)),r=new n(t-e.length);return r.fill(0),n.concat([d.encode(e.length),e,r])}function g(e,t){if(0!==e.length&&e.length<t+32)throw new Error("[ethjs-abi] while decoding dynamic bytes data, invalid bytes length: "+e.length+" should be less than "+(t+32));var n=d.decode(e,t).value;if(n=n.toNumber(),0!==e.length&&e.length<t+32+n)throw new Error("[ethjs-abi] while decoding dynamic bytes data, invalid bytes length: "+e.length+" should be less than "+(t+32+n));return{consumed:parseInt(32+32*Math.ceil(n/32),10),value:e.slice(t+32,t+32+n)}}var b={encode:function(e){return p(c(e))},decode:function(e,t){var n=g(e,t);return n.value="0x"+n.value.toString("hex"),n},dynamic:!0},y={encode:function(e){return p(new n(e,"utf8"))},decode:function(e,t){var n=g(e,t);return n.value=n.value.toString("utf8"),n},dynamic:!0};function v(e,t){return{encode:function(r){var i=new n(0),s=t;if(!Array.isArray(r))throw new Error("[ethjs-abi] while encoding array, invalid array data, not type Object (Array)");if(-1===s&&(s=r.length,i=d.encode(s)),s!==r.length)throw new Error("[ethjs-abi] while encoding array, size mismatch array length "+s+" does not equal "+r.length);return r.forEach((function(t){i=n.concat([i,e.encode(t)])})),i},decode:function(n,r){var i,s=t,a=r,o=0;-1===s&&(s=(i=d.decode(n,a)).value.toNumber(),o+=i.consumed,a+=i.consumed);for(var u=[],c=0;c<s;c++){var l=e.decode(n,a);o+=l.consumed,a+=l.consumed,u.push(l.value)}return{consumed:o,value:u}},dynamic:-1===t}}var w=new RegExp(/^((u?int|bytes)([0-9]*)|(address|bool|string)|(\[([0-9]*)\]))/);t.exports={BN:r,bnToBuffer:o,isHexString:u,hexOrBuffer:c,hexlify:function(e){return"number"==typeof e?"0x"+o(new r(e)).toString("hex"):e.mod||e.modulo?"0x"+o(e).toString("hex"):"0x"+c(e).toString("hex")},stripZeros:a,keccak256:s,getKeys:function(e,t,n){var r=[];if(!Array.isArray(e))throw new Error("[ethjs-abi] while getting keys, invalid params value "+JSON.stringify(e));for(var i=0;i<e.length;i++){var s=e[i][t];if(n&&!s)s="";else if("string"!=typeof s)throw new Error("[ethjs-abi] while getKeys found invalid ABI data structure, type value not string");r.push(s)}return r},numberToBN:i,coderNumber:l,uint256Coder:d,coderBoolean:h,coderFixedBytes:f,coderAddress:m,coderDynamicBytes:b,coderString:y,coderArray:v,paramTypePart:w,getParamCoder:function(e){for(var t=e,n=null,r="[ethjs-abi] while getting param coder (getParamCoder) type value "+JSON.stringify(t)+" is either invalid or unsupported by ethjs-abi.";t;){var i=t.match(w);if(!i)throw new Error(r);t=t.substring(i[0].length);var s=i[2]||i[4]||i[5];switch(s){case"int":case"uint":if(n)throw new Error(r);var a=parseInt(i[3]||256);if(0===a||a>256||a%8!=0)throw new Error("[ethjs-abi] while getting param coder for type "+t+", invalid "+s+"<N> width: "+t);n=l(a/8,"int"===s);break;case"bool":if(n)throw new Error(r);n=h;break;case"string":if(n)throw new Error(r);n=y;break;case"bytes":if(n)throw new Error(r);if(i[3]){var o=parseInt(i[3]);if(0===o||o>32)throw new Error("[ethjs-abi] while getting param coder for prefix bytes, invalid type "+t+", size "+o+" should be 0 or greater than 32");n=f(o)}else n=b;break;case"address":if(n)throw new Error(r);n=m;break;case"[]":if(!n||n.dynamic)throw new Error(r);n=v(n,-1);break;default:if(!n||n.dynamic)throw new Error(r);n=v(n,parseInt(i[6]))}}if(!n)throw new Error(r);return n}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"ethjs-abi",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/ethjs-abi/lib/utils/index.js"}],[1351,{"./utils/index.js":1352,buffer:2478},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r=e("./utils/index.js"),i=r.uint256Coder,s=(r.coderBoolean,r.coderFixedBytes,r.coderAddress,r.coderDynamicBytes,r.coderString,r.coderArray,r.paramTypePart,r.getParamCoder);function a(){}function o(e,t){if(e.length!==t.length)throw new Error("[ethjs-abi] while encoding params, types/values mismatch, Your contract requires "+e.length+" types (arguments), and you passed in "+t.length);var r=[];function a(e){return parseInt(32*Math.ceil(e/32))}e.forEach((function(e,n){var i=s(e);r.push({dynamic:i.dynamic,value:i.encode(t[n])})}));var o=0,u=0;r.forEach((function(e){e.dynamic?(o+=32,u+=a(e.value.length)):o+=a(e.value.length)}));var c=0,l=o,d=new n(o+u);return r.forEach((function(e,t){e.dynamic?(i.encode(l).copy(d,c),c+=32,e.value.copy(d,l),l+=a(e.value.length)):(e.value.copy(d,c),c+=a(e.value.length))})),"0x"+d.toString("hex")}function u(e,t,n){var o=!(arguments.length>3&&arguments[3]!==undefined)||arguments[3];arguments.length<3&&(n=t,t=e,e=[]),n=r.hexOrBuffer(n);var u=new a,c=0;return t.forEach((function(t,r){var a=s(t);if(a.dynamic){var l=i.decode(n,c),d=a.decode(n,l.value.toNumber());c+=l.consumed}else{d=a.decode(n,c);c+=d.consumed}o&&(u[r]=d.value),e[r]&&(u[e[r]]=d.value)})),u}function c(e,t){var i=e.name+"("+r.getKeys(e.inputs,"type").join(",")+")";return""+("0x"+new n(r.keccak256(i),"hex").slice(0,4).toString("hex"))+o(r.getKeys(e.inputs,"type"),t).substring(2)}function l(e){var t=e.name+"("+r.getKeys(e.inputs,"type").join(",")+")";return"0x"+r.keccak256(t)}function d(e,t,i){var a=!(arguments.length>3&&arguments[3]!==undefined)||arguments[3],o=e.inputs.filter((function(e){return!e.indexed})),c=r.getKeys(o,"name",!0),l=r.getKeys(o,"type"),d=u(c,l,r.hexOrBuffer(t),a),h=e.anonymous?0:1;return e.inputs.filter((function(e){return e.indexed})).map((function(e,t){var r=new n(i[t+h].slice(2),"hex"),a=s(e.type);d[e.name]=a.decode(r,0).value})),d._eventName=e.name,d}function h(e,t){var n=!(arguments.length>2&&arguments[2]!==undefined)||arguments[2];if(e&&t.topics[0]===l(e))return d(e,t.data,t.topics,n)}t.exports={encodeParams:o,decodeParams:u,encodeMethod:c,decodeMethod:function(e,t){return u(r.getKeys(e.outputs,"name",!0),r.getKeys(e.outputs,"type"),r.hexOrBuffer(t))},encodeEvent:function(e,t){return c(e,t)},decodeEvent:d,decodeLogItem:h,logDecoder:function(e){var t=!(arguments.length>1&&arguments[1]!==undefined)||arguments[1],n={};return e.filter((function(e){return"event"===e.type})).map((function(e){n[l(e)]=e})),function(e){return e.map((function(e){return h(n[e.topics[0]],e,t)})).filter((function(e){return e}))}},eventSignature:l}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"ethjs-abi",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/ethjs-contract/node_modules/ethjs-abi/lib/index.js"}],[1349,{"babel-runtime/core-js/object/keys":2208},function(){with(this)return function(){"use strict";return function(e,t,n){var r,i=e("babel-runtime/core-js/object/keys"),s=(r=i)&&r.__esModule?r:{default:r};var a=["from","to","data","value","gasPrice","gas"];t.exports=function(e){if(!Array.isArray(e)||0===e.length)return!1;var t=e[e.length-1];if(!t)return!1;if("object"!=typeof t)return!1;if(0===(0,s.default)(t).length)return!0;var n=(0,s.default)(t);if(a.some((function(e){return n.includes(e)})))return!0;return!1}}}},{package:"ethjs-contract",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/ethjs-contract/lib/has-tx-object.js"}],[1348,{"./has-tx-object":1349,"babel-runtime/core-js/json/stringify":2204,"babel-runtime/core-js/object/assign":2205,"babel-runtime/helpers/asyncToGenerator":2213,"babel-runtime/regenerator":2330,"ethjs-abi":1351,"ethjs-filter":3241,"ethjs-util":3249,"js-sha3":1356,"promise-to-callback":6129},function(){with(this)return function(){"use strict";return function(e,t,n){var r=o(e("babel-runtime/regenerator")),i=o(e("babel-runtime/core-js/json/stringify")),s=o(e("babel-runtime/helpers/asyncToGenerator")),a=o(e("babel-runtime/core-js/object/assign"));function o(e){return e&&e.__esModule?e:{default:e}}var u=e("ethjs-abi"),c=e("ethjs-filter"),l=e("ethjs-util").getKeys,d=e("js-sha3").keccak_256,h=e("./has-tx-object"),f=e("promise-to-callback");function m(e){return e.filter((function(e){return("function"===e.type||"event"===e.type)&&e.name.length>0}))}t.exports=function(){var e=(o=(0,s.default)(r.default.mark((function e(t){var s,o,c,l,d,f=t.methodObject,m=t.methodArgs;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s="call",o={},h(m)&&(o=m.pop()),(c=(0,a.default)({},n.defaultTxObject,o,{to:n.address})).data=u.encodeMethod(f,m),!1===f.constant&&(s="sendTransaction"),e.next=8,n.query[s](c);case 8:if(l=e.sent,"call"!==s){e.next=19;break}return e.prev=10,d=u.decodeMethod(f,l),e.abrupt("return",d);case 15:throw e.prev=15,e.t0=e.catch(10),new Error("[ethjs-contract] while formatting incoming raw call data "+(0,i.default)(l)+" "+e.t0);case 19:return e.abrupt("return",l);case 20:case"end":return e.stop()}}),e,this,[[10,15]])}))),function(e){return o.apply(this,arguments)}),t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},n=this;var o;function p(e){return function(){var t=[].slice.call(arguments),r=l(e.inputs,"type",!1),i="0x"+d(e.name+"("+r.join(",")+")"),s=[i],o=(0,a.default)({},t[0])||{},c=(0,a.default)({},t[0]||{},{to:n.address,topics:s}),h=(0,a.default)({},o,{decoder:function(t){return u.decodeEvent(e,t,s)},defaultFilterObject:c});return new n.filters.Filter(h)}}function g(t){return function(){var n=void 0,r=[].slice.call(arguments);"function"==typeof r[r.length-1]&&(n=r.pop());var i=e({methodObject:t,methodArgs:r});return n?f(i)(n):i}}n.abi=t.contractABI||[],n.query=t.query,n.address=t.address||"0x",n.bytecode=t.contractBytecode||"0x",n.defaultTxObject=t.contractDefaultTxObject||{},n.filters=new c(n.query),m(n.abi).forEach((function(e){"function"===e.type?n[e.name]=g(e):"event"===e.type&&(n[e.name]=p(e))}))}}}},{package:"ethjs-contract",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/ethjs-contract/lib/contract.js"}],[1502,{_process:6127,"readable-stream":6410,util:2485,xtend:6886},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r=e("readable-stream").Transform,i=e("util").inherits,s=e("xtend");function a(e){r.call(this,e),this._destroyed=!1}function o(e,t,n){n(null,e)}function u(e){return function(t,n,r){return"function"==typeof t&&(r=n,n=t,t={}),"function"!=typeof n&&(n=o),"function"!=typeof r&&(r=null),e(t,n,r)}}i(a,r),a.prototype.destroy=function(e){if(!this._destroyed){this._destroyed=!0;var t=this;n.nextTick((function(){e&&t.emit("error",e),t.emit("close")}))}},t.exports=u((function(e,t,n){var r=new a(e);return r._transform=t,n&&(r._flush=n),r})),t.exports.ctor=u((function(e,t,n){function r(t){if(!(this instanceof r))return new r(t);this.options=s(e,t),a.call(this,this.options)}return i(r,a),r.prototype._transform=t,n&&(r.prototype._flush=n),r})),t.exports.obj=u((function(e,t,n){var r=new a(s({objectMode:!0,highWaterMark:16},e));return r._transform=t,n&&(r._flush=n),r}))}).call(this)}).call(this,e("_process"))}}},{package:"through2",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/through2/through2.js"}],[1230,{"readable-stream":6410},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.Substream=void 0;const r=e("readable-stream");class i extends r.Duplex{constructor({parent:e,name:t}){super({objectMode:!0}),this._parent=e,this._name=t}_read(){return undefined}_write(e,t,n){this._parent.push({name:this._name,data:e}),n()}}n.Substream=i}}},{package:"@metamask/object-multiplex",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/object-multiplex/dist/Substream.js"}],[1240,{"readable-stream":1254},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BasePostMessageStream=void 0;const r=e("readable-stream");function i(){return undefined}const s="ACK";class a extends r.Duplex{constructor(){super({objectMode:!0}),this._init=!1,this._haveSyn=!1}_handshake(){this._write("SYN",null,i),this.cork()}_onData(e){if(this._init)try{this.push(e)}catch(e){this.emit("error",e)}else"SYN"===e?(this._haveSyn=!0,this._write(s,null,i)):e===s&&(this._init=!0,this._haveSyn||this._write(s,null,i),this.uncork())}_read(){return undefined}_write(e,t,n){this._postMessage(e),n()}}n.BasePostMessageStream=a}}},{package:"@metamask/post-message-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/post-message-stream/dist/BasePostMessageStream.js"}],[1244,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DEDICATED_WORKER_NAME=void 0,n.DEDICATED_WORKER_NAME="dedicatedWorker"}}},{package:"@metamask/post-message-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/post-message-stream/dist/enums.js"}],[1470,{"../../../errors":1461},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}t.exports=function e(t,n,s){if("function"==typeof n)return e(t,null,n);n||(n={}),s=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r)}}}(s||i);var a=n.readable||!1!==n.readable&&t.readable,o=n.writable||!1!==n.writable&&t.writable,u=function(){t.writable||l()},c=t._writableState&&t._writableState.finished,l=function(){o=!1,c=!0,a||s.call(t)},d=t._readableState&&t._readableState.endEmitted,h=function(){a=!1,d=!0,o||s.call(t)},f=function(e){s.call(t,e)},m=function(){var e;return a&&!d?(t._readableState&&t._readableState.ended||(e=new r),s.call(t,e)):o&&!c?(t._writableState&&t._writableState.ended||(e=new r),s.call(t,e)):void 0},p=function(){t.req.on("finish",l)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?o&&!t._writableState&&(t.on("end",u),t.on("close",u)):(t.on("complete",l),t.on("abort",m),t.req?p():t.on("request",p)),t.on("end",h),t.on("finish",l),!1!==n.error&&t.on("error",f),t.on("close",m),function(){t.removeListener("complete",l),t.removeListener("abort",m),t.removeListener("request",p),t.req&&t.req.removeListener("finish",l),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",l),t.removeListener("end",h),t.removeListener("error",f),t.removeListener("close",m)}}}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/concat-stream/node_modules/readable-stream/lib/internal/streams/end-of-stream.js"}],[1472,{"../../../errors":1461,"./end-of-stream":1470},function(){with(this)return function(){"use strict";return function(e,t,n){var r;var i=e("../../../errors").codes,s=i.ERR_MISSING_ARGS,a=i.ERR_STREAM_DESTROYED;function o(e){if(e)throw e}function u(t,n,i,s){s=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(s);var o=!1;t.on("close",(function(){o=!0})),r===undefined&&(r=e("./end-of-stream")),r(t,{readable:n,writable:i},(function(e){if(e)return s(e);o=!0,s()}));var u=!1;return function(e){if(!o&&!u)return u=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void s(e||new a("pipe"))}}function c(e){e()}function l(e,t){return e.pipe(t)}function d(e){return e.length?"function"!=typeof e[e.length-1]?o:e.pop():o}t.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=d(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new s("streams");var a=t.map((function(e,n){var s=n<t.length-1;return u(e,s,n>0,(function(e){r||(r=e),e&&a.forEach(c),s||(a.forEach(c),i(r))}))}));return t.reduce(l)}}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/concat-stream/node_modules/readable-stream/lib/internal/streams/pipeline.js"}],[1465,{"../errors":1461,"./_stream_duplex":1462,inherits:5094},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=l;var r=e("../errors").codes,i=r.ERR_METHOD_NOT_IMPLEMENTED,s=r.ERR_MULTIPLE_CALLBACK,a=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,o=r.ERR_TRANSFORM_WITH_LENGTH_0,u=e("./_stream_duplex");function c(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new s);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);u.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function d(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,n){h(e,t,n)}))}function h(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new o;if(e._transformState.transforming)throw new a;return e.push(null)}e("inherits")(l,u),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,n){n(new i("_transform()"))},l.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){u.prototype._destroy.call(this,e,(function(e){t(e)}))}}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/concat-stream/node_modules/readable-stream/lib/_stream_transform.js"}],[1463,{"./_stream_transform":1465,inherits:5094},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=i;var r=e("./_stream_transform");function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}e("inherits")(i,r),i.prototype._transform=function(e,t,n){n(null,e)}}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/concat-stream/node_modules/readable-stream/lib/_stream_passthrough.js"}],[1466,{"../errors":1461,"./_stream_duplex":1462,"./internal/streams/destroy":1469,"./internal/streams/state":1473,"./internal/streams/stream":1474,_process:6127,buffer:2478,inherits:5094,"util-deprecate":6723},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){function r(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}var i;t.exports=S,S.WritableState=E;var s={deprecate:e("util-deprecate")},a=e("./internal/streams/stream"),o=e("buffer").Buffer,u=global.Uint8Array||function(){};var c,l=e("./internal/streams/destroy"),d=e("./internal/streams/state").getHighWaterMark,h=e("../errors").codes,f=h.ERR_INVALID_ARG_TYPE,m=h.ERR_METHOD_NOT_IMPLEMENTED,p=h.ERR_MULTIPLE_CALLBACK,g=h.ERR_STREAM_CANNOT_PIPE,b=h.ERR_STREAM_DESTROYED,y=h.ERR_STREAM_NULL_VALUES,v=h.ERR_STREAM_WRITE_AFTER_END,w=h.ERR_UNKNOWN_ENCODING,_=l.errorOrDestroy;function k(){}function E(t,s,a){i=i||e("./_stream_duplex"),t=t||{},"boolean"!=typeof a&&(a=s instanceof i),this.objectMode=!!t.objectMode,a&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=d(this,t,"writableHighWaterMark",a),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===t.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,i=r.sync,s=r.writecb;if("function"!=typeof s)throw new p;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,i,s){--t.pendingcb,r?(n.nextTick(s,i),n.nextTick(A,e,t),e._writableState.errorEmitted=!0,_(e,i)):(s(i),e._writableState.errorEmitted=!0,_(e,i),A(e,t))}(e,r,i,t,s);else{var a=R(r)||e.destroyed;a||r.corked||r.bufferProcessing||!r.bufferedRequest||M(e,r),i?n.nextTick(x,e,r,a,s):x(e,r,a,s)}}(s,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function S(t){var n=this instanceof(i=i||e("./_stream_duplex"));if(!n&&!c.call(S,this))return new S(t);this._writableState=new E(t,this,n),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),a.call(this)}function C(e,t,n,r,i,s,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new b("write")):n?e._writev(i,t.onwrite):e._write(i,s,t.onwrite),t.sync=!1}function x(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),A(e,t)}function M(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=t.bufferedRequestCount,s=new Array(i),a=t.corkedRequestsFree;a.entry=n;for(var o=0,u=!0;n;)s[o]=n,n.isBuf||(u=!1),n=n.next,o+=1;s.allBuffers=u,C(e,t,!0,t.length,s,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new r(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,l=n.encoding,d=n.callback;if(C(e,t,!1,t.objectMode?1:c.length,c,l,d),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function R(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function T(e,t){e._final((function(n){t.pendingcb--,n&&_(e,n),t.prefinished=!0,e.emit("prefinish"),A(e,t)}))}function A(e,t){var r=R(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,n.nextTick(T,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return r}e("inherits")(S,a),E.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(E.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer "+"instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(e){return!!c.call(this,e)||this===S&&(e&&e._writableState instanceof E)}})):c=function(e){return e instanceof this},S.prototype.pipe=function(){_(this,new g)},S.prototype.write=function(e,t,r){var i,s=this._writableState,a=!1,c=!s.objectMode&&(i=e,o.isBuffer(i)||i instanceof u);return c&&!o.isBuffer(e)&&(e=function(e){return o.from(e)}(e)),"function"==typeof t&&(r=t,t=null),c?t="buffer":t||(t=s.defaultEncoding),"function"!=typeof r&&(r=k),s.ending?function(e,t){var r=new v;_(e,r),n.nextTick(t,r)}(this,r):(c||function(e,t,r,i){var s;return null===r?s=new y:"string"==typeof r||t.objectMode||(s=new f("chunk",["string","Buffer"],r)),!s||(_(e,s),n.nextTick(i,s),!1)}(this,s,e,r))&&(s.pendingcb++,a=function(e,t,n,r,i,s){if(!n){var a=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=o.from(t,n));return t}(t,r,i);r!==a&&(n=!0,i="buffer",r=a)}var u=t.objectMode?1:r.length;t.length+=u;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:s,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else C(e,t,!1,u,r,i,s);return c}(this,s,c,e,t,r)),a},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||M(this,e))},S.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new w(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),S.prototype._write=function(e,t,n){n(new m("_write()"))},S.prototype._writev=null,S.prototype.end=function(e,t,r){var i=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!==e&&e!==undefined&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,r){t.ending=!0,A(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,i,r),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==undefined&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),S.prototype.destroy=l.destroy,S.prototype._undestroy=l.undestroy,S.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,e("_process"))}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/concat-stream/node_modules/readable-stream/lib/_stream_writable.js"}],[1462,{"./_stream_readable":1464,"./_stream_writable":1466,_process:6127,inherits:5094},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=c;var i=e("./_stream_readable"),s=e("./_stream_writable");e("inherits")(c,i);for(var a=r(s.prototype),o=0;o<a.length;o++){var u=a[o];c.prototype[u]||(c.prototype[u]=s.prototype[u])}function c(e){if(!(this instanceof c))return new c(e);i.call(this,e),s.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||n.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this)}).call(this,e("_process"))}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/concat-stream/node_modules/readable-stream/lib/_stream_duplex.js"}],[1464,{"../errors":1461,"./_stream_duplex":1462,"./internal/streams/async_iterator":1467,"./internal/streams/buffer_list":1468,"./internal/streams/destroy":1469,"./internal/streams/from":1471,"./internal/streams/state":1473,"./internal/streams/stream":1474,_process:6127,buffer:2478,events:2479,inherits:5094,"string_decoder/":1501,util:2477},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r;t.exports=S,S.ReadableState=E;e("events").EventEmitter;var i=function(e,t){return e.listeners(t).length},s=e("./internal/streams/stream"),a=e("buffer").Buffer,o=global.Uint8Array||function(){};var u,c=e("util");u=c&&c.debuglog?c.debuglog("stream"):function(){};var l,d,h,f=e("./internal/streams/buffer_list"),m=e("./internal/streams/destroy"),p=e("./internal/streams/state").getHighWaterMark,g=e("../errors").codes,b=g.ERR_INVALID_ARG_TYPE,y=g.ERR_STREAM_PUSH_AFTER_EOF,v=g.ERR_METHOD_NOT_IMPLEMENTED,w=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(S,s);var _=m.errorOrDestroy,k=["error","close","destroy","pause","resume"];function E(t,n,i){r=r||e("./_stream_duplex"),t=t||{},"boolean"!=typeof i&&(i=n instanceof r),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=p(this,t,"readableHighWaterMark",i),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(l||(l=e("string_decoder/").StringDecoder),this.decoder=new l(t.encoding),this.encoding=t.encoding)}function S(t){if(r=r||e("./_stream_duplex"),!(this instanceof S))return new S(t);var n=this instanceof r;this._readableState=new E(t,this,n),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),s.call(this)}function C(e,t,n,r,i){u("readableAddChunk",t);var s,c=e._readableState;if(null===t)c.reading=!1,function(e,t){if(u("onEofChunk"),t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?T(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,A(e)))}(e,c);else if(i||(s=function(e,t){var n;r=t,a.isBuffer(r)||r instanceof o||"string"==typeof t||t===undefined||e.objectMode||(n=new b("chunk",["string","Buffer","Uint8Array"],t));var r;return n}(c,t)),s)_(e,s);else if(c.objectMode||t&&t.length>0)if("string"==typeof t||c.objectMode||Object.getPrototypeOf(t)===a.prototype||(t=function(e){return a.from(e)}(t)),r)c.endEmitted?_(e,new w):x(e,c,t,!0);else if(c.ended)_(e,new y);else{if(c.destroyed)return!1;c.reading=!1,c.decoder&&!n?(t=c.decoder.write(t),c.objectMode||0!==t.length?x(e,c,t,!1):P(e,c)):x(e,c,t,!1)}else r||(c.reading=!1,P(e,c));return!c.ended&&(c.length<c.highWaterMark||0===c.length)}function x(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&T(e)),P(e,t)}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),S.prototype.destroy=m.destroy,S.prototype._undestroy=m.undestroy,S.prototype._destroy=function(e,t){t(e)},S.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=a.from(e,t),t=""),n=!0),C(this,e,t,!1,n)},S.prototype.unshift=function(e){return C(this,e,null,!0,!1)},S.prototype.isPaused=function(){return!1===this._readableState.flowing},S.prototype.setEncoding=function(t){l||(l=e("string_decoder/").StringDecoder);var n=new l(t);this._readableState.decoder=n,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=n.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var M=1073741824;function R(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=M?e=M:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function T(e){var t=e._readableState;u("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(u("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(A,e))}function A(e){var t=e._readableState;u("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,L(e)}function P(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(I,e,t))}function I(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(u("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function j(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function O(e){u("readable nexttick read 0"),e.read(0)}function N(e,t){u("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),L(e),t.flowing&&!t.reading&&e.read(0)}function L(e){var t=e._readableState;for(u("flow",t.flowing);t.flowing&&null!==e.read(););}function B(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function U(e){var t=e._readableState;u("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(D,t,e))}function D(e,t){if(u("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function F(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}S.prototype.read=function(e){u("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return u("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?U(this):T(this),null;if(0===(e=R(e,t))&&t.ended)return 0===t.length&&U(this),null;var r,i=t.needReadable;return u("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&u("length less than watermark",i=!0),t.ended||t.reading?u("reading or ended",i=!1):i&&(u("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=R(n,t))),null===(r=e>0?B(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&U(this)),null!==r&&this.emit("data",r),r},S.prototype._read=function(e){_(this,new v("_read()"))},S.prototype.pipe=function(e,t){var r=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=e;break;case 1:s.pipes=[s.pipes,e];break;default:s.pipes.push(e)}s.pipesCount+=1,u("pipe count=%d opts=%j",s.pipesCount,t);var a=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?c:g;function o(t,n){u("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,u("cleanup"),e.removeListener("close",m),e.removeListener("finish",p),e.removeListener("drain",l),e.removeListener("error",f),e.removeListener("unpipe",o),r.removeListener("end",c),r.removeListener("end",g),r.removeListener("data",h),d=!0,!s.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function c(){u("onend"),e.end()}s.endEmitted?n.nextTick(a):r.once("end",a),e.on("unpipe",o);var l=function(e){return function(){var t=e._readableState;u("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,L(e))}}(r);e.on("drain",l);var d=!1;function h(t){u("ondata");var n=e.write(t);u("dest.write",n),!1===n&&((1===s.pipesCount&&s.pipes===e||s.pipesCount>1&&-1!==F(s.pipes,e))&&!d&&(u("false write response, pause",s.awaitDrain),s.awaitDrain++),r.pause())}function f(t){u("onerror",t),g(),e.removeListener("error",f),0===i(e,"error")&&_(e,t)}function m(){e.removeListener("finish",p),g()}function p(){u("onfinish"),e.removeListener("close",m),g()}function g(){u("unpipe"),r.unpipe(e)}return r.on("data",h),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",f),e.once("close",m),e.once("finish",p),e.emit("pipe",r),s.flowing||(u("pipe resume"),r.resume()),e},S.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<i;s++)r[s].emit("unpipe",this,{hasUnpiped:!1});return this}var a=F(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},S.prototype.on=function(e,t){var r=s.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,u("on readable",i.length,i.reading),i.length?T(this):i.reading||n.nextTick(O,this))),r},S.prototype.addListener=S.prototype.on,S.prototype.removeListener=function(e,t){var r=s.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(j,this),r},S.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&e!==undefined||n.nextTick(j,this),t},S.prototype.resume=function(){var e=this._readableState;return e.flowing||(u("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(N,e,t))}(this,e)),e.paused=!1,this},S.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},S.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(u("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(u("wrapped data"),n.decoder&&(i=n.decoder.write(i)),!n.objectMode||null!==i&&i!==undefined)&&((n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause())))})),e)this[i]===undefined&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var s=0;s<k.length;s++)e.on(k[s],this.emit.bind(this,k[s]));return this._read=function(t){u("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(S.prototype[Symbol.asyncIterator]=function(){return d===undefined&&(d=e("./internal/streams/async_iterator")),d(this)}),Object.defineProperty(S.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(S.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(S.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),S._fromList=B,Object.defineProperty(S.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(S.from=function(t,n){return h===undefined&&(h=e("./internal/streams/from")),h(S,t,n)})}).call(this)}).call(this,e("_process"))}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/concat-stream/node_modules/readable-stream/lib/_stream_readable.js"}],[6423,{"../../../errors":6414},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}t.exports=function e(t,n,s){if("function"==typeof n)return e(t,null,n);n||(n={}),s=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r)}}}(s||i);var a=n.readable||!1!==n.readable&&t.readable,o=n.writable||!1!==n.writable&&t.writable,u=function(){t.writable||l()},c=t._writableState&&t._writableState.finished,l=function(){o=!1,c=!0,a||s.call(t)},d=t._readableState&&t._readableState.endEmitted,h=function(){a=!1,d=!0,o||s.call(t)},f=function(e){s.call(t,e)},m=function(){var e;return a&&!d?(t._readableState&&t._readableState.ended||(e=new r),s.call(t,e)):o&&!c?(t._writableState&&t._writableState.ended||(e=new r),s.call(t,e)):void 0},p=function(){t.req.on("finish",l)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?o&&!t._writableState&&(t.on("end",u),t.on("close",u)):(t.on("complete",l),t.on("abort",m),t.req?p():t.on("request",p)),t.on("end",h),t.on("finish",l),!1!==n.error&&t.on("error",f),t.on("close",m),function(){t.removeListener("complete",l),t.removeListener("abort",m),t.removeListener("request",p),t.req&&t.req.removeListener("finish",l),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",l),t.removeListener("end",h),t.removeListener("error",f),t.removeListener("close",m)}}}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/end-of-stream.js"}],[6425,{"../../../errors":6414,"./end-of-stream":6423},function(){with(this)return function(){"use strict";return function(e,t,n){var r;var i=e("../../../errors").codes,s=i.ERR_MISSING_ARGS,a=i.ERR_STREAM_DESTROYED;function o(e){if(e)throw e}function u(t,n,i,s){s=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(s);var o=!1;t.on("close",(function(){o=!0})),r===undefined&&(r=e("./end-of-stream")),r(t,{readable:n,writable:i},(function(e){if(e)return s(e);o=!0,s()}));var u=!1;return function(e){if(!o&&!u)return u=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void s(e||new a("pipe"))}}function c(e){e()}function l(e,t){return e.pipe(t)}function d(e){return e.length?"function"!=typeof e[e.length-1]?o:e.pop():o}t.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=d(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new s("streams");var a=t.map((function(e,n){var s=n<t.length-1;return u(e,s,n>0,(function(e){r||(r=e),e&&a.forEach(c),s||(a.forEach(c),i(r))}))}));return t.reduce(l)}}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/pipeline.js"}],[6415,{"./_stream_readable":6417,"./_stream_writable":6419,_process:6127,inherits:5094},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=c;var i=e("./_stream_readable"),s=e("./_stream_writable");e("inherits")(c,i);for(var a=r(s.prototype),o=0;o<a.length;o++){var u=a[o];c.prototype[u]||(c.prototype[u]=s.prototype[u])}function c(e){if(!(this instanceof c))return new c(e);i.call(this,e),s.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||n.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this)}).call(this,e("_process"))}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/_stream_duplex.js"}],[6418,{"../errors":6414,"./_stream_duplex":6415,inherits:5094},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=l;var r=e("../errors").codes,i=r.ERR_METHOD_NOT_IMPLEMENTED,s=r.ERR_MULTIPLE_CALLBACK,a=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,o=r.ERR_TRANSFORM_WITH_LENGTH_0,u=e("./_stream_duplex");function c(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new s);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);u.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function d(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,n){h(e,t,n)}))}function h(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new o;if(e._transformState.transforming)throw new a;return e.push(null)}e("inherits")(l,u),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,n){n(new i("_transform()"))},l.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){u.prototype._destroy.call(this,e,(function(e){t(e)}))}}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/_stream_transform.js"}],[6419,{"../errors":6414,"./_stream_duplex":6415,"./internal/streams/destroy":6422,"./internal/streams/state":6426,"./internal/streams/stream":6427,_process:6127,buffer:2478,inherits:5094,"util-deprecate":6723},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){function r(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}var i;t.exports=S,S.WritableState=E;var s={deprecate:e("util-deprecate")},a=e("./internal/streams/stream"),o=e("buffer").Buffer,u=global.Uint8Array||function(){};var c,l=e("./internal/streams/destroy"),d=e("./internal/streams/state").getHighWaterMark,h=e("../errors").codes,f=h.ERR_INVALID_ARG_TYPE,m=h.ERR_METHOD_NOT_IMPLEMENTED,p=h.ERR_MULTIPLE_CALLBACK,g=h.ERR_STREAM_CANNOT_PIPE,b=h.ERR_STREAM_DESTROYED,y=h.ERR_STREAM_NULL_VALUES,v=h.ERR_STREAM_WRITE_AFTER_END,w=h.ERR_UNKNOWN_ENCODING,_=l.errorOrDestroy;function k(){}function E(t,s,a){i=i||e("./_stream_duplex"),t=t||{},"boolean"!=typeof a&&(a=s instanceof i),this.objectMode=!!t.objectMode,a&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=d(this,t,"writableHighWaterMark",a),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===t.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,i=r.sync,s=r.writecb;if("function"!=typeof s)throw new p;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,i,s){--t.pendingcb,r?(n.nextTick(s,i),n.nextTick(A,e,t),e._writableState.errorEmitted=!0,_(e,i)):(s(i),e._writableState.errorEmitted=!0,_(e,i),A(e,t))}(e,r,i,t,s);else{var a=R(r)||e.destroyed;a||r.corked||r.bufferProcessing||!r.bufferedRequest||M(e,r),i?n.nextTick(x,e,r,a,s):x(e,r,a,s)}}(s,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function S(t){var n=this instanceof(i=i||e("./_stream_duplex"));if(!n&&!c.call(S,this))return new S(t);this._writableState=new E(t,this,n),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),a.call(this)}function C(e,t,n,r,i,s,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new b("write")):n?e._writev(i,t.onwrite):e._write(i,s,t.onwrite),t.sync=!1}function x(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),A(e,t)}function M(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=t.bufferedRequestCount,s=new Array(i),a=t.corkedRequestsFree;a.entry=n;for(var o=0,u=!0;n;)s[o]=n,n.isBuf||(u=!1),n=n.next,o+=1;s.allBuffers=u,C(e,t,!0,t.length,s,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new r(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,l=n.encoding,d=n.callback;if(C(e,t,!1,t.objectMode?1:c.length,c,l,d),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function R(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function T(e,t){e._final((function(n){t.pendingcb--,n&&_(e,n),t.prefinished=!0,e.emit("prefinish"),A(e,t)}))}function A(e,t){var r=R(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,n.nextTick(T,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return r}e("inherits")(S,a),E.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(E.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer "+"instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(e){return!!c.call(this,e)||this===S&&(e&&e._writableState instanceof E)}})):c=function(e){return e instanceof this},S.prototype.pipe=function(){_(this,new g)},S.prototype.write=function(e,t,r){var i,s=this._writableState,a=!1,c=!s.objectMode&&(i=e,o.isBuffer(i)||i instanceof u);return c&&!o.isBuffer(e)&&(e=function(e){return o.from(e)}(e)),"function"==typeof t&&(r=t,t=null),c?t="buffer":t||(t=s.defaultEncoding),"function"!=typeof r&&(r=k),s.ending?function(e,t){var r=new v;_(e,r),n.nextTick(t,r)}(this,r):(c||function(e,t,r,i){var s;return null===r?s=new y:"string"==typeof r||t.objectMode||(s=new f("chunk",["string","Buffer"],r)),!s||(_(e,s),n.nextTick(i,s),!1)}(this,s,e,r))&&(s.pendingcb++,a=function(e,t,n,r,i,s){if(!n){var a=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=o.from(t,n));return t}(t,r,i);r!==a&&(n=!0,i="buffer",r=a)}var u=t.objectMode?1:r.length;t.length+=u;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:s,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else C(e,t,!1,u,r,i,s);return c}(this,s,c,e,t,r)),a},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||M(this,e))},S.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new w(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),S.prototype._write=function(e,t,n){n(new m("_write()"))},S.prototype._writev=null,S.prototype.end=function(e,t,r){var i=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!==e&&e!==undefined&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,r){t.ending=!0,A(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,i,r),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==undefined&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),S.prototype.destroy=l.destroy,S.prototype._undestroy=l.undestroy,S.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,e("_process"))}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/_stream_writable.js"}],[6416,{"./_stream_transform":6418,inherits:5094},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=i;var r=e("./_stream_transform");function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}e("inherits")(i,r),i.prototype._transform=function(e,t,n){n(null,e)}}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/_stream_passthrough.js"}],[6417,{"../errors":6414,"./_stream_duplex":6415,"./internal/streams/async_iterator":6420,"./internal/streams/buffer_list":6421,"./internal/streams/destroy":6422,"./internal/streams/from":6424,"./internal/streams/state":6426,"./internal/streams/stream":6427,_process:6127,buffer:2478,events:2479,inherits:5094,"string_decoder/":6429,util:2477},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r;t.exports=S,S.ReadableState=E;e("events").EventEmitter;var i=function(e,t){return e.listeners(t).length},s=e("./internal/streams/stream"),a=e("buffer").Buffer,o=global.Uint8Array||function(){};var u,c=e("util");u=c&&c.debuglog?c.debuglog("stream"):function(){};var l,d,h,f=e("./internal/streams/buffer_list"),m=e("./internal/streams/destroy"),p=e("./internal/streams/state").getHighWaterMark,g=e("../errors").codes,b=g.ERR_INVALID_ARG_TYPE,y=g.ERR_STREAM_PUSH_AFTER_EOF,v=g.ERR_METHOD_NOT_IMPLEMENTED,w=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(S,s);var _=m.errorOrDestroy,k=["error","close","destroy","pause","resume"];function E(t,n,i){r=r||e("./_stream_duplex"),t=t||{},"boolean"!=typeof i&&(i=n instanceof r),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=p(this,t,"readableHighWaterMark",i),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(l||(l=e("string_decoder/").StringDecoder),this.decoder=new l(t.encoding),this.encoding=t.encoding)}function S(t){if(r=r||e("./_stream_duplex"),!(this instanceof S))return new S(t);var n=this instanceof r;this._readableState=new E(t,this,n),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),s.call(this)}function C(e,t,n,r,i){u("readableAddChunk",t);var s,c=e._readableState;if(null===t)c.reading=!1,function(e,t){if(u("onEofChunk"),t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?T(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,A(e)))}(e,c);else if(i||(s=function(e,t){var n;r=t,a.isBuffer(r)||r instanceof o||"string"==typeof t||t===undefined||e.objectMode||(n=new b("chunk",["string","Buffer","Uint8Array"],t));var r;return n}(c,t)),s)_(e,s);else if(c.objectMode||t&&t.length>0)if("string"==typeof t||c.objectMode||Object.getPrototypeOf(t)===a.prototype||(t=function(e){return a.from(e)}(t)),r)c.endEmitted?_(e,new w):x(e,c,t,!0);else if(c.ended)_(e,new y);else{if(c.destroyed)return!1;c.reading=!1,c.decoder&&!n?(t=c.decoder.write(t),c.objectMode||0!==t.length?x(e,c,t,!1):P(e,c)):x(e,c,t,!1)}else r||(c.reading=!1,P(e,c));return!c.ended&&(c.length<c.highWaterMark||0===c.length)}function x(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&T(e)),P(e,t)}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),S.prototype.destroy=m.destroy,S.prototype._undestroy=m.undestroy,S.prototype._destroy=function(e,t){t(e)},S.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=a.from(e,t),t=""),n=!0),C(this,e,t,!1,n)},S.prototype.unshift=function(e){return C(this,e,null,!0,!1)},S.prototype.isPaused=function(){return!1===this._readableState.flowing},S.prototype.setEncoding=function(t){l||(l=e("string_decoder/").StringDecoder);var n=new l(t);this._readableState.decoder=n,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=n.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var M=1073741824;function R(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=M?e=M:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function T(e){var t=e._readableState;u("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(u("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(A,e))}function A(e){var t=e._readableState;u("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,L(e)}function P(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(I,e,t))}function I(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(u("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function j(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function O(e){u("readable nexttick read 0"),e.read(0)}function N(e,t){u("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),L(e),t.flowing&&!t.reading&&e.read(0)}function L(e){var t=e._readableState;for(u("flow",t.flowing);t.flowing&&null!==e.read(););}function B(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function U(e){var t=e._readableState;u("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(D,t,e))}function D(e,t){if(u("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function F(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}S.prototype.read=function(e){u("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return u("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?U(this):T(this),null;if(0===(e=R(e,t))&&t.ended)return 0===t.length&&U(this),null;var r,i=t.needReadable;return u("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&u("length less than watermark",i=!0),t.ended||t.reading?u("reading or ended",i=!1):i&&(u("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=R(n,t))),null===(r=e>0?B(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&U(this)),null!==r&&this.emit("data",r),r},S.prototype._read=function(e){_(this,new v("_read()"))},S.prototype.pipe=function(e,t){var r=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=e;break;case 1:s.pipes=[s.pipes,e];break;default:s.pipes.push(e)}s.pipesCount+=1,u("pipe count=%d opts=%j",s.pipesCount,t);var a=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?c:g;function o(t,n){u("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,u("cleanup"),e.removeListener("close",m),e.removeListener("finish",p),e.removeListener("drain",l),e.removeListener("error",f),e.removeListener("unpipe",o),r.removeListener("end",c),r.removeListener("end",g),r.removeListener("data",h),d=!0,!s.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function c(){u("onend"),e.end()}s.endEmitted?n.nextTick(a):r.once("end",a),e.on("unpipe",o);var l=function(e){return function(){var t=e._readableState;u("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,L(e))}}(r);e.on("drain",l);var d=!1;function h(t){u("ondata");var n=e.write(t);u("dest.write",n),!1===n&&((1===s.pipesCount&&s.pipes===e||s.pipesCount>1&&-1!==F(s.pipes,e))&&!d&&(u("false write response, pause",s.awaitDrain),s.awaitDrain++),r.pause())}function f(t){u("onerror",t),g(),e.removeListener("error",f),0===i(e,"error")&&_(e,t)}function m(){e.removeListener("finish",p),g()}function p(){u("onfinish"),e.removeListener("close",m),g()}function g(){u("unpipe"),r.unpipe(e)}return r.on("data",h),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",f),e.once("close",m),e.once("finish",p),e.emit("pipe",r),s.flowing||(u("pipe resume"),r.resume()),e},S.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<i;s++)r[s].emit("unpipe",this,{hasUnpiped:!1});return this}var a=F(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},S.prototype.on=function(e,t){var r=s.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,u("on readable",i.length,i.reading),i.length?T(this):i.reading||n.nextTick(O,this))),r},S.prototype.addListener=S.prototype.on,S.prototype.removeListener=function(e,t){var r=s.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(j,this),r},S.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&e!==undefined||n.nextTick(j,this),t},S.prototype.resume=function(){var e=this._readableState;return e.flowing||(u("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(N,e,t))}(this,e)),e.paused=!1,this},S.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},S.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(u("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(u("wrapped data"),n.decoder&&(i=n.decoder.write(i)),!n.objectMode||null!==i&&i!==undefined)&&((n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause())))})),e)this[i]===undefined&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var s=0;s<k.length;s++)e.on(k[s],this.emit.bind(this,k[s]));return this._read=function(t){u("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(S.prototype[Symbol.asyncIterator]=function(){return d===undefined&&(d=e("./internal/streams/async_iterator")),d(this)}),Object.defineProperty(S.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(S.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(S.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),S._fromList=B,Object.defineProperty(S.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(S.from=function(t,n){return h===undefined&&(h=e("./internal/streams/from")),h(S,t,n)})}).call(this)}).call(this,e("_process"))}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/_stream_readable.js"}],[6641,{"./lib/_stream_duplex.js":6628,"./lib/_stream_passthrough.js":6629,"./lib/_stream_readable.js":6630,"./lib/_stream_transform.js":6631,"./lib/_stream_writable.js":6632,"./lib/internal/streams/end-of-stream.js":6636,"./lib/internal/streams/pipeline.js":6638},function(){with(this)return function(){"use strict";return function(e,t,n){(n=t.exports=e("./lib/_stream_readable.js")).Stream=n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js"),n.finished=e("./lib/internal/streams/end-of-stream.js"),n.pipeline=e("./lib/internal/streams/pipeline.js")}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/tar-stream/node_modules/readable-stream/readable-browser.js"}],[6623,{buffer:2478},function(){with(this)return function(){"use strict";return function(e,t,n){(function(e){(function(){var t=e.alloc,r="0".charCodeAt(0),i=e.from("ustar\0","binary"),s=e.from("00","binary"),a=e.from("ustar ","binary"),o=e.from(" \0","binary"),u=parseInt("7777",8),c=257,l=function(e,t,n,r){for(;n<r;n++)if(e[n]===t)return n;return r},d=function(e){for(var t=256,n=0;n<148;n++)t+=e[n];for(var r=156;r<512;r++)t+=e[r];return t},h=function(e,t){return(e=e.toString(8)).length>t?"7777777777777777777".slice(0,t)+" ":"0000000000000000000".slice(0,t-e.length)+e+" "};var f=function(e,t,n){if(128&(e=e.slice(t,t+n))[t=0])return function(e){var t;if(128===e[0])t=!0;else{if(255!==e[0])return null;t=!1}for(var n=[],r=e.length-1;r>0;r--){var i=e[r];t?n.push(i):n.push(255-i)}var s=0,a=n.length;for(r=0;r<a;r++)s+=n[r]*Math.pow(256,r);return t?s:-1*s}(e);for(;t<e.length&&32===e[t];)t++;for(var r=(i=l(e,32,t,e.length),s=e.length,a=e.length,"number"!=typeof i?a:(i=~~i)>=s?s:i>=0||(i+=s)>=0?i:0);t<r&&0===e[t];)t++;return r===t?0:parseInt(e.slice(t,r).toString(),8);var i,s,a},m=function(e,t,n,r){return e.slice(t,l(e,0,t,t+n)).toString(r)},p=function(t){var n=e.byteLength(t),r=Math.floor(Math.log(n)/Math.log(10))+1;return n+r>=Math.pow(10,r)&&r++,n+r+t};n.decodeLongPath=function(e,t){return m(e,0,e.length,t)},n.encodePax=function(t){var n="";t.name&&(n+=p(" path="+t.name+"\n")),t.linkname&&(n+=p(" linkpath="+t.linkname+"\n"));var r=t.pax;if(r)for(var i in r)n+=p(" "+i+"="+r[i]+"\n");return e.from(n)},n.decodePax=function(e){for(var t={};e.length;){for(var n=0;n<e.length&&32!==e[n];)n++;var r=parseInt(e.slice(0,n).toString(),10);if(!r)return t;var i=e.slice(n+1,r-1).toString(),s=i.indexOf("=");if(-1===s)return t;t[i.slice(0,s)]=i.slice(s+1),e=e.slice(r)}return t},n.encode=function(n){var a=t(512),o=n.name,l="";if(5===n.typeflag&&"/"!==o[o.length-1]&&(o+="/"),e.byteLength(o)!==o.length)return null;for(;e.byteLength(o)>100;){var f=o.indexOf("/");if(-1===f)return null;l+=l?"/"+o.slice(0,f):o.slice(0,f),o=o.slice(f+1)}return e.byteLength(o)>100||e.byteLength(l)>155||n.linkname&&e.byteLength(n.linkname)>100?null:(a.write(o),a.write(h(n.mode&u,6),100),a.write(h(n.uid,6),108),a.write(h(n.gid,6),116),a.write(h(n.size,11),124),a.write(h(n.mtime.getTime()/1e3|0,11),136),a[156]=r+function(e){switch(e){case"file":return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72}return 0}(n.type),n.linkname&&a.write(n.linkname,157),i.copy(a,c),s.copy(a,263),n.uname&&a.write(n.uname,265),n.gname&&a.write(n.gname,297),a.write(h(n.devmajor||0,6),329),a.write(h(n.devminor||0,6),337),l&&a.write(l,345),a.write(h(d(a),6),148),a)},n.decode=function(e,t,n){var s=0===e[156]?0:e[156]-r,u=m(e,0,100,t),l=f(e,100,8),h=f(e,108,8),p=f(e,116,8),g=f(e,124,12),b=f(e,136,12),y=function(e){switch(e){case 0:return"file";case 1:return"link";case 2:return"symlink";case 3:return"character-device";case 4:return"block-device";case 5:return"directory";case 6:return"fifo";case 7:return"contiguous-file";case 72:return"pax-header";case 55:return"pax-global-header";case 27:return"gnu-long-link-path";case 28:case 30:return"gnu-long-path"}return null}(s),v=0===e[157]?null:m(e,157,100,t),w=m(e,265,32),_=m(e,297,32),k=f(e,329,8),E=f(e,337,8),S=d(e);if(256===S)return null;if(S!==f(e,148,8))throw new Error("Invalid tar header. Maybe the tar is corrupted or it needs to be gunzipped?");if(0===i.compare(e,c,263))e[345]&&(u=m(e,345,155,t)+"/"+u);else if(0===a.compare(e,c,263)&&0===o.compare(e,263,265));else if(!n)throw new Error("Invalid tar header: unknown format.");return 0===s&&u&&"/"===u[u.length-1]&&(s=5),{name:u,mode:l,uid:h,gid:p,size:g,mtime:new Date(1e3*b),type:y,linkname:v,uname:w,gname:_,devmajor:k,devminor:E}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"tar-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/tar-stream/headers.js"}],[4976,{constants:2553},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=e("constants")}}},{package:"fs-constants",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/fs-constants/browser.js"}],[6626,{"./BufferList":6625,inherits:5094,"readable-stream":6641},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("readable-stream").Duplex,i=e("inherits"),s=e("./BufferList");function a(e){if(!(this instanceof a))return new a(e);if("function"==typeof e){this._callback=e;const t=function(e){this._callback&&(this._callback(e),this._callback=null)}.bind(this);this.on("pipe",(function(e){e.on("error",t)})),this.on("unpipe",(function(e){e.removeListener("error",t)})),e=null}s._init.call(this,e),r.call(this)}i(a,r),Object.assign(a.prototype,s.prototype),a.prototype._new=function(e){return new a(e)},a.prototype._write=function(e,t,n){this._appendBuffer(e),"function"==typeof n&&n()},a.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)},a.prototype.end=function(e){r.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)},a.prototype._destroy=function(e,t){this._bufs.length=0,this.length=0,t(e)},a.prototype._isBufferList=function(e){return e instanceof a||e instanceof s||a.isBufferList(e)},a.isBufferList=s.isBufferList,t.exports=a,t.exports.BufferListStream=a,t.exports.BufferList=s}}},{package:"bl",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/tar-stream/node_modules/bl/bl.js"}],[5010,{_process:6127,buffer:2478,"end-of-stream":3012,inherits:5094,"readable-stream":6410,"stream-shift":6607},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n,r){(function(){var i=e("readable-stream"),s=e("end-of-stream"),a=e("inherits"),o=e("stream-shift"),u=r.from&&r.from!==Uint8Array.from?r.from([0]):new r([0]),c=function(e,t){e._corked?e.once("uncork",t):t()},l=function(e,t){return function(n){n?function(e,t){e._autoDestroy&&e.destroy(t)}(e,"premature close"===n.message?null:n):t&&!e._ended&&e.end()}},d=function(e,t,n){if(!(this instanceof d))return new d(e,t,n);i.Duplex.call(this,n),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!n||!1!==n.autoDestroy,this._forwardDestroy=!n||!1!==n.destroy,this._forwardEnd=!n||!1!==n.end,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,e&&this.setWritable(e),t&&this.setReadable(t)};a(d,i.Duplex),d.obj=function(e,t,n){return n||(n={}),n.objectMode=!0,n.highWaterMark=16,new d(e,t,n)},d.prototype.cork=function(){1==++this._corked&&this.emit("cork")},d.prototype.uncork=function(){this._corked&&0==--this._corked&&this.emit("uncork")},d.prototype.setWritable=function(e){if(this._unwrite&&this._unwrite(),this.destroyed)e&&e.destroy&&e.destroy();else if(null!==e&&!1!==e){var t=this,r=s(e,{writable:!0,readable:!1},l(this,this._forwardEnd)),i=function(){var e=t._ondrain;t._ondrain=null,e&&e()};this._unwrite&&n.nextTick(i),this._writable=e,this._writable.on("drain",i),this._unwrite=function(){t._writable.removeListener("drain",i),r()},this.uncork()}else this.end()},d.prototype.setReadable=function(e){if(this._unread&&this._unread(),this.destroyed)e&&e.destroy&&e.destroy();else{if(null===e||!1===e)return this.push(null),void this.resume();var t,n=this,r=s(e,{writable:!1,readable:!0},l(this)),a=function(){n._forward()},o=function(){n.push(null)};this._drained=!0,this._readable=e,this._readable2=e._readableState?e:(t=e,new i.Readable({objectMode:!0,highWaterMark:16}).wrap(t)),this._readable2.on("readable",a),this._readable2.on("end",o),this._unread=function(){n._readable2.removeListener("readable",a),n._readable2.removeListener("end",o),r()},this._forward()}},d.prototype._read=function(){this._drained=!0,this._forward()},d.prototype._forward=function(){if(!this._forwarding&&this._readable2&&this._drained){var e;for(this._forwarding=!0;this._drained&&null!==(e=o(this._readable2));)this.destroyed||(this._drained=this.push(e));this._forwarding=!1}},d.prototype.destroy=function(e){if(!this.destroyed){this.destroyed=!0;var t=this;n.nextTick((function(){t._destroy(e)}))}},d.prototype._destroy=function(e){if(e){var t=this._ondrain;this._ondrain=null,t?t(e):this.emit("error",e)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},d.prototype._write=function(e,t,n){return this.destroyed?n():this._corked?c(this,this._write.bind(this,e,t,n)):e===u?this._finish(n):this._writable?void(!1===this._writable.write(e)?this._ondrain=n:n()):n()},d.prototype._finish=function(e){var t=this;this.emit("preend"),c(this,(function(){var n,r;n=t._forwardEnd&&t._writable,r=function(){!1===t._writableState.prefinished&&(t._writableState.prefinished=!0),t.emit("prefinish"),c(t,e)},n?n._writableState&&n._writableState.finished?r():n._writableState?n.end(r):(n.end(),r()):r()}))},d.prototype.end=function(e,t,n){return"function"==typeof e?this.end(null,null,e):"function"==typeof t?this.end(e,null,t):(this._ended=!0,e&&this.write(e),this._writableState.ending||this.write(u),i.Writable.prototype.end.call(this,n))},t.exports=d}).call(this)}).call(this,e("_process"),e("buffer").Buffer)}}},{package:"duplexify",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/gunzip-maybe/node_modules/duplexify/index.js"}],[5022,{"end-of-stream":3012,fs:2477,once:6003},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("once"),i=e("end-of-stream"),s=e("fs"),a=function(){},o=function(e){return"function"==typeof e},u=function(e,t,n,u){u=r(u);var c=!1;e.on("close",(function(){c=!0})),i(e,{readable:t,writable:n},(function(e){if(e)return u(e);c=!0,u()}));var l=!1;return function(t){if(!c&&!l)return l=!0,function(e){return!!s&&(e instanceof(s.ReadStream||a)||e instanceof(s.WriteStream||a))&&o(e.close)}(e)?e.close(a):function(e){return e.setHeader&&o(e.abort)}(e)?e.abort():o(e.destroy)?e.destroy():void u(t||new Error("stream was destroyed"))}},c=function(e){e()},l=function(e,t){return e.pipe(t)};t.exports=function(){var e,t=Array.prototype.slice.call(arguments),n=o(t[t.length-1]||a)&&t.pop()||a;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Error("pump requires two streams per minimum");var r=t.map((function(i,s){var a=s<t.length-1;return u(i,a,s>0,(function(t){e||(e=t),t&&r.forEach(c),a||(r.forEach(c),n(e))}))}));return t.reduce(l)}}}},{package:"pump",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/gunzip-maybe/node_modules/pump/index.js"}],[2490,{buffer:2478},function(){with(this)return function(){"use strict";return function(e,t,n){(function(e){(function(){var n=Object.prototype.toString,r="function"==typeof e.alloc&&"function"==typeof e.allocUnsafe&&"function"==typeof e.from;t.exports=function(t,i,s){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return a=t,"ArrayBuffer"===n.call(a).slice(8,-1)?function(t,n,i){n>>>=0;var s=t.byteLength-n;if(s<0)throw new RangeError("'offset' is out of bounds");if(i===undefined)i=s;else if((i>>>=0)>s)throw new RangeError("'length' is out of bounds");return r?e.from(t.slice(n,n+i)):new e(new Uint8Array(t.slice(n,n+i)))}(t,i,s):"string"==typeof t?function(t,n){if("string"==typeof n&&""!==n||(n="utf8"),!e.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');return r?e.from(t,n):new e(t,n)}(t,i):r?e.from(t):new e(t);var a}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"buffer-from",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/buffer-from/index.js"}],[6115,{_process:6127,"readable-stream":6410,util:2485,xtend:6886},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r=e("readable-stream").Transform,i=e("util").inherits,s=e("xtend");function a(e){r.call(this,e),this._destroyed=!1}function o(e,t,n){n(null,e)}function u(e){return function(t,n,r){return"function"==typeof t&&(r=n,n=t,t={}),"function"!=typeof n&&(n=o),"function"!=typeof r&&(r=null),e(t,n,r)}}i(a,r),a.prototype.destroy=function(e){if(!this._destroyed){this._destroyed=!0;var t=this;n.nextTick((function(){e&&t.emit("error",e),t.emit("close")}))}},t.exports=u((function(e,t,n){var r=new a(e);return r._transform=t,n&&(r._flush=n),r})),t.exports.ctor=u((function(e,t,n){function r(t){if(!(this instanceof r))return new r(t);this.options=s(e,t),a.call(this,this.options)}return i(r,a),r.prototype._transform=t,n&&(r.prototype._flush=n),r})),t.exports.obj=u((function(e,t,n){var r=new a(s({objectMode:!0,highWaterMark:16},e));return r._transform=t,n&&(r._flush=n),r}))}).call(this)}).call(this,e("_process"))}}},{package:"through2",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/peek-stream/node_modules/through2/through2.js"}],[6114,{_process:6127,buffer:2478,"end-of-stream":3012,inherits:5094,"readable-stream":6410,"stream-shift":6607},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n,r){(function(){var i=e("readable-stream"),s=e("end-of-stream"),a=e("inherits"),o=e("stream-shift"),u=r.from&&r.from!==Uint8Array.from?r.from([0]):new r([0]),c=function(e,t){e._corked?e.once("uncork",t):t()},l=function(e,t){return function(n){n?function(e,t){e._autoDestroy&&e.destroy(t)}(e,"premature close"===n.message?null:n):t&&!e._ended&&e.end()}},d=function(e,t,n){if(!(this instanceof d))return new d(e,t,n);i.Duplex.call(this,n),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!n||!1!==n.autoDestroy,this._forwardDestroy=!n||!1!==n.destroy,this._forwardEnd=!n||!1!==n.end,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,e&&this.setWritable(e),t&&this.setReadable(t)};a(d,i.Duplex),d.obj=function(e,t,n){return n||(n={}),n.objectMode=!0,n.highWaterMark=16,new d(e,t,n)},d.prototype.cork=function(){1==++this._corked&&this.emit("cork")},d.prototype.uncork=function(){this._corked&&0==--this._corked&&this.emit("uncork")},d.prototype.setWritable=function(e){if(this._unwrite&&this._unwrite(),this.destroyed)e&&e.destroy&&e.destroy();else if(null!==e&&!1!==e){var t=this,r=s(e,{writable:!0,readable:!1},l(this,this._forwardEnd)),i=function(){var e=t._ondrain;t._ondrain=null,e&&e()};this._unwrite&&n.nextTick(i),this._writable=e,this._writable.on("drain",i),this._unwrite=function(){t._writable.removeListener("drain",i),r()},this.uncork()}else this.end()},d.prototype.setReadable=function(e){if(this._unread&&this._unread(),this.destroyed)e&&e.destroy&&e.destroy();else{if(null===e||!1===e)return this.push(null),void this.resume();var t,n=this,r=s(e,{writable:!1,readable:!0},l(this)),a=function(){n._forward()},o=function(){n.push(null)};this._drained=!0,this._readable=e,this._readable2=e._readableState?e:(t=e,new i.Readable({objectMode:!0,highWaterMark:16}).wrap(t)),this._readable2.on("readable",a),this._readable2.on("end",o),this._unread=function(){n._readable2.removeListener("readable",a),n._readable2.removeListener("end",o),r()},this._forward()}},d.prototype._read=function(){this._drained=!0,this._forward()},d.prototype._forward=function(){if(!this._forwarding&&this._readable2&&this._drained){var e;for(this._forwarding=!0;this._drained&&null!==(e=o(this._readable2));)this.destroyed||(this._drained=this.push(e));this._forwarding=!1}},d.prototype.destroy=function(e){if(!this.destroyed){this.destroyed=!0;var t=this;n.nextTick((function(){t._destroy(e)}))}},d.prototype._destroy=function(e){if(e){var t=this._ondrain;this._ondrain=null,t?t(e):this.emit("error",e)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},d.prototype._write=function(e,t,n){return this.destroyed?n():this._corked?c(this,this._write.bind(this,e,t,n)):e===u?this._finish(n):this._writable?void(!1===this._writable.write(e)?this._ondrain=n:n()):n()},d.prototype._finish=function(e){var t=this;this.emit("preend"),c(this,(function(){var n,r;n=t._forwardEnd&&t._writable,r=function(){!1===t._writableState.prefinished&&(t._writableState.prefinished=!0),t.emit("prefinish"),c(t,e)},n?n._writableState&&n._writableState.finished?r():n._writableState?n.end(r):(n.end(),r()):r()}))},d.prototype.end=function(e,t,n){return"function"==typeof e?this.end(null,null,e):"function"==typeof t?this.end(e,null,t):(this._ended=!0,e&&this.write(e),this._writableState.ending||this.write(u),i.Writable.prototype.end.call(this,n))},t.exports=d}).call(this)}).call(this,e("_process"),e("buffer").Buffer)}}},{package:"duplexify",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/peek-stream/node_modules/duplexify/index.js"}],[5008,{_process:6127,buffer:2478,"pako/lib/zlib/constants":5013,"pako/lib/zlib/deflate.js":5015,"pako/lib/zlib/inflate.js":5017,"pako/lib/zlib/messages":5019,"pako/lib/zlib/zstream":5021},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t,r){(function(){var i=e("pako/lib/zlib/messages"),s=e("pako/lib/zlib/zstream"),a=e("pako/lib/zlib/deflate.js"),o=e("pako/lib/zlib/inflate.js"),u=e("pako/lib/zlib/constants");for(var c in u)n[c]=u[c];function l(e){if(e<n.DEFLATE||e>n.UNZIP)throw new TypeError("Bad argument");this.mode=e,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}function d(e,t){for(var n=0;n<e.length;n++)this[t+n]=e[n]}n.NONE=0,n.DEFLATE=1,n.INFLATE=2,n.GZIP=3,n.GUNZIP=4,n.DEFLATERAW=5,n.INFLATERAW=6,n.UNZIP=7,l.prototype.init=function(e,t,r,i,u){switch(this.windowBits=e,this.level=t,this.memLevel=r,this.strategy=i,this.mode!==n.GZIP&&this.mode!==n.GUNZIP||(this.windowBits+=16),this.mode===n.UNZIP&&(this.windowBits+=32),this.mode!==n.DEFLATERAW&&this.mode!==n.INFLATERAW||(this.windowBits=-this.windowBits),this.strm=new s,this.mode){case n.DEFLATE:case n.GZIP:case n.DEFLATERAW:var c=a.deflateInit2(this.strm,this.level,n.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case n.INFLATE:case n.GUNZIP:case n.INFLATERAW:case n.UNZIP:c=o.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}c===n.Z_OK?(this.write_in_progress=!1,this.init_done=!0):this._error(c)},l.prototype.params=function(){throw new Error("deflateParams Not supported")},l.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(this.mode===n.NONE)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")},l.prototype.write=function(e,n,r,i,s,a,o){this._writeCheck(),this.write_in_progress=!0;var u=this;return t.nextTick((function(){u.write_in_progress=!1;var t=u._write(e,n,r,i,s,a,o);u.callback(t[0],t[1]),u.pending_close&&u.close()})),this},l.prototype.writeSync=function(e,t,n,r,i,s,a){return this._writeCheck(),this._write(e,t,n,r,i,s,a)},l.prototype._write=function(e,t,i,s,u,c,l){if(this.write_in_progress=!0,e!==n.Z_NO_FLUSH&&e!==n.Z_PARTIAL_FLUSH&&e!==n.Z_SYNC_FLUSH&&e!==n.Z_FULL_FLUSH&&e!==n.Z_FINISH&&e!==n.Z_BLOCK)throw new Error("Invalid flush value");null==t&&(t=new r(0),s=0,i=0),u._set?u.set=u._set:u.set=d;var h=this.strm;switch(h.avail_in=s,h.input=t,h.next_in=i,h.avail_out=l,h.output=u,h.next_out=c,this.mode){case n.DEFLATE:case n.GZIP:case n.DEFLATERAW:var f=a.deflate(h,e);break;case n.UNZIP:case n.INFLATE:case n.GUNZIP:case n.INFLATERAW:f=o.inflate(h,e);break;default:throw new Error("Unknown mode "+this.mode)}return f!==n.Z_STREAM_END&&f!==n.Z_OK&&this._error(f),this.write_in_progress=!1,[h.avail_in,h.avail_out]},l.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,this.mode===n.DEFLATE||this.mode===n.GZIP||this.mode===n.DEFLATERAW?a.deflateEnd(this.strm):o.inflateEnd(this.strm),this.mode=n.NONE)},l.prototype.reset=function(){switch(this.mode){case n.DEFLATE:case n.DEFLATERAW:var e=a.deflateReset(this.strm);break;case n.INFLATE:case n.INFLATERAW:e=o.inflateReset(this.strm)}e!==n.Z_OK&&this._error(e)},l.prototype._error=function(e){this.onerror(i[e]+": "+this.strm.msg,e),this.write_in_progress=!1,this.pending_close&&this.close()},n.Zlib=l}).call(this)}).call(this,e("_process"),e("buffer").Buffer)}}},{package:"browserify-zlib",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/gunzip-maybe/node_modules/browserify-zlib/src/binding.js"}],[1408,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.GWEI=n.ERC1155_TOKEN_RECEIVER_INTERFACE_ID=n.ERC1155_METADATA_URI_INTERFACE_ID=n.ERC1155_INTERFACE_ID=n.ERC721_ENUMERABLE_INTERFACE_ID=n.ERC721_METADATA_INTERFACE_ID=n.ERC721_INTERFACE_ID=n.ERC20=n.ERC1155=n.ERC721=n.RINKEBY_CHAIN_ID=n.IPFS_DEFAULT_GATEWAY_URL=n.FALL_BACK_VS_CURRENCY=n.RPC=n.MAINNET=void 0,n.MAINNET="mainnet",n.RPC="rpc",n.FALL_BACK_VS_CURRENCY="ETH",n.IPFS_DEFAULT_GATEWAY_URL="https://cloudflare-ipfs.com/ipfs/",n.RINKEBY_CHAIN_ID="4",n.ERC721="ERC721",n.ERC1155="ERC1155",n.ERC20="ERC20",n.ERC721_INTERFACE_ID="0x80ac58cd",n.ERC721_METADATA_INTERFACE_ID="0x5b5e139f",n.ERC721_ENUMERABLE_INTERFACE_ID="0x780e9d63",n.ERC1155_INTERFACE_ID="0xd9b67a26",n.ERC1155_METADATA_URI_INTERFACE_ID="0x0e89341c",n.ERC1155_TOKEN_RECEIVER_INTERFACE_ID="0x4e2312e0",n.GWEI="gwei"}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/constants.js"}],[1391,{"../util":1450},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{u(r.next(e))}catch(e){s(e)}}function o(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.fetchExchangeRate=void 0;const i=e("../util");n.fetchExchangeRate=function(e,t,n){return r(this,void 0,void 0,(function*(){const r=yield i.handleFetch(function(e,t,n){return`https://min-api.cryptocompare.com/data/price?fsym=${t.toUpperCase()}&tsyms=${e.toUpperCase()}`+(n&&"USD"!==e.toUpperCase()?",USD":"")}(e,t,n));if("Error"===r.Response)throw new Error(r.Message);const s=Number(r[e.toUpperCase()]),a=Number(r.USD);if(!Number.isFinite(s))throw new Error(`Invalid response for ${e.toUpperCase()}: ${r[e.toUpperCase()]}`);if(n&&!Number.isFinite(a))throw new Error(`Invalid response for usdConversionRate: ${r.USD}`);return{conversionRate:s,usdConversionRate:a}}))}}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/apis/crypto-compare.js"}],[1444,{"../BaseControllerV2":1388},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SubjectMetadataController=void 0;const r=e("../BaseControllerV2"),i={subjectMetadata:{persist:!0,anonymous:!1}},s={subjectMetadata:{}};class a extends r.BaseController{constructor({messenger:e,subjectCacheLimit:t,state:n={}}){if(!Number.isInteger(t)||t<1)throw new Error(`subjectCacheLimit must be a positive integer. Received: "${t}"`);const r=t=>e.call("PermissionController:hasPermissions",t);super({name:"SubjectMetadataController",metadata:i,messenger:e,state:Object.assign({},a.getTrimmedState(n,r))}),this.subjectHasPermissions=r,this.subjectCacheLimit=t,this.subjectsWithoutPermissionsEcounteredSinceStartup=new Set}clearState(){this.subjectsWithoutPermissionsEcounteredSinceStartup.clear(),this.update((e=>Object.assign({},s)))}addSubjectMetadata(e){const{origin:t}=e,n=Object.assign(Object.assign({},e),{extensionId:e.extensionId||null,iconUrl:e.iconUrl||null,name:e.name||null});let r=null;if(this.subjectsWithoutPermissionsEcounteredSinceStartup.size>=this.subjectCacheLimit){const e=this.subjectsWithoutPermissionsEcounteredSinceStartup.values().next().value;this.subjectsWithoutPermissionsEcounteredSinceStartup.delete(e),this.subjectHasPermissions(e)||(r=e)}this.subjectsWithoutPermissionsEcounteredSinceStartup.add(t),this.update((e=>{e.subjectMetadata[t]=n,"string"==typeof r&&delete e.subjectMetadata[r]}))}trimMetadataState(){this.update((e=>a.getTrimmedState(e,this.subjectHasPermissions)))}static getTrimmedState(e,t){const{subjectMetadata:n={}}=e;return{subjectMetadata:Object.keys(n).reduce(((e,r)=>(t(r)&&(e[r]=n[r]),e)),{})}}}n.SubjectMetadataController=a}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/subject-metadata/SubjectMetadataController.js"}],[1425,{"../BaseController":1387,events:2479},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AbstractMessageManager=void 0;const r=e("events"),i=e("../BaseController");class s extends i.BaseController{constructor(e,t){super(e,t),this.hub=new r.EventEmitter,this.name="AbstractMessageManager",this.defaultState={unapprovedMessages:{},unapprovedMessagesCount:0},this.messages=[],this.initialize()}saveMessageList(){const e=this.getUnapprovedMessages(),t=this.getUnapprovedMessagesCount();this.update({unapprovedMessages:e,unapprovedMessagesCount:t}),this.hub.emit("updateBadge")}setMessageStatus(e,t){const n=this.getMessage(e);if(!n)throw new Error(`${this.name}: Message not found for id: ${e}.`);n.status=t,this.updateMessage(n),this.hub.emit(`${e}:${t}`,n),"rejected"!==t&&"signed"!==t&&"errored"!==t||this.hub.emit(`${e}:finished`,n)}updateMessage(e){const t=this.messages.findIndex((t=>e.id===t.id));-1!==t&&(this.messages[t]=e),this.saveMessageList()}getUnapprovedMessagesCount(){return Object.keys(this.getUnapprovedMessages()).length}getUnapprovedMessages(){return this.messages.filter((e=>"unapproved"===e.status)).reduce(((e,t)=>(e[t.id]=t,e)),{})}addMessage(e){this.messages.push(e),this.saveMessageList()}getMessage(e){return this.messages.find((t=>t.id===e))}approveMessage(e){return this.setMessageStatusApproved(e.metamaskId),this.prepMessageForSigning(e)}setMessageStatusApproved(e){this.setMessageStatus(e,"approved")}setMessageStatusSigned(e,t){const n=this.getMessage(e);n&&(n.rawSig=t,this.updateMessage(n),this.setMessageStatus(e,"signed"))}rejectMessage(e){this.setMessageStatus(e,"rejected")}}n.AbstractMessageManager=s,n.default=s}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/message-manager/AbstractMessageManager.js"}],[1407,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.compareCollectiblesMetadata=void 0,n.compareCollectiblesMetadata=function(e,t){return["image","backgroundColor","imagePreview","imageThumbnail","imageOriginal","animation","animationOriginal","externalLink"].reduce(((n,r)=>e[r]&&e[r]!==t[r]?n+1:n),0)>0}}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/assets/assetsUtil.js"}],[1392,{"../util":1450},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{u(r.next(e))}catch(e){s(e)}}function o(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.fetchTokenMetadata=n.fetchTokenList=void 0;const i=e("../util"),s="https://token-api.metaswap.codefi.network";function a(e,t){return r(this,void 0,void 0,(function*(){const n={referrer:e,referrerPolicy:"no-referrer-when-downgrade",method:"GET",mode:"cors",signal:t,cache:"default"};n.headers=new window.Headers,n.headers.set("Content-Type","application/json");try{return yield i.timeoutFetch(e,n,1e4)}catch(e){"AbortError"===e.name&&console.log("Request is aborted")}return undefined}))}function o(e){return r(this,void 0,void 0,(function*(){const t=yield e.json();if(null==t?void 0:t.error)throw new Error(`TokenService Error: ${t.error}`);return t}))}n.fetchTokenList=function(e,t){return r(this,void 0,void 0,(function*(){const n=function(e){return`${s}/tokens/${e}`}(e),r=yield a(n,t);return r?o(r):undefined}))},n.fetchTokenMetadata=function(e,t,n){return r(this,void 0,void 0,(function*(){const r=function(e,t){return`${s}/token/${e}?address=${t}`}(e,t),i=yield a(r,n);return i?o(i):undefined}))}}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/apis/token-service.js"}],[1410,{"./GasFeeController":1409},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{u(r.next(e))}catch(e){s(e)}}function o(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0});const i=e("./GasFeeController");n.default=function({isEIP1559Compatible:e,isLegacyGasAPICompatible:t,fetchGasEstimates:n,fetchGasEstimatesUrl:s,fetchGasEstimatesViaEthFeeHistory:a,fetchLegacyGasPriceEstimates:o,fetchLegacyGasPriceEstimatesUrl:u,fetchEthGasPriceEstimate:c,calculateTimeEstimate:l,clientId:d,ethQuery:h}){return r(this,void 0,void 0,(function*(){try{if(e){let e;try{e=yield n(s,d)}catch(t){e=yield a(h)}const{suggestedMaxPriorityFeePerGas:t,suggestedMaxFeePerGas:r}=e.medium;return{gasFeeEstimates:e,estimatedGasFeeTimeBounds:l(t,r,e),gasEstimateType:i.GAS_ESTIMATE_TYPES.FEE_MARKET}}if(t){return{gasFeeEstimates:yield o(u,d),estimatedGasFeeTimeBounds:{},gasEstimateType:i.GAS_ESTIMATE_TYPES.LEGACY}}throw new Error("Main gas fee/price estimation failed. Use fallback")}catch(e){try{return{gasFeeEstimates:yield c(h),estimatedGasFeeTimeBounds:{},gasEstimateType:i.GAS_ESTIMATE_TYPES.ETH_GASPRICE}}catch(e){throw new Error(`Gas fee/price estimation failed. Message: ${e.message}`)}}}))}}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/gas/determineGasFeeCalculations.js"}],[1422,{"../util":1450,"ethereumjs-util":3195},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{u(r.next(e))}catch(e){s(e)}}function o(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.calculateTimeEstimate=n.fetchEthGasPriceEstimate=n.fetchLegacyGasPriceEstimates=n.fetchGasEstimates=n.normalizeGWEIDecimalNumbers=void 0;const i=e("ethereumjs-util"),s=e("../util"),a=e=>({"X-Client-Id":e});function o(e){const t=s.gweiDecToWEIBN(e).toString(16);return s.weiHexToGweiDec(t).toString(10)}n.normalizeGWEIDecimalNumbers=o,n.fetchGasEstimates=function(e,t){return r(this,void 0,void 0,(function*(){const n=yield s.handleFetch(e,t?{headers:a(t)}:undefined);return{low:Object.assign(Object.assign({},n.low),{suggestedMaxPriorityFeePerGas:o(n.low.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:o(n.low.suggestedMaxFeePerGas)}),medium:Object.assign(Object.assign({},n.medium),{suggestedMaxPriorityFeePerGas:o(n.medium.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:o(n.medium.suggestedMaxFeePerGas)}),high:Object.assign(Object.assign({},n.high),{suggestedMaxPriorityFeePerGas:o(n.high.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:o(n.high.suggestedMaxFeePerGas)}),estimatedBaseFee:o(n.estimatedBaseFee),historicalBaseFeeRange:n.historicalBaseFeeRange,baseFeeTrend:n.baseFeeTrend,latestPriorityFeeRange:n.latestPriorityFeeRange,historicalPriorityFeeRange:n.historicalPriorityFeeRange,priorityFeeTrend:n.priorityFeeTrend,networkCongestion:n.networkCongestion}}))},n.fetchLegacyGasPriceEstimates=function(e,t){return r(this,void 0,void 0,(function*(){const n=yield s.handleFetch(e,{referrer:e,referrerPolicy:"no-referrer-when-downgrade",method:"GET",mode:"cors",headers:Object.assign({"Content-Type":"application/json"},t&&a(t))});return{low:n.SafeGasPrice,medium:n.ProposeGasPrice,high:n.FastGasPrice}}))},n.fetchEthGasPriceEstimate=function(e){return r(this,void 0,void 0,(function*(){const t=yield s.query(e,"gasPrice");return{gasPrice:s.weiHexToGweiDec(t).toString()}}))},n.calculateTimeEstimate=function(e,t,n){const{low:r,medium:a,high:o,estimatedBaseFee:u}=n,c=s.gweiDecToWEIBN(e),l=s.gweiDecToWEIBN(t),d=s.gweiDecToWEIBN(u),h=i.BN.min(c,l.sub(d)),f=s.gweiDecToWEIBN(r.suggestedMaxPriorityFeePerGas),m=s.gweiDecToWEIBN(a.suggestedMaxPriorityFeePerGas),p=s.gweiDecToWEIBN(o.suggestedMaxPriorityFeePerGas);let g,b;return h.lt(f)?(g=null,b="unknown"):h.gte(f)&&h.lt(m)?(g=r.minWaitTimeEstimate,b=r.maxWaitTimeEstimate):h.gte(m)&&h.lt(p)?(g=a.minWaitTimeEstimate,b=a.maxWaitTimeEstimate):h.eq(p)?(g=o.minWaitTimeEstimate,b=o.maxWaitTimeEstimate):(g=0,b=o.maxWaitTimeEstimate),{lowerTimeBound:g,upperTimeBound:b}}}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/gas/gas-util.js"}],[1412,{"../constants":1408,"./fetchGasEstimatesViaEthFeeHistory/BlockFeeHistoryDatasetFetcher":1413,"./fetchGasEstimatesViaEthFeeHistory/calculateBaseFeeRange":1414,"./fetchGasEstimatesViaEthFeeHistory/calculateBaseFeeTrend":1415,"./fetchGasEstimatesViaEthFeeHistory/calculateGasFeeEstimatesForPriorityLevels":1416,"./fetchGasEstimatesViaEthFeeHistory/calculateNetworkCongestion":1417,"./fetchGasEstimatesViaEthFeeHistory/calculatePriorityFeeRange":1418,"./fetchGasEstimatesViaEthFeeHistory/calculatePriorityFeeTrend":1419,"./fetchGasEstimatesViaEthFeeHistory/fetchLatestBlock":1420,"ethjs-unit":3247},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{u(r.next(e))}catch(e){s(e)}}function o(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});const s=e("ethjs-unit"),a=e("../constants"),o=i(e("./fetchGasEstimatesViaEthFeeHistory/BlockFeeHistoryDatasetFetcher")),u=i(e("./fetchGasEstimatesViaEthFeeHistory/calculateGasFeeEstimatesForPriorityLevels")),c=i(e("./fetchGasEstimatesViaEthFeeHistory/calculateBaseFeeRange")),l=i(e("./fetchGasEstimatesViaEthFeeHistory/calculateBaseFeeTrend")),d=i(e("./fetchGasEstimatesViaEthFeeHistory/calculatePriorityFeeRange")),h=i(e("./fetchGasEstimatesViaEthFeeHistory/calculatePriorityFeeTrend")),f=i(e("./fetchGasEstimatesViaEthFeeHistory/calculateNetworkCongestion")),m=i(e("./fetchGasEstimatesViaEthFeeHistory/fetchLatestBlock"));n.default=function(e){return r(this,void 0,void 0,(function*(){const t=yield m.default(e),n=new o.default({ethQuery:e,endBlockNumber:t.number}),r=yield n.forAll(),i=u.default(r.smallRange),p=s.fromWei(t.baseFeePerGas,a.GWEI),g=c.default(r.mediumRange),b=l.default(r.latestWithNextBlock),y=d.default(r.latest),v=d.default(r.mediumRange),w=h.default(r.tinyRange),_=f.default([]);return Object.assign(Object.assign({},i),{estimatedBaseFee:p,historicalBaseFeeRange:g,baseFeeTrend:b,latestPriorityFeeRange:y,historicalPriorityFeeRange:v,priorityFeeTrend:w,networkCongestion:_})}))}}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/gas/fetchGasEstimatesViaEthFeeHistory.js"}],[1442,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MethodNames=void 0,function(e){e.requestPermissions="wallet_requestPermissions",e.getPermissions="wallet_getPermissions"}(n.MethodNames||(n.MethodNames={}))}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/permissions/utils.js"}],[1434,{"./network-access":1435},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.endowmentPermissionBuilders=void 0;const r=e("./network-access");n.endowmentPermissionBuilders={[r.networkAccessEndowmentBuilder.targetKey]:r.networkAccessEndowmentBuilder}}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/permissions/endowments/index.js"}],[1432,{nanoid:1499},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.hasSpecificationType=n.PermissionType=n.findCaveat=n.constructPermission=void 0;const r=e("nanoid");n.constructPermission=function(e){const{caveats:t=null,invoker:n,target:i}=e;return{id:r.nanoid(),parentCapability:i,invoker:n,caveats:t,date:(new Date).getTime()}},n.findCaveat=function(e,t){var n;return null===(n=e.caveats)||void 0===n?void 0:n.find((e=>e.type===t))},function(e){e.RestrictedMethod="RestrictedMethod",e.Endowment="Endowment"}(n.PermissionType||(n.PermissionType={})),n.hasSpecificationType=function(e,t){return e.permissionType===t}}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/permissions/Permission.js"}],[1431,{"./errors":1436},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{u(r.next(e))}catch(e){s(e)}}function o(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.decorateWithCaveats=void 0;const i=e("./errors");n.decorateWithCaveats=function(e,t,n){const{caveats:s}=t;if(!s)return e;let a=t=>r(this,void 0,void 0,(function*(){return e(t)}));for(const e of s){const t=n[e.type];if(!t)throw new i.UnrecognizedCaveatTypeError(e.type);a=t.decorator(a,e)}return a}}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/permissions/Caveat.js"}],[1433,{"../BaseControllerV2":1388,"../util":1450,"./Caveat":1431,"./Permission":1432,"./errors":1436,"./permission-middleware":1438,"./utils":1442,"deep-freeze-strict":2931,immer:5092,nanoid:1499},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{u(r.next(e))}catch(e){s(e)}}function o(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.PermissionController=n.CaveatMutatorOperation=void 0;const a=s(e("deep-freeze-strict")),o=e("immer"),u=e("nanoid"),c=e("../BaseControllerV2"),l=e("../util"),d=e("./Caveat"),h=e("./errors"),f=e("./Permission"),m=e("./permission-middleware"),p=e("./utils"),g="PermissionController";var b;!function(e){e[e.noop=0]="noop",e[e.updateValue=1]="updateValue",e[e.deleteCaveat=2]="deleteCaveat",e[e.revokePermission=3]="revokePermission"}(b=n.CaveatMutatorOperation||(n.CaveatMutatorOperation={}));class y extends c.BaseController{constructor(e){const{caveatSpecifications:t,permissionSpecifications:n,unrestrictedMethods:r,messenger:i,state:s={}}=e;super({name:g,metadata:{subjects:{anonymous:!0,persist:!0}},messenger:i,state:Object.assign(Object.assign({},{subjects:{}}),s)}),this._unrestrictedMethods=new Set(r),this._caveatSpecifications=a.default(Object.assign({},t)),this.validatePermissionSpecifications(n,this._caveatSpecifications),this._permissionSpecifications=a.default(Object.assign({},n)),this.registerMessageHandlers(),this.createPermissionMiddleware=m.getPermissionMiddlewareFactory({executeRestrictedMethod:this._executeRestrictedMethod.bind(this),getRestrictedMethod:this.getRestrictedMethod.bind(this),isUnrestrictedMethod:this.unrestrictedMethods.has.bind(this.unrestrictedMethods)})}get unrestrictedMethods(){return this._unrestrictedMethods}getPermissionSpecification(e){return this._permissionSpecifications[e]}getCaveatSpecification(e){return this._caveatSpecifications[e]}validatePermissionSpecifications(e,t){Object.entries(e).forEach((([e,{permissionType:n,targetKey:r,allowedCaveats:i}])=>{if(!n||!l.hasProperty(f.PermissionType,n))throw new Error(`Invalid permission type: "${n}"`);if(!e||/_$/u.test(e)||/[^_]\*$/u.test(e))throw new Error(`Invalid permission target key: "${e}"`);if(e!==r)throw new Error(`Invalid permission specification: key "${e}" must match specification.target value "${r}".`);i&&i.forEach((e=>{if(!l.hasProperty(t,e))throw new h.UnrecognizedCaveatTypeError(e)}))}))}registerMessageHandlers(){this.messagingSystem.registerActionHandler(`${g}:clearPermissions`,(()=>this.clearState())),this.messagingSystem.registerActionHandler(`${g}:getEndowments`,((e,t,n)=>this.getEndowments(e,t,n))),this.messagingSystem.registerActionHandler(`${g}:getSubjectNames`,(()=>this.getSubjectNames())),this.messagingSystem.registerActionHandler(`${g}:getPermissions`,(e=>this.getPermissions(e))),this.messagingSystem.registerActionHandler(`${g}:hasPermission`,((e,t)=>this.hasPermission(e,t))),this.messagingSystem.registerActionHandler(`${g}:hasPermissions`,(e=>this.hasPermissions(e))),this.messagingSystem.registerActionHandler(`${g}:revokePermissions`,this.revokePermissions.bind(this)),this.messagingSystem.registerActionHandler(`${g}:revokeAllPermissions`,(e=>this.revokeAllPermissions(e))),this.messagingSystem.registerActionHandler(`${g}:requestPermissions`,((e,t)=>this.requestPermissions(e,t)))}clearState(){this.update((e=>Object.assign({},{subjects:{}})))}getTypedPermissionSpecification(e,t,n){const r=e===f.PermissionType.RestrictedMethod?h.methodNotFound(t,n?{origin:n}:undefined):new h.EndowmentPermissionDoesNotExistError(t,n),i=this.getTargetKey(t);if(!i)throw r;const s=this.getPermissionSpecification(i);if(!f.hasSpecificationType(s,e))throw r;return s}getRestrictedMethod(e,t){return this.getTypedPermissionSpecification(f.PermissionType.RestrictedMethod,e,t).methodImplementation}getSubjectNames(){return Object.keys(this.state.subjects)}getPermission(e,t){var n;return null===(n=this.state.subjects[e])||void 0===n?void 0:n.permissions[t]}getPermissions(e){var t;return null===(t=this.state.subjects[e])||void 0===t?void 0:t.permissions}hasPermission(e,t){return Boolean(this.getPermission(e,t))}hasPermissions(e){return Boolean(this.state.subjects[e])}revokeAllPermissions(e){this.update((t=>{if(!t.subjects[e])throw new h.UnrecognizedSubjectError(e);delete t.subjects[e]}))}revokePermission(e,t){this.revokePermissions({[e]:[t]})}revokePermissions(e){this.update((t=>{Object.keys(e).forEach((n=>{if(!l.hasProperty(t.subjects,n))throw new h.UnrecognizedSubjectError(n);e[n].forEach((e=>{const{permissions:r}=t.subjects[n];if(!l.hasProperty(r,e))throw new h.PermissionDoesNotExistError(n,e);this.deletePermission(t.subjects,n,e)}))}))}))}revokePermissionForAllSubjects(e){0!==this.getSubjectNames().length&&this.update((t=>{Object.entries(t.subjects).forEach((([n,r])=>{const{permissions:i}=r;l.hasProperty(i,e)&&this.deletePermission(t.subjects,n,e)}))}))}deletePermission(e,t,n){const{permissions:r}=e[t];Object.keys(r).length>1?delete r[n]:delete e[t]}hasCaveat(e,t,n){return Boolean(this.getCaveat(e,t,n))}getCaveat(e,t,n){const r=this.getPermission(e,t);if(!r)throw new h.PermissionDoesNotExistError(e,t);return f.findCaveat(r,n)}addCaveat(e,t,n,r){if(this.hasCaveat(e,t,n))throw new h.CaveatAlreadyExistsError(e,t,n);this.setCaveat(e,t,n,r)}updateCaveat(e,t,n,r){if(!this.hasCaveat(e,t,n))throw new h.CaveatDoesNotExistError(e,t,n);this.setCaveat(e,t,n,r)}setCaveat(e,t,n,r){this.update((i=>{const s=i.subjects[e];if(!s)throw new h.UnrecognizedSubjectError(e);const a=s.permissions[t];if(!a)throw new h.PermissionDoesNotExistError(e,t);const o={type:n,value:r};if(this.validateCaveat(o,e,t),a.caveats){const e=a.caveats.findIndex((e=>e.type===o.type));-1===e?a.caveats.push(o):a.caveats.splice(e,1,o)}else a.caveats=[o];this.validateModifiedPermission(a,e,t)}))}updatePermissionsByCaveat(e,t){0!==Object.keys(this.state.subjects).length&&this.update((n=>{Object.values(n.subjects).forEach((r=>{Object.values(r.permissions).forEach((i=>{const{caveats:s}=i,a=null==s?void 0:s.find((({type:t})=>t===e));if(!a)return;const o=t(a.value);switch(o.operation){case b.noop:break;case b.updateValue:a.value=o.value,this.validateCaveat(a,r.origin,i.parentCapability);break;case b.deleteCaveat:this.deleteCaveat(i,e,r.origin,i.parentCapability);break;case b.revokePermission:this.deletePermission(n.subjects,r.origin,i.parentCapability);break;default:throw new Error(`Unrecognized mutation result: "${o.operation}"`)}}))}))}))}removeCaveat(e,t,n){this.update((r=>{var i;const s=null===(i=r.subjects[e])||void 0===i?void 0:i.permissions[t];if(!s)throw new h.PermissionDoesNotExistError(e,t);if(!s.caveats)throw new h.CaveatDoesNotExistError(e,t,n);this.deleteCaveat(s,n,e,t)}))}deleteCaveat(e,t,n,r){if(!e.caveats)throw new h.CaveatDoesNotExistError(n,r,t);const i=e.caveats.findIndex((e=>e.type===t));if(-1===i)throw new h.CaveatDoesNotExistError(n,r,t);1===e.caveats.length?e.caveats=null:e.caveats.splice(i,1),this.validateModifiedPermission(e,n,r)}validateModifiedPermission(e,t,n){const r=this.getTargetKey(e.parentCapability);if(!r)throw new Error(`Fatal: Existing permission target key "${r}" has no specification.`);this.validatePermission(this.getPermissionSpecification(r),e,t,n)}getTargetKey(e){if(l.hasProperty(this._permissionSpecifications,e))return e;const t={};for(const e of Object.keys(this._permissionSpecifications)){const n=e.match(/(.+)\*$/u);n&&(t[n[1]]=!0)}const n=e.split("_");let r="";for(;n.length>0&&!l.hasProperty(this._permissionSpecifications,r)&&!t[r];)r+=`${n.shift()}_`;return t[r]?`${r}*`:undefined}grantPermissions({approvedPermissions:e,requestData:t,preserveExistingPermissions:n=!0,subject:r}){const{origin:i}=r;if(!i||"string"!=typeof i)throw new h.InvalidSubjectIdentifierError(i);const s=n?Object.assign({},this.getPermissions(i)):{};for(const[n,r]of Object.entries(e)){const e=this.getTargetKey(n);if(!e)throw h.methodNotFound(n);if(r.parentCapability!==undefined&&n!==r.parentCapability)throw new h.InvalidApprovedPermissionError(i,n,r);const a=n,o=this.getPermissionSpecification(e),u={caveats:this.constructCaveats(i,a,r.caveats),invoker:i,target:a};let c;o.factory?(c=o.factory(u,t),this.validatePermission(o,c,i,a)):(c=f.constructPermission(u),this.validatePermission(o,c,i,a,{invokePermissionValidator:!0,performCaveatValidation:!1})),s[a]=c}return this.setValidatedPermissions(i,s),s}validatePermission(e,t,n,r,{invokePermissionValidator:i,performCaveatValidation:s}={invokePermissionValidator:!0,performCaveatValidation:!0}){const{allowedCaveats:a,validator:o}=e;if(l.hasProperty(t,"caveats")){const{caveats:e}=t;if(null!==e&&!(Array.isArray(e)&&e.length>0))throw new h.InvalidCaveatsPropertyError(n,r,e);const i=new Set;null==e||e.forEach((e=>{if(s&&this.validateCaveat(e,n,r),!(null==a?void 0:a.includes(e.type)))throw new h.ForbiddenCaveatError(e.type,n,r);if(i.has(e.type))throw new h.DuplicateCaveatError(e.type,n,r);i.add(e.type)}))}i&&o&&o(t,n,r)}setValidatedPermissions(e,t){this.update((n=>{n.subjects[e]||(n.subjects[e]={origin:e,permissions:{}}),n.subjects[e].permissions=o.castDraft(t)}))}constructCaveats(e,t,n){const r=null==n?void 0:n.map((n=>{this.validateCaveat(n,e,t);const{type:r,value:i}=n;return{type:r,value:i}}));return r&&l.isNonEmptyArray(r)?r:undefined}validateCaveat(e,t,n){var r;if(!l.isPlainObject(e))throw new h.InvalidCaveatError(e,t,n);if(2!==Object.keys(e).length)throw new h.InvalidCaveatFieldsError(e,t,n);if("string"!=typeof e.type)throw new h.InvalidCaveatTypeError(e,t,n);const i=this.getCaveatSpecification(e.type);if(!i)throw new h.UnrecognizedCaveatTypeError(e.type,t,n);if(!l.hasProperty(e,"value")||e.value===undefined)throw new h.CaveatMissingValueError(e,t,n);if(!l.isValidJson(e.value))throw new h.CaveatInvalidJsonError(e,t,n);null===(r=i.validator)||void 0===r||r.call(i,e,t,n)}requestPermissions(e,t,n={}){return r(this,void 0,void 0,(function*(){const{origin:r}=e,{id:s=u.nanoid(),preserveExistingPermissions:a=!0}=n;this.validateRequestedPermissions(r,t);const o={id:s,origin:r},c={metadata:o,permissions:t},l=yield this.requestUserApproval(c),{permissions:d}=l,h=i(l,["permissions"]);return[this.grantPermissions({subject:e,approvedPermissions:d,preserveExistingPermissions:a,requestData:h}),o]}))}validateRequestedPermissions(e,t){if(!l.isPlainObject(t))throw h.invalidParams({message:`Requested permissions for origin "${e}" is not a plain object.`,data:{origin:e,requestedPermissions:t}});if(0===Object.keys(t).length)throw h.invalidParams({message:`Permissions request for origin "${e}" contains no permissions.`,data:{requestedPermissions:t}});for(const n of Object.keys(t)){const r=t[n],i=this.getTargetKey(n);if(!i)throw h.methodNotFound(n,{origin:e,requestedPermissions:t});if(!l.isPlainObject(r)||r.parentCapability!==undefined&&n!==r.parentCapability)throw h.invalidParams({message:`Permissions request for origin "${e}" contains invalid requested permission(s).`,data:{origin:e,requestedPermissions:t}});this.validatePermission(this.getPermissionSpecification(i),r,e,n,{invokePermissionValidator:!1,performCaveatValidation:!0})}}requestUserApproval(e){return r(this,void 0,void 0,(function*(){const{origin:t,id:n}=e.metadata,r=yield this.messagingSystem.call("ApprovalController:addRequest",{id:n,origin:t,requestData:e,type:p.MethodNames.requestPermissions},!0);return this.validateApprovedPermissions(r,{id:n,origin:t}),r}))}validateApprovedPermissions(e,t){const{id:n,origin:r}=t;if(!l.isPlainObject(e)||!l.isPlainObject(e.metadata))throw h.internalError(`Approved permissions request for subject "${r}" is invalid.`,{data:{approvedRequest:e}});const{metadata:{id:i,origin:s},permissions:a}=e;if(i!==n)throw h.internalError(`Approved permissions request for subject "${r}" mutated its id.`,{originalId:n,mutatedId:i});if(s!==r)throw h.internalError(`Approved permissions request for subject "${r}" mutated its origin.`,{originalOrigin:r,mutatedOrigin:s});try{this.validateRequestedPermissions(r,a)}catch(e){throw h.internalError(`Invalid approved permissions request: ${e.message}`,e.data)}}acceptPermissionsRequest(e){return r(this,void 0,void 0,(function*(){const{id:t}=e.metadata;if(!this.hasApprovalRequest({id:t}))throw new h.PermissionsRequestNotFoundError(t);if(0!==Object.keys(e.permissions).length)try{this.messagingSystem.call("ApprovalController:acceptRequest",t,e)}catch(e){throw this._rejectPermissionsRequest(t,e),e}else this._rejectPermissionsRequest(t,h.invalidParams({message:"Must request at least one permission."}))}))}rejectPermissionsRequest(e){return r(this,void 0,void 0,(function*(){if(!this.hasApprovalRequest({id:e}))throw new h.PermissionsRequestNotFoundError(e);this._rejectPermissionsRequest(e,h.userRejectedRequest())}))}hasApprovalRequest(e){return this.messagingSystem.call("ApprovalController:hasRequest",e)}_rejectPermissionsRequest(e,t){return this.messagingSystem.call("ApprovalController:rejectRequest",e,t)}getEndowments(e,t,n){return r(this,void 0,void 0,(function*(){if(!this.hasPermission(e,t))throw h.unauthorized({data:{origin:e,targetName:t}});return this.getTypedPermissionSpecification(f.PermissionType.Endowment,t,e).endowmentGetter({origin:e,requestData:n})}))}executeRestrictedMethod(e,t,n){return r(this,void 0,void 0,(function*(){const r=this.getRestrictedMethod(t,e),i=yield this._executeRestrictedMethod(r,{origin:e},t,n);if(i===undefined)throw new Error(`Internal request for method "${t}" as origin "${e}" returned no result.`);return i}))}_executeRestrictedMethod(e,t,n,r=[]){const{origin:i}=t,s=this.getPermission(i,n);if(!s)throw h.unauthorized({data:{origin:i,method:n}});return d.decorateWithCaveats(e,s,this._caveatSpecifications)({method:n,params:r,context:{origin:i}})}}n.PermissionController=y}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/permissions/PermissionController.js"}],[1440,{"./getPermissions":1439,"./requestPermissions":1441},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.handlers=void 0;const r=e("./requestPermissions"),i=e("./getPermissions");n.handlers=[r.requestPermissionsHandler,i.getPermissionsHandler]}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/permissions/rpc-methods/index.js"}],[1480,{"./hdkey":1479,"./thirdparty":1481,bs58check:2488,buffer:2478,crypto:2592,"ethereumjs-util":3195,randombytes:6261,"scrypt-js":6459,"uuid/v4":1484},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{u(r.next(e))}catch(e){s(e)}}function o(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}};Object.defineProperty(n,"__esModule",{value:!0});var a=e("crypto"),o=e("ethereumjs-util"),u=e("scrypt-js"),c=e("./hdkey");Object.defineProperty(n,"hdkey",{enumerable:!0,get:function(){return c.default}});var l=e("./thirdparty");Object.defineProperty(n,"thirdparty",{enumerable:!0,get:function(){return l.default}});var d=e("bs58check"),h=e("randombytes"),f=e("uuid/v4");function m(e,t,n){if(t.toLowerCase().startsWith("0x")&&(t=t.slice(2)),!t&&!n)return t;if(n%2)throw new Error("Invalid length argument, must be an even number");if("number"==typeof n&&t.length!==n)throw new Error("Invalid "+e+", string must be "+n+" hex characters");if(!/^([0-9a-f]{2})+$/i.test(t))throw new Error("Invalid "+e+", string must be "+("number"==typeof n?n:"empty or a non-zero even number of")+" hex characters");return t}function p(e,n,r){if(!t.isBuffer(n))throw new Error("Invalid "+e+", must be a string ("+("number"==typeof r?""+2*r:"empty or a non-zero even number of")+" hex characters) or buffer"+("number"==typeof r?" ("+r+" bytes)":""));if("number"==typeof r&&n.length!==r)throw new Error("Invalid "+e+", buffer must be "+r+" bytes");return n}var g=function(){function e(e,t){if(void 0===t&&(t=undefined),this.privateKey=e,this.publicKey=t,e&&t)throw new Error("Cannot supply both a private and a public key to the constructor");if(e&&!o.isValidPrivate(e))throw new Error("Private key does not satisfy the curve requirements (ie. it is invalid)");if(t&&!o.isValidPublic(t))throw new Error("Invalid public key")}return e.generate=function(t){if(void 0===t&&(t=!1),!t)return new e(h(32));for(var n=new o.BN("088f924eeceeda7fe92e1f5b0fffffffffffffff",16);;){var r=h(32);if(new o.BN(o.privateToAddress(r)).lte(n))return new e(r)}},e.generateVanityAddress=function(t){for(t instanceof RegExp||(t=new RegExp(t));;){var n=h(32),r=o.privateToAddress(n);if(t.test(r.toString("hex")))return new e(n)}},e.fromPublicKey=function(t,n){return void 0===n&&(n=!1),n&&(t=o.importPublic(t)),new e(undefined,t)},e.fromExtendedPublicKey=function(t){if("xpub"!==t.slice(0,4))throw new Error("Not an extended public key");var n=d.decode(t).slice(45);return e.fromPublicKey(n,!0)},e.fromPrivateKey=function(t){return new e(t)},e.fromExtendedPrivateKey=function(t){if("xprv"!==t.slice(0,4))throw new Error("Not an extended private key");var n=d.decode(t);if(0!==n[45])throw new Error("Invalid extended private key");return e.fromPrivateKey(n.slice(46))},e.fromV1=function(n,r){return i(this,void 0,void 0,(function(){var i,c,l,d,h;return s(this,(function(s){switch(s.label){case 0:if("1"!==(i="object"==typeof n?n:JSON.parse(n)).Version)throw new Error("Not a V1 Wallet");if("scrypt"!==i.Crypto.KeyHeader.Kdf)throw new Error("Unsupported key derivation scheme");return c=i.Crypto.KeyHeader.KdfParams,[4,u.scrypt(t.from(r),t.from(i.Crypto.Salt,"hex"),c.N,c.R,c.P,c.DkLen)];case 1:if(l=s.sent(),d=t.from(i.Crypto.CipherText,"hex"),o.keccak256(t.concat([l.slice(16,32),d])).toString("hex")!==i.Crypto.MAC)throw new Error("Key derivation failed - possibly wrong passphrase");return h=a.createDecipheriv("aes-128-cbc",o.keccak256(l.slice(0,16)).slice(0,16),t.from(i.Crypto.IV,"hex")),[2,new e(b(h,d))]}}))}))},e.fromV3=function(n,r,c){return void 0===c&&(c=!1),i(this,void 0,void 0,(function(){var i,l,d,h,f;return s(this,(function(s){switch(s.label){case 0:if(3!==(i="object"==typeof n?n:JSON.parse(c?n.toLowerCase():n)).version)throw new Error("Not a V3 wallet");return"scrypt"!==i.crypto.kdf?[3,2]:(d=i.crypto.kdfparams,[4,u.scrypt(t.from(r),t.from(d.salt,"hex"),d.n,d.r,d.p,d.dklen)]);case 1:return l=s.sent(),[3,3];case 2:if("pbkdf2"!==i.crypto.kdf)throw new Error("Unsupported key derivation scheme");if("hmac-sha256"!==(d=i.crypto.kdfparams).prf)throw new Error("Unsupported parameters to PBKDF2");l=a.pbkdf2Sync(t.from(r),t.from(d.salt,"hex"),d.c,d.dklen,"sha256"),s.label=3;case 3:if(h=t.from(i.crypto.ciphertext,"hex"),o.keccak256(t.concat([t.from(l.slice(16,32)),h])).toString("hex")!==i.crypto.mac)throw new Error("Key derivation failed - possibly wrong passphrase");return f=a.createDecipheriv(i.crypto.cipher,l.slice(0,16),t.from(i.crypto.cipherparams.iv,"hex")),[2,new e(b(f,h))]}}))}))},e.fromEthSale=function(n,r){var i="object"==typeof n?n:JSON.parse(n),s=t.from(i.encseed,"hex"),u=a.pbkdf2Sync(r,r,2e3,32,"sha256").slice(0,16),c=b(a.createDecipheriv("aes-128-cbc",u,s.slice(0,16)),s.slice(16)),l=new e(o.keccak256(c));if(l.getAddress().toString("hex")!==i.ethaddr)throw new Error("Decoded key mismatch - possibly wrong passphrase");return l},Object.defineProperty(e.prototype,"pubKey",{get:function(){return y(this.publicKey)||(this.publicKey=o.privateToPublic(this.privateKey)),this.publicKey},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"privKey",{get:function(){if(!y(this.privateKey))throw new Error("This is a public key only wallet");return this.privateKey},enumerable:!1,configurable:!0}),e.prototype.getPrivateKey=function(){return this.privKey},e.prototype.getPrivateKeyString=function(){return o.bufferToHex(this.privKey)},e.prototype.getPublicKey=function(){return this.pubKey},e.prototype.getPublicKeyString=function(){return o.bufferToHex(this.getPublicKey())},e.prototype.getAddress=function(){return o.publicToAddress(this.pubKey)},e.prototype.getAddressString=function(){return o.bufferToHex(this.getAddress())},e.prototype.getChecksumAddressString=function(){return o.toChecksumAddress(this.getAddressString())},e.prototype.toV3=function(e,n){return i(this,void 0,void 0,(function(){var i,c,l,d,g,v;return s(this,(function(s){switch(s.label){case 0:if(!y(this.privateKey))throw new Error("This is a public key only wallet");switch(w=n,_={cipher:"aes-128-ctr",kdf:"scrypt",salt:h(32),iv:h(16),uuid:h(16),dklen:32,c:262144,n:262144,r:8,p:1},i=w?("string"==typeof w.salt&&(w.salt=t.from(m("salt",w.salt),"hex")),"string"==typeof w.iv&&(w.iv=t.from(m("iv",w.iv,32),"hex")),"string"==typeof w.uuid&&(w.uuid=t.from(m("uuid",w.uuid,32),"hex")),w.salt&&p("salt",w.salt),w.iv&&p("iv",w.iv,16),w.uuid&&p("uuid",w.uuid,16),r(r({},_),w)):_,i.kdf){case"pbkdf2":return[3,1];case"scrypt":return[3,2]}return[3,4];case 1:return c=function(e){return{dklen:e.dklen,salt:e.salt,c:e.c,prf:"hmac-sha256"}}(i),l=a.pbkdf2Sync(t.from(e),c.salt,c.c,c.dklen,"sha256"),[3,5];case 2:return c=function(e){return{dklen:e.dklen,salt:e.salt,n:e.n,r:e.r,p:e.p}}(i),[4,u.scrypt(t.from(e),c.salt,c.n,c.r,c.p,c.dklen)];case 3:return l=s.sent(),[3,5];case 4:throw new Error("Unsupported kdf");case 5:if(!(d=a.createCipheriv(i.cipher,l.slice(0,16),i.iv)))throw new Error("Unsupported cipher");return g=b(d,this.privKey),v=o.keccak256(t.concat([t.from(l.slice(16,32)),t.from(g)])),[2,{version:3,id:f({random:i.uuid}),address:this.getAddress().toString("hex"),crypto:{ciphertext:g.toString("hex"),cipherparams:{iv:i.iv.toString("hex")},cipher:i.cipher,kdf:i.kdf,kdfparams:r(r({},c),{salt:c.salt.toString("hex")}),mac:v.toString("hex")}}]}var w,_}))}))},e.prototype.getV3Filename=function(e){return["UTC--",(e?new Date(e):new Date).toJSON().replace(/:/g,"-"),"--",this.getAddress().toString("hex")].join("")},e.prototype.toV3String=function(e,t){return i(this,void 0,void 0,(function(){var n,r;return s(this,(function(i){switch(i.label){case 0:return r=(n=JSON).stringify,[4,this.toV3(e,t)];case 1:return[2,r.apply(n,[i.sent()])]}}))}))},e}();function b(e,n){return t.concat([e.update(n),e.final()])}function y(e){return e!==undefined&&null!==e}n.default=g}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"ethereumjs-wallet",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/ethereumjs-wallet/dist/index.js"}],[1401,{"../../constants":1408,"@metamask/metamask-eth-abis":1228},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{u(r.next(e))}catch(e){s(e)}}function o(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.ERC20Standard=void 0;const i=e("@metamask/metamask-eth-abis"),s=e("../../constants");n.ERC20Standard=class{constructor(e){this.web3=e}getBalanceOf(e,t){return r(this,void 0,void 0,(function*(){const n=this.web3.eth.contract(i.abiERC20).at(e);return new Promise(((e,r)=>{n.balanceOf(t,((t,n)=>{t?r(t):e(n)}))}))}))}getTokenDecimals(e){return r(this,void 0,void 0,(function*(){const t=this.web3.eth.contract(i.abiERC20).at(e);return new Promise(((e,n)=>{t.decimals(((t,r)=>{t?n(t):e(r)}))}))}))}getTokenSymbol(e){return r(this,void 0,void 0,(function*(){const t=this.web3.eth.contract(i.abiERC20).at(e);return new Promise(((e,n)=>{t.symbol(((t,r)=>{t?n(t):e(r)}))}))}))}getDetails(e,t){return r(this,void 0,void 0,(function*(){const[n,r]=yield Promise.all([this.getTokenDecimals(e),this.getTokenSymbol(e)]);let i;return t&&(i=yield this.getBalanceOf(e,t)),{decimals:n,symbol:r,balance:i,standard:s.ERC20}}))}}}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/assets/Standards/ERC20Standard.js"}],[1400,{"../../../../constants":1408,"../../../../util":1450,"@metamask/metamask-eth-abis":1228},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{u(r.next(e))}catch(e){s(e)}}function o(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.ERC721Standard=void 0;const i=e("@metamask/metamask-eth-abis"),s=e("../../../../util"),a=e("../../../../constants");n.ERC721Standard=class{constructor(e){this.contractSupportsMetadataInterface=e=>r(this,void 0,void 0,(function*(){return this.contractSupportsInterface(e,a.ERC721_METADATA_INTERFACE_ID)})),this.contractSupportsEnumerableInterface=e=>r(this,void 0,void 0,(function*(){return this.contractSupportsInterface(e,a.ERC721_ENUMERABLE_INTERFACE_ID)})),this.contractSupportsBase721Interface=e=>r(this,void 0,void 0,(function*(){return this.contractSupportsInterface(e,a.ERC721_INTERFACE_ID)})),this.getCollectibleTokenId=(e,t,n)=>r(this,void 0,void 0,(function*(){const r=this.web3.eth.contract(i.abiERC721).at(e);return new Promise(((e,i)=>{r.tokenOfOwnerByIndex(t,n,((t,n)=>{t?i(t):e(n)}))}))})),this.getTokenURI=(e,t)=>r(this,void 0,void 0,(function*(){const n=this.web3.eth.contract(i.abiERC721).at(e);if(!(yield this.contractSupportsMetadataInterface(e)))throw new Error("Contract does not support ERC721 metadata interface.");return new Promise(((e,r)=>{n.tokenURI(t,((t,n)=>{t?r(t):e(n)}))}))})),this.getAssetName=e=>r(this,void 0,void 0,(function*(){const t=this.web3.eth.contract(i.abiERC721).at(e);return new Promise(((e,n)=>{t.name(((t,r)=>{t?n(t):e(r)}))}))})),this.getAssetSymbol=e=>r(this,void 0,void 0,(function*(){const t=this.web3.eth.contract(i.abiERC721).at(e);return new Promise(((e,n)=>{t.symbol(((t,r)=>{t?n(t):e(r)}))}))})),this.contractSupportsInterface=(e,t)=>r(this,void 0,void 0,(function*(){const n=this.web3.eth.contract(i.abiERC721).at(e);return new Promise(((e,r)=>{n.supportsInterface(t,((t,n)=>{t?r(t):e(n)}))}))})),this.getDetails=(e,t,n)=>r(this,void 0,void 0,(function*(){const[r,i]=yield Promise.all([this.contractSupportsBase721Interface(e),this.contractSupportsMetadataInterface(e)]);let o,u,c,l;if(i&&([u,c]=yield Promise.all([this.getAssetSymbol(e),this.getAssetName(e)]),n)){o=yield this.getTokenURI(e,n),o.startsWith("ipfs://")&&(o=s.getFormattedIpfsUrl(t,o,!0));try{const e=yield s.timeoutFetch(o),n=yield e.json();l=null==n?void 0:n.image,(null==l?void 0:l.startsWith("ipfs://"))&&(l=s.getFormattedIpfsUrl(t,l,!0))}catch(e){}}if(r)return{standard:a.ERC721,tokenURI:o,symbol:u,name:c,image:l};throw new Error("This isn't a valid ERC721 contract")})),this.web3=e}getOwnerOf(e,t){return r(this,void 0,void 0,(function*(){const n=this.web3.eth.contract(i.abiERC721).at(e);return new Promise(((e,r)=>{n.ownerOf(t,((t,n)=>{t?r(t):e(n)}))}))}))}}}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/assets/Standards/CollectibleStandards/ERC721/ERC721Standard.js"}],[1399,{"../../../../constants":1408,"../../../../util":1450,"@metamask/metamask-eth-abis":1228},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{u(r.next(e))}catch(e){s(e)}}function o(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.ERC1155Standard=void 0;const i=e("@metamask/metamask-eth-abis"),s=e("../../../../constants"),a=e("../../../../util");n.ERC1155Standard=class{constructor(e){this.contractSupportsURIMetadataInterface=e=>r(this,void 0,void 0,(function*(){return this.contractSupportsInterface(e,s.ERC1155_METADATA_URI_INTERFACE_ID)})),this.contractSupportsTokenReceiverInterface=e=>r(this,void 0,void 0,(function*(){return this.contractSupportsInterface(e,s.ERC1155_TOKEN_RECEIVER_INTERFACE_ID)})),this.contractSupportsBase1155Interface=e=>r(this,void 0,void 0,(function*(){return this.contractSupportsInterface(e,s.ERC1155_INTERFACE_ID)})),this.getTokenURI=(e,t)=>r(this,void 0,void 0,(function*(){const n=this.web3.eth.contract(i.abiERC1155).at(e);return new Promise(((e,r)=>{n.uri(t,((t,n)=>{t?r(t):e(n)}))}))})),this.getBalanceOf=(e,t,n)=>r(this,void 0,void 0,(function*(){const r=this.web3.eth.contract(i.abiERC1155).at(e);return new Promise(((e,i)=>{r.balanceOf(t,n,((t,n)=>{t?i(t):e(n)}))}))})),this.transferSingle=(e,t,n,s,a)=>r(this,void 0,void 0,(function*(){const r=this.web3.eth.contract(i.abiERC1155).at(e);return new Promise(((i,o)=>{r.transferSingle(e,t,n,s,a,((e,t)=>{e?o(e):i(t)}))}))})),this.contractSupportsInterface=(e,t)=>r(this,void 0,void 0,(function*(){const n=this.web3.eth.contract(i.abiERC1155).at(e);return new Promise(((e,r)=>{n.supportsInterface(t,((t,n)=>{t?r(t):e(n)}))}))})),this.getDetails=(e,t,n)=>r(this,void 0,void 0,(function*(){const r=yield this.contractSupportsBase1155Interface(e);let i,o;if(n){i=yield this.getTokenURI(e,n),i.startsWith("ipfs://")&&(i=a.getFormattedIpfsUrl(t,i,!0));try{const e=yield a.timeoutFetch(i),n=yield e.json();o=null==n?void 0:n.image,(null==o?void 0:o.startsWith("ipfs://"))&&(o=a.getFormattedIpfsUrl(t,o,!0))}catch(e){}}if(r)return{standard:s.ERC1155,tokenURI:i,image:o};throw new Error("This isn't a valid ERC1155 contract")})),this.web3=e}}}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/@metamask/controllers/dist/assets/Standards/CollectibleStandards/ERC1155/ERC1155Standard.js"}],[1477,{"./abi":1476,"./registry-map.json":1478,ethjs:1493},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("ethjs"),i=e("./registry-map.json"),s=e("./abi");t.exports=class{constructor(e={}){this.provider=e.provider||new r.HttpProvider("https://mainnet.infura.io/eth-contract-registry"),this.eth=new r(this.provider);const t=i[e.network||"1"];if(!t)throw new Error("No method registry found on the requested network.");this.registry=this.eth.contract(s).at(t)}async lookup(e){return(await this.registry.entries(e))[0]}parse(e){let t=e.match(/^.+(?=\()/);t=t?t[0].charAt(0).toUpperCase()+t[0].slice(1).split(/(?=[A-Z])/).join(" "):"";const n=e.match(/\(.+\)/);let r=[];return n&&(r=n[0].slice(1,-1).split(",").map((e=>({type:e})))),{name:t,args:r}}}}}},{package:"eth-method-registry",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/eth-method-registry/index.js"}],[1205,{"./_wordlists":1204,buffer:2478,"create-hash":2586,pbkdf2:1216,randombytes:6261},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0});const r=e("create-hash"),i=e("pbkdf2"),s=e("randombytes"),a=e("./_wordlists");let o=a._default;const u="Invalid mnemonic",c="Invalid entropy",l="A wordlist is required but a default could not be found.\n"+"Please pass a 2048 word array explicitly.";function d(e){return(e||"").normalize("NFKD")}function h(e,t,n){for(;e.length<n;)e=t+e;return e}function f(e){return parseInt(e,2)}function m(e){return e.map((e=>h(e.toString(2),"0",8))).join("")}function p(e){const t=8*e.length/32,n=r("sha256").update(e).digest();return m(Array.from(n)).slice(0,t)}function g(e){return"mnemonic"+(e||"")}function b(e,n){if(!(n=n||o))throw new Error(l);const r=d(e).split(" ");if(r.length%3!=0)throw new Error(u);const i=r.map((e=>{const t=n.indexOf(e);if(-1===t)throw new Error(u);return h(t.toString(2),"0",11)})).join(""),s=32*Math.floor(i.length/33),a=i.slice(0,s),m=i.slice(s),g=a.match(/(.{1,8})/g).map(f);if(g.length<16)throw new Error(c);if(g.length>32)throw new Error(c);if(g.length%4!=0)throw new Error(c);const b=t.from(g);if(p(b)!==m)throw new Error("Invalid mnemonic checksum");return b.toString("hex")}function y(e,n){if(t.isBuffer(e)||(e=t.from(e,"hex")),!(n=n||o))throw new Error(l);if(e.length<16)throw new TypeError(c);if(e.length>32)throw new TypeError(c);if(e.length%4!=0)throw new TypeError(c);const r=(m(Array.from(e))+p(e)).match(/(.{1,11})/g).map((e=>{const t=f(e);return n[t]}));return"あいこくしん"===n[0]?r.join("　"):r.join(" ")}n.mnemonicToSeedSync=function(e,n){const r=t.from(d(e),"utf8"),s=t.from(g(d(n)),"utf8");return i.pbkdf2Sync(r,s,2048,64,"sha512")},n.mnemonicToSeed=function(e,n){return Promise.resolve().then((()=>function(e,t,n,r,s){return Promise.resolve().then((()=>new Promise(((a,o)=>{i.pbkdf2(e,t,n,r,s,((e,t)=>e?o(e):a(t)))}))))}(t.from(d(e),"utf8"),t.from(g(d(n)),"utf8"),2048,64,"sha512")))},n.mnemonicToEntropy=b,n.entropyToMnemonic=y,n.generateMnemonic=function(e,t,n){if((e=e||128)%32!=0)throw new TypeError(c);return y((t=t||s)(e/8),n)},n.validateMnemonic=function(e,t){try{b(e,t)}catch(e){return!1}return!0},n.setDefaultWordlist=function(e){const t=a.wordlists[e];if(!t)throw new Error('Could not find wordlist for language "'+e+'"');o=t},n.getDefaultWordlist=function(){if(!o)throw new Error("No Default Wordlist set");return Object.keys(a.wordlists).filter((e=>"JA"!==e&&"EN"!==e&&a.wordlists[e].every(((e,t)=>e===o[t]))))[0]};var v=e("./_wordlists");n.wordlists=v.wordlists}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"bip39",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/key-tree/node_modules/bip39/src/index.js"}],[6887,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)r.call(n,i)&&(e[i]=n[i])}return e};var r=Object.prototype.hasOwnProperty}}},{package:"xtend",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/xtend/mutable.js"}],[5969,{"./forge":5964,"./util":5986},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./forge");e("./util"),r.mgf=r.mgf||{},(t.exports=r.mgf.mgf1=r.mgf1=r.mgf1||{}).create=function(e){return{generate:function(t,n){for(var i=new r.util.ByteBuffer,s=Math.ceil(n/e.digestLength),a=0;a<s;a++){var o=new r.util.ByteBuffer;o.putInt32(a),e.start(),e.update(t+o.getBytes()),i.putBuffer(e.digest())}return i.truncate(i.length()-n),i.getBytes()}}}}}},{package:"node-forge",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/node-forge/lib/mgf1.js"}],[5616,{"./blake":5614,"./crypto-sha1-2":5615,"./utils":5618,buffer:2478,"js-sha3":5411,murmurhash3js:5949},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){const r=e("js-sha3"),i=e("murmurhash3js"),s=e("./utils"),a=e("./crypto-sha1-2"),o=s.toCallback,u=s.toBuf,c=s.fromString,l=s.fromNumberTo32BitBuf;t.exports={sha1:a.sha1,sha2256:a.sha2256,sha2512:a.sha2512,sha3512:o(u(r.sha3_512)),sha3384:o(u(r.sha3_384)),sha3256:o(u(r.sha3_256)),sha3224:o(u(r.sha3_224)),shake128:o(u(r.shake_128,128)),shake256:o(u(r.shake_256,256)),keccak224:o(u(r.keccak_224)),keccak256:o(u(r.keccak_256)),keccak384:o(u(r.keccak_384)),keccak512:o(u(r.keccak_512)),murmur3128:o(u(c(i.x64.hash128))),murmur332:o(l(c(i.x86.hash32))),addBlake:e("./blake"),dblSha2256:(e,t)=>{a.sha2256(e,((e,r)=>{e&&t(e),a.sha2256(n.from(r),t)}))}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"multihashing-async",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/libp2p-record/node_modules/multihashing-async/src/crypto.js"}],[5631,{"./blake":5629,"./crypto-sha1-2":5630,"./utils":5633,buffer:2478,"js-sha3":5411,murmurhash3js:5949},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){const r=e("js-sha3"),i=e("murmurhash3js"),s=e("./utils"),a=e("./crypto-sha1-2"),o=s.toCallback,u=s.toBuf,c=s.fromString,l=s.fromNumberTo32BitBuf;t.exports={sha1:a.sha1,sha2256:a.sha2256,sha2512:a.sha2512,sha3512:o(u(r.sha3_512)),sha3384:o(u(r.sha3_384)),sha3256:o(u(r.sha3_256)),sha3224:o(u(r.sha3_224)),shake128:o(u(r.shake_128,128)),shake256:o(u(r.shake_256,256)),keccak224:o(u(r.keccak_224)),keccak256:o(u(r.keccak_256)),keccak384:o(u(r.keccak_384)),keccak512:o(u(r.keccak_512)),murmur3128:o(u(c(i.x64.hash128))),murmur332:o(l(c(i.x86.hash32))),addBlake:e("./blake"),dblSha2256:(e,t)=>{a.sha2256(e,((e,r)=>{e&&t(e),a.sha2256(n.from(r),t)}))}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"multihashing-async",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/libp2p-secio/node_modules/multihashing-async/src/crypto.js"}],[5067,{"./lib/heap":5068},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=e("./lib/heap")}}},{package:"heap",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/heap/index.js"}],[6569,{"./lib/bytesToUuid":6567,"./lib/rng":6568},function(){with(this)return function(){"use strict";return function(e,t,n){var r,i,s=e("./lib/rng"),a=e("./lib/bytesToUuid"),o=0,u=0;t.exports=function(e,t,n){var c=t&&n||0,l=t||[],d=(e=e||{}).node||r,h=e.clockseq!==undefined?e.clockseq:i;if(null==d||null==h){var f=s();null==d&&(d=r=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==h&&(h=i=16383&(f[6]<<8|f[7]))}var m=e.msecs!==undefined?e.msecs:(new Date).getTime(),p=e.nsecs!==undefined?e.nsecs:u+1,g=m-o+(p-u)/1e4;if(g<0&&e.clockseq===undefined&&(h=h+1&16383),(g<0||m>o)&&e.nsecs===undefined&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");o=m,u=p,i=h;var b=(1e4*(268435455&(m+=122192928e5))+p)%4294967296;l[c++]=b>>>24&255,l[c++]=b>>>16&255,l[c++]=b>>>8&255,l[c++]=255&b;var y=m/4294967296*1e4&268435455;l[c++]=y>>>8&255,l[c++]=255&y,l[c++]=y>>>24&15|16,l[c++]=y>>>16&255,l[c++]=h>>>8|128,l[c++]=255&h;for(var v=0;v<6;++v)l[c+v]=d[v];return t||a(l)}}}},{package:"uuid",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/socket.io-pull-stream/node_modules/uuid/v1.js"}],[6570,{"./lib/bytesToUuid":6567,"./lib/rng":6568},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./lib/rng"),i=e("./lib/bytesToUuid");t.exports=function(e,t,n){var s=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var o=0;o<16;++o)t[s+o]=a[o];return t||i(a)}}}},{package:"uuid",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/socket.io-pull-stream/node_modules/uuid/v4.js"}],[6565,{ms:5899},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(t){function n(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){var t;function a(){if(a.enabled){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var s=a,o=Number(new Date),u=o-(t||o);s.diff=u,s.prev=t,s.curr=o,t=o,n[0]=r.coerce(n[0]),"string"!=typeof n[0]&&n.unshift("%O");var c=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,(function(e,t){if("%%"===e)return e;c++;var i=r.formatters[t];if("function"==typeof i){var a=n[c];e=i.call(s,a),n.splice(c,1),c--}return e})),r.formatArgs.call(s,n);var l=s.log||r.log;l.apply(s,n)}}return a.namespace=e,a.enabled=r.enabled(e),a.useColors=r.useColors(),a.color=n(e),a.destroy=i,a.extend=s,"function"==typeof r.init&&r.init(a),r.instances.push(a),a}function i(){var e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function s(e,t){return r(this.namespace+(void 0===t?":":t)+e)}return r.debug=r,r.default=r,r.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},r.disable=function(){r.enable("")},r.enable=function(e){var t;r.save(e),r.names=[],r.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){var s=r.instances[t];s.enabled=r.enabled(s.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=e("ms"),Object.keys(t).forEach((function(e){r[e]=t[e]})),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=n,r.enable(r.load()),r}}}},{package:"debug",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/socket.io-pull-stream/node_modules/debug/src/common.js"}],[6563,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r=1e3,i=60*r,s=60*i,a=24*s,o=365.25*a;function u(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}t.exports=function(e,t){t=t||{};var n,c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*o;case"days":case"day":case"d":return n*a;case"hours":case"hour":case"hrs":case"hr":case"h":return n*s;case"minutes":case"minute":case"mins":case"min":case"m":return n*i;case"seconds":case"second":case"secs":case"sec":case"s":return n*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return undefined}}(e);if("number"===c&&!1===isNaN(e))return t.long?u(n=e,a,"day")||u(n,s,"hour")||u(n,i,"minute")||u(n,r,"second")||n+" ms":function(e){if(e>=a)return Math.round(e/a)+"d";if(e>=s)return Math.round(e/s)+"h";if(e>=i)return Math.round(e/i)+"m";if(e>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}}}},{package:"ms",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/socket.io-parser/node_modules/ms/index.js"}],[3028,{},function(){with(this)return function(){"use strict";return function(e,t,n){
/*! https://mths.be/utf8js v2.1.2 by @mathias */
var r,i,s,a=String.fromCharCode;function o(e){for(var t,n,r=[],i=0,s=e.length;i<s;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<s?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function u(e,t){if(e>=55296&&e<=57343){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function c(e,t){return a(e>>t&63|128)}function l(e,t){if(0==(4294967168&e))return a(e);var n="";return 0==(4294965248&e)?n=a(e>>6&31|192):0==(4294901760&e)?(u(e,t)||(e=65533),n=a(e>>12&15|224),n+=c(e,6)):0==(4292870144&e)&&(n=a(e>>18&7|240),n+=c(e,12),n+=c(e,6)),n+=a(63&e|128)}function d(){if(s>=i)throw Error("Invalid byte index");var e=255&r[s];if(s++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function h(e){var t,n;if(s>i)throw Error("Invalid byte index");if(s==i)return!1;if(t=255&r[s],s++,0==(128&t))return t;if(192==(224&t)){if((n=(31&t)<<6|d())>=128)return n;throw Error("Invalid continuation byte")}if(224==(240&t)){if((n=(15&t)<<12|d()<<6|d())>=2048)return u(n,e)?n:65533;throw Error("Invalid continuation byte")}if(240==(248&t)&&(n=(7&t)<<18|d()<<12|d()<<6|d())>=65536&&n<=1114111)return n;throw Error("Invalid UTF-8 detected")}t.exports={version:"2.1.2",encode:function(e,t){for(var n=!1!==(t=t||{}).strict,r=o(e),i=r.length,s=-1,a="";++s<i;)a+=l(r[s],n);return a},decode:function(e,t){var n=!1!==(t=t||{}).strict;r=o(e),i=r.length,s=0;for(var u,c=[];!1!==(u=h(n));)c.push(u);return function(e){for(var t,n=e.length,r=-1,i="";++r<n;)(t=e[r])>65535&&(i+=a((t-=65536)>>>10&1023|55296),t=56320|1023&t),i+=a(t);return i}(c)}}}}},{package:"engine.io-parser",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/engine.io-parser/lib/utf8.js"}],[3027,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var r in e)n.call(e,r)&&t.push(r);return t}}}},{package:"engine.io-parser",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/engine.io-parser/lib/keys.js"}],[2431,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r=void 0!==r?r:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,i=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),s=i&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),a=r&&r.prototype.append&&r.prototype.getBlob;function o(e){return e.map((function(e){if(e.buffer instanceof ArrayBuffer){var t=e.buffer;if(e.byteLength!==t.byteLength){var n=new Uint8Array(e.byteLength);n.set(new Uint8Array(t,e.byteOffset,e.byteLength)),t=n.buffer}return t}return e}))}function u(e,t){t=t||{};var n=new r;return o(e).forEach((function(e){n.append(e)})),t.type?n.getBlob(t.type):n.getBlob()}function c(e,t){return new Blob(o(e),t||{})}"undefined"!=typeof Blob&&(u.prototype=Blob.prototype,c.prototype=Blob.prototype),t.exports=i?s?Blob:c:a?u:undefined}}},{package:"blob",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/blob/index.js"}],[2064,{},function(){with(this)return function(){"use strict";return function(e,t,n){function r(){}t.exports=function(e,t,n){var i=!1;return n=n||r,s.count=e,0===e?t():s;function s(e,r){if(s.count<=0)throw new Error("after called too many times");--s.count,e?(i=!0,t(e),t=n):0!==s.count||i||t(null,r)}}}}},{package:"after",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/after/index.js"}],[2070,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e,t,n){var r=e.byteLength;if(t=t||0,n=n||r,e.slice)return e.slice(t,n);if(t<0&&(t+=r),n<0&&(n+=r),n>r&&(n=r),t>=r||t>=n||0===r)return new ArrayBuffer(0);for(var i=new Uint8Array(e),s=new Uint8Array(n-t),a=t,o=0;a<n;a++,o++)s[o]=i[a];return s.buffer}}}},{package:"arraybuffer.slice",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/arraybuffer.slice/index.js"}],[2341,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r;r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n.encode=function(e){var t,n=new Uint8Array(e),i=n.length,s="";for(t=0;t<i;t+=3)s+=r[n[t]>>2],s+=r[(3&n[t])<<4|n[t+1]>>4],s+=r[(15&n[t+1])<<2|n[t+2]>>6],s+=r[63&n[t+2]];return i%3==2?s=s.substring(0,s.length-1)+"=":i%3==1&&(s=s.substring(0,s.length-2)+"=="),s},n.decode=function(e){var t,n,i,s,a,o=.75*e.length,u=e.length,c=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var l=new ArrayBuffer(o),d=new Uint8Array(l);for(t=0;t<u;t+=4)n=r.indexOf(e[t]),i=r.indexOf(e[t+1]),s=r.indexOf(e[t+2]),a=r.indexOf(e[t+3]),d[c++]=n<<2|i>>4,d[c++]=(15&i)<<4|s>>2,d[c++]=(3&s)<<6|63&a;return l}}}},{package:"base64-arraybuffer",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/base64-arraybuffer/lib/base64-arraybuffer.js"}],[3016,{"component-emitter":2549,"engine.io-parser":3026},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("engine.io-parser"),i=e("component-emitter");function s(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.isReactNative=e.isReactNative,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}t.exports=s,i(s.prototype),s.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},s.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},s.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},s.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},s.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},s.prototype.onData=function(e){var t=r.decodePacket(e,this.socket.binaryType);this.onPacket(t)},s.prototype.onPacket=function(e){this.emit("packet",e)},s.prototype.onClose=function(){this.readyState="closed",this.emit("close")}}}},{package:"engine.io-client",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/engine.io-client/lib/transport.js"}],[3023,{"./debug":3024,_process:6127},function(){with(this)return function(){"use strict";return function(e,t,n){(function(r){(function(){function i(){var e;try{e=n.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}(n=t.exports=e("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},n.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,s=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(i++,"%c"===e&&(s=i))})),e.splice(s,0,r)},n.save=function(e){try{null==e?n.storage.removeItem("debug"):n.storage.debug=e}catch(e){}},n.load=i,n.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},n.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],n.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},n.enable(i())}).call(this)}).call(this,e("_process"))}}},{package:"debug",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/engine.io-client/node_modules/debug/src/browser.js"}],[3017,{"./polling-jsonp":3018,"./polling-xhr":3019,"./websocket":3021,"xmlhttprequest-ssl":3022},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("xmlhttprequest-ssl"),i=e("./polling-xhr"),s=e("./polling-jsonp"),a=e("./websocket");n.polling=function(e){var t=!1,n=!1,a=!1!==e.jsonp;if("undefined"!=typeof location){var o="https:"===location.protocol,u=location.port;u||(u=o?443:80),t=e.hostname!==location.hostname||u!==e.port,n=e.secure!==o}if(e.xdomain=t,e.xscheme=n,"open"in new r(e)&&!e.forceJSONP)return new i(e);if(!a)throw new Error("JSONP disabled");return new s(e)},n.websocket=a}}},{package:"engine.io-client",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/engine.io-client/lib/transports/index.js"}],[5609,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports="\nmessage RPC {\n  repeated SubOpts subscriptions = 1;\n  repeated Message msgs = 2;\n\n  message SubOpts {\n    optional bool subscribe = 1; // subscribe or unsubcribe\n    optional string topicID = 2;\n  }\n\n  message Message {\n    optional bytes from = 1;\n    optional bytes data = 2;\n    optional bytes seqno = 3;\n    repeated string topicIDs = 4;\n    optional bytes signature = 5;\n    optional bytes key = 6;\n  }\n}"}}},{package:"libp2p-pubsub",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/libp2p-pubsub/src/message/rpc.proto.js"}],[5611,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports="\n// topicCID = cid(merkledag_protobuf(topicDescriptor)); (not the topic.name)\nmessage TopicDescriptor {\n  optional string name = 1;\n  optional AuthOpts auth = 2;\n  optional EncOpts enc = 2;\n\n  message AuthOpts {\n    optional AuthMode mode = 1;\n    repeated bytes keys = 2; // root keys to trust\n\n    enum AuthMode {\n      NONE = 0; // no authentication, anyone can publish\n      KEY = 1; // only messages signed by keys in the topic descriptor are accepted\n      WOT = 2; // web of trust, certificates can allow publisher set to grow\n    }\n  }\n\n  message EncOpts {\n    optional EncMode mode = 1;\n    repeated bytes keyHashes = 2; // the hashes of the shared keys used (salted)\n\n    enum EncMode {\n      NONE = 0; // no encryption, anyone can read\n      SHAREDKEY = 1; // messages are encrypted with shared key\n      WOT = 2; // web of trust, certificates can allow publisher set to grow\n    }\n  }\n}"}}},{package:"libp2p-pubsub",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/libp2p-pubsub/src/message/topic-descriptor.proto.js"}],[5696,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r="Expected a function",i=0/0,s=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt,l="object"==typeof global&&global&&global.Object===Object&&global,d="object"==typeof self&&self&&self.Object===Object&&self,h=l||d||Function("return this")(),f=Object.prototype.toString,m=Math.max,p=Math.min,g=function(){return h.Date.now()};function b(e,t,n){var i,s,a,o,u,c,l=0,d=!1,h=!1,f=!0;if("function"!=typeof e)throw new TypeError(r);function b(t){var n=i,r=s;return i=s=undefined,l=t,o=e.apply(r,n)}function w(e){return l=e,u=setTimeout(k,t),d?b(e):o}function _(e){var n=e-c;return c===undefined||n>=t||n<0||h&&e-l>=a}function k(){var e=g();if(_(e))return E(e);u=setTimeout(k,function(e){var n=t-(e-c);return h?p(n,a-(e-l)):n}(e))}function E(e){return u=undefined,f&&i?b(e):(i=s=undefined,o)}function S(){var e=g(),n=_(e);if(i=arguments,s=this,c=e,n){if(u===undefined)return w(c);if(h)return u=setTimeout(k,t),b(c)}return u===undefined&&(u=setTimeout(k,t)),o}return t=v(t)||0,y(n)&&(d=!!n.leading,a=(h="maxWait"in n)?m(v(n.maxWait)||0,t):a,f="trailing"in n?!!n.trailing:f),S.cancel=function(){u!==undefined&&clearTimeout(u),l=0,i=c=s=u=undefined},S.flush=function(){return u===undefined?o:E(g())},S}function y(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function v(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==f.call(e)}(e))return i;if(y(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=y(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var n=o.test(e);return n||u.test(e)?c(e.slice(2),n?2:8):a.test(e)?i:+e}t.exports=function(e,t,n){var i=!0,s=!0;if("function"!=typeof e)throw new TypeError(r);return y(n)&&(i="leading"in n?!!n.leading:i,s="trailing"in n?!!n.trailing:s),b(e,t,{leading:i,maxWait:t,trailing:s})}}}},{package:"lodash.throttle",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/lodash.throttle/index.js"}],[5474,{ms:5475},function(){with(this)return function(){"use strict";return function(e,t,n){var r;function i(e){function t(){if(t.enabled){var e=t,i=+new Date,s=i-(r||i);e.diff=s,e.prev=r,e.curr=i,r=i;for(var a=new Array(arguments.length),o=0;o<a.length;o++)a[o]=arguments[o];a[0]=n.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var u=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,(function(t,r){if("%%"===t)return t;u++;var i=n.formatters[r];if("function"==typeof i){var s=a[u];t=i.call(e,s),a.splice(u,1),u--}return t})),n.formatArgs.call(e,a);var c=t.log||n.log||console.log.bind(console);c.apply(e,a)}}return t.namespace=e,t.enabled=n.enabled(e),t.useColors=n.useColors(),t.color=function(e){var t,r=0;for(t in e)r=(r<<5)-r+e.charCodeAt(t),r|=0;return n.colors[Math.abs(r)%n.colors.length]}(e),"function"==typeof n.init&&n.init(t),t}(n=t.exports=i.debug=i.default=i).coerce=function(e){return e instanceof Error?e.stack||e.message:e},n.disable=function(){n.enable("")},n.enable=function(e){n.save(e),n.names=[],n.skips=[];for(var t=("string"==typeof e?e:"").split(/[\s,]+/),r=t.length,i=0;i<r;i++)t[i]&&("-"===(e=t[i].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))},n.enabled=function(e){var t,r;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=e("ms"),n.names=[],n.skips=[],n.formatters={}}}},{package:"debug",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/latency-monitor/node_modules/debug/src/debug.js"}],[6445,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(){return Date.now()}}}},{package:"retimer",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/retimer/time-browser.js"}],[5935,{_process:6127},function(){with(this)return function(){"use strict";return function(e,t,n){(function(e){(function(){var r;n=t.exports=h,r="object"==typeof e&&e.env&&e.env.NODE_DEBUG&&/\bsemver\b/i.test(e.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},n.SEMVER_SPEC_VERSION="2.0.0";var i=Number.MAX_SAFE_INTEGER||9007199254740991,s=n.re=[],a=n.src=[],o=n.tokens={},u=0;function c(e){o[e]=u++}c("NUMERICIDENTIFIER"),a[o.NUMERICIDENTIFIER]="0|[1-9]\\d*",c("NUMERICIDENTIFIERLOOSE"),a[o.NUMERICIDENTIFIERLOOSE]="[0-9]+",c("NONNUMERICIDENTIFIER"),a[o.NONNUMERICIDENTIFIER]="\\d*[a-zA-Z-][a-zA-Z0-9-]*",c("MAINVERSION"),a[o.MAINVERSION]="("+a[o.NUMERICIDENTIFIER]+")\\."+"("+a[o.NUMERICIDENTIFIER]+")\\."+"("+a[o.NUMERICIDENTIFIER]+")",c("MAINVERSIONLOOSE"),a[o.MAINVERSIONLOOSE]="("+a[o.NUMERICIDENTIFIERLOOSE]+")\\."+"("+a[o.NUMERICIDENTIFIERLOOSE]+")\\."+"("+a[o.NUMERICIDENTIFIERLOOSE]+")",c("PRERELEASEIDENTIFIER"),a[o.PRERELEASEIDENTIFIER]="(?:"+a[o.NUMERICIDENTIFIER]+"|"+a[o.NONNUMERICIDENTIFIER]+")",c("PRERELEASEIDENTIFIERLOOSE"),a[o.PRERELEASEIDENTIFIERLOOSE]="(?:"+a[o.NUMERICIDENTIFIERLOOSE]+"|"+a[o.NONNUMERICIDENTIFIER]+")",c("PRERELEASE"),a[o.PRERELEASE]="(?:-("+a[o.PRERELEASEIDENTIFIER]+"(?:\\."+a[o.PRERELEASEIDENTIFIER]+")*))",c("PRERELEASELOOSE"),a[o.PRERELEASELOOSE]="(?:-?("+a[o.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+a[o.PRERELEASEIDENTIFIERLOOSE]+")*))",c("BUILDIDENTIFIER"),a[o.BUILDIDENTIFIER]="[0-9A-Za-z-]+",c("BUILD"),a[o.BUILD]="(?:\\+("+a[o.BUILDIDENTIFIER]+"(?:\\."+a[o.BUILDIDENTIFIER]+")*))",c("FULL"),c("FULLPLAIN"),a[o.FULLPLAIN]="v?"+a[o.MAINVERSION]+a[o.PRERELEASE]+"?"+a[o.BUILD]+"?",a[o.FULL]="^"+a[o.FULLPLAIN]+"$",c("LOOSEPLAIN"),a[o.LOOSEPLAIN]="[v=\\s]*"+a[o.MAINVERSIONLOOSE]+a[o.PRERELEASELOOSE]+"?"+a[o.BUILD]+"?",c("LOOSE"),a[o.LOOSE]="^"+a[o.LOOSEPLAIN]+"$",c("GTLT"),a[o.GTLT]="((?:<|>)?=?)",c("XRANGEIDENTIFIERLOOSE"),a[o.XRANGEIDENTIFIERLOOSE]=a[o.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*",c("XRANGEIDENTIFIER"),a[o.XRANGEIDENTIFIER]=a[o.NUMERICIDENTIFIER]+"|x|X|\\*",c("XRANGEPLAIN"),a[o.XRANGEPLAIN]="[v=\\s]*("+a[o.XRANGEIDENTIFIER]+")"+"(?:\\.("+a[o.XRANGEIDENTIFIER]+")"+"(?:\\.("+a[o.XRANGEIDENTIFIER]+")"+"(?:"+a[o.PRERELEASE]+")?"+a[o.BUILD]+"?"+")?)?",c("XRANGEPLAINLOOSE"),a[o.XRANGEPLAINLOOSE]="[v=\\s]*("+a[o.XRANGEIDENTIFIERLOOSE]+")"+"(?:\\.("+a[o.XRANGEIDENTIFIERLOOSE]+")"+"(?:\\.("+a[o.XRANGEIDENTIFIERLOOSE]+")"+"(?:"+a[o.PRERELEASELOOSE]+")?"+a[o.BUILD]+"?"+")?)?",c("XRANGE"),a[o.XRANGE]="^"+a[o.GTLT]+"\\s*"+a[o.XRANGEPLAIN]+"$",c("XRANGELOOSE"),a[o.XRANGELOOSE]="^"+a[o.GTLT]+"\\s*"+a[o.XRANGEPLAINLOOSE]+"$",c("COERCE"),a[o.COERCE]="(^|[^\\d])"+"(\\d{1,"+16+"})"+"(?:\\.(\\d{1,"+16+"}))?"+"(?:\\.(\\d{1,"+16+"}))?"+"(?:$|[^\\d])",c("COERCERTL"),s[o.COERCERTL]=new RegExp(a[o.COERCE],"g"),c("LONETILDE"),a[o.LONETILDE]="(?:~>?)",c("TILDETRIM"),a[o.TILDETRIM]="(\\s*)"+a[o.LONETILDE]+"\\s+",s[o.TILDETRIM]=new RegExp(a[o.TILDETRIM],"g");c("TILDE"),a[o.TILDE]="^"+a[o.LONETILDE]+a[o.XRANGEPLAIN]+"$",c("TILDELOOSE"),a[o.TILDELOOSE]="^"+a[o.LONETILDE]+a[o.XRANGEPLAINLOOSE]+"$",c("LONECARET"),a[o.LONECARET]="(?:\\^)",c("CARETTRIM"),a[o.CARETTRIM]="(\\s*)"+a[o.LONECARET]+"\\s+",s[o.CARETTRIM]=new RegExp(a[o.CARETTRIM],"g");c("CARET"),a[o.CARET]="^"+a[o.LONECARET]+a[o.XRANGEPLAIN]+"$",c("CARETLOOSE"),a[o.CARETLOOSE]="^"+a[o.LONECARET]+a[o.XRANGEPLAINLOOSE]+"$",c("COMPARATORLOOSE"),a[o.COMPARATORLOOSE]="^"+a[o.GTLT]+"\\s*("+a[o.LOOSEPLAIN]+")$|^$",c("COMPARATOR"),a[o.COMPARATOR]="^"+a[o.GTLT]+"\\s*("+a[o.FULLPLAIN]+")$|^$",c("COMPARATORTRIM"),a[o.COMPARATORTRIM]="(\\s*)"+a[o.GTLT]+"\\s*("+a[o.LOOSEPLAIN]+"|"+a[o.XRANGEPLAIN]+")",s[o.COMPARATORTRIM]=new RegExp(a[o.COMPARATORTRIM],"g");c("HYPHENRANGE"),a[o.HYPHENRANGE]="^\\s*("+a[o.XRANGEPLAIN]+")"+"\\s+-\\s+"+"("+a[o.XRANGEPLAIN]+")"+"\\s*$",c("HYPHENRANGELOOSE"),a[o.HYPHENRANGELOOSE]="^\\s*("+a[o.XRANGEPLAINLOOSE]+")"+"\\s+-\\s+"+"("+a[o.XRANGEPLAINLOOSE]+")"+"\\s*$",c("STAR"),a[o.STAR]="(<|>)?=?\\s*\\*";for(var l=0;l<u;l++)r(l,a[l]),s[l]||(s[l]=new RegExp(a[l]));function d(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof h)return e;if("string"!=typeof e)return null;if(e.length>256)return null;if(!(t.loose?s[o.LOOSE]:s[o.FULL]).test(e))return null;try{return new h(e,t)}catch(e){return null}}function h(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof h){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>256)throw new TypeError("version is longer than "+256+" characters");if(!(this instanceof h))return new h(e,t);r("SemVer",e,t),this.options=t,this.loose=!!t.loose;var n=e.trim().match(t.loose?s[o.LOOSE]:s[o.FULL]);if(!n)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<i)return t}return e})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}n.parse=d,n.valid=function(e,t){var n=d(e,t);return n?n.version:null},n.clean=function(e,t){var n=d(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},n.SemVer=h,h.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},h.prototype.toString=function(){return this.version},h.prototype.compare=function(e){return r("SemVer.compare",this.version,this.options,e),e instanceof h||(e=new h(e,this.options)),this.compareMain(e)||this.comparePre(e)},h.prototype.compareMain=function(e){return e instanceof h||(e=new h(e,this.options)),m(this.major,e.major)||m(this.minor,e.minor)||m(this.patch,e.patch)},h.prototype.comparePre=function(e){if(e instanceof h||(e=new h(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],i=e.prerelease[t];if(r("prerelease compare",t,n,i),n===undefined&&i===undefined)return 0;if(i===undefined)return 1;if(n===undefined)return-1;if(n!==i)return m(n,i)}while(++t)},h.prototype.compareBuild=function(e){e instanceof h||(e=new h(e,this.options));var t=0;do{var n=this.build[t],i=e.build[t];if(r("prerelease compare",t,n,i),n===undefined&&i===undefined)return 0;if(i===undefined)return 1;if(n===undefined)return-1;if(n!==i)return m(n,i)}while(++t)},h.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},n.inc=function(e,t,n,r){"string"==typeof n&&(r=n,n=undefined);try{return new h(e,n).inc(t,r).version}catch(e){return null}},n.diff=function(e,t){if(y(e,t))return null;var n=d(e),r=d(t),i="";if(n.prerelease.length||r.prerelease.length){i="pre";var s="prerelease"}for(var a in n)if(("major"===a||"minor"===a||"patch"===a)&&n[a]!==r[a])return i+a;return s},n.compareIdentifiers=m;var f=/^[0-9]+$/;function m(e,t){var n=f.test(e),r=f.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1}function p(e,t,n){return new h(e,n).compare(new h(t,n))}function g(e,t,n){return p(e,t,n)>0}function b(e,t,n){return p(e,t,n)<0}function y(e,t,n){return 0===p(e,t,n)}function v(e,t,n){return 0!==p(e,t,n)}function w(e,t,n){return p(e,t,n)>=0}function _(e,t,n){return p(e,t,n)<=0}function k(e,t,n,r){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return y(e,n,r);case"!=":return v(e,n,r);case">":return g(e,n,r);case">=":return w(e,n,r);case"<":return b(e,n,r);case"<=":return _(e,n,r);default:throw new TypeError("Invalid operator: "+t)}}function E(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof E){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof E))return new E(e,t);r("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===S?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}n.rcompareIdentifiers=function(e,t){return m(t,e)},n.major=function(e,t){return new h(e,t).major},n.minor=function(e,t){return new h(e,t).minor},n.patch=function(e,t){return new h(e,t).patch},n.compare=p,n.compareLoose=function(e,t){return p(e,t,!0)},n.compareBuild=function(e,t,n){var r=new h(e,n),i=new h(t,n);return r.compare(i)||r.compareBuild(i)},n.rcompare=function(e,t,n){return p(t,e,n)},n.sort=function(e,t){return e.sort((function(e,r){return n.compareBuild(e,r,t)}))},n.rsort=function(e,t){return e.sort((function(e,r){return n.compareBuild(r,e,t)}))},n.gt=g,n.lt=b,n.eq=y,n.neq=v,n.gte=w,n.lte=_,n.cmp=k,n.Comparator=E;var S={};function C(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof C)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new C(e.raw,t);if(e instanceof E)return new C(e.value,t);if(!(this instanceof C))return new C(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function x(e,t){for(var n=!0,r=e.slice(),i=r.pop();n&&r.length;)n=r.every((function(e){return i.intersects(e,t)})),i=r.pop();return n}function M(e){return!e||"x"===e.toLowerCase()||"*"===e}function R(e,t,n,r,i,s,a,o,u,c,l,d,h){return((t=M(n)?"":M(r)?">="+n+".0.0":M(i)?">="+n+"."+r+".0":">="+t)+" "+(o=M(u)?"":M(c)?"<"+(+u+1)+".0.0":M(l)?"<"+u+"."+(+c+1)+".0":d?"<="+u+"."+c+"."+l+"-"+d:"<="+o)).trim()}function T(e,t,n){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(i=0;i<e.length;i++)if(r(e[i].semver),e[i].semver!==S&&e[i].semver.prerelease.length>0){var s=e[i].semver;if(s.major===t.major&&s.minor===t.minor&&s.patch===t.patch)return!0}return!1}return!0}function A(e,t,n){try{t=new C(t,n)}catch(e){return!1}return t.test(e)}function P(e,t,n,r){var i,s,a,o,u;switch(e=new h(e,r),t=new C(t,r),n){case">":i=g,s=_,a=b,o=">",u=">=";break;case"<":i=b,s=w,a=g,o="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(A(e,t,r))return!1;for(var c=0;c<t.set.length;++c){var l=t.set[c],d=null,f=null;if(l.forEach((function(e){e.semver===S&&(e=new E(">=0.0.0")),d=d||e,f=f||e,i(e.semver,d.semver,r)?d=e:a(e.semver,f.semver,r)&&(f=e)})),d.operator===o||d.operator===u)return!1;if((!f.operator||f.operator===o)&&s(e,f.semver))return!1;if(f.operator===u&&a(e,f.semver))return!1}return!0}E.prototype.parse=function(e){var t=this.options.loose?s[o.COMPARATORLOOSE]:s[o.COMPARATOR],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=n[1]!==undefined?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new h(n[2],this.options.loose):this.semver=S},E.prototype.toString=function(){return this.value},E.prototype.test=function(e){if(r("Comparator.test",e,this.options.loose),this.semver===S||e===S)return!0;if("string"==typeof e)try{e=new h(e,this.options)}catch(e){return!1}return k(e,this.operator,this.semver,this.options)},E.prototype.intersects=function(e,t){if(!(e instanceof E))throw new TypeError("a Comparator is required");var n;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||(n=new C(e.value,t),A(this.value,n,t));if(""===e.operator)return""===e.value||(n=new C(this.value,t),A(e.semver,n,t));var r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),s=this.semver.version===e.semver.version,a=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),o=k(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),u=k(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||i||s&&a||o||u},n.Range=C,C.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},C.prototype.toString=function(){return this.range},C.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?s[o.HYPHENRANGELOOSE]:s[o.HYPHENRANGE];e=e.replace(n,R),r("hyphen replace",e),e=e.replace(s[o.COMPARATORTRIM],"$1$2$3"),r("comparator trim",e,s[o.COMPARATORTRIM]),e=(e=(e=e.replace(s[o.TILDETRIM],"$1~")).replace(s[o.CARETTRIM],"$1^")).split(/\s+/).join(" ");var i=t?s[o.COMPARATORLOOSE]:s[o.COMPARATOR],a=e.split(" ").map((function(e){return function(e,t){return r("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){r("caret",e,t);var n=t.loose?s[o.CARETLOOSE]:s[o.CARET];return e.replace(n,(function(t,n,i,s,a){var o;return r("caret",e,t,n,i,s,a),M(n)?o="":M(i)?o=">="+n+".0.0 <"+(+n+1)+".0.0":M(s)?o="0"===n?">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":">="+n+"."+i+".0 <"+(+n+1)+".0.0":a?(r("replaceCaret pr",a),o="0"===n?"0"===i?">="+n+"."+i+"."+s+"-"+a+" <"+n+"."+i+"."+(+s+1):">="+n+"."+i+"."+s+"-"+a+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+s+"-"+a+" <"+(+n+1)+".0.0"):(r("no pr"),o="0"===n?"0"===i?">="+n+"."+i+"."+s+" <"+n+"."+i+"."+(+s+1):">="+n+"."+i+"."+s+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+s+" <"+(+n+1)+".0.0"),r("caret return",o),o}))}(e,t)})).join(" ")}(e,t),r("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var n=t.loose?s[o.TILDELOOSE]:s[o.TILDE];return e.replace(n,(function(t,n,i,s,a){var o;return r("tilde",e,t,n,i,s,a),M(n)?o="":M(i)?o=">="+n+".0.0 <"+(+n+1)+".0.0":M(s)?o=">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":a?(r("replaceTilde pr",a),o=">="+n+"."+i+"."+s+"-"+a+" <"+n+"."+(+i+1)+".0"):o=">="+n+"."+i+"."+s+" <"+n+"."+(+i+1)+".0",r("tilde return",o),o}))}(e,t)})).join(" ")}(e,t),r("tildes",e),e=function(e,t){return r("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var n=t.loose?s[o.XRANGELOOSE]:s[o.XRANGE];return e.replace(n,(function(n,i,s,a,o,u){r("xRange",e,n,i,s,a,o,u);var c=M(s),l=c||M(a),d=l||M(o),h=d;return"="===i&&h&&(i=""),u=t.includePrerelease?"-0":"",c?n=">"===i||"<"===i?"<0.0.0-0":"*":i&&h?(l&&(a=0),o=0,">"===i?(i=">=",l?(s=+s+1,a=0,o=0):(a=+a+1,o=0)):"<="===i&&(i="<",l?s=+s+1:a=+a+1),n=i+s+"."+a+"."+o+u):l?n=">="+s+".0.0"+u+" <"+(+s+1)+".0.0"+u:d&&(n=">="+s+"."+a+".0"+u+" <"+s+"."+(+a+1)+".0"+u),r("xRange return",n),n}))}(e,t)})).join(" ")}(e,t),r("xrange",e),e=function(e,t){return r("replaceStars",e,t),e.trim().replace(s[o.STAR],"")}(e,t),r("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(a=a.filter((function(e){return!!e.match(i)}))),a=a.map((function(e){return new E(e,this.options)}),this)},C.prototype.intersects=function(e,t){if(!(e instanceof C))throw new TypeError("a Range is required");return this.set.some((function(n){return x(n,t)&&e.set.some((function(e){return x(e,t)&&n.every((function(n){return e.every((function(e){return n.intersects(e,t)}))}))}))}))},n.toComparators=function(e,t){return new C(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},C.prototype.test=function(e){if(!e)return!1;if("string"==typeof e)try{e=new h(e,this.options)}catch(e){return!1}for(var t=0;t<this.set.length;t++)if(T(this.set[t],e,this.options))return!0;return!1},n.satisfies=A,n.maxSatisfying=function(e,t,n){var r=null,i=null;try{var s=new C(t,n)}catch(e){return null}return e.forEach((function(e){s.test(e)&&(r&&-1!==i.compare(e)||(i=new h(r=e,n)))})),r},n.minSatisfying=function(e,t,n){var r=null,i=null;try{var s=new C(t,n)}catch(e){return null}return e.forEach((function(e){s.test(e)&&(r&&1!==i.compare(e)||(i=new h(r=e,n)))})),r},n.minVersion=function(e,t){e=new C(e,t);var n=new h("0.0.0");if(e.test(n))return n;if(n=new h("0.0.0-0"),e.test(n))return n;n=null;for(var r=0;r<e.set.length;++r){e.set[r].forEach((function(e){var t=new h(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":n&&!g(n,t)||(n=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}))}if(n&&e.test(n))return n;return null},n.validRange=function(e,t){try{return new C(e,t).range||"*"}catch(e){return null}},n.ltr=function(e,t,n){return P(e,t,"<",n)},n.gtr=function(e,t,n){return P(e,t,">",n)},n.outside=P,n.prerelease=function(e,t){var n=d(e,t);return n&&n.prerelease.length?n.prerelease:null},n.intersects=function(e,t,n){return e=new C(e,n),t=new C(t,n),e.intersects(t)},n.coerce=function(e,t){if(e instanceof h)return e;"number"==typeof e&&(e=String(e));if("string"!=typeof e)return null;var n=null;if((t=t||{}).rtl){for(var r;(r=s[o.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&r.index+r[0].length===n.index+n[0].length||(n=r),s[o.COERCERTL].lastIndex=r.index+r[1].length+r[2].length;s[o.COERCERTL].lastIndex=-1}else n=e.match(s[o.COERCE]);if(null===n)return null;return d(n[2]+"."+(n[3]||"0")+"."+(n[4]||"0"),t)}}).call(this)}).call(this,e("_process"))}}},{package:"semver",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/multistream-select/node_modules/semver/semver.js"}],[5944,{"./constants":5936,"./util":5945,buffer:2478,"err-code":3029,"pull-handshake":6163,"pull-length-prefixed":6166},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){const r=e("pull-handshake"),i=e("pull-length-prefixed"),s=e("./util").writeEncoded,a=e("err-code"),{errors:o}=e("./constants");t.exports=function(e,t,u){const c=r({timeout:6e4},t),l=c.handshake;return u("writing multicodec: "+e),s(l,n.from(e+"\n"),t),i.decodeFromReader(l,((n,r)=>{if(n)return t(n);const i=r.toString().slice(0,-1);if(i!==e){const n=a(new Error(`"${e}" not supported`),o.MULTICODEC_NOT_SUPPORTED);return t(n,l.rest())}u("received ack: "+i),t(null,l.rest())})),c}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"multistream-select",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/multistream-select/src/select.js"}],[5945,{buffer:2478,debug:2927,"pull-length-prefixed":6166,"pull-stream/pull":6185,"pull-stream/sinks/collect":6186,"pull-stream/sources/values":6201},function(){with(this)return function(){"use strict";return function(e,t,n){(function(r){(function(){const i=e("pull-stream/pull"),s=e("pull-stream/sources/values"),a=e("pull-stream/sinks/collect"),o=e("pull-length-prefixed"),u=e("debug");function c(e){const t=(~~(1e9*Math.random())).toString(36);function n(e){return n=>{Array.isArray(n)&&(n=n.join(" ")),e("(%s) %s",t,n)}}const r=n(u("mss:"+e));return r.error=n(u("mss:"+e+":error")),r}(n=t.exports).writeEncoded=(e,t,n)=>{!function(e,t){i(s(r.isBuffer(e)?[e]:[r.from(e)]),o.encode(),a(((e,n)=>{if(e)return t(e);t(null,n[0])})))}(t,((t,r)=>{if(t)return n(t);e.write(r)}))},n.log={},n.log.dialer=()=>c("dialer\t"),n.log.listener=()=>c("listener\t")}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"multistream-select",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/multistream-select/src/util.js"}],[5940,{buffer:2478,"pull-length-prefixed":6166,"pull-stream/pull":6185,"pull-stream/sources/values":6201,varint:6746},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){const r=e("pull-stream/pull"),i=e("pull-stream/sources/values"),s=e("pull-length-prefixed"),a=e("varint");t.exports=function(e,t){const o=Object.keys(e.handlers).filter((e=>"ls"!==e)),u=o.length,c=o.reduce(((e,t)=>{const r=n.from(t+"\n");return e+a.encodingLength(r.length)}),0),l=n.concat([n.from(a.encode(u)),n.from(a.encode(c)),n.from("\n")]),d=o.map((e=>n.from(e+"\n")));r(i([l].concat(d)),s.encode(),t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"multistream-select",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/multistream-select/src/listener/ls-handler.js"}],[5943,{"../util.js":5945,"async/some":2162,buffer:2478,"interface-connection":5096,"pull-handshake":6163,"pull-length-prefixed":6166},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){const r=e("pull-handshake"),i=e("pull-length-prefixed"),s=e("interface-connection").Connection,a=e("../util.js").writeEncoded,o=e("async/some");t.exports=function(e,t,u){const c=e=>{u.error(e)},l=r({timeout:6e4},c),d=l.handshake;return function r(){i.decodeFromReader(d,((i,l)=>{if(i)return c(i);u("received:",l.toString());const h=l.toString().slice(0,-1);!function(e,t,n){const r=Object.keys(t);let i=!1;o(r,((n,r)=>{t[n].matchFunc(n,e,((e,t)=>{if(e)return r(e);t&&(i=n),r()}))}),(e=>{if(e)return n(e);n(null,i)}))}(h,t,((i,o)=>{if(i)return c(i);const f=o;if(f){u("send ack back of: "+h),a(d,l,c);const n=new s(d.rest(),e);t[f].handlerFunc(h,n)}else u("not supported protocol: "+h),a(d,n.from("na\n")),r()}))}))}(),l}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"multistream-select",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/multistream-select/src/listener/select-handler.js"}],[5515,{protons:6147},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("protons");t.exports=r("\nmessage CircuitRelay {\n\n  enum Status {\n    SUCCESS                    = 100;\n    HOP_SRC_ADDR_TOO_LONG      = 220;\n    HOP_DST_ADDR_TOO_LONG      = 221;\n    HOP_SRC_MULTIADDR_INVALID  = 250;\n    HOP_DST_MULTIADDR_INVALID  = 251;\n    HOP_NO_CONN_TO_DST         = 260;\n    HOP_CANT_DIAL_DST          = 261;\n    HOP_CANT_OPEN_DST_STREAM   = 262;\n    HOP_CANT_SPEAK_RELAY       = 270;\n    HOP_CANT_RELAY_TO_SELF     = 280;\n    STOP_SRC_ADDR_TOO_LONG     = 320;\n    STOP_DST_ADDR_TOO_LONG     = 321;\n    STOP_SRC_MULTIADDR_INVALID = 350;\n    STOP_DST_MULTIADDR_INVALID = 351;\n    STOP_RELAY_REFUSED         = 390;\n    MALFORMED_MESSAGE          = 400;\n  }\n\n  enum Type { // RPC identifier, either HOP, STOP or STATUS\n    HOP = 1;\n    STOP = 2;\n    STATUS = 3;\n    CAN_HOP = 4;\n  }\n\n  message Peer {\n    required bytes id = 1;    // peer id\n    repeated bytes addrs = 2; // peer's known addresses\n  }\n\n  optional Type type = 1;     // Type of the message\n\n  optional Peer srcPeer = 2;  // srcPeer and dstPeer are used when Type is HOP or STATUS\n  optional Peer dstPeer = 3;\n\n  optional Status code = 4;   // Status code, used when Type is STATUS\n}\n")}}},{package:"libp2p-circuit",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/libp2p-circuit/src/protocol/index.js"}],[5514,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports={relay:"/libp2p/circuit/relay/0.1.0"}}}},{package:"libp2p-circuit",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/libp2p-circuit/src/multicodec.js"}],[5510,{debug:2927,"pull-handshake":6163,"pull-length-prefixed":6166,"pull-stream/pull":6185,"pull-stream/sinks/collect":6186,"pull-stream/sources/empty":6195,"pull-stream/sources/values":6201},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("pull-stream/sources/values"),i=e("pull-stream/sinks/collect"),s=e("pull-stream/sources/empty"),a=e("pull-stream/pull"),o=e("pull-length-prefixed"),u=e("pull-handshake"),c=e("debug"),l=c("libp2p:circuit:stream-handler");l.err=c("libp2p:circuit:error:stream-handler");t.exports=class{constructor(e,t,n,r){this.conn=e,this.stream=null,this.shake=null,this.timeout=t||6e4,this.maxLength=r||4096,"function"==typeof t&&(this.timeout=n||6e4),this.stream=u({timeout:this.timeout},t),this.shake=this.stream.handshake,a(this.stream,e,this.stream)}isValid(){return this.conn&&this.shake&&this.stream}read(e){if(!this.isValid())return e(new Error("handler is not in a valid state"));o.decodeFromReader(this.shake,{maxLength:this.maxLength},((t,n)=>t?(l.err(t),e(t)):e(null,n)))}write(e,t){if(t=t||(()=>{}),!this.isValid())return t(new Error("handler is not in a valid state"));a(r([e]),o.encode(),i(((e,n)=>{if(e)return l.err(e),this.shake.abort(e),t(e);n.forEach((e=>this.shake.write(e))),t()})))}getRawConn(){return this.conn}rest(){const e=this.shake.rest();return this.conn=null,this.stream=null,this.shake=null,e}close(){this.isValid()&&a(s(),this.rest())}}}}},{package:"libp2p-circuit",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/libp2p-circuit/src/circuit/stream-handler.js"}],[5508,{"../protocol":5515,"./../multicodec":5514,"./stream-handler":5510,"./utils":5511,"async/series":2160,"async/setImmediate":2161,"async/waterfall":2167,debug:2927,events:2479,multiaddr:5903,once:6003,"peer-id":6117,"peer-info":6118,"pull-stream/pull":6185},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("pull-stream/pull"),i=e("debug"),s=e("peer-info"),a=e("peer-id"),o=e("events").EventEmitter,u=e("once"),c=e("./utils"),l=e("./stream-handler"),d=e("../protocol").CircuitRelay,h=e("multiaddr"),f=e("async/series"),m=e("async/waterfall"),p=e("async/setImmediate"),g=e("./../multicodec"),b=i("libp2p:circuit:relay");b.err=i("libp2p:circuit:error:relay");t.exports=class extends o{constructor(e,t){super(),this.swarm=e,this.peerInfo=this.swarm._peerInfo,this.utils=c(e),this.config=t||{active:!1,enabled:!1},this.active=this.config.active}handle(e,t){if(!this.config.enabled)return this.utils.writeResponse(t,d.Status.HOP_CANT_SPEAK_RELAY),t.close();if(e.type===d.Type.CAN_HOP)return this.utils.writeResponse(t,d.Status.SUCCESS),t.close();let n=null,r=null;try{n=a.createFromBytes(e.srcPeer.id).toB58String(),r=a.createFromBytes(e.dstPeer.id).toB58String()}catch(e){if(b.err(e),!n)return this.utils.writeResponse(t,d.Status.HOP_SRC_MULTIADDR_INVALID),t.close();if(!r)return this.utils.writeResponse(t,d.Status.HOP_DST_MULTIADDR_INVALID),t.close()}if(n===r)return this.utils.writeResponse(t,d.Status.HOP_CANT_RELAY_TO_SELF),t.close();if(!e.dstPeer.addrs.length){const t=h(`/p2p-circuit/ipfs/${r}`).buffer;e.dstPeer.addrs.push(t)}b("trying to establish a circuit: %s <-> %s",n,r);const i=()=>(this.utils.writeResponse(t,d.Status.HOP_NO_CONN_TO_DST),t.close()),s=e=>{let t;try{if(t=this.swarm._peerBook.get(r),!t.isConnected()&&!this.active){const t=new Error(`No Connection to peer ${r}`);return i(),e(t)}}catch(t){if(!this.active)return i(),e(t)}e()};f([n=>this.utils.validateAddrs(e,t,d.Type.HOP,n),e=>s(e),n=>this._circuit(t,e,n)],(e=>{if(e)return b.err(e),t.close(),p((()=>this.emit("circuit:error",e)));p((()=>this.emit("circuit:success")))}))}_connectToStop(e,t,n){this._dialPeer(e,((e,r)=>e?(this.utils.writeResponse(t,d.Status.HOP_CANT_DIAL_DST),b.err(e),n(e)):this.utils.writeResponse(t,d.Status.SUCCESS,(e=>e?(b.err(e),n(e)):n(null,r)))))}_negotiateStop(e,t,n,r){const i=Object.assign({},n,{type:d.Type.STOP});e.write(d.encode(i),(n=>{if(n)return this.utils.writeResponse(t,d.Status.HOP_CANT_OPEN_DST_STREAM),b.err(n),r(n);e.read(((e,t)=>{if(e)return b.err(e),r(e);return d.decode(t).code!==d.Status.SUCCESS?r(new Error("Unable to create circuit!")):r(null,t)}))}))}_circuit(e,t,n){let i=null;m([n=>this._connectToStop(t.dstPeer,e,n),(n,r)=>{i=new l(n),this._negotiateStop(i,e,t,r)}],(s=>{if(s)return e&&e.close(),i&&i.close(),n(s);const o=e.rest(),u=i.rest(),c=a.createFromBytes(t.srcPeer.id).toB58String(),l=a.createFromBytes(t.dstPeer.id).toB58String();r(o,u,o),b("circuit %s <-> %s established",c,l),n()}))}_dialPeer(e,t){const n=new s(a.createFromBytes(e.id));e.addrs.forEach((e=>n.multiaddrs.add(e))),this.swarm.dial(n,g.relay,u(((e,n)=>{if(e)return b.err(e),t(e);t(null,n)})))}}}}},{package:"libp2p-circuit",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/libp2p-circuit/src/circuit/hop.js"}],[5509,{"../protocol":5515,"./utils":5511,"async/series":2160,"async/setImmediate":2161,debug:2927,events:2479,"interface-connection":5096,"peer-info":6118},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("async/setImmediate"),i=e("events").EventEmitter,s=e("interface-connection").Connection,a=e("./utils"),o=e("peer-info"),u=e("../protocol").CircuitRelay,c=e("async/series"),l=e("debug"),d=l("libp2p:circuit:stop");d.err=l("libp2p:circuit:error:stop");t.exports=class extends i{constructor(e){super(),this.swarm=e,this.utils=a(e)}handle(e,t,n){n=n||(()=>{}),c([n=>this.utils.validateAddrs(e,t,u.Type.STOP,n),e=>this.utils.writeResponse(t,u.Status.Success,e)],(i=>{if(i)return n(),d(i);const a=new o(this.utils.peerIdFromId(e.srcPeer.id));e.srcPeer.addrs.forEach((e=>a.multiaddrs.add(e)));const u=new s(t.rest());u.setPeerInfo(a),r((()=>this.emit("connection",u))),n(u)}))}}}}},{package:"libp2p-circuit",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/libp2p-circuit/src/circuit/stop.js"}],[5027,{"../../is-buffer/index.js":5378,"./consumable-buffer":5026},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){const r=e("./consumable-buffer");t.exports=function(e){return function(t){return t instanceof i?t:new i(t,e)}};class i{constructor(e,t){if("string"!=typeof e&&!n.isBuffer(e))throw new Error("can only hash strings or buffers");this._value=e,this._hashFn=t,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(e){let t=e;for(;this._availableBits<t;)await this._produceMoreBits();let n=0;for(;t>0;){const e=this._buffers[this._currentBufferIndex],r=Math.min(e.availableBits(),t);n=(n<<r)+e.take(r),t-=r,this._availableBits-=r,0===e.availableBits()&&this._currentBufferIndex++}return n}untake(e){let t=e;for(;t>0;){const e=this._buffers[this._currentBufferIndex],n=Math.min(e.totalBits()-e.availableBits(),t);e.untake(n),t-=n,this._availableBits+=n,this._currentBufferIndex>0&&e.totalBits()===e.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;const e=this._depth?this._value+this._depth:this._value,t=await this._hashFn(e),n=new r(t);this._buffers.push(n),this._availableBits+=n.availableBits()}}}).call(this)}).call(this,{isBuffer:e("../../is-buffer/index.js")})}}},{package:"hamt-sharding",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/hamt-sharding/src/consumable-hash.js"}],[6573,{},function(){with(this)return function(){"use strict";return function(e,t,n){function r(e,t){return e+i(t)}function i(e){let t=e;return t-=t>>1&1431655765,t=(858993459&t)+(t>>2&858993459),16843009*(t+(t>>4)&252645135)>>24}function s(e,t){return e[0]-t[0]}function a(e){return e[1]}t.exports=class{constructor(){this._bitArrays=[],this._data=[],this._length=0,this._changedLength=!1,this._changedData=!1}set(e,t){let n=this._internalPositionFor(e,!1);if(t===undefined)-1!==n&&(this._unsetInternalPos(n),this._unsetBit(e),this._changedLength=!0,this._changedData=!0);else{let r=!1;-1===n?(n=this._data.length,this._setBit(e),this._changedData=!0):r=!0,this._setInternalPos(n,e,t,r),this._changedLength=!0}}unset(e){this.set(e,undefined)}get(e){this._sortData();const t=this._internalPositionFor(e,!0);return-1===t?undefined:this._data[t][1]}push(e){return this.set(this.length,e),this.length}get length(){if(this._sortData(),this._changedLength){const e=this._data[this._data.length-1];this._length=e?e[0]+1:0,this._changedLength=!1}return this._length}forEach(e){let t=0;for(;t<this.length;)e(this.get(t),t,this),t++}map(e){let t=0,n=new Array(this.length);for(;t<this.length;)n[t]=e(this.get(t),t,this),t++;return n}reduce(e,t){let n=0,r=t;for(;n<this.length;){r=e(r,this.get(n),n),n++}return r}find(e){let t,n,r=0;for(;r<this.length&&!t;)n=this.get(r),t=e(n),r++;return t?n:undefined}_internalPositionFor(e,t){const n=this._bytePosFor(e,t);if(n>=this._bitArrays.length)return-1;const s=this._bitArrays[n],a=e-7*n;if(!((s&1<<a)>0))return-1;return this._bitArrays.slice(0,n).reduce(r,0)+i(s&~(4294967295<<a+1))-1}_bytePosFor(e,t){const n=Math.floor(e/7),r=n+1;for(;!t&&this._bitArrays.length<r;)this._bitArrays.push(0);return n}_setBit(e){const t=this._bytePosFor(e,!1);this._bitArrays[t]|=1<<e-7*t}_unsetBit(e){const t=this._bytePosFor(e,!1);this._bitArrays[t]&=~(1<<e-7*t)}_setInternalPos(e,t,n,r){const i=this._data,s=[t,n];if(r)this._sortData(),i[e]=s;else{if(i.length)if(i[i.length-1][0]>=t)i.push(s);else if(i[0][0]<=t)i.unshift(s);else{const e=Math.round(i.length/2);this._data=i.slice(0,e).concat(s).concat(i.slice(e))}else this._data.push(s);this._changedData=!0,this._changedLength=!0}}_unsetInternalPos(e){this._data.splice(e,1)}_sortData(){this._changedData&&this._data.sort(s),this._changedData=!1}bitField(){const e=[];let t,n=8,r=0,i=0;const s=this._bitArrays.slice();for(;s.length||r;){0===r&&(t=s.shift(),r=7);const a=Math.min(r,n);i|=(t&~(255<<a))<<8-n,t>>>=a,r-=a,n-=a,n&&(r||s.length)||(e.push(i),i=0,n=8)}for(var a=e.length-1;a>0;a--){if(0!==e[a])break;e.pop()}return e}compactArray(){return this._sortData(),this._data.map(a)}}}}},{package:"sparse-array",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/sparse-array/index.js"}],[6524,{"./alphabet":6521,"./build":6522,"./is-valid":6525,"./util/cluster-worker-id":6528},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./alphabet"),i=e("./build"),s=e("./is-valid"),a=e("./util/cluster-worker-id")||0;function o(){return i(a)}t.exports=o,t.exports.generate=o,t.exports.seed=function(e){return r.seed(e),t.exports},t.exports.worker=function(e){return a=e,t.exports},t.exports.characters=function(e){return e!==undefined&&r.characters(e),r.shuffled()},t.exports.isValid=s}}},{package:"shortid",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/shortid/lib/index.js"}],[2425,{"./lib/_stream_duplex.js":2412,"./lib/_stream_passthrough.js":2413,"./lib/_stream_readable.js":2414,"./lib/_stream_transform.js":2415,"./lib/_stream_writable.js":2416,"./lib/internal/streams/end-of-stream.js":2420,"./lib/internal/streams/pipeline.js":2422},function(){with(this)return function(){"use strict";return function(e,t,n){(n=t.exports=e("./lib/_stream_readable.js")).Stream=n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js"),n.finished=e("./lib/internal/streams/end-of-stream.js"),n.pipeline=e("./lib/internal/streams/pipeline.js")}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/bl/node_modules/readable-stream/readable-browser.js"}],[6260,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=class{constructor(e=12,t=8192,n=32768,r=64,i){this.bits=e,this.min=t,this.max=n,this.asModule=i,this.rabin=new i.Rabin(e,t,n,r)}fingerprint(e){const t=new Int32Array(Math.ceil(e.length/this.min)),n=this.asModule.newArray(t),r=this.asModule.newArray(e);this.rabin.fingerprint(r,n);const i=this.asModule.getArray(Int32Array,n);this.asModule.freeArray(n),this.asModule.freeArray(r);const s=[];for(let e=0;e<i.length&&0!==i[e];e++)s[e]=i[e];return s}}}}},{package:"rabin-wasm",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/rabin-wasm/src/rabin.js"}],[6258,{"assemblyscript/lib/loader":2087},function(){with(this)return function(){"use strict";return function(e,t,n){const{instantiateStreaming:r}=e("assemblyscript/lib/loader");function i(e={}){if(!i.supported)return null;var t=new Uint8Array([0,97,115,109,1,0,0,0,1,90,16,96,0,0,96,2,127,127,1,127,96,4,127,127,127,127,0,96,1,127,1,127,96,3,127,127,127,0,96,1,126,1,127,96,2,126,126,1,126,96,5,127,127,127,127,127,1,127,96,3,127,127,126,0,96,2,127,127,1,126,96,3,127,127,127,1,127,96,1,127,0,96,2,127,127,0,96,1,127,1,126,96,2,127,126,0,96,0,1,127,2,13,1,3,101,110,118,5,97,98,111,114,116,0,2,3,57,56,3,3,12,3,3,15,5,6,1,8,4,1,9,11,7,4,10,10,11,0,0,0,3,12,3,12,3,12,13,14,13,14,13,14,13,14,13,14,13,14,13,14,13,14,13,14,13,14,13,14,13,14,13,14,13,14,4,4,1,112,0,1,5,3,1,0,1,6,26,5,127,1,65,0,11,127,1,65,0,11,127,1,65,0,11,127,1,65,0,11,127,1,65,0,11,7,253,6,44,6,109,101,109,111,114,121,2,0,5,116,97,98,108,101,1,0,6,100,101,103,114,101,101,0,7,3,109,111,100,0,8,16,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,0,23,16,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,0,24,21,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,25,21,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,26,14,82,97,98,105,110,35,103,101,116,58,119,112,111,115,0,27,14,82,97,98,105,110,35,115,101,116,58,119,112,111,115,0,28,15,82,97,98,105,110,35,103,101,116,58,99,111,117,110,116,0,29,15,82,97,98,105,110,35,115,101,116,58,99,111,117,110,116,0,30,13,82,97,98,105,110,35,103,101,116,58,112,111,115,0,31,13,82,97,98,105,110,35,115,101,116,58,112,111,115,0,32,15,82,97,98,105,110,35,103,101,116,58,115,116,97,114,116,0,33,15,82,97,98,105,110,35,115,101,116,58,115,116,97,114,116,0,34,16,82,97,98,105,110,35,103,101,116,58,100,105,103,101,115,116,0,35,16,82,97,98,105,110,35,115,101,116,58,100,105,103,101,115,116,0,36,21,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,37,21,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,38,22,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,39,22,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,40,31,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,41,31,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,42,20,82,97,98,105,110,35,103,101,116,58,112,111,108,121,110,111,109,105,97,108,0,43,20,82,97,98,105,110,35,115,101,116,58,112,111,108,121,110,111,109,105,97,108,0,44,27,82,97,98,105,110,35,103,101,116,58,112,111,108,121,110,111,109,105,97,108,95,100,101,103,114,101,101,0,45,27,82,97,98,105,110,35,115,101,116,58,112,111,108,121,110,111,109,105,97,108,95,100,101,103,114,101,101,0,46,26,82,97,98,105,110,35,103,101,116,58,112,111,108,121,110,111,109,105,97,108,95,115,104,105,102,116,0,47,26,82,97,98,105,110,35,115,101,116,58,112,111,108,121,110,111,109,105,97,108,95,115,104,105,102,116,0,48,22,82,97,98,105,110,35,103,101,116,58,97,118,101,114,97,103,101,95,98,105,116,115,0,49,22,82,97,98,105,110,35,115,101,116,58,97,118,101,114,97,103,101,95,98,105,116,115,0,50,17,82,97,98,105,110,35,103,101,116,58,109,105,110,115,105,122,101,0,51,17,82,97,98,105,110,35,115,101,116,58,109,105,110,115,105,122,101,0,52,17,82,97,98,105,110,35,103,101,116,58,109,97,120,115,105,122,101,0,53,17,82,97,98,105,110,35,115,101,116,58,109,97,120,115,105,122,101,0,54,14,82,97,98,105,110,35,103,101,116,58,109,97,115,107,0,55,14,82,97,98,105,110,35,115,101,116,58,109,97,115,107,0,56,17,82,97,98,105,110,35,99,111,110,115,116,114,117,99,116,111,114,0,15,17,82,97,98,105,110,35,102,105,110,103,101,114,112,114,105,110,116,0,16,14,109,101,109,111,114,121,46,99,111,109,112,97,114,101,0,18,15,109,101,109,111,114,121,46,97,108,108,111,99,97,116,101,0,4,11,109,101,109,111,114,121,46,102,114,101,101,0,19,12,109,101,109,111,114,121,46,114,101,115,101,116,0,20,8,1,21,9,7,1,0,65,0,11,1,22,10,188,30,56,104,1,3,127,32,0,65,128,128,128,128,4,75,4,64,0,11,35,1,34,1,32,0,65,1,32,0,65,1,75,27,106,65,7,106,65,120,113,34,0,63,0,34,2,65,16,116,75,4,64,32,2,32,0,32,1,107,65,255,255,3,106,65,128,128,124,113,65,16,118,34,3,32,2,32,3,74,27,64,0,65,0,72,4,64,32,3,64,0,65,0,72,4,64,0,11,11,11,32,0,36,1,32,1,11,51,1,1,127,32,0,65,248,255,255,255,3,75,4,64,65,0,65,200,0,65,26,65,2,16,0,0,11,65,1,65,32,32,0,65,7,106,103,107,116,16,1,34,1,32,0,54,2,0,32,1,11,145,3,1,1,127,32,1,69,4,64,15,11,32,0,65,0,58,0,0,32,0,32,1,106,65,1,107,65,0,58,0,0,32,1,65,2,77,4,64,15,11,32,0,65,1,106,65,0,58,0,0,32,0,65,2,106,65,0,58,0,0,32,0,32,1,106,34,2,65,2,107,65,0,58,0,0,32,2,65,3,107,65,0,58,0,0,32,1,65,6,77,4,64,15,11,32,0,65,3,106,65,0,58,0,0,32,0,32,1,106,65,4,107,65,0,58,0,0,32,1,65,8,77,4,64,15,11,65,0,32,0,107,65,3,113,34,2,32,0,106,34,0,65,0,54,2,0,32,1,32,2,107,65,124,113,34,1,32,0,106,65,4,107,65,0,54,2,0,32,1,65,8,77,4,64,15,11,32,0,65,4,106,65,0,54,2,0,32,0,65,8,106,65,0,54,2,0,32,0,32,1,106,34,2,65,12,107,65,0,54,2,0,32,2,65,8,107,65,0,54,2,0,32,1,65,24,77,4,64,15,11,32,0,65,12,106,65,0,54,2,0,32,0,65,16,106,65,0,54,2,0,32,0,65,20,106,65,0,54,2,0,32,0,65,24,106,65,0,54,2,0,32,0,32,1,106,34,2,65,28,107,65,0,54,2,0,32,2,65,24,107,65,0,54,2,0,32,2,65,20,107,65,0,54,2,0,32,2,65,16,107,65,0,54,2,0,32,0,65,4,113,65,24,106,34,2,32,0,106,33,0,32,1,32,2,107,33,1,3,64,32,1,65,32,79,4,64,32,0,66,0,55,3,0,32,0,65,8,106,66,0,55,3,0,32,0,65,16,106,66,0,55,3,0,32,0,65,24,106,66,0,55,3,0,32,1,65,32,107,33,1,32,0,65,32,106,33,0,12,1,11,11,11,6,0,32,0,16,1,11,76,1,1,127,65,128,16,16,2,34,1,65,8,106,65,128,16,16,3,32,0,69,4,64,65,12,16,1,33,0,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,0,32,1,54,2,0,32,0,65,0,54,2,4,32,0,65,128,16,54,2,8,32,0,11,8,0,65,12,16,1,16,5,11,70,2,1,127,1,126,66,128,128,128,128,128,128,128,128,128,127,33,2,3,64,2,64,32,1,65,192,0,78,13,0,32,0,32,2,131,66,0,86,4,64,65,63,32,1,107,15,5,32,2,66,1,136,33,2,32,1,65,1,106,33,1,12,2,11,0,11,11,65,127,11,175,2,2,1,127,2,126,3,64,2,127,66,128,128,128,128,128,128,128,128,128,127,33,3,65,0,33,2,3,64,2,64,32,2,65,192,0,78,13,0,65,63,32,2,107,32,0,32,3,131,66,0,86,13,2,26,32,3,66,1,136,33,3,32,2,65,1,106,33,2,12,1,11,11,65,127,11,2,127,32,1,33,4,66,128,128,128,128,128,128,128,128,128,127,33,3,65,0,33,2,3,64,2,64,32,2,65,192,0,78,13,0,65,63,32,2,107,32,3,32,4,131,66,0,86,13,2,26,32,3,66,1,136,33,3,32,2,65,1,106,33,2,12,1,11,11,65,127,11,78,4,64,32,1,2,127,66,128,128,128,128,128,128,128,128,128,127,33,3,65,0,33,2,3,64,2,64,32,2,65,192,0,78,13,0,65,63,32,2,107,32,0,32,3,131,66,0,86,13,2,26,32,3,66,1,136,33,3,32,2,65,1,106,33,2,12,1,11,11,65,127,11,2,127,66,128,128,128,128,128,128,128,128,128,127,33,3,65,0,33,2,3,64,2,64,32,2,65,192,0,78,13,0,65,63,32,2,107,32,1,32,3,131,66,0,86,13,2,26,32,3,66,1,136,33,3,32,2,65,1,106,33,2,12,1,11,11,65,127,11,107,172,134,32,0,133,33,0,12,1,11,11,32,0,11,96,1,1,127,32,1,65,248,255,255,255,3,75,4,64,65,0,65,8,65,23,65,34,16,0,0,11,32,1,16,2,34,2,65,8,106,32,1,16,3,32,0,69,4,64,65,12,16,1,33,0,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,0,32,2,54,2,0,32,0,65,0,54,2,4,32,0,32,1,54,2,8,32,0,11,49,0,32,1,32,0,40,2,8,65,3,118,79,4,64,65,0,65,8,65,50,65,63,16,0,0,11,32,0,40,2,4,32,0,40,2,0,32,1,65,3,116,106,106,32,2,55,3,8,11,43,0,32,1,32,0,40,2,8,79,4,64,65,0,65,8,65,50,65,63,16,0,0,11,32,0,40,2,4,32,1,32,0,40,2,0,106,106,32,2,58,0,8,11,41,0,32,1,32,0,40,2,8,79,4,64,65,0,65,8,65,39,65,63,16,0,0,11,32,0,40,2,4,32,1,32,0,40,2,0,106,106,45,0,8,11,47,0,32,1,32,0,40,2,8,65,3,118,79,4,64,65,0,65,8,65,39,65,63,16,0,0,11,32,0,40,2,4,32,0,40,2,0,32,1,65,3,116,106,106,41,3,8,11,166,10,2,3,127,5,126,35,2,69,4,64,3,64,32,2,65,128,2,72,4,64,32,2,65,255,1,113,173,33,4,32,0,41,3,72,33,6,3,64,2,127,32,4,33,5,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,1,3,64,32,1,65,192,0,72,4,64,65,63,32,1,107,32,4,32,5,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,1,65,1,106,33,1,12,1,11,11,65,127,11,2,127,32,6,33,7,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,1,3,64,32,1,65,192,0,72,4,64,65,63,32,1,107,32,4,32,7,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,1,65,1,106,33,1,12,1,11,11,65,127,11,78,4,64,32,6,2,127,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,1,3,64,32,1,65,192,0,72,4,64,65,63,32,1,107,32,4,32,5,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,1,65,1,106,33,1,12,1,11,11,65,127,11,2,127,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,1,3,64,32,1,65,192,0,72,4,64,65,63,32,1,107,32,4,32,6,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,1,65,1,106,33,1,12,1,11,11,65,127,11,107,172,134,32,5,133,33,4,12,1,11,11,65,0,33,1,3,64,32,1,32,0,40,2,4,65,1,107,72,4,64,32,5,66,8,134,33,4,32,0,41,3,72,33,6,3,64,2,127,32,4,33,5,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,3,3,64,32,3,65,192,0,72,4,64,65,63,32,3,107,32,4,32,5,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,3,65,1,106,33,3,12,1,11,11,65,127,11,2,127,32,6,33,7,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,3,3,64,32,3,65,192,0,72,4,64,65,63,32,3,107,32,4,32,7,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,3,65,1,106,33,3,12,1,11,11,65,127,11,78,4,64,32,6,2,127,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,3,3,64,32,3,65,192,0,72,4,64,65,63,32,3,107,32,4,32,5,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,3,65,1,106,33,3,12,1,11,11,65,127,11,2,127,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,3,3,64,32,3,65,192,0,72,4,64,65,63,32,3,107,32,4,32,6,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,3,65,1,106,33,3,12,1,11,11,65,127,11,107,172,134,32,5,133,33,4,12,1,11,11,32,1,65,1,106,33,1,12,1,11,11,35,4,32,2,32,5,16,10,32,2,65,1,106,33,2,12,1,11,11,2,127,32,0,41,3,72,33,4,66,128,128,128,128,128,128,128,128,128,127,33,5,65,0,33,2,3,64,32,2,65,192,0,72,4,64,65,63,32,2,107,32,4,32,5,131,66,0,86,13,2,26,32,5,66,1,136,33,5,32,2,65,1,106,33,2,12,1,11,11,65,127,11,172,33,8,65,0,33,2,3,64,32,2,65,128,2,72,4,64,35,3,33,3,32,2,172,32,8,134,33,5,32,0,41,3,72,33,6,3,64,2,127,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,1,3,64,32,1,65,192,0,72,4,64,65,63,32,1,107,32,4,32,5,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,1,65,1,106,33,1,12,1,11,11,65,127,11,2,127,32,6,33,7,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,1,3,64,32,1,65,192,0,72,4,64,65,63,32,1,107,32,4,32,7,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,1,65,1,106,33,1,12,1,11,11,65,127,11,78,4,64,32,6,2,127,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,1,3,64,32,1,65,192,0,72,4,64,65,63,32,1,107,32,4,32,5,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,1,65,1,106,33,1,12,1,11,11,65,127,11,2,127,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,1,3,64,32,1,65,192,0,72,4,64,65,63,32,1,107,32,4,32,6,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,1,65,1,106,33,1,12,1,11,11,65,127,11,107,172,134,32,5,133,33,5,12,1,11,11,32,3,32,2,32,2,172,32,8,134,32,5,132,16,10,32,2,65,1,106,33,2,12,1,11,11,65,1,36,2,11,32,0,66,0,55,3,24,32,0,66,0,55,3,32,65,0,33,2,3,64,32,2,32,0,40,2,4,72,4,64,32,0,40,2,0,32,2,65,0,16,11,32,2,65,1,106,33,2,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,12,33,1,32,0,40,2,0,32,0,40,2,8,65,1,16,11,32,0,32,0,41,3,40,35,4,32,1,65,255,1,113,16,13,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,41,3,40,32,0,41,3,88,136,167,33,1,32,0,32,0,41,3,40,66,8,134,55,3,40,32,0,32,0,41,3,40,66,1,132,55,3,40,32,0,32,0,41,3,40,35,3,32,1,65,255,1,113,16,13,133,55,3,40,11,234,1,0,32,0,69,4,64,65,128,1,16,1,33,0,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,24,32,0,66,0,55,3,32,32,0,66,0,55,3,40,32,0,66,0,55,3,48,32,0,66,0,55,3,56,32,0,66,0,55,3,64,32,0,66,0,55,3,72,32,0,66,0,55,3,80,32,0,66,0,55,3,88,32,0,66,0,55,3,96,32,0,66,0,55,3,104,32,0,66,0,55,3,112,32,0,66,0,55,3,120,32,0,32,1,173,55,3,96,32,0,32,2,173,55,3,104,32,0,32,3,173,55,3,112,32,0,65,12,16,1,32,4,16,9,54,2,0,32,0,32,4,54,2,4,32,0,66,1,32,0,41,3,96,134,66,1,125,55,3,120,32,0,66,243,130,183,218,216,230,232,30,55,3,72,32,0,66,53,55,3,80,32,0,32,0,41,3,80,66,8,125,55,3,88,32,0,16,14,32,0,11,206,4,1,5,127,32,1,40,2,8,33,4,32,1,40,2,0,65,8,106,33,5,3,64,2,127,65,0,33,3,3,64,32,3,32,4,72,4,64,32,3,32,5,106,45,0,0,33,1,32,0,40,2,0,32,0,40,2,8,16,12,33,6,32,0,40,2,0,32,0,40,2,8,32,1,16,11,32,0,32,0,41,3,40,35,4,32,6,65,255,1,113,16,13,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,41,3,40,32,0,41,3,88,136,167,33,6,32,0,32,0,41,3,40,66,8,134,55,3,40,32,0,32,0,41,3,40,32,1,173,132,55,3,40,32,0,32,0,41,3,40,35,3,32,6,65,255,1,113,16,13,133,55,3,40,32,0,32,0,41,3,16,66,1,124,55,3,16,32,0,32,0,41,3,24,66,1,124,55,3,24,2,127,32,0,41,3,16,32,0,41,3,104,90,34,1,4,64,32,0,41,3,40,32,0,41,3,120,131,66,0,81,33,1,11,32,1,69,11,4,127,32,0,41,3,16,32,0,41,3,112,90,5,32,1,11,4,64,32,0,32,0,41,3,32,55,3,48,32,0,32,0,41,3,16,55,3,56,32,0,32,0,41,3,40,55,3,64,65,0,33,1,3,64,32,1,32,0,40,2,4,72,4,64,32,0,40,2,0,32,1,65,0,16,11,32,1,65,1,106,33,1,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,12,33,1,32,0,40,2,0,32,0,40,2,8,65,1,16,11,32,0,32,0,41,3,40,35,4,32,1,65,255,1,113,16,13,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,41,3,40,32,0,41,3,88,136,167,33,1,32,0,32,0,41,3,40,66,8,134,55,3,40,32,0,32,0,41,3,40,66,1,132,55,3,40,32,0,32,0,41,3,40,35,3,32,1,65,255,1,113,16,13,133,55,3,40,32,3,65,1,106,12,3,5,32,3,65,1,106,33,3,12,2,11,0,11,11,65,127,11,34,1,65,0,78,4,64,32,4,32,1,107,33,4,32,1,32,5,106,33,5,32,7,34,1,65,1,106,33,7,32,2,40,2,4,32,2,40,2,0,32,1,65,2,116,106,106,32,0,41,3,56,62,2,8,32,2,40,2,4,32,2,40,2,0,32,1,65,2,116,106,106,40,2,8,26,12,1,11,11,11,88,1,1,127,32,0,32,1,70,4,64,65,0,15,11,3,64,32,2,65,0,71,34,3,4,64,32,0,45,0,0,32,1,45,0,0,70,33,3,11,32,3,4,64,32,2,65,1,107,33,2,32,0,65,1,106,33,0,32,1,65,1,106,33,1,12,1,11,11,32,2,4,127,32,0,45,0,0,32,1,45,0,0,107,5,65,0,11,11,10,0,32,0,32,1,32,2,16,17,11,3,0,1,11,6,0,35,0,36,1,11,19,0,65,136,1,36,0,35,0,36,1,16,6,36,3,16,6,36,4,11,3,0,1,11,7,0,32,0,40,2,0,11,9,0,32,0,32,1,54,2,0,11,7,0,32,0,40,2,4,11,9,0,32,0,32,1,54,2,4,11,7,0,32,0,40,2,8,11,9,0,32,0,32,1,54,2,8,11,7,0,32,0,41,3,16,11,9,0,32,0,32,1,55,3,16,11,7,0,32,0,41,3,24,11,9,0,32,0,32,1,55,3,24,11,7,0,32,0,41,3,32,11,9,0,32,0,32,1,55,3,32,11,7,0,32,0,41,3,40,11,9,0,32,0,32,1,55,3,40,11,7,0,32,0,41,3,48,11,9,0,32,0,32,1,55,3,48,11,7,0,32,0,41,3,56,11,9,0,32,0,32,1,55,3,56,11,7,0,32,0,41,3,64,11,9,0,32,0,32,1,55,3,64,11,7,0,32,0,41,3,72,11,9,0,32,0,32,1,55,3,72,11,7,0,32,0,41,3,80,11,9,0,32,0,32,1,55,3,80,11,7,0,32,0,41,3,88,11,9,0,32,0,32,1,55,3,88,11,7,0,32,0,41,3,96,11,9,0,32,0,32,1,55,3,96,11,7,0,32,0,41,3,104,11,9,0,32,0,32,1,55,3,104,11,7,0,32,0,41,3,112,11,9,0,32,0,32,1,55,3,112,11,7,0,32,0,41,3,120,11,9,0,32,0,32,1,55,3,120,11,11,128,1,2,0,65,8,11,57,27,0,0,0,126,0,108,0,105,0,98,0,47,0,105,0,110,0,116,0,101,0,114,0,110,0,97,0,108,0,47,0,116,0,121,0,112,0,101,0,100,0,97,0,114,0,114,0,97,0,121,0,46,0,116,0,115,0,65,200,0,11,59,28,0,0,0,126,0,108,0,105,0,98,0,47,0,105,0,110,0,116,0,101,0,114,0,110,0,97,0,108,0,47,0,97,0,114,0,114,0,97,0,121,0,98,0,117,0,102,0,102,0,101,0,114,0,46,0,116,0,115,0,32,16,115,111,117,114,99,101,77,97,112,112,105,110,103,85,82,76,14,114,97,98,105,110,46,119,97,115,109,46,109,97,112]);return r(new Response(new Blob([t],{type:"application/wasm"})),e)}i.supported="undefined"!=typeof WebAssembly,t.exports=i}}},{package:"rabin-wasm",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/rabin-wasm/dist/rabin-wasm.js"}],[1352,{"bn.js":1336,buffer:2478,"js-sha3":1356,"number-to-bn":5994},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r=e("bn.js"),i=e("number-to-bn"),s=e("js-sha3").keccak_256;function a(e){for(var t=e,n=t[0];t.length>0&&"0"===n.toString();)n=(t=t.slice(1))[0];return t}function o(e){var t=e.toString(16);return t.length%2&&(t="0"+t),a(new n(t,"hex"))}function u(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}function c(e,t){var r=e;if(!n.isBuffer(r)){if(!u(r)){var i=new Error(t?"[ethjs-abi] invalid "+t:"[ethjs-abi] invalid hex or buffer, must be a prefixed alphanumeric even length hex string");throw i.reason="[ethjs-abi] invalid hex string, hex must be prefixed and alphanumeric (e.g. 0x023..)",i.value=r,i}(r=r.substring(2)).length%2&&(r="0"+r),r=new n(r,"hex")}return r}function l(e,t){return{encode:function(r){var s=r;return"object"==typeof s&&s.toString&&(s.toTwos||s.dividedToIntegerBy)&&(s=s.toString(10).split(".")[0]),"string"!=typeof s&&"number"!=typeof s||(s=String(s).split(".")[0]),s=(s=i(s)).toTwos(8*e).maskn(8*e),t&&(s=s.fromTwos(8*e).toTwos(256)),s.toArrayLike(n,"be",32)},decode:function(n,i){var s=32-e,a=new r(n.slice(i+s,i+32));return a=t?a.fromTwos(8*e):a.maskn(8*e),{consumed:32,value:new r(a.toString(10))}}}}var d=l(32,!1),h={encode:function(e){return d.encode(e?1:0)},decode:function(e,t){var n=d.decode(e,t);return{consumed:n.consumed,value:!n.value.isZero()}}};function f(e){return{encode:function(e){var t=e;if(32===(t=c(t)).length)return t;var r=new n(32);return r.fill(0),t.copy(r),r},decode:function(t,n){if(0!==t.length&&t.length<n+32)throw new Error("[ethjs-abi] while decoding fixed bytes, invalid bytes data length: "+e);return{consumed:32,value:"0x"+t.slice(n,n+e).toString("hex")}}}}var m={encode:function(e){var t=e,r=new n(32);if(!u(t,20))throw new Error("[ethjs-abi] while encoding address, invalid address value, not alphanumeric 20 byte hex string");return t=c(t),r.fill(0),t.copy(r,12),r},decode:function(e,t){if(0===e.length)return{consumed:32,value:"0x"};if(0!==e.length&&e.length<t+32)throw new Error("[ethjs-abi] while decoding address data, invalid address data, invalid byte length "+e.length);return{consumed:32,value:"0x"+e.slice(t+12,t+32).toString("hex")}}};function p(e){var t=parseInt(32*Math.ceil(e.length/32)),r=new n(t-e.length);return r.fill(0),n.concat([d.encode(e.length),e,r])}function g(e,t){if(0!==e.length&&e.length<t+32)throw new Error("[ethjs-abi] while decoding dynamic bytes data, invalid bytes length: "+e.length+" should be less than "+(t+32));var n=d.decode(e,t).value;if(n=n.toNumber(),0!==e.length&&e.length<t+32+n)throw new Error("[ethjs-abi] while decoding dynamic bytes data, invalid bytes length: "+e.length+" should be less than "+(t+32+n));return{consumed:parseInt(32+32*Math.ceil(n/32),10),value:e.slice(t+32,t+32+n)}}var b={encode:function(e){return p(c(e))},decode:function(e,t){var n=g(e,t);return n.value="0x"+n.value.toString("hex"),n},dynamic:!0},y={encode:function(e){return p(new n(e,"utf8"))},decode:function(e,t){var n=g(e,t);return n.value=n.value.toString("utf8"),n},dynamic:!0};function v(e,t){return{encode:function(r){var i=new n(0),s=t;if(!Array.isArray(r))throw new Error("[ethjs-abi] while encoding array, invalid array data, not type Object (Array)");if(-1===s&&(s=r.length,i=d.encode(s)),s!==r.length)throw new Error("[ethjs-abi] while encoding array, size mismatch array length "+s+" does not equal "+r.length);return r.forEach((function(t){i=n.concat([i,e.encode(t)])})),i},decode:function(n,r){var i,s=t,a=r,o=0;-1===s&&(s=(i=d.decode(n,a)).value.toNumber(),o+=i.consumed,a+=i.consumed);for(var u=[],c=0;c<s;c++){var l=e.decode(n,a);o+=l.consumed,a+=l.consumed,u.push(l.value)}return{consumed:o,value:u}},dynamic:-1===t}}var w=new RegExp(/^((u?int|bytes)([0-9]*)|(address|bool|string)|(\[([0-9]*)\]))/);t.exports={BN:r,bnToBuffer:o,isHexString:u,hexOrBuffer:c,hexlify:function(e){return"number"==typeof e?"0x"+o(new r(e)).toString("hex"):e.mod||e.modulo?"0x"+o(e).toString("hex"):"0x"+c(e).toString("hex")},stripZeros:a,keccak256:s,getKeys:function(e,t,n){var r=[];if(!Array.isArray(e))throw new Error("[ethjs-abi] while getting keys, invalid params value "+JSON.stringify(e));for(var i=0;i<e.length;i++){var s=e[i][t];if(n&&!s)s="";else if("string"!=typeof s)throw new Error("[ethjs-abi] while getKeys found invalid ABI data structure, type value not string");r.push(s)}return r},numberToBN:i,coderNumber:l,uint256Coder:d,coderBoolean:h,coderFixedBytes:f,coderAddress:m,coderDynamicBytes:b,coderString:y,coderArray:v,paramTypePart:w,getParamCoder:function(e){for(var t=e,n=null,r="[ethjs-abi] while getting param coder (getParamCoder) type value "+JSON.stringify(t)+" is either invalid or unsupported by ethjs-abi.";t;){var i=t.match(w);if(!i)throw new Error(r);t=t.substring(i[0].length);var s=i[2]||i[4]||i[5];switch(s){case"int":case"uint":if(n)throw new Error(r);var a=parseInt(i[3]||256);if(0===a||a>256||a%8!=0)throw new Error("[ethjs-abi] while getting param coder for type "+t+", invalid "+s+"<N> width: "+t);n=l(a/8,"int"===s);break;case"bool":if(n)throw new Error(r);n=h;break;case"string":if(n)throw new Error(r);n=y;break;case"bytes":if(n)throw new Error(r);if(i[3]){var o=parseInt(i[3]);if(0===o||o>32)throw new Error("[ethjs-abi] while getting param coder for prefix bytes, invalid type "+t+", size "+o+" should be 0 or greater than 32");n=f(o)}else n=b;break;case"address":if(n)throw new Error(r);n=m;break;case"[]":if(!n||n.dynamic)throw new Error(r);n=v(n,-1);break;default:if(!n||n.dynamic)throw new Error(r);n=v(n,parseInt(i[6]))}}if(!n)throw new Error(r);return n}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"ethjs-abi",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/ethjs-contract/node_modules/ethjs-abi/lib/utils/index.js"}],[1254,{"./lib/_stream_duplex.js":1246,"./lib/_stream_passthrough.js":1247,"./lib/_stream_readable.js":1248,"./lib/_stream_transform.js":1249,"./lib/_stream_writable.js":1250},function(){with(this)return function(){"use strict";return function(e,t,n){(n=t.exports=e("./lib/_stream_readable.js")).Stream=n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js")}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/post-message-stream/node_modules/readable-stream/readable-browser.js"}],[1461,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r={};function i(e,t,n){n||(n=Error);var i=function(e){var n,r;function i(n,r,i){return e.call(this,function(e,n,r){return"string"==typeof t?t:t(e,n,r)}(n,r,i))||this}return r=e,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,i}(n);i.prototype.name=n.name,i.prototype.code=e,r[e]=i}function s(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}i("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(e,t,n){var r,i,a,o;if("string"==typeof t&&(i="not ",t.substr(!a||a<0?0:+a,i.length)===i)?(r="must not be",t=t.replace(/^not /,"")):r="must be",function(e,t,n){return(n===undefined||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))o="The ".concat(e," ").concat(r," ").concat(s(t,"type"));else{var u=function(e,t,n){return"number"!=typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}(e,".")?"property":"argument";o='The "'.concat(e,'" ').concat(u," ").concat(r," ").concat(s(t,"type"))}return o+=". Received type ".concat(typeof n)}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=r}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/concat-stream/node_modules/readable-stream/errors-browser.js"}],[1474,{events:2479},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=e("events").EventEmitter}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/concat-stream/node_modules/readable-stream/lib/internal/streams/stream-browser.js"}],[1473,{"../../../errors":1461},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(e,t,n,i){var s=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,i,n);if(null!=s){if(!isFinite(s)||Math.floor(s)!==s||s<0)throw new r(i?n:"highWaterMark",s);return Math.floor(s)}return e.objectMode?16:16384}}}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/concat-stream/node_modules/readable-stream/lib/internal/streams/state.js"}],[1469,{_process:6127},function(){with(this)return function(){"use strict";return function(e,t,n){(function(e){(function(){function n(e,t){i(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}t.exports={destroy:function(t,s){var a=this,o=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return o||u?(s?s(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(i,this,t)):e.nextTick(i,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!s&&t?a._writableState?a._writableState.errorEmitted?e.nextTick(r,a):(a._writableState.errorEmitted=!0,e.nextTick(n,a,t)):e.nextTick(n,a,t):s?(e.nextTick(r,a),s(t)):e.nextTick(r,a)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this)}).call(this,e("_process"))}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/concat-stream/node_modules/readable-stream/lib/internal/streams/destroy.js"}],[1471,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(){throw new Error("Readable.from is not available in the browser")}}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/concat-stream/node_modules/readable-stream/lib/internal/streams/from-browser.js"}],[1468,{buffer:2478,util:2477},function(){with(this)return function(){"use strict";return function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=e("buffer").Buffer,o=e("util").inspect,u=o&&o.custom||"inspect";t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n,c;return t=e,n=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return a.alloc(0);for(var t,n,r,i=a.allocUnsafe(e>>>0),s=this.head,o=0;s;)t=s.data,n=i,r=o,a.prototype.copy.call(t,n,r),o+=s.data.length,s=s.next;return i}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,s=e>i.length?i.length:e;if(s===i.length?r+=i:r+=i.slice(0,e),0==(e-=s)){s===i.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(s));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=a.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var i=n.data,s=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,s),0==(e-=s)){s===i.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=i.slice(s));break}++r}return this.length-=r,t}},{key:u,value:function(e,t){return o(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}],n&&s(t.prototype,n),c&&s(t,c),e}()}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/concat-stream/node_modules/readable-stream/lib/internal/streams/buffer_list.js"}],[1467,{"./end-of-stream":1470,_process:6127},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r;function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=e("./end-of-stream"),a=Symbol("lastResolve"),o=Symbol("lastReject"),u=Symbol("error"),c=Symbol("ended"),l=Symbol("lastPromise"),d=Symbol("handlePromise"),h=Symbol("stream");function f(e,t){return{value:e,done:t}}function m(e){var t=e[a];if(null!==t){var n=e[h].read();null!==n&&(e[l]=null,e[a]=null,e[o]=null,t(f(n,!1)))}}function p(e){n.nextTick(m,e)}var g=Object.getPrototypeOf((function(){})),b=Object.setPrototypeOf((i(r={get stream(){return this[h]},next:function(){var e=this,t=this[u];if(null!==t)return Promise.reject(t);if(this[c])return Promise.resolve(f(undefined,!0));if(this[h].destroyed)return new Promise((function(t,r){n.nextTick((function(){e[u]?r(e[u]):t(f(undefined,!0))}))}));var r,i=this[l];if(i)r=new Promise(function(e,t){return function(n,r){e.then((function(){t[c]?n(f(undefined,!0)):t[d](n,r)}),r)}}(i,this));else{var s=this[h].read();if(null!==s)return Promise.resolve(f(s,!1));r=new Promise(this[d])}return this[l]=r,r}},Symbol.asyncIterator,(function(){return this})),i(r,"return",(function(){var e=this;return new Promise((function(t,n){e[h].destroy(null,(function(e){e?n(e):t(f(undefined,!0))}))}))})),r),g);t.exports=function(e){var t,n=Object.create(b,(i(t={},h,{value:e,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,o,{value:null,writable:!0}),i(t,u,{value:null,writable:!0}),i(t,c,{value:e._readableState.endEmitted,writable:!0}),i(t,d,{value:function(e,t){var r=n[h].read();r?(n[l]=null,n[a]=null,n[o]=null,e(f(r,!1))):(n[a]=e,n[o]=t)},writable:!0}),t));return n[l]=null,s(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[o];return null!==t&&(n[l]=null,n[a]=null,n[o]=null,t(e)),void(n[u]=e)}var r=n[a];null!==r&&(n[l]=null,n[a]=null,n[o]=null,r(f(undefined,!0))),n[c]=!0})),e.on("readable",p.bind(null,n)),n}}).call(this)}).call(this,e("_process"))}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/concat-stream/node_modules/readable-stream/lib/internal/streams/async_iterator.js"}],[1501,{"safe-buffer":6450},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("safe-buffer").Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=c,t=4;break;case"utf8":this.fillLast=o,t=4;break;case"base64":this.text=l,this.end=d,t=3;break;default:return this.write=h,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function o(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return n!==undefined?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function l(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}n.StringDecoder=s,s.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if((t=this.fillLast(e))===undefined)return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},s.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},s.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=a(t[r]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=a(t[r]))>=0)return i>0&&(e.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=a(t[r]))>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}}}},{package:"string_decoder",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/snap-controllers/node_modules/string_decoder/lib/string_decoder.js"}],[6414,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r={};function i(e,t,n){n||(n=Error);var i=function(e){var n,r;function i(n,r,i){return e.call(this,function(e,n,r){return"string"==typeof t?t:t(e,n,r)}(n,r,i))||this}return r=e,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,i}(n);i.prototype.name=n.name,i.prototype.code=e,r[e]=i}function s(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}i("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(e,t,n){var r,i,a,o;if("string"==typeof t&&(i="not ",t.substr(!a||a<0?0:+a,i.length)===i)?(r="must not be",t=t.replace(/^not /,"")):r="must be",function(e,t,n){return(n===undefined||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))o="The ".concat(e," ").concat(r," ").concat(s(t,"type"));else{var u=function(e,t,n){return"number"!=typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}(e,".")?"property":"argument";o='The "'.concat(e,'" ').concat(u," ").concat(r," ").concat(s(t,"type"))}return o+=". Received type ".concat(typeof n)}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=r}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/readable-web-to-node-stream/node_modules/readable-stream/errors-browser.js"}],[6427,{events:2479},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=e("events").EventEmitter}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/stream-browser.js"}],[6422,{_process:6127},function(){with(this)return function(){"use strict";return function(e,t,n){(function(e){(function(){function n(e,t){i(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}t.exports={destroy:function(t,s){var a=this,o=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return o||u?(s?s(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(i,this,t)):e.nextTick(i,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!s&&t?a._writableState?a._writableState.errorEmitted?e.nextTick(r,a):(a._writableState.errorEmitted=!0,e.nextTick(n,a,t)):e.nextTick(n,a,t):s?(e.nextTick(r,a),s(t)):e.nextTick(r,a)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this)}).call(this,e("_process"))}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/destroy.js"}],[6426,{"../../../errors":6414},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(e,t,n,i){var s=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,i,n);if(null!=s){if(!isFinite(s)||Math.floor(s)!==s||s<0)throw new r(i?n:"highWaterMark",s);return Math.floor(s)}return e.objectMode?16:16384}}}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/state.js"}],[6424,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(){throw new Error("Readable.from is not available in the browser")}}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/from-browser.js"}],[6421,{buffer:2478,util:2477},function(){with(this)return function(){"use strict";return function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=e("buffer").Buffer,o=e("util").inspect,u=o&&o.custom||"inspect";t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n,c;return t=e,n=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return a.alloc(0);for(var t,n,r,i=a.allocUnsafe(e>>>0),s=this.head,o=0;s;)t=s.data,n=i,r=o,a.prototype.copy.call(t,n,r),o+=s.data.length,s=s.next;return i}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,s=e>i.length?i.length:e;if(s===i.length?r+=i:r+=i.slice(0,e),0==(e-=s)){s===i.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(s));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=a.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var i=n.data,s=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,s),0==(e-=s)){s===i.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=i.slice(s));break}++r}return this.length-=r,t}},{key:u,value:function(e,t){return o(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}],n&&s(t.prototype,n),c&&s(t,c),e}()}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/buffer_list.js"}],[6420,{"./end-of-stream":6423,_process:6127},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r;function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=e("./end-of-stream"),a=Symbol("lastResolve"),o=Symbol("lastReject"),u=Symbol("error"),c=Symbol("ended"),l=Symbol("lastPromise"),d=Symbol("handlePromise"),h=Symbol("stream");function f(e,t){return{value:e,done:t}}function m(e){var t=e[a];if(null!==t){var n=e[h].read();null!==n&&(e[l]=null,e[a]=null,e[o]=null,t(f(n,!1)))}}function p(e){n.nextTick(m,e)}var g=Object.getPrototypeOf((function(){})),b=Object.setPrototypeOf((i(r={get stream(){return this[h]},next:function(){var e=this,t=this[u];if(null!==t)return Promise.reject(t);if(this[c])return Promise.resolve(f(undefined,!0));if(this[h].destroyed)return new Promise((function(t,r){n.nextTick((function(){e[u]?r(e[u]):t(f(undefined,!0))}))}));var r,i=this[l];if(i)r=new Promise(function(e,t){return function(n,r){e.then((function(){t[c]?n(f(undefined,!0)):t[d](n,r)}),r)}}(i,this));else{var s=this[h].read();if(null!==s)return Promise.resolve(f(s,!1));r=new Promise(this[d])}return this[l]=r,r}},Symbol.asyncIterator,(function(){return this})),i(r,"return",(function(){var e=this;return new Promise((function(t,n){e[h].destroy(null,(function(e){e?n(e):t(f(undefined,!0))}))}))})),r),g);t.exports=function(e){var t,n=Object.create(b,(i(t={},h,{value:e,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,o,{value:null,writable:!0}),i(t,u,{value:null,writable:!0}),i(t,c,{value:e._readableState.endEmitted,writable:!0}),i(t,d,{value:function(e,t){var r=n[h].read();r?(n[l]=null,n[a]=null,n[o]=null,e(f(r,!1))):(n[a]=e,n[o]=t)},writable:!0}),t));return n[l]=null,s(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[o];return null!==t&&(n[l]=null,n[a]=null,n[o]=null,t(e)),void(n[u]=e)}var r=n[a];null!==r&&(n[l]=null,n[a]=null,n[o]=null,r(f(undefined,!0))),n[c]=!0})),e.on("readable",p.bind(null,n)),n}}).call(this)}).call(this,e("_process"))}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/async_iterator.js"}],[6429,{"safe-buffer":6450},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("safe-buffer").Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=c,t=4;break;case"utf8":this.fillLast=o,t=4;break;case"base64":this.text=l,this.end=d,t=3;break;default:return this.write=h,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function o(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return n!==undefined?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function l(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}n.StringDecoder=s,s.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if((t=this.fillLast(e))===undefined)return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},s.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},s.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=a(t[r]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=a(t[r]))>=0)return i>0&&(e.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=a(t[r]))>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}}}},{package:"string_decoder",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/readable-web-to-node-stream/node_modules/string_decoder/lib/string_decoder.js"}],[6636,{"../../../errors":6627},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}t.exports=function e(t,n,s){if("function"==typeof n)return e(t,null,n);n||(n={}),s=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r)}}}(s||i);var a=n.readable||!1!==n.readable&&t.readable,o=n.writable||!1!==n.writable&&t.writable,u=function(){t.writable||l()},c=t._writableState&&t._writableState.finished,l=function(){o=!1,c=!0,a||s.call(t)},d=t._readableState&&t._readableState.endEmitted,h=function(){a=!1,d=!0,o||s.call(t)},f=function(e){s.call(t,e)},m=function(){var e;return a&&!d?(t._readableState&&t._readableState.ended||(e=new r),s.call(t,e)):o&&!c?(t._writableState&&t._writableState.ended||(e=new r),s.call(t,e)):void 0},p=function(){t.req.on("finish",l)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?o&&!t._writableState&&(t.on("end",u),t.on("close",u)):(t.on("complete",l),t.on("abort",m),t.req?p():t.on("request",p)),t.on("end",h),t.on("finish",l),!1!==n.error&&t.on("error",f),t.on("close",m),function(){t.removeListener("complete",l),t.removeListener("abort",m),t.removeListener("request",p),t.req&&t.req.removeListener("finish",l),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",l),t.removeListener("end",h),t.removeListener("error",f),t.removeListener("close",m)}}}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/tar-stream/node_modules/readable-stream/lib/internal/streams/end-of-stream.js"}],[6638,{"../../../errors":6627,"./end-of-stream":6636},function(){with(this)return function(){"use strict";return function(e,t,n){var r;var i=e("../../../errors").codes,s=i.ERR_MISSING_ARGS,a=i.ERR_STREAM_DESTROYED;function o(e){if(e)throw e}function u(t,n,i,s){s=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(s);var o=!1;t.on("close",(function(){o=!0})),r===undefined&&(r=e("./end-of-stream")),r(t,{readable:n,writable:i},(function(e){if(e)return s(e);o=!0,s()}));var u=!1;return function(e){if(!o&&!u)return u=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void s(e||new a("pipe"))}}function c(e){e()}function l(e,t){return e.pipe(t)}function d(e){return e.length?"function"!=typeof e[e.length-1]?o:e.pop():o}t.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=d(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new s("streams");var a=t.map((function(e,n){var s=n<t.length-1;return u(e,s,n>0,(function(e){r||(r=e),e&&a.forEach(c),s||(a.forEach(c),i(r))}))}));return t.reduce(l)}}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/tar-stream/node_modules/readable-stream/lib/internal/streams/pipeline.js"}],[6631,{"../errors":6627,"./_stream_duplex":6628,inherits:5094},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=l;var r=e("../errors").codes,i=r.ERR_METHOD_NOT_IMPLEMENTED,s=r.ERR_MULTIPLE_CALLBACK,a=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,o=r.ERR_TRANSFORM_WITH_LENGTH_0,u=e("./_stream_duplex");function c(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new s);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);u.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function d(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,n){h(e,t,n)}))}function h(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new o;if(e._transformState.transforming)throw new a;return e.push(null)}e("inherits")(l,u),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,n){n(new i("_transform()"))},l.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){u.prototype._destroy.call(this,e,(function(e){t(e)}))}}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/tar-stream/node_modules/readable-stream/lib/_stream_transform.js"}],[6628,{"./_stream_readable":6630,"./_stream_writable":6632,_process:6127,inherits:5094},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=c;var i=e("./_stream_readable"),s=e("./_stream_writable");e("inherits")(c,i);for(var a=r(s.prototype),o=0;o<a.length;o++){var u=a[o];c.prototype[u]||(c.prototype[u]=s.prototype[u])}function c(e){if(!(this instanceof c))return new c(e);i.call(this,e),s.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||n.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this)}).call(this,e("_process"))}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/tar-stream/node_modules/readable-stream/lib/_stream_duplex.js"}],[6632,{"../errors":6627,"./_stream_duplex":6628,"./internal/streams/destroy":6635,"./internal/streams/state":6639,"./internal/streams/stream":6640,_process:6127,buffer:2478,inherits:5094,"util-deprecate":6723},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){function r(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}var i;t.exports=S,S.WritableState=E;var s={deprecate:e("util-deprecate")},a=e("./internal/streams/stream"),o=e("buffer").Buffer,u=global.Uint8Array||function(){};var c,l=e("./internal/streams/destroy"),d=e("./internal/streams/state").getHighWaterMark,h=e("../errors").codes,f=h.ERR_INVALID_ARG_TYPE,m=h.ERR_METHOD_NOT_IMPLEMENTED,p=h.ERR_MULTIPLE_CALLBACK,g=h.ERR_STREAM_CANNOT_PIPE,b=h.ERR_STREAM_DESTROYED,y=h.ERR_STREAM_NULL_VALUES,v=h.ERR_STREAM_WRITE_AFTER_END,w=h.ERR_UNKNOWN_ENCODING,_=l.errorOrDestroy;function k(){}function E(t,s,a){i=i||e("./_stream_duplex"),t=t||{},"boolean"!=typeof a&&(a=s instanceof i),this.objectMode=!!t.objectMode,a&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=d(this,t,"writableHighWaterMark",a),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===t.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,i=r.sync,s=r.writecb;if("function"!=typeof s)throw new p;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,i,s){--t.pendingcb,r?(n.nextTick(s,i),n.nextTick(A,e,t),e._writableState.errorEmitted=!0,_(e,i)):(s(i),e._writableState.errorEmitted=!0,_(e,i),A(e,t))}(e,r,i,t,s);else{var a=R(r)||e.destroyed;a||r.corked||r.bufferProcessing||!r.bufferedRequest||M(e,r),i?n.nextTick(x,e,r,a,s):x(e,r,a,s)}}(s,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function S(t){var n=this instanceof(i=i||e("./_stream_duplex"));if(!n&&!c.call(S,this))return new S(t);this._writableState=new E(t,this,n),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),a.call(this)}function C(e,t,n,r,i,s,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new b("write")):n?e._writev(i,t.onwrite):e._write(i,s,t.onwrite),t.sync=!1}function x(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),A(e,t)}function M(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=t.bufferedRequestCount,s=new Array(i),a=t.corkedRequestsFree;a.entry=n;for(var o=0,u=!0;n;)s[o]=n,n.isBuf||(u=!1),n=n.next,o+=1;s.allBuffers=u,C(e,t,!0,t.length,s,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new r(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,l=n.encoding,d=n.callback;if(C(e,t,!1,t.objectMode?1:c.length,c,l,d),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function R(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function T(e,t){e._final((function(n){t.pendingcb--,n&&_(e,n),t.prefinished=!0,e.emit("prefinish"),A(e,t)}))}function A(e,t){var r=R(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,n.nextTick(T,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return r}e("inherits")(S,a),E.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(E.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer "+"instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(e){return!!c.call(this,e)||this===S&&(e&&e._writableState instanceof E)}})):c=function(e){return e instanceof this},S.prototype.pipe=function(){_(this,new g)},S.prototype.write=function(e,t,r){var i,s=this._writableState,a=!1,c=!s.objectMode&&(i=e,o.isBuffer(i)||i instanceof u);return c&&!o.isBuffer(e)&&(e=function(e){return o.from(e)}(e)),"function"==typeof t&&(r=t,t=null),c?t="buffer":t||(t=s.defaultEncoding),"function"!=typeof r&&(r=k),s.ending?function(e,t){var r=new v;_(e,r),n.nextTick(t,r)}(this,r):(c||function(e,t,r,i){var s;return null===r?s=new y:"string"==typeof r||t.objectMode||(s=new f("chunk",["string","Buffer"],r)),!s||(_(e,s),n.nextTick(i,s),!1)}(this,s,e,r))&&(s.pendingcb++,a=function(e,t,n,r,i,s){if(!n){var a=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=o.from(t,n));return t}(t,r,i);r!==a&&(n=!0,i="buffer",r=a)}var u=t.objectMode?1:r.length;t.length+=u;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:s,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else C(e,t,!1,u,r,i,s);return c}(this,s,c,e,t,r)),a},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||M(this,e))},S.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new w(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),S.prototype._write=function(e,t,n){n(new m("_write()"))},S.prototype._writev=null,S.prototype.end=function(e,t,r){var i=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!==e&&e!==undefined&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,r){t.ending=!0,A(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,i,r),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==undefined&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),S.prototype.destroy=l.destroy,S.prototype._undestroy=l.undestroy,S.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,e("_process"))}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/tar-stream/node_modules/readable-stream/lib/_stream_writable.js"}],[6629,{"./_stream_transform":6631,inherits:5094},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=i;var r=e("./_stream_transform");function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}e("inherits")(i,r),i.prototype._transform=function(e,t,n){n(null,e)}}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/tar-stream/node_modules/readable-stream/lib/_stream_passthrough.js"}]],[],{});