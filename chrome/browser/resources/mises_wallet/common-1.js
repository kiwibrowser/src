LavaPack.loadBundle([[2088,{"object-assign":5996,"util/":2091},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("object-assign");
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function i(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,i=0,s=Math.min(n,r);i<s;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0}function s(e){return global.Buffer&&"function"==typeof global.Buffer.isBuffer?global.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var o=e("util/"),a=Object.prototype.hasOwnProperty,u=Array.prototype.slice,c="foo"===function(){}.name;function l(e){return Object.prototype.toString.call(e)}function d(e){return!s(e)&&("function"==typeof global.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var f=t.exports=v,h=/\s*function\s+([^\(\s]*)\s*/;function p(e){if(o.isFunction(e)){if(c)return e.name;var t=e.toString().match(h);return t&&t[1]}}function g(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function m(e){if(c||!o.isFunction(e))return o.inspect(e);var t=p(e);return"[Function"+(t?": "+t:"")+"]"}function y(e,t,n,r,i){throw new f.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function v(e,t){e||y(e,!0,t,"==",f.ok)}function b(e,t,n,r){if(e===t)return!0;if(s(e)&&s(t))return 0===i(e,t);if(o.isDate(e)&&o.isDate(t))return e.getTime()===t.getTime();if(o.isRegExp(e)&&o.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(d(e)&&d(t)&&l(e)===l(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===i(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(s(e)!==s(t))return!1;var a=(r=r||{actual:[],expected:[]}).actual.indexOf(e);return-1!==a&&a===r.expected.indexOf(t)||(r.actual.push(e),r.expected.push(t),function(e,t,n,r){if(null===e||e===undefined||null===t||t===undefined)return!1;if(o.isPrimitive(e)||o.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=_(e),s=_(t);if(i&&!s||!i&&s)return!1;if(i)return b(e=u.call(e),t=u.call(t),n);var a,c,l=S(e),d=S(t);if(l.length!==d.length)return!1;for(l.sort(),d.sort(),c=l.length-1;c>=0;c--)if(l[c]!==d[c])return!1;for(c=l.length-1;c>=0;c--)if(!b(e[a=l[c]],t[a],n,r))return!1;return!0}(e,t,n,r))}return n?e===t:e==t}function _(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function w(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function k(e,t,n,r){var i;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),i=function(e){var t;try{e()}catch(e){t=e}return t}(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&y(i,n,"Missing expected exception"+r);var s="string"==typeof r,a=!e&&i&&!n;if((!e&&o.isError(i)&&s&&w(i,n)||a)&&y(i,n,"Got unwanted exception"+r),e&&i&&n&&!w(i,n)||!e&&i)throw i}f.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return g(m(e.actual),128)+" "+e.operator+" "+g(m(e.expected),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||y;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,i=p(t),s=r.indexOf("\n"+i);if(s>=0){var o=r.indexOf("\n",s+1);r=r.substring(o+1)}this.stack=r}}},o.inherits(f.AssertionError,Error),f.fail=y,f.ok=v,f.equal=function(e,t,n){e!=t&&y(e,t,n,"==",f.equal)},f.notEqual=function(e,t,n){e==t&&y(e,t,n,"!=",f.notEqual)},f.deepEqual=function(e,t,n){b(e,t,!1)||y(e,t,n,"deepEqual",f.deepEqual)},f.deepStrictEqual=function(e,t,n){b(e,t,!0)||y(e,t,n,"deepStrictEqual",f.deepStrictEqual)},f.notDeepEqual=function(e,t,n){b(e,t,!1)&&y(e,t,n,"notDeepEqual",f.notDeepEqual)},f.notDeepStrictEqual=function e(t,n,r){b(t,n,!0)&&y(t,n,r,"notDeepStrictEqual",e)},f.strictEqual=function(e,t,n){e!==t&&y(e,t,n,"===",f.strictEqual)},f.notStrictEqual=function(e,t,n){e===t&&y(e,t,n,"!==",f.notStrictEqual)},f.throws=function(e,t,n){k(!0,e,t,n)},f.doesNotThrow=function(e,t,n){k(!1,e,t,n)},f.ifError=function(e){if(e)throw e},f.strict=r((function e(t,n){t||y(t,!0,n,"==",e)}),f,{equal:f.strictEqual,deepEqual:f.deepStrictEqual,notEqual:f.notStrictEqual,notDeepEqual:f.notDeepStrictEqual}),f.strict.strict=f.strict;var S=Object.keys||function(e){var t=[];for(var n in e)a.call(e,n)&&t.push(n);return t}}}},{package:"assert",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/assert/assert.js"}],[6915,{"../constants/network":6904},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isPrefixedFormattedHexString=function(e){if("string"!=typeof e)return!1;return/^0x[1-9a-f]+[0-9a-f]*$/iu.test(e)},n.isSafeChainId=function(e){return Number.isSafeInteger(e)&&e>0&&e<=r.MAX_SAFE_CHAIN_ID},n.isTokenDetectionEnabledForNetwork=function(e){switch(e){case r.MAINNET_CHAIN_ID:case r.BSC_CHAIN_ID:case r.POLYGON_CHAIN_ID:case r.AVALANCHE_CHAIN_ID:return!0;default:return!1}};var r=e("../constants/network")}}},{package:"<root>",file:"/Users/mac/code/a-mises/metamask-extension/shared/modules/network.utils.js"}],[3131,{buffer:2478,"ethereumjs-abi":3175,"ethereumjs-util":3132,tweetnacl:6705,"tweetnacl-util":6704},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(n,"__esModule",{value:!0}),n.recoverTypedSignature_v4=n.recoverTypedSignature=n.signTypedData_v4=n.signTypedData=n.recoverTypedMessage=n.signTypedMessage=n.getEncryptionPublicKey=n.decryptSafely=n.decrypt=n.encryptSafely=n.encrypt=n.recoverTypedSignatureLegacy=n.signTypedDataLegacy=n.typedSignatureHash=n.extractPublicKey=n.recoverPersonalSignature=n.personalSign=n.normalize=n.concatSig=n.TypedDataUtils=n.TYPED_MESSAGE_SCHEMA=void 0;const o=s(e("ethereumjs-util")),a=s(e("ethereumjs-abi")),u=s(e("tweetnacl")),c=s(e("tweetnacl-util")),l={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]};n.TYPED_MESSAGE_SCHEMA=l;const d={encodeData(e,n,r,i=!0){const s=["bytes32"],u=[this.hashType(e,r)];if(i){const c=(e,n,s)=>{if(r[n]!==undefined)return["bytes32",null==s?"0x0000000000000000000000000000000000000000000000000000000000000000":o.keccak(this.encodeData(n,s,r,i))];if(s===undefined)throw new Error(`missing value for field ${e} of type ${n}`);if("bytes"===n)return["bytes32",o.keccak(s)];if("string"===n)return"string"==typeof s&&(s=t.from(s,"utf8")),["bytes32",o.keccak(s)];if(n.lastIndexOf("]")===n.length-1){const t=n.slice(0,n.lastIndexOf("[")),r=s.map((n=>c(e,t,n)));return["bytes32",o.keccak(a.rawEncode(r.map((([e])=>e)),r.map((([,e])=>e))))]}return[n,s]};for(const t of r[e]){const[e,r]=c(t.name,t.type,n[t.name]);s.push(e),u.push(r)}}else for(const a of r[e]){let e=n[a.name];if(e!==undefined)if("bytes"===a.type)s.push("bytes32"),e=o.keccak(e),u.push(e);else if("string"===a.type)s.push("bytes32"),"string"==typeof e&&(e=t.from(e,"utf8")),e=o.keccak(e),u.push(e);else if(r[a.type]!==undefined)s.push("bytes32"),e=o.keccak(this.encodeData(a.type,e,r,i)),u.push(e);else{if(a.type.lastIndexOf("]")===a.type.length-1)throw new Error("Arrays are unimplemented in encodeData; use V4 extension");s.push(a.type),u.push(e)}}return a.rawEncode(s,u)},encodeType(e,t){let n="",r=this.findTypeDependencies(e,t).filter((t=>t!==e));r=[e].concat(r.sort());for(const e of r){if(!t[e])throw new Error(`No type definition specified: ${e}`);n+=`${e}(${t[e].map((({name:e,type:t})=>`${t} ${e}`)).join(",")})`}return n},findTypeDependencies(e,t,n=[]){if([e]=e.match(/^\w*/u),n.includes(e)||t[e]===undefined)return n;n.push(e);for(const r of t[e])for(const e of this.findTypeDependencies(r.type,t,n))!n.includes(e)&&n.push(e);return n},hashStruct(e,t,n,r=!0){return o.keccak(this.encodeData(e,t,n,r))},hashType(e,t){return o.keccak(this.encodeType(e,t))},sanitizeData(e){const t={};for(const n in l.properties)e[n]&&(t[n]=e[n]);return"types"in t&&(t.types=Object.assign({EIP712Domain:[]},t.types)),t},sign(e,n=!0){const r=this.sanitizeData(e),i=[t.from("1901","hex")];return i.push(this.hashStruct("EIP712Domain",r.domain,r.types,n)),"EIP712Domain"!==r.primaryType&&i.push(this.hashStruct(r.primaryType,r.message,r.types,n)),o.keccak(t.concat(i))}};function f(e,t,n){const r=o.fromSigned(t),i=o.fromSigned(n),s=o.bufferToInt(e),a=T(o.toUnsigned(r).toString("hex"),64),u=T(o.toUnsigned(i).toString("hex"),64),c=o.stripHexPrefix(o.intToHex(s));return o.addHexPrefix(a.concat(u,c)).toString("hex")}function h(e,t){const n=w(t.data),r=o.ecsign(n,e);return o.bufferToHex(f(r.v,r.r,r.s))}function p(e){const t=k(w(e.data),e.sig),n=o.publicToAddress(t);return o.bufferToHex(n)}function g(e,t,n){if("x25519-xsalsa20-poly1305"===n){if("string"!=typeof t.data)throw new Error('Cannot detect secret message, message params should be of the form {data: "secret message"} ');const n=u.box.keyPair();let r;try{r=c.decodeBase64(e)}catch(e){throw new Error("Bad public key")}const i=c.decodeUTF8(t.data),s=u.randomBytes(u.box.nonceLength),o=u.box(i,s,r,n.secretKey);return{version:"x25519-xsalsa20-poly1305",nonce:c.encodeBase64(s),ephemPublicKey:c.encodeBase64(n.publicKey),ciphertext:c.encodeBase64(o)}}throw new Error("Encryption type/version not supported")}function m(e,t){if("x25519-xsalsa20-poly1305"===e.version){const n=E(t),r=u.box.keyPair.fromSecretKey(n).secretKey,i=c.decodeBase64(e.nonce),s=c.decodeBase64(e.ciphertext),o=c.decodeBase64(e.ephemPublicKey),a=u.box.open(s,i,o,r);let l;try{l=c.encodeUTF8(a)}catch(e){throw new Error("Decryption failed.")}if(l)return l;throw new Error("Decryption failed.")}throw new Error("Encryption type/version not supported.")}function y(e,t){const n=d.sign(t.data,!1),r=o.ecsign(n,e);return o.bufferToHex(f(r.v,r.r,r.s))}function v(e,t){const n=d.sign(t.data),r=o.ecsign(n,e);return o.bufferToHex(f(r.v,r.r,r.s))}function b(e){const t=k(d.sign(e.data,!1),e.sig),n=o.publicToAddress(t);return o.bufferToHex(n)}function _(e){const t=k(d.sign(e.data),e.sig),n=o.publicToAddress(t);return o.bufferToHex(n)}function w(e){const t=new Error("Expect argument to be non-empty array");if("object"!=typeof e||!("length"in e)||!e.length)throw t;const n=e.map((function(e){return"bytes"===e.type?o.toBuffer(e.value):e.value})),r=e.map((function(e){return e.type})),i=e.map((function(e){if(!e.name)throw t;return`${e.type} ${e.name}`}));return a.soliditySHA3(["bytes32","bytes32"],[a.soliditySHA3(new Array(e.length).fill("string"),i),a.soliditySHA3(r,n)])}function k(e,t){const n=o.toBuffer(t),r=o.fromRpcSig(n);return o.ecrecover(e,r.v,r.r,r.s)}function S(e){const t=o.toBuffer(e.data);return k(o.hashPersonalMessage(t),e.sig)}function T(e,t){let n=`${e}`;for(;n.length<t;)n=`0${n}`;return n}function E(e){const n=t.from(e,"hex").toString("base64");return c.decodeBase64(n)}n.TypedDataUtils=d,n.concatSig=f,n.normalize=function(e){if(!e)return undefined;if("number"==typeof e){const t=o.toBuffer(e);e=o.bufferToHex(t)}if("string"!=typeof e){let t="eth-sig-util.normalize() requires hex string or integer input.";throw t+=` received ${typeof e}: ${e}`,new Error(t)}return o.addHexPrefix(e.toLowerCase())},n.personalSign=function(e,t){const n=o.toBuffer(t.data),r=o.hashPersonalMessage(n),i=o.ecsign(r,e);return o.bufferToHex(f(i.v,i.r,i.s))},n.recoverPersonalSignature=function(e){const t=S(e),n=o.publicToAddress(t);return o.bufferToHex(n)},n.extractPublicKey=function(e){return`0x${S(e).toString("hex")}`},n.typedSignatureHash=function(e){const t=w(e);return o.bufferToHex(t)},n.signTypedDataLegacy=h,n.recoverTypedSignatureLegacy=p,n.encrypt=g,n.encryptSafely=function(e,n,r){const{data:i}=n;if(!i)throw new Error("Cannot encrypt empty msg.data");if("object"==typeof i&&"toJSON"in i)throw new Error("Cannot encrypt with toJSON property.  Please remove toJSON property");const s={data:i,padding:""},o=t.byteLength(JSON.stringify(s),"utf-8")%2048;let a=0;return o>0&&(a=2048-o-16),s.padding="0".repeat(a),g(e,{data:JSON.stringify(s)},r)},n.decrypt=m,n.decryptSafely=function(e,t){return JSON.parse(m(e,t)).data},n.getEncryptionPublicKey=function(e){const t=E(e),n=u.box.keyPair.fromSecretKey(t).publicKey;return c.encodeBase64(n)},n.signTypedMessage=function(e,t,n="V4"){switch(n){case"V1":return h(e,t);case"V3":return y(e,t);default:return v(e,t)}},n.recoverTypedMessage=function(e,t="V4"){switch(t){case"V1":return p(e);case"V3":return b(e);default:return _(e)}},n.signTypedData=y,n.signTypedData_v4=v,n.recoverTypedSignature=b,n.recoverTypedSignature_v4=_}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"eth-sig-util",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/eth-sig-util/dist/index.js"}],[3219,{"./ethers":3218},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(n,"__esModule",{value:!0}),n.Wordlist=n.version=n.wordlists=n.utils=n.logger=n.errors=n.constants=n.FixedNumber=n.BigNumber=n.ContractFactory=n.Contract=n.BaseContract=n.providers=n.getDefaultProvider=n.VoidSigner=n.Wallet=n.Signer=n.ethers=void 0;var o=s(e("./ethers"));n.ethers=o;try{var a=window;null==a._ethers&&(a._ethers=o)}catch(e){}var u=e("./ethers");Object.defineProperty(n,"Signer",{enumerable:!0,get:function(){return u.Signer}}),Object.defineProperty(n,"Wallet",{enumerable:!0,get:function(){return u.Wallet}}),Object.defineProperty(n,"VoidSigner",{enumerable:!0,get:function(){return u.VoidSigner}}),Object.defineProperty(n,"getDefaultProvider",{enumerable:!0,get:function(){return u.getDefaultProvider}}),Object.defineProperty(n,"providers",{enumerable:!0,get:function(){return u.providers}}),Object.defineProperty(n,"BaseContract",{enumerable:!0,get:function(){return u.BaseContract}}),Object.defineProperty(n,"Contract",{enumerable:!0,get:function(){return u.Contract}}),Object.defineProperty(n,"ContractFactory",{enumerable:!0,get:function(){return u.ContractFactory}}),Object.defineProperty(n,"BigNumber",{enumerable:!0,get:function(){return u.BigNumber}}),Object.defineProperty(n,"FixedNumber",{enumerable:!0,get:function(){return u.FixedNumber}}),Object.defineProperty(n,"constants",{enumerable:!0,get:function(){return u.constants}}),Object.defineProperty(n,"errors",{enumerable:!0,get:function(){return u.errors}}),Object.defineProperty(n,"logger",{enumerable:!0,get:function(){return u.logger}}),Object.defineProperty(n,"utils",{enumerable:!0,get:function(){return u.utils}}),Object.defineProperty(n,"wordlists",{enumerable:!0,get:function(){return u.wordlists}}),Object.defineProperty(n,"version",{enumerable:!0,get:function(){return u.version}}),Object.defineProperty(n,"Wordlist",{enumerable:!0,get:function(){return u.Wordlist}})}}},{package:"ethers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/ethers/lib/index.js"}],[5432,{"./helpers":5431,"./scan":5433,"./validator":5434},function(){with(this)return function(){"use strict";return function(e,t,n){var r=t.exports.Validator=e("./validator");t.exports.ValidatorResult=e("./helpers").ValidatorResult,t.exports.ValidationError=e("./helpers").ValidationError,t.exports.SchemaError=e("./helpers").SchemaError,t.exports.SchemaScanResult=e("./scan").SchemaScanResult,t.exports.scan=e("./scan").scan,t.exports.validate=function(e,t,n){return(new r).validate(e,t,n)}}}},{package:"jsonschema",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/jsonschema/lib/index.js"}],[6898,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.WEB3_SHIM_USAGE_ALERT_STATES=n.TOGGLEABLE_ALERT_TYPES=n.ALERT_TYPES=void 0;const r={unconnectedAccount:"unconnectedAccount",web3ShimUsage:"web3ShimUsage",invalidCustomNetwork:"invalidCustomNetwork"};n.ALERT_TYPES=r;const i=[r.unconnectedAccount,r.web3ShimUsage];n.TOGGLEABLE_ALERT_TYPES=i;n.WEB3_SHIM_USAGE_ALERT_STATES={RECORDED:1,DISMISSED:2}}}},{package:"<root>",file:"/Users/mac/code/a-mises/metamask-extension/shared/constants/alerts.js"}],[6547,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=[{payable:!0,stateMutability:"payable",type:"fallback"},{constant:!0,inputs:[{name:"user",type:"address"},{name:"token",type:"address"}],name:"tokenBalance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"users",type:"address[]"},{name:"tokens",type:"address[]"}],name:"balances",outputs:[{name:"",type:"uint256[]"}],payable:!1,stateMutability:"view",type:"function"}]}}},{package:"single-call-balance-checker-abi",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/single-call-balance-checker-abi/index.js"}],[6823,{"./lib/web3":6845},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./lib/web3");"undefined"!=typeof window&&void 0===window.Web3&&(window.Web3=r),t.exports=r}}},{package:"web3",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/web3/index.js"}],[6155,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r,i;r=window,i=function(){return n={},e.m=t=[function(e,t,n){e.exports={}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default={PNTimeOperation:"PNTimeOperation",PNHistoryOperation:"PNHistoryOperation",PNDeleteMessagesOperation:"PNDeleteMessagesOperation",PNFetchMessagesOperation:"PNFetchMessagesOperation",PNMessageCounts:"PNMessageCountsOperation",PNSubscribeOperation:"PNSubscribeOperation",PNUnsubscribeOperation:"PNUnsubscribeOperation",PNPublishOperation:"PNPublishOperation",PNSignalOperation:"PNSignalOperation",PNAddMessageActionOperation:"PNAddActionOperation",PNRemoveMessageActionOperation:"PNRemoveMessageActionOperation",PNGetMessageActionsOperation:"PNGetMessageActionsOperation",PNCreateUserOperation:"PNCreateUserOperation",PNUpdateUserOperation:"PNUpdateUserOperation",PNDeleteUserOperation:"PNDeleteUserOperation",PNGetUserOperation:"PNGetUsersOperation",PNGetUsersOperation:"PNGetUsersOperation",PNCreateSpaceOperation:"PNCreateSpaceOperation",PNUpdateSpaceOperation:"PNUpdateSpaceOperation",PNDeleteSpaceOperation:"PNDeleteSpaceOperation",PNGetSpaceOperation:"PNGetSpacesOperation",PNGetSpacesOperation:"PNGetSpacesOperation",PNGetMembersOperation:"PNGetMembersOperation",PNUpdateMembersOperation:"PNUpdateMembersOperation",PNGetMembershipsOperation:"PNGetMembershipsOperation",PNUpdateMembershipsOperation:"PNUpdateMembershipsOperation",PNPushNotificationEnabledChannelsOperation:"PNPushNotificationEnabledChannelsOperation",PNRemoveAllPushNotificationsOperation:"PNRemoveAllPushNotificationsOperation",PNWhereNowOperation:"PNWhereNowOperation",PNSetStateOperation:"PNSetStateOperation",PNHereNowOperation:"PNHereNowOperation",PNGetStateOperation:"PNGetStateOperation",PNHeartbeatOperation:"PNHeartbeatOperation",PNChannelGroupsOperation:"PNChannelGroupsOperation",PNRemoveGroupOperation:"PNRemoveGroupOperation",PNChannelsForGroupOperation:"PNChannelsForGroupOperation",PNAddChannelsToGroupOperation:"PNAddChannelsToGroupOperation",PNRemoveChannelsFromGroupOperation:"PNRemoveChannelsFromGroupOperation",PNAccessManagerGrant:"PNAccessManagerGrant",PNAccessManagerGrantToken:"PNAccessManagerGrantToken",PNAccessManagerAudit:"PNAccessManagerAudit"},e.exports=t.default},function(e,t,n){function r(e){return encodeURIComponent(e).replace(/[!~*'()]/g,(function(e){return"%".concat(e.charCodeAt(0).toString(16).toUpperCase())}))}e.exports={signPamFromParams:function(e){return function(e){return function(e){var t=[];return Object.keys(e).forEach((function(e){return t.push(e)})),t}(e).sort()}(e).map((function(t){return"".concat(t,"=").concat(r(e[t]))})).join("&")},endsWith:function(e,t){return-1!==e.indexOf(t,this.length-t.length)},createPromise:function(){var e,t;return{promise:new Promise((function(n,r){e=n,t=r})),reject:t,fulfill:e}},encodeString:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(5))&&r.__esModule?r:{default:r};function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(0);var a,u,c=(a=l,(u=[{key:"getAuthKey",value:function(){return this.authKey}},{key:"setAuthKey",value:function(e){return this.authKey=e,this}},{key:"setCipherKey",value:function(e){return this.cipherKey=e,this}},{key:"getUUID",value:function(){return this.UUID}},{key:"setUUID",value:function(e){return this._db&&this._db.set&&this._db.set("".concat(this.subscribeKey,"uuid"),e),this.UUID=e,this}},{key:"getFilterExpression",value:function(){return this.filterExpression}},{key:"setFilterExpression",value:function(e){return this.filterExpression=e,this}},{key:"getPresenceTimeout",value:function(){return this._presenceTimeout}},{key:"setPresenceTimeout",value:function(e){return 20<=e?this._presenceTimeout=e:(this._presenceTimeout=20,console.log("WARNING: Presence timeout is less than the minimum. Using minimum value: ",this._presenceTimeout)),this.setHeartbeatInterval(this._presenceTimeout/2-1),this}},{key:"setProxy",value:function(e){this.proxy=e}},{key:"getHeartbeatInterval",value:function(){return this._heartbeatInterval}},{key:"setHeartbeatInterval",value:function(e){return this._heartbeatInterval=e,this}},{key:"getSubscribeTimeout",value:function(){return this._subscribeRequestTimeout}},{key:"setSubscribeTimeout",value:function(e){return this._subscribeRequestTimeout=e,this}},{key:"getTransactionTimeout",value:function(){return this._transactionalRequestTimeout}},{key:"setTransactionTimeout",value:function(e){return this._transactionalRequestTimeout=e,this}},{key:"isSendBeaconEnabled",value:function(){return this._useSendBeacon}},{key:"setSendBeaconConfig",value:function(e){return this._useSendBeacon=e,this}},{key:"getVersion",value:function(){return"4.27.3"}},{key:"_addPnsdkSuffix",value:function(e,t){this._PNSDKSuffix[e]=t}},{key:"_getPnsdkSuffix",value:function(e){var t=this;return Object.keys(this._PNSDKSuffix).reduce((function(n,r){return n+e+t._PNSDKSuffix[r]}),"")}},{key:"_decideUUID",value:function(e){return e||(this._db&&this._db.get&&this._db.get("".concat(this.subscribeKey,"uuid"))?this._db.get("".concat(this.subscribeKey,"uuid")):"pn-".concat(i.default.createUUID()))}}])&&s(a.prototype,u),l);function l(e){var t=e.setup,n=e.db;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),o(this,"_db",void 0),o(this,"subscribeKey",void 0),o(this,"publishKey",void 0),o(this,"secretKey",void 0),o(this,"cipherKey",void 0),o(this,"authKey",void 0),o(this,"UUID",void 0),o(this,"proxy",void 0),o(this,"instanceId",void 0),o(this,"sdkName",void 0),o(this,"sdkFamily",void 0),o(this,"partnerId",void 0),o(this,"filterExpression",void 0),o(this,"suppressLeaveEvents",void 0),o(this,"secure",void 0),o(this,"origin",void 0),o(this,"logVerbosity",void 0),o(this,"useInstanceId",void 0),o(this,"useRequestId",void 0),o(this,"keepAlive",void 0),o(this,"keepAliveSettings",void 0),o(this,"autoNetworkDetection",void 0),o(this,"announceSuccessfulHeartbeats",void 0),o(this,"announceFailedHeartbeats",void 0),o(this,"_presenceTimeout",void 0),o(this,"_heartbeatInterval",void 0),o(this,"_subscribeRequestTimeout",void 0),o(this,"_transactionalRequestTimeout",void 0),o(this,"_useSendBeacon",void 0),o(this,"_PNSDKSuffix",void 0),o(this,"requestMessageCountThreshold",void 0),o(this,"restore",void 0),o(this,"dedupeOnSubscribe",void 0),o(this,"maximumCacheSize",void 0),o(this,"customEncrypt",void 0),o(this,"customDecrypt",void 0),this._PNSDKSuffix={},this._db=n,this.instanceId="pn-".concat(i.default.createUUID()),this.secretKey=t.secretKey||t.secret_key,this.subscribeKey=t.subscribeKey||t.subscribe_key,this.publishKey=t.publishKey||t.publish_key,this.sdkName=t.sdkName,this.sdkFamily=t.sdkFamily,this.partnerId=t.partnerId,this.setAuthKey(t.authKey),this.setCipherKey(t.cipherKey),this.setFilterExpression(t.filterExpression),this.origin=t.origin||"ps.pndsn.com",this.secure=t.ssl||!1,this.restore=t.restore||!1,this.proxy=t.proxy,this.keepAlive=t.keepAlive,this.keepAliveSettings=t.keepAliveSettings,this.autoNetworkDetection=t.autoNetworkDetection||!1,this.dedupeOnSubscribe=t.dedupeOnSubscribe||!1,this.maximumCacheSize=t.maximumCacheSize||100,this.customEncrypt=t.customEncrypt,this.customDecrypt=t.customDecrypt,"undefined"!=typeof location&&"https:"===location.protocol&&(this.secure=!0),this.logVerbosity=t.logVerbosity||!1,this.suppressLeaveEvents=t.suppressLeaveEvents||!1,this.announceFailedHeartbeats=t.announceFailedHeartbeats||!0,this.announceSuccessfulHeartbeats=t.announceSuccessfulHeartbeats||!1,this.useInstanceId=t.useInstanceId||!1,this.useRequestId=t.useRequestId||!1,this.requestMessageCountThreshold=t.requestMessageCountThreshold,this.setTransactionTimeout(t.transactionalRequestTimeout||15e3),this.setSubscribeTimeout(t.subscribeRequestTimeout||31e4),this.setSendBeaconConfig(t.useSendBeacon||!0),t.presenceTimeout?this.setPresenceTimeout(t.presenceTimeout):this._presenceTimeout=300,null!=t.heartbeatInterval&&this.setHeartbeatInterval(t.heartbeatInterval),this.setUUID(this._decideUUID(t.uuid))}t.default=c,e.exports=t.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default={PNNetworkUpCategory:"PNNetworkUpCategory",PNNetworkDownCategory:"PNNetworkDownCategory",PNNetworkIssuesCategory:"PNNetworkIssuesCategory",PNTimeoutCategory:"PNTimeoutCategory",PNBadRequestCategory:"PNBadRequestCategory",PNAccessDeniedCategory:"PNAccessDeniedCategory",PNUnknownCategory:"PNUnknownCategory",PNReconnectedCategory:"PNReconnectedCategory",PNConnectedCategory:"PNConnectedCategory",PNRequestMessageCountExceededCategory:"PNRequestMessageCountExceededCategory"},e.exports=t.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(13))&&r.__esModule?r:{default:r},s={createUUID:function(){return i.default.uuid?i.default.uuid():(0,i.default)()}};t.default=s,e.exports=t.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i(n(3));var r=i(n(14));function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a,u,c=(a=l,(u=[{key:"HMACSHA256",value:function(e){return r.default.HmacSHA256(e,this._config.secretKey).toString(r.default.enc.Base64)}},{key:"SHA256",value:function(e){return r.default.SHA256(e).toString(r.default.enc.Hex)}},{key:"_parseOptions",value:function(e){var t=e||{};return t.hasOwnProperty("encryptKey")||(t.encryptKey=this._defaultOptions.encryptKey),t.hasOwnProperty("keyEncoding")||(t.keyEncoding=this._defaultOptions.keyEncoding),t.hasOwnProperty("keyLength")||(t.keyLength=this._defaultOptions.keyLength),t.hasOwnProperty("mode")||(t.mode=this._defaultOptions.mode),-1===this._allowedKeyEncodings.indexOf(t.keyEncoding.toLowerCase())&&(t.keyEncoding=this._defaultOptions.keyEncoding),-1===this._allowedKeyLengths.indexOf(parseInt(t.keyLength,10))&&(t.keyLength=this._defaultOptions.keyLength),-1===this._allowedModes.indexOf(t.mode.toLowerCase())&&(t.mode=this._defaultOptions.mode),t}},{key:"_decodeKey",value:function(e,t){return"base64"===t.keyEncoding?r.default.enc.Base64.parse(e):"hex"===t.keyEncoding?r.default.enc.Hex.parse(e):e}},{key:"_getPaddedKey",value:function(e,t){return e=this._decodeKey(e,t),t.encryptKey?r.default.enc.Utf8.parse(this.SHA256(e).slice(0,32)):e}},{key:"_getMode",value:function(e){return"ecb"===e.mode?r.default.mode.ECB:r.default.mode.CBC}},{key:"_getIV",value:function(e){return"cbc"===e.mode?r.default.enc.Utf8.parse(this._iv):null}},{key:"encrypt",value:function(e,t,n){return this._config.customEncrypt?this._config.customEncrypt(e):this.pnEncrypt(e,t,n)}},{key:"decrypt",value:function(e,t,n){return this._config.customDecrypt?this._config.customDecrypt(e):this.pnDecrypt(e,t,n)}},{key:"pnEncrypt",value:function(e,t,n){if(!t&&!this._config.cipherKey)return e;n=this._parseOptions(n);var i=this._getIV(n),s=this._getMode(n),o=this._getPaddedKey(t||this._config.cipherKey,n);return r.default.AES.encrypt(e,o,{iv:i,mode:s}).ciphertext.toString(r.default.enc.Base64)||e}},{key:"pnDecrypt",value:function(e,t,n){if(!t&&!this._config.cipherKey)return e;n=this._parseOptions(n);var i=this._getIV(n),s=this._getMode(n),o=this._getPaddedKey(t||this._config.cipherKey,n);try{var a=r.default.enc.Base64.parse(e),u=r.default.AES.decrypt({ciphertext:a},o,{iv:i,mode:s}).toString(r.default.enc.Utf8);return JSON.parse(u)}catch(e){return null}}}])&&s(a.prototype,u),l);function l(e){var t=e.config;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),o(this,"_config",void 0),o(this,"_iv",void 0),o(this,"_allowedKeyEncodings",void 0),o(this,"_allowedKeyLengths",void 0),o(this,"_allowedModes",void 0),o(this,"_defaultOptions",void 0),this._config=t,this._iv="0123456789012345",this._allowedKeyEncodings=["hex","utf8","base64","binary"],this._allowedKeyLengths=[128,256],this._allowedModes=["ecb","cbc"],this._defaultOptions={encryptKey:!0,keyEncoding:"utf8",keyLength:256,mode:"cbc"}}t.default=c,e.exports=t.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(0);var r,i=(r=n(4))&&r.__esModule?r:{default:r};function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o,a,u=(o=c,(a=[{key:"addListener",value:function(e){this._listeners.push(e)}},{key:"removeListener",value:function(e){var t=[];this._listeners.forEach((function(n){n!==e&&t.push(n)})),this._listeners=t}},{key:"removeAllListeners",value:function(){this._listeners=[]}},{key:"announcePresence",value:function(e){this._listeners.forEach((function(t){t.presence&&t.presence(e)}))}},{key:"announceStatus",value:function(e){this._listeners.forEach((function(t){t.status&&t.status(e)}))}},{key:"announceMessage",value:function(e){this._listeners.forEach((function(t){t.message&&t.message(e)}))}},{key:"announceSignal",value:function(e){this._listeners.forEach((function(t){t.signal&&t.signal(e)}))}},{key:"announceMessageAction",value:function(e){this._listeners.forEach((function(t){t.messageAction&&t.messageAction(e)}))}},{key:"announceUser",value:function(e){this._listeners.forEach((function(t){t.user&&t.user(e)}))}},{key:"announceSpace",value:function(e){this._listeners.forEach((function(t){t.space&&t.space(e)}))}},{key:"announceMembership",value:function(e){this._listeners.forEach((function(t){t.membership&&t.membership(e)}))}},{key:"announceNetworkUp",value:function(){var e={};e.category=i.default.PNNetworkUpCategory,this.announceStatus(e)}},{key:"announceNetworkDown",value:function(){var e={};e.category=i.default.PNNetworkDownCategory,this.announceStatus(e)}}])&&s(o.prototype,a),c);function c(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"_listeners",void 0),this._listeners=[]}t.default=u,e.exports=t.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNTimeOperation},t.getURL=function(){return"/time/0"},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.prepareParams=function(){return{}},t.isAuthSupported=function(){return!1},t.handleResponse=function(e,t){return{timetoken:t[0]}},t.validateParams=function(){},n(0);var r,i=(r=n(1))&&r.__esModule?r:{default:r}},function(e,t,n){(function(e){var r=n(71),i=n(72),s=n(73);function o(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,n);if("number"!=typeof e)return c(this,e,t,n);if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}function c(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=f(e,t),e}(e,t,n,r):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n),i=(e=a(e,r)).write(t,n);return i!==r&&(e=e.slice(0,i)),e}(e,t,n):function(e,t){if(u.isBuffer(t)){var n=0|h(t.length);return 0===(e=a(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function(e){return e!=e}(t.length)?a(e,0):f(e,t);if("Buffer"===t.type&&s(t.data))return f(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(l(t),e=a(e,t<0?0:0|h(t)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function f(e,t){var n=t.length<0?0:0|h(t.length);e=a(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function p(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return D(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return B(e).length;default:if(r)return D(e).length;t=(""+t).toLowerCase(),r=!0}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function m(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:y(e,t,n,r,i);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):y(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,r,i){var s,o=1,a=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a/=o=2,u/=2,n/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var l=-1;for(s=n;s<a;s++)if(c(e,s)===c(t,-1===l?0:s-l)){if(-1===l&&(l=s),s-l+1===u)return l*o}else-1!==l&&(s-=s-l),l=-1}else for(a<n+u&&(n=a-u),s=n;0<=s;s--){for(var d=!0,f=0;f<u;f++)if(c(e,s+f)!==c(t,f)){d=!1;break}if(d)return s}return-1}function v(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?i<(r=Number(r))&&(r=i):r=i;var s=t.length;if(s%2!=0)throw new TypeError("Invalid hex string");s/2<r&&(r=s/2);for(var o=0;o<r;++o){var a=parseInt(t.substr(2*o,2),16);if(isNaN(a))return o;e[n+o]=a}return o}function b(e,t,n,r){return U(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function _(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function w(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var s,o,a,u,c=e[i],l=null,d=239<c?4:223<c?3:191<c?2:1;if(i+d<=n)switch(d){case 1:c<128&&(l=c);break;case 2:128==(192&(s=e[i+1]))&&127<(u=(31&c)<<6|63&s)&&(l=u);break;case 3:s=e[i+1],o=e[i+2],128==(192&s)&&128==(192&o)&&2047<(u=(15&c)<<12|(63&s)<<6|63&o)&&(u<55296||57343<u)&&(l=u);break;case 4:s=e[i+1],o=e[i+2],a=e[i+3],128==(192&s)&&128==(192&o)&&128==(192&a)&&65535<(u=(15&c)<<18|(63&s)<<12|(63&o)<<6|63&a)&&u<1114112&&(l=u)}null===l?(l=65533,d=1):65535<l&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=d}return function(e){var t=e.length;if(t<=k)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=k));return n}(r)}t.Buffer=u,t.SlowBuffer=function(e){return+e!=e&&(e=0),u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=o(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,n){return c(null,e,t,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?a(e,t):void 0!==n?"string"==typeof r?a(e,t).fill(n,r):a(e,t).fill(n):a(e,t)}(null,e,t,n)},u.allocUnsafe=function(e){return d(null,e)},u.allocUnsafeSlow=function(e){return d(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,s=Math.min(n,r);i<s;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!s(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var n;if(void 0===t)for(n=t=0;n<e.length;++n)t+=e[n].length;var r=u.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0==e?"":0===arguments.length?w(this,0,e):function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":return E(this,t,n);case"utf8":case"utf-8":return w(this,t,n);case"ascii":return S(this,t,n);case"latin1":case"binary":return T(this,t,n);case"base64":return _(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,n,r,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(i<=r&&n<=t)return 0;if(i<=r)return-1;if(n<=t)return 1;if(this===e)return 0;for(var s=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0),a=Math.min(s,o),c=this.slice(r,i),l=e.slice(t,n),d=0;d<a;++d)if(c[d]!==l[d]){s=c[d],o=l[d];break}return s<o?-1:o<s?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||i<n)&&(n=i),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var s,o,a,u,c,l,d=!1;;)switch(r){case"hex":return v(this,e,t,n);case"utf8":case"utf-8":return c=t,l=n,U(D(e,this.length-c),this,c,l);case"ascii":case"latin1":case"binary":return b(this,e,t,n);case"base64":return a=t,u=n,U(B(e),this,a,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return s=t,o=n,U(function(e,t){for(var n,r,i,s=[],o=0;o<e.length&&!((t-=2)<0);++o)r=(n=e.charCodeAt(o))>>8,i=n%256,s.push(i),s.push(r);return s}(e,this.length-s),this,s,o);default:if(d)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),d=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var k=4096;function S(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function T(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function E(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||r<n)&&(n=r);for(var i="",s=t;s<n;++s)i+=R(e[s]);return i}function P(e,t,n){for(var r=e.slice(t,n),i="",s=0;s<r.length;s+=2)i+=String.fromCharCode(r[s]+256*r[s+1]);return i}function A(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,n,r,i,s){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<t||t<s)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function C(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,s=Math.min(e.length-n,2);i<s;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function x(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,s=Math.min(e.length-n,4);i<s;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function M(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function j(e,t,n,r,s){return s||M(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function I(e,t,n,r,s){return s||M(e,0,n,8),i.write(e,t,n,r,52,8),n+8}u.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=u.prototype;else{var i=t-e;n=new u(i,void 0);for(var s=0;s<i;++s)n[s]=this[s+e]}return n},u.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var r=this[e],i=1,s=0;++s<t&&(i*=256);)r+=this[e+s]*i;return r},u.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var r=this[e+--t],i=1;0<t&&(i*=256);)r+=this[e+--t]*i;return r},u.prototype.readUInt8=function(e,t){return t||A(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||A(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||A(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||A(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||A(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var r=this[e],i=1,s=0;++s<t&&(i*=256);)r+=this[e+s]*i;return(i*=128)<=r&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var r=t,i=1,s=this[e+--r];0<r&&(i*=256);)s+=this[e+--r]*i;return(i*=128)<=s&&(s-=Math.pow(2,8*t)),s},u.prototype.readInt8=function(e,t){return t||A(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||A(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){t||A(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return t||A(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||A(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||A(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||A(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||A(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||A(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||O(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,s=0;for(this[t]=255&e;++s<n&&(i*=256);)this[t+s]=e/i&255;return t+n},u.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||O(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,s=1;for(this[t+i]=255&e;0<=--i&&(s*=256);)this[t+i]=e/s&255;return t+n},u.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):C(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):C(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):x(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):x(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);O(this,e,t,n,i-1,-i)}var s=0,o=1,a=0;for(this[t]=255&e;++s<n&&(o*=256);)e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);O(this,e,t,n,i-1,-i)}var s=n-1,o=1,a=0;for(this[t+s]=255&e;0<=--s&&(o*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):C(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):C(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):x(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):x(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,n){return j(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return j(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return I(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return I(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(n=n||0,r||0===r||(r=this.length),t>=e.length&&(t=e.length),t=t||0,0<r&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,s=r-n;if(this===e&&n<t&&t<r)for(i=s-1;0<=i;--i)e[i+t]=this[i+n];else if(s<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),t);return s},u.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var s;if(t>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(e=e||0))for(s=t;s<n;++s)this[s]=e;else{var o=u.isBuffer(e)?e:D(new u(e,r).toString()),a=o.length;for(s=0;s<n-t;++s)this[s+t]=o[s%a]}return this};var N=/[^+\/0-9A-Za-z-_]/g;function R(e){return e<16?"0"+e.toString(16):e.toString(16)}function D(e,t){var n;t=t||1/0;for(var r=e.length,i=null,s=[],o=0;o<r;++o){if(55295<(n=e.charCodeAt(o))&&n<57344){if(!i){if(56319<n){-1<(t-=3)&&s.push(239,191,189);continue}if(o+1===r){-1<(t-=3)&&s.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(t-=3)&&s.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(t-=3)&&s.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function B(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(N,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function U(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(70))},function(e,t,n){e.exports=function(e){return null!==e&&"object"==typeof e}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(12)),i=u(n(67)),s=u(n(68)),o=u(n(69)),a=n(75);function u(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(!navigator||!navigator.sendBeacon)return!1;navigator.sendBeacon(e)}n(0);var h=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(p,r.default),p);function p(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p);var n=e.listenToBrowserNetworkEvents,r=void 0===n||n;return e.db=s.default,e.cbor=new o.default,e.sdkFamily="Web",e.networking=new i.default({del:a.del,get:a.get,post:a.post,patch:a.patch,sendBeacon:f}),t=function(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,l(p).call(this,e)),r&&(window.addEventListener("offline",(function(){t.networkDownDetected()})),window.addEventListener("online",(function(){t.networkUpDetected()}))),t}t.default=h,e.exports=t.default},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=ce(n(3)),s=ce(n(6)),o=ce(n(15)),a=ce(n(18)),u=ce(n(7)),c=ce(n(19)),l=ce(n(20)),d=ue(n(21)),f=ue(n(22)),h=ue(n(23)),p=ue(n(24)),g=ue(n(25)),m=ue(n(26)),y=ue(n(27)),v=ue(n(28)),b=ue(n(29)),_=ue(n(30)),w=ue(n(31)),k=ue(n(32)),S=ue(n(33)),T=ue(n(34)),E=ue(n(35)),P=ue(n(36)),A=ue(n(37)),O=ue(n(38)),C=ue(n(39)),x=ue(n(40)),M=ue(n(41)),j=ue(n(42)),I=ue(n(43)),N=ue(n(44)),R=ue(n(45)),D=ue(n(46)),B=ue(n(47)),U=ue(n(48)),F=ue(n(49)),L=ue(n(50)),H=ue(n(51)),G=ue(n(52)),K=ue(n(53)),q=ue(n(54)),$=ue(n(55)),W=ue(n(56)),z=ue(n(57)),V=ue(n(58)),Y=ue(n(59)),Q=ue(n(60)),J=ue(n(61)),X=ue(n(62)),Z=ue(n(63)),ee=ue(n(64)),te=ue(n(65)),ne=ue(n(8)),re=ue(n(66)),ie=ce(n(1)),se=ce(n(4)),oe=(n(0),ce(n(5)));function ae(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return ae=function(){return e},e}function ue(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=ae();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,t&&t.set(e,n),n}function ce(e){return e&&e.__esModule?e:{default:e}}function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function de(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fe,he,pe,ge=(fe=me,pe=[{key:"notificationPayload",value:function(e,t){return new a.default(e,t)}},{key:"generateUUID",value:function(){return oe.default.createUUID()}}],(he=[{key:"getVersion",value:function(){return this._config.getVersion()}},{key:"_addPnsdkSuffix",value:function(e,t){this._config._addPnsdkSuffix(e,t)}},{key:"networkDownDetected",value:function(){this._listenerManager.announceNetworkDown(),this._config.restore?this.disconnect():this.destroy(!0)}},{key:"networkUpDetected",value:function(){this._listenerManager.announceNetworkUp(),this.reconnect()}}])&&le(fe.prototype,he),pe&&le(fe,pe),me);function me(e){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,me),de(this,"_config",void 0),de(this,"_listenerManager",void 0),de(this,"_tokenManager",void 0),de(this,"time",void 0),de(this,"publish",void 0),de(this,"fire",void 0),de(this,"history",void 0),de(this,"deleteMessages",void 0),de(this,"messageCounts",void 0),de(this,"fetchMessages",void 0),de(this,"channelGroups",void 0),de(this,"push",void 0),de(this,"hereNow",void 0),de(this,"whereNow",void 0),de(this,"getState",void 0),de(this,"setState",void 0),de(this,"grant",void 0),de(this,"grantToken",void 0),de(this,"audit",void 0),de(this,"subscribe",void 0),de(this,"signal",void 0),de(this,"presence",void 0),de(this,"unsubscribe",void 0),de(this,"unsubscribeAll",void 0),de(this,"addMessageAction",void 0),de(this,"removeMessageAction",void 0),de(this,"getMessageActions",void 0),de(this,"createUser",void 0),de(this,"updateUser",void 0),de(this,"deleteUser",void 0),de(this,"getUser",void 0),de(this,"getUsers",void 0),de(this,"createSpace",void 0),de(this,"updateSpace",void 0),de(this,"deleteSpace",void 0),de(this,"getSpaces",void 0),de(this,"getSpace",void 0),de(this,"getMembers",void 0),de(this,"addMembers",void 0),de(this,"updateMembers",void 0),de(this,"removeMembers",void 0),de(this,"getMemberships",void 0),de(this,"joinSpaces",void 0),de(this,"updateMemberships",void 0),de(this,"leaveSpaces",void 0),de(this,"disconnect",void 0),de(this,"reconnect",void 0),de(this,"destroy",void 0),de(this,"stop",void 0),de(this,"getSubscribedChannels",void 0),de(this,"getSubscribedChannelGroups",void 0),de(this,"addListener",void 0),de(this,"removeListener",void 0),de(this,"removeAllListeners",void 0),de(this,"parseToken",void 0),de(this,"setToken",void 0),de(this,"setTokens",void 0),de(this,"getToken",void 0),de(this,"getTokens",void 0),de(this,"clearTokens",void 0),de(this,"getAuthKey",void 0),de(this,"setAuthKey",void 0),de(this,"setCipherKey",void 0),de(this,"setUUID",void 0),de(this,"getUUID",void 0),de(this,"getFilterExpression",void 0),de(this,"setFilterExpression",void 0),de(this,"setHeartbeatInterval",void 0),de(this,"setProxy",void 0),de(this,"encrypt",void 0),de(this,"decrypt",void 0);var n=e.db,r=e.networking,a=e.cbor,ie=this._config=new i.default({setup:e,db:n}),se=new s.default({config:ie});r.init(ie);var oe=this._tokenManager=new c.default(ie,a),ae={config:ie,networking:r,crypto:se,tokenManager:oe},ue=l.default.bind(this,ae,ne),ce=l.default.bind(this,ae,_),le=l.default.bind(this,ae,k),fe=l.default.bind(this,ae,T),he=l.default.bind(this,ae,re),pe=this._listenerManager=new u.default,ge=new o.default({timeEndpoint:ue,leaveEndpoint:ce,heartbeatEndpoint:le,setStateEndpoint:fe,subscribeEndpoint:he,crypto:ae.crypto,config:ae.config,listenerManager:pe});this.addListener=pe.addListener.bind(pe),this.removeListener=pe.removeListener.bind(pe),this.removeAllListeners=pe.removeAllListeners.bind(pe),this.parseToken=oe.parseToken.bind(oe),this.setToken=oe.setToken.bind(oe),this.setTokens=oe.setTokens.bind(oe),this.getToken=oe.getToken.bind(oe),this.getTokens=oe.getTokens.bind(oe),this.clearTokens=oe.clearTokens.bind(oe),this.channelGroups={listGroups:l.default.bind(this,ae,p),listChannels:l.default.bind(this,ae,g),addChannels:l.default.bind(this,ae,d),removeChannels:l.default.bind(this,ae,f),deleteGroup:l.default.bind(this,ae,h)},this.push={addChannels:l.default.bind(this,ae,m),removeChannels:l.default.bind(this,ae,y),deleteDevice:l.default.bind(this,ae,b),listChannels:l.default.bind(this,ae,v)},this.hereNow=l.default.bind(this,ae,E),this.whereNow=l.default.bind(this,ae,w),this.getState=l.default.bind(this,ae,S),this.setState=ge.adaptStateChange.bind(ge),this.grant=l.default.bind(this,ae,V),this.grantToken=l.default.bind(this,ae,Y),this.audit=l.default.bind(this,ae,z),this.publish=l.default.bind(this,ae,Q),this.fire=function(e,n){return e.replicate=!1,e.storeInHistory=!1,t.publish(e,n)},this.signal=l.default.bind(this,ae,J),this.history=l.default.bind(this,ae,X),this.deleteMessages=l.default.bind(this,ae,Z),this.messageCounts=l.default.bind(this,ae,ee),this.fetchMessages=l.default.bind(this,ae,te),this.addMessageAction=l.default.bind(this,ae,P),this.removeMessageAction=l.default.bind(this,ae,A),this.getMessageActions=l.default.bind(this,ae,O),this.createUser=l.default.bind(this,ae,C),this.updateUser=l.default.bind(this,ae,x),this.deleteUser=l.default.bind(this,ae,M),this.getUser=l.default.bind(this,ae,j),this.getUsers=l.default.bind(this,ae,I),this.createSpace=l.default.bind(this,ae,N),this.updateSpace=l.default.bind(this,ae,R),this.deleteSpace=l.default.bind(this,ae,D),this.getSpaces=l.default.bind(this,ae,B),this.getSpace=l.default.bind(this,ae,U),this.addMembers=l.default.bind(this,ae,L),this.updateMembers=l.default.bind(this,ae,H),this.removeMembers=l.default.bind(this,ae,G),this.getMembers=l.default.bind(this,ae,F),this.getMemberships=l.default.bind(this,ae,K),this.joinSpaces=l.default.bind(this,ae,$),this.updateMemberships=l.default.bind(this,ae,q),this.leaveSpaces=l.default.bind(this,ae,W),this.time=ue,this.subscribe=ge.adaptSubscribeChange.bind(ge),this.presence=ge.adaptPresenceChange.bind(ge),this.unsubscribe=ge.adaptUnsubscribeChange.bind(ge),this.disconnect=ge.disconnect.bind(ge),this.reconnect=ge.reconnect.bind(ge),this.destroy=function(e){ge.unsubscribeAll(e),ge.disconnect()},this.stop=this.destroy,this.unsubscribeAll=ge.unsubscribeAll.bind(ge),this.getSubscribedChannels=ge.getSubscribedChannels.bind(ge),this.getSubscribedChannelGroups=ge.getSubscribedChannelGroups.bind(ge),this.encrypt=se.encrypt.bind(se),this.decrypt=se.decrypt.bind(se),this.getAuthKey=ae.config.getAuthKey.bind(ae.config),this.setAuthKey=ae.config.setAuthKey.bind(ae.config),this.setCipherKey=ae.config.setCipherKey.bind(ae.config),this.getUUID=ae.config.getUUID.bind(ae.config),this.setUUID=ae.config.setUUID.bind(ae.config),this.getFilterExpression=ae.config.getFilterExpression.bind(ae.config),this.setFilterExpression=ae.config.setFilterExpression.bind(ae.config),this.setHeartbeatInterval=ae.config.setHeartbeatInterval.bind(ae.config),r.hasModule("proxy")&&(this.setProxy=function(e){ae.config.setProxy(e),t.reconnect()})}de(t.default=ge,"OPERATIONS",ie.default),de(ge,"CATEGORIES",se.default),e.exports=t.default},function(e,t,n){var r,i;void 0===(i="function"==typeof(r=function(e){var t={3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i};function n(){var e,t,n="";for(e=0;e<32;e++)t=16*Math.random()|0,8!==e&&12!==e&&16!==e&&20!==e||(n+="-"),n+=(12===e?4:16===e?3&t|8:t).toString(16);return n}function r(e,n){var r=t[n||"all"];return r&&r.test(e)||!1}n.isUUID=r,n.VERSION="0.1.0",e.uuid=n,e.isUUID=r})?r.apply(t,[t]):r)||(e.exports=i)},function(e,t,n){var r,i,s,o,a,u,c,l,d,f,h=h||function(e){function t(){}var n={},r=n.lib={},i=r.Base={extend:function(e){t.prototype=this;var n=new t;return e&&n.mixIn(e),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),(n.init.prototype=n).$super=this,n},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=r.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||a).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var i=0;i<e;i++)t[r+i>>>2]|=(n[i>>>2]>>>24-i%4*8&255)<<24-(r+i)%4*8;else if(65535<n.length)for(i=0;i<e;i+=4)t[r+i>>>2]=n[i>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(4294967296*e.random()|0);return new s.init(n,t)}}),o=n.enc={},a=o.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++){var i=t[r>>>2]>>>24-r%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new s.init(n,t/2)}},u=o.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-r%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new s.init(n,t)}},c=o.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},l=r.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,a=i/(4*o);if(t=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*o,i=e.min(4*t,i),t){for(var u=0;u<t;u+=o)this._doProcessBlock(r,u);u=r.splice(0,t),n.sigBytes-=i}return new s.init(u,i)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=l.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new d.HMAC.init(e,n).finalize(t)}}});var d=n.algo={};return n}(Math);!function(e){for(var t=h,n=(i=t.lib).WordArray,r=i.Hasher,i=t.algo,s=[],o=[],a=function(e){return 4294967296*(e-(0|e))|0},u=2,c=0;c<64;){var l;e:{l=u;for(var d=e.sqrt(l),f=2;f<=d;f++)if(!(l%f)){l=!1;break e}l=!0}l&&(c<8&&(s[c]=a(e.pow(u,.5))),o[c]=a(e.pow(u,1/3)),c++),u++}var p=[];i=i.SHA256=r.extend({_doReset:function(){this._hash=new n.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],s=n[2],a=n[3],u=n[4],c=n[5],l=n[6],d=n[7],f=0;f<64;f++){if(f<16)p[f]=0|e[t+f];else{var h=p[f-15],g=p[f-2];p[f]=((h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3)+p[f-7]+((g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10)+p[f-16]}h=d+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+(u&c^~u&l)+o[f]+p[f],g=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&i^r&s^i&s),d=l,l=c,c=u,u=a+h|0,a=s,s=i,i=r,r=h+g|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+s|0,n[3]=n[3]+a|0,n[4]=n[4]+u|0,n[5]=n[5]+c|0,n[6]=n[6]+l|0,n[7]=n[7]+d|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(64+i>>>9<<4)]=e.floor(r/4294967296),n[15+(64+i>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}}),t.SHA256=r._createHelper(i),t.HmacSHA256=r._createHmacHelper(i)}(Math),i=(r=h).enc.Utf8,r.algo.HMAC=r.lib.Base.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=i.parse(t));var n=e.blockSize,r=4*n;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var s=this._oKey=t.clone(),o=this._iKey=t.clone(),a=s.words,u=o.words,c=0;c<n;c++)a[c]^=1549556828,u[c]^=909522486;s.sigBytes=o.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}}),o=(s=h).lib.WordArray,s.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp(),e=[];for(var i=0;i<n;i+=3)for(var s=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,o=0;o<4&&i+.75*o<n;o++)e.push(r.charAt(s>>>6*(3-o)&63));if(t=r.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var t=e.length,n=this._map;!(r=n.charAt(64))||-1!=(r=e.indexOf(r))&&(t=r);for(var r=[],i=0,s=0;s<t;s++)if(s%4){var a=n.indexOf(e.charAt(s-1))<<s%4*2,u=n.indexOf(e.charAt(s))>>>6-s%4*2;r[i>>>2]|=(a|u)<<24-i%4*8,i++}return o.create(r,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(e){function t(e,t,n,r,i,s,o){return((e=e+(t&n|~t&r)+i+o)<<s|e>>>32-s)+t}function n(e,t,n,r,i,s,o){return((e=e+(t&r|n&~r)+i+o)<<s|e>>>32-s)+t}function r(e,t,n,r,i,s,o){return((e=e+(t^n^r)+i+o)<<s|e>>>32-s)+t}function i(e,t,n,r,i,s,o){return((e=e+(n^(t|~r))+i+o)<<s|e>>>32-s)+t}for(var s=h,o=(u=s.lib).WordArray,a=u.Hasher,u=s.algo,c=[],l=0;l<64;l++)c[l]=4294967296*e.abs(e.sin(l+1))|0;u=u.MD5=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,s){for(var o=0;o<16;o++){var a=e[d=s+o];e[d]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}o=this._hash.words;var u,l,d=e[s+0],f=(a=e[s+1],e[s+2]),h=e[s+3],p=e[s+4],g=e[s+5],m=e[s+6],y=e[s+7],v=e[s+8],b=e[s+9],_=e[s+10],w=e[s+11],k=e[s+12],S=e[s+13],T=e[s+14],E=e[s+15],P=o[0],A=i(A=i(A=i(A=i(A=r(A=r(A=r(A=r(A=n(A=n(A=n(A=n(A=t(A=t(A=t(A=t(A=o[1],l=t(l=o[2],u=t(u=o[3],P=t(P,A,l,u,d,7,c[0]),A,l,a,12,c[1]),P,A,f,17,c[2]),u,P,h,22,c[3]),l=t(l,u=t(u,P=t(P,A,l,u,p,7,c[4]),A,l,g,12,c[5]),P,A,m,17,c[6]),u,P,y,22,c[7]),l=t(l,u=t(u,P=t(P,A,l,u,v,7,c[8]),A,l,b,12,c[9]),P,A,_,17,c[10]),u,P,w,22,c[11]),l=t(l,u=t(u,P=t(P,A,l,u,k,7,c[12]),A,l,S,12,c[13]),P,A,T,17,c[14]),u,P,E,22,c[15]),l=n(l,u=n(u,P=n(P,A,l,u,a,5,c[16]),A,l,m,9,c[17]),P,A,w,14,c[18]),u,P,d,20,c[19]),l=n(l,u=n(u,P=n(P,A,l,u,g,5,c[20]),A,l,_,9,c[21]),P,A,E,14,c[22]),u,P,p,20,c[23]),l=n(l,u=n(u,P=n(P,A,l,u,b,5,c[24]),A,l,T,9,c[25]),P,A,h,14,c[26]),u,P,v,20,c[27]),l=n(l,u=n(u,P=n(P,A,l,u,S,5,c[28]),A,l,f,9,c[29]),P,A,y,14,c[30]),u,P,k,20,c[31]),l=r(l,u=r(u,P=r(P,A,l,u,g,4,c[32]),A,l,v,11,c[33]),P,A,w,16,c[34]),u,P,T,23,c[35]),l=r(l,u=r(u,P=r(P,A,l,u,a,4,c[36]),A,l,p,11,c[37]),P,A,y,16,c[38]),u,P,_,23,c[39]),l=r(l,u=r(u,P=r(P,A,l,u,S,4,c[40]),A,l,d,11,c[41]),P,A,h,16,c[42]),u,P,m,23,c[43]),l=r(l,u=r(u,P=r(P,A,l,u,b,4,c[44]),A,l,k,11,c[45]),P,A,E,16,c[46]),u,P,f,23,c[47]),l=i(l,u=i(u,P=i(P,A,l,u,d,6,c[48]),A,l,y,10,c[49]),P,A,T,15,c[50]),u,P,g,21,c[51]),l=i(l,u=i(u,P=i(P,A,l,u,k,6,c[52]),A,l,h,10,c[53]),P,A,_,15,c[54]),u,P,a,21,c[55]),l=i(l,u=i(u,P=i(P,A,l,u,v,6,c[56]),A,l,E,10,c[57]),P,A,m,15,c[58]),u,P,S,21,c[59]),l=i(l,u=i(u,P=i(P,A,l,u,p,6,c[60]),A,l,w,10,c[61]),P,A,f,15,c[62]),u,P,b,21,c[63]);o[0]=o[0]+P|0,o[1]=o[1]+A|0,o[2]=o[2]+l|0,o[3]=o[3]+u|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;n[i>>>5]|=128<<24-i%32;var s=e.floor(r/4294967296);for(n[15+(i+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),n[14+(i+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(n.length+1),this._process(),n=(t=this._hash).words,r=0;r<4;r++)i=n[r],n[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);return t},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}}),s.MD5=a._createHelper(u),s.HmacMD5=a._createHmacHelper(u)}(Math),c=(a=(u=h).lib).Base,l=a.WordArray,d=(a=u.algo).EvpKDF=c.extend({cfg:c.extend({keySize:4,hasher:a.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=(o=this.cfg).hasher.create(),r=l.create(),i=r.words,s=o.keySize,o=o.iterations;i.length<s;){a&&n.update(a);var a=n.update(e).finalize(t);n.reset();for(var u=1;u<o;u++)a=n.finalize(a),n.reset();r.concat(a)}return r.sigBytes=4*s,r}}),u.EvpKDF=function(e,t,n){return d.create(n).compute(e,t)},h.lib.Cipher||function(){var e=(f=h).lib,t=e.Base,n=e.WordArray,r=e.BufferedBlockAlgorithm,i=f.enc.Base64,s=f.algo.EvpKDF,o=e.Cipher=r.extend({cfg:t.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){r.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,n,r){return("string"==typeof n?p:d).encrypt(e,t,n,r)},decrypt:function(t,n,r){return("string"==typeof n?p:d).decrypt(e,t,n,r)}}}});function a(e,t,n){var r=this._iv;r?this._iv=void 0:r=this._prevBlock;for(var i=0;i<n;i++)e[t+i]^=r[i]}e.StreamCipher=o.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var u=f.mode={},c=(e.BlockCipherMode=t.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();c.Encryptor=c.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize;a.call(this,e,t,r),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+r)}}),c.Decryptor=c.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=e.slice(t,t+r);n.decryptBlock(e,t),a.call(this,e,t,r),this._prevBlock=i}}),u=u.CBC=c,c=(f.pad={}).Pkcs7={pad:function(e,t){for(var r,i=(r=(r=4*t)-e.sigBytes%r)<<24|r<<16|r<<8|r,s=[],o=0;o<r;o+=4)s.push(i);r=n.create(s,r),e.concat(r)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},e.BlockCipher=o.extend({cfg:o.cfg.extend({mode:u,padding:c}),reset:function(){o.reset.call(this);var e=(t=this.cfg).iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=t.createEncryptor;else n=t.createDecryptor,this._minBufferSize=1;this._mode=n.call(t,this,e&&e.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var l=e.CipherParams=t.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),d=(u=(f.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return((e=e.salt)?n.create([1398893684,1701076831]).concat(e).concat(t):t).toString(i)},parse:function(e){var t=(e=i.parse(e)).words;if(1398893684==t[0]&&1701076831==t[1]){var r=n.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return l.create({ciphertext:e,salt:r})}},e.SerializableCipher=t.extend({cfg:t.extend({format:u}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=e.createEncryptor(n,r);return t=i.finalize(t),i=i.cfg,l.create({ciphertext:t,key:n,iv:i.iv,algorithm:e,mode:i.mode,padding:i.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}})),f=(f.kdf={}).OpenSSL={execute:function(e,t,r,i){return i=i||n.random(8),e=s.create({keySize:t+r}).compute(e,i),r=n.create(e.words.slice(t),4*r),e.sigBytes=4*t,l.create({key:e,iv:r,salt:i})}},p=e.PasswordBasedCipher=d.extend({cfg:d.cfg.extend({kdf:f}),encrypt:function(e,t,n,r){return n=(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize),r.iv=n.iv,(e=d.encrypt.call(this,e,t,n.key,r)).mixIn(n),e},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),n=r.kdf.execute(n,e.keySize,e.ivSize,t.salt),r.iv=n.iv,d.decrypt.call(this,e,t,n.key,r)}})}(),function(){for(var e=h,t=e.lib.BlockCipher,n=e.algo,r=[],i=[],s=[],o=[],a=[],u=[],c=[],l=[],d=[],f=[],p=[],g=0;g<256;g++)p[g]=g<128?g<<1:g<<1^283;var m=0,y=0;for(g=0;g<256;g++){var v=(v=y^y<<1^y<<2^y<<3^y<<4)>>>8^255&v^99;r[m]=v;var b=p[i[v]=m],_=p[b],w=p[_],k=257*p[v]^16843008*v;s[m]=k<<24|k>>>8,o[m]=k<<16|k>>>16,a[m]=k<<8|k>>>24,u[m]=k,k=16843009*w^65537*_^257*b^16843008*m,c[v]=k<<24|k>>>8,l[v]=k<<16|k>>>16,d[v]=k<<8|k>>>24,f[v]=k,m?(m=b^p[p[p[w^b]]],y^=p[p[y]]):m=y=1}var S=[0,1,2,4,8,16,32,64,128,27,54];n=n.AES=t.extend({_doReset:function(){for(var e=(n=this._key).words,t=n.sigBytes/4,n=4*((this._nRounds=t+6)+1),i=this._keySchedule=[],s=0;s<n;s++)if(s<t)i[s]=e[s];else{var o=i[s-1];s%t?6<t&&4==s%t&&(o=r[o>>>24]<<24|r[o>>>16&255]<<16|r[o>>>8&255]<<8|r[255&o]):(o=r[(o=o<<8|o>>>24)>>>24]<<24|r[o>>>16&255]<<16|r[o>>>8&255]<<8|r[255&o],o^=S[s/t|0]<<24),i[s]=i[s-t]^o}for(e=this._invKeySchedule=[],t=0;t<n;t++)s=n-t,o=t%4?i[s]:i[s-4],e[t]=t<4||s<=4?o:c[r[o>>>24]]^l[r[o>>>16&255]]^d[r[o>>>8&255]]^f[r[255&o]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,o,a,u,r)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,c,l,d,f,i),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,i,s,o,a){for(var u=this._nRounds,c=e[t]^n[0],l=e[t+1]^n[1],d=e[t+2]^n[2],f=e[t+3]^n[3],h=4,p=1;p<u;p++){var g=r[c>>>24]^i[l>>>16&255]^s[d>>>8&255]^o[255&f]^n[h++],m=r[l>>>24]^i[d>>>16&255]^s[f>>>8&255]^o[255&c]^n[h++],y=r[d>>>24]^i[f>>>16&255]^s[c>>>8&255]^o[255&l]^n[h++];f=r[f>>>24]^i[c>>>16&255]^s[l>>>8&255]^o[255&d]^n[h++],c=g,l=m,d=y}g=(a[c>>>24]<<24|a[l>>>16&255]<<16|a[d>>>8&255]<<8|a[255&f])^n[h++],m=(a[l>>>24]<<24|a[d>>>16&255]<<16|a[f>>>8&255]<<8|a[255&c])^n[h++],y=(a[d>>>24]<<24|a[f>>>16&255]<<16|a[c>>>8&255]<<8|a[255&l])^n[h++],f=(a[f>>>24]<<24|a[c>>>16&255]<<16|a[l>>>8&255]<<8|a[255&d])^n[h++],e[t]=g,e[t+1]=m,e[t+2]=y,e[t+3]=f},keySize:8}),e.AES=t._createHelper(n)}(),h.mode.ECB=((f=h.lib.BlockCipherMode.extend()).Encryptor=f.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),f.Decryptor=f.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),f),e.exports=h},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(n(6)),a(n(3)),a(n(7));var r=a(n(16)),i=a(n(17)),s=a(n(2)),o=(n(0),a(n(4)));function a(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l,d,f=(l=h,(d=[{key:"adaptStateChange",value:function(e,t){var n=this,r=e.state,i=e.channels,s=void 0===i?[]:i,o=e.channelGroups,a=void 0===o?[]:o;return s.forEach((function(e){e in n._channels&&(n._channels[e].state=r)})),a.forEach((function(e){e in n._channelGroups&&(n._channelGroups[e].state=r)})),this._setStateEndpoint({state:r,channels:s,channelGroups:a},t)}},{key:"adaptPresenceChange",value:function(e){var t=this,n=e.connected,r=e.channels,i=void 0===r?[]:r,s=e.channelGroups,o=void 0===s?[]:s;n?(i.forEach((function(e){t._heartbeatChannels[e]={state:{}}})),o.forEach((function(e){t._heartbeatChannelGroups[e]={state:{}}}))):(i.forEach((function(e){e in t._heartbeatChannels&&delete t._heartbeatChannels[e]})),o.forEach((function(e){e in t._heartbeatChannelGroups&&delete t._heartbeatChannelGroups[e]})),!1===this._config.suppressLeaveEvents&&this._leaveEndpoint({channels:i,channelGroups:o},(function(e){t._listenerManager.announceStatus(e)}))),this.reconnect()}},{key:"adaptSubscribeChange",value:function(e){var t=this,n=e.timetoken,r=e.channels,i=void 0===r?[]:r,s=e.channelGroups,o=void 0===s?[]:s,a=e.withPresence,u=void 0!==a&&a,c=e.withHeartbeats,l=void 0!==c&&c;this._config.subscribeKey&&""!==this._config.subscribeKey?(n&&(this._lastTimetoken=this._currentTimetoken,this._currentTimetoken=n),"0"!==this._currentTimetoken&&0!==this._currentTimetoken&&(this._storedTimetoken=this._currentTimetoken,this._currentTimetoken=0),i.forEach((function(e){t._channels[e]={state:{}},u&&(t._presenceChannels[e]={}),(l||t._config.getHeartbeatInterval())&&(t._heartbeatChannels[e]={}),t._pendingChannelSubscriptions.push(e)})),o.forEach((function(e){t._channelGroups[e]={state:{}},u&&(t._presenceChannelGroups[e]={}),(l||t._config.getHeartbeatInterval())&&(t._heartbeatChannelGroups[e]={}),t._pendingChannelGroupSubscriptions.push(e)})),this._subscriptionStatusAnnounced=!1,this.reconnect()):console&&console.log&&console.log("subscribe key missing; aborting subscribe")}},{key:"adaptUnsubscribeChange",value:function(e,t){var n=this,r=e.channels,i=void 0===r?[]:r,s=e.channelGroups,o=void 0===s?[]:s,a=[],u=[];i.forEach((function(e){e in n._channels&&(delete n._channels[e],a.push(e),e in n._heartbeatChannels&&delete n._heartbeatChannels[e]),e in n._presenceChannels&&(delete n._presenceChannels[e],a.push(e))})),o.forEach((function(e){e in n._channelGroups&&(delete n._channelGroups[e],u.push(e),e in n._heartbeatChannelGroups&&delete n._heartbeatChannelGroups[e]),e in n._presenceChannelGroups&&(delete n._channelGroups[e],u.push(e))})),0===a.length&&0===u.length||(!1!==this._config.suppressLeaveEvents||t||this._leaveEndpoint({channels:a,channelGroups:u},(function(e){e.affectedChannels=a,e.affectedChannelGroups=u,e.currentTimetoken=n._currentTimetoken,e.lastTimetoken=n._lastTimetoken,n._listenerManager.announceStatus(e)})),0===Object.keys(this._channels).length&&0===Object.keys(this._presenceChannels).length&&0===Object.keys(this._channelGroups).length&&0===Object.keys(this._presenceChannelGroups).length&&(this._lastTimetoken=0,this._currentTimetoken=0,this._storedTimetoken=null,this._region=null,this._reconnectionManager.stopPolling()),this.reconnect())}},{key:"unsubscribeAll",value:function(e){this.adaptUnsubscribeChange({channels:this.getSubscribedChannels(),channelGroups:this.getSubscribedChannelGroups()},e)}},{key:"getHeartbeatChannels",value:function(){return Object.keys(this._heartbeatChannels)}},{key:"getHeartbeatChannelGroups",value:function(){return Object.keys(this._heartbeatChannelGroups)}},{key:"getSubscribedChannels",value:function(){return Object.keys(this._channels)}},{key:"getSubscribedChannelGroups",value:function(){return Object.keys(this._channelGroups)}},{key:"reconnect",value:function(){this._startSubscribeLoop(),this._registerHeartbeatTimer()}},{key:"disconnect",value:function(){this._stopSubscribeLoop(),this._stopHeartbeatTimer(),this._reconnectionManager.stopPolling()}},{key:"_registerHeartbeatTimer",value:function(){this._stopHeartbeatTimer(),0!==this._config.getHeartbeatInterval()&&(this._performHeartbeatLoop(),this._heartbeatTimer=setInterval(this._performHeartbeatLoop.bind(this),1e3*this._config.getHeartbeatInterval()))}},{key:"_stopHeartbeatTimer",value:function(){this._heartbeatTimer&&(clearInterval(this._heartbeatTimer),this._heartbeatTimer=null)}},{key:"_performHeartbeatLoop",value:function(){var e=this,t=this.getHeartbeatChannels(),n=this.getHeartbeatChannelGroups(),r={};0===t.length&&0===n.length||(this.getSubscribedChannels().forEach((function(t){var n=e._channels[t].state;Object.keys(n).length&&(r[t]=n)})),this.getSubscribedChannelGroups().forEach((function(t){var n=e._channelGroups[t].state;Object.keys(n).length&&(r[t]=n)})),this._heartbeatEndpoint({channels:t,channelGroups:n,state:r},function(t){t.error&&e._config.announceFailedHeartbeats&&e._listenerManager.announceStatus(t),t.error&&e._config.autoNetworkDetection&&e._isOnline&&(e._isOnline=!1,e.disconnect(),e._listenerManager.announceNetworkDown(),e.reconnect()),!t.error&&e._config.announceSuccessfulHeartbeats&&e._listenerManager.announceStatus(t)}.bind(this)))}},{key:"_startSubscribeLoop",value:function(){var e=this;this._stopSubscribeLoop();var t={},n=[],r=[];if(Object.keys(this._channels).forEach((function(r){var i=e._channels[r].state;Object.keys(i).length&&(t[r]=i),n.push(r)})),Object.keys(this._presenceChannels).forEach((function(e){n.push("".concat(e,"-pnpres"))})),Object.keys(this._channelGroups).forEach((function(n){var i=e._channelGroups[n].state;Object.keys(i).length&&(t[n]=i),r.push(n)})),Object.keys(this._presenceChannelGroups).forEach((function(e){r.push("".concat(e,"-pnpres"))})),0!==n.length||0!==r.length){var i={channels:n,channelGroups:r,state:t,timetoken:this._currentTimetoken,filterExpression:this._config.filterExpression,region:this._region};this._subscribeCall=this._subscribeEndpoint(i,this._processSubscribeResponse.bind(this))}}},{key:"_processSubscribeResponse",value:function(e,t){var n=this;if(e.error)e.category===o.default.PNTimeoutCategory?this._startSubscribeLoop():(e.category===o.default.PNNetworkIssuesCategory?(this.disconnect(),e.error&&this._config.autoNetworkDetection&&this._isOnline&&(this._isOnline=!1,this._listenerManager.announceNetworkDown()),this._reconnectionManager.onReconnection((function(){n._config.autoNetworkDetection&&!n._isOnline&&(n._isOnline=!0,n._listenerManager.announceNetworkUp()),n.reconnect(),n._subscriptionStatusAnnounced=!0;var t={category:o.default.PNReconnectedCategory,operation:e.operation,lastTimetoken:n._lastTimetoken,currentTimetoken:n._currentTimetoken};n._listenerManager.announceStatus(t)})),this._reconnectionManager.startPolling()):e.category===o.default.PNBadRequestCategory&&this._stopHeartbeatTimer(),this._listenerManager.announceStatus(e));else{if(this._storedTimetoken?(this._currentTimetoken=this._storedTimetoken,this._storedTimetoken=null):(this._lastTimetoken=this._currentTimetoken,this._currentTimetoken=t.metadata.timetoken),!this._subscriptionStatusAnnounced){var r={};r.category=o.default.PNConnectedCategory,r.operation=e.operation,r.affectedChannels=this._pendingChannelSubscriptions,r.subscribedChannels=this.getSubscribedChannels(),r.affectedChannelGroups=this._pendingChannelGroupSubscriptions,r.lastTimetoken=this._lastTimetoken,r.currentTimetoken=this._currentTimetoken,this._subscriptionStatusAnnounced=!0,this._listenerManager.announceStatus(r),this._pendingChannelSubscriptions=[],this._pendingChannelGroupSubscriptions=[]}var i=t.messages||[],a=this._config,u=a.requestMessageCountThreshold,c=a.dedupeOnSubscribe;if(u&&i.length>=u){var l={};l.category=o.default.PNRequestMessageCountExceededCategory,l.operation=e.operation,this._listenerManager.announceStatus(l)}i.forEach((function(e){var t=e.channel,r=e.subscriptionMatch,i=e.publishMetaData;if(t===r&&(r=null),c){if(n._dedupingManager.isDuplicate(e))return;n._dedupingManager.addEntry(e)}if(s.default.endsWith(e.channel,"-pnpres")){var o={channel:null,subscription:null};o.actualChannel=null!=r?t:null,o.subscribedChannel=null!=r?r:t,t&&(o.channel=t.substring(0,t.lastIndexOf("-pnpres"))),r&&(o.subscription=r.substring(0,r.lastIndexOf("-pnpres"))),o.action=e.payload.action,o.state=e.payload.data,o.timetoken=i.publishTimetoken,o.occupancy=e.payload.occupancy,o.uuid=e.payload.uuid,o.timestamp=e.payload.timestamp,e.payload.join&&(o.join=e.payload.join),e.payload.leave&&(o.leave=e.payload.leave),e.payload.timeout&&(o.timeout=e.payload.timeout),n._listenerManager.announcePresence(o)}else if(1===e.messageType){var a={channel:null,subscription:null};a.channel=t,a.subscription=r,a.timetoken=i.publishTimetoken,a.publisher=e.issuingClientId,e.userMetadata&&(a.userMetadata=e.userMetadata),a.message=e.payload,n._listenerManager.announceSignal(a)}else if(2===e.messageType){var u={channel:null,subscription:null};u.channel=t,u.subscription=r,u.timetoken=i.publishTimetoken,u.publisher=e.issuingClientId,e.userMetadata&&(u.userMetadata=e.userMetadata),u.message={event:e.payload.event,type:e.payload.type,data:e.payload.data},"user"===e.payload.type?n._listenerManager.announceUser(u):"space"===e.payload.type?n._listenerManager.announceSpace(u):"membership"===e.payload.type&&n._listenerManager.announceMembership(u)}else if(3===e.messageType){var l={};l.channel=t,l.subscription=r,l.timetoken=i.publishTimetoken,l.publisher=e.issuingClientId,l.data={messageTimetoken:e.payload.data.messageTimetoken,actionTimetoken:e.payload.data.actionTimetoken,type:e.payload.data.type,uuid:e.issuingClientId,value:e.payload.data.value},l.event=e.payload.event,n._listenerManager.announceMessageAction(l)}else{var d={channel:null,subscription:null};d.actualChannel=null!=r?t:null,d.subscribedChannel=null!=r?r:t,d.channel=t,d.subscription=r,d.timetoken=i.publishTimetoken,d.publisher=e.issuingClientId,e.userMetadata&&(d.userMetadata=e.userMetadata),n._config.cipherKey?d.message=n._crypto.decrypt(e.payload):d.message=e.payload,n._listenerManager.announceMessage(d)}})),this._region=t.metadata.region,this._startSubscribeLoop()}}},{key:"_stopSubscribeLoop",value:function(){this._subscribeCall&&("function"==typeof this._subscribeCall.abort&&this._subscribeCall.abort(),this._subscribeCall=null)}}])&&u(l.prototype,d),h);function h(e){var t=e.subscribeEndpoint,n=e.leaveEndpoint,s=e.heartbeatEndpoint,o=e.setStateEndpoint,a=e.timeEndpoint,u=e.config,l=e.crypto,d=e.listenerManager;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),c(this,"_crypto",void 0),c(this,"_config",void 0),c(this,"_listenerManager",void 0),c(this,"_reconnectionManager",void 0),c(this,"_leaveEndpoint",void 0),c(this,"_heartbeatEndpoint",void 0),c(this,"_setStateEndpoint",void 0),c(this,"_subscribeEndpoint",void 0),c(this,"_channels",void 0),c(this,"_presenceChannels",void 0),c(this,"_heartbeatChannels",void 0),c(this,"_heartbeatChannelGroups",void 0),c(this,"_channelGroups",void 0),c(this,"_presenceChannelGroups",void 0),c(this,"_currentTimetoken",void 0),c(this,"_lastTimetoken",void 0),c(this,"_storedTimetoken",void 0),c(this,"_region",void 0),c(this,"_subscribeCall",void 0),c(this,"_heartbeatTimer",void 0),c(this,"_subscriptionStatusAnnounced",void 0),c(this,"_autoNetworkDetection",void 0),c(this,"_isOnline",void 0),c(this,"_pendingChannelSubscriptions",void 0),c(this,"_pendingChannelGroupSubscriptions",void 0),c(this,"_dedupingManager",void 0),this._listenerManager=d,this._config=u,this._leaveEndpoint=n,this._heartbeatEndpoint=s,this._setStateEndpoint=o,this._subscribeEndpoint=t,this._crypto=l,this._channels={},this._presenceChannels={},this._heartbeatChannels={},this._heartbeatChannelGroups={},this._channelGroups={},this._presenceChannelGroups={},this._pendingChannelSubscriptions=[],this._pendingChannelGroupSubscriptions=[],this._currentTimetoken=0,this._lastTimetoken=0,this._storedTimetoken=null,this._subscriptionStatusAnnounced=!1,this._isOnline=!0,this._reconnectionManager=new r.default({timeEndpoint:a}),this._dedupingManager=new i.default({config:u})}t.default=f,e.exports=t.default},function(e,t,n){var r;function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,(r=n(8))&&r.__esModule,n(0);var o,a,u=(o=c,(a=[{key:"onReconnection",value:function(e){this._reconnectionCallback=e}},{key:"startPolling",value:function(){this._timeTimer=setInterval(this._performTimeLoop.bind(this),3e3)}},{key:"stopPolling",value:function(){clearInterval(this._timeTimer)}},{key:"_performTimeLoop",value:function(){var e=this;this._timeEndpoint((function(t){t.error||(clearInterval(e._timeTimer),e._reconnectionCallback())}))}}])&&i(o.prototype,a),c);function c(e){var t=e.timeEndpoint;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),s(this,"_reconnectionCallback",void 0),s(this,"_timeEndpoint",void 0),s(this,"_timeTimer",void 0),this._timeEndpoint=t}t.default=u,e.exports=t.default},function(e,t,n){var r;function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,(r=n(3))&&r.__esModule,n(0);var o,a,u=(o=c,(a=[{key:"getKey",value:function(e){var t=function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n+=1)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t}(JSON.stringify(e.payload)).toString(),n=e.publishMetaData.publishTimetoken;return"".concat(n,"-").concat(t)}},{key:"isDuplicate",value:function(e){return this.hashHistory.includes(this.getKey(e))}},{key:"addEntry",value:function(e){this.hashHistory.length>=this._config.maximumCacheSize&&this.hashHistory.shift(),this.hashHistory.push(this.getKey(e))}},{key:"clearHistory",value:function(){this.hashHistory=[]}}])&&i(o.prototype,a),c);function c(e){var t=e.config;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),s(this,"_config",void 0),s(this,"hashHistory",void 0),this.hashHistory=[],this._config=t}t.default=u,e.exports=t.default},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FCMNotificationPayload=t.MPNSNotificationPayload=t.APNSNotificationPayload=void 0,n(0);var g=(h(m,[{key:"payload",get:function(){return this._payload}},{key:"title",set:function(e){this._title=e}},{key:"subtitle",set:function(e){this._subtitle=e}},{key:"body",set:function(e){this._body=e}},{key:"badge",set:function(e){this._badge=e}},{key:"sound",set:function(e){this._sound=e}}]),h(m,[{key:"_setDefaultPayloadStructure",value:function(){}},{key:"toObject",value:function(){return{}}}]),m);function m(e,t,n){d(this,m),p(this,"_subtitle",void 0),p(this,"_payload",void 0),p(this,"_badge",void 0),p(this,"_sound",void 0),p(this,"_title",void 0),p(this,"_body",void 0),this._payload=e,this._setDefaultPayloadStructure(),this.title=t,this.body=n}var y=(c(v,g),h(v,[{key:"_setDefaultPayloadStructure",value:function(){this._payload.aps={alert:{}}}},{key:"toObject",value:function(){var e=this,t=s({},this._payload),n=t.aps,r=n.alert;if(this._isSilent&&(n["content-available"]=1),"apns2"===this._apnsPushType){if(!this._configurations||!this._configurations.length)throw new ReferenceError("APNS2 configuration is missing");var i=[];this._configurations.forEach((function(t){i.push(e._objectFromAPNS2Configuration(t))})),i.length&&(t.pn_push=i)}return r&&Object.keys(r).length||delete n.alert,this._isSilent&&(delete n.alert,delete n.badge,delete n.sound,r={}),this._isSilent||Object.keys(r).length?t:null}},{key:"_objectFromAPNS2Configuration",value:function(e){var t=this;if(!e.targets||!e.targets.length)throw new ReferenceError("At least one APNS2 target should be provided");var n=[];e.targets.forEach((function(e){n.push(t._objectFromAPNSTarget(e))}));var r=e.collapseId,i=e.expirationDate,s={auth_method:"token",targets:n,version:"v2"};return r&&r.length&&(s.collapse_id=r),i&&(s.expiration=i.toISOString()),s}},{key:"_objectFromAPNSTarget",value:function(e){if(!e.topic||!e.topic.length)throw new TypeError("Target 'topic' undefined.");var t=e.topic,n=e.environment,r=void 0===n?"development":n,i=e.excludedDevices,s=void 0===i?[]:i,o={topic:t,environment:r};return s.length&&(o.excluded_devices=s),o}},{key:"configurations",set:function(e){e&&e.length&&(this._configurations=e)}},{key:"notification",get:function(){return this._payload.aps}},{key:"title",get:function(){return this._title},set:function(e){e&&e.length&&(this._payload.aps.alert.title=e,this._title=e)}},{key:"subtitle",get:function(){return this._subtitle},set:function(e){e&&e.length&&(this._payload.aps.alert.subtitle=e,this._subtitle=e)}},{key:"body",get:function(){return this._body},set:function(e){e&&e.length&&(this._payload.aps.alert.body=e,this._body=e)}},{key:"badge",get:function(){return this._badge},set:function(e){null!=e&&(this._payload.aps.badge=e,this._badge=e)}},{key:"sound",get:function(){return this._sound},set:function(e){e&&e.length&&(this._payload.aps.sound=e,this._sound=e)}},{key:"silent",set:function(e){this._isSilent=e}}]),v);function v(){var e,t;d(this,v);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return p(u(t=o(this,(e=a(v)).call.apply(e,[this].concat(r)))),"_configurations",void 0),p(u(t),"_apnsPushType",void 0),p(u(t),"_isSilent",void 0),t}t.APNSNotificationPayload=y;var b=(c(_,g),h(_,[{key:"toObject",value:function(){return Object.keys(this._payload).length?s({},this._payload):null}},{key:"backContent",get:function(){return this._backContent},set:function(e){e&&e.length&&(this._payload.back_content=e,this._backContent=e)}},{key:"backTitle",get:function(){return this._backTitle},set:function(e){e&&e.length&&(this._payload.back_title=e,this._backTitle=e)}},{key:"count",get:function(){return this._count},set:function(e){null!=e&&(this._payload.count=e,this._count=e)}},{key:"title",get:function(){return this._title},set:function(e){e&&e.length&&(this._payload.title=e,this._title=e)}},{key:"type",get:function(){return this._type},set:function(e){e&&e.length&&(this._payload.type=e,this._type=e)}},{key:"subtitle",get:function(){return this.backTitle},set:function(e){this.backTitle=e}},{key:"body",get:function(){return this.backContent},set:function(e){this.backContent=e}},{key:"badge",get:function(){return this.count},set:function(e){this.count=e}}]),_);function _(){var e,t;d(this,_);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return p(u(t=o(this,(e=a(_)).call.apply(e,[this].concat(r)))),"_backContent",void 0),p(u(t),"_backTitle",void 0),p(u(t),"_count",void 0),p(u(t),"_type",void 0),t}t.MPNSNotificationPayload=b;var w=(c(k,g),h(k,[{key:"_setDefaultPayloadStructure",value:function(){this._payload.notification={},this._payload.data={}}},{key:"toObject",value:function(){var e=s({},this._payload.data),t=null,n={};if(2<Object.keys(this._payload).length){var r=this._payload;r.notification,r.data,e=s({},e,{},function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],0<=t.indexOf(n)||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(r,["notification","data"]))}return this._isSilent?e.notification=this._payload.notification:t=this._payload.notification,Object.keys(e).length&&(n.data=e),t&&Object.keys(t).length&&(n.notification=t),Object.keys(n).length?n:null}},{key:"notification",get:function(){return this._payload.notification}},{key:"data",get:function(){return this._payload.data}},{key:"title",get:function(){return this._title},set:function(e){e&&e.length&&(this._payload.notification.title=e,this._title=e)}},{key:"body",get:function(){return this._body},set:function(e){e&&e.length&&(this._payload.notification.body=e,this._body=e)}},{key:"sound",get:function(){return this._sound},set:function(e){e&&e.length&&(this._payload.notification.sound=e,this._sound=e)}},{key:"icon",get:function(){return this._icon},set:function(e){e&&e.length&&(this._payload.notification.icon=e,this._icon=e)}},{key:"tag",get:function(){return this._tag},set:function(e){e&&e.length&&(this._payload.notification.tag=e,this._tag=e)}},{key:"silent",set:function(e){this._isSilent=e}}]),k);function k(){var e,t;d(this,k);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return p(u(t=o(this,(e=a(k)).call.apply(e,[this].concat(r)))),"_isSilent",void 0),p(u(t),"_icon",void 0),p(u(t),"_tag",void 0),t}function S(e,t){d(this,S),p(this,"_payload",void 0),p(this,"_debugging",void 0),p(this,"_subtitle",void 0),p(this,"_badge",void 0),p(this,"_sound",void 0),p(this,"_title",void 0),p(this,"_body",void 0),p(this,"apns",void 0),p(this,"mpns",void 0),p(this,"fcm",void 0),this._payload={apns:{},mpns:{},fcm:{}},this._title=e,this._body=t,this.apns=new y(this._payload.apns,e,t),this.mpns=new b(this._payload.mpns,e,t),this.fcm=new w(this._payload.fcm,e,t)}t.FCMNotificationPayload=w;var T=(h(S,[{key:"debugging",set:function(e){this._debugging=e}},{key:"title",get:function(){return this._title}},{key:"body",get:function(){return this._body}},{key:"subtitle",get:function(){return this._subtitle},set:function(e){this._subtitle=e,this.apns.subtitle=e,this.mpns.subtitle=e,this.fcm.subtitle=e}},{key:"badge",get:function(){return this._badge},set:function(e){this._badge=e,this.apns.badge=e,this.mpns.badge=e,this.fcm.badge=e}},{key:"sound",get:function(){return this._sound},set:function(e){this._sound=e,this.apns.sound=e,this.mpns.sound=e,this.fcm.sound=e}}]),h(S,[{key:"buildPayload",value:function(e){var t={};if(e.includes("apns")||e.includes("apns2")){this.apns._apnsPushType=e.includes("apns")?"apns":"apns2";var n=this.apns.toObject();n&&Object.keys(n).length&&(t.pn_apns=n)}if(e.includes("mpns")){var r=this.mpns.toObject();r&&Object.keys(r).length&&(t.pn_mpns=r)}if(e.includes("fcm")){var i=this.fcm.toObject();i&&Object.keys(i).length&&(t.pn_gcm=i)}return Object.keys(t).length&&this._debugging&&(t.pn_debug=!0),t}}]),S);t.default=T},function(e,t,n){var r;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,(r=n(3))&&r.__esModule,n(0);var a,u,c=(a=l,(u=[{key:"_initializeTokens",value:function(){this._userTokens={},this._spaceTokens={},this._userToken=void 0,this._spaceToken=void 0}},{key:"_setToken",value:function(e){var t=this,n=this.parseToken(e);n&&n.resources&&(n.resources.users&&Object.keys(n.resources.users).forEach((function(n){t._userTokens[n]=e})),n.resources.spaces&&Object.keys(n.resources.spaces).forEach((function(n){t._spaceTokens[n]=e}))),n&&n.patterns&&(n.patterns.users&&0<Object.keys(n.patterns.users).length&&(this._userToken=e),n.patterns.spaces&&0<Object.keys(n.patterns.spaces).length&&(this._spaceToken=e))}},{key:"setToken",value:function(e){e&&0<e.length&&this._setToken(e)}},{key:"setTokens",value:function(e){var t=this;e&&e.length&&"object"===i(e)&&e.forEach((function(e){t.setToken(e)}))}},{key:"getTokens",value:function(e){var t=this,n={users:{},spaces:{}};return e?(e.user&&(n.user=this._userToken),e.space&&(n.space=this._spaceToken),e.users&&e.users.forEach((function(e){n.users[e]=t._userTokens[e]})),e.space&&e.spaces.forEach((function(e){n.spaces[e]=t._spaceTokens[e]}))):(this._userToken&&(n.user=this._userToken),this._spaceToken&&(n.space=this._spaceToken),Object.keys(this._userTokens).forEach((function(e){n.users[e]=t._userTokens[e]})),Object.keys(this._spaceTokens).forEach((function(e){n.spaces[e]=t._spaceTokens[e]}))),n}},{key:"getToken",value:function(e,t){var n;return t?"user"===e?n=this._userTokens[t]:"space"===e&&(n=this._spaceTokens[t]):"user"===e?n=this._userToken:"space"===e&&(n=this._spaceToken),n}},{key:"extractPermissions",value:function(e){var t={create:!1,read:!1,write:!1,manage:!1,delete:!1};return 16==(16&e)&&(t.create=!0),8==(8&e)&&(t.delete=!0),4==(4&e)&&(t.manage=!0),2==(2&e)&&(t.write=!0),1==(1&e)&&(t.read=!0),t}},{key:"parseToken",value:function(e){var t=this,n=this._cbor.decodeToken(e);if(void 0!==n){var r=Object.keys(n.res.usr),i=Object.keys(n.res.spc),s=Object.keys(n.pat.usr),o=Object.keys(n.pat.spc),a={version:n.v,timestamp:n.t,ttl:n.ttl},u=0<r.length,c=0<i.length;(u||c)&&(a.resources={},u&&(a.resources.users={},r.forEach((function(e){a.resources.users[e]=t.extractPermissions(n.res.usr[e])}))),c&&(a.resources.spaces={},i.forEach((function(e){a.resources.spaces[e]=t.extractPermissions(n.res.spc[e])}))));var l=0<s.length,d=0<o.length;return(l||d)&&(a.patterns={},l&&(a.patterns.users={},s.forEach((function(e){a.patterns.users[e]=t.extractPermissions(n.pat.usr[e])}))),d&&(a.patterns.spaces={},o.forEach((function(e){a.patterns.spaces[e]=t.extractPermissions(n.pat.spc[e])})))),0<Object.keys(n.meta).length&&(a.meta=n.meta),a.signature=n.sig,a}}},{key:"clearTokens",value:function(){this._initializeTokens()}}])&&s(a.prototype,u),l);function l(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),o(this,"_config",void 0),o(this,"_cbor",void 0),o(this,"_userTokens",void 0),o(this,"_spaceTokens",void 0),o(this,"_userToken",void 0),o(this,"_spaceToken",void 0),this._config=e,this._cbor=t,this._initializeTokens()}t.default=c,e.exports=t.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.networking,o=e.config,a=null,u=null,c={};a=t.getOperation()===s.default.PNTimeOperation||t.getOperation()===s.default.PNChannelGroupsOperation?arguments.length<=2?void 0:arguments[2]:(c=arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3]),"undefined"==typeof Promise||a||(u=i.default.createPromise());var l=t.validateParams(e,c);if(l)return a?a(p(l)):u?(u.reject(new f("Validation failed, check status for details",p(l))),u.promise):void 0;var d,h=t.prepareParams(e,c),m=function(e,t,n){return e.usePost&&e.usePost(t,n)?e.postURL(t,n):e.usePatch&&e.usePatch(t,n)?e.patchURL(t,n):e.getURL(t,n)}(t,e,c),y={url:m,operation:t.getOperation(),timeout:t.getRequestTimeout(e),headers:t.getRequestHeaders?t.getRequestHeaders():{}};if(h.uuid=o.UUID,h.pnsdk=function(e){if(e.sdkName)return e.sdkName;var t="PubNub-JS-".concat(e.sdkFamily);e.partnerId&&(t+="-".concat(e.partnerId)),t+="/".concat(e.getVersion());var n=e._getPnsdkSuffix(" ");return 0<n.length&&(t+=n),t}(o),o.useInstanceId&&(h.instanceid=o.instanceId),o.useRequestId&&(h.requestid=r.default.createUUID()),t.isAuthSupported()){var v=function(e,t,n){var r;return e.getAuthToken&&(r=e.getAuthToken(t,n)),r}(t,e,c)||o.getAuthKey();v&&(h.auth=v)}function b(n,r){if(n.error)a?a(n):u&&u.reject(new f("PubNub call failed, check status for details",n));else{var i=t.handleResponse(e,r,c);a?a(n,i):u&&u.fulfill(i)}}if(o.secretKey&&function(e,t,n,r,s){var o=e.config,a=e.crypto,u=g(e,s,r);n.timestamp=Math.floor((new Date).getTime()/1e3);var c="".concat(u,"\n").concat(o.publishKey,"\n").concat(t,"\n").concat(i.default.signPamFromParams(n),"\n");if("POST"===u){var l=s.postPayload(e,r);c+="string"==typeof l?l:JSON.stringify(l)}else if("PATCH"===u){var d=s.patchPayload(e,r);c+="string"==typeof d?d:JSON.stringify(d)}var f="v2.".concat(a.HMACSHA256(c));f=(f=(f=f.replace(/\+/g,"-")).replace(/\//g,"_")).replace(/=+$/,""),n.signature=f}(e,m,h,c,t),"POST"===g(e,t,c)){var _=t.postPayload(e,c);d=n.POST(h,_,y,b)}else if("PATCH"===g(e,t,c)){var w=t.patchPayload(e,c);d=n.PATCH(h,w,y,b)}else d="DELETE"===g(e,t,c)?n.DELETE(h,y,b):n.GET(h,y,b);return t.getOperation()===s.default.PNSubscribeOperation?d:u?u.promise:void 0};var r=o(n(5)),i=(n(0),o(n(2))),s=(o(n(3)),o(n(1)));function o(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e){var t="function"==typeof Map?new Map:void 0;return(u=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return c(e,arguments,d(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),l(n,e)})(e)}function c(e,t,n){return(c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&l(i,n.prototype),i}).apply(null,arguments)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(h,u(Error)),h);function h(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(n=function(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,d(h).call(this,e))).name=n.constructor.name,n.status=t,n.message=e,n}function p(e){return function(e,t){return e.type="validationError",e.error=!0,e}({message:e})}function g(e,t,n){return t.usePost&&t.usePost(e,n)?"POST":t.usePatch&&t.usePatch(e,n)?"PATCH":t.useDelete&&t.useDelete(e,n)?"DELETE":"GET"}e.exports=t.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNAddChannelsToGroupOperation},t.validateParams=function(e,t){var n=t.channels,r=t.channelGroup,i=e.config;return r?n&&0!==n.length?i.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing Channel Group"},t.getURL=function(e,t){var n=t.channelGroup,r=e.config;return"/v1/channel-registration/sub-key/".concat(r.subscribeKey,"/channel-group/").concat(i.default.encodeString(n))},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.channels;return{add:(void 0===n?[]:n).join(",")}},t.handleResponse=function(){return{}},n(0);var r=s(n(1)),i=s(n(2));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNRemoveChannelsFromGroupOperation},t.validateParams=function(e,t){var n=t.channels,r=t.channelGroup,i=e.config;return r?n&&0!==n.length?i.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing Channel Group"},t.getURL=function(e,t){var n=t.channelGroup,r=e.config;return"/v1/channel-registration/sub-key/".concat(r.subscribeKey,"/channel-group/").concat(i.default.encodeString(n))},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.channels;return{remove:(void 0===n?[]:n).join(",")}},t.handleResponse=function(){return{}},n(0);var r=s(n(1)),i=s(n(2));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNRemoveGroupOperation},t.validateParams=function(e,t){var n=t.channelGroup,r=e.config;return n?r.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channel Group"},t.getURL=function(e,t){var n=t.channelGroup,r=e.config;return"/v1/channel-registration/sub-key/".concat(r.subscribeKey,"/channel-group/").concat(i.default.encodeString(n),"/remove")},t.isAuthSupported=function(){return!0},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.prepareParams=function(){return{}},t.handleResponse=function(){return{}},n(0);var r=s(n(1)),i=s(n(2));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNChannelGroupsOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e){var t=e.config;return"/v1/channel-registration/sub-key/".concat(t.subscribeKey,"/channel-group")},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(){return{}},t.handleResponse=function(e,t){return{groups:t.payload.groups}},n(0);var r,i=(r=n(1))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNChannelsForGroupOperation},t.validateParams=function(e,t){var n=t.channelGroup,r=e.config;return n?r.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channel Group"},t.getURL=function(e,t){var n=t.channelGroup,r=e.config;return"/v1/channel-registration/sub-key/".concat(r.subscribeKey,"/channel-group/").concat(i.default.encodeString(n))},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(){return{}},t.handleResponse=function(e,t){return{channels:t.payload.channels}},n(0);var r=s(n(1)),i=s(n(2));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNPushNotificationEnabledChannelsOperation},t.validateParams=function(e,t){var n=t.device,r=t.pushGateway,i=t.channels,s=t.topic,o=e.config;return n?r?"apns2"!==r||s?i&&0!==i.length?o.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing APNS2 topic":"Missing GW Type (pushGateway: gcm, apns or apns2)":"Missing Device ID (device)"},t.getURL=function(e,t){var n=t.device,r=t.pushGateway,i=e.config;return"apns2"!==r?"/v1/push/sub-key/".concat(i.subscribeKey,"/devices/").concat(n):"/v2/push/sub-key/".concat(i.subscribeKey,"/devices-apns2/").concat(n)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.pushGateway,r=t.channels,i=void 0===r?[]:r,s=t.environment,o=void 0===s?"development":s,a=t.topic,u={type:n,add:i.join(",")};return"apns2"===n&&delete(u=Object.assign({},u,{environment:o,topic:a})).type,u},t.handleResponse=function(){return{}},n(0);var r,i=(r=n(1))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNPushNotificationEnabledChannelsOperation},t.validateParams=function(e,t){var n=t.device,r=t.pushGateway,i=t.channels,s=t.topic,o=e.config;return n?r?"apns2"!==r||s?i&&0!==i.length?o.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing APNS2 topic":"Missing GW Type (pushGateway: gcm, apns or apns2)":"Missing Device ID (device)"},t.getURL=function(e,t){var n=t.device,r=t.pushGateway,i=e.config;return"apns2"!==r?"/v1/push/sub-key/".concat(i.subscribeKey,"/devices/").concat(n):"/v2/push/sub-key/".concat(i.subscribeKey,"/devices-apns2/").concat(n)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.pushGateway,r=t.channels,i=void 0===r?[]:r,s=t.environment,o=void 0===s?"development":s,a=t.topic,u={type:n,remove:i.join(",")};return"apns2"===n&&delete(u=Object.assign({},u,{environment:o,topic:a})).type,u},t.handleResponse=function(){return{}},n(0);var r,i=(r=n(1))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNPushNotificationEnabledChannelsOperation},t.validateParams=function(e,t){var n=t.device,r=t.pushGateway,i=t.topic,s=e.config;return n?r?"apns2"!==r||i?s.subscribeKey?void 0:"Missing Subscribe Key":"Missing APNS2 topic":"Missing GW Type (pushGateway: gcm, apns or apns2)":"Missing Device ID (device)"},t.getURL=function(e,t){var n=t.device,r=t.pushGateway,i=e.config;return"apns2"!==r?"/v1/push/sub-key/".concat(i.subscribeKey,"/devices/").concat(n):"/v2/push/sub-key/".concat(i.subscribeKey,"/devices-apns2/").concat(n)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.pushGateway,r=t.environment,i=void 0===r?"development":r,s=t.topic,o={type:n};return"apns2"===n&&delete(o=Object.assign({},o,{environment:i,topic:s})).type,o},t.handleResponse=function(e,t){return{channels:t}},n(0);var r,i=(r=n(1))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNRemoveAllPushNotificationsOperation},t.validateParams=function(e,t){var n=t.device,r=t.pushGateway,i=t.topic,s=e.config;return n?r?"apns2"!==r||i?s.subscribeKey?void 0:"Missing Subscribe Key":"Missing APNS2 topic":"Missing GW Type (pushGateway: gcm, apns or apns2)":"Missing Device ID (device)"},t.getURL=function(e,t){var n=t.device,r=t.pushGateway,i=e.config;return"apns2"!==r?"/v1/push/sub-key/".concat(i.subscribeKey,"/devices/").concat(n,"/remove"):"/v2/push/sub-key/".concat(i.subscribeKey,"/devices-apns2/").concat(n,"/remove")},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.pushGateway,r=t.environment,i=void 0===r?"development":r,s=t.topic,o={type:n};return"apns2"===n&&delete(o=Object.assign({},o,{environment:i,topic:s})).type,o},t.handleResponse=function(){return{}},n(0);var r,i=(r=n(1))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNUnsubscribeOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=e.config,r=t.channels,s=void 0===r?[]:r,o=0<s.length?s.join(","):",";return"/v2/presence/sub-key/".concat(n.subscribeKey,"/channel/").concat(i.default.encodeString(o),"/leave")},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.channelGroups,r=void 0===n?[]:n,i={};return 0<r.length&&(i["channel-group"]=r.join(",")),i},t.handleResponse=function(){return{}},n(0);var r=s(n(1)),i=s(n(2));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNWhereNowOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=e.config,r=t.uuid,i=void 0===r?n.UUID:r;return"/v2/presence/sub-key/".concat(n.subscribeKey,"/uuid/").concat(i)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(){return{}},t.handleResponse=function(e,t){return t.payload?{channels:t.payload.channels}:{channels:[]}},n(0);var r,i=(r=n(1))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNHeartbeatOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=e.config,r=t.channels,s=void 0===r?[]:r,o=0<s.length?s.join(","):",";return"/v2/presence/sub-key/".concat(n.subscribeKey,"/channel/").concat(i.default.encodeString(o),"/heartbeat")},t.isAuthSupported=function(){return!0},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.prepareParams=function(e,t){var n=t.channelGroups,r=void 0===n?[]:n,i=t.state,s=void 0===i?{}:i,o=e.config,a={};return 0<r.length&&(a["channel-group"]=r.join(",")),a.state=JSON.stringify(s),a.heartbeat=o.getPresenceTimeout(),a},t.handleResponse=function(){return{}},n(0);var r=s(n(1)),i=s(n(2));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNGetStateOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=e.config,r=t.uuid,s=void 0===r?n.UUID:r,o=t.channels,a=void 0===o?[]:o,u=0<a.length?a.join(","):",";return"/v2/presence/sub-key/".concat(n.subscribeKey,"/channel/").concat(i.default.encodeString(u),"/uuid/").concat(s)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.channelGroups,r=void 0===n?[]:n,i={};return 0<r.length&&(i["channel-group"]=r.join(",")),i},t.handleResponse=function(e,t,n){var r=n.channels,i=void 0===r?[]:r,s=n.channelGroups,o=void 0===s?[]:s,a={};return 1===i.length&&0===o.length?a[i[0]]=t.payload:a=t.payload,{channels:a}},n(0);var r=s(n(1)),i=s(n(2));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNSetStateOperation},t.validateParams=function(e,t){var n=e.config,r=t.state,i=t.channels,s=void 0===i?[]:i,o=t.channelGroups,a=void 0===o?[]:o;return r?n.subscribeKey?0===s.length&&0===a.length?"Please provide a list of channels and/or channel-groups":void 0:"Missing Subscribe Key":"Missing State"},t.getURL=function(e,t){var n=e.config,r=t.channels,s=void 0===r?[]:r,o=0<s.length?s.join(","):",";return"/v2/presence/sub-key/".concat(n.subscribeKey,"/channel/").concat(i.default.encodeString(o),"/uuid/").concat(n.UUID,"/data")},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.state,r=t.channelGroups,i=void 0===r?[]:r,s={};return s.state=JSON.stringify(n),0<i.length&&(s["channel-group"]=i.join(",")),s},t.handleResponse=function(e,t){return{state:t.payload}},n(0);var r=s(n(1)),i=s(n(2));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNHereNowOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=e.config,r=t.channels,s=void 0===r?[]:r,o=t.channelGroups,a=void 0===o?[]:o,u="/v2/presence/sub-key/".concat(n.subscribeKey);if(0<s.length||0<a.length){var c=0<s.length?s.join(","):",";u+="/channel/".concat(i.default.encodeString(c))}return u},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.channelGroups,r=void 0===n?[]:n,i=t.includeUUIDs,s=void 0===i||i,o=t.includeState,a=void 0!==o&&o,u={};return s||(u.disable_uuids=1),a&&(u.state=1),0<r.length&&(u["channel-group"]=r.join(",")),u},t.handleResponse=function(e,t,n){var r,i=n.channels,s=void 0===i?[]:i,o=n.channelGroups,a=void 0===o?[]:o,u=n.includeUUIDs,c=void 0===u||u,l=n.includeState,d=void 0!==l&&l;return r=1<s.length||0<a.length||0===a.length&&0===s.length?function(){var e={};return e.totalChannels=t.payload.total_channels,e.totalOccupancy=t.payload.total_occupancy,e.channels={},Object.keys(t.payload.channels).forEach((function(n){var r=t.payload.channels[n],i=[];return e.channels[n]={occupants:i,name:n,occupancy:r.occupancy},c&&r.uuids.forEach((function(e){d?i.push({state:e.state,uuid:e.uuid}):i.push({state:null,uuid:e})})),e})),e}():function(){var e={},n=[];return e.totalChannels=1,e.totalOccupancy=t.occupancy,e.channels={},e.channels[s[0]]={occupants:n,name:s[0],occupancy:t.occupancy},c&&t.uuids&&t.uuids.forEach((function(e){d?n.push({state:e.state,uuid:e.uuid}):n.push({state:null,uuid:e})})),e}(),r},n(0);var r=s(n(1)),i=s(n(2));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNAddMessageActionOperation},t.validateParams=function(e,t){var n=e.config,r=t.action,i=t.channel;return t.messageTimetoken?n.subscribeKey?i?r?r.value?r.type?15<r.type.length?"Action.type value exceed maximum length of 15":void 0:"Missing Action.type":"Missing Action.value":"Missing Action":"Missing message channel":"Missing Subscribe Key":"Missing message timetoken"},t.usePost=function(){return!0},t.postURL=function(e,t){var n=e.config,r=t.channel,i=t.messageTimetoken;return"/v1/message-actions/".concat(n.subscribeKey,"/channel/").concat(r,"/message/").concat(i)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.getRequestHeaders=function(){return{"Content-Type":"application/json"}},t.isAuthSupported=function(){return!0},t.prepareParams=function(){return{}},t.postPayload=function(e,t){return t.action},t.handleResponse=function(e,t){return{data:t.data}},n(0);var r,i=(r=n(1))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNRemoveMessageActionOperation},t.validateParams=function(e,t){var n=e.config,r=t.channel,i=t.actionTimetoken;return t.messageTimetoken?i?n.subscribeKey?r?void 0:"Missing message channel":"Missing Subscribe Key":"Missing action timetoken":"Missing message timetoken"},t.useDelete=function(){return!0},t.getURL=function(e,t){var n=e.config,r=t.channel,i=t.actionTimetoken,s=t.messageTimetoken;return"/v1/message-actions/".concat(n.subscribeKey,"/channel/").concat(r,"/message/").concat(s,"/action/").concat(i)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(){return{}},t.handleResponse=function(e,t){return{data:t.data}},n(0);var r,i=(r=n(1))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNGetMessageActionsOperation},t.validateParams=function(e,t){var n=e.config,r=t.channel;return n.subscribeKey?r?void 0:"Missing message channel":"Missing Subscribe Key"},t.getURL=function(e,t){var n=e.config,r=t.channel;return"/v1/message-actions/".concat(n.subscribeKey,"/channel/").concat(r)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.limit,r=t.start,i=t.end,s={};return n&&(s.limit=n),r&&(s.start=r),i&&(s.end=i),s},t.handleResponse=function(e,t){var n={data:t.data,start:null,end:null};return n.data.length&&(n.end=n.data[n.data.length-1].actionTimetoken,n.start=n.data[0].actionTimetoken),n},n(0);var r,i=(r=n(1))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNCreateUserOperation},t.validateParams=function(e,t){var n=e.config,r=t.id,i=t.name,s=t.custom;return r?i?n.subscribeKey?s&&!Object.values(s).every((function(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e}))?"Invalid custom type, only string, number and boolean values are allowed.":void 0:"Missing Subscribe Key":"Missing User.name":"Missing User.id"},t.usePost=function(){return!0},t.getURL=function(e){var t=e.config;return"/v1/objects/".concat(t.subscribeKey,"/users")},t.postURL=function(e){var t=e.config;return"/v1/objects/".concat(t.subscribeKey,"/users")},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.getAuthToken=function(e,t){return e.tokenManager.getToken("user",t.id)||e.tokenManager.getToken("user")},t.prepareParams=function(e,t){var n=t.include,r={};if(n?void 0===n.customFields&&(n.customFields=!0):n={customFields:!0},n){var i=[];n.customFields&&i.push("custom");var s=i.join(",");0<s.length&&(r.include=s)}return r},t.postPayload=function(e,t){return function(e,t){return t}(0,t)},t.handleResponse=function(e,t){return t},n(0);var r,i=(r=n(1))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNUpdateUserOperation},t.validateParams=function(e,t){var n=e.config,r=t.id,i=t.name,s=t.custom;return r?i?n.subscribeKey?s&&!Object.values(s).every((function(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e}))?"Invalid custom type, only string, number and boolean values are allowed.":void 0:"Missing Subscribe Key":"Missing User.name":"Missing User.id"},t.usePatch=function(){return!0},t.getURL=function(e,t){var n=e.config,r=t.id;return"/v1/objects/".concat(n.subscribeKey,"/users/").concat(r)},t.patchURL=function(e,t){var n=e.config,r=t.id;return"/v1/objects/".concat(n.subscribeKey,"/users/").concat(r)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.getAuthToken=function(e,t){return e.tokenManager.getToken("user",t.id)||e.tokenManager.getToken("user")},t.prepareParams=function(e,t){var n=t.include,r={};if(n?void 0===n.customFields&&(n.customFields=!0):n={customFields:!0},n){var i=[];n.customFields&&i.push("custom");var s=i.join(",");0<s.length&&(r.include=s)}return r},t.patchPayload=function(e,t){return function(e,t){return t}(0,t)},t.handleResponse=function(e,t){return t},n(0);var r,i=(r=n(1))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNDeleteUserOperation},t.validateParams=function(e,t){var n=e.config;return t?n.subscribeKey?void 0:"Missing Subscribe Key":"Missing UserId"},t.useDelete=function(){return!0},t.getURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/users/").concat(t)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.getAuthToken=function(e,t){return e.tokenManager.getToken("user",t)||e.tokenManager.getToken("user")},t.prepareParams=function(){return{}},t.handleResponse=function(e,t){return t},n(0);var r,i=(r=n(1))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNGetUserOperation},t.validateParams=function(e,t){if(!t.userId)return"Missing userId"},t.getURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/users/").concat(t.userId)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.getAuthToken=function(e,t){return e.tokenManager.getToken("user",t.userId)||e.tokenManager.getToken("user")},t.prepareParams=function(e,t){var n=t.include,r={};if(n?void 0===n.customFields&&(n.customFields=!0):n={customFields:!0},n){var i=[];n.customFields&&i.push("custom");var s=i.join(",");0<s.length&&(r.include=s)}return r},t.handleResponse=function(e,t){return t},n(0);var r,i=(r=n(1))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNGetUsersOperation},t.validateParams=function(){},t.getURL=function(e){var t=e.config;return"/v1/objects/".concat(t.subscribeKey,"/users")},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.getAuthToken=function(e){return e.tokenManager.getToken("user")},t.prepareParams=function(e,t){var n=t.include,r=t.limit,i=t.page,s={};if(r&&(s.limit=r),n){var o=[];n.totalCount&&(s.count=!0),n.customFields&&o.push("custom");var a=o.join(",");0<a.length&&(s.include=a)}return i&&(i.next&&(s.start=i.next),i.prev&&(s.end=i.prev)),s},t.handleResponse=function(e,t){return t},n(0);var r,i=(r=n(1))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNCreateSpaceOperation},t.validateParams=function(e,t){var n=e.config,r=t.id,i=t.name,s=t.custom;return r?i?n.subscribeKey?s&&!Object.values(s).every((function(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e}))?"Invalid custom type, only string, number and boolean values are allowed.":void 0:"Missing Subscribe Key":"Missing Space.name":"Missing Space.id"},t.usePost=function(){return!0},t.getURL=function(e){var t=e.config;return"/v1/objects/".concat(t.subscribeKey,"/spaces")},t.postURL=function(e){var t=e.config;return"/v1/objects/".concat(t.subscribeKey,"/spaces")},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.getAuthToken=function(e,t){return e.tokenManager.getToken("space",t.id)||e.tokenManager.getToken("space")},t.prepareParams=function(e,t){var n=t.include,r={};if(n?void 0===n.customFields&&(n.customFields=!0):n={customFields:!0},n){var i=[];n.customFields&&i.push("custom");var s=i.join(",");0<s.length&&(r.include=s)}return r},t.postPayload=function(e,t){return function(e,t){return t}(0,t)},t.handleResponse=function(e,t){return t},n(0);var r,i=(r=n(1))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNUpdateSpaceOperation},t.validateParams=function(e,t){var n=e.config,r=t.id,i=t.name,s=t.custom;return r?i?n.subscribeKey?s&&!Object.values(s).every((function(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e}))?"Invalid custom type, only string, number and boolean values are allowed.":void 0:"Missing Subscribe Key":"Missing Space.name":"Missing Space.id"},t.usePatch=function(){return!0},t.getURL=function(e,t){var n=e.config,r=t.id;return"/v1/objects/".concat(n.subscribeKey,"/spaces/").concat(r)},t.patchURL=function(e,t){var n=e.config,r=t.id;return"/v1/objects/".concat(n.subscribeKey,"/spaces/").concat(r)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.getAuthToken=function(e,t){return e.tokenManager.getToken("space",t.id)||e.tokenManager.getToken("space")},t.prepareParams=function(e,t){var n=t.include,r={};if(n?void 0===n.customFields&&(n.customFields=!0):n={customFields:!0},n){var i=[];n.customFields&&i.push("custom");var s=i.join(",");0<s.length&&(r.include=s)}return r},t.patchPayload=function(e,t){return function(e,t){return t}(0,t)},t.handleResponse=function(e,t){return t},n(0);var r,i=(r=n(1))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNDeleteSpaceOperation},t.validateParams=function(e,t){var n=e.config;return t?n.subscribeKey?void 0:"Missing Subscribe Key":"Missing SpaceId"},t.useDelete=function(){return!0},t.getURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/spaces/").concat(t)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.getAuthToken=function(e,t){return e.tokenManager.getToken("space",t)||e.tokenManager.getToken("space")},t.prepareParams=function(){return{}},t.handleResponse=function(e,t){return t},n(0);var r,i=(r=n(1))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNGetSpacesOperation},t.validateParams=function(){},t.getURL=function(e){var t=e.config;return"/v1/objects/".concat(t.subscribeKey,"/spaces")},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.getAuthToken=function(e){return e.tokenManager.getToken("space")},t.prepareParams=function(e,t){var n=t.include,r=t.limit,i=t.page,s={};if(r&&(s.limit=r),n){var o=[];n.totalCount&&(s.count=!0),n.customFields&&o.push("custom");var a=o.join(",");0<a.length&&(s.include=a)}return i&&(i.next&&(s.start=i.next),i.prev&&(s.end=i.prev)),s},t.handleResponse=function(e,t){return t},n(0);var r,i=(r=n(1))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNGetSpaceOperation},t.validateParams=function(e,t){if(!t.spaceId)return"Missing spaceId"},t.getURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/spaces/").concat(t.spaceId)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.getAuthToken=function(e,t){return e.tokenManager.getToken("space",t.spaceId)||e.tokenManager.getToken("space")},t.prepareParams=function(e,t){var n=t.include,r={};if(n?void 0===n.customFields&&(n.customFields=!0):n={customFields:!0},n){var i=[];n.customFields&&i.push("custom");var s=i.join(",");0<s.length&&(r.include=s)}return r},t.handleResponse=function(e,t){return t},n(0);var r,i=(r=n(1))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNGetMembersOperation},t.validateParams=function(e,t){if(!t.spaceId)return"Missing spaceId"},t.getURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/spaces/").concat(t.spaceId,"/users")},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.getAuthToken=function(e,t){return e.tokenManager.getToken("space",t.spaceId)||e.tokenManager.getToken("space")},t.prepareParams=function(e,t){var n=t.include,r=t.limit,i=t.page,s={};if(r&&(s.limit=r),n){var o=[];n.totalCount&&(s.count=!0),n.customFields&&o.push("custom"),n.userFields&&o.push("user"),n.customUserFields&&o.push("user.custom");var a=o.join(",");0<a.length&&(s.include=a)}return i&&(i.next&&(s.start=i.next),i.prev&&(s.end=i.prev)),s},t.handleResponse=function(e,t){return t},n(0);var r,i=(r=n(1))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNUpdateMembersOperation},t.validateParams=function(e,t){var n=t.spaceId,r=t.users;return n?r?void 0:"Missing users":"Missing spaceId"},t.getURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/spaces/").concat(t.spaceId,"/users")},t.patchURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/spaces/").concat(t.spaceId,"/users")},t.usePatch=function(){return!0},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.getAuthToken=function(e,t){return e.tokenManager.getToken("space",t.spaceId)||e.tokenManager.getToken("space")},t.prepareParams=function(e,t){var n=t.include,r=t.limit,i=t.page,s={};if(r&&(s.limit=r),n){var o=[];n.totalCount&&(s.count=!0),n.customFields&&o.push("custom"),n.spaceFields&&o.push("space"),n.customSpaceFields&&o.push("space.custom");var a=o.join(",");0<a.length&&(s.include=a)}return i&&(i.next&&(s.start=i.next),i.prev&&(s.end=i.prev)),s},t.patchPayload=function(e,t){return function(e,t){var n=t.users,r={};return n&&0<n.length&&(r.add=[],n.forEach((function(e){var t={id:e.id};e.custom&&(t.custom=e.custom),r.add.push(t)}))),r}(0,t)},t.handleResponse=function(e,t){return t},n(0);var r,i=(r=n(1))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNUpdateMembersOperation},t.validateParams=function(e,t){var n=t.spaceId,r=t.users;return n?r?void 0:"Missing users":"Missing spaceId"},t.getURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/spaces/").concat(t.spaceId,"/users")},t.patchURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/spaces/").concat(t.spaceId,"/users")},t.usePatch=function(){return!0},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.getAuthToken=function(e,t){return e.tokenManager.getToken("space",t.spaceId)||e.tokenManager.getToken("space")},t.prepareParams=function(e,t){var n=t.include,r=t.limit,i=t.page,s={};if(r&&(s.limit=r),n){var o=[];n.totalCount&&(s.count=!0),n.customFields&&o.push("custom"),n.spaceFields&&o.push("space"),n.customSpaceFields&&o.push("space.custom");var a=o.join(",");0<a.length&&(s.include=a)}return i&&(i.next&&(s.start=i.next),i.prev&&(s.end=i.prev)),s},t.patchPayload=function(e,t){return function(e,t){var n=t.addMembers,r=t.updateMembers,i=t.removeMembers,s=t.users,o={};return n&&0<n.length&&(o.add=[],n.forEach((function(e){var t={id:e.id};e.custom&&(t.custom=e.custom),o.add.push(t)}))),r&&0<r.length&&(o.update=[],r.forEach((function(e){var t={id:e.id};e.custom&&(t.custom=e.custom),o.update.push(t)}))),s&&0<s.length&&(o.update=o.update||[],s.forEach((function(e){var t={id:e.id};e.custom&&(t.custom=e.custom),o.update.push(t)}))),i&&0<i.length&&(o.remove=[],i.forEach((function(e){o.remove.push({id:e})}))),o}(0,t)},t.handleResponse=function(e,t){return t},n(0);var r,i=(r=n(1))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNUpdateMembersOperation},t.validateParams=function(e,t){var n=t.spaceId,r=t.users;return n?r?void 0:"Missing users":"Missing spaceId"},t.getURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/spaces/").concat(t.spaceId,"/users")},t.patchURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/spaces/").concat(t.spaceId,"/users")},t.usePatch=function(){return!0},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.getAuthToken=function(e,t){return e.tokenManager.getToken("space",t.spaceId)||e.tokenManager.getToken("space")},t.prepareParams=function(e,t){var n=t.include,r=t.limit,i=t.page,s={};if(r&&(s.limit=r),n){var o=[];n.totalCount&&(s.count=!0),n.customFields&&o.push("custom"),n.spaceFields&&o.push("space"),n.customSpaceFields&&o.push("space.custom");var a=o.join(",");0<a.length&&(s.include=a)}return i&&(i.next&&(s.start=i.next),i.prev&&(s.end=i.prev)),s},t.patchPayload=function(e,t){return function(e,t){var n=t.users,r={};return n&&0<n.length&&(r.remove=[],n.forEach((function(e){r.remove.push({id:e})}))),r}(0,t)},t.handleResponse=function(e,t){return t},n(0);var r,i=(r=n(1))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNGetMembershipsOperation},t.validateParams=function(e,t){if(!t.userId)return"Missing userId"},t.getURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/users/").concat(t.userId,"/spaces")},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.getAuthToken=function(e,t){return e.tokenManager.getToken("user",t.userId)||e.tokenManager.getToken("user")},t.prepareParams=function(e,t){var n=t.include,r=t.limit,i=t.page,s={};if(r&&(s.limit=r),n){var o=[];n.totalCount&&(s.count=!0),n.customFields&&o.push("custom"),n.spaceFields&&o.push("space"),n.customSpaceFields&&o.push("space.custom");var a=o.join(",");0<a.length&&(s.include=a)}return i&&(i.next&&(s.start=i.next),i.prev&&(s.end=i.prev)),s},t.handleResponse=function(e,t){return t},n(0);var r,i=(r=n(1))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNUpdateMembershipsOperation},t.validateParams=function(e,t){var n=t.userId,r=t.spaces;return n?r?void 0:"Missing spaces":"Missing userId"},t.getURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/users/").concat(t.userId,"/spaces")},t.patchURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/users/").concat(t.userId,"/spaces")},t.usePatch=function(){return!0},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.getAuthToken=function(e,t){return e.tokenManager.getToken("user",t.userId)||e.tokenManager.getToken("user")},t.prepareParams=function(e,t){var n=t.include,r=t.limit,i=t.page,s={};if(r&&(s.limit=r),n){var o=[];n.totalCount&&(s.count=!0),n.customFields&&o.push("custom"),n.spaceFields&&o.push("space"),n.customSpaceFields&&o.push("space.custom");var a=o.join(",");0<a.length&&(s.include=a)}return i&&(i.next&&(s.start=i.next),i.prev&&(s.end=i.prev)),s},t.patchPayload=function(e,t){return function(e,t){var n=t.addMemberships,r=t.updateMemberships,i=t.removeMemberships,s=t.spaces,o={};return n&&0<n.length&&(o.add=[],n.forEach((function(e){var t={id:e.id};e.custom&&(t.custom=e.custom),o.add.push(t)}))),r&&0<r.length&&(o.update=[],r.forEach((function(e){var t={id:e.id};e.custom&&(t.custom=e.custom),o.update.push(t)}))),s&&0<s.length&&(o.update=o.update||[],s.forEach((function(e){var t={id:e.id};e.custom&&(t.custom=e.custom),o.update.push(t)}))),i&&0<i.length&&(o.remove=[],i.forEach((function(e){o.remove.push({id:e})}))),o}(0,t)},t.handleResponse=function(e,t){return t},n(0);var r,i=(r=n(1))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNUpdateMembershipsOperation},t.validateParams=function(e,t){var n=t.userId,r=t.spaces;return n?r?void 0:"Missing spaces":"Missing userId"},t.getURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/users/").concat(t.userId,"/spaces")},t.patchURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/users/").concat(t.userId,"/spaces")},t.usePatch=function(){return!0},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.getAuthToken=function(e,t){return e.tokenManager.getToken("user",t.userId)||e.tokenManager.getToken("user")},t.prepareParams=function(e,t){var n=t.include,r=t.limit,i=t.page,s={};if(r&&(s.limit=r),n){var o=[];n.totalCount&&(s.count=!0),n.customFields&&o.push("custom"),n.spaceFields&&o.push("space"),n.customSpaceFields&&o.push("space.custom");var a=o.join(",");0<a.length&&(s.include=a)}return i&&(i.next&&(s.start=i.next),i.prev&&(s.end=i.prev)),s},t.patchPayload=function(e,t){return function(e,t){var n=t.spaces,r={};return n&&0<n.length&&(r.add=[],n.forEach((function(e){var t={id:e.id};e.custom&&(t.custom=e.custom),r.add.push(t)}))),r}(0,t)},t.handleResponse=function(e,t){return t},n(0);var r,i=(r=n(1))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNUpdateMembershipsOperation},t.validateParams=function(e,t){var n=t.userId,r=t.spaces;return n?r?void 0:"Missing spaces":"Missing userId"},t.getURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/users/").concat(t.userId,"/spaces")},t.patchURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/users/").concat(t.userId,"/spaces")},t.usePatch=function(){return!0},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.getAuthToken=function(e,t){return e.tokenManager.getToken("user",t.userId)||e.tokenManager.getToken("user")},t.prepareParams=function(e,t){var n=t.include,r=t.limit,i=t.page,s={};if(r&&(s.limit=r),n){var o=[];n.totalCount&&(s.count=!0),n.customFields&&o.push("custom"),n.spaceFields&&o.push("space"),n.customSpaceFields&&o.push("space.custom");var a=o.join(",");0<a.length&&(s.include=a)}return i&&(i.next&&(s.start=i.next),i.prev&&(s.end=i.prev)),s},t.patchPayload=function(e,t){return function(e,t){var n=t.spaces,r={};return n&&0<n.length&&(r.remove=[],n.forEach((function(e){r.remove.push({id:e})}))),r}(0,t)},t.handleResponse=function(e,t){return t},n(0);var r,i=(r=n(1))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNAccessManagerAudit},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e){var t=e.config;return"/v2/auth/audit/sub-key/".concat(t.subscribeKey)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!1},t.prepareParams=function(e,t){var n=t.channel,r=t.channelGroup,i=t.authKeys,s=void 0===i?[]:i,o={};return n&&(o.channel=n),r&&(o["channel-group"]=r),0<s.length&&(o.auth=s.join(",")),o},t.handleResponse=function(e,t){return t.payload},n(0);var r,i=(r=n(1))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNAccessManagerGrant},t.validateParams=function(e){var t=e.config;return t.subscribeKey?t.publishKey?t.secretKey?void 0:"Missing Secret Key":"Missing Publish Key":"Missing Subscribe Key"},t.getURL=function(e){var t=e.config;return"/v2/auth/grant/sub-key/".concat(t.subscribeKey)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!1},t.prepareParams=function(e,t){var n=t.channels,r=void 0===n?[]:n,i=t.channelGroups,s=void 0===i?[]:i,o=t.ttl,a=t.read,u=void 0!==a&&a,c=t.write,l=void 0!==c&&c,d=t.manage,f=void 0!==d&&d,h=t.authKeys,p=void 0===h?[]:h,g={};return g.r=u?"1":"0",g.w=l?"1":"0",g.m=f?"1":"0",0<r.length&&(g.channel=r.join(",")),0<s.length&&(g["channel-group"]=s.join(",")),0<p.length&&(g.auth=p.join(",")),!o&&0!==o||(g.ttl=o),g},t.handleResponse=function(){return{}},n(0);var r,i=(r=n(1))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNAccessManagerGrantToken},t.extractPermissions=s,t.validateParams=function(e,t){var n=e.config;return n.subscribeKey?n.publishKey?n.secretKey?t.resources||t.patterns?(!t.resources||t.resources.users&&0!==Object.keys(t.resources.users).length||t.resources.spaces&&0!==Object.keys(t.resources.spaces).length)&&(!t.patterns||t.patterns.users&&0!==Object.keys(t.patterns.users).length||t.patterns.spaces&&0!==Object.keys(t.patterns.spaces).length)?void 0:"Missing values for either Resources or Patterns.":"Missing either Resources or Patterns.":"Missing Secret Key":"Missing Publish Key":"Missing Subscribe Key"},t.postURL=function(e){var t=e.config;return"/v3/pam/".concat(t.subscribeKey,"/grant")},t.usePost=function(){return!0},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!1},t.prepareParams=function(){return{}},t.postPayload=function(e,t){return function(e,t){var n=t.ttl,r=t.resources,i=t.patterns,o=t.meta,a={ttl:0,permissions:{resources:{channels:{},groups:{},users:{},spaces:{}},patterns:{channels:{},groups:{},users:{},spaces:{}},meta:{}}};if(r){var u=r.users,c=r.spaces;u&&Object.keys(u).forEach((function(e){a.permissions.resources.users[e]=s(u[e])})),c&&Object.keys(c).forEach((function(e){a.permissions.resources.spaces[e]=s(c[e])}))}if(i){var l=i.users,d=i.spaces;l&&Object.keys(l).forEach((function(e){a.permissions.patterns.users[e]=s(l[e])})),d&&Object.keys(d).forEach((function(e){a.permissions.patterns.spaces[e]=s(d[e])}))}return!n&&0!==n||(a.ttl=n),o&&(a.permissions.meta=o),a}(0,t)},t.handleResponse=function(e,t){return t.data.token},n(0);var r,i=(r=n(1))&&r.__esModule?r:{default:r};function s(e){var t=0;return e.create&&(t|=16),e.delete&&(t|=8),e.manage&&(t|=4),e.write&&(t|=2),e.read&&(t|=1),t}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNPublishOperation},t.validateParams=function(e,t){var n=e.config,r=t.message;return t.channel?r?n.subscribeKey?void 0:"Missing Subscribe Key":"Missing Message":"Missing Channel"},t.usePost=function(e,t){var n=t.sendByPost;return void 0!==n&&n},t.getURL=function(e,t){var n=e.config,r=t.channel,s=a(e,t.message);return"/publish/".concat(n.publishKey,"/").concat(n.subscribeKey,"/0/").concat(i.default.encodeString(r),"/0/").concat(i.default.encodeString(s))},t.postURL=function(e,t){var n=e.config,r=t.channel;return"/publish/".concat(n.publishKey,"/").concat(n.subscribeKey,"/0/").concat(i.default.encodeString(r),"/0")},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.postPayload=function(e,t){return a(e,t.message)},t.prepareParams=function(e,t){var n=t.meta,r=t.replicate,i=void 0===r||r,s=t.storeInHistory,a=t.ttl,u={};return null!=s&&(u.store=s?"1":"0"),a&&(u.ttl=a),!1===i&&(u.norep="true"),n&&"object"===o(n)&&(u.meta=JSON.stringify(n)),u},t.handleResponse=function(e,t){return{timetoken:t[2]}},n(0);var r=s(n(1)),i=s(n(2));function s(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){var n=e.crypto,r=e.config,i=JSON.stringify(t);return r.cipherKey&&(i=n.encrypt(i),i=JSON.stringify(i)),i}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNSignalOperation},t.validateParams=function(e,t){var n=e.config,r=t.message;return t.channel?r?n.subscribeKey?void 0:"Missing Subscribe Key":"Missing Message":"Missing Channel"},t.getURL=function(e,t){var n=e.config,r=t.channel,s=function(e,t){return JSON.stringify(t)}(0,t.message);return"/signal/".concat(n.publishKey,"/").concat(n.subscribeKey,"/0/").concat(i.default.encodeString(r),"/0/").concat(i.default.encodeString(s))},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(){return{}},t.handleResponse=function(e,t){return{timetoken:t[2]}},n(0);var r=s(n(1)),i=s(n(2));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNHistoryOperation},t.validateParams=function(e,t){var n=t.channel,r=e.config;return n?r.subscribeKey?void 0:"Missing Subscribe Key":"Missing channel"},t.getURL=function(e,t){var n=t.channel,r=e.config;return"/v2/history/sub-key/".concat(r.subscribeKey,"/channel/").concat(i.default.encodeString(n))},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.start,r=t.end,i=t.reverse,s=t.count,o=void 0===s?100:s,a=t.stringifiedTimeToken,u=void 0!==a&&a,c=t.includeMeta,l=void 0!==c&&c,d={include_token:"true"};return d.count=o,n&&(d.start=n),r&&(d.end=r),u&&(d.string_message_token="true"),null!=i&&(d.reverse=i.toString()),l&&(d.include_meta="true"),d},t.handleResponse=function(e,t){var n={messages:[],startTimeToken:t[1],endTimeToken:t[2]};return Array.isArray(t[0])&&t[0].forEach((function(t){var r={timetoken:t.timetoken,entry:function(e,t){var n=e.config,r=e.crypto;if(!n.cipherKey)return t;try{return r.decrypt(t)}catch(e){return t}}(e,t.message)};t.meta&&(r.meta=t.meta),n.messages.push(r)})),n},n(0);var r=s(n(1)),i=s(n(2));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNDeleteMessagesOperation},t.validateParams=function(e,t){var n=t.channel,r=e.config;return n?r.subscribeKey?void 0:"Missing Subscribe Key":"Missing channel"},t.useDelete=function(){return!0},t.getURL=function(e,t){var n=t.channel,r=e.config;return"/v3/history/sub-key/".concat(r.subscribeKey,"/channel/").concat(i.default.encodeString(n))},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.start,r=t.end,i={};return n&&(i.start=n),r&&(i.end=r),i},t.handleResponse=function(e,t){return t.payload},n(0);var r=s(n(1)),i=s(n(2));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNMessageCounts},t.validateParams=function(e,t){var n=t.channels,r=t.timetoken,i=t.channelTimetokens,s=e.config;return n?r&&i?"timetoken and channelTimetokens are incompatible together":r&&i&&1<i.length&&n.length!==i.length?"Length of channelTimetokens and channels do not match":s.subscribeKey?void 0:"Missing Subscribe Key":"Missing channel"},t.getURL=function(e,t){var n=t.channels,r=e.config,s=n.join(",");return"/v3/history/sub-key/".concat(r.subscribeKey,"/message-counts/").concat(i.default.encodeString(s))},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.timetoken,r=t.channelTimetokens,i={};if(r&&1===r.length){var s=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done)&&(n.push(o.value),1!==n.length);r=!0);}catch(e){i=!0,s=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw s}}return n}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(r)[0];i.timetoken=s}else r?i.channelsTimetoken=r.join(","):n&&(i.timetoken=n);return i},t.handleResponse=function(e,t){return{channels:t.channels}};var r=s(n(1)),i=s(n(2));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNFetchMessagesOperation},t.validateParams=function(e,t){var n=t.channels,r=t.includeMessageActions,i=void 0!==r&&r,s=e.config;if(!n||0===n.length)return"Missing channels";if(!s.subscribeKey)return"Missing Subscribe Key";if(i&&1<n.length)throw new TypeError("History can return actions data for a single channel only. Either pass a single channel or disable the includeMessageActions flag.")},t.getURL=function(e,t){var n=t.channels,r=void 0===n?[]:n,s=t.includeMessageActions,o=void 0!==s&&s,a=e.config,u=o?"history-with-actions":"history",c=0<r.length?r.join(","):",";return"/v3/".concat(u,"/sub-key/").concat(a.subscribeKey,"/channel/").concat(i.default.encodeString(c))},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.start,r=t.end,i=t.count,s=t.stringifiedTimeToken,o=void 0!==s&&s,a=t.includeMeta,u=void 0!==a&&a,c={};return i&&(c.max=i),n&&(c.start=n),r&&(c.end=r),o&&(c.string_message_token="true"),u&&(c.include_meta="true"),c},t.handleResponse=function(e,t){var n={channels:{}};return Object.keys(t.channels||{}).forEach((function(r){n.channels[r]=[],(t.channels[r]||[]).forEach((function(t){var i={};i.channel=r,i.timetoken=t.timetoken,i.message=function(e,t){var n=e.config,r=e.crypto;if(!n.cipherKey)return t;try{return r.decrypt(t)}catch(e){return t}}(e,t.message),t.actions&&(i.actions=t.actions,i.data=t.actions),t.meta&&(i.meta=t.meta),n.channels[r].push(i)}))})),n},n(0);var r=s(n(1)),i=s(n(2));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNSubscribeOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=e.config,r=t.channels,s=void 0===r?[]:r,o=0<s.length?s.join(","):",";return"/v2/subscribe/".concat(n.subscribeKey,"/").concat(i.default.encodeString(o),"/0")},t.getRequestTimeout=function(e){return e.config.getSubscribeTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=e.config,r=t.state,i=t.channelGroups,s=void 0===i?[]:i,o=t.timetoken,a=t.filterExpression,u=t.region,c={heartbeat:n.getPresenceTimeout()};return 0<s.length&&(c["channel-group"]=s.join(",")),a&&0<a.length&&(c["filter-expr"]=a),Object.keys(r).length&&(c.state=JSON.stringify(r)),o&&(c.tt=o),u&&(c.tr=u),c},t.handleResponse=function(e,t){var n=[];t.m.forEach((function(e){var t={publishTimetoken:e.p.t,region:e.p.r},r={shard:parseInt(e.a,10),subscriptionMatch:e.b,channel:e.c,messageType:e.e,payload:e.d,flags:e.f,issuingClientId:e.i,subscribeKey:e.k,originationTimetoken:e.o,userMetadata:e.u,publishMetaData:t};n.push(r)}));var r={timetoken:t.t.t,region:t.t.r};return{messages:n,metadata:r}},n(0);var r=s(n(1)),i=s(n(2));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i(n(3));var r=i(n(4));function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(0);var a,u,c=(a=l,(u=[{key:"init",value:function(e){this._config=e,this._maxSubDomain=20,this._currentSubDomain=Math.floor(Math.random()*this._maxSubDomain),this._providedFQDN=(this._config.secure?"https://":"http://")+this._config.origin,this._coreParams={},this.shiftStandardOrigin()}},{key:"nextOrigin",value:function(){return this._providedFQDN.match(/ps\.pndsn\.com$/i)?(this._currentSubDomain=this._currentSubDomain+1,this._currentSubDomain>=this._maxSubDomain&&(this._currentSubDomain=1),e=this._currentSubDomain.toString(),this._providedFQDN.replace("ps.pndsn.com","ps".concat(e,".pndsn.com"))):this._providedFQDN;var e}},{key:"hasModule",value:function(e){return e in this._modules}},{key:"shiftStandardOrigin",value:function(){return this._standardOrigin=this.nextOrigin(),this._standardOrigin}},{key:"getStandardOrigin",value:function(){return this._standardOrigin}},{key:"POST",value:function(e,t,n,r){return this._modules.post(e,t,n,r)}},{key:"PATCH",value:function(e,t,n,r){return this._modules.patch(e,t,n,r)}},{key:"GET",value:function(e,t,n){return this._modules.get(e,t,n)}},{key:"DELETE",value:function(e,t,n){return this._modules.del(e,t,n)}},{key:"_detectErrorCategory",value:function(e){if("ENOTFOUND"===e.code)return r.default.PNNetworkIssuesCategory;if("ECONNREFUSED"===e.code)return r.default.PNNetworkIssuesCategory;if("ECONNRESET"===e.code)return r.default.PNNetworkIssuesCategory;if("EAI_AGAIN"===e.code)return r.default.PNNetworkIssuesCategory;if(0===e.status||e.hasOwnProperty("status")&&void 0===e.status)return r.default.PNNetworkIssuesCategory;if(e.timeout)return r.default.PNTimeoutCategory;if("ETIMEDOUT"===e.code)return r.default.PNNetworkIssuesCategory;if(e.response){if(e.response.badRequest)return r.default.PNBadRequestCategory;if(e.response.forbidden)return r.default.PNAccessDeniedCategory}return r.default.PNUnknownCategory}}])&&s(a.prototype,u),l);function l(e){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),o(this,"_modules",void 0),o(this,"_config",void 0),o(this,"_maxSubDomain",void 0),o(this,"_currentSubDomain",void 0),o(this,"_standardOrigin",void 0),o(this,"_subscribeOrigin",void 0),o(this,"_providedFQDN",void 0),o(this,"_requestTimeout",void 0),o(this,"_coreParams",void 0),this._modules={},Object.keys(e).forEach((function(n){t._modules[n]=e[n].bind(t)}))}t.default=c,e.exports=t.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={get:function(e){try{return localStorage.getItem(e)}catch(e){return null}},set:function(e,t){try{return localStorage.setItem(e,t)}catch(e){return null}}};t.default=r,e.exports=t.default},function(e,t,n){(function(r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,s=(i=n(74))&&i.__esModule?i:{default:i};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u,c,l=(u=d,(c=[{key:"decodeToken",value:function(e){var t="";e.length%4==3?t="=":e.length%4==2&&(t="==");var n=e.replace("-","+").replace("_","/")+t,i=s.default.decode(new r.from(n,"base64"));if("object"===o(i))return i}}])&&a(u.prototype,c),d);function d(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d)}t.default=l,e.exports=t.default}).call(this,n(9).Buffer)},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){t.byteLength=function(e){var t=c(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=c(e),o=r[0],a=r[1],u=new s(function(e,t,n){return 3*(t+n)/4-n}(0,o,a)),l=0,d=0<a?o-4:o;for(n=0;n<d;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;return 2===a&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,u[l++]=255&t),1===a&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t),u},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,s=[],o=0,a=n-i;o<a;o+=16383)s.push(l(e,o,a<o+16383?a:o+16383));return 1==i?(t=e[n-1],s.push(r[t>>2]+r[t<<4&63]+"==")):2==i&&(t=(e[n-2]<<8)+e[n-1],s.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),s.join("")};for(var r=[],i=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=o.length;a<u;++a)r[a]=o[a],i[o.charCodeAt(a)]=a;function c(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var i,s,o=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(r[(s=i)>>18&63]+r[s>>12&63]+r[s>>6&63]+r[63&s]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var s,o,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,d=n?i-1:0,f=n?-1:1,h=e[t+d];for(d+=f,s=h&(1<<-l)-1,h>>=-l,l+=a;0<l;s=256*s+e[t+d],d+=f,l-=8);for(o=s&(1<<-l)-1,s>>=-l,l+=r;0<l;o=256*o+e[t+d],d+=f,l-=8);if(0===s)s=1-c;else{if(s===u)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,r),s-=c}return(h?-1:1)*o*Math.pow(2,s-r)},t.write=function(e,t,n,r,i,s){var o,a,u,c=8*s-i-1,l=(1<<c)-1,d=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:s-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),2<=(t+=1<=o+d?f/u:f*Math.pow(2,1-d))*u&&(o++,u/=2),l<=o+d?(a=0,o=l):1<=o+d?(a=(t*u-1)*Math.pow(2,i),o+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,i),o=0));8<=i;e[n+h]=255&a,h+=p,a/=256,i-=8);for(o=o<<i|a,c+=i;0<c;e[n+h]=255&o,h+=p,o/=256,c-=8);e[n+h-p]|=128*g}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){(function(n){var r,i;void 0===(i="function"==typeof(r=function(){var e=function(){function e(e){this.$hex=e}e.prototype={length:function(){return this.$hex.length/2},toString:function(e){if(!e||"hex"===e||16===e)return this.$hex;if("utf-8"===e){for(var t="",n=0;n<this.$hex.length;n+=2)t+="%"+this.$hex.substring(n,n+2);return decodeURIComponent(t)}if("latin"!==e)throw new Error("Unrecognised format: "+e);for(t=[],n=0;n<this.$hex.length;n+=2)t.push(parseInt(this.$hex.substring(n,n+2),16));return String.fromCharCode.apply(String,t)}},e.fromLatinString=function(t){for(var n="",r=0;r<t.length;r++){var i=t.charCodeAt(r).toString(16);1===i.length&&(i="0"+i),n+=i}return new e(n)},e.fromUtf8String=function(t){for(var n=encodeURIComponent(t),r="",i=0;i<n.length;i++)if("%"===n.charAt(i))r+=n.substring(i+1,i+3),i+=2;else{var s=n.charCodeAt(i).toString(16);s.length<2&&(s="0"+s),r+=s}return new e(r)};var t=[],r={},i=function(e){return function(){throw new Error(e+" not implemented")}};function s(){}function o(){}function a(e,t){var n=e.value;return n<24?n:24==n?t.readByte():25==n?t.readUint16():26==n?t.readUint32():27==n?t.readUint64():31==n?null:void i("Additional info: "+n)()}function u(e,t,n){var r=e<<5;t<24?n.writeByte(r|t):t<256?(n.writeByte(24|r),n.writeByte(t)):t<65536?(n.writeByte(25|r),n.writeUint16(t)):t<4294967296?(n.writeByte(26|r),n.writeUint32(t)):(n.writeByte(27|r),n.writeUint64(t))}s.prototype={peekByte:i("peekByte"),readByte:i("readByte"),readChunk:i("readChunk"),readFloat16:function(){var e=this.readUint16(),t=(32767&e)>>10,n=1023&e,r=32768&e;if(31==t)return 0==n?r?-1/0:1/0:NaN;var i=t?Math.pow(2,t-25)*(1024+n):Math.pow(2,-24)*n;return r?-i:i},readFloat32:function(){var e=this.readUint32(),t=(2147483647&e)>>23,n=8388607&e,r=2147483648&e;if(255==t)return 0==n?r?-1/0:1/0:NaN;var i=t?Math.pow(2,t-23-127)*(8388608+n):Math.pow(2,-149)*n;return r?-i:i},readFloat64:function(){var e=this.readUint32(),t=e>>20&2047,n=4294967296*(1048575&e)+this.readUint32(),r=2147483648&e;if(2047==t)return 0===n?r?-1/0:1/0:NaN;var i=t?Math.pow(2,t-52-1023)*(4503599627370496+n):Math.pow(2,-1074)*n;return r?-i:i},readUint16:function(){return 256*this.readByte()+this.readByte()},readUint32:function(){return 65536*this.readUint16()+this.readUint16()},readUint64:function(){return 4294967296*this.readUint32()+this.readUint32()}},o.prototype={writeByte:i("writeByte"),result:i("result"),writeFloat16:i("writeFloat16"),writeFloat32:i("writeFloat32"),writeFloat64:i("writeFloat64"),writeUint16:function(e){this.writeByte(e>>8&255),this.writeByte(255&e)},writeUint32:function(e){this.writeUint16(e>>16&65535),this.writeUint16(65535&e)},writeUint64:function(e){if(9007199254740992<=e||e<=-9007199254740992)throw new Error("Cannot encode Uint64 of: "+e+" magnitude to big (floating point errors)");this.writeUint32(Math.floor(e/4294967296)),this.writeUint32(e%4294967296)},writeString:i("writeString"),canWriteBinary:function(e){return!1},writeBinary:i("writeChunk")};var c=new Error;function l(e){var t=function(e){var t=e.readByte();return{type:t>>5,value:31&t}}(e);switch(t.type){case 0:return a(t,e);case 1:return-1-a(t,e);case 2:return e.readChunk(a(t,e));case 3:return e.readChunk(a(t,e)).toString("utf-8");case 4:case 5:var n=a(t,e),i=[];if(null!==n){5===t.type&&(n*=2);for(var s=0;s<n;s++)i[s]=l(e)}else for(var o;(o=l(e))!==c;)i.push(o);if(5!==t.type)return i;var u={};for(s=0;s<i.length;s+=2)u[i[s]]=i[s+1];return u;case 6:var d=a(t,e),f=r[d];return i=l(e),f?f(i):i;case 7:if(25===t.value)return e.readFloat16();if(26===t.value)return e.readFloat32();if(27===t.value)return e.readFloat64();switch(a(t,e)){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;case null:return c;default:throw new Error("Unknown fixed value: "+t.value)}default:throw new Error("Unsupported header: "+JSON.stringify(t))}throw new Error("not implemented yet")}function d(e,n){for(var r=0;r<t.length;r++){var i=t[r].fn(e);if(void 0!==i)return u(6,t[r].tag,n),d(i,n)}if(e&&"function"==typeof e.toCBOR&&(e=e.toCBOR()),!1===e)u(7,20,n);else if(!0===e)u(7,21,n);else if(null===e)u(7,22,n);else if(void 0===e)u(7,23,n);else if("number"==typeof e)Math.floor(e)===e&&e<9007199254740992&&-9007199254740992<e?e<0?u(1,-1-e,n):u(0,e,n):(function(e,t,n){n.writeByte(251)}(0,0,n),n.writeFloat64(e));else if("string"==typeof e)n.writeString(e,(function(e){u(3,e,n)}));else if(n.canWriteBinary(e))n.writeBinary(e,(function(e){u(2,e,n)}));else{if("object"!=typeof e)throw new Error("CBOR encoding not supported: "+e);if(p.config.useToJSON&&"function"==typeof e.toJSON&&(e=e.toJSON()),Array.isArray(e))for(u(4,e.length,n),r=0;r<e.length;r++)d(e[r],n);else{var s=Object.keys(e);for(u(5,s.length,n),r=0;r<s.length;r++)d(s[r],n),d(e[s[r]],n)}}}var f=[],h=[],p={config:{useToJSON:!0},addWriter:function(e,t){"string"==typeof e?h.push((function(n){if(e===n)return t(n)})):h.push(e)},addReader:function(e,t){"string"==typeof e?f.push((function(n,r){if(e===r)return t(n,r)})):f.push(e)},encode:function(e,t){for(var n=0;n<h.length;n++){var r=(0,h[n])(t);if(r)return d(e,r),r.result()}throw new Error("Unsupported output format: "+t)},decode:function(e,t){for(var n=0;n<f.length;n++){var r=(0,f[n])(e,t);if(r)return l(r)}throw new Error("Unsupported input format: "+t)},addSemanticEncode:function(e,n){if("number"!=typeof e||e%1!=0||e<0)throw new Error("Tag must be a positive integer");return t.push({tag:e,fn:n}),this},addSemanticDecode:function(e,t){if("number"!=typeof e||e%1!=0||e<0)throw new Error("Tag must be a positive integer");return r[e]=t,this},Reader:s,Writer:o};function g(e){this.buffer=e,this.pos=0}function m(e){this.byteLength=0,this.defaultBufferLength=16384,this.latestBuffer=n.alloc(this.defaultBufferLength),this.latestBufferOffset=0,this.completeBuffers=[],this.stringFormat=e}function y(e){this.hex=e,this.pos=0}function v(e){this.$hex="",this.finalFormat=e||"hex"}return(g.prototype=Object.create(s.prototype)).peekByte=function(){return this.buffer[this.pos]},g.prototype.readByte=function(){return this.buffer[this.pos++]},g.prototype.readUint16=function(){var e=this.buffer.readUInt16BE(this.pos);return this.pos+=2,e},g.prototype.readUint32=function(){var e=this.buffer.readUInt32BE(this.pos);return this.pos+=4,e},g.prototype.readFloat32=function(){var e=this.buffer.readFloatBE(this.pos);return this.pos+=4,e},g.prototype.readFloat64=function(){var e=this.buffer.readDoubleBE(this.pos);return this.pos+=8,e},g.prototype.readChunk=function(e){var t=n.alloc(e);return this.buffer.copy(t,0,this.pos,this.pos+=e),t},(m.prototype=Object.create(o.prototype)).writeByte=function(e){this.latestBuffer[this.latestBufferOffset++]=e,this.latestBufferOffset>=this.latestBuffer.length&&(this.completeBuffers.push(this.latestBuffer),this.latestBuffer=n.alloc(this.defaultBufferLength),this.latestBufferOffset=0),this.byteLength++},m.prototype.writeFloat32=function(e){var t=n.alloc(4);t.writeFloatBE(e,0),this.writeBuffer(t)},m.prototype.writeFloat64=function(e){var t=n.alloc(8);t.writeDoubleBE(e,0),this.writeBuffer(t)},m.prototype.writeString=function(e,t){var r=n.from(e,"utf-8");t(r.length),this.writeBuffer(r)},m.prototype.canWriteBinary=function(e){return e instanceof n},m.prototype.writeBinary=function(e,t){t(e.length),this.writeBuffer(e)},m.prototype.writeBuffer=function(e){if(!(e instanceof n))throw new TypeError("BufferWriter only accepts Buffers");this.latestBufferOffset?this.latestBuffer.length-this.latestBufferOffset>=e.length?(e.copy(this.latestBuffer,this.latestBufferOffset),this.latestBufferOffset+=e.length,this.latestBufferOffset>=this.latestBuffer.length&&(this.completeBuffers.push(this.latestBuffer),this.latestBuffer=n.alloc(this.defaultBufferLength),this.latestBufferOffset=0)):(this.completeBuffers.push(this.latestBuffer.slice(0,this.latestBufferOffset)),this.completeBuffers.push(e),this.latestBuffer=n.alloc(this.defaultBufferLength),this.latestBufferOffset=0):this.completeBuffers.push(e),this.byteLength+=e.length},m.prototype.result=function(){for(var e=n.alloc(this.byteLength),t=0,r=0;r<this.completeBuffers.length;r++){var i=this.completeBuffers[r];i.copy(e,t,0,i.length),t+=i.length}return this.latestBufferOffset&&this.latestBuffer.copy(e,t,0,this.latestBufferOffset),this.stringFormat?e.toString(this.stringFormat):e},"function"==typeof n&&(p.addReader((function(e,t){return e instanceof n?new g(e):"hex"===t||"base64"===t?new g(n.from(e,t)):void 0})),p.addWriter((function(e){return e&&"buffer"!==e?"hex"===e||"base64"===e?new m(e):void 0:new m}))),(y.prototype=Object.create(s.prototype)).peekByte=function(){var e=this.hex.substring(this.pos,2);return parseInt(e,16)},y.prototype.readByte=function(){var e=this.hex.substring(this.pos,this.pos+2);return this.pos+=2,parseInt(e,16)},y.prototype.readChunk=function(t){var r=this.hex.substring(this.pos,this.pos+2*t);return this.pos+=2*t,"function"==typeof n?n.from(r,"hex"):new e(r)},(v.prototype=Object.create(o.prototype)).writeByte=function(e){if(e<0||255<e)throw new Error("Byte value out of range: "+e);var t=e.toString(16);1==t.length&&(t="0"+t),this.$hex+=t},v.prototype.canWriteBinary=function(t){return t instanceof e||"function"==typeof n&&t instanceof n},v.prototype.writeBinary=function(t,r){if(t instanceof e)r(t.length()),this.$hex+=t.$hex;else{if(!("function"==typeof n&&t instanceof n))throw new TypeError("HexWriter only accepts BinaryHex or Buffers");r(t.length),this.$hex+=t.toString("hex")}},v.prototype.result=function(){return"buffer"===this.finalFormat&&"function"==typeof n?n.from(this.$hex,"hex"):new e(this.$hex).toString(this.finalFormat)},v.prototype.writeString=function(t,n){var r=e.fromUtf8String(t);n(r.length()),this.$hex+=r.$hex},p.addReader((function(t,n){return t instanceof e||t.$hex?new y(t.$hex):"hex"===n?new y(t):void 0})),p.addWriter((function(e){if("hex"===e)return new v})),p}();return e.addSemanticEncode(0,(function(e){if(e instanceof Date)return e.toISOString()})).addSemanticDecode(0,(function(e){return new Date(e)})).addSemanticDecode(1,(function(e){return new Date(e)})),e})?r.apply(t,[]):r)||(e.exports=i)}).call(this,n(9).Buffer)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.get=function(e,t,n){var r=i.default.get(this.getStandardOrigin()+t.url).set(t.headers).query(e);return o.call(this,r,t,n)},t.post=function(e,t,n,r){var s=i.default.post(this.getStandardOrigin()+n.url).query(e).set(n.headers).send(t);return o.call(this,s,n,r)},t.patch=function(e,t,n,r){var s=i.default.patch(this.getStandardOrigin()+n.url).query(e).set(n.headers).send(t);return o.call(this,s,n,r)},t.del=function(e,t,n){var r=i.default.delete(this.getStandardOrigin()+t.url).set(t.headers).query(e);return o.call(this,r,t,n)};var r,i=(r=n(76))&&r.__esModule?r:{default:r};function s(e){var t=(new Date).getTime(),n=(new Date).toISOString(),r=console&&console.log?console:window&&window.console&&window.console.log?window.console:console;r.log("<<<<<"),r.log("[".concat(n,"]"),"\n",e.url,"\n",e.qs),r.log("-----"),e.on("response",(function(n){var i=(new Date).getTime()-t,s=(new Date).toISOString();r.log(">>>>>>"),r.log("[".concat(s," / ").concat(i,"]"),"\n",e.url,"\n",e.qs,"\n",n.text),r.log("-----")}))}function o(e,t,n){var r=this;return this._config.logVerbosity&&(e=e.use(s)),this._config.proxy&&this._modules.proxy&&(e=this._modules.proxy.call(this,e)),this._config.keepAlive&&this._modules.keepAlive&&(e=this._modules.keepAlive(e)),e.timeout(t.timeout).end((function(e,i){var s,o={};if(o.error=null!==e,o.operation=t.operation,i&&i.status&&(o.statusCode=i.status),e){if(e.response&&e.response.text&&!r._config.logVerbosity)try{o.errorData=JSON.parse(e.response.text)}catch(s){o.errorData=e}else o.errorData=e;return o.category=r._detectErrorCategory(e),n(o,null)}try{s=JSON.parse(i.text)}catch(s){return o.errorData=i,o.error=!0,n(o,null)}return s.error&&1===s.error&&s.status&&s.message&&s.service?(o.errorData=s,o.statusCode=s.status,o.error=!0,o.category=r._detectErrorCategory(o),n(o,null)):(s.error&&s.error.message&&(o.errorData=s.error),n(o,s))}))}n(0)},function(e,t,n){var r;r="undefined"!=typeof window?window:"undefined"!=typeof self?self:(console.warn("Using browser-only version of superagent in non-browser environment"),this);var i=n(77),s=n(78),o=n(10),a=n(79),u=n(81);function c(){}var l=t=e.exports=function(e,n){return"function"==typeof n?new t.Request("GET",e).end(n):1==arguments.length?new t.Request("GET",e):new t.Request(e,n)};t.Request=y,l.getXHR=function(){if(!(!r.XMLHttpRequest||r.location&&"file:"==r.location.protocol&&r.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw Error("Browser-only version of superagent could not find XHR")};var d="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};function f(e){if(!o(e))return e;var t=[];for(var n in e)h(t,n,e[n]);return t.join("&")}function h(e,t,n){if(null!=n)if(Array.isArray(n))n.forEach((function(n){h(e,t,n)}));else if(o(n))for(var r in n)h(e,t+"["+r+"]",n[r]);else e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));else null===n&&e.push(encodeURIComponent(t))}function p(e){for(var t,n,r={},i=e.split("&"),s=0,o=i.length;s<o;++s)-1==(n=(t=i[s]).indexOf("="))?r[decodeURIComponent(t)]="":r[decodeURIComponent(t.slice(0,n))]=decodeURIComponent(t.slice(n+1));return r}function g(e){return/[\/+]json($|[^-\w])/.test(e)}function m(e){this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var t=this.xhr.status;1223===t&&(t=204),this._setStatusProperties(t),this.header=this.headers=function(e){for(var t,n,r,i,s=e.split(/\r?\n/),o={},a=0,u=s.length;a<u;++a)-1!==(t=(n=s[a]).indexOf(":"))&&(r=n.slice(0,t).toLowerCase(),i=d(n.slice(t+1)),o[r]=i);return o}(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&e._responseType?this.body=this.xhr.response:this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function y(e,t){var n=this;this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",(function(){var e,t=null,r=null;try{r=new m(n)}catch(r){return(t=new Error("Parser is unable to parse the response")).parse=!0,t.original=r,n.xhr?(t.rawResponse=void 0===n.xhr.responseType?n.xhr.responseText:n.xhr.response,t.status=n.xhr.status?n.xhr.status:null,t.statusCode=t.status):(t.rawResponse=null,t.status=null),n.callback(t)}n.emit("response",r);try{n._isResponseOK(r)||(e=new Error(r.statusText||"Unsuccessful HTTP response"))}catch(r){e=r}e?(e.original=t,e.response=r,e.status=r.status,n.callback(e,r)):n.callback(null,r)}))}function v(e,t,n){var r=l("DELETE",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r}l.serializeObject=f,l.parseString=p,l.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},l.serialize={"application/x-www-form-urlencoded":f,"application/json":JSON.stringify},l.parse={"application/x-www-form-urlencoded":p,"application/json":JSON.parse},a(m.prototype),m.prototype._parseBody=function(e){var t=l.parse[this.type];return this.req._parser?this.req._parser(this,e):(!t&&g(this.type)&&(t=l.parse["application/json"]),t&&e&&(e.length||e instanceof Object)?t(e):null)},m.prototype.toError=function(){var e=this.req,t=e.method,n=e.url,r="cannot "+t+" "+n+" ("+this.status+")",i=new Error(r);return i.status=this.status,i.method=t,i.url=n,i},l.Response=m,i(y.prototype),s(y.prototype),y.prototype.type=function(e){return this.set("Content-Type",l.types[e]||e),this},y.prototype.accept=function(e){return this.set("Accept",l.types[e]||e),this},y.prototype.auth=function(e,t,n){return 1===arguments.length&&(t=""),"object"==typeof t&&null!==t&&(n=t,t=""),n=n||{type:"function"==typeof btoa?"basic":"auto"},this._auth(e,t,n,(function(e){if("function"==typeof btoa)return btoa(e);throw new Error("Cannot use basic auth, btoa is not a function")}))},y.prototype.query=function(e){return"string"!=typeof e&&(e=f(e)),e&&this._query.push(e),this},y.prototype.attach=function(e,t,n){if(t){if(this._data)throw Error("superagent can't mix .send() and .attach()");this._getFormData().append(e,t,n||t.name)}return this},y.prototype._getFormData=function(){return this._formData||(this._formData=new r.FormData),this._formData},y.prototype.callback=function(e,t){if(this._shouldRetry(e,t))return this._retry();var n=this._callback;this.clearTimeout(),e&&(this._maxRetries&&(e.retries=this._retries-1),this.emit("error",e)),n(e,t)},y.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},y.prototype.buffer=y.prototype.ca=y.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},y.prototype.pipe=y.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")},y.prototype._isHost=function(e){return e&&"object"==typeof e&&!Array.isArray(e)&&"[object Object]"!==Object.prototype.toString.call(e)},y.prototype.end=function(e){return this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=e||c,this._finalizeQueryString(),this._end()},y.prototype._end=function(){var e=this,t=this.xhr=l.getXHR(),n=this._formData||this._data;function r(t,n){0<n.total&&(n.percent=n.loaded/n.total*100),n.direction=t,e.emit("progress",n)}if(this._setTimeouts(),t.onreadystatechange=function(){var n=t.readyState;if(2<=n&&e._responseTimeoutTimer&&clearTimeout(e._responseTimeoutTimer),4==n){var r;try{r=t.status}catch(n){r=0}if(!r){if(e.timedout||e._aborted)return;return e.crossDomainError()}e.emit("end")}},this.hasListeners("progress"))try{t.onprogress=r.bind(null,"download"),t.upload&&(t.upload.onprogress=r.bind(null,"upload"))}catch(n){}try{this.username&&this.password?t.open(this.method,this.url,!0,this.username,this.password):t.open(this.method,this.url,!0)}catch(n){return this.callback(n)}if(this._withCredentials&&(t.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof n&&!this._isHost(n)){var i=this._header["content-type"],s=this._serializer||l.serialize[i?i.split(";")[0]:""];!s&&g(i)&&(s=l.serialize["application/json"]),s&&(n=s(n))}for(var o in this.header)null!=this.header[o]&&this.header.hasOwnProperty(o)&&t.setRequestHeader(o,this.header[o]);return this._responseType&&(t.responseType=this._responseType),this.emit("request",this),t.send(void 0!==n?n:null),this},l.agent=function(){return new u},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach((function(e){u.prototype[e.toLowerCase()]=function(t,n){var r=new l.Request(e,t);return this._setDefaults(r),n&&r.end(n),r}})),u.prototype.del=u.prototype.delete,l.get=function(e,t,n){var r=l("GET",e);return"function"==typeof t&&(n=t,t=null),t&&r.query(t),n&&r.end(n),r},l.head=function(e,t,n){var r=l("HEAD",e);return"function"==typeof t&&(n=t,t=null),t&&r.query(t),n&&r.end(n),r},l.options=function(e,t,n){var r=l("OPTIONS",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},l.del=v,l.delete=v,l.patch=function(e,t,n){var r=l("PATCH",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},l.post=function(e,t,n){var r=l("POST",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},l.put=function(e,t,n){var r=l("PUT",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r}},function(e,t,n){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}(e.exports=r).prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){var r=n(10);function i(e){if(e)return function(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}(e)}(e.exports=i).prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},i.prototype.parse=function(e){return this._parser=e,this},i.prototype.responseType=function(e){return this._responseType=e,this},i.prototype.serialize=function(e){return this._serializer=e,this},i.prototype.timeout=function(e){if(!e||"object"!=typeof e)return this._timeout=e,this._responseTimeout=0,this;for(var t in e)switch(t){case"deadline":this._timeout=e.deadline;break;case"response":this._responseTimeout=e.response;break;default:console.warn("Unknown timeout option",t)}return this},i.prototype.retry=function(e,t){return 0!==arguments.length&&!0!==e||(e=1),e<=0&&(e=0),this._maxRetries=e,this._retries=0,this._retryCallback=t,this};var s=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];i.prototype._shouldRetry=function(e,t){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var n=this._retryCallback(e,t);if(!0===n)return!0;if(!1===n)return!1}catch(e){console.error(e)}if(t&&t.status&&500<=t.status&&501!=t.status)return!0;if(e){if(e.code&&~s.indexOf(e.code))return!0;if(e.timeout&&"ECONNABORTED"==e.code)return!0;if(e.crossDomain)return!0}return!1},i.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},i.prototype.then=function(e,t){if(!this._fullfilledPromise){var n=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise((function(e,t){n.end((function(n,r){n?t(n):e(r)}))}))}return this._fullfilledPromise.then(e,t)},i.prototype.catch=function(e){return this.then(void 0,e)},i.prototype.use=function(e){return e(this),this},i.prototype.ok=function(e){if("function"!=typeof e)throw Error("Callback required");return this._okCallback=e,this},i.prototype._isResponseOK=function(e){return!!e&&(this._okCallback?this._okCallback(e):200<=e.status&&e.status<300)},i.prototype.getHeader=i.prototype.get=function(e){return this._header[e.toLowerCase()]},i.prototype.set=function(e,t){if(r(e)){for(var n in e)this.set(n,e[n]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},i.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},i.prototype.field=function(e,t){if(null==e)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),r(e)){for(var n in e)this.field(n,e[n]);return this}if(Array.isArray(t)){for(var i in t)this.field(e,t[i]);return this}if(null==t)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof t&&(t=""+t),this._getFormData().append(e,t),this},i.prototype.abort=function(){return this._aborted||(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort")),this},i.prototype._auth=function(e,t,n,r){switch(n.type){case"basic":this.set("Authorization","Basic "+r(e+":"+t));break;case"auto":this.username=e,this.password=t;break;case"bearer":this.set("Authorization","Bearer "+e)}return this},i.prototype.withCredentials=function(e){return null==e&&(e=!0),this._withCredentials=e,this},i.prototype.redirects=function(e){return this._maxRedirects=e,this},i.prototype.maxResponseSize=function(e){if("number"!=typeof e)throw TypeError("Invalid argument");return this._maxResponseSize=e,this},i.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},i.prototype.send=function(e){var t=r(e),n=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),t&&!this._data)Array.isArray(e)?this._data=[]:this._isHost(e)||(this._data={});else if(e&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(t&&r(this._data))for(var i in e)this._data[i]=e[i];else"string"==typeof e?(n||this.type("form"),n=this._header["content-type"],this._data="application/x-www-form-urlencoded"==n?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return!t||this._isHost(e)||n||this.type("json"),this},i.prototype.sortQuery=function(e){return this._sort=void 0===e||e,this},i.prototype._finalizeQueryString=function(){var e=this._query.join("&");if(e&&(this.url+=(0<=this.url.indexOf("?")?"&":"?")+e),this._query.length=0,this._sort){var t=this.url.indexOf("?");if(0<=t){var n=this.url.substring(t+1).split("&");"function"==typeof this._sort?n.sort(this._sort):n.sort(),this.url=this.url.substring(0,t)+"?"+n.join("&")}}},i.prototype._appendQueryString=function(){console.trace("Unsupported")},i.prototype._timeoutError=function(e,t,n){if(!this._aborted){var r=new Error(e+t+"ms exceeded");r.timeout=t,r.code="ECONNABORTED",r.errno=n,this.timedout=!0,this.abort(),this.callback(r)}},i.prototype._setTimeouts=function(){var e=this;this._timeout&&!this._timer&&(this._timer=setTimeout((function(){e._timeoutError("Timeout of ",e._timeout,"ETIME")}),this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout((function(){e._timeoutError("Response timeout of ",e._responseTimeout,"ETIMEDOUT")}),this._responseTimeout))}},function(e,t,n){var r=n(80);function i(e){if(e)return function(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}(e)}(e.exports=i).prototype.get=function(e){return this.header[e.toLowerCase()]},i.prototype._setHeaderProperties=function(e){var t=e["content-type"]||"";this.type=r.type(t);var n=r.params(t);for(var i in n)this[i]=n[i];this.links={};try{e.link&&(this.links=r.parseLinks(e.link))}catch(e){}},i.prototype._setStatusProperties=function(e){var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.redirect=3==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.created=201==e,this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.forbidden=403==e,this.notFound=404==e,this.unprocessableEntity=422==e}},function(e,t,n){t.type=function(e){return e.split(/ *; */).shift()},t.params=function(e){return e.split(/ *; */).reduce((function(e,t){var n=t.split(/ *= */),r=n.shift(),i=n.shift();return r&&i&&(e[r]=i),e}),{})},t.parseLinks=function(e){return e.split(/ *, */).reduce((function(e,t){var n=t.split(/ *; */),r=n[0].slice(1,-1);return e[n[1].split(/ *= */)[1].slice(1,-1)]=r,e}),{})},t.cleanHeader=function(e,t){return delete e["content-type"],delete e["content-length"],delete e["transfer-encoding"],delete e.host,t&&(delete e.authorization,delete e.cookie),e}},function(e,t){function n(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach((function(e){n.prototype[e]=function(){return this._defaults.push({fn:e,arguments:arguments}),this}})),n.prototype._setDefaults=function(e){this._defaults.forEach((function(t){e[t.fn].apply(e,t.arguments)}))},e.exports=n}],e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(r,i,function(e){return t[e]}.bind(null,i));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e.p="",e(e.s=11);function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var t,n},"object"==typeof n&&"object"==typeof t?t.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof n?n.PubNub=i():r.PubNub=i()}}},{package:"pubnub",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/pubnub/dist/web/pubnub.min.js"}],[6911,{"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/extends":208,"@babel/runtime/helpers/interopRequireDefault":213,"@babel/runtime/helpers/objectWithoutProperties":222,"bignumber.js":2348,"ethereumjs-util":3195},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.conversionUtil=n.conversionMax=n.conversionLessThan=n.conversionLTE=n.conversionGreaterThan=n.conversionGTE=n.addCurrencies=void 0,n.decGWEIToHexWEI=function(e){return T(e,{fromNumericBase:"dec",toNumericBase:"hex",fromDenomination:"GWEI",toDenomination:"WEI"})},n.toNormalizedDenomination=n.toNegative=n.toBigNumber=n.subtractCurrencies=n.multiplyCurrencies=n.divideCurrencies=void 0;var i=r(e("@babel/runtime/helpers/extends")),s=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("@babel/runtime/helpers/objectWithoutProperties")),a=r(e("bignumber.js")),u=e("ethereumjs-util");const c=["aBase","bBase"],l=["aBase","bBase"],d=["multiplicandBase","multiplierBase"],f=["dividendBase","divisorBase"];function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const g=new a.default("1000000000000000000"),m=new a.default("1000000000"),y=new a.default("1"),v={hex:e=>new a.default((0,u.stripHexPrefix)(e),16),dec:e=>new a.default(String(e),10),BN:e=>new a.default(e.toString(16),16)};n.toBigNumber=v;const b={WEI:e=>e.div(g),GWEI:e=>e.div(m),ETH:e=>e.div(y)};n.toNormalizedDenomination=b;const _={WEI:e=>e.times(g).round(),GWEI:e=>e.times(m).round(9),ETH:e=>e.times(y).round(9)},w={hex:e=>e.toString(16),dec:e=>new a.default(e).toString(10),BN:e=>new u.BN(e.toString(16))},k=e=>Number.isInteger(e)&&e>1,S=({value:e,fromNumericBase:t,fromDenomination:n,fromCurrency:r,toNumericBase:i,toDenomination:s,toCurrency:o,numberOfDecimals:u,conversionRate:c,invertConversionRate:l,roundDown:d})=>{let f=t?v[t](e):e;if(n&&(f=b[n](f)),r!==o){if(null===c||c===undefined)throw new Error(`Converting from ${r} to ${o} requires a conversionRate, but one was not provided`);let e=v.dec(c);l&&(e=new a.default(1).div(c)),f=f.times(e)}return s&&(f=_[s](f)),u!==undefined&&null!==u&&(f=f.round(u,a.default.ROUND_HALF_DOWN)),d&&(f=f.round(d,a.default.ROUND_DOWN)),i&&(f=w[i](f)),f},T=(e,{fromCurrency:t=null,toCurrency:n=t,fromNumericBase:r,toNumericBase:i,fromDenomination:s,toDenomination:o,numberOfDecimals:a,conversionRate:u,invertConversionRate:c})=>t===n||u?S({fromCurrency:t,toCurrency:n,fromNumericBase:r,toNumericBase:i,fromDenomination:s,toDenomination:o,numberOfDecimals:a,conversionRate:u,invertConversionRate:c,value:e||"0"}):0;n.conversionUtil=T;const E=(e,t)=>{if(!k(t))throw new Error("Must specify valid base");return"string"==typeof e||e instanceof a.default?new a.default(e,t):new a.default(String(e),t)};n.addCurrencies=(e,t,n={})=>{const{aBase:r,bBase:i}=n,s=(0,o.default)(n,c);if(!k(r)||!k(i))throw new Error("Must specify valid aBase and bBase");const a=E(e,r).add(E(t,i));return S(p({value:a},s))};n.subtractCurrencies=(e,t,n={})=>{const{aBase:r,bBase:i}=n,s=(0,o.default)(n,l);if(!k(r)||!k(i))throw new Error("Must specify valid aBase and bBase");const a=E(e,r).minus(E(t,i));return S(p({value:a},s))};const P=(e,t,n={})=>{const{multiplicandBase:r,multiplierBase:i}=n,s=(0,o.default)(n,d);if(!k(r)||!k(i))throw new Error("Must specify valid multiplicandBase and multiplierBase");const a=E(e,r).times(E(t,i));return S(p({value:a},s))};n.multiplyCurrencies=P;n.divideCurrencies=(e,t,n={})=>{const{dividendBase:r,divisorBase:i}=n,s=(0,o.default)(n,f);if(!k(r)||!k(i))throw new Error("Must specify valid dividendBase and divisorBase");const a=E(e,r).div(E(t,i));return S(p({value:a},s))};const A=(e,t)=>{let n=(0,i.default)({},t),r=(0,i.default)({},e);const s=S(p({},r)),o=S(p({},n));return s.gt(o)};n.conversionGreaterThan=A;n.conversionLessThan=(e,t)=>{let n=(0,i.default)({},t),r=(0,i.default)({},e);const s=S(p({},r)),o=S(p({},n));return s.lt(o)};n.conversionMax=(e,t)=>{let n=(0,i.default)({},t),r=(0,i.default)({},e);return A(p({},r),p({},n))?r.value:n.value};n.conversionGTE=(e,t)=>{let n=(0,i.default)({},t),r=(0,i.default)({},e);const s=S(p({},r)),o=S(p({},n));return s.greaterThanOrEqualTo(o)};n.conversionLTE=(e,t)=>{let n=(0,i.default)({},t),r=(0,i.default)({},e);const s=S(p({},r)),o=S(p({},n));return s.lessThanOrEqualTo(o)};n.toNegative=(e,t={})=>P(e,-1,t)}}},{package:"<root>",file:"/Users/mac/code/a-mises/metamask-extension/shared/modules/conversion.utils.js"}],[7847,{"../../app/scripts/lib/buy-url":45,"../../app/scripts/lib/util":99,"../../shared/constants/app":6899,"../../shared/constants/hardware-wallets":6901,"../../shared/modules/hexstring-utils":6914,"../../shared/modules/string-utils":6918,"../ducks/alerts/unconnected-account":7423,"../ducks/metamask/metamask":7432,"../ducks/send":7433,"../helpers/utils/confirm-tx.util":7458,"../helpers/utils/conversions.util":7459,"../helpers/utils/i18n-helper":7465,"../helpers/utils/switch-direction":7474,"../helpers/utils/transactions.util":7476,"../helpers/utils/tx-helper":7477,"../pages/swaps/swaps.util":7829,"../selectors":7841,"./actionConstants":7846,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":213,"@sentry/browser":1862,buffer:2478,lodash:5866,loglevel:5876,pify:6121},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n._setBackgroundConnection=function(e){x=e,M=(0,s.default)(x)},n.acceptWatchAsset=function(e){return async t=>{t(te());try{await M.acceptWatchAsset(e),await ce(t)}catch(e){return o.default.error(e),void t(re(e.message))}finally{t(ne())}t(ee())}},n.addCollectible=function(e,t,n){return async r=>{if(!e)throw new Error("MetaMask - Cannot add collectible without address");if(!t)throw new Error("MetaMask - Cannot add collectible without tokenID");n||r(te());try{await M.addCollectible(e,t)}catch(e){o.default.error(e),r(re(e.message))}finally{await ce(r),r(ne())}}},n.addCollectibleVerifyOwnership=function(e,t,n){return async r=>{if(!e)throw new Error("MetaMask - Cannot add collectible without address");if(!t)throw new Error("MetaMask - Cannot add collectible without tokenID");n||r(te());try{await M.addCollectibleVerifyOwnership(e,t)}catch(e){if(e.message.includes("This collectible is not owned by the user")||e.message.includes("Unable to verify ownership."))throw e;o.default.error(e),r(re(e.message))}finally{await ce(r),r(ne())}}},n.addDetectedTokens=function(e){return async t=>{try{await M.addDetectedTokens(e)}catch(e){o.default.error(e)}finally{await ce(t)}}},n.addNewAccount=function(){return o.default.debug("background.addNewAccount"),async(e,t)=>{const n=t().metamask.identities;let r,i;e(te());try{const{identities:t}=await M.addNewAccount();r=t,i=Object.keys(r).find((e=>!n[e]))}catch(t){throw e(re(t.message)),t}finally{e(ne())}return await ce(e),i}},n.addPermittedAccount=function(e,t){return async n=>{await new Promise(((n,r)=>{x.addPermittedAccount(e,t,(e=>{e?r(e):n()}))})),await ce(n)}},n.addPollingTokenToAppState=async function(e){return M.addPollingTokenToAppState(e,h.POLLING_TOKEN_ENVIRONMENT_TYPES[(0,m.getEnvironmentType)()])},n.addToAddressBook=function(e,t="",n=""){return o.default.debug("background.addToAddressBook"),async(r,i)=>{const{chainId:s}=i().metamask.provider;let a;try{a=await M.setAddressBook((0,k.toChecksumHexAddress)(e),t,s,n)}catch(e){throw o.default.error(e),r(re("Address book failed to update")),e}a||r(re("Address book failed to update"))}},n.addToMisesBook=function(e){return o.default.debug("background.addToMisesBook"),async(t,n)=>{const{send:{amount:r}}=n(),i=e.indexOf("mises")>-1?e:await M.addressToMisesId(e);let s;try{await M.setMisesBook(i,r.value),s=!0}catch(e){throw o.default.error(e),t(re("Address book failed to update")),e}s||t(re("Address book failed to update"))}},n.addToken=J,n.addTokens=function(e){return t=>Array.isArray(e)?Promise.all(e.map((({address:e,symbol:n,decimals:r})=>t(J(e,n,r))))):Promise.all(Object.entries(e).map((([e,{address:n,symbol:r,decimals:i}])=>t(J(n,r,i)))))},n.addUnapprovedTransaction=function(e,t,n){return o.default.debug("background.addUnapprovedTransaction"),()=>new Promise(((r,i)=>{x.addUnapprovedTransaction(e,t,n,((e,t)=>{e?i(e):r(t)}))}))},n.approvePermissionsRequest=function(e){return t=>{x.approvePermissionsRequest(e,(e=>{e&&t(re(e.message))}))}},n.attemptLedgerTransportCreation=async function(){return await M.attemptLedgerTransportCreation()},n.buyEth=function(e){return async t=>{const n=await(0,c.default)(e);n&&(global.platform.openTab({url:n}),t({type:P.BUY_ETH}))}},n.cancelDecryptMsg=function(e){return async t=>{let n;t(te());try{n=await M.cancelDecryptMessage(e.id)}finally{t(ne())}return t(z(n)),t(F(e.id)),t(ee()),e}},n.cancelEncryptionPublicKeyMsg=function(e){return async t=>{let n;t(te());try{n=await M.cancelEncryptionPublicKey(e.id)}finally{t(ne())}return t(z(n)),t(F(e.id)),t(ee()),e}},n.cancelMsg=function(e){return async t=>{let n;t(te());try{n=await M.cancelMessage(e.id)}finally{t(ne())}return t(z(n)),t(F(e.id)),t(ee()),e}},n.cancelPersonalMsg=function(e){return async t=>{let n;t(te());try{n=await M.cancelPersonalMessage(e.id)}finally{t(ne())}return t(z(n)),t(F(e.id)),t(ee()),e}},n.cancelQRHardwareSignRequest=function(){return async e=>{e(ne()),await M.cancelQRHardwareSignRequest()}},n.cancelSmartTransaction=function(e){return async t=>{try{await M.cancelSmartTransaction(e)}catch(e){if(o.default.error(e),e.message.startsWith("Fetch error:")){const n=(0,T.parseSmartTransactionsError)(e.message);t({type:P.SET_SMART_TRANSACTIONS_ERROR,payload:n.type})}throw e}}},n.cancelSyncQRHardware=function(){return async e=>{e(ne()),await M.cancelSyncQRHardware()}},n.cancelTx=function(e,t=!0){return n=>(t&&n(te()),new Promise(((t,n)=>{x.cancelTransaction(e.id,(e=>{e?n(e):t()}))})).then((()=>U())).then((e=>n(z(e)))).then((()=>(n((0,b.resetSendState)()),n(F(e.id)),n(ne()),n(ee()),e))).catch((e=>{throw n(ne()),e})))},n.cancelTxs=function(e){return async t=>{t(te());try{const n=e.map((({id:e})=>e)),r=n.map((e=>new Promise(((t,n)=>{x.cancelTransaction(e,(e=>{e?n(e):t()}))}))));await Promise.all(r);const i=await U();t(z(i)),t((0,b.resetSendState)()),n.forEach((e=>{t(F(e))}))}finally{console.log("finallysuggestedAssets",(0,m.getEnvironmentType)()),[h.ENVIRONMENT_TYPE_NOTIFICATION,h.ENVIRONMENT_TYPE_POPUP].includes((0,m.getEnvironmentType)())?Te("cancelTxs"):t(ne())}}},n.cancelTypedMsg=function(e){return async t=>{let n;t(te());try{n=await M.cancelTypedMessage(e.id)}finally{t(ne())}return t(z(n)),t(F(e.id)),t(ee()),e}},n.captureSingleException=function(e){return async(t,n)=>{const{singleExceptions:r}=n().appState;e in r||(t({type:P.CAPTURE_SINGLE_EXCEPTION,value:e}),(0,a.captureException)(Error(e)))}},n.checkAndUpdateAllCollectiblesOwnershipStatus=async function(){await M.checkAndUpdateAllCollectiblesOwnershipStatus()},n.checkAndUpdateSingleCollectibleOwnershipStatus=async function(e){await M.checkAndUpdateSingleCollectibleOwnershipStatus(e,!1)},n.checkHardwareStatus=function(e,t){return o.default.debug("background.checkHardwareStatus",e,t),async n=>{let r;n(te());try{r=await M.checkHardwareStatus(e,t)}catch(e){throw o.default.error(e),n(re(e.message)),e}finally{n(ne())}return await ce(n),r}},n.clearAccountDetails=function(){return{type:P.CLEAR_ACCOUNT_DETAILS}},n.clearKeyrings=function(){return()=>{M.clearKeyrings()}},n.clearPendingTokens=function(){return{type:P.CLEAR_PENDING_TOKENS}},n.clearSwapsQuotes=function(){return async e=>{await M.clearSwapsQuotes(),await ce(e)}},n.closeCurrentNotificationWindow=ee,n.closeNotificationPopup=async function(){await M.markNotificationPopupAsAutomaticallyClosed(),global.platform.closeCurrentWindow()},n.closePopUp=Te,n.closeWelcomeScreen=function(){return{type:P.CLOSE_WELCOME_SCREEN}},n.completeOnboarding=ue,n.completedTx=F,n.connectHardware=function(e,t,n,r){return o.default.debug("background.connectHardware",e,t,n),async(i,s)=>{const{ledgerTransportType:a}=s().metamask;let c;i(te(`Looking for your ${(0,u.capitalize)(e)}...`));try{if(e===S.DEVICE_NAMES.LEDGER&&await M.establishLedgerTransportPreference(),e===S.DEVICE_NAMES.LEDGER&&a===S.LEDGER_TRANSPORT_TYPES.WEBHID){const e=await window.navigator.hid.requestDevice({filters:[{vendorId:S.LEDGER_USB_VENDOR_ID}]});if(!e.some((e=>e.vendorId===Number(S.LEDGER_USB_VENDOR_ID))))throw new Error(r("ledgerWebHIDNotConnectedErrorMessage"))}c=await M.connectHardware(e,t,n)}catch(t){throw o.default.error(t),e===S.DEVICE_NAMES.LEDGER&&a===S.LEDGER_TRANSPORT_TYPES.WEBHID&&t.message.match("Failed to open the device")?(i(re(r("ledgerDeviceOpenFailureMessage"))),new Error(r("ledgerDeviceOpenFailureMessage"))):(e!==S.DEVICE_NAMES.QR&&i(re(t.message)),t)}finally{i(ne())}return await ce(i),c}},n.createCancelTransaction=function(e,t,n){let r;return o.default.debug("background.cancelTransaction"),i=>new Promise(((s,o)=>{x.createCancelTransaction(e,t,n,((e,t)=>{if(e)return i(re(e.message)),void o(e);const{currentNetworkTxList:n}=t,{id:a}=n[n.length-1];r=a,s(t)}))})).then((e=>i(z(e)))).then((()=>r))},n.createEventFragment=function(e){return M.createEventFragment(e)},n.createNewVault=N,n.createNewVaultAndGetSeedPhrase=function(e){return async t=>{t(te());try{await N(e);return await D()}catch(e){throw t(re(e.message)),new Error(e.message)}finally{t(ne())}}},n.createNewVaultAndRestore=function(e,n){return r=>{r(te()),o.default.debug("background.createNewVaultAndRestore");const i=Array.from(t.from(n,"utf8").values());let s;return new Promise(((t,n)=>{x.createNewVaultAndRestore(e,i,((e,r)=>{e?n(e):(s=r,t())}))})).then((()=>r(G()))).then((()=>(r(Y()),r(ne()),s))).catch((e=>(r(re(e.message)),r(ne()),Promise.reject(e))))}},n.createRetryTransaction=function(e,t){let n;return r=>new Promise(((i,s)=>{x.createSpeedUpTransaction(e,t,((e,t)=>{if(e)return r(re(e.message)),void s(e);const{currentNetworkTxList:o}=t;n=o[o.length-1],i(t)}))})).then((e=>r(z(e)))).then((()=>n))},n.createSpeedUpTransaction=function(e,t,n){let r;return o.default.debug("background.createSpeedUpTransaction"),i=>new Promise(((s,o)=>{x.createSpeedUpTransaction(e,t,n,((e,t)=>{if(e)return i(re(e.message)),void o(e);const{currentNetworkTxList:n}=t;r=n[n.length-1],s(t)}))})).then((e=>i(z(e)))).then((()=>r))},n.createTransactionEventFragment=function(e,t){return M.createTransactionEventFragment(e,t)},n.customSwapsGasParamsUpdated=function(e,t){return async n=>{await M.setSwapsTxGasPrice(t),await M.setSwapsTxGasLimit(e,!0),await ce(n)}},n.decryptMsg=function(e){return o.default.debug("action - decryptMsg"),async t=>{let n;t(te()),o.default.debug("actions calling background.decryptMessage");try{n=await M.decryptMessage(e)}catch(e){throw o.default.error(e),t(re(e.message)),e}finally{t(ne())}return t(z(n)),t(F(e.metamaskId)),t(ee()),e}},n.decryptMsgInline=function(e){return o.default.debug("action - decryptMsgInline"),async t=>{let n;o.default.debug("actions calling background.decryptMessageInline");try{n=await M.decryptMessageInline(e)}catch(e){throw o.default.error(e),t(re(e.message)),e}return t(z(n)),n.unapprovedDecryptMsgs[e.metamaskId]}},n.delRpcTarget=function(e){return t=>(o.default.debug(`background.delRpcTarget: ${e}`),new Promise(((n,r)=>{x.delCustomRpc(e,(e=>{if(e)return o.default.error(e),t(re("Had a problem removing network!")),void r(e);n()}))})))},n.detectCollectibles=function(){return async e=>{e(te()),o.default.debug("background.detectCollectibles"),await M.detectCollectibles(),e(ne()),await ce(e)}},n.detectNewTokens=async function(){return M.detectNewTokens()},n.disconnectGasFeeEstimatePoller=function(e){return M.disconnectGasFeeEstimatePoller(e)},n.dismissSmartTransactionsErrorMessage=function(){return{type:P.DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE}},n.displayWarning=re,n.editRpc=function(e,t,n,r="ETH",i,s){return async a=>{o.default.debug(`background.delRpcTarget: ${e}`);try{M.delCustomRpc(e)}catch(e){return o.default.error(e),void a(re("Had a problem removing network!"))}try{await M.updateAndSetCustomRpc(t,n,r,i||t,s)}catch(e){return o.default.error(e),void a(re("Had a problem changing networks!"))}a({type:P.SET_RPC_TARGET,value:t})}},n.encryptionPublicKeyMsg=function(e){return o.default.debug("action - encryptionPublicKeyMsg"),async t=>{let n;t(te()),o.default.debug("actions calling background.encryptionPublicKey");try{n=await M.encryptionPublicKey(e)}catch(e){throw o.default.error(e),t(re(e.message)),e}finally{t(ne())}return t(z(n)),t(F(e.metamaskId)),t(ee()),e}},n.estimateGas=function(e){return M.estimateGas(e)},n.estimateSmartTransactionsGas=function(e,t){t&&(t.value="0x0");return async n=>{try{await M.estimateSmartTransactionsGas(e,t)}catch(e){if(o.default.error(e),e.message.startsWith("Fetch error:")){const t=(0,T.parseSmartTransactionsError)(e.message);n({type:P.SET_SMART_TRANSACTIONS_ERROR,payload:t.type})}throw e}}},n.exportAccount=function(e,t){return function(n){return n(te()),o.default.debug("background.verifyPassword"),new Promise(((r,i)=>{x.verifyPassword(e,(function(e){if(e)return o.default.error("Error in verifying password."),n(ne()),n(re("Incorrect Password.")),void i(e);o.default.debug("background.exportAccount"),x.exportAccount(t,(function(e,t){if(n(ne()),e)return o.default.error(e),n(re("Had a problem exporting the account.")),void i(e);n(ie(t)),r(t)}))}))}))}},n.exportAccounts=function(e,t){return function(n){return o.default.debug("background.verifyPassword"),new Promise(((r,i)=>{x.verifyPassword(e,(function(e){if(e)return o.default.error("Error in submitting password."),void i(e);o.default.debug("background.exportAccounts");const s=t.map((e=>new Promise(((t,r)=>x.exportAccount(e,(function(e,i){if(e)return o.default.error(e),n(re("Had a problem exporting the account.")),void r(e);t(i)}))))));r(Promise.all(s))}))}))}},n.fetchAndSetQuotes=function(e,t){return async n=>{const[r,i]=await M.fetchAndSetQuotes(e,t);return await ce(n),[r,i]}},n.fetchInfoToSync=function(){return e=>(o.default.debug("background.fetchInfoToSync"),new Promise(((t,n)=>{x.fetchInfoToSync(((r,i)=>{if(r)return e(re(r.message)),void n(r);t(i)}))})))},n.fetchSmartTransactionFees=function(e){return async t=>{try{return await M.fetchSmartTransactionFees(e)}catch(e){if(o.default.error(e),e.message.startsWith("Fetch error:")){const n=(0,T.parseSmartTransactionsError)(e.message);t({type:P.SET_SMART_TRANSACTIONS_ERROR,payload:n.type})}throw e}}},n.fetchSmartTransactionsLiveness=function(){return async()=>{try{await M.fetchSmartTransactionsLiveness()}catch(e){o.default.error(e)}}},n.finalizeEventFragment=function(e,t){return M.finalizeEventFragment(e,t)},n.forceUpdateMetamaskState=ce,n.forgetDevice=function(e){return o.default.debug("background.forgetDevice",e),async t=>{t(te());try{await M.forgetDevice(e)}catch(e){throw o.default.error(e),t(re(e.message)),e}finally{t(ne())}await ce(t)}},n.forgotPassword=K,n.getBalancesInSingleCall=async function(e){return await M.getBalancesInSingleCall(e)},n.getContractMethodData=function(e=""){return(t,n)=>{const r=(0,m.addHexPrefix)(e).slice(0,10),{knownMethodData:i}=n().metamask;return i&&i[r]&&0!==Object.keys(i[r]).length||"0x"===r?Promise.resolve(i[r]):(t(fe()),o.default.debug("loadingMethodData"),(0,d.getMethodDataAsync)(r).then((({name:e,params:n})=>(t(he()),x.addKnownMethodData(r,{name:e,params:n},(e=>{e&&t(re(e.message))})),{name:e,params:n}))))}},n.getCurrentWindowTab=function(){return async e=>{e(_e(await global.platform.currentTab()))}},n.getGasFeeEstimatesAndStartPolling=function(){return M.getGasFeeEstimatesAndStartPolling()},n.getGasFeeTimeEstimate=function(e,t){return M.getGasFeeTimeEstimate(e,t)},n.getMisesGasfee=function(){return async(e,t)=>{const{metamask:n}=t(),r=n.accountList.find((e=>e.address===n.selectedAddress))||{};return e(te()),new Promise((t=>{M.setMisesBook(r.misesId,"0.001",!0).then((e=>{t(e)})).catch((()=>{t({})})).finally((()=>{e(ne())}))}))}},n.getNextNonce=function(){return async(e,t)=>{const n=t().metamask.selectedAddress;let r;try{r=await M.getNextNonce(n)}catch(t){throw e(re(t.message)),t}return e(ye(r)),r}},n.getOpenMetamaskTabsIds=function(){return async e=>{e(be(await M.getOpenMetamaskTabsIds()))}},n.getPopupId=function(){return M.getPopupId()},n.getPrivateKey=function(e){return new Promise(((t,n)=>{o.default.debug("background.exportAccount"),x.exportAccount(e,(function(e,r){if(e)return o.default.error(e),void n(e);t(r),console.log(r)}))}))},n.getRequestAccountTabIds=function(){return async e=>{e(ve(await M.getRequestAccountTabIds()))}},n.getThreeBoxLastUpdated=function(){return e=>new Promise(((t,n)=>{x.getThreeBoxLastUpdated(((r,i)=>{if(r)return e(re(r.message)),void n(r);t(i)}))}))},n.getTokenStandardAndDetails=async function(e,t,n){return await M.getTokenStandardAndDetails(e,t,n)},n.getTransactions=async function(e={}){return await M.getTransactions(e)},n.goHome=j,n.hideAlert=function(){return{type:P.ALERT_CLOSE}},n.hideLoadingIndication=ne,n.hideModal=function(e){return{type:P.MODAL_CLOSE,payload:e}},n.hideNetworkDropdown=function(){return{type:P.NETWORK_DROPDOWN_CLOSE}},n.hideTestNetMessage=function(){return M.setShowTestnetMessageInDropdown(!1)},n.hideWarning=function(){return{type:P.HIDE_WARNING}},n.ignoreTokens=function(e){return async t=>{try{await M.ignoreTokens(e)}catch(e){o.default.error(e)}finally{await ce(t)}}},n.importNewAccount=function(e,t){return async n=>{let r;n(te("This may take a while, please be patient."));try{o.default.debug("background.importAccountWithStrategy"),await M.importAccountWithStrategy(e,t),o.default.debug("background.getState"),r=await M.getState()}catch(e){throw n(re(e.message)),e}finally{n(ne())}return n(z(r)),r.selectedAddress&&n({type:P.SHOW_ACCOUNT_DETAIL,value:r.selectedAddress}),r}},n.importTokens=function(e){return async t=>{try{await M.importTokens(e)}catch(e){o.default.error(e)}finally{await ce(t)}}},n.initializeThreeBox=pe,n.isCollectibleOwner=async function(e,t,n){return await M.isCollectibleOwner(e,t,n)},n.loadingMethodDataFinished=he,n.loadingMethodDataStarted=fe,n.loadingTokenParamsFinished=function(){return{type:P.LOADING_TOKEN_PARAMS_FINISHED}},n.loadingTokenParamsStarted=function(){return{type:P.LOADING_TOKEN_PARAMS_STARTED}},n.lockMetamask=function(){return o.default.debug("background.setLocked"),e=>(e(te()),new Promise(((e,t)=>{x.setLocked((n=>{n?t(n):e()}))})).then((()=>U())).catch((t=>(e(re(t.message)),Promise.reject(t)))).then((t=>{e(z(t)),e(ne()),e({type:P.LOCK_METAMASK}),M.lockAll()})).catch((()=>{e(ne()),e({type:P.LOCK_METAMASK})})))},n.markPasswordForgotten=function(){return async e=>{try{await new Promise(((e,t)=>x.markPasswordForgotten((n=>{n?t(n):e()}))))}finally{e(ne()),e(K()),await ce(e)}}},n.msgReader=function(e){return M.getReader(e)},n.postTx=function(e){return async t=>(t(te()),new Promise(((n,r)=>{M.postTx(e).then(n).catch(r).finally((()=>{t(ne())}))})))},n.qrCodeDetected=function(e){return async t=>{await t({type:P.QR_CODE_DETECTED,value:e}),t((0,b.computeEstimatedGasLimit)())}},n.recentTransactions=function(e){return M.recentTransactions(e)},n.rejectPendingApproval=function(e,t){return async n=>{await M.rejectPendingApproval(e,t);const{pendingApprovals:r}=await ce(n);0===Object.values(r).length&&n(ee())}},n.rejectPermissionsRequest=function(e){return t=>new Promise(((n,r)=>{x.rejectPermissionsRequest(e,(e=>{if(e)return t(re(e.message)),void r(e);ce(t).then(n).catch(r)}))}))},n.rejectWatchAsset=function(e){return async t=>{t(te());try{await M.rejectWatchAsset(e),await ce(t)}catch(e){return o.default.error(e),void t(re(e.message))}finally{t(ne())}t(ee())}},n.removeAccount=function(e){return async t=>{t(te());try{await new Promise(((t,n)=>{x.removeAccount(e,((e,r)=>{e?n(e):t(r)}))})),await ce(t)}catch(e){throw t(re(e.message)),e}finally{t(ne())}o.default.info(`Account removed: ${e}`),t(Y())}},n.removeAndIgnoreCollectible=function(e,t,n){return async r=>{if(!e)throw new Error("MetaMask - Cannot ignore collectible without address");if(!t)throw new Error("MetaMask - Cannot ignore collectible without tokenID");n||r(te());try{await M.removeAndIgnoreCollectible(e,t)}catch(e){o.default.error(e),r(re(e.message))}finally{await ce(r),r(ne())}}},n.removeCollectible=function(e,t,n){return async r=>{if(!e)throw new Error("MetaMask - Cannot remove collectible without address");if(!t)throw new Error("MetaMask - Cannot remove collectible without tokenID");n||r(te());try{await M.removeCollectible(e,t)}catch(e){o.default.error(e),r(re(e.message))}finally{await ce(r),r(ne())}}},n.removeFromAddressBook=function(e,t){return o.default.debug("background.removeFromAddressBook"),async()=>{await M.removeFromAddressBook(e,(0,k.toChecksumHexAddress)(t))}},n.removePermissionsFor=function(e){return t=>{x.removePermissionsFor(e,(e=>{e&&t(re(e.message))}))}},n.removePermittedAccount=function(e,t){return async n=>{await new Promise(((n,r)=>{x.removePermittedAccount(e,t,(e=>{e?r(e):n()}))})),await ce(n)}},n.removePollingTokenFromAppState=async function(e){return M.removePollingTokenFromAppState(e,h.POLLING_TOKEN_ENVIRONMENT_TYPES[(0,m.getEnvironmentType)()])},n.removeToken=function(e){return async t=>{t(te());try{await M.removeToken(e)}catch(e){o.default.error(e),t(re(e.message))}finally{await ce(t),t(ne())}}},n.requestAccountsPermissionWithId=function(e){return async t=>{const n=await M.requestAccountsPermissionWithId(e);return await ce(t),n}},n.requestRevealSeedWords=function(e){return async t=>{t(te()),o.default.debug("background.verifyPassword");try{await R(e);return await D()}catch(e){throw t(re(e.message)),e}finally{t(ne())}}},n.resetAccount=function(){return e=>(e(te()),new Promise(((t,n)=>{x.resetAccount(((r,i)=>{if(e(ne()),r)return e(re(r.message)),void n(r);o.default.info(`Transaction history reset for ${i}`),e(Y()),t(i)})),M.resetMisesAccount()})))},n.resetBackgroundSwapsState=function(){return async e=>{const t=await M.resetSwapsState();return await ce(e),t}},n.resetSwapsPostFetchState=function(){return async e=>{await M.resetPostFetchState(),await ce(e)}},n.resetTranstionFlag=async function(){M.resetTranstionFlag()},n.resolvePendingApproval=function(e,t){return async n=>{await M.resolvePendingApproval(e,t);const{pendingApprovals:r}=await ce(n);0===Object.values(r).length&&n(ee())}},n.restoreFromThreeBox=function(e){return t=>new Promise(((n,r)=>{x.restoreFromThreeBox(e,(e=>{if(e)return t(re(e.message)),void r(e);n()}))}))},n.rollbackToPreviousProvider=function(){return async e=>{try{await M.rollbackToPreviousProvider()}catch(t){o.default.error(t),e(re("Had a problem changing networks!"))}}},n.safeRefetchQuotes=function(){return async e=>{await M.safeRefetchQuotes(),await ce(e)}},n.setAccountLabel=function(e,t){return n=>(n(te()),o.default.debug("background.setAccountLabel"),new Promise(((r,i)=>{x.setAccountLabel(e,t,(s=>{if(n(ne()),s)return n(re(s.message)),void i(s);n({type:P.SET_ACCOUNT_LABEL,value:{account:e,label:t}}),r(e)}))})))},n.setAdvancedGasFee=function(e){return t=>{t(te()),o.default.debug("background.setAdvancedGasFee"),x.setAdvancedGasFee(e,(e=>{t(ne()),e&&t(re(e.message))}))}},n.setAlertEnabledness=async function(e,t){await M.setAlertEnabledness(e,t)},n.setApproveTxId=function(e){return async t=>{await M.setApproveTxId(e),await ce(t)}},n.setAutoLockTimeLimit=function(e){return oe("autoLockTimeLimit",e)},n.setBackgroundSwapRouteState=function(e){return async t=>{await M.setBackgroundSwapRouteState(e),await ce(t)}},n.setCollectiblesDetectionNoticeDismissed=function(){return M.setCollectiblesDetectionNoticeDismissed(!0)},n.setCompletedOnboarding=function(){return async e=>{e(te());try{await M.completeOnboarding(),e(ue())}catch(t){throw e(re(t.message)),t}finally{e(ne())}}},n.setConnectedStatusPopoverHasBeenShown=function(){return()=>{x.setConnectedStatusPopoverHasBeenShown((e=>{if(e)throw new Error(e.message)}))}},n.setCurrentCurrency=function(e){return async t=>{t(te()),o.default.debug("background.setCurrentCurrency");try{await M.setCurrentCurrency(e),await ce(t)}catch(e){return o.default.error(e),void t(re(e.message))}finally{t(ne())}}},n.setCurrentLocale=de,n.setCurrentWindowTab=_e,n.setCustomApproveTxData=function(e){return async t=>{await M.setCustomApproveTxData(e),await ce(t)}},n.setDefaultHomeActiveTabName=function(e){return async t=>{await M.setDefaultHomeActiveTabName(e),await ce(t)}},n.setDismissSeedBackUpReminder=function(e){return async t=>{t(te()),await M.setDismissSeedBackUpReminder(e),t(ne())}},n.setEIP1559V2Enabled=function(e){return async t=>{t(te()),o.default.debug("background.setEIP1559V2Enabled");try{await M.setEIP1559V2Enabled(e)}finally{t(ne())}}},n.setEnableEIP1559V2NoticeDismissed=function(){return M.setEnableEIP1559V2NoticeDismissed(!0)},n.setFeatureFlag=function(e,t,n){return r=>(r(te()),new Promise(((i,s)=>{x.setFeatureFlag(e,t,((e,t)=>{if(r(ne()),e)return r(re(e.message)),void s(e);r(se(t)),n&&r(Z({name:n})),i(t)}))})))},n.setFirstTimeFlowType=function(e){return t=>{o.default.debug("background.setFirstTimeFlowType"),x.setFirstTimeFlowType(e,(e=>{e&&t(re(e.message))})),t({type:P.SET_FIRST_TIME_FLOW_TYPE,value:e})}},n.setHardwareWalletDefaultHdPath=function({device:e,path:t}){return{type:P.SET_HARDWARE_WALLET_DEFAULT_HD_PATH,value:{device:e,path:t}}},n.setHideZeroBalanceTokens=function(e){return oe("hideZeroBalanceTokens",e)},n.setInitialGasEstimate=function(e){return async t=>{await M.setInitialGasEstimate(e),await ce(t)}},n.setIpfsGateway=function(e){return t=>{t(te()),o.default.debug("background.setIpfsGateway"),x.setIpfsGateway(e,(n=>{t(ne()),t(n?re(n.message):{type:P.SET_IPFS_GATEWAY,value:e})}))}},n.setLastActiveTime=function(){return e=>{x.setLastActiveTime((t=>{t&&e(re(t.message))}))}},n.setLedgerTransportPreference=function(e){return async t=>{t(te()),await M.setLedgerTransportPreference(e),t(ne())}},n.setMisesAccountUserInfo=function(){return async(e,t)=>{const n=t();console.log(n),e(te());const r=(0,v.getSelectedAddress)(n);await M.setMisesUser(r),e(ne())}},n.setMouseUserState=function(e){return{type:P.SET_MOUSE_USER_STATE,value:e}},n.setNewCollectibleAddedMessage=function(e){return{type:P.SET_NEW_COLLECTIBLE_ADDED_MESSAGE,value:e}},n.setNewNetworkAdded=function(e){return{type:P.SET_NEW_NETWORK_ADDED,value:e}},n.setNextNonce=ye,n.setOpenMetamaskTabsIDs=be,n.setOpenSeaEnabled=function(e){return t=>{t(te()),o.default.debug("background.setOpenSeaEnabled"),x.setOpenSeaEnabled(e,(e=>{t(ne()),e&&t(re(e.message))}))}},n.setParticipateInMetaMetrics=function(e){return t=>(o.default.debug("background.setParticipateInMetaMetrics"),new Promise(((n,r)=>{x.setParticipateInMetaMetrics(e,((i,s)=>{if(o.default.debug(i),i)return t(re(i.message)),void r(i);t({type:P.SET_PARTICIPATE_IN_METAMETRICS,value:e}),n([e,s])}))})))},n.setPendingTokens=function(e){const{customToken:t={},selectedTokens:n={},tokenAddressList:r=[]}=e,{address:i,symbol:s,decimals:o}=t,a=i&&s&&o>=0<=36?C(C({},n),{},{[i]:C(C({},t),{},{isCustom:!0})}):n;return Object.keys(a).forEach((e=>{a[e].unlisted=!r.find((t=>(0,E.isEqualCaseInsensitive)(t,e)))})),{type:P.SET_PENDING_TOKENS,payload:a}},n.setPreference=oe,n.setProviderType=function(e){return async t=>{o.default.debug("background.setProviderType",e);try{await M.setProviderType(e)}catch(e){return o.default.error(e),void t(re("Had a problem changing networks!"))}t(X(e))}},n.setRecoveryPhraseReminderHasBeenShown=function(){return()=>{x.setRecoveryPhraseReminderHasBeenShown((e=>{if(e)throw new Error(e.message)}))}},n.setRecoveryPhraseReminderLastShown=function(e){return()=>{x.setRecoveryPhraseReminderLastShown(e,(e=>{if(e)throw new Error(e.message)}))}},n.setRequestAccountTabIds=ve,n.setRpcTarget=function(e,t,n="ETH",r){return async i=>{o.default.debug(`background.setRpcTarget: ${e} ${t} ${n} ${r}`);try{await M.setCustomRpc(e,t,n,r||e)}catch(e){o.default.error(e),i(re("Had a problem changing networks!"))}}},n.setSeedPhraseBackedUp=function(e){return t=>(o.default.debug("background.setSeedPhraseBackedUp"),new Promise(((n,r)=>{x.setSeedPhraseBackedUp(e,(e=>{if(e)return t(re(e.message)),void r(e);ce(t).then(n).catch(r)}))})))},n.setSelectedAddress=function(e){return async t=>{t(te()),o.default.debug("background.setSelectedAddress");try{await V(e)}catch(e){return void t(re(e.message))}finally{t(ne())}}},n.setSelectedQuoteAggId=function(e){return async t=>{await M.setSelectedQuoteAggId(e),await ce(t)}},n.setSelectedSettingsRpcUrl=function(e){return{type:P.SET_SELECTED_SETTINGS_RPC_URL,value:e}},n.setShowFiatConversionOnTestnetsPreference=function(e){return oe("showFiatInTestnets",e)},n.setShowRestorePromptToFalse=function(){return e=>new Promise(((t,n)=>{x.setShowRestorePromptToFalse((r=>{if(r)return e(re(r.message)),void n(r);t()}))}))},n.setShowTestNetworks=function(e){return oe("showTestNetworks",e)},n.setSmartTransactionsOptInStatus=async function(e,t){we({event:"STX OptIn",category:"swaps",sensitiveProperties:{stx_enabled:!0,current_stx_enabled:!0,stx_user_opt_in:e,stx_prev_user_opt_in:t}}),await M.setSmartTransactionsOptInStatus(e)},n.setSmartTransactionsRefreshInterval=function(e){return async()=>{try{await M.setStatusRefreshInterval(e)}catch(e){o.default.error(e)}}},n.setSwapsErrorKey=function(e){return async t=>{await M.setSwapsErrorKey(e),await ce(t)}},n.setSwapsFeatureFlags=function(e){return async t=>{await M.setSwapsFeatureFlags(e),await ce(t)}},n.setSwapsLiveness=function(e){return async t=>{await M.setSwapsLiveness(e),await ce(t)}},n.setSwapsQuotesPollingLimitEnabled=function(e){return async t=>{await M.setSwapsQuotesPollingLimitEnabled(e),await ce(t)}},n.setSwapsTokens=function(e){return async t=>{await M.setSwapsTokens(e),await ce(t)}},n.setSwapsTxGasLimit=function(e){return async t=>{await M.setSwapsTxGasLimit(e,!0),await ce(t)}},n.setSwapsTxGasPrice=function(e){return async t=>{await M.setSwapsTxGasPrice(e),await ce(t)}},n.setTheme=function(e){return async t=>{t(te()),o.default.debug("background.setTheme");try{await M.setTheme(e)}finally{t(ne())}}},n.setThreeBoxSyncingPermission=me,n.setTradeTxId=function(e){return async t=>{await M.setTradeTxId(e),await ce(t)}},n.setUnconnectedAccountAlertShown=ke,n.setUseBlockie=function(e){return t=>{t(te()),o.default.debug("background.setUseBlockie"),x.setUseBlockie(e,(e=>{t(ne()),e&&t(re(e.message))})),t({type:P.SET_USE_BLOCKIE,value:e})}},n.setUseCollectibleDetection=function(e){return t=>{t(te()),o.default.debug("background.setUseCollectibleDetection"),x.setUseCollectibleDetection(e,(e=>{t(ne()),e&&t(re(e.message))}))}},n.setUseNativeCurrencyAsPrimaryCurrencyPreference=function(e){return oe("useNativeCurrencyAsPrimaryCurrency",e)},n.setUseNonceField=function(e){return async t=>{t(te()),o.default.debug("background.setUseNonceField");try{await M.setUseNonceField(e)}catch(e){t(re(e.message))}t(ne()),t({type:P.SET_USE_NONCEFIELD,value:e})}},n.setUsePhishDetect=function(e){return t=>{t(te()),o.default.debug("background.setUsePhishDetect"),x.setUsePhishDetect(e,(e=>{t(ne()),e&&t(re(e.message))}))}},n.setUseTokenDetection=function(e){return t=>{t(te()),o.default.debug("background.setUseTokenDetection"),x.setUseTokenDetection(e,(e=>{t(ne()),e&&t(re(e.message))}))}},n.setWeb3ShimUsageAlertDismissed=async function(e){await M.setWeb3ShimUsageAlertDismissed(e)},n.showAccountDetail=function(e){return async(t,n)=>{t(te()),o.default.debug("background.setSelectedAddress");const r=n(),i=(0,w.getUnconnectedAccountAlertEnabledness)(r),s=(0,v.getOriginOfCurrentTab)(r),a=(0,v.getPermittedAccountsForCurrentTab)(r),u=(0,v.getOrderedConnectedAccountsForActiveTab)(r),c=Boolean(s)&&u.length>0,l=Boolean(s)&&a.includes(e),d=c&&!l;try{await V(e),await ce(t)}catch(e){return void t(re(e.message))}finally{t(ne())}t({type:P.SHOW_ACCOUNT_DETAIL,value:e}),i&&d&&(t((0,_.switchedToUnconnectedAccount)()),await ke(s))}},n.showAccountsPage=Y,n.showAlert=function(e){return{type:P.ALERT_OPEN,value:e}},n.showConfTxPage=Q,n.showLoadingIndication=te,n.showModal=Z,n.showNetworkDropdown=function(){return{type:P.NETWORK_DROPDOWN_OPEN}},n.showPrivateKey=ie,n.showQrScanner=function(){return e=>{e(Z({name:"QR_SCANNER"}))}},n.showSendTokenPage=function(){return{type:P.SHOW_SEND_TOKEN_PAGE}},n.signAndSendSmartTransaction=function({unsignedTransaction:e,smartTransactionFees:t}){return async n=>{const r=await Se(e,t.fees),i=await Se(e,t.cancelFees,!0);try{return(await M.submitSignedTransactions({signedTransactions:r,signedCanceledTransactions:i,txParams:e})).uuid}catch(e){if(o.default.error(e),e.message.startsWith("Fetch error:")){const t=(0,T.parseSmartTransactionsError)(e.message);n({type:P.SET_SMART_TRANSACTIONS_ERROR,payload:t.type})}throw e}}},n.signMsg=function(e){return o.default.debug("action - signMsg"),async t=>{let n;t(te()),o.default.debug("actions calling background.signMessage");try{n=await M.signMessage(e)}catch(e){throw o.default.error(e),t(re(e.message)),e}finally{t(ne())}return t(z(n)),t(F(e.metamaskId)),t(ee()),e}},n.signPersonalMsg=function(e){return o.default.debug("action - signPersonalMsg"),async t=>{let n;t(te()),o.default.debug("actions calling background.signPersonalMessage");try{n=await M.signPersonalMessage(e)}catch(e){throw o.default.error(e),t(re(e.message)),e}finally{t(ne())}return t(z(n)),t(F(e.metamaskId)),t(ee()),e}},n.signTypedMsg=function(e){return o.default.debug("action - signTypedMsg"),async t=>{let n;t(te()),o.default.debug("actions calling background.signTypedMessage");try{n=await M.signTypedMessage(e)}catch(e){throw o.default.error(e),t(re(e.message)),e}finally{t(ne())}return t(z(n)),t(F(e.metamaskId)),t(ee()),e}},n.stopPollingForQuotes=function(){return async e=>{await M.stopPollingForQuotes(),await ce(e)}},n.submitPassword=I,n.submitQRHardwareCryptoAccount=async function(e){await M.submitQRHardwareCryptoAccount(e)},n.submitQRHardwareCryptoHDKey=async function(e){await M.submitQRHardwareCryptoHDKey(e)},n.submitQRHardwareSignature=async function(e,t){await M.submitQRHardwareSignature(e,t)},n.toggleAccountMenu=function(){return{type:P.TOGGLE_ACCOUNT_MENU}},n.trackMetaMetricsEvent=we,n.trackMetaMetricsPage=function(e,t){return M.trackMetaMetricsPage(e,t)},n.tryReverseResolveAddress=function(e){return()=>new Promise((t=>{x.tryReverseResolveAddress(e,(e=>{e&&o.default.error(e),t()}))}))},n.tryUnlockMetamask=function(e){return(t,n)=>(t(te()),t(q()),o.default.debug("background.submitPassword"),new Promise(((t,n)=>{x.submitPassword(e,(e=>{e?n(e):t()}))})).then((()=>(t(W()),ce(t)))).then((()=>new Promise(((e,n)=>{x.verifySeedPhrase((r=>{if(r)return t(re(r.message)),void n(r);e()}))})))).then((async()=>{try{const e=n(),r=(0,v.getSelectedAddress)(e);return await M.initMisesBalance(),M.setMisesUser(r),t(ne()),Promise.resolve()}catch(e){if(console.log(e,"errerrerrerrerr"),e)return t(re(e.message)),Promise.reject(e)}return Promise.resolve()})).catch((e=>(t($(e.message)),t(ne()),Promise.reject(e)))))},n.turnThreeBoxSyncingOn=ge,n.turnThreeBoxSyncingOnAndInitialize=function(){return async e=>{await e(me(!0)),await e(ge()),await e(pe())}},n.txError=H,n.unMarkPasswordForgotten=G,n.unlockAndGetSeedPhrase=function(e){return async t=>{t(te());try{await I(e);const n=await D();return await ce(t),n}catch(e){throw t(re(e.message)),new Error(e.message)}finally{t(ne())}}},n.unlockFailed=$,n.unlockHardwareWalletAccounts=function(e,t,n,r){return o.default.debug("background.unlockHardwareWalletAccount",e,t,n,r),async i=>{i(te());for(const s of e)try{await M.unlockHardwareWalletAccount(s,t,n,r)}catch(e){throw o.default.error(e),i(re(e.message)),i(ne()),e}return i(ne()),undefined}},n.unlockInProgress=q,n.unlockSucceeded=W,n.updataBalance=function(e){return M.updataBalance(e)},n.updateAndApproveTx=function(e,t){return n=>(!t&&n(te()),new Promise(((t,r)=>{x.updateAndApproveTransaction(e,(i=>{if(n(L(e.id,e.txParams)),n((0,b.resetSendState)()),i)return n(H(i)),n(j()),o.default.error(i.message),void r(i);t(e)}))})).then((()=>U())).then((e=>n(z(e)))).then((()=>(n((0,b.resetSendState)()),n(F(e.id)),n(ne()),n(B("")),n(ee()),e))).catch((e=>(n(ne()),Promise.reject(e)))))},n.updateAndSetCustomRpc=function(e,t,n="ETH",r,i){return async s=>{o.default.debug(`background.updateAndSetCustomRpc: ${e} ${t} ${n} ${r}`);try{await M.updateAndSetCustomRpc(e,t,n,r||e,i)}catch(e){return o.default.error(e),void s(re("Had a problem changing networks!"))}s({type:P.SET_RPC_TARGET,value:e})}},n.updateCollectibleDropDownState=function(e){return async t=>{await M.updateCollectibleDropDownState(e),await ce(t)}},n.updateCurrentLocale=le,n.updateCustomNonce=B,n.updateCustomSwapsEIP1559GasParams=function({gasLimit:e,maxFeePerGas:t,maxPriorityFeePerGas:n}){return async r=>{await Promise.all([M.setSwapsTxGasLimit(e),M.setSwapsTxMaxFeePerGas(t),M.setSwapsTxMaxFeePriorityPerGas(n)]),await ce(r)}},n.updateEditableParams=function(e,t){return async n=>{let r;try{r=await M.updateEditableParams(e,t)}catch(e){throw n(H(e)),o.default.error(e.message),e}return r}},n.updateEventFragment=function(e,t){return M.updateEventFragment(e,t)},n.updateFeatureFlags=se,n.updateMetamaskState=z,n.updatePreferences=ae,n.updatePreviousGasParams=function(e,t){return async n=>{let r;try{r=await M.updatePreviousGasParams(e,t)}catch(e){throw n(H(e)),o.default.error(e.message),e}return r}},n.updateProviderType=X,n.updateSmartTransaction=function(e,t){return async n=>{try{await M.updateSmartTransaction(C({uuid:e},t))}catch(e){if(o.default.error(e),e.message.startsWith("Fetch error:")){const t=(0,T.parseSmartTransactionsError)(e.message);n({type:P.SET_SMART_TRANSACTIONS_ERROR,payload:t.type})}throw e}}},n.updateSwapApprovalTransaction=function(e,t){return async n=>{let r;try{r=await M.updateSwapApprovalTransaction(e,t)}catch(e){throw n(H(e)),o.default.error(e.message),e}return r}},n.updateSwapTransaction=function(e,t){return async n=>{let r;try{r=await M.updateSwapTransaction(e,t)}catch(e){throw n(H(e)),o.default.error(e.message),e}return r}},n.updateSwapsUserFeeLevel=function(e){return async t=>{await M.setSwapsUserFeeLevel(e),await ce(t)}},n.updateTokenType=async function(e){let t={};try{t=await M.updateTokenType(e)}catch(e){o.default.error(e)}return t},n.updateTransaction=function(e,t){return async n=>{!t&&n(te());try{await M.updateTransaction(e)}catch(t){throw n(L(e.id,e.txParams)),n(ne()),n(H(t)),n(j()),o.default.error(t.message),t}try{n(L(e.id,e.txParams));return n(z(await U())),n(Q({id:e.id})),e}finally{n(ne())}}},n.updateTransactionGasFees=function(e,t){return async n=>{let r;try{r=await M.updateTransactionGasFees(e,t)}catch(e){throw n(H(e)),o.default.error(e.message),e}return r}},n.updateTransactionParams=L,n.updateViewedNotifications=function(e){return M.updateViewedNotifications(e)},n.verifyPassword=R,n.verifySeedPhrase=D;var i=r(e("@babel/runtime/helpers/defineProperty")),s=r(e("pify")),o=r(e("loglevel")),a=e("@sentry/browser"),u=e("lodash"),c=r(e("../../app/scripts/lib/buy-url")),l=e("../helpers/utils/i18n-helper"),d=e("../helpers/utils/transactions.util"),f=r(e("../helpers/utils/switch-direction")),h=e("../../shared/constants/app"),p=e("../helpers/utils/confirm-tx.util"),g=r(e("../helpers/utils/tx-helper")),m=e("../../app/scripts/lib/util"),y=e("../helpers/utils/conversions.util"),v=e("../selectors"),b=e("../ducks/send"),_=e("../ducks/alerts/unconnected-account"),w=e("../ducks/metamask/metamask"),k=e("../../shared/modules/hexstring-utils"),S=e("../../shared/constants/hardware-wallets"),T=e("../pages/swaps/swaps.util"),E=e("../../shared/modules/string-utils"),P=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=A(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=e[s]}r.default=e,n&&n.set(e,r);return r}(e("./actionConstants"));function A(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(A=function(e){return e?n:t})(e)}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let x=null,M=null;function j(){return{type:P.GO_HOME}}function I(e){return new Promise(((t,n)=>{x.submitPassword(e,(e=>{e?n(e):t()}))}))}function N(e){return new Promise(((t,n)=>{x.createNewVaultAndKeychain(e,(e=>{e?n(e):t(!0)}))}))}function R(e){return new Promise(((t,n)=>{x.verifyPassword(e,(e=>{e?n(e):t(!0)}))}))}async function D(){const e=await M.verifySeedPhrase();return t.from(e).toString("utf8")}function B(e){return{type:P.UPDATE_CUSTOM_NONCE,value:e}}const U=()=>(o.default.debug("background.getState"),new Promise(((e,t)=>{x.getState(((n,r)=>{n?t(n):e(r)}))})));function F(e){return(t,n)=>{const r=n(),{unapprovedTxs:i,unapprovedMsgs:s,unapprovedPersonalMsgs:o,unapprovedTypedMessages:a,network:u,provider:{chainId:c}}=r.metamask,l=(0,g.default)(i,s,o,a,u,c).filter((t=>t.id!==e));t({type:P.COMPLETED_TX,value:{id:e,unconfirmedActionsCount:l.length}})}}function L(e,t){return{type:P.UPDATE_TRANSACTION_PARAMS,id:e,value:t}}function H(e){return{type:P.TRANSACTION_ERROR,message:e.message}}function G(){return e=>new Promise((t=>{x.unMarkPasswordForgotten((()=>{e(K(!1)),t()}))})).then((()=>ce(e)))}function K(e=!0){return{type:P.FORGOT_PASSWORD,value:e}}function q(){return{type:P.UNLOCK_IN_PROGRESS}}function $(e){return{type:P.UNLOCK_FAILED,value:e}}function W(e){return{type:P.UNLOCK_SUCCEEDED,value:e}}function z(e){return(t,n)=>{var r,i,s,o;const{metamask:a}=n(),{currentLocale:c,selectedAddress:l,provider:d}=a,{currentLocale:f,selectedAddress:h,provider:p}=e;c&&f&&c!==f&&t(le(f)),l!==h&&t({type:P.SELECTED_ADDRESS_CHANGED});const g=null!==(r=null===(i=e.addressBook)||void 0===i?void 0:i[null==p?void 0:p.chainId])&&void 0!==r?r:{},m=null!==(s=null===(o=a.addressBook)||void 0===o?void 0:o[null==d?void 0:d.chainId])&&void 0!==s?s:{},y=(0,v.getMetaMaskAccounts)({metamask:e}),b=(0,v.getMetaMaskAccounts)({metamask:a}),_=y[h],w=y[l];Object.entries(b).forEach((([e,n])=>{(0,u.isEqual)(n,y[e])||t({type:P.ACCOUNT_CHANGED,payload:{account:y[e]}})})),!1===(0,u.isEqual)(w,_)&&t({type:P.SELECTED_ACCOUNT_CHANGED,payload:{account:_}}),!1===(0,u.isEqual)(m,g)&&t({type:P.ADDRESS_BOOK_UPDATED,payload:{addressBook:g}}),!1===(0,u.isEqual)(a.gasFeeEstimates,e.gasFeeEstimates)&&t({type:P.GAS_FEE_ESTIMATES_UPDATED,payload:{gasFeeEstimates:e.gasFeeEstimates,gasEstimateType:e.gasEstimateType}}),d.chainId!==p.chainId&&t({type:P.CHAIN_CHANGED,payload:p.chainId}),e.provider&&e.provider&&e.provider.ticker!==e.nativeCurrency&&(e.nativeCurrency=e.provider.ticker),t({type:P.UPDATE_METAMASK_STATE,value:e})}}async function V(e){o.default.debug("background.setSelectedAddress"),await M.setSelectedAddress(e)}function Y(){return{type:P.SHOW_ACCOUNTS_PAGE}}function Q({id:e}={}){return{type:P.SHOW_CONF_TX_PAGE,id:e}}function J(e,t,n,r,i){return async s=>{if(!e)throw new Error("MetaMask - Cannot add token without address");i||s(te());try{await M.addToken(e,t,n,r)}catch(e){o.default.error(e),s(re(e.message))}finally{await ce(s),s(ne())}}}function X(e){return{type:P.SET_PROVIDER_TYPE,value:e}}function Z(e){return{type:P.MODAL_OPEN,payload:e}}function ee(){return(e,t)=>{console.log((0,m.getEnvironmentType)()===h.ENVIRONMENT_TYPE_NOTIFICATION,(0,p.hasUnconfirmedTransactions)(t())),[h.ENVIRONMENT_TYPE_NOTIFICATION,h.ENVIRONMENT_TYPE_POPUP].includes((0,m.getEnvironmentType)())&&!(0,p.hasUnconfirmedTransactions)(t())&&Te("closeCurrentNotificationWindow")}}function te(e){return{type:P.SHOW_LOADING,value:e}}function ne(){return{type:P.HIDE_LOADING}}function re(e){return{type:P.DISPLAY_WARNING,value:e}}function ie(e){return{type:P.SHOW_PRIVATE_KEY,value:e}}function se(e){return{type:P.UPDATE_FEATURE_FLAGS,value:e}}function oe(e,t){return n=>(n(te()),new Promise(((r,i)=>{x.setPreference(e,t,((e,t)=>{if(n(ne()),e)return n(re(e.message)),void i(e);n(ae(t)),r(t)}))})))}function ae(e){return{type:P.UPDATE_PREFERENCES,value:e}}function ue(){return{type:P.COMPLETE_ONBOARDING}}async function ce(e){let t;o.default.debug("background.getState");try{t=await M.getState()}catch(t){throw e(re(t.message)),t}return e(z(t)),t}function le(e){return async t=>{t(te());try{await(0,l.loadRelativeTimeFormatLocaleData)(e);const n=await(0,l.fetchLocale)(e),r=await M.setCurrentLocale(e);await(0,f.default)(r),t(de(e,n))}catch(e){return void t(re(e.message))}finally{t(ne())}}}function de(e,t){return{type:P.SET_CURRENT_LOCALE,value:{locale:e,messages:t}}}function fe(){return{type:P.LOADING_METHOD_DATA_STARTED}}function he(){return{type:P.LOADING_METHOD_DATA_FINISHED}}function pe(){return e=>new Promise(((t,n)=>{x.initializeThreeBox((r=>{if(r)return e(re(r.message)),void n(r);t()}))}))}function ge(){return e=>new Promise(((t,n)=>{x.turnThreeBoxSyncingOn((r=>{if(r)return e(re(r.message)),void n(r);t()}))}))}function me(e){return t=>new Promise(((n,r)=>{x.setThreeBoxSyncingPermission(e,(e=>{if(e)return t(re(e.message)),void r(e);n()}))}))}function ye(e){return{type:P.SET_NEXT_NONCE,value:e}}function ve(e){return{type:P.SET_REQUEST_ACCOUNT_TABS,value:e}}function be(e){return{type:P.SET_OPEN_METAMASK_TAB_IDS,value:e}}function _e(e){return{type:P.SET_CURRENT_WINDOW_TAB,value:e}}function we(e,t){return M.trackMetaMetricsEvent(e,t)}async function ke(e){await M.setUnconnectedAccountAlertShown(e)}const Se=async(e,t,n)=>{const r=t.map((t=>{const r=C(C({},e),{},{maxFeePerGas:(0,y.decimalToHex)(t.maxFeePerGas),maxPriorityFeePerGas:(0,y.decimalToHex)(t.maxPriorityFeePerGas),gas:n?(0,y.decimalToHex)(21e3):e.gas,value:e.value});return n&&(r.to=r.from,r.data="0x"),r}));return await M.approveTransactionsWithSameNonce(r)};function Te(e){M.closePopUp(e)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"<root>",file:"/Users/mac/code/a-mises/metamask-extension/ui/store/actions.js"}],[7437,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.WEI=n.TOKEN_STANDARDS=n.SUPPORT_REQUEST_LINK=n.SUPPORT_LINK=n.SECONDARY=n.PRIMARY=n.MIS=n.GWEI=n.GAS_ESTIMATE_TYPES=n.ETH=n.ERC721=n.ERC20=n.ERC1155=void 0;n.ETH="ETH";n.GWEI="GWEI";n.WEI="WEI";n.MIS="MIS";n.PRIMARY="PRIMARY";n.SECONDARY="SECONDARY";const r="ERC20";n.ERC20=r;const i="ERC721";n.ERC721=i;const s="ERC1155";n.ERC1155=s;const o={ERC20:r,ERC721:i,ERC1155:s,NONE:"NONE"};n.TOKEN_STANDARDS=o;n.GAS_ESTIMATE_TYPES={SLOW:"SLOW",AVERAGE:"AVERAGE",FAST:"FAST",FASTEST:"FASTEST"};n.SUPPORT_LINK="https://support.metamask.io";n.SUPPORT_REQUEST_LINK="https://metamask.zendesk.com/hc/en-us/requests/new"}}},{package:"<root>",file:"/Users/mac/code/a-mises/metamask-extension/ui/helpers/constants/common.js"}],[7458,{"../../../app/scripts/lib/util":99,"../../../shared/modules/conversion.utils":6911,"../../selectors":7841,"@babel/runtime/helpers/interopRequireDefault":213,"bignumber.js":2348,"currency-formatter":2630,"currency-formatter/currencies":2629},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.addEth=function(...e){return e.reduce(((e,t)=>(0,c.addCurrencies)(e,t,{toNumericBase:"dec",numberOfDecimals:6,aBase:10,bBase:10})))},n.addFiat=function(...e){return e.reduce(((e,t)=>(0,c.addCurrencies)(e,t,{toNumericBase:"dec",numberOfDecimals:2,aBase:10,bBase:10})))},n.areDappSuggestedAndTxParamGasFeesTheSame=function(e={}){const{txParams:t,dappSuggestedGasFees:n}=e,{gasPrice:r,maxFeePerGas:i,maxPriorityFeePerGas:s}=t||{},{gasPrice:o,maxFeePerGas:a,maxPriorityFeePerGas:u}=n||{},c=!o&&!a&&!u;if(!r&&!i&&!s||c)return!1;const l=r&&r===o,d=[i,s].every((e=>e===o)),f=i&&i===a&&s===u;return l||d||f},n.convertTokenToFiat=function({value:e,fromCurrency:t="ETH",toCurrency:n,conversionRate:r,contractExchangeRate:i}){const s=r*i;return(0,c.conversionUtil)(e,{fromNumericBase:"dec",toNumericBase:"dec",fromCurrency:t,toCurrency:n,numberOfDecimals:2,conversionRate:s})},n.formatCurrency=function(e,t){const n=t.toUpperCase();return s.default.find((e=>e.code===n))?i.default.format(Number(e),{code:n,style:"currency"}):e},n.getHexGasTotal=function({gasLimit:e,gasPrice:t}){return(0,a.addHexPrefix)((0,c.multiplyCurrencies)(e||"0x0",t||"0x0",{toNumericBase:"hex",multiplicandBase:16,multiplierBase:16}))},n.getTransactionFee=function({value:e,fromCurrency:t="ETH",toCurrency:n,conversionRate:r,numberOfDecimals:i}){return(0,c.conversionUtil)(e,{fromNumericBase:"BN",toNumericBase:"dec",fromDenomination:"WEI",fromCurrency:t,toCurrency:n,numberOfDecimals:i,conversionRate:r})},n.getValueFromWeiHex=function({value:e,fromCurrency:t="ETH",toCurrency:n,conversionRate:r,numberOfDecimals:i,toDenomination:s}){return(0,c.conversionUtil)(e,{fromNumericBase:"hex",toNumericBase:"dec",fromCurrency:t,toCurrency:n,numberOfDecimals:i,fromDenomination:"WEI",toDenomination:s,conversionRate:r})},n.hasUnconfirmedTransactions=function(e){return(0,u.unconfirmedTransactionsCountSelector)(e)>0},n.hexGreaterThan=function(e,t){return(0,c.conversionGreaterThan)({value:e,fromNumericBase:"hex"},{value:t,fromNumericBase:"hex"})},n.increaseLastGasPrice=function(e){return(0,a.addHexPrefix)((0,c.multiplyCurrencies)(e||"0x0",1.1,{multiplicandBase:16,multiplierBase:10,toNumericBase:"hex"}))},n.roundExponential=function(e){const t=new o.default(e);return t.e>20?t.toPrecision(4):e};var i=r(e("currency-formatter")),s=r(e("currency-formatter/currencies")),o=r(e("bignumber.js")),a=e("../../../app/scripts/lib/util"),u=e("../../selectors"),c=e("../../../shared/modules/conversion.utils")}}},{package:"<root>",file:"/Users/mac/code/a-mises/metamask-extension/ui/helpers/utils/confirm-tx.util.js"}],[7478,{"../../../app/scripts/lib/util":99,"../../../shared/constants/labels":6902,"../../../shared/constants/network":6904,"../../../shared/modules/conversion.utils":6911,"../../../shared/modules/hexstring-utils":6914,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":213,"@metamask/controllers":1080,"@metamask/slip44":1360,"bignumber.js":2348,"ethereumjs-util":3195,"human-standard-token-abi":5075,luxon:5883,"punycode/punycode":6227},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.addHexPrefixToObjectValues=T,n.addressSummary=function(e,t=10,n=4,r=!0){if(!e)return"";let i=(0,p.toChecksumHexAddress)(e);r||(i=u.stripHexPrefix(i));return i?`${i.slice(0,t)}...${i.slice(i.length-n)}`:"..."},n.bnGreaterThan=function(e,t){if(null===e||e===undefined||null===t||t===undefined)return null;return new a.default(e,10).gt(t,10)},n.bnGreaterThanEqualTo=function(e,t){if(null===e||e===undefined||null===t||t===undefined)return null;return new a.default(e,10).gte(t,10)},n.bnLessThan=function(e,t){if(null===e||e===undefined||null===t||t===undefined)return null;return new a.default(e,10).lt(t,10)},n.bnLessThanEqualTo=function(e,t){if(null===e||e===undefined||null===t||t===undefined)return null;return new a.default(e,10).lte(t,10)},n.checkExistingAddresses=function(e,t=[]){if(!e)return!1;return t.some((t=>t.address.toLowerCase()===e.toLowerCase()))},n.clearClipboard=function(){window.navigator.clipboard.writeText("")},n.coinTypeToProtocolName=function(e){var t;if("1"===String(e))return"Test Networks";return(null===(t=d.default[e])||void 0===t?void 0:t.name)||undefined},n.constructTxParams=function({sendToken:e,data:t,to:n,amount:r,from:i,gas:s,gasPrice:o}){const a={data:t,from:i,value:"0",gas:s,gasPrice:o};e||(a.value=r,a.to=n);return T(a)},n.exportAsFile=function(e,t,n="text/csv"){e=e||k();const r=new window.Blob([t],{type:n});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(r,e);else{const t=window.document.createElement("a");t.target="_blank",t.href=window.URL.createObjectURL(r),t.download=e,document.body.appendChild(t),t.click(),document.body.removeChild(t)}},n.formatBalance=function(e,t,n=!0,r="ETH"){const i=n?w(e):e.split("."),s=i[0];let o=i[1],a="None";if(t===undefined)if("0"===s){if("0"!==o){const e=o.match(/^0*(.{2})/u);e&&(o=e[0]),a=`0.${o} ${r}`}}else a=`${s}.${o.slice(0,3)} ${r}`;else o+=Array(t).join("0"),a=`${s}.${o.slice(0,t)} ${r}`;return a},n.formatDate=function(e,t="M/d/y 'at' T"){if(!e)return"";return c.DateTime.fromMillis(e).toFormat(t)},n.formatDateWithYearContext=function(e,t="MMM d",n="MMM d, y"){if(!e)return"";const r=c.DateTime.fromMillis(e),i=c.DateTime.local();return r.toFormat(i.year===r.year?t:n)},n.getAccountByAddress=function(e=[],t){return e.find((({address:e})=>e===t))},n.getAssetImageURL=function(e,t){if(!e||!t||"string"!=typeof e)return"";if(e.startsWith("ipfs://"))return l.util.getFormattedIpfsUrl(t,e,!0);return e},n.getContractAtAddress=function(e){return global.eth.contract(o.default).at(e)},n.getRandomFileName=k,n.getURL=E,n.getURLHost=function(e){var t;return(null===(t=E(e))||void 0===t?void 0:t.host)||""},n.getURLHostName=function(e){var t;return(null===(t=E(e))||void 0===t?void 0:t.hostname)||""},n.isDefaultMetaMaskChain=function(e){if(!e||e===h.MAINNET_CHAIN_ID||e===h.ROPSTEN_CHAIN_ID||e===h.RINKEBY_CHAIN_ID||e===h.KOVAN_CHAIN_ID||e===h.GOERLI_CHAIN_ID||e===h.LOCALHOST_CHAIN_ID||e===h.MISES_CHAIN_ID)return!0;return!1},n.isExtensionUrl=function(e){const t=["chrome-extension:","moz-extension:"];if("string"==typeof e)for(const n of t)if(e.startsWith(n))return!0;if(null!=e&&e.protocol)return t.includes(e.protocol);return!1},n.isNullish=function(e){return null===e||e===undefined},n.isOriginContractAddress=function(e,t){if(!e||!t)return!1;return e.toLowerCase()===t.toLowerCase()},n.isValidDomainName=function(e){return null!==s.default.toASCII(e).toLowerCase().match(/^(?:[a-z0-9](?:[-a-z0-9]*[a-z0-9])?\.)+[a-z0-9][-a-z0-9]*[a-z0-9]$/u)},n.isValidMisesId=function(e){if(e.split("mises").length>1){return 39===e.split("mises")[1].length}return!1},n.numericBalance=_,n.parseBalance=w,n.roundToDecimalPlacesRemovingExtraZeroes=function(e,t){if(e===undefined||null===e)return"";return m.toBigNumber.dec(m.toBigNumber.dec(e).toFixed(t)).toNumber()},n.sanitizeMessage=void 0,n.shortenAddress=function(e="",t=g.TRUNCATED_ADDRESS_START_CHARS){if(e.length<g.TRUNCATED_NAME_CHAR_LIMIT)return e;return`${e.slice(0,t)}...${e.slice(-g.TRUNCATED_ADDRESS_END_CHARS)}`},n.stripHttpSchemes=function(e){return e.replace(/^https?:\/\//u,"")},n.stripHttpsScheme=S,n.stripHttpsSchemeWithoutPort=function(e){if(E(e).port)return e;return S(e)},n.toHumanReadableTime=void 0,n.toPrecisionWithoutTrailingZeros=function(e,t){return new a.default(e).toPrecision(t).replace(/(\.[0-9]*[1-9])0*|(\.0*)/u,"$1")},n.valuesFor=function(e){if(!e)return[];return Object.keys(e).map((function(t){return e[t]}))};var i=r(e("@babel/runtime/helpers/defineProperty")),s=r(e("punycode/punycode")),o=r(e("human-standard-token-abi")),a=r(e("bignumber.js")),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=e[s]}r.default=e,n&&n.set(e,r);return r}(e("ethereumjs-util")),c=e("luxon"),l=e("@metamask/controllers"),d=r(e("@metamask/slip44")),f=e("../../../app/scripts/lib/util"),h=e("../../../shared/constants/network"),p=e("../../../shared/modules/hexstring-utils"),g=e("../../../shared/constants/labels"),m=e("../../../shared/modules/conversion.utils");function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e){if(!e)return new u.BN(0,16);const t=u.stripHexPrefix(e);return new u.BN(t,16)}function w(e){let t;const n=_(e),r=n.toString(),i=r.length>18?r.slice(0,r.length-18):"0";return t=`000000000000000000${n}`.slice(-18).replace(/0+$/u,""),""===t&&(t="0"),[i,t]}function k(){let e="";const t=[..."abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"],n=Math.floor(7*Math.random()+6);for(let r=0;r<n;r++)e+=t[Math.floor(Math.random()*t.length)];return e}function S(e){return e.replace(/^https:\/\//u,"")}function T(e){return Object.keys(e).reduce(((t,n)=>b(b({},t),{},{[n]:(0,f.addHexPrefix)(e[n])})),{})}function E(e){try{return new URL(e)}catch(e){return""}}n.toHumanReadableTime=(e,t)=>{if(t===undefined||null===t)return"";const n=Math.ceil(t/1e3);return n<=90?e("gasTimingSecondsShort",[n]):n<=5400?e("gasTimingMinutesShort",[Math.ceil(n/60)]):e("gasTimingHoursShort",[Math.ceil(n/3600)])};const P=(e,t,n)=>{if(!n)throw new Error("Invalid types definition");const r=n[t];if(!r)throw new Error("Invalid primary type definition");const i={};return Object.keys(e).forEach((t=>{const s=Object.values(r).find((e=>e.name===t));if(!s)return;const o=s.type.replace(/\[\]$/u,"");if(n[o])s.type.endsWith("[]")>0?i[t]=e[t].map((e=>P(e,o,n))):i[t]=P(e[t],s.type,n);else{(()=>{const e=Array.from(new Array(32)).map(((e,t)=>"int"+8*(t+1))),t=Array.from(new Array(32)).map(((e,t)=>"uint"+8*(t+1))),n=Array.from(new Array(32)).map(((e,t)=>`bytes${t+1}`)),r=Array.from(new Array(32)).map(((e,t)=>"fixed"+8*(t+1))),i=Array.from(new Array(32)).map(((e,t)=>"ufixed"+8*(t+1))),s=Array.from(new Array(80)).map(((e,t)=>r.map((e=>`${e}x${t+1}`)))),o=Array.from(new Array(80)).map(((e,t)=>i.map((e=>`${e}x${t+1}`))));return["bool","address","string","bytes","int","uint","fixed","ufixed",...e,...t,...n,...s.flat(),...o.flat()]})().includes(o)&&(i[t]=e[t])}})),i};n.sanitizeMessage=P}}},{package:"<root>",file:"/Users/mac/code/a-mises/metamask-extension/ui/helpers/utils/util.js"}],[6227,{},function(){with(this)return function(){"use strict";return function(e,t,n){const r=2147483647,i=36,s=/^xn--/,o=/[^\0-\x7E]/,a=/[\x2E\u3002\uFF0E\uFF61]/g,u={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},c=Math.floor,l=String.fromCharCode;function d(e){throw new RangeError(u[e])}function f(e,t){const n=e.split("@");let r="";n.length>1&&(r=n[0]+"@",e=n[1]);const i=function(e,t){const n=[];let r=e.length;for(;r--;)n[r]=t(e[r]);return n}((e=e.replace(a,".")).split("."),t).join(".");return r+i}function h(e){const t=[];let n=0;const r=e.length;for(;n<r;){const i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){const r=e.charCodeAt(n++);56320==(64512&r)?t.push(((1023&i)<<10)+(1023&r)+65536):(t.push(i),n--)}else t.push(i)}return t}const p=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},g=function(e,t,n){let r=0;for(e=n?c(e/700):e>>1,e+=c(e/t);e>455;r+=i)e=c(e/35);return c(r+36*e/(e+38))},m=function(e){const t=[],n=e.length;let s=0,o=128,a=72,u=e.lastIndexOf("-");u<0&&(u=0);for(let n=0;n<u;++n)e.charCodeAt(n)>=128&&d("not-basic"),t.push(e.charCodeAt(n));for(let f=u>0?u+1:0;f<n;){let u=s;for(let t=1,o=i;;o+=i){f>=n&&d("invalid-input");const u=(l=e.charCodeAt(f++))-48<10?l-22:l-65<26?l-65:l-97<26?l-97:i;(u>=i||u>c((r-s)/t))&&d("overflow"),s+=u*t;const h=o<=a?1:o>=a+26?26:o-a;if(u<h)break;const p=i-h;t>c(r/p)&&d("overflow"),t*=p}const h=t.length+1;a=g(s-u,h,0==u),c(s/h)>r-o&&d("overflow"),o+=c(s/h),s%=h,t.splice(s++,0,o)}var l;return String.fromCodePoint(...t)},y=function(e){const t=[];let n=(e=h(e)).length,s=128,o=0,a=72;for(const n of e)n<128&&t.push(l(n));let u=t.length,f=u;for(u&&t.push("-");f<n;){let n=r;for(const t of e)t>=s&&t<n&&(n=t);const h=f+1;n-s>c((r-o)/h)&&d("overflow"),o+=(n-s)*h,s=n;for(const n of e)if(n<s&&++o>r&&d("overflow"),n==s){let e=o;for(let n=i;;n+=i){const r=n<=a?1:n>=a+26?26:n-a;if(e<r)break;const s=e-r,o=i-r;t.push(l(p(r+s%o,0))),e=c(s/o)}t.push(l(p(e,0))),a=g(o,h,f==u),o=0,++f}++o,++s}return t.join("")},v={version:"2.1.0",ucs2:{decode:h,encode:e=>String.fromCodePoint(...e)},decode:m,encode:y,toASCII:function(e){return f(e,(function(e){return o.test(e)?"xn--"+y(e):e}))},toUnicode:function(e){return f(e,(function(e){return s.test(e)?m(e.slice(4).toLowerCase()):e}))}};t.exports=v}}},{package:"punycode",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/punycode/punycode.js"}],[6900,{"../../ui/pages/send/send.constants":7716,"ethereumjs-util":3195},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.PRIORITY_LEVELS=n.NETWORK_CONGESTION_THRESHOLDS=n.GAS_RECOMMENDATIONS=n.GAS_LIMITS=n.GAS_ESTIMATE_TYPES=n.EDIT_GAS_MODES=n.CUSTOM_GAS_ESTIMATE=void 0;var r=e("ethereumjs-util"),i=e("../../ui/pages/send/send.constants");const s={SIMPLE:(0,r.addHexPrefix)(i.MIN_GAS_LIMIT_HEX),BASE_TOKEN_ESTIMATE:(0,r.addHexPrefix)(1e5.toString(16))};n.GAS_LIMITS=s;n.GAS_ESTIMATE_TYPES={FEE_MARKET:"fee-market",LEGACY:"legacy",ETH_GASPRICE:"eth_gasPrice",NONE:"none"};n.GAS_RECOMMENDATIONS={LOW:"low",MEDIUM:"medium",HIGH:"high"};n.PRIORITY_LEVELS={TEN_PERCENT_INCREASED:"tenPercentIncreased",LOW:"low",MEDIUM:"medium",HIGH:"high",CUSTOM:"custom",DAPP_SUGGESTED:"dappSuggested"};n.CUSTOM_GAS_ESTIMATE="custom";n.EDIT_GAS_MODES={SPEED_UP:"speed-up",CANCEL:"cancel",MODIFY_IN_PLACE:"modify-in-place",SWAPS:"swaps"};n.NETWORK_CONGESTION_THRESHOLDS={NOT_BUSY:0,STABLE:.33,BUSY:.66}}}},{package:"<root>",file:"/Users/mac/code/a-mises/metamask-extension/shared/constants/gas.js"}],[7829,{"../../../shared/constants/network":6904,"../../../shared/constants/swaps":6906,"../../../shared/constants/time":6907,"../../../shared/constants/transaction":6908,"../../../shared/modules/conversion.utils":6911,"../../../shared/modules/hexstring-utils":6914,"../../../shared/modules/swaps.utils":6919,"../../helpers/utils/confirm-tx.util":7458,"../../helpers/utils/conversions.util":7459,"../../helpers/utils/fetch-with-cache":7460,"../../helpers/utils/token-util":7475,"../../helpers/utils/util":7478,"../send/send.utils":7718,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":213,"bignumber.js":2348,"human-standard-token-abi":5075,loglevel:5876},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.countDecimals=void 0,n.fetchAggregatorMetadata=async function(e){const t=A("aggregatorMetadata",e),n=await(0,v.default)(t,{method:"GET",headers:E},{cacheRefreshTime:S}),r={};for(const e in n)B(N,n[e],t)&&(r[e]=n[e]);return r},n.fetchSwapsFeatureFlags=async function(){const e=u.SWAPS_API_V2_BASE_URL;return await(0,v.default)(`${e}/featureFlags`,{method:"GET",headers:E},{cacheRefreshTime:6e5})},n.fetchSwapsGasPrices=async function(e){const t=A("gasPrices",e),n=await(0,v.default)(t,{method:"GET",headers:E},{cacheRefreshTime:3e4});if(!B(D,n,t))throw new Error(`${t} response is invalid`);const{SafeGasPrice:r,ProposeGasPrice:i,FastGasPrice:s}=n;return{safeLow:r,average:i,fast:s}},n.fetchToken=async function(e,t){const n=A("token",t);return await(0,v.default)(`${n}?address=${e}`,{method:"GET",headers:E},{cacheRefreshTime:S})},n.fetchTokenBalance=async function(e,t){const n=global.eth.contract(a.default).at(e),r=n?n.balanceOf(t):Promise.resolve();return await r},n.fetchTokenPrice=async function(e){var t;const n=`contract_addresses=${e}&vs_currencies=eth`,r=await(0,v.default)(`https://api.coingecko.com/api/v3/simple/token_price/ethereum?${n}`,{method:"GET"},{cacheRefreshTime:6e4});return r&&(null===(t=r[e])||void 0===t?void 0:t.eth)},n.fetchTokens=async function(e){const t=A("tokens",e),n=await(0,v.default)(t,{method:"GET",headers:E},{cacheRefreshTime:S});return[u.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e],...n.filter((n=>B(j,n,t)&&!((0,l.isSwapsDefaultTokenSymbol)(n.symbol,e)||(0,l.isSwapsDefaultTokenAddress)(n.address,e))))]},n.fetchTopAssets=async function(e){const t=A("topAssets",e),n=await(0,v.default)(t,{method:"GET",headers:E},{cacheRefreshTime:S});return n.reduce(((e,n,r)=>B(I,n,t)?k(k({},e),{},{[n.address]:{index:String(r)}}):e),{})},n.fetchTradesInfo=async function({slippage:e,sourceToken:t,sourceDecimals:n,destinationToken:r,value:i,fromAddress:s,exchangeList:o},{chainId:a}){const u={destinationToken:r,sourceToken:t,sourceAmount:(0,h.calcTokenValue)(i,n).toString(10),slippage:e,timeout:10*f.SECOND,walletAddress:s};o&&(u.exchangeList=o);U(a,t,r)&&(u.enableDirectWrapping=!0);const c=new URLSearchParams(u).toString(),l=`${A("trade",a)}${c}`,d=await(0,v.default)(l,{method:"GET",headers:E},{cacheRefreshTime:0,timeout:15*f.SECOND});return d.reduce(((t,n)=>{if(n.trade&&!n.error&&B(M,n,l)){const r=(0,p.constructTxParams)({to:n.trade.to,from:n.trade.from,data:n.trade.data,amount:(0,g.decimalToHex)(n.trade.value),gas:(0,g.decimalToHex)(n.maxGas)});let{approvalNeeded:i}=n;return i&&(i=(0,p.constructTxParams)(k({},i))),k(k({},t),{},{[n.aggregator]:k(k({},n),{},{slippage:e,trade:r,approvalNeeded:i})})}return t}),{})},n.formatSwapsValueForDisplay=H,n.getNetworkNameByChainId=n.getFeeForSmartTransaction=n.getBaseApi=void 0,n.getRenderableNetworkFeesForQuote=L,n.getSwapsLivenessForNetwork=void 0,n.getSwapsTokensReceivedFromTxMeta=function(e,t,n,r,i,s,a){var u;const d=null==t?void 0:t.txReceipt,f=(null==t||null===(u=t.txReceipt)||void 0===u?void 0:u.type)===c.TRANSACTION_ENVELOPE_TYPES.FEE_MARKET;if((0,l.isSwapsDefaultTokenSymbol)(e,a)){if(!(d&&t&&t.postTxBalance&&t.preTxBalance))return null;let e="0x0";s&&s.txReceipt&&(e=(0,b.calcGasTotal)(s.txReceipt.gasUsed,f?s.txReceipt.effectiveGasPrice:s.txParams.gasPrice));const n=(0,b.calcGasTotal)(d.gasUsed,f?d.effectiveGasPrice:t.txParams.gasPrice),r=new o.default(n,16).plus(e,16).toString(16),i=(0,m.subtractCurrencies)(t.preTxBalance,r,{aBase:16,bBase:16,toNumericBase:"hex"});return(0,m.subtractCurrencies)(t.postTxBalance,i,{aBase:16,bBase:16,fromDenomination:"WEI",toDenomination:"ETH",toNumericBase:"dec",numberOfDecimals:6})}const g=null==d?void 0:d.logs;if(g&&"0x0"!==(null==d?void 0:d.status)){const e=g.find((e=>{const t=e.topics&&"0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef"===e.topics[0],i=e.address===n,s=e.topics&&e.topics[2]&&e.topics[2].match(r.slice(2));return t&&i&&s}));return e?(0,p.toPrecisionWithoutTrailingZeros)((0,h.calcTokenAmount)(e.data,i).toString(10),6):""}return null},n.parseSmartTransactionsError=n.isContractAddressValid=n.getTranslatedStxErrorMessage=void 0,n.quotesToRenderableData=function(e,t,n,r,i,s,a,u,c){return Object.values(e).map((e=>{const{destinationAmount:d=0,sourceAmount:f=0,sourceTokenInfo:p,destinationTokenInfo:m,slippage:y,aggType:v,aggregator:b,gasEstimateWithRefund:_,averageGas:w,fee:k,trade:S}=e,T=(0,h.calcTokenAmount)(f,p.decimals).toString(10),E=(0,h.calcTokenAmount)(d,m.decimals).toPrecision(8);let P=null,A=null,O=null,C=null;({feeInFiat:P,feeInEth:A,rawNetworkFees:O,rawEthFee:C}=L({tradeGas:_||(0,g.decimalToHex)(w||8e5),approveGas:i,gasPrice:t,currentCurrency:r,conversionRate:n,tradeValue:S.value,sourceSymbol:p.symbol,sourceAmount:f,chainId:a})),u&&({feeInFiat:P,feeInEth:A}=F({chainId:a,currentCurrency:r,conversionRate:n,nativeCurrencySymbol:c,estimatedFeeInWeiDec:u.feeEstimate}));const x=new o.default(100-y).div(100),M=new o.default(E).times(x).toFixed(6),j=s[m.address],I=(0,l.isSwapsDefaultTokenSymbol)(m.symbol,a)?(0,h.calcTokenAmount)(d,m.decimals).minus(C,10):new o.default(j||0,10).times((0,h.calcTokenAmount)(d,m.decimals),10).minus(C,10);let N,R=y;return"AGG"===v?N="swapAggregator":"RFQ"===v?(N="swapRequestForQuotation",R=0):N="DEX"===v?"swapDecentralizedExchange":"CONTRACT"===v?"swapDirectContract":"swapUnknown",{aggId:b,amountReceiving:`${E} ${m.symbol}`,destinationTokenDecimals:m.decimals,destinationTokenSymbol:m.symbol,destinationTokenValue:H(E),destinationIconUrl:m.iconUrl,isBestQuote:e.isBestQuote,liquiditySourceKey:N,feeInEth:A,detailedNetworkFees:`${A} (${P})`,networkFees:P,quoteSource:v,rawNetworkFees:O,slippage:R,sourceTokenDecimals:p.decimals,sourceTokenSymbol:p.symbol,sourceTokenValue:T,sourceTokenIconUrl:p.iconUrl,ethValueOfTrade:I,minimumAmountReceived:M,metaMaskFee:k}}))},n.stxErrorTypes=n.showRemainingTimeInMinAndSec=n.shouldEnableDirectWrapping=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),s=r(e("loglevel")),o=r(e("bignumber.js")),a=r(e("human-standard-token-abi")),u=e("../../../shared/constants/swaps"),c=e("../../../shared/constants/transaction"),l=e("../../../shared/modules/swaps.utils"),d=e("../../../shared/constants/network"),f=e("../../../shared/constants/time"),h=e("../../helpers/utils/token-util"),p=e("../../helpers/utils/util"),g=e("../../helpers/utils/conversions.util"),m=e("../../../shared/modules/conversion.utils"),y=e("../../helpers/utils/confirm-tx.util"),v=r(e("../../helpers/utils/fetch-with-cache")),b=e("../send/send.utils"),_=e("../../../shared/modules/hexstring-utils");function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const S=3e5,T="usd",E={"X-Client-Id":u.SWAPS_CLIENT_ID},P=[d.RINKEBY_CHAIN_ID,d.LOCALHOST_CHAIN_ID],A=function(e,t=d.MAINNET_CHAIN_ID){const n=((e,t)=>{const n=u.SWAPS_API_V2_BASE_URL,r=u.GAS_API_BASE_URL;if(["refreshTime"].includes(e))return n;const i=t&&parseInt(t,16);return["gasPrices"].includes(e)?`${r}/networks/${i}`:`${n}/networks/${i}`})(e,t=P.includes(t)?d.MAINNET_CHAIN_ID:t),r=t&&parseInt(t,16);if(!n)throw new Error(`Swaps API calls are disabled for chainId: ${t}`);switch(e){case"trade":return`${n}/trades?`;case"tokens":return`${n}/tokens`;case"token":return`${n}/token`;case"topAssets":return`${n}/topAssets`;case"aggregatorMetadata":return`${n}/aggregatorMetadata`;case"gasPrices":return`${n}/gasPrices`;case"network":return`${u.SWAPS_API_V2_BASE_URL}/networks/${r}`;default:throw new Error("getBaseApi requires an api call type")}};n.getBaseApi=A;const O=e=>Boolean(null==e?void 0:e.match(/^0x[a-f0-9]+$/u)),C=e=>Boolean(null==e?void 0:e.length),x=e=>C(e)&&Boolean(e.match(/^\d+$/u)),M=[{property:"trade",type:"object",validator:e=>e&&O(e.data)&&(0,_.isValidHexAddress)(e.to,{allowNonPrefixed:!1})&&(0,_.isValidHexAddress)(e.from,{allowNonPrefixed:!1})&&C(e.value)},{property:"approvalNeeded",type:"object",validator:e=>null===e||e&&O(e.data)&&(0,_.isValidHexAddress)(e.to,{allowNonPrefixed:!1})&&(0,_.isValidHexAddress)(e.from,{allowNonPrefixed:!1})},{property:"sourceAmount",type:"string",validator:x},{property:"destinationAmount",type:"string",validator:x},{property:"sourceToken",type:"string",validator:e=>(0,_.isValidHexAddress)(e,{allowNonPrefixed:!1})},{property:"destinationToken",type:"string",validator:e=>(0,_.isValidHexAddress)(e,{allowNonPrefixed:!1})},{property:"aggregator",type:"string",validator:C},{property:"aggType",type:"string",validator:C},{property:"error",type:"object",validator:e=>null===e||"object"==typeof e},{property:"averageGas",type:"number"},{property:"maxGas",type:"number"},{property:"gasEstimate",type:"number|undefined",validator:e=>e===undefined||e>0},{property:"fee",type:"number"}],j=[{property:"address",type:"string",validator:e=>(0,_.isValidHexAddress)(e,{allowNonPrefixed:!1})},{property:"symbol",type:"string",validator:e=>C(e)&&e.length<=12},{property:"decimals",type:"string|number",validator:e=>Number(e)>=0&&Number(e)<=36}],I=j.slice(0,2),N=[{property:"color",type:"string",validator:e=>Boolean(e.match(/^#[A-Fa-f0-9]+$/u))},{property:"title",type:"string",validator:C},{property:"icon",type:"string",validator:e=>Boolean(e.match(/^data:image/u))}],R=e=>!isNaN(e)&&e.match(/^[.0-9]+$/u)&&!isNaN(parseFloat(e)),D=[{property:"SafeGasPrice",type:"string",validator:R},{property:"ProposeGasPrice",type:"string",validator:R},{property:"FastGasPrice",type:"string",validator:R}];function B(e,t,n){return e.every((({property:e,type:r,validator:i})=>{const o=r.split("|").some((n=>typeof t[e]===n))&&(!i||i(t[e]));return o||s.default.error(`response to GET ${n} invalid for property ${e}; value was:`,t[e],"| type was: ",typeof t[e]),o}))}const U=(e,t,n)=>{var r;if(!t||!n)return!1;const i=u.SWAPS_WRAPPED_TOKENS_ADDRESSES[e],s=null===(r=u.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e])||void 0===r?void 0:r.address,o=t.toLowerCase(),a=n.toLowerCase();return o===i&&a===s||o===s&&a===i};n.shouldEnableDirectWrapping=U;const F=({chainId:e,currentCurrency:t,conversionRate:n,nativeCurrencySymbol:r,feeInWeiDec:i})=>{const s=(0,g.decimalToHex)(i),o=(0,g.getValueFromWeiHex)({value:s,toDenomination:d.ETH_SYMBOL,numberOfDecimals:5}),a=(0,g.getValueFromWeiHex)({value:s,toCurrency:t,conversionRate:n,numberOfDecimals:2});let c;c=t===T?a:(0,g.getValueFromWeiHex)({value:s,toCurrency:T,conversionRate:n,numberOfDecimals:2});return{feeInUsd:c,feeInFiat:(0,y.formatCurrency)(a,t),feeInEth:`${o} ${r||u.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e].symbol}`,rawEthFee:o}};function L({tradeGas:e,approveGas:t,gasPrice:n,currentCurrency:r,conversionRate:i,tradeValue:s,sourceSymbol:a,sourceAmount:c,chainId:d,nativeCurrencySymbol:f}){const h=new o.default(e||"0x0",16).plus(t||"0x0",16).toString(16),p=(0,b.calcGasTotal)(h,n),m=new o.default(s,16).minus((0,l.isSwapsDefaultTokenSymbol)(a,d)?c:0,10).toString(16),v=new o.default(p,16).plus(m,16).toString(16),_=(0,g.getValueFromWeiHex)({value:v,toDenomination:"ETH",numberOfDecimals:5}),w=(0,g.getValueFromWeiHex)({value:v,toCurrency:r,conversionRate:i,numberOfDecimals:2}),k=(0,y.formatCurrency)(w,r);let S;S=r===T?w:(0,g.getValueFromWeiHex)({value:v,toCurrency:T,conversionRate:i,numberOfDecimals:2});return{rawNetworkFees:w,feeInUsd:S,rawEthFee:_,feeInFiat:k,feeInEth:`${_} ${f||u.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[d].symbol}`,nonGasFee:m}}function H(e){let t=(0,p.toPrecisionWithoutTrailingZeros)(e,12);return t.match(/e[+-]/u)&&(t=new o.default(t).toFixed()),t}n.getFeeForSmartTransaction=F;n.isContractAddressValid=(e,t=d.MAINNET_CHAIN_ID)=>!(!e||!u.ALLOWED_CONTRACT_ADDRESSES[t])&&u.ALLOWED_CONTRACT_ADDRESSES[t].some((t=>e.toLowerCase()===t.toLowerCase()));const G=e=>{switch(e){case d.MAINNET_CHAIN_ID:return u.ETHEREUM;case d.BSC_CHAIN_ID:return u.BSC;case d.POLYGON_CHAIN_ID:return u.POLYGON;case d.RINKEBY_CHAIN_ID:return u.RINKEBY;case d.AVALANCHE_CHAIN_ID:return u.AVALANCHE;default:return""}};n.getNetworkNameByChainId=G;n.getSwapsLivenessForNetwork=(e={},t)=>{const n=G(t);if([d.LOCALHOST_CHAIN_ID,d.RINKEBY_CHAIN_ID].includes(t))return{swapsFeatureIsLive:!0};if(!e[n])return{swapsFeatureIsLive:!1};return e[n].extension_active?{swapsFeatureIsLive:!0}:{swapsFeatureIsLive:e[n].fallback_to_v1}};n.countDecimals=e=>{var t;return e&&Math.floor(e)!==e&&(null===(t=e.toString().split(".")[1])||void 0===t?void 0:t.length)||0};n.showRemainingTimeInMinAndSec=e=>{if(!Number.isInteger(e))return"0:00";return`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`};const K={UNAVAILABLE:"unavailable",NOT_ENOUGH_FUNDS:"not_enough_funds",REGULAR_TX_PENDING:"regular_tx_pending"};n.stxErrorTypes=K;n.getTranslatedStxErrorMessage=(e,t)=>t(e===K.NOT_ENOUGH_FUNDS?"stxErrorNotEnoughFunds":"stxErrorUnavailable");n.parseSmartTransactionsError=e=>{const t=e.slice(12);return JSON.parse(t.trim())}}}},{package:"<root>",file:"/Users/mac/code/a-mises/metamask-extension/ui/pages/swaps/swaps.util.js"}],[7440,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.UNSENDABLE_ASSET_ERROR_KEY=n.TRANSACTION_NO_CONTRACT_ERROR_KEY=n.TRANSACTION_ERROR_KEY=n.INVALID_ASSET_TYPE=n.INSUFFICIENT_FUNDS_FOR_GAS_ERROR_KEY=n.INSUFFICIENT_FUNDS_ERROR_KEY=n.GAS_PRICE_FETCH_FAILURE_ERROR_KEY=n.GAS_PRICE_EXCESSIVE_ERROR_KEY=n.GAS_LIMIT_TOO_LOW_ERROR_KEY=n.ETH_GAS_PRICE_FETCH_WARNING_KEY=void 0;n.INSUFFICIENT_FUNDS_ERROR_KEY="insufficientFunds";n.GAS_LIMIT_TOO_LOW_ERROR_KEY="gasLimitTooLow";n.TRANSACTION_ERROR_KEY="transactionError";n.TRANSACTION_NO_CONTRACT_ERROR_KEY="transactionErrorNoContract";n.ETH_GAS_PRICE_FETCH_WARNING_KEY="ethGasPriceFetchWarning";n.GAS_PRICE_FETCH_FAILURE_ERROR_KEY="gasPriceFetchFailed";n.GAS_PRICE_EXCESSIVE_ERROR_KEY="gasPriceExcessive";n.UNSENDABLE_ASSET_ERROR_KEY="unsendableAsset";n.INSUFFICIENT_FUNDS_FOR_GAS_ERROR_KEY="insufficientFundsForGas";n.INVALID_ASSET_TYPE="invalidAssetType"}}},{package:"<root>",file:"/Users/mac/code/a-mises/metamask-extension/ui/helpers/constants/error-keys.js"}],[439,{"./chains":409,"./eips":425,"./hardforks":432,buffer:2478,"crc-32":2557,"ethereumjs-util":3195,events:2479},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__assign||function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.Hardfork=n.Chain=n.CustomChain=void 0;var a,u,c=e("events"),l=e("crc-32"),d=e("ethereumjs-util"),f=e("./chains"),h=e("./hardforks"),p=e("./eips");!function(e){e.PolygonMainnet="polygon-mainnet",e.PolygonMumbai="polygon-mumbai",e.ArbitrumRinkebyTestnet="arbitrum-rinkeby-testnet",e.xDaiChain="x-dai-chain"}(a=n.CustomChain||(n.CustomChain={})),function(e){e[e.Mainnet=1]="Mainnet",e[e.Ropsten=3]="Ropsten",e[e.Rinkeby=4]="Rinkeby",e[e.Kovan=42]="Kovan",e[e.Goerli=5]="Goerli",e[e.Calaveras=123]="Calaveras"}(n.Chain||(n.Chain={})),function(e){e.Chainstart="chainstart",e.Homestead="homestead",e.Dao="dao",e.TangerineWhistle="tangerineWhistle",e.SpuriousDragon="spuriousDragon",e.Byzantium="byzantium",e.Constantinople="constantinople",e.Petersburg="petersburg",e.Istanbul="istanbul",e.MuirGlacier="muirGlacier",e.Berlin="berlin",e.London="london"}(u=n.Hardfork||(n.Hardfork={}));var g=function(e){function n(t){var n,r,i=e.call(this)||this;return i._supportedHardforks=[],i._eips=[],i._customChains=null!==(n=t.customChains)&&void 0!==n?n:[],i._chainParams=i.setChain(t.chain),i.DEFAULT_HARDFORK=null!==(r=i._chainParams.defaultHardfork)&&void 0!==r?r:u.Istanbul,i._hardfork=i.DEFAULT_HARDFORK,t.supportedHardforks&&(i._supportedHardforks=t.supportedHardforks),t.hardfork&&i.setHardfork(t.hardfork),t.eips&&i.setEIPs(t.eips),i}return i(n,e),n.custom=function(e,t){var r;void 0===t&&(t={});var i=null!==(r=t.baseChain)&&void 0!==r?r:"mainnet",o=s({},n._getChainParams(i));if(o.name="custom-chain","string"!=typeof e)return new n(s({chain:s(s({},o),e)},t));if(e===a.PolygonMainnet)return n.custom({name:a.PolygonMainnet,chainId:137,networkId:137});if(e===a.PolygonMumbai)return n.custom({name:a.PolygonMumbai,chainId:80001,networkId:80001});if(e===a.ArbitrumRinkebyTestnet)return n.custom({name:a.ArbitrumRinkebyTestnet,chainId:421611,networkId:421611});if(e===a.xDaiChain)return n.custom({name:a.xDaiChain,chainId:100,networkId:100});throw new Error("Custom chain "+e+" not supported")},n.forCustomChain=function(e,t,r,i){var o=n._getChainParams(e);return new n({chain:s(s({},o),t),hardfork:r,supportedHardforks:i})},n.isSupportedChainId=function(e){var t=f._getInitializedChains();return Boolean(t.names[e.toString()])},n._getChainParams=function(e,t){var n=f._getInitializedChains(t);if("number"==typeof e||d.BN.isBN(e)){if(e=e.toString(),n.names[e])return n[n.names[e]];throw new Error("Chain with ID "+e+" not supported")}if(n[e])return n[e];throw new Error("Chain with name "+e+" not supported")},n.prototype.setChain=function(e){var t,r;if("number"==typeof e||"string"==typeof e||d.BN.isBN(e))this._chainParams=n._getChainParams(e,this._customChains);else{if("object"!=typeof e)throw new Error("Wrong input format");if(this._customChains.length>0)throw new Error("Chain must be a string, number, or BN when initialized with customChains passed in");try{for(var i=o(["networkId","genesis","hardforks","bootstrapNodes"]),s=i.next();!s.done;s=i.next()){var a=s.value;if(e[a]===undefined)throw new Error("Missing required chain parameter: "+a)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}this._chainParams=e}return this._chainParams},n.prototype.setHardfork=function(e){var t,n;if(!this._isSupportedHardfork(e))throw new Error("Hardfork "+e+" not set as supported in supportedHardforks");var r=!1;try{for(var i=o(h.hardforks),s=i.next();!s.done;s=i.next()){s.value[0]===e&&(this._hardfork!==e&&(this._hardfork=e,this.emit("hardforkChanged",e)),r=!0)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}if(!r)throw new Error("Hardfork with name "+e+" not supported")},n.prototype.getHardforkByBlockNumber=function(e){var t,n;e=d.toType(e,d.TypeOutput.BN);var r=u.Chainstart;try{for(var i=o(this.hardforks()),s=i.next();!s.done;s=i.next()){var a=s.value;null!==a.block&&(e.gte(new d.BN(a.block))&&(r=a.name))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},n.prototype.setHardforkByBlockNumber=function(e){e=d.toType(e,d.TypeOutput.BN);var t=this.getHardforkByBlockNumber(e);return this.setHardfork(t),t},n.prototype._chooseHardfork=function(e,t){if(void 0===t&&(t=!0),e){if(t&&!this._isSupportedHardfork(e))throw new Error("Hardfork "+e+" not set as supported in supportedHardforks")}else e=this._hardfork;return e},n.prototype._getHardfork=function(e){var t,n,r=this.hardforks();try{for(var i=o(r),s=i.next();!s.done;s=i.next()){var a=s.value;if(a.name===e)return a}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}throw new Error("Hardfork "+e+" not defined for chain "+this.chainName())},n.prototype._isSupportedHardfork=function(e){var t,n;if(!(this._supportedHardforks.length>0))return!0;try{for(var r=o(this._supportedHardforks),i=r.next();!i.done;i=r.next()){if(e===i.value)return!0}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return!1},n.prototype.setEIPs=function(e){var t,n,r=this;void 0===e&&(e=[]);var i=function(t){if(!(t in p.EIPs))throw new Error(t+" not supported");var n=s.gteHardfork(p.EIPs[t].minimumHardfork);if(!n)throw new Error(t+" cannot be activated on hardfork "+s.hardfork()+", minimumHardfork: "+n);p.EIPs[t].requiredEIPs&&p.EIPs[t].requiredEIPs.forEach((function(n){if(!e.includes(n)&&!r.isActivatedEIP(n))throw new Error(t+" requires EIP "+n+", but is not included in the EIP list")}))},s=this;try{for(var a=o(e),u=a.next();!u.done;u=a.next()){i(u.value)}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}this._eips=e},n.prototype.param=function(e,t){var n,r,i=null;try{for(var s=o(this._eips),a=s.next();!a.done;a=s.next()){var u=a.value;if(null!==(i=this.paramByEIP(e,t,u)))return i}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return this.paramByHardfork(e,t,this._hardfork)},n.prototype.paramByHardfork=function(e,t,n){var r,i,s,a;n=this._chooseHardfork(n);var u=null;try{for(var c=o(h.hardforks),l=c.next();!l.done;l=c.next()){var d=l.value;if(d[1].hasOwnProperty("eips")){var f=d[1].eips;try{for(var p=(s=void 0,o(f)),g=p.next();!g.done;g=p.next()){var m=g.value,y=this.paramByEIP(e,t,m);u=null!==y?y:u}}catch(e){s={error:e}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(s)throw s.error}}}else{if(!d[1][e])throw new Error("Topic "+e+" not defined");d[1][e][t]!==undefined&&(u=d[1][e][t].v)}if(d[0]===n)break}}catch(e){r={error:e}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return u},n.prototype.paramByEIP=function(e,t,n){if(!(n in p.EIPs))throw new Error(n+" not supported");var r=p.EIPs[n];if(!(e in r))throw new Error("Topic "+e+" not defined");return r[e][t]===undefined?null:r[e][t].v},n.prototype.paramByBlock=function(e,t,n){var r=this.activeHardforks(n),i=r[r.length-1].name;return this.paramByHardfork(e,t,i)},n.prototype.isActivatedEIP=function(e){var t,n;if(this.eips().includes(e))return!0;try{for(var r=o(h.hardforks),i=r.next();!i.done;i=r.next()){var s=i.value[1];if(this.gteHardfork(s.name)&&"eips"in s&&s.eips.includes(e))return!0}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return!1},n.prototype.hardforkIsActiveOnBlock=function(e,t,n){var r;void 0===n&&(n={}),t=d.toType(t,d.TypeOutput.BN);var i=null!==(r=n.onlySupported)&&void 0!==r&&r;e=this._chooseHardfork(e,i);var s=this.hardforkBlockBN(e);return!(!s||!t.gte(s))},n.prototype.activeOnBlock=function(e,t){return this.hardforkIsActiveOnBlock(null,e,t)},n.prototype.hardforkGteHardfork=function(e,t,n){var r,i;void 0===n&&(n={});var s,a=n.onlyActive!==undefined&&n.onlyActive;e=this._chooseHardfork(e,n.onlySupported),s=a?this.activeHardforks(null,n):this.hardforks();var u=-1,c=-1,l=0;try{for(var d=o(s),f=d.next();!f.done;f=d.next()){var h=f.value;h.name===e&&(u=l),h.name===t&&(c=l),l+=1}}catch(e){r={error:e}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}return u>=c&&-1!==c},n.prototype.gteHardfork=function(e,t){return this.hardforkGteHardfork(null,e,t)},n.prototype.hardforkIsActiveOnChain=function(e,t){var n,r,i;void 0===t&&(t={});var s=null!==(i=t.onlySupported)&&void 0!==i&&i;e=this._chooseHardfork(e,s);try{for(var a=o(this.hardforks()),u=a.next();!u.done;u=a.next()){var c=u.value;if(c.name===e&&null!==c.block)return!0}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return!1},n.prototype.activeHardforks=function(e,t){var n,r;void 0===t&&(t={});var i=[],s=this.hardforks();try{for(var a=o(s),u=a.next();!u.done;u=a.next()){var c=u.value;if(null!==c.block){if(e!==undefined&&null!==e&&e<c.block)break;t.onlySupported&&!this._isSupportedHardfork(c.name)||i.push(c)}}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return i},n.prototype.activeHardfork=function(e,t){void 0===t&&(t={});var n=this.activeHardforks(e,t);if(n.length>0)return n[n.length-1].name;throw new Error("No (supported) active hardfork found")},n.prototype.hardforkBlock=function(e){return d.toType(this.hardforkBlockBN(e),d.TypeOutput.Number)},n.prototype.hardforkBlockBN=function(e){return e=this._chooseHardfork(e,!1),new d.BN(this._getHardfork(e).block)},n.prototype.isHardforkBlock=function(e,t){return e=d.toType(e,d.TypeOutput.BN),t=this._chooseHardfork(t,!1),this.hardforkBlockBN(t).eq(e)},n.prototype.nextHardforkBlock=function(e){var t=this.nextHardforkBlockBN(e);return null===t?null:d.toType(t,d.TypeOutput.Number)},n.prototype.nextHardforkBlockBN=function(e){e=this._chooseHardfork(e,!1);var t=this.hardforkBlockBN(e);return this.hardforks().reduce((function(e,n){var r=new d.BN(n.block);return r.gt(t)&&null===e?r:e}),null)},n.prototype.isNextHardforkBlock=function(e,t){e=d.toType(e,d.TypeOutput.BN),t=this._chooseHardfork(t,!1);var n=this.nextHardforkBlockBN(t);return null!==n&&n.eq(e)},n.prototype._calcForkHash=function(e){var n,r,i=t.from(this.genesis().hash.substr(2),"hex"),s=t.alloc(0),a=0;try{for(var u=o(this.hardforks()),c=u.next();!c.done;c=u.next()){var f=c.value,h=f.block;if(0!==h&&null!==h&&h!==a){var p=t.from(h.toString(16).padStart(16,"0"),"hex");s=t.concat([s,p])}if(f.name===e)break;a=h}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}var g=t.concat([i,s]);return"0x"+d.intToBuffer(l.buf(g)>>>0).toString("hex")},n.prototype.forkHash=function(e){e=this._chooseHardfork(e,!1);var t=this._getHardfork(e);if(null===t.block){throw new Error("No fork hash calculation possible for non-applied or future hardfork")}return t.forkHash!==undefined?t.forkHash:this._calcForkHash(e)},n.prototype.hardforkForForkHash=function(e){var t=this.hardforks().filter((function(t){return t.forkHash===e}));return t.length>=1?t[t.length-1]:null},n.prototype.genesis=function(){return this._chainParams.genesis},n.prototype.hardforks=function(){return this._chainParams.hardforks},n.prototype.bootstrapNodes=function(){return this._chainParams.bootstrapNodes},n.prototype.dnsNetworks=function(){return this._chainParams.dnsNetworks},n.prototype.hardfork=function(){return this._hardfork},n.prototype.chainId=function(){return d.toType(this.chainIdBN(),d.TypeOutput.Number)},n.prototype.chainIdBN=function(){return new d.BN(this._chainParams.chainId)},n.prototype.chainName=function(){return this._chainParams.name},n.prototype.networkId=function(){return d.toType(this.networkIdBN(),d.TypeOutput.Number)},n.prototype.networkIdBN=function(){return new d.BN(this._chainParams.networkId)},n.prototype.eips=function(){return this._eips},n.prototype.consensusType=function(){return this._chainParams.consensus.type},n.prototype.consensusAlgorithm=function(){return this._chainParams.consensus.algorithm},n.prototype.consensusConfig=function(){return this._chainParams.consensus[this.consensusAlgorithm()]},n.prototype.copy=function(){return Object.assign(Object.create(Object.getPrototypeOf(this)),this)},n}(c.EventEmitter);n.default=g}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@ethereumjs/common",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@ethereumjs/common/dist.browser/index.js"}],[443,{"./eip1559Transaction":441,"./eip2930Transaction":442,"./legacyTransaction":444,"./transactionFactory":445,"./types":446},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0});var s=e("./legacyTransaction");Object.defineProperty(n,"Transaction",{enumerable:!0,get:function(){return s.default}});var o=e("./eip2930Transaction");Object.defineProperty(n,"AccessListEIP2930Transaction",{enumerable:!0,get:function(){return o.default}});var a=e("./transactionFactory");Object.defineProperty(n,"TransactionFactory",{enumerable:!0,get:function(){return a.default}});var u=e("./eip1559Transaction");Object.defineProperty(n,"FeeMarketEIP1559Transaction",{enumerable:!0,get:function(){return u.default}}),i(e("./types"),n)}}},{package:"@ethereumjs/tx",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@ethereumjs/tx/dist.browser/index.js"}],[7445,{"../../../shared/constants/transaction":6908,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":213},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.TRANSACTION_ENVELOPE_TYPE_NAMES=n.TOKEN_CATEGORY_HASH=n.PRIORITY_STATUS_HASH=n.PENDING_STATUS_HASH=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),s=e("../../../shared/constants/transaction");function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const u={[s.TRANSACTION_STATUSES.UNAPPROVED]:!0,[s.TRANSACTION_STATUSES.APPROVED]:!0,[s.TRANSACTION_STATUSES.SUBMITTED]:!0,[s.TRANSACTION_STATUSES.PENDING]:!0};n.PENDING_STATUS_HASH=u;const c=a(a({},u),{},{[s.TRANSACTION_STATUSES.CONFIRMED]:!0});n.PRIORITY_STATUS_HASH=c;const l={[s.TRANSACTION_TYPES.TOKEN_METHOD_APPROVE]:!0,[s.TRANSACTION_TYPES.TOKEN_METHOD_TRANSFER]:!0,[s.TRANSACTION_TYPES.TOKEN_METHOD_TRANSFER_FROM]:!0};n.TOKEN_CATEGORY_HASH=l;n.TRANSACTION_ENVELOPE_TYPE_NAMES={FEE_MARKET:"fee-market",LEGACY:"legacy"}}}},{package:"<root>",file:"/Users/mac/code/a-mises/metamask-extension/ui/helpers/constants/transactions.js"}],[6121,{},function(){with(this)return function(){"use strict";return function(e,t,n){const r=(e,t,n,r)=>function(...i){return new(0,t.promiseModule)(((s,o)=>{t.multiArgs?i.push(((...e)=>{t.errorFirst?e[0]?o(e):(e.shift(),s(e)):s(e)})):t.errorFirst?i.push(((e,t)=>{e?o(e):s(t)})):i.push(s);const a=this===n?r:this;Reflect.apply(e,a,i)}))},i=new WeakMap;t.exports=(e,t)=>{t={exclude:[/.+(?:Sync|Stream)$/],errorFirst:!0,promiseModule:Promise,...t};const n=typeof e;if(null===e||"object"!==n&&"function"!==n)throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${null===e?"null":n}\``);const s=new WeakMap,o=new Proxy(e,{apply(e,n,i){const a=s.get(e);if(a)return Reflect.apply(a,n,i);const u=t.excludeMain?e:r(e,t,o,e);return s.set(e,u),Reflect.apply(u,n,i)},get(e,n){const a=e[n];if(!((e,n)=>{let r=i.get(e);if(r||(r={},i.set(e,r)),n in r)return r[n];const s=e=>"string"==typeof e||"symbol"==typeof n?n===e:e.test(n),o=Reflect.getOwnPropertyDescriptor(e,n),a=o===undefined||o.writable||o.configurable,u=(t.include?t.include.some(s):!t.exclude.some(s))&&a;return r[n]=u,u})(e,n)||a===Function.prototype[n])return a;const u=s.get(a);if(u)return u;if("function"==typeof a){const n=r(a,t,o,e);return s.set(a,n),n}return a}});return o}}}},{package:"pify",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/pify/index.js"}],[6919,{"../constants/swaps":6906},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isSwapsDefaultTokenAddress=function(e,t){var n;if(!e||!t)return!1;return e===(null===(n=r.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[t])||void 0===n?void 0:n.address)},n.isSwapsDefaultTokenSymbol=function(e,t){var n;if(!e||!t)return!1;return e===(null===(n=r.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[t])||void 0===n?void 0:n.symbol)};var r=e("../constants/swaps")}}},{package:"<root>",file:"/Users/mac/code/a-mises/metamask-extension/shared/modules/swaps.utils.js"}],[5075,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"success",type:"bool"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"success",type:"bool"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint256"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"version",outputs:[{name:"",type:"string"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"success",type:"bool"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"},{name:"_extraData",type:"bytes"}],name:"approveAndCall",outputs:[{name:"success",type:"bool"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"remaining",type:"uint256"}],payable:!1,type:"function"},{inputs:[{name:"_initialAmount",type:"uint256"},{name:"_tokenName",type:"string"},{name:"_decimalUnits",type:"uint8"},{name:"_tokenSymbol",type:"string"}],type:"constructor"},{payable:!1,type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"_from",type:"address"},{indexed:!0,name:"_to",type:"address"},{indexed:!1,name:"_value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"_owner",type:"address"},{indexed:!0,name:"_spender",type:"address"},{indexed:!1,name:"_value",type:"uint256"}],name:"Approval",type:"event"}]}}},{package:"human-standard-token-abi",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/human-standard-token-abi/index.js"}],[7460,{"../../../shared/constants/time":6907,"../../../shared/modules/fetch-with-timeout":6912,"./storage-helpers":7473,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":213},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),s=e("../../../shared/constants/time"),o=r(e("../../../shared/modules/fetch-with-timeout")),a=e("./storage-helpers");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var c=async(e,t={},{cacheRefreshTime:n=6*s.MINUTE,timeout:r=30*s.SECOND}={})=>{if(t.body||t.method&&"GET"!==t.method)throw new Error("fetchWithCache only supports GET requests");if(t.headers instanceof window.Headers||(t.headers=new window.Headers(t.headers)),t.headers.has("Content-Type")&&"application/json"!==t.headers.get("Content-Type"))throw new Error("fetchWithCache only supports JSON responses");const c=Date.now(),l=`cachedFetch:${e}`,{cachedResponse:d,cachedTime:f}=await(0,a.getStorageItem)(l)||{};if(d&&c-f<n)return d;t.headers.set("Content-Type","application/json");const h=(0,o.default)(r),p=await h(e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({referrerPolicy:"no-referrer-when-downgrade",body:null,method:"GET",mode:"cors"},t));if(!p.ok)throw new Error(`Fetch failed with status '${p.status}': '${p.statusText}'`);const g=await p.json(),m={cachedResponse:g,cachedTime:c};return await(0,a.setStorageItem)(l,m),g};n.default=c}}},{package:"<root>",file:"/Users/mac/code/a-mises/metamask-extension/ui/helpers/utils/fetch-with-cache.js"}],[7718,{"../../../app/scripts/lib/util":99,"../../../shared/modules/conversion.utils":6911,"../../helpers/constants/common":7437,"../../helpers/utils/token-util":7475,"./send.constants":7716,"@babel/runtime/helpers/interopRequireDefault":213,"ethereumjs-abi":3175},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.addGasBuffer=function(e,t,n=1.5){const r=(0,s.multiplyCurrencies)(t,.9,{toNumericBase:"hex",multiplicandBase:16,multiplierBase:10,numberOfDecimals:"0"}),i=(0,s.multiplyCurrencies)(e,n,{toNumericBase:"hex",multiplicandBase:16,multiplierBase:10,numberOfDecimals:"0"});if((0,s.conversionGreaterThan)({value:e,fromNumericBase:"hex"},{value:r,fromNumericBase:"hex"}))return e;if((0,s.conversionLessThan)({value:i,fromNumericBase:"hex"},{value:r,fromNumericBase:"hex"}))return i;return r},n.calcGasTotal=function(e="0",t="0"){return(0,s.multiplyCurrencies)(e,t,{toNumericBase:"hex",multiplicandBase:16,multiplierBase:16})},n.ellipsify=function(e,t=6,n=4){return`${e.slice(0,t)}...${e.slice(-n)}`},n.generateERC20TransferData=l,n.generateERC721TransferData=d,n.getAssetTransferData=function({sendToken:e,fromAddress:t,toAddress:n,amount:r}){switch(e.standard){case u.ERC721:return d({toAddress:n,fromAddress:t,tokenId:e.tokenId});case u.ERC20:default:return l({toAddress:n,amount:r,sendToken:e})}},n.isBalanceSufficient=function({amount:e="0x0",balance:t="0x0",conversionRate:n=1,gasTotal:r="0x0",primaryCurrency:i}){const o=(0,s.addCurrencies)(e,r,{aBase:16,bBase:16,toNumericBase:"hex"});return(0,s.conversionGTE)({value:t,fromNumericBase:"hex",fromCurrency:i,conversionRate:n},{value:o,fromNumericBase:"hex",conversionRate:n,fromCurrency:i})},n.isTokenBalanceSufficient=function({amount:e="0x0",tokenBalance:t,decimals:n}){const r=(0,s.conversionUtil)(e,{fromNumericBase:"hex"});return(0,s.conversionGTE)({value:t,fromNumericBase:"hex"},{value:(0,o.calcTokenAmount)(r,n)})};var i=r(e("ethereumjs-abi")),s=e("../../../shared/modules/conversion.utils"),o=e("../../helpers/utils/token-util"),a=e("../../../app/scripts/lib/util"),u=e("../../helpers/constants/common"),c=e("./send.constants");function l({toAddress:e="0x0",amount:t="0x0",sendToken:n}){return n?c.TOKEN_TRANSFER_FUNCTION_SIGNATURE+Array.prototype.map.call(i.default.rawEncode(["address","uint256"],[e,(0,a.addHexPrefix)(t)]),(e=>`00${e.toString(16)}`.slice(-2))).join(""):undefined}function d({toAddress:e="0x0",fromAddress:t="0x0",tokenId:n}){return n?c.COLLECTIBLE_TRANSFER_FROM_FUNCTION_SIGNATURE+Array.prototype.map.call(i.default.rawEncode(["address","address","uint256"],[t,e,n]),(e=>`00${e.toString(16)}`.slice(-2))).join(""):undefined}}}},{package:"<root>",file:"/Users/mac/code/a-mises/metamask-extension/ui/pages/send/send.utils.js"}],[5406,{"whatwg-fetch":5407},function(){with(this)return function(){"use strict";return function(e,t,n){e("whatwg-fetch"),t.exports=self.fetch.bind(self)}}},{package:"isomorphic-fetch",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/isomorphic-fetch/fetch-npm-browserify.js"}],[6461,{"./lib":6463,"./lib/elliptic":6462},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=e("./lib")(e("./lib/elliptic"))}}},{package:"secp256k1",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/secp256k1/elliptic.js"}],[2592,{"browserify-cipher":2463,"browserify-sign":2470,"browserify-sign/algos":2467,"create-ecdh":2585,"create-hash":2586,"create-hmac":2588,"diffie-hellman":2949,pbkdf2:6107,"public-encrypt":6149,randombytes:6261,randomfill:6262},function(){with(this)return function(){"use strict";return function(e,t,n){n.randomBytes=n.rng=n.pseudoRandomBytes=n.prng=e("randombytes"),n.createHash=n.Hash=e("create-hash"),n.createHmac=n.Hmac=e("create-hmac");var r=e("browserify-sign/algos"),i=Object.keys(r),s=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(i);n.getHashes=function(){return s};var o=e("pbkdf2");n.pbkdf2=o.pbkdf2,n.pbkdf2Sync=o.pbkdf2Sync;var a=e("browserify-cipher");n.Cipher=a.Cipher,n.createCipher=a.createCipher,n.Cipheriv=a.Cipheriv,n.createCipheriv=a.createCipheriv,n.Decipher=a.Decipher,n.createDecipher=a.createDecipher,n.Decipheriv=a.Decipheriv,n.createDecipheriv=a.createDecipheriv,n.getCiphers=a.getCiphers,n.listCiphers=a.listCiphers;var u=e("diffie-hellman");n.DiffieHellmanGroup=u.DiffieHellmanGroup,n.createDiffieHellmanGroup=u.createDiffieHellmanGroup,n.getDiffieHellman=u.getDiffieHellman,n.createDiffieHellman=u.createDiffieHellman,n.DiffieHellman=u.DiffieHellman;var c=e("browserify-sign");n.createSign=c.createSign,n.Sign=c.Sign,n.createVerify=c.createVerify,n.Verify=c.Verify,n.createECDH=e("create-ecdh");var l=e("public-encrypt");n.publicEncrypt=l.publicEncrypt,n.privateEncrypt=l.privateEncrypt,n.publicDecrypt=l.publicDecrypt,n.privateDecrypt=l.privateDecrypt;var d=e("randomfill");n.randomFill=d.randomFill,n.randomFillSync=d.randomFillSync,n.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},n.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}}}},{package:"crypto-browserify",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/crypto-browserify/index.js"}],[6902,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TRUNCATED_NAME_CHAR_LIMIT=n.TRUNCATED_ADDRESS_START_CHARS=n.TRUNCATED_ADDRESS_END_CHARS=n.MISES_TRUNCATED_ADDRESS_START_CHARS=void 0;n.TRUNCATED_NAME_CHAR_LIMIT=11;n.TRUNCATED_ADDRESS_START_CHARS=5;n.TRUNCATED_ADDRESS_END_CHARS=4;n.MISES_TRUNCATED_ADDRESS_START_CHARS=8}}},{package:"<root>",file:"/Users/mac/code/a-mises/metamask-extension/shared/constants/labels.js"}],[6910,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.readAddressAsContract=void 0;n.readAddressAsContract=async(e,t)=>{let n;try{n=await e.getCode(t)}catch(e){n=null}return{contractCode:n,isContractAddress:n&&"0x"!==n&&"0x0"!==n}}}}},{package:"<root>",file:"/Users/mac/code/a-mises/metamask-extension/shared/modules/contract-utils.js"}],[1228,{"./abis/abiERC1155":1225,"./abis/abiERC20":1226,"./abis/abiERC721":1227},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.abiERC1155=n.abiERC721=n.abiERC20=void 0;const r=e("./abis/abiERC20");Object.defineProperty(n,"abiERC20",{enumerable:!0,get:function(){return r.abiERC20}});const i=e("./abis/abiERC721");Object.defineProperty(n,"abiERC721",{enumerable:!0,get:function(){return i.abiERC721}});const s=e("./abis/abiERC1155");Object.defineProperty(n,"abiERC1155",{enumerable:!0,get:function(){return s.abiERC1155}})}}},{package:"@metamask/metamask-eth-abis",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/metamask-eth-abis/dist/index.js"}],[6001,{"safe-event-emitter":6451,xtend:6886},function(){with(this)return function(){"use strict";return function(e,t,n){e("xtend");const r=e("safe-event-emitter");t.exports=class extends r{constructor(e={}){super(),this._state=e}getState(){return this._getState()}putState(e){this._putState(e),this.emit("update",e)}updateState(e){if(e&&"object"==typeof e){const t=this.getState(),n=Object.assign({},t,e);this.putState(n)}else this.putState(e)}subscribe(e){this.on("update",e)}unsubscribe(e){this.removeListener("update",e)}_getState(){return this._state}_putState(e){this._state=e}}}}},{package:"obs-store",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/obs-store/index.js"}],[2444,{"browserify-unibabel":2473},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("browserify-unibabel");function i(e,t){var n=JSON.stringify(t),i=r.utf8ToBuffer(n),s=global.crypto.getRandomValues(new Uint8Array(16));return global.crypto.subtle.encrypt({name:"AES-GCM",iv:s},e,i).then((function(e){var t=new Uint8Array(e),n=r.bufferToBase64(s);return{data:r.bufferToBase64(t),iv:n}}))}function s(e,t){const n=r.base64ToBuffer(t.data),i=r.base64ToBuffer(t.iv);return crypto.subtle.decrypt({name:"AES-GCM",iv:i},e,n).then((function(e){const t=new Uint8Array(e),n=r.bufferToUtf8(t);return JSON.parse(n)})).catch((function(e){throw new Error("Incorrect password")}))}function o(e,t){var n=r.utf8ToBuffer(e),i=r.base64ToBuffer(t);return global.crypto.subtle.importKey("raw",n,{name:"PBKDF2"},!1,["deriveBits","deriveKey"]).then((function(e){return global.crypto.subtle.deriveKey({name:"PBKDF2",salt:i,iterations:1e4,hash:"SHA-256"},e,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}))}function a(e){for(var t=e.toString(16);t.length<2;)t="0"+t;return t}function u(e=32){var t=new Uint8Array(e);return global.crypto.getRandomValues(t),btoa(String.fromCharCode.apply(null,t))}t.exports={encrypt:function(e,t){var n=u();return o(e,n).then((function(e){return i(e,t)})).then((function(e){return e.salt=n,JSON.stringify(e)}))},decrypt:function(e,t){const n=JSON.parse(t),r=n.salt;return o(e,r).then((function(e){return s(e,n)}))},keyFromPassword:o,encryptWithKey:i,decryptWithKey:s,serializeBufferForStorage:function(e){for(var t="0x",n=e.length||e.byteLength,r=0;r<n;r++)t+=a(e[r]);return t},serializeBufferFromStorage:function(e){for(var t="0x"===e.slice(0,2)?e.slice(2):e,n=new Uint8Array(t.length/2),r=0;r<t.length;r+=2){var i=t.substr(r,2);n[r/2]=parseInt(i,16)}return n},generateSalt:u}}}},{package:"browser-passworder",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/browser-passworder/index.js"}],[2349,{"./wordlists/chinese_simplified.json":2356,"./wordlists/chinese_traditional.json":2357,"./wordlists/english.json":2358,"./wordlists/french.json":2359,"./wordlists/italian.json":2360,"./wordlists/japanese.json":2361,"./wordlists/korean.json":2362,"./wordlists/spanish.json":2363,"create-hash":2586,pbkdf2:2350,randombytes:6261,"safe-buffer":6450,unorm:6711},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("safe-buffer").Buffer,i=e("create-hash"),s=e("pbkdf2").pbkdf2Sync,o=e("randombytes"),a=e("unorm"),u=e("./wordlists/chinese_simplified.json"),c=e("./wordlists/chinese_traditional.json"),l=e("./wordlists/english.json"),d=e("./wordlists/french.json"),f=e("./wordlists/italian.json"),h=e("./wordlists/japanese.json"),p=e("./wordlists/korean.json"),g=e("./wordlists/spanish.json"),m=l,y="Invalid mnemonic",v="Invalid entropy";function b(e,t,n){for(;e.length<n;)e=t+e;return e}function _(e){return parseInt(e,2)}function w(e){return e.map((function(e){return b(e.toString(2),"0",8)})).join("")}function k(e){var t=8*e.length/32,n=i("sha256").update(e).digest();return w([].slice.call(n)).slice(0,t)}function S(e,t){var n="string"==typeof e?r.from(a.nfkd(e),"utf8"):e,i=r.from(function(e){return"mnemonic"+(e||"")}(a.nfkd(t)),"utf8");return s(n,i,2048,64,"sha512")}function T(e,t){t=t||m;var n="string"==typeof e?r.from(a.nfkd(e),"utf8"):e,i=[],s=[];for(const e of n.values())32===e||12288===e?(i.push(r.from(s)),s=[]):s.push(e);if(i.push(r.from(s)),i.length%3!=0)throw new Error(y);var o=i.map((function(e){var n=t.indexOf(e.toString("utf8"));if(-1===n)throw new Error(y);return b(n.toString(2),"0",11)})).join(""),u=32*Math.floor(o.length/33),c=o.slice(0,u),l=o.slice(u),d=c.match(/(.{1,8})/g).map(_);if(d.length<16)throw new Error(v);if(d.length>32)throw new Error(v);if(d.length%4!=0)throw new Error(v);var f=r.from(d);if(k(f)!==l)throw new Error("Invalid mnemonic checksum");return f.toString("hex")}function E(e,t){if(r.isBuffer(e)||(e=r.from(e,"hex")),t=t||m,e.length<16)throw new TypeError(v);if(e.length>32)throw new TypeError(v);if(e.length%4!=0)throw new TypeError(v);var n=(w([].slice.call(e))+k(e)).match(/(.{1,11})/g).map((function(e){var n=_(e);return r.from(t[n],"utf8")})),i=n.reduce((function(e,t,r){var i=r<n.length-1;return e+t.length+(i?1:0)}),0),s=t===h?"":" ";return n.reduce((function(e,t,r){var i=r<n.length-1;return e.workingBuffer.set(t,e.offset),i&&e.workingBuffer.write(s,e.offset+t.length,s.length,"utf8"),{workingBuffer:e.workingBuffer,offset:e.offset+t.length+(i?1:0)}}),{workingBuffer:r.alloc(i),offset:0}).workingBuffer}t.exports={mnemonicToSeed:S,mnemonicToSeedHex:function(e,t){return S(e,t).toString("hex")},mnemonicToEntropy:T,entropyToMnemonic:E,generateMnemonic:function(e,t,n){if((e=e||128)%32!=0)throw new TypeError(v);return E((t=t||o)(e/8),n)},validateMnemonic:function(e,t){try{T(e,t)}catch(e){return console.log("could not validate mnemonic",e),!1}return!0},wordlists:{EN:l,JA:h,chinese_simplified:u,chinese_traditional:c,english:l,french:d,italian:f,japanese:h,korean:p,spanish:g}}}}},{package:"bip39",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/bip39/index.js"}],[3146,{buffer:2478,"eth-sig-util":3131,"ethereumjs-util":3195,"ethereumjs-wallet":3148,events:2479},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){const{EventEmitter:r}=e("events"),i=e("ethereumjs-wallet").default,s=e("ethereumjs-util"),o="Simple Key Pair",a=e("eth-sig-util");class u extends r{constructor(e){super(),this.type=o,this.wallets=[],this.deserialize(e)}serialize(){return Promise.resolve(this.wallets.map((e=>e.getPrivateKey().toString("hex"))))}deserialize(e=[]){return new Promise(((t,r)=>{try{this.wallets=e.map((e=>{const t=s.stripHexPrefix(e),r=n.from(t,"hex");return i.fromPrivateKey(r)}))}catch(e){r(e)}t()}))}addAccounts(e=1){const t=[];for(let n=0;n<e;n++)t.push(i.generate());this.wallets=this.wallets.concat(t);const n=t.map((e=>s.bufferToHex(e.getAddress())));return Promise.resolve(n)}getAccounts(){return Promise.resolve(this.wallets.map((e=>s.bufferToHex(e.getAddress()))))}signTransaction(e,t,n={}){const r=this.getPrivateKeyFor(e,n),i=t.sign(r);return Promise.resolve(i===undefined?t:i)}signMessage(e,t,r={}){const i=s.stripHexPrefix(t),o=this.getPrivateKeyFor(e,r),u=s.ecsign(n.from(i,"hex"),o),c=a.concatSig(u.v,u.r,u.s);return Promise.resolve(c)}newGethSignMessage(e,t,n={}){const r=this.getPrivateKeyFor(e,n),i=s.toBuffer(t),o=s.hashPersonalMessage(i),u=s.ecsign(o,r),c=a.concatSig(u.v,u.r,u.s);return Promise.resolve(c)}signPersonalMessage(e,t,r={}){const i=this.getPrivateKeyFor(e,r),s=n.from(i,"hex"),o=a.personalSign(s,{data:t});return Promise.resolve(o)}decryptMessage(e,t){const n=this._getWalletForAccount(e),r=s.stripHexPrefix(n.getPrivateKey()),i=a.decrypt(t,r);return Promise.resolve(i)}signTypedData(e,t,n={version:"V1"}){switch(n.version){default:return this.signTypedData_v1(e,t,n);case"V3":return this.signTypedData_v3(e,t,n);case"V4":return this.signTypedData_v4(e,t,n)}}signTypedData_v1(e,t,n={}){const r=this.getPrivateKeyFor(e,n),i=a.signTypedDataLegacy(r,{data:t});return Promise.resolve(i)}signTypedData_v3(e,t,n={}){const r=this.getPrivateKeyFor(e,n),i=a.signTypedData(r,{data:t});return Promise.resolve(i)}signTypedData_v4(e,t,n={}){const r=this.getPrivateKeyFor(e,n),i=a.signTypedData_v4(r,{data:t});return Promise.resolve(i)}getEncryptionPublicKey(e,t={}){const n=this.getPrivateKeyFor(e,t),r=a.getEncryptionPublicKey(n);return Promise.resolve(r)}getPrivateKeyFor(e,t={}){if(!e)throw new Error("Must specify address.");const n=this._getWalletForAccount(e,t);return s.toBuffer(n.getPrivateKey())}getAppKeyAddress(e,t){if(!t||"string"!=typeof t)throw new Error("'origin' must be a non-empty string");return new Promise(((n,r)=>{try{const r=this._getWalletForAccount(e,{withAppKeyOrigin:t});return n(a.normalize(r.getAddress().toString("hex")))}catch(e){return r(e)}}))}exportAccount(e,t={}){const n=this._getWalletForAccount(e,t);return Promise.resolve(n.getPrivateKey().toString("hex"))}removeAccount(e){if(!this.wallets.map((e=>s.bufferToHex(e.getAddress()).toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.wallets=this.wallets.filter((t=>s.bufferToHex(t.getAddress()).toLowerCase()!==e.toLowerCase()))}_getWalletForAccount(e,t={}){const r=a.normalize(e);let o=this.wallets.find((e=>s.bufferToHex(e.getAddress())===r));if(!o)throw new Error("Simple Keyring - Unable to find matching address.");if(t.withAppKeyOrigin){const e=o.getPrivateKey(),r=n.from(t.withAppKeyOrigin,"utf8"),a=n.concat([e,r]),u=s.keccak(a,256);o=i.fromPrivateKey(u)}return o}}u.type=o,t.exports=u}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"eth-simple-keyring",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/eth-simple-keyring/index.js"}],[3044,{bip39:2349,buffer:2478,"eth-sig-util":3131,"eth-simple-keyring":3146,"ethereumjs-wallet":3046},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){const{hdkey:r}=e("ethereumjs-wallet"),i=e("eth-simple-keyring"),s=e("bip39"),o=e("eth-sig-util"),a="HD Key Tree";class u extends i{constructor(e={}){super(),this.type=a,this.deserialize(e)}serialize(){const e="string"==typeof this.mnemonic?n.from(this.mnemonic,"utf8"):this.mnemonic;return Promise.resolve({mnemonic:Array.from(e.values()),numberOfAccounts:this.wallets.length,hdPath:this.hdPath})}deserialize(e={}){return this.opts=e||{},this.wallets=[],this.mnemonic=null,this.root=null,this.hdPath=e.hdPath||"m/44'/60'/0'/0",e.mnemonic&&this._initFromMnemonic(e.mnemonic),e.numberOfAccounts?this.addAccounts(e.numberOfAccounts):Promise.resolve([])}addAccounts(e=1){this.root||this._initFromMnemonic(s.generateMnemonic());const t=this.wallets.length,n=[];for(let r=t;r<e+t;r++){const e=this.root.deriveChild(r).getWallet();n.push(e),this.wallets.push(e)}const r=n.map((e=>o.normalize(e.getAddress().toString("hex"))));return Promise.resolve(r)}getAccounts(){return Promise.resolve(this.wallets.map((e=>o.normalize(e.getAddress().toString("hex")))))}_initFromMnemonic(e){"string"==typeof e?this.mnemonic=n.from(e,"utf8"):Array.isArray(e)?this.mnemonic=n.from(e):this.mnemonic=e;const t=s.mnemonicToSeed(this.mnemonic);this.hdWallet=r.fromMasterSeed(t),this.root=this.hdWallet.derivePath(this.hdPath)}}u.type=a,t.exports=u}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"eth-hd-keyring",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/eth-hd-keyring/index.js"}],[1050,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BaseController=void 0;class r{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,n=!0){if(n){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e in this.internalConfig)void 0!==this.internalConfig[e]&&(this[e]=this.internalConfig[e])}else for(const t in e)void 0!==this.internalConfig[t]&&(this.internalConfig[t]=e[t],this[t]=e[t])}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}}n.BaseController=r,n.default=r}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/controllers/dist/BaseController.js"}],[1053,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ControllerMessenger=n.RestrictedControllerMessenger=void 0;class r{constructor({controllerMessenger:e,name:t,allowedActions:n,allowedEvents:r}){this.controllerMessenger=e,this.controllerName=t,this.allowedActions=n||null,this.allowedEvents=r||null}registerActionHandler(e,t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed registering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.registerActionHandler(e,t)}unregisterActionHandler(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed unregistering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.unregisterActionHandler(e)}call(e,...t){if(null===this.allowedActions)throw new Error("No actions allowed");if(!this.allowedActions.includes(e))throw new Error(`Action missing from allow list: ${e}`);return this.controllerMessenger.call(e,...t)}publish(e,...t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed publishing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.publish(e,...t)}subscribe(e,t,n){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);return n?this.controllerMessenger.subscribe(e,t,n):this.controllerMessenger.subscribe(e,t)}unsubscribe(e,t){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);this.controllerMessenger.unsubscribe(e,t)}clearEventSubscriptions(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed clearing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.clearEventSubscriptions(e)}}n.RestrictedControllerMessenger=r;n.ControllerMessenger=class{constructor(){this.actions=new Map,this.events=new Map,this.eventPayloadCache=new Map}registerActionHandler(e,t){if(this.actions.has(e))throw new Error(`A handler for ${e} has already been registered`);this.actions.set(e,t)}unregisterActionHandler(e){this.actions.delete(e)}clearActions(){this.actions.clear()}call(e,...t){const n=this.actions.get(e);if(!n)throw new Error(`A handler for ${e} has not been registered`);return n(...t)}publish(e,...t){const n=this.events.get(e);if(n)for(const[e,r]of n.entries())if(r){const n=this.eventPayloadCache.get(e),i=r(...t);i!==n&&(this.eventPayloadCache.set(e,i),e(i,n))}else e(...t)}subscribe(e,t,n){let r=this.events.get(e);r||(r=new Map,this.events.set(e,r)),r.set(t,n)}unsubscribe(e,t){const n=this.events.get(e);if(!n||!n.has(t))throw new Error(`Subscription not found for event: ${e}`);n.get(t)&&this.eventPayloadCache.delete(t),n.delete(t)}clearEventSubscriptions(e){this.events.delete(e)}clearSubscriptions(){this.events.clear()}getRestricted({name:e,allowedActions:t,allowedEvents:n}){return new r({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:n})}}}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/controllers/dist/ControllerMessenger.js"}],[1052,{"./BaseController":1050},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ComposableController=void 0;const r=e("./BaseController");class i extends r.BaseController{constructor(e,t){super(undefined,e.reduce(((e,t)=>(e[t.name]=t.state,e)),{})),this.controllers=[],this.name="ComposableController",this.initialize(),this.controllers=e,this.messagingSystem=t,this.controllers.forEach((e=>{const{name:t}=e;if(e.subscribe!==undefined)e.subscribe((e=>{this.update({[t]:e})}));else{if(!this.messagingSystem)throw new Error("Messaging system required if any BaseControllerV2 controllers are used");this.messagingSystem.subscribe(`${t}:stateChange`,(e=>{this.update({[t]:e})}))}}))}get flatState(){let e={};for(const t of this.controllers)e=Object.assign(Object.assign({},e),t.state);return e}}n.ComposableController=i,n.default=i}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/controllers/dist/ComposableController.js"}],[1106,{"../BaseController":1050,"../util":1107},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.PreferencesController=void 0;const r=e("../BaseController"),i=e("../util");class s extends r.BaseController{constructor(e,t){super(e,t),this.name="PreferencesController",this.defaultState={featureFlags:{},frequentRpcList:[],identities:{},ipfsGateway:"https://ipfs.io/ipfs/",lostIdentities:{},selectedAddress:"",useStaticTokenList:!1,useCollectibleDetection:!1,openSeaEnabled:!1},this.initialize()}addIdentities(e){const{identities:t}=this.state;e.forEach((e=>{if(e=i.toChecksumHexAddress(e),t[e])return;const n=Object.keys(t).length;t[e]={name:`Account ${n+1}`,address:e,importTime:Date.now()}})),this.update({identities:Object.assign({},t)})}removeIdentity(e){e=i.toChecksumHexAddress(e);const{identities:t}=this.state;t[e]&&(delete t[e],this.update({identities:Object.assign({},t)}),e===this.state.selectedAddress&&this.update({selectedAddress:Object.keys(t)[0]}))}setAccountLabel(e,t){e=i.toChecksumHexAddress(e);const{identities:n}=this.state;n[e]=n[e]||{},n[e].name=t,this.update({identities:Object.assign({},n)})}setFeatureFlag(e,t){const n=this.state.featureFlags,r=Object.assign(Object.assign({},n),{[e]:t});this.update({featureFlags:Object.assign({},r)})}syncIdentities(e){e=e.map((e=>i.toChecksumHexAddress(e)));const{identities:t,lostIdentities:n}=this.state,r={};for(const n in t)-1===e.indexOf(n)&&(r[n]=t[n],delete t[n]);if(Object.keys(r).length>0)for(const e in r)n[e]=r[e];return this.update({identities:Object.assign({},t),lostIdentities:Object.assign({},n)}),this.addIdentities(e),-1===e.indexOf(this.state.selectedAddress)&&this.update({selectedAddress:e[0]}),this.state.selectedAddress}updateIdentities(e){e=e.map((e=>i.toChecksumHexAddress(e)));const t=this.state.identities,n=e.reduce(((e,n,r)=>(e[n]=t[n]||{address:n,name:`Account ${r+1}`,importTime:Date.now()},e)),{});let{selectedAddress:r}=this.state;Object.keys(n).includes(r)||(r=Object.keys(n)[0]),this.update({identities:Object.assign({},n),selectedAddress:r})}addToFrequentRpcList(e,t,n,r,i){const{frequentRpcList:s}=this.state,o=s.findIndex((({rpcUrl:t})=>t===e));-1!==o&&s.splice(o,1);const a={rpcUrl:e,chainId:t,ticker:n,nickname:r,rpcPrefs:i};s.push(a),this.update({frequentRpcList:[...s]})}removeFromFrequentRpcList(e){const{frequentRpcList:t}=this.state,n=t.findIndex((({rpcUrl:t})=>t===e));-1!==n&&t.splice(n,1),this.update({frequentRpcList:[...t]})}setSelectedAddress(e){this.update({selectedAddress:i.toChecksumHexAddress(e)})}setIpfsGateway(e){this.update({ipfsGateway:e})}setUseStaticTokenList(e){this.update({useStaticTokenList:e})}setUseCollectibleDetection(e){if(e&&!this.state.openSeaEnabled)throw new Error("useCollectibleDetection cannot be enabled if openSeaEnabled is false");this.update({useCollectibleDetection:e})}setOpenSeaEnabled(e){this.update({openSeaEnabled:e}),e||this.update({useCollectibleDetection:!1})}}n.PreferencesController=s,n.default=s}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/controllers/dist/user/PreferencesController.js"}],[1066,{"../BaseController":1050,"../constants":1071,"../util":1107},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{u(r.next(e))}catch(e){s(e)}}function a(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.TokenDetectionController=void 0;const i=e("../BaseController"),s=e("../util"),o=e("../constants");class a extends i.BaseController{constructor({onTokensStateChange:e,onPreferencesStateChange:t,onNetworkStateChange:n,getBalancesInSingleCall:r,addTokens:i,getTokenListState:s,getTokensState:a},u,c){super(u,c),this.name="TokenDetectionController",this.isMainnet=()=>this.config.networkType===o.MAINNET,this.defaultConfig={interval:18e4,networkType:o.MAINNET,selectedAddress:"",tokens:[]},this.initialize(),this.getTokensState=a,this.getTokenListState=s,this.addTokens=i,e((({tokens:e})=>{this.configure({tokens:e})})),t((({selectedAddress:e})=>{e!==this.config.selectedAddress&&(this.configure({selectedAddress:e}),this.detectTokens())})),n((({provider:e})=>{this.configure({networkType:e.type})})),this.getBalancesInSingleCall=r}start(){return r(this,void 0,void 0,(function*(){this.isMainnet()&&!this.disabled&&(yield this.startPolling())}))}stop(){this.stopPolling()}stopPolling(){this.intervalId&&clearInterval(this.intervalId)}startPolling(e){return r(this,void 0,void 0,(function*(){e&&this.configure({interval:e},!1,!1),this.stopPolling(),yield this.detectTokens(),this.intervalId=setInterval((()=>r(this,void 0,void 0,(function*(){yield this.detectTokens()}))),this.config.interval)}))}detectTokens(){return r(this,void 0,void 0,(function*(){if(!this.isMainnet()||this.disabled)return;const e=this.config.tokens.map((e=>e.address.toLowerCase())),{tokenList:t}=this.getTokenListState(),n=[];for(const r in t)e.includes(r)||n.push(r);const i=[];i[0]=n.slice(0,1e3),i[1]=n.slice(1e3,n.length-1);const{selectedAddress:o}=this.config;if(o)for(const e of i){if(0===e.length)break;yield s.safelyExecute((()=>r(this,void 0,void 0,(function*(){const n=yield this.getBalancesInSingleCall(o,e),r=[];for(const e in n){let n;const{ignoredTokens:i}=this.getTokensState();i.length&&(n=i.find((t=>t===s.toChecksumHexAddress(e))));const o=Object.keys(t).find((t=>t.toLowerCase()===e.toLowerCase()))||"";n===undefined&&r.push({address:e,decimals:t[o].decimals,symbol:t[o].symbol})}r.length&&(yield this.addTokens(r))}))))}}))}}n.TokenDetectionController=a,n.default=a}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/controllers/dist/assets/TokenDetectionController.js"}],[1059,{"../BaseController":1050,"../constants":1071,"../util":1107},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{u(r.next(e))}catch(e){s(e)}}function a(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.CollectibleDetectionController=void 0;const i=e("../BaseController"),s=e("../util"),o=e("../constants");class a extends i.BaseController{constructor({onPreferencesStateChange:e,onNetworkStateChange:t,getOpenSeaApiKey:n,addCollectible:r,getCollectiblesState:i},s,a){super(s,a),this.name="CollectibleDetectionController",this.isMainnet=()=>this.config.networkType===o.MAINNET,this.defaultConfig={interval:18e4,networkType:o.MAINNET,chainId:"1",selectedAddress:"",disabled:!0},this.initialize(),this.getCollectiblesState=i,e((({selectedAddress:e,useCollectibleDetection:t})=>{const{selectedAddress:n,disabled:r}=this.config;e===n&&!t===r||this.configure({selectedAddress:e,disabled:!t}),t!==undefined&&(t?this.start():this.stop())})),t((({provider:e})=>{this.configure({networkType:e.type,chainId:e.chainId})})),this.getOpenSeaApiKey=n,this.addCollectible=r}getOwnerCollectiblesApi(e,t){return`https://api.opensea.io/api/v1/assets?owner=${e}&offset=${t}&limit=50`}getOwnerCollectibles(e){var t;return r(this,void 0,void 0,(function*(){let n,r=[];const i=this.getOpenSeaApiKey();try{let o=0,a=!1;do{const u=this.getOwnerCollectiblesApi(e,o);n=yield s.timeoutFetch(u,i?{headers:{"X-API-KEY":i}}:{},15e3);const c=yield n.json();0!==(null===(t=c.assets)||void 0===t?void 0:t.length)?r=[...r,...c.assets]:a=!0,o+=50}while(!a)}catch(e){return[]}return r}))}start(){return r(this,void 0,void 0,(function*(){this.isMainnet()&&!this.disabled&&(yield this.startPolling())}))}stop(){this.stopPolling()}stopPolling(){this.intervalId&&clearInterval(this.intervalId)}startPolling(e){return r(this,void 0,void 0,(function*(){e&&this.configure({interval:e},!1,!1),this.stopPolling(),yield this.detectCollectibles(),this.intervalId=setInterval((()=>r(this,void 0,void 0,(function*(){yield this.detectCollectibles()}))),this.config.interval)}))}detectCollectibles(){return r(this,void 0,void 0,(function*(){if(!this.isMainnet()||this.disabled)return;const{selectedAddress:e,chainId:t}=this.config;e&&(yield s.safelyExecute((()=>r(this,void 0,void 0,(function*(){const n=(yield this.getOwnerCollectibles(e)).map((n=>r(this,void 0,void 0,(function*(){const{token_id:r,num_sales:i,background_color:o,image_url:a,image_preview_url:u,image_thumbnail_url:c,image_original_url:l,animation_url:d,animation_original_url:f,name:h,description:p,external_link:g,creator:m,asset_contract:{address:y,schema_name:v},last_sale:b}=n;let _;const{ignoredCollectibles:w}=this.getCollectiblesState();if(w.length&&(_=w.find((e=>e.address===s.toChecksumHexAddress(y)&&e.tokenId===r))),!_){const n=Object.assign({},{name:h},m&&{creator:m},p&&{description:p},a&&{image:a},i&&{numberOfSales:i},o&&{backgroundColor:o},u&&{imagePreview:u},c&&{imageThumbnail:c},l&&{imageOriginal:l},d&&{animation:d},f&&{animationOriginal:f},v&&{standard:v},g&&{externalLink:g},b&&{lastSale:b});yield this.addCollectible(y,r,n,{userAddress:e,chainId:t})}}))));yield Promise.all(n)})))))}))}}n.CollectibleDetectionController=a,n.default=a}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/controllers/dist/assets/CollectibleDetectionController.js"}],[1087,{"../BaseController":1050},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NotificationController=void 0;const r=e("../BaseController"),i={notifications:{}};class s extends r.BaseController{constructor(e,t){super(e,t||i),this.initialize(),this._addNotifications()}_addNotifications(){const e={},{allNotifications:t}=this.config;Object.values(t).forEach((t=>{e[t.id]=this.state.notifications[t.id]?this.state.notifications[t.id]:Object.assign(Object.assign({},t),{isShown:!1})})),this.update({notifications:e})}updateViewed(e){const t=this.state.notifications;for(const n of Object.keys(e).map(Number))t[n].isShown=e[n];this.update({notifications:t},!0)}}n.NotificationController=s}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/controllers/dist/notification/NotificationController.js"}],[1105,{"../BaseController":1050,"../util":1107},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AddressBookController=void 0;const r=e("../util"),i=e("../BaseController");class s extends i.BaseController{constructor(e,t){super(e,t),this.name="AddressBookController",this.defaultState={addressBook:{}},this.initialize()}clear(){this.update({addressBook:{}})}delete(e,t){if(t=r.toChecksumHexAddress(t),!r.isValidHexAddress(t)||!this.state.addressBook[e]||!this.state.addressBook[e][t])return!1;const n=Object.assign({},this.state.addressBook);return delete n[e][t],0===Object.keys(n[e]).length&&delete n[e],this.update({addressBook:n}),!0}set(e,t,n="1",i=""){if(e=r.toChecksumHexAddress(e),!r.isValidHexAddress(e))return!1;const s={address:e,chainId:n,isEns:!1,memo:i,name:t},o=r.normalizeEnsName(t);return o&&(s.name=o,s.isEns=!0),this.update({addressBook:Object.assign(Object.assign({},this.state.addressBook),{[n]:Object.assign(Object.assign({},this.state.addressBook[n]),{[e]:s})})}),!0}}n.AddressBookController=s,n.default=s}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/controllers/dist/user/AddressBookController.js"}],[1068,{"../BaseController":1050,"../apis/crypto-compare":1054,"../constants":1071,"../util":1107},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{u(r.next(e))}catch(e){s(e)}}function a(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.TokenRatesController=void 0;const i=e("../BaseController"),s=e("../util"),o=e("../constants"),a=e("../apis/crypto-compare"),u={BASE_URL:"https://api.coingecko.com/api/v3",getTokenPriceURL(e,t){return`${this.BASE_URL}/simple/token_price/${e}?${t}`},getPlatformsURL(){return`${this.BASE_URL}/asset_platforms`},getSupportedVsCurrencies(){return`${this.BASE_URL}/simple/supported_vs_currencies`}};function c(e,t){var n;if(!t)return null;const r=null!==(n=t.find((({chain_identifier:t})=>null!==t&&String(t)===e)))&&void 0!==n?n:null;return(null==r?void 0:r.id)||null}class l extends i.BaseController{constructor({onTokensStateChange:e,onCurrencyRateStateChange:t,onNetworkStateChange:n},r,i){super(r,i),this.tokenList=[],this.supportedChains={timestamp:0,data:null},this.supportedVsCurrencies={timestamp:0,data:[]},this.name="TokenRatesController",this.defaultConfig={disabled:!0,interval:18e4,nativeCurrency:"eth",chainId:"",tokens:[],threshold:216e5},this.defaultState={contractExchangeRates:{}},this.initialize(),this.configure({disabled:!1},!1,!1),e((e=>{this.configure({tokens:e.tokens})})),t((e=>{this.configure({nativeCurrency:e.nativeCurrency})})),n((({provider:e})=>{const{chainId:t}=e;this.update({contractExchangeRates:{}}),this.configure({chainId:t})})),this.poll()}poll(e){return r(this,void 0,void 0,(function*(){e&&this.configure({interval:e},!1,!1),this.handle&&clearTimeout(this.handle),yield s.safelyExecute((()=>this.updateExchangeRates())),this.handle=setTimeout((()=>{this.poll(this.config.interval)}),this.config.interval)}))}set chainId(e){!this.disabled&&s.safelyExecute((()=>this.updateExchangeRates()))}get chainId(){throw new Error("Property only used for setting")}set tokens(e){this.tokenList=e,!this.disabled&&s.safelyExecute((()=>this.updateExchangeRates()))}get tokens(){throw new Error("Property only used for setting")}fetchExchangeRate(e,t){return r(this,void 0,void 0,(function*(){const n=`contract_addresses=${this.tokenList.map((e=>e.address)).join(",")}&vs_currencies=${t.toLowerCase()}`;return s.handleFetch(u.getTokenPriceURL(e,n))}))}checkIsSupportedVsCurrency(e){return r(this,void 0,void 0,(function*(){const{threshold:t}=this.config,{timestamp:n,data:r}=this.supportedVsCurrencies;if(Date.now()-n>t){const t=yield s.handleFetch(u.getSupportedVsCurrencies());return this.supportedVsCurrencies={data:t,timestamp:Date.now()},t.includes(e.toLowerCase())}return r.includes(e.toLowerCase())}))}getChainSlug(){return r(this,void 0,void 0,(function*(){const{threshold:e,chainId:t}=this.config,{data:n,timestamp:r}=this.supportedChains;if(Date.now()-r>e){const e=yield s.handleFetch(u.getPlatformsURL());return this.supportedChains={data:e,timestamp:Date.now()},c(t,e)}return c(t,n)}))}updateExchangeRates(){return r(this,void 0,void 0,(function*(){if(0===this.tokenList.length||this.disabled)return;const e=yield this.getChainSlug();let t={};if(e){const{nativeCurrency:n}=this.config;t=yield this.fetchAndMapExchangeRates(n,e)}else this.tokenList.forEach((e=>{const n=s.toChecksumHexAddress(e.address);t[n]=undefined}));this.update({contractExchangeRates:t})}))}fetchAndMapExchangeRates(e,t){return r(this,void 0,void 0,(function*(){const n={};if(yield this.checkIsSupportedVsCurrency(e)){const r=yield this.fetchExchangeRate(t,e);this.tokenList.forEach((t=>{const i=r[t.address.toLowerCase()];n[s.toChecksumHexAddress(t.address)]=i?i[e.toLowerCase()]:0}))}else{let r,i=0;try{[r,{conversionRate:i}]=yield Promise.all([this.fetchExchangeRate(t,o.FALL_BACK_VS_CURRENCY),a.fetchExchangeRate(e,o.FALL_BACK_VS_CURRENCY,!1)])}catch(e){if(e.message.includes("market does not exist for this coin pair"))return{};throw e}for(const[e,t]of Object.entries(r)){const r=t[o.FALL_BACK_VS_CURRENCY.toLowerCase()];n[s.toChecksumHexAddress(e)]=r*i}}return n}))}}n.TokenRatesController=l,n.default=l}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/controllers/dist/assets/TokenRatesController.js"}],[1102,{"./SubjectMetadataController":1101},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),i(e("./SubjectMetadataController"),n)}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/controllers/dist/subject-metadata/index.js"}],[1056,{"../BaseControllerV2":1051,"eth-rpc-errors":3129,nanoid:1129},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ApprovalController=void 0;const r=e("eth-rpc-errors"),i=e("nanoid"),s=e("../BaseControllerV2"),o="ApprovalController",a={pendingApprovals:{persist:!1,anonymous:!0},pendingApprovalCount:{persist:!1,anonymous:!1}};class u extends s.BaseController{constructor({messenger:e,showApprovalRequest:t,state:n={}}){super({name:o,metadata:a,messenger:e,state:Object.assign(Object.assign({},{pendingApprovals:{},pendingApprovalCount:0}),n)}),this._approvals=new Map,this._origins=new Map,this._showApprovalRequest=t,this.registerMessageHandlers()}registerMessageHandlers(){this.messagingSystem.registerActionHandler(`${o}:clearRequests`,this.clear.bind(this)),this.messagingSystem.registerActionHandler(`${o}:addRequest`,((e,t)=>t?this.addAndShowApprovalRequest(e):this.add(e))),this.messagingSystem.registerActionHandler(`${o}:hasRequest`,this.has.bind(this)),this.messagingSystem.registerActionHandler(`${o}:acceptRequest`,this.accept.bind(this)),this.messagingSystem.registerActionHandler(`${o}:rejectRequest`,this.reject.bind(this))}addAndShowApprovalRequest(e){const t=this._add(e.origin,e.type,e.id,e.requestData);return this._showApprovalRequest(),t}add(e){return this._add(e.origin,e.type,e.id,e.requestData)}get(e){return this.state.pendingApprovals[e]}getApprovalCount(e={}){var t,n;if(!e.origin&&!e.type)throw new Error("Must specify origin, type, or both.");const{origin:r,type:i}=e;if(r&&i)return Number(Boolean(null===(t=this._origins.get(r))||void 0===t?void 0:t.has(i)));if(r)return(null===(n=this._origins.get(r))||void 0===n?void 0:n.size)||0;let s=0;for(const e of Object.values(this.state.pendingApprovals))e.type===i&&(s+=1);return s}getTotalApprovalCount(){return this.state.pendingApprovalCount}has(e={}){var t;const{id:n,origin:r,type:i}=e;if(n){if("string"!=typeof n)throw new Error("May not specify non-string id.");return this._approvals.has(n)}if(i&&"string"!=typeof i)throw new Error("May not specify non-string type.");if(r){if("string"!=typeof r)throw new Error("May not specify non-string origin.");return i?Boolean(null===(t=this._origins.get(r))||void 0===t?void 0:t.has(i)):this._origins.has(r)}if(i){for(const e of Object.values(this.state.pendingApprovals))if(e.type===i)return!0;return!1}throw new Error("Must specify a valid combination of id, origin, and type.")}accept(e,t){this._deleteApprovalAndGetCallbacks(e).resolve(t)}reject(e,t){this._deleteApprovalAndGetCallbacks(e).reject(t)}clear(e){for(const t of this._approvals.keys())this.reject(t,e);this._origins.clear(),this.update((()=>({pendingApprovals:{},pendingApprovalCount:0})))}_add(e,t,n=i.nanoid(),s){var o;if(this._validateAddParams(n,e,t,s),null===(o=this._origins.get(e))||void 0===o?void 0:o.has(t))throw r.ethErrors.rpc.resourceUnavailable(((e,t)=>`Request of type '${t}' already pending for origin ${e}. Please wait.`)(e,t));return new Promise(((r,i)=>{this._approvals.set(n,{resolve:r,reject:i}),this._addPendingApprovalOrigin(e,t),this._addToStore(n,e,t,s)}))}_validateAddParams(e,t,n,i){let s=null;if(e&&"string"==typeof e?this._approvals.has(e)?s=`Approval request with id '${e}' already exists.`:t&&"string"==typeof t?n&&"string"==typeof n?i&&("object"!=typeof i||Array.isArray(i))&&(s="Request data must be a plain object if specified."):s="Must specify non-empty string type.":s="Must specify non-empty string origin.":s="Must specify non-empty string id.",s)throw r.ethErrors.rpc.internal(s)}_addPendingApprovalOrigin(e,t){const n=this._origins.get(e)||new Set;n.add(t),this._origins.has(e)||this._origins.set(e,n)}_addToStore(e,t,n,r){const i={id:e,origin:t,type:n,time:Date.now(),requestData:r||null};this.update((t=>{t.pendingApprovals[e]=i,t.pendingApprovalCount=Object.keys(t.pendingApprovals).length}))}_delete(e){this._approvals.delete(e);const{origin:t,type:n}=this.state.pendingApprovals[e];this._origins.get(t).delete(n),this._isEmptyOrigin(t)&&this._origins.delete(t),this.update((t=>{delete t.pendingApprovals[e],t.pendingApprovalCount=Object.keys(t.pendingApprovals).length}))}_deleteApprovalAndGetCallbacks(e){const t=this._approvals.get(e);if(!t)throw new Error(`Approval request with id '${e}' not found.`);return this._delete(e),t}_isEmptyOrigin(e){var t;return!(null===(t=this._origins.get(e))||void 0===t?void 0:t.size)}}n.ApprovalController=u,n.default=u}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/controllers/dist/approval/ApprovalController.js"}],[1065,{"../BaseController":1050,"../util":1107,"ethereumjs-util":3195},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{u(r.next(e))}catch(e){s(e)}}function a(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.TokenBalancesController=n.BN=void 0;const i=e("ethereumjs-util");Object.defineProperty(n,"BN",{enumerable:!0,get:function(){return i.BN}});const s=e("../BaseController"),o=e("../util");class a extends s.BaseController{constructor({onTokensStateChange:e,getSelectedAddress:t,getERC20BalanceOf:n},r,i){super(r,i),this.name="TokenBalancesController",this.defaultConfig={interval:18e4,tokens:[]},this.defaultState={contractBalances:{}},this.initialize(),e((({tokens:e})=>{this.configure({tokens:e}),this.updateBalances()})),this.getSelectedAddress=t,this.getERC20BalanceOf=n,this.poll()}poll(e){return r(this,void 0,void 0,(function*(){e&&this.configure({interval:e},!1,!1),this.handle&&clearTimeout(this.handle),yield o.safelyExecute((()=>this.updateBalances())),this.handle=setTimeout((()=>{this.poll(this.config.interval)}),this.config.interval)}))}updateBalances(){return r(this,void 0,void 0,(function*(){if(this.disabled)return;const{tokens:e}=this.config,t={};for(const n in e){const{address:r}=e[n];try{t[r]=yield this.getERC20BalanceOf(r,this.getSelectedAddress()),e[n].balanceError=null}catch(s){t[r]=new i.BN(0),e[n].balanceError=s}}this.update({contractBalances:t})}))}}n.TokenBalancesController=a,n.default=a}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/controllers/dist/assets/TokenBalancesController.js"}],[1084,{"../util":1107,"./AbstractMessageManager":1082,uuid:6724},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.PersonalMessageManager=void 0;const r=e("uuid"),i=e("../util"),s=e("./AbstractMessageManager");class o extends s.AbstractMessageManager{constructor(){super(...arguments),this.name="PersonalMessageManager"}addUnapprovedMessageAsync(e,t){return new Promise(((n,r)=>{i.validateSignMessageData(e);const s=this.addUnapprovedMessage(e,t);this.hub.once(`${s}:finished`,(t=>{switch(t.status){case"signed":return n(t.rawSig);case"rejected":return r(new Error("MetaMask Personal Message Signature: User denied message signature."));default:return r(new Error(`MetaMask Personal Message Signature: Unknown problem: ${JSON.stringify(e)}`))}}))}))}addUnapprovedMessage(e,t){t&&(e.origin=t.origin),e.data=i.normalizeMessageData(e.data);const n=r.v1(),s={id:n,messageParams:e,status:"unapproved",time:Date.now(),type:"personal_sign"};return this.addMessage(s),this.hub.emit("unapprovedMessage",Object.assign(Object.assign({},e),{metamaskId:n})),n}prepMessageForSigning(e){return delete e.metamaskId,Promise.resolve(e)}}n.PersonalMessageManager=o,n.default=o}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/controllers/dist/message-manager/PersonalMessageManager.js"}],[1083,{"../util":1107,"./AbstractMessageManager":1082,uuid:6724},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MessageManager=void 0;const r=e("uuid"),i=e("../util"),s=e("./AbstractMessageManager");class o extends s.AbstractMessageManager{constructor(){super(...arguments),this.name="MessageManager"}addUnapprovedMessageAsync(e,t){return new Promise(((n,r)=>{i.validateSignMessageData(e);const s=this.addUnapprovedMessage(e,t);this.hub.once(`${s}:finished`,(t=>{switch(t.status){case"signed":return n(t.rawSig);case"rejected":return r(new Error("MetaMask Message Signature: User denied message signature."));default:return r(new Error(`MetaMask Message Signature: Unknown problem: ${JSON.stringify(e)}`))}}))}))}addUnapprovedMessage(e,t){t&&(e.origin=t.origin),e.data=i.normalizeMessageData(e.data);const n=r.v1(),s={id:n,messageParams:e,status:"unapproved",time:Date.now(),type:"eth_sign"};return this.addMessage(s),this.hub.emit("unapprovedMessage",Object.assign(Object.assign({},e),{metamaskId:n})),n}prepMessageForSigning(e){return delete e.metamaskId,Promise.resolve(e)}}n.MessageManager=o,n.default=o}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/controllers/dist/message-manager/MessageManager.js"}],[1057,{"../BaseController":1050,"../util":1107,"async-mutex":2116,"eth-query":3125},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{u(r.next(e))}catch(e){s(e)}}function a(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.AccountTrackerController=void 0;const s=i(e("eth-query")),o=e("async-mutex"),a=e("../BaseController"),u=e("../util");class c extends a.BaseController{constructor({onPreferencesStateChange:e,getIdentities:t},n,i){super(n,i),this.mutex=new o.Mutex,this.name="AccountTrackerController",this.refresh=()=>r(this,void 0,void 0,(function*(){this.syncAccounts();const e=Object.assign({},this.state.accounts);for(const t in e)yield u.safelyExecuteWithTimeout((()=>r(this,void 0,void 0,(function*(){const n=yield u.query(this.ethQuery,"getBalance",[t]);e[t]={balance:u.BNToHex(n)}}))));this.update({accounts:e})})),this.defaultConfig={interval:1e4},this.defaultState={accounts:{}},this.initialize(),this.getIdentities=t,e((()=>{this.refresh()})),this.poll()}syncAccounts(){const{accounts:e}=this.state,t=Object.keys(this.getIdentities()),n=Object.keys(e),r=t.filter((e=>-1===n.indexOf(e))),i=n.filter((e=>-1===t.indexOf(e)));r.forEach((t=>{e[t]={balance:"0x0"}})),i.forEach((t=>{delete e[t]})),this.update({accounts:Object.assign({},e)})}set provider(e){this.ethQuery=new s.default(e)}get provider(){throw new Error("Property only used for setting")}poll(e){return r(this,void 0,void 0,(function*(){const t=yield this.mutex.acquire();e&&this.configure({interval:e},!1,!1),this.handle&&clearTimeout(this.handle),yield this.refresh(),this.handle=setTimeout((()=>{t(),this.poll(this.config.interval)}),this.config.interval)}))}syncBalanceWithAddresses(e){return r(this,void 0,void 0,(function*(){return yield Promise.all(e.map((e=>u.safelyExecuteWithTimeout((()=>r(this,void 0,void 0,(function*(){const t=yield u.query(this.ethQuery,"getBalance",[e]);return[e,t]}))))))).then((e=>e.reduce(((e,t)=>{if(!t)return e;const[n,r]=t;return Object.assign(Object.assign({},e),{[n]:{balance:r}})}),{})))}))}}n.AccountTrackerController=c,n.default=c}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/controllers/dist/assets/AccountTrackerController.js"}],[1061,{"../BaseControllerV2":1051,"../apis/crypto-compare":1054,"../util":1107,"async-mutex":2116},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{u(r.next(e))}catch(e){s(e)}}function a(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.CurrencyRateController=void 0;const i=e("async-mutex"),s=e("../BaseControllerV2"),o=e("../util"),a=e("../apis/crypto-compare"),u={conversionDate:{persist:!0,anonymous:!0},conversionRate:{persist:!0,anonymous:!0},currentCurrency:{persist:!0,anonymous:!0},nativeCurrency:{persist:!0,anonymous:!0},pendingCurrentCurrency:{persist:!1,anonymous:!0},pendingNativeCurrency:{persist:!1,anonymous:!0},usdConversionRate:{persist:!0,anonymous:!0}},c={conversionDate:0,conversionRate:0,currentCurrency:"usd",nativeCurrency:"ETH",pendingCurrentCurrency:null,pendingNativeCurrency:null,usdConversionRate:null};class l extends s.BaseController{constructor({includeUsdRate:e=!1,interval:t=18e4,messenger:n,state:r,fetchExchangeRate:s=a.fetchExchangeRate}){super({name:"CurrencyRateController",metadata:u,messenger:n,state:Object.assign(Object.assign({},c),r)}),this.mutex=new i.Mutex,this.includeUsdRate=e,this.intervalDelay=t,this.fetchExchangeRate=s}start(){return r(this,void 0,void 0,(function*(){yield this.startPolling()}))}stop(){this.stopPolling()}destroy(){super.destroy(),this.stopPolling()}setCurrentCurrency(e){return r(this,void 0,void 0,(function*(){this.update((t=>{t.pendingCurrentCurrency=e})),yield this.updateExchangeRate()}))}setNativeCurrency(e){return r(this,void 0,void 0,(function*(){this.update((t=>{t.pendingNativeCurrency=e})),yield this.updateExchangeRate()}))}stopPolling(){this.intervalId&&clearInterval(this.intervalId)}startPolling(){return r(this,void 0,void 0,(function*(){this.stopPolling(),yield o.safelyExecute((()=>this.updateExchangeRate())),this.intervalId=setInterval((()=>r(this,void 0,void 0,(function*(){yield o.safelyExecute((()=>this.updateExchangeRate()))}))),this.intervalDelay)}))}updateExchangeRate(){return r(this,void 0,void 0,(function*(){const e=yield this.mutex.acquire(),{currentCurrency:t,nativeCurrency:n,pendingCurrentCurrency:r,pendingNativeCurrency:i}=this.state;let s=null,o=null,a=null;const u=null!=r?r:t,c=null!=i?i:n;try{u&&c&&""!==u&&""!==c&&(({conversionRate:o,usdConversionRate:a}=yield this.fetchExchangeRate(u,c,this.includeUsdRate)),s=Date.now()/1e3)}catch(e){if(!e.message.includes("market does not exist for this coin pair"))throw e}finally{try{this.update((()=>({conversionDate:s,conversionRate:o,nativeCurrency:c,currentCurrency:u,pendingCurrentCurrency:null,pendingNativeCurrency:null,usdConversionRate:a})))}finally{e()}}return this.state}))}}n.CurrencyRateController=l,n.default=l}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/controllers/dist/assets/CurrencyRateController.js"}],[1085,{"../util":1107,"./AbstractMessageManager":1082,uuid:6724},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TypedMessageManager=void 0;const r=e("uuid"),i=e("../util"),s=e("./AbstractMessageManager");class o extends s.AbstractMessageManager{constructor(){super(...arguments),this.name="TypedMessageManager"}addUnapprovedMessageAsync(e,t,n){return new Promise(((r,s)=>{"V1"===t&&i.validateTypedSignMessageDataV1(e),"V3"===t&&i.validateTypedSignMessageDataV3(e);const o=this.addUnapprovedMessage(e,t,n);this.hub.once(`${o}:finished`,(t=>{switch(t.status){case"signed":return r(t.rawSig);case"rejected":return s(new Error("MetaMask Typed Message Signature: User denied message signature."));case"errored":return s(new Error(`MetaMask Typed Message Signature: ${t.error}`));default:return s(new Error(`MetaMask Typed Message Signature: Unknown problem: ${JSON.stringify(e)}`))}}))}))}addUnapprovedMessage(e,t,n){const i=r.v1(),s=Object.assign(Object.assign({},e),{metamaskId:i,version:t});n&&(e.origin=n.origin);const o={id:i,messageParams:e,status:"unapproved",time:Date.now(),type:"eth_signTypedData"};return this.addMessage(o),this.hub.emit("unapprovedMessage",s),i}setMessageStatusErrored(e,t){const n=this.getMessage(e);n&&(n.error=t,this.updateMessage(n),this.setMessageStatus(e,"errored"))}prepMessageForSigning(e){return delete e.metamaskId,delete e.version,Promise.resolve(e)}}n.TypedMessageManager=o,n.default=o}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/controllers/dist/message-manager/TypedMessageManager.js"}],[1060,{"../BaseController":1050,"../constants":1071,"../util":1107,"./assetsUtil":1070,"async-mutex":2116,"ethereumjs-util":3195,events:2479},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{u(r.next(e))}catch(e){s(e)}}function a(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.CollectiblesController=void 0;const i=e("events"),s=e("ethereumjs-util"),o=e("async-mutex"),a=e("../BaseController"),u=e("../util"),c=e("../constants"),l=e("./assetsUtil"),d="allCollectibles",f="allCollectibleContracts";class h extends a.BaseController{constructor({onPreferencesStateChange:e,onNetworkStateChange:t,getERC721AssetName:n,getERC721AssetSymbol:r,getERC721TokenURI:s,getERC721OwnerOf:a,getERC1155BalanceOf:u,getERC1155TokenURI:l},d,f){super(d,f),this.mutex=new o.Mutex,this.hub=new i.EventEmitter,this.name="CollectiblesController",this.defaultConfig={networkType:c.MAINNET,selectedAddress:"",chainId:"",ipfsGateway:c.IPFS_DEFAULT_GATEWAY_URL,openSeaEnabled:!1,useIPFSSubdomains:!0},this.defaultState={allCollectibleContracts:{},allCollectibles:{},ignoredCollectibles:[]},this.initialize(),this.getERC721AssetName=n,this.getERC721AssetSymbol=r,this.getERC721TokenURI=s,this.getERC721OwnerOf=a,this.getERC1155BalanceOf=u,this.getERC1155TokenURI=l,e((({selectedAddress:e,ipfsGateway:t,openSeaEnabled:n})=>{this.configure({selectedAddress:e,ipfsGateway:t,openSeaEnabled:n})})),t((({provider:e})=>{const{chainId:t}=e;this.configure({chainId:t})}))}getCollectibleApi(e,t){const{chainId:n}=this.config;return n===c.RINKEBY_CHAIN_ID?`https://testnets-api.opensea.io/api/v1/asset/${e}/${t}`:`https://api.opensea.io/api/v1/asset/${e}/${t}`}getCollectibleContractInformationApi(e){const{chainId:t}=this.config;return t===c.RINKEBY_CHAIN_ID?`https://testnets-api.opensea.io/api/v1/asset_contract/${e}`:`https://api.opensea.io/api/v1/asset_contract/${e}`}updateNestedCollectibleState(e,t,{userAddress:n,chainId:r}={userAddress:this.config.selectedAddress,chainId:this.config.chainId}){const{[t]:i}=this.state,s=i[n],o=Object.assign(Object.assign({},s),{[r]:e}),a=Object.assign(Object.assign({},i),{[n]:o});this.update({[t]:a})}getCollectibleInformationFromApi(e,t){return r(this,void 0,void 0,(function*(){const n=this.getCollectibleApi(e,t);let r;r=this.openSeaApiKey?yield u.handleFetch(n,{headers:{"X-API-KEY":this.openSeaApiKey}}):yield u.handleFetch(n);const{num_sales:i,background_color:s,image_url:o,image_preview_url:a,image_thumbnail_url:c,image_original_url:l,animation_url:d,animation_original_url:f,name:h,description:p,external_link:g,creator:m,last_sale:y,asset_contract:{schema_name:v}}=r;return Object.assign({},{name:h||null},{description:p||null},{image:o||null},m&&{creator:m},i&&{numberOfSales:i},s&&{backgroundColor:s},a&&{imagePreview:a},c&&{imageThumbnail:c},l&&{imageOriginal:l},d&&{animation:d},f&&{animationOriginal:f},g&&{externalLink:g},y&&{lastSale:y},v&&{standard:v})}))}getCollectibleInformationFromTokenURI(e,t){return r(this,void 0,void 0,(function*(){const{ipfsGateway:n,useIPFSSubdomains:r}=this.config,i=yield this.getCollectibleURIAndStandard(e,t);let s=i[0];const o=i[1];s.startsWith("ipfs://")&&(s=u.getFormattedIpfsUrl(n,s,r));try{const e=yield u.handleFetch(s);return{image:e[Object.prototype.hasOwnProperty.call(e,"image")?"image":"image_url"],name:e.name,description:e.description,standard:o,favorite:!1}}catch(e){return{image:null,name:null,description:null,standard:o||null,favorite:!1}}}))}getCollectibleURIAndStandard(e,t){return r(this,void 0,void 0,(function*(){try{return[yield this.getERC721TokenURI(e,t),c.ERC721]}catch(e){}try{const n=yield this.getERC1155TokenURI(e,t);if(!n.includes("{id}"))return[n,c.ERC1155];const r=s.stripHexPrefix(u.BNToHex(new s.BN(t))).padStart(64,"0").toLowerCase();return[n.replace("{id}",r),c.ERC1155]}catch(e){}return["",""]}))}getCollectibleInformation(e,t){var n,i,s,o,a,c,l,d;return r(this,void 0,void 0,(function*(){const f=yield u.safelyExecute((()=>r(this,void 0,void 0,(function*(){return yield this.getCollectibleInformationFromTokenURI(e,t)}))));let h;return this.config.openSeaEnabled&&(h=yield u.safelyExecute((()=>r(this,void 0,void 0,(function*(){return yield this.getCollectibleInformationFromApi(e,t)}))))),Object.assign(Object.assign({},h),{name:null!==(i=null!==(n=f.name)&&void 0!==n?n:null==h?void 0:h.name)&&void 0!==i?i:null,description:null!==(o=null!==(s=f.description)&&void 0!==s?s:null==h?void 0:h.description)&&void 0!==o?o:null,image:null!==(c=null!==(a=f.image)&&void 0!==a?a:null==h?void 0:h.image)&&void 0!==c?c:null,standard:null!==(d=null!==(l=f.standard)&&void 0!==l?l:null==h?void 0:h.standard)&&void 0!==d?d:null})}))}getCollectibleContractInformationFromApi(e){return r(this,void 0,void 0,(function*(){const t=this.getCollectibleContractInformationApi(e);let n;return n=this.openSeaApiKey?yield u.handleFetch(t,{headers:{"X-API-KEY":this.openSeaApiKey}}):yield u.handleFetch(t),n}))}getCollectibleContractInformationFromContract(e){return r(this,void 0,void 0,(function*(){return{collection:{name:yield this.getERC721AssetName(e)},symbol:yield this.getERC721AssetSymbol(e),address:e}}))}getCollectibleContractInformation(e){return r(this,void 0,void 0,(function*(){const t=yield u.safelyExecute((()=>r(this,void 0,void 0,(function*(){return yield this.getCollectibleContractInformationFromContract(e)}))));let n;return this.config.openSeaEnabled&&(n=yield u.safelyExecute((()=>r(this,void 0,void 0,(function*(){return yield this.getCollectibleContractInformationFromApi(e)}))))),t||n?Object.assign(Object.assign(Object.assign({},n),t),{collection:Object.assign(Object.assign({image_url:null},null==n?void 0:n.collection),null==t?void 0:t.collection)}):{address:e,asset_contract_type:null,created_date:null,schema_name:null,symbol:null,total_supply:null,description:null,external_link:null,collection:{name:null,image_url:null}}}))}addIndividualCollectible(e,t,n,i){var s;return r(this,void 0,void 0,(function*(){const r=yield this.mutex.acquire();try{e=u.toChecksumHexAddress(e);const{allCollectibles:o}=this.state;let a,c;i?(a=i.chainId,c=i.userAddress):(a=this.config.chainId,c=this.config.selectedAddress);const f=(null===(s=o[c])||void 0===s?void 0:s[a])||[],h=f.find((n=>n.address.toLowerCase()===e.toLowerCase()&&n.tokenId===t));if(h){if(!l.compareCollectiblesMetadata(n,h))return f;{const n=f.findIndex((n=>n.address.toLowerCase()===e.toLowerCase()&&n.tokenId===t));-1!==n&&f.splice(n,1)}}const p=Object.assign({address:e,tokenId:t,favorite:(null==h?void 0:h.favorite)||!1,isCurrentlyOwned:!0},n),g=[...f,p];return this.updateNestedCollectibleState(g,d,{chainId:a,userAddress:c}),g}finally{r()}}))}addCollectibleContract(e,t){var n;return r(this,void 0,void 0,(function*(){const r=yield this.mutex.acquire();try{e=u.toChecksumHexAddress(e);const{allCollectibleContracts:i}=this.state;let s,o;t?(s=t.chainId,o=t.userAddress):(s=this.config.chainId,o=this.config.selectedAddress);const a=(null===(n=i[o])||void 0===n?void 0:n[s])||[];if(a.find((t=>t.address.toLowerCase()===e.toLowerCase())))return a;const c=yield this.getCollectibleContractInformation(e),{asset_contract_type:l,created_date:d,schema_name:h,symbol:p,total_supply:g,description:m,external_link:y,collection:{name:v,image_url:b}}=c;if(t&&!v||0===Object.keys(c).length)return a;const _=Object.assign({},{address:e},m&&{description:m},v&&{name:v},b&&{logo:b},p&&{symbol:p},null!=g&&{totalSupply:g},l&&{assetContractType:l},d&&{createdDate:d},h&&{schemaName:h},y&&{externalLink:y}),w=[...a,_];return this.updateNestedCollectibleState(w,f,{chainId:s,userAddress:o}),w}finally{r()}}))}removeAndIgnoreIndividualCollectible(e,t){var n;e=u.toChecksumHexAddress(e);const{allCollectibles:r,ignoredCollectibles:i}=this.state,{chainId:s,selectedAddress:o}=this.config,a=[...i],c=((null===(n=r[o])||void 0===n?void 0:n[s])||[]).filter((n=>{if(n.address.toLowerCase()===e.toLowerCase()&&n.tokenId===t){return!a.find((n=>n.address===e&&n.tokenId===t))&&a.push(n),!1}return!0}));this.updateNestedCollectibleState(c,d),this.update({ignoredCollectibles:a})}removeIndividualCollectible(e,t){var n;e=u.toChecksumHexAddress(e);const{allCollectibles:r}=this.state,{chainId:i,selectedAddress:s}=this.config,o=((null===(n=r[s])||void 0===n?void 0:n[i])||[]).filter((n=>!(n.address.toLowerCase()===e.toLowerCase()&&n.tokenId===t)));this.updateNestedCollectibleState(o,d)}removeCollectibleContract(e){var t;e=u.toChecksumHexAddress(e);const{allCollectibleContracts:n}=this.state,{chainId:r,selectedAddress:i}=this.config,s=((null===(t=n[i])||void 0===t?void 0:t[r])||[]).filter((t=>!(t.address.toLowerCase()===e.toLowerCase())));return this.updateNestedCollectibleState(s,f),s}setApiKey(e){this.openSeaApiKey=e}isCollectibleOwner(e,t,n){return r(this,void 0,void 0,(function*(){try{const r=yield this.getERC721OwnerOf(t,n);return e.toLowerCase()===r.toLowerCase()}catch(e){}try{return(yield this.getERC1155BalanceOf(e,t,n))>0}catch(e){}throw new Error("Unable to verify ownership. Probably because the standard is not supported or the chain is incorrect.")}))}addCollectibleVerifyOwnership(e,t){return r(this,void 0,void 0,(function*(){const{selectedAddress:n}=this.config;if(!(yield this.isCollectibleOwner(n,e,t)))throw new Error("This collectible is not owned by the user");yield this.addCollectible(e,t)}))}addCollectible(e,t,n,i){return r(this,void 0,void 0,(function*(){e=u.toChecksumHexAddress(e);const r=yield this.addCollectibleContract(e,i);n=n||(yield this.getCollectibleInformation(e,t));r.find((t=>t.address.toLowerCase()===e.toLowerCase()))&&(yield this.addIndividualCollectible(e,t,n,i))}))}removeCollectible(e,t){var n;e=u.toChecksumHexAddress(e),this.removeIndividualCollectible(e,t);const{allCollectibles:r}=this.state,{chainId:i,selectedAddress:s}=this.config;((null===(n=r[s])||void 0===n?void 0:n[i])||[]).find((t=>t.address.toLowerCase()===e.toLowerCase()))||this.removeCollectibleContract(e)}removeAndIgnoreCollectible(e,t){var n;e=u.toChecksumHexAddress(e),this.removeAndIgnoreIndividualCollectible(e,t);const{allCollectibles:r}=this.state,{chainId:i,selectedAddress:s}=this.config;((null===(n=r[s])||void 0===n?void 0:n[i])||[]).find((t=>t.address.toLowerCase()===e.toLowerCase()))||this.removeCollectibleContract(e)}clearIgnoredCollectibles(){this.update({ignoredCollectibles:[]})}checkAndUpdateSingleCollectibleOwnershipStatus(e,t,{userAddress:n,chainId:i}={userAddress:this.config.selectedAddress,chainId:this.config.chainId}){var s;return r(this,void 0,void 0,(function*(){const{address:r,tokenId:o}=e;let a=e.isCurrentlyOwned;try{a=yield this.isCollectibleOwner(n,r,o)}catch(e){if(!e.message.includes("Unable to verify ownership"))throw e}if(e.isCurrentlyOwned=a,!0===t)return e;const{allCollectibles:u}=this.state,c=(null===(s=u[n])||void 0===s?void 0:s[i])||[],l=c.find((e=>e.tokenId===o&&e.address.toLowerCase()===r.toLowerCase()));return l&&(l.isCurrentlyOwned=a,this.updateNestedCollectibleState(c,d,{userAddress:n,chainId:i})),e}))}checkAndUpdateAllCollectiblesOwnershipStatus(){var e;return r(this,void 0,void 0,(function*(){const{allCollectibles:t}=this.state,{chainId:n,selectedAddress:i}=this.config,s=(null===(e=t[i])||void 0===e?void 0:e[n])||[],o=yield Promise.all(s.map((e=>r(this,void 0,void 0,(function*(){var t;return null!==(t=yield this.checkAndUpdateSingleCollectibleOwnershipStatus(e,!0))&&void 0!==t?t:e})))));this.updateNestedCollectibleState(o,d)}))}updateCollectibleFavoriteStatus(e,t,n){var r;const{allCollectibles:i}=this.state,{chainId:s,selectedAddress:o}=this.config,a=(null===(r=i[o])||void 0===r?void 0:r[s])||[],u=a.findIndex((n=>n.address===e&&n.tokenId===t));if(-1===u)return;const c=Object.assign(Object.assign({},a[u]),{favorite:n});a[u]=c,this.updateNestedCollectibleState(a,d)}}n.CollectiblesController=h,n.default=h}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/controllers/dist/assets/CollectiblesController.js"}],[1100,{"../BaseControllerV2":1051,"eth-rpc-errors":3129},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{u(r.next(e))}catch(e){s(e)}}function a(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.RateLimitController=void 0;const i=e("eth-rpc-errors"),s=e("../BaseControllerV2"),o="RateLimitController",a={requests:{persist:!1,anonymous:!1}};class u extends s.BaseController{constructor({rateLimitTimeout:e=5e3,rateLimitCount:t=1,messenger:n,state:r,implementations:i}){const s={requests:Object.keys(i).reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:{}})),{})};super({name:o,metadata:a,messenger:n,state:Object.assign(Object.assign({},s),r)}),this.implementations=i,this.rateLimitTimeout=e,this.rateLimitCount=t,this.messagingSystem.registerActionHandler(`${o}:call`,((e,t,...n)=>this.call(e,t,...n)))}call(e,t,...n){return r(this,void 0,void 0,(function*(){if(this.isRateLimited(t,e))throw i.ethErrors.rpc.limitExceeded({message:`"${t}" is currently rate-limited. Please try again later.`});this.recordRequest(t,e);const r=this.implementations[t];if(!r)throw new Error("Invalid api type");return r(...n)}))}isRateLimited(e,t){return this.state.requests[e][t]>=this.rateLimitCount}recordRequest(e,t){this.update((n=>{var r;const i=null!==(r=n.requests[e][t])&&void 0!==r?r:0;n.requests[e][t]=i+1,0===i&&setTimeout((()=>this.resetRequestCount(e,t)),this.rateLimitTimeout)}))}resetRequestCount(e,t){this.update((n=>{n.requests[e][t]=0}))}}n.RateLimitController=u}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/controllers/dist/ratelimit/RateLimitController.js"}],[1051,{immer:5092},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getPersistentState=n.getAnonymizedState=n.BaseController=void 0;const r=e("immer");r.enablePatches();function i(e,t,n){return Object.keys(e).reduce(((r,i)=>{const s=t[i][n],o=e[i];return"function"==typeof s?r[i]=s(o):s&&(r[i]=o),r}),{})}n.BaseController=class{constructor({messenger:e,metadata:t,name:n,state:r}){this.messagingSystem=e,this.name=n,this.internalState=r,this.metadata=t,this.messagingSystem.registerActionHandler(`${n}:getState`,(()=>this.state))}get state(){return this.internalState}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,n]=r.produceWithPatches(this.internalState,e);this.internalState=t,this.messagingSystem.publish(`${this.name}:stateChange`,t,n)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},n.getAnonymizedState=function(e,t){return i(e,t,"anonymous")},n.getPersistentState=function(e,t){return i(e,t,"persist")}}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/controllers/dist/BaseControllerV2.js"}],[1067,{"../BaseControllerV2":1051,"../apis/token-service":1055,"../util":1107,"@metamask/contract-metadata":1049,"abort-controller":2057,"async-mutex":2116},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{u(r.next(e))}catch(e){s(e)}}function a(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.TokenListController=void 0;const o=s(e("@metamask/contract-metadata")),a=e("async-mutex"),u=s(e("abort-controller")),c=e("../BaseControllerV2"),l=e("../util"),d=e("../apis/token-service"),f={tokenList:{persist:!0,anonymous:!0},tokensChainsCache:{persist:!0,anonymous:!0}},h={tokenList:{},tokensChainsCache:{}};class p extends c.BaseController{constructor({chainId:e,useStaticTokenList:t,onNetworkStateChange:n,onPreferencesStateChange:i,interval:s=36e5,cacheRefreshThreshold:o=18e5,messenger:c,state:l}){super({name:"TokenListController",metadata:f,messenger:c,state:Object.assign(Object.assign({},h),l)}),this.mutex=new a.Mutex,this.intervalDelay=s,this.cacheRefreshThreshold=o,this.chainId=e,this.useStaticTokenList=t,this.abortController=new u.default,n((e=>r(this,void 0,void 0,(function*(){this.chainId!==e.provider.chainId&&(this.abortController.abort(),this.abortController=new u.default,this.chainId=e.provider.chainId,yield this.restart())})))),i((e=>r(this,void 0,void 0,(function*(){this.useStaticTokenList!==e.useStaticTokenList&&(this.abortController.abort(),this.abortController=new u.default,this.useStaticTokenList=e.useStaticTokenList,yield this.restart())}))))}start(){return r(this,void 0,void 0,(function*(){yield this.startPolling()}))}restart(){return r(this,void 0,void 0,(function*(){this.stopPolling(),yield this.startPolling()}))}stop(){this.stopPolling()}destroy(){super.destroy(),this.stopPolling()}stopPolling(){this.intervalId&&clearInterval(this.intervalId)}startPolling(){return r(this,void 0,void 0,(function*(){yield l.safelyExecute((()=>this.fetchTokenList())),this.intervalId=setInterval((()=>r(this,void 0,void 0,(function*(){yield l.safelyExecute((()=>this.fetchTokenList()))}))),this.intervalDelay)}))}fetchTokenList(){return r(this,void 0,void 0,(function*(){this.useStaticTokenList?yield this.fetchFromStaticTokenList():yield this.fetchFromDynamicTokenList()}))}fetchFromStaticTokenList(){return r(this,void 0,void 0,(function*(){const e={};for(const t in o.default){const n=o.default[t],{erc20:r,logo:s}=n,a=i(n,["erc20","logo"]);r&&(e[t]=Object.assign(Object.assign({},a),{address:t,iconUrl:s,occurrences:null}))}this.update((()=>({tokenList:e,tokensChainsCache:{}})))}))}fetchFromDynamicTokenList(){return r(this,void 0,void 0,(function*(){const e=yield this.mutex.acquire();try{const t=yield l.safelyExecute((()=>this.fetchFromCache())),n=this.state,{tokensChainsCache:r}=n,s=i(n,["tokensChainsCache"]),o={};if(t)for(const e of t)o[e.address]=e;else{const e=yield l.safelyExecute((()=>d.fetchTokenList(this.chainId,this.abortController.signal)));if(!e){const e=r[this.chainId]?r[this.chainId].data:[];for(const t of e)o[t.address]=t;return void this.update((()=>Object.assign(Object.assign({},s),{tokenList:o,tokensChainsCache:r})))}const t=e.filter((e=>e.occurrences&&e.occurrences>=2)),n=t.map((e=>e.symbol)),i=[...new Set(n.filter(((e,t)=>n.indexOf(e)!==t)))],a=t.filter((e=>!i.includes(e.symbol)));for(const e of a)o[e.address]=e}const a=Object.assign(Object.assign({},r),{[this.chainId]:{timestamp:Date.now(),data:Object.values(o)}});this.update((()=>Object.assign(Object.assign({},s),{tokenList:o,tokensChainsCache:a})))}finally{e()}}))}fetchFromCache(){return r(this,void 0,void 0,(function*(){const{tokensChainsCache:e}=this.state,t=e[this.chainId],n=Date.now();return(null==t?void 0:t.data)&&n-(null==t?void 0:t.timestamp)<this.cacheRefreshThreshold?t.data:null}))}fetchTokenMetadata(e){return r(this,void 0,void 0,(function*(){const t=yield this.mutex.acquire();try{return yield d.fetchTokenMetadata(this.chainId,e,this.abortController.signal)}finally{t()}}))}}n.TokenListController=p,n.default=p}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/controllers/dist/assets/TokenListController.js"}],[1069,{"../BaseController":1050,"../constants":1071,"../util":1107,"@metamask/contract-metadata":1049,"@metamask/metamask-eth-abis":1228,"async-mutex":2116,ethers:3219,events:2479,uuid:6724},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{u(r.next(e))}catch(e){s(e)}}function a(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.TokensController=void 0;const s=e("events"),o=i(e("@metamask/contract-metadata")),a=e("@metamask/metamask-eth-abis"),u=e("uuid"),c=e("async-mutex"),l=e("ethers"),d=e("../BaseController"),f=e("../util"),h=e("../constants");var p;!function(e){e.accepted="accepted",e.failed="failed",e.pending="pending",e.rejected="rejected"}(p||(p={}));class g extends d.BaseController{constructor({onPreferencesStateChange:e,onNetworkStateChange:t,config:n,state:r}){super(n,r),this.mutex=new c.Mutex,this.hub=new s.EventEmitter,this.name="TokensController",this.defaultConfig=Object.assign({networkType:h.MAINNET,selectedAddress:"",chainId:"",provider:undefined},n),this.defaultState=Object.assign({allTokens:{},allIgnoredTokens:{},ignoredTokens:[],suggestedAssets:[],tokens:[]},r),this.initialize(),e((({selectedAddress:e})=>{var t,n;const{allTokens:r,allIgnoredTokens:i}=this.state,{chainId:s}=this.config;this.configure({selectedAddress:e}),this.update({tokens:(null===(t=r[s])||void 0===t?void 0:t[e])||[],ignoredTokens:(null===(n=i[s])||void 0===n?void 0:n[e])||[]})})),t((({provider:e})=>{var t,n;const{allTokens:r,allIgnoredTokens:i}=this.state,{selectedAddress:s}=this.config,{chainId:o}=e;this.configure({chainId:o}),this.ethersProvider=this._instantiateNewEthersProvider(),this.update({tokens:(null===(t=r[o])||void 0===t?void 0:t[s])||[],ignoredTokens:(null===(n=i[o])||void 0===n?void 0:n[s])||[]})}))}failSuggestedAsset(e,t){const n=Object.assign(Object.assign({},e),{status:p.failed,error:t});this.hub.emit(`${e.id}:finished`,n)}_instantiateNewEthersProvider(){var e;return new l.ethers.providers.Web3Provider(null===(e=this.config)||void 0===e?void 0:e.provider)}addToken(e,t,n,i){return r(this,void 0,void 0,(function*(){const r=yield this.mutex.acquire();try{e=f.toChecksumHexAddress(e);const{tokens:s,ignoredTokens:o}=this.state,a=yield this._detectIsERC721(e),u={address:e,symbol:t,decimals:n,image:i,isERC721:a},c=s.find((t=>t.address.toLowerCase()===e.toLowerCase()));if(c){const e=s.indexOf(c);s[e]=u}else s.push(u);const l=o.filter((t=>t.toLowerCase()!==e.toLowerCase())),{newAllTokens:d,newAllIgnoredTokens:h}=this._getNewAllTokensState(s,l);return this.update({allTokens:d,tokens:s,allIgnoredTokens:h,ignoredTokens:l}),s}finally{r()}}))}addTokens(e){return r(this,void 0,void 0,(function*(){const t=yield this.mutex.acquire(),{tokens:n,ignoredTokens:i}=this.state;try{e=yield Promise.all(e.map((e=>r(this,void 0,void 0,(function*(){return e.isERC721=yield this._detectIsERC721(e.address),e})))));let s=i;e.forEach((e=>{const{address:t,symbol:r,decimals:i,image:o,isERC721:a}=e,u=f.toChecksumHexAddress(t),c={address:u,symbol:r,decimals:i,image:o,isERC721:a},l=n.find((e=>e.address.toLowerCase()===u.toLowerCase()));if(l){const e=n.indexOf(l);n[e]=c}else n.push(c);s=s.filter((e=>e.toLowerCase()!==t.toLowerCase()))}));const{newAllTokens:o,newAllIgnoredTokens:a}=this._getNewAllTokensState(n,s);return this.update({tokens:n,allTokens:o,allIgnoredTokens:a,ignoredTokens:s}),n}finally{t()}}))}updateTokenType(e){return r(this,void 0,void 0,(function*(){const t=yield this._detectIsERC721(e),{tokens:n}=this.state,r=n.findIndex((t=>t.address.toLowerCase()===e.toLowerCase()));return n[r].isERC721=t,this.update({tokens:n}),n[r]}))}_detectIsERC721(e){var t,n;return r(this,void 0,void 0,(function*(){const r=f.toChecksumHexAddress(e);if(!0===(null===(t=o.default[r])||void 0===t?void 0:t.erc721))return Promise.resolve(!0);if(!0===(null===(n=o.default[r])||void 0===n?void 0:n.erc20))return Promise.resolve(!1);const i=yield this._createEthersContract(e,a.abiERC721,this.ethersProvider);try{return yield i.supportsInterface(h.ERC721_INTERFACE_ID)}catch(e){return!1}}))}_createEthersContract(e,t,n){return r(this,void 0,void 0,(function*(){return yield new l.ethers.Contract(e,t,n)}))}_generateRandomId(){return u.v1()}watchAsset(e,t){return r(this,void 0,void 0,(function*(){const n={asset:e,id:this._generateRandomId(),status:p.pending,time:Date.now(),type:t};try{if("ERC20"!==t)throw new Error(`Asset of type ${t} not supported`);f.validateTokenToWatch(e)}catch(e){return this.failSuggestedAsset(n,e),Promise.reject(e)}const r=new Promise(((e,t)=>{this.hub.once(`${n.id}:finished`,(n=>{switch(n.status){case p.accepted:return e(n.asset.address);case p.rejected:return t(new Error("User rejected to watch the asset."));case p.failed:return t(new Error(n.error.message));default:return t(new Error(`Unknown status: ${n.status}`))}}))})),{suggestedAssets:i}=this.state;return i.push(n),this.update({suggestedAssets:[...i]}),this.hub.emit("pendingSuggestedAsset",n),{result:r,suggestedAssetMeta:n}}))}acceptWatchAsset(e){return r(this,void 0,void 0,(function*(){const{suggestedAssets:t}=this.state,n=t.findIndex((({id:t})=>e===t)),r=t[n];try{if("ERC20"!==r.type)throw new Error(`Asset of type ${r.type} not supported`);{const{address:e,symbol:t,decimals:n,image:i}=r.asset;yield this.addToken(e,t,n,i),r.status=p.accepted,this.hub.emit(`${r.id}:finished`,r)}}catch(e){this.failSuggestedAsset(r,e)}const i=t.filter((({id:t})=>t!==e));this.update({suggestedAssets:[...i]})}))}rejectWatchAsset(e){const{suggestedAssets:t}=this.state,n=t.findIndex((({id:t})=>e===t)),r=t[n];if(!r)return;r.status=p.rejected,this.hub.emit(`${r.id}:finished`,r);const i=t.filter((({id:t})=>t!==e));this.update({suggestedAssets:[...i]})}removeAndIgnoreToken(e){e=f.toChecksumHexAddress(e);const{tokens:t,ignoredTokens:n}=this.state,r=n.find((t=>t.toLowerCase()===e.toLowerCase())),i=t.filter((t=>t.address.toLowerCase()!==e.toLowerCase()||(!r&&n.push(e),!1))),{newAllTokens:s,newAllIgnoredTokens:o}=this._getNewAllTokensState(i,n);this.update({allTokens:s,tokens:i,allIgnoredTokens:o,ignoredTokens:n})}_getNewAllTokensState(e,t){const{allTokens:n,allIgnoredTokens:r}=this.state,{chainId:i,selectedAddress:s}=this.config,o=n[i],a=r[i],u=Object.assign(Object.assign({},o),{[s]:e}),c=Object.assign(Object.assign({},a),{[s]:t});return{newAllTokens:Object.assign(Object.assign({},n),{[i]:u}),newAllIgnoredTokens:Object.assign(Object.assign({},r),{[i]:c})}}clearIgnoredTokens(){this.update({ignoredTokens:[],allIgnoredTokens:{}})}}n.TokensController=g,n.default=g}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/controllers/dist/assets/TokensController.js"}],[1072,{"../BaseControllerV2":1051,"../util":1107,"./determineGasFeeCalculations":1073,"./fetchGasEstimatesViaEthFeeHistory":1075,"./gas-util":1079,"eth-query":3125,"ethereumjs-util":3195,uuid:6724},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{u(r.next(e))}catch(e){s(e)}}function a(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.GasFeeController=n.GAS_ESTIMATE_TYPES=n.LEGACY_GAS_PRICES_API_URL=void 0;const s=i(e("eth-query")),o=e("uuid"),a=e("ethereumjs-util"),u=e("../BaseControllerV2"),c=e("../util"),l=e("./gas-util"),d=i(e("./determineGasFeeCalculations")),f=i(e("./fetchGasEstimatesViaEthFeeHistory"));n.LEGACY_GAS_PRICES_API_URL="https://api.metaswap.codefi.network/gasPrices",n.GAS_ESTIMATE_TYPES={FEE_MARKET:"fee-market",LEGACY:"legacy",ETH_GASPRICE:"eth_gasPrice",NONE:"none"};const h={gasFeeEstimates:{persist:!0,anonymous:!1},estimatedGasFeeTimeBounds:{persist:!0,anonymous:!1},gasEstimateType:{persist:!0,anonymous:!1}},p={gasFeeEstimates:{},estimatedGasFeeTimeBounds:{},gasEstimateType:n.GAS_ESTIMATE_TYPES.NONE};class g extends u.BaseController{constructor({interval:e=15e3,messenger:t,state:i,getCurrentNetworkEIP1559Compatibility:o,getCurrentAccountEIP1559Compatibility:a,getChainId:u,getCurrentNetworkLegacyGasAPICompatibility:c,getProvider:l,onNetworkStateChange:d,legacyAPIEndpoint:f=n.LEGACY_GAS_PRICES_API_URL,EIP1559APIEndpoint:g="https://mock-gas-server.herokuapp.com/",clientId:m}){super({name:"GasFeeController",metadata:h,messenger:t,state:Object.assign(Object.assign({},p),i)}),this.intervalDelay=e,this.pollTokens=new Set,this.getCurrentNetworkEIP1559Compatibility=o,this.getCurrentNetworkLegacyGasAPICompatibility=c,this.getCurrentAccountEIP1559Compatibility=a,this.EIP1559APIEndpoint=g,this.legacyAPIEndpoint=f,this.getChainId=u,this.currentChainId=this.getChainId();const y=l();this.ethQuery=new s.default(y),this.clientId=m,d((()=>r(this,void 0,void 0,(function*(){const e=l(),t=this.getChainId();this.ethQuery=new s.default(e),this.currentChainId!==t&&(this.currentChainId=t,yield this.resetPolling())}))))}resetPolling(){return r(this,void 0,void 0,(function*(){if(0!==this.pollTokens.size){const e=Array.from(this.pollTokens);this.stopPolling(),yield this.getGasFeeEstimatesAndStartPolling(e[0]),e.slice(1).forEach((e=>{this.pollTokens.add(e)}))}}))}fetchGasFeeEstimates(e){return r(this,void 0,void 0,(function*(){return yield this._fetchGasFeeEstimateData(e)}))}getGasFeeEstimatesAndStartPolling(e){return r(this,void 0,void 0,(function*(){const t=e||o.v1();return this.pollTokens.add(t),1===this.pollTokens.size&&(yield this._fetchGasFeeEstimateData(),this._poll()),t}))}_fetchGasFeeEstimateData(e={}){return r(this,void 0,void 0,(function*(){const{shouldUpdateState:t=!0}=e;let n;const r=this.getCurrentNetworkLegacyGasAPICompatibility();let i=this.getChainId();"string"==typeof i&&a.isHexString(i)&&(i=parseInt(i,16));try{n=yield this.getEIP1559Compatibility()}catch(e){console.error(e),n=!1}const s=yield d.default({isEIP1559Compatible:n,isLegacyGasAPICompatible:r,fetchGasEstimates:l.fetchGasEstimates,fetchGasEstimatesUrl:this.EIP1559APIEndpoint.replace("<chain_id>",`${i}`),fetchGasEstimatesViaEthFeeHistory:f.default,fetchLegacyGasPriceEstimates:l.fetchLegacyGasPriceEstimates,fetchLegacyGasPriceEstimatesUrl:this.legacyAPIEndpoint.replace("<chain_id>",`${i}`),fetchEthGasPriceEstimate:l.fetchEthGasPriceEstimate,calculateTimeEstimate:l.calculateTimeEstimate,clientId:this.clientId,ethQuery:this.ethQuery});return t&&this.update((e=>{e.gasFeeEstimates=s.gasFeeEstimates,e.estimatedGasFeeTimeBounds=s.estimatedGasFeeTimeBounds,e.gasEstimateType=s.gasEstimateType})),s}))}disconnectPoller(e){this.pollTokens.delete(e),0===this.pollTokens.size&&this.stopPolling()}stopPolling(){this.intervalId&&clearInterval(this.intervalId),this.pollTokens.clear(),this.resetState()}destroy(){super.destroy(),this.stopPolling()}_poll(){this.intervalId&&clearInterval(this.intervalId),this.intervalId=setInterval((()=>r(this,void 0,void 0,(function*(){yield c.safelyExecute((()=>this._fetchGasFeeEstimateData()))}))),this.intervalDelay)}resetState(){this.update((()=>p))}getEIP1559Compatibility(){var e,t;return r(this,void 0,void 0,(function*(){const n=yield this.getCurrentNetworkEIP1559Compatibility(),r=null===(t=null===(e=this.getCurrentAccountEIP1559Compatibility)||void 0===e?void 0:e.call(this))||void 0===t||t;return n&&r}))}getTimeEstimate(e,t){return this.state.gasFeeEstimates&&this.state.gasEstimateType===n.GAS_ESTIMATE_TYPES.FEE_MARKET?l.calculateTimeEstimate(e,t,this.state.gasFeeEstimates):{}}}n.GasFeeController=g,n.default=g}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/controllers/dist/gas/GasFeeController.js"}],[1107,{"./constants":1071,buffer:2478,"eth-ens-namehash":3042,"eth-rpc-errors":3129,"eth-sig-util":3131,"ethereumjs-util":3195,"ethjs-unit":3247,"fast-deep-equal":4967,jsonschema:5432,"multiformats/cid":5923},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{u(r.next(e))}catch(e){s(e)}}function a(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.isValidJson=n.isNonEmptyArray=n.hasProperty=n.isPlainObject=n.getFormattedIpfsUrl=n.addUrlProtocolPrefix=n.getIpfsCIDv1AndPath=n.removeIpfsProtocolPrefix=n.validateMinimumIncrease=n.isGasPriceValue=n.isFeeMarketEIP1559Values=n.validateGasValues=n.getIncreasedPriceFromExisting=n.getIncreasedPriceHex=n.convertPriceToDecimal=n.isEIP1559Transaction=n.query=n.normalizeEnsName=n.timeoutFetch=n.handleFetch=n.successfulFetch=n.isSmartContractCode=n.validateTokenToWatch=n.validateTypedSignMessageDataV3=n.validateTypedSignMessageDataV1=n.validateSignMessageData=n.normalizeMessageData=n.validateTransaction=n.isValidHexAddress=n.toChecksumHexAddress=n.safelyExecuteWithTimeout=n.safelyExecute=n.normalizeTransaction=n.toHex=n.fromHex=n.hexToText=n.hexToBN=n.handleTransactionFetch=n.getEtherscanApiUrl=n.getBuyURL=n.weiHexToGweiDec=n.gweiDecToWEIBN=n.fractionBN=n.BNToHex=void 0;const s=e("ethereumjs-util"),o=e("ethjs-unit"),a=e("eth-rpc-errors"),u=i(e("eth-ens-namehash")),c=e("eth-sig-util"),l=e("jsonschema"),d=e("multiformats/cid"),f=i(e("fast-deep-equal")),h=e("./constants"),p=/^[0-9A-Fa-f]+$/gu,g={data:e=>s.addHexPrefix(e),from:e=>s.addHexPrefix(e).toLowerCase(),gas:e=>s.addHexPrefix(e),gasPrice:e=>s.addHexPrefix(e),nonce:e=>s.addHexPrefix(e),to:e=>s.addHexPrefix(e).toLowerCase(),value:e=>s.addHexPrefix(e),maxFeePerGas:e=>s.addHexPrefix(e),maxPriorityFeePerGas:e=>s.addHexPrefix(e),estimatedBaseFee:e=>s.addHexPrefix(e)};function m(e,t){let n="api";e!==h.MAINNET&&(n=`api-${e}`);let r=`${`https://${n}.etherscan.io`}/api?`;for(const e in t)t[e]&&(r+=`${e}=${t[e]}&`);return r+="tag=latest&page=1",r}function y(e){return new s.BN(s.stripHexPrefix(e),16)}function v(e,{allowNonPrefixed:t=!0}={}){const n=t?s.addHexPrefix(e):e;return!!s.isHexString(n)&&s.isValidAddress(n)}function b(e,t){return r(this,void 0,void 0,(function*(){const n=yield fetch(e,t);if(!n.ok)throw new Error(`Fetch failed with status '${n.status}' for request '${e}'`);return n}))}function _(e,t){return r(this,void 0,void 0,(function*(){const n=yield b(e,t);return yield n.json()}))}n.BNToHex=function(e){return s.addHexPrefix(e.toString(16))},n.fractionBN=function(e,t,n){const r=new s.BN(t),i=new s.BN(n);return e.mul(r).div(i)},n.gweiDecToWEIBN=function(e){if(Number.isNaN(e))return new s.BN(0);const t=e.toString().split("."),n=t[0]||"0";let r=t[1]||"";if(!r)return o.toWei(n,"gwei");if(r.length<=9)return o.toWei(`${n}.${r}`,"gwei");const i=r.slice(9)[0];r=r.slice(0,9);let a=o.toWei(`${n}.${r}`,"gwei");return Number(i)>=5&&(a=a.add(new s.BN(1))),a},n.weiHexToGweiDec=function(e){const t=new s.BN(s.stripHexPrefix(e),16);return o.fromWei(t,"gwei").toString(10)},n.getBuyURL=function(e="1",t,n=5){switch(e){case"1":return`https://buy.coinbase.com/?code=9ec56d01-7e81-5017-930c-513daa27bb6a&amount=${n}&address=${t}&crypto_currency=ETH`;case"3":return"https://faucet.metamask.io/";case"4":return"https://www.rinkeby.io/";case"5":return"https://goerli-faucet.slock.it/";case"42":return"https://github.com/kovan-testnet/faucet";default:return undefined}},n.getEtherscanApiUrl=m,n.handleTransactionFetch=function(e,t,n,i){return r(this,void 0,void 0,(function*(){const r={module:"account",address:t,startBlock:null==i?void 0:i.fromBlock,apikey:null==i?void 0:i.etherscanApiKey,offset:n.toString(),order:"desc"},s=_(m(e,Object.assign(Object.assign({},r),{action:"txlist"}))),o=_(m(e,Object.assign(Object.assign({},r),{action:"tokentx"})));let[a,u]=yield Promise.all([s,o]);return("0"===a.status||a.result.length<=0)&&(a={status:a.status,result:[]}),("0"===u.status||u.result.length<=0)&&(u={status:u.status,result:[]}),[a,u]}))},n.hexToBN=y,n.hexToText=function(e){try{const n=s.stripHexPrefix(e);return t.from(n,"hex").toString("utf8")}catch(t){return e}},n.fromHex=function(e){return s.BN.isBN(e)?e:new s.BN(y(e).toString(10))},n.toHex=function(e){return"string"==typeof e&&s.isHexString(e)?e:`0x${s.BN.isBN(e)?e.toString(16):new s.BN(e.toString(),10).toString(16)}`},n.normalizeTransaction=function(e){const t={from:""};let n;for(n in g)e[n]&&(t[n]=g[n](e[n]));return t},n.safelyExecute=function(e,t=!1,n){return r(this,void 0,void 0,(function*(){try{return yield e()}catch(e){return t&&console.error(e),null==n||n(e),undefined}}))},n.safelyExecuteWithTimeout=function(e,t=!1,n=500){return r(this,void 0,void 0,(function*(){try{return yield Promise.race([e(),new Promise(((e,t)=>setTimeout((()=>{t(new Error("timeout"))}),n)))])}catch(e){return t&&console.error(e),undefined}}))},n.toChecksumHexAddress=function(e){const t=s.addHexPrefix(e);return s.isHexString(t)?s.toChecksumAddress(t):t},n.isValidHexAddress=v,n.validateTransaction=function(e){if(!e.from||"string"!=typeof e.from||!v(e.from))throw new Error(`Invalid "from" address: ${e.from} must be a valid string.`);if("0x"===e.to||e.to===undefined){if(!e.data)throw new Error(`Invalid "to" address: ${e.to} must be a valid string.`);delete e.to}else if(e.to!==undefined&&!v(e.to))throw new Error(`Invalid "to" address: ${e.to} must be a valid string.`);if(e.value!==undefined){const t=e.value.toString();if(t.includes("-"))throw new Error(`Invalid "value": ${t} is not a positive number.`);if(t.includes("."))throw new Error(`Invalid "value": ${t} number must be denominated in wei.`);const n=parseInt(e.value,10);if(!(Number.isFinite(n)&&!Number.isNaN(n)&&!isNaN(Number(t))&&Number.isSafeInteger(n)))throw new Error(`Invalid "value": ${t} number must be a valid number.`)}},n.normalizeMessageData=function(e){try{const t=s.stripHexPrefix(e);if(t.match(p))return s.addHexPrefix(t)}catch(e){}return s.bufferToHex(t.from(e,"utf8"))},n.validateSignMessageData=function(e){const{from:t,data:n}=e;if(!t||"string"!=typeof t||!v(t))throw new Error(`Invalid "from" address: ${t} must be a valid string.`);if(!n||"string"!=typeof n)throw new Error(`Invalid message "data": ${n} must be a valid string.`)},n.validateTypedSignMessageDataV1=function(e){if(!e.from||"string"!=typeof e.from||!v(e.from))throw new Error(`Invalid "from" address: ${e.from} must be a valid string.`);if(!e.data||!Array.isArray(e.data))throw new Error(`Invalid message "data": ${e.data} must be a valid array.`);try{c.typedSignatureHash(e.data)}catch(e){throw new Error("Expected EIP712 typed data.")}},n.validateTypedSignMessageDataV3=function(e){if(!e.from||"string"!=typeof e.from||!v(e.from))throw new Error(`Invalid "from" address: ${e.from} must be a valid string.`);if(!e.data||"string"!=typeof e.data)throw new Error(`Invalid message "data": ${e.data} must be a valid array.`);let t;try{t=JSON.parse(e.data)}catch(e){throw new Error("Data must be passed as a valid JSON string.")}if(l.validate(t,c.TYPED_MESSAGE_SCHEMA).errors.length>0)throw new Error("Data must conform to EIP-712 schema. See https://git.io/fNtcx.")},n.validateTokenToWatch=function(e){const{address:t,symbol:n,decimals:r}=e;if(!t||!n||void 0===r)throw a.ethErrors.rpc.invalidParams("Must specify address, symbol, and decimals.");if("string"!=typeof n)throw a.ethErrors.rpc.invalidParams("Invalid symbol: not a string.");if(n.length>11)throw a.ethErrors.rpc.invalidParams(`Invalid symbol "${n}": longer than 11 characters.`);const i=parseInt(r,10);if(isNaN(i)||i>36||i<0)throw a.ethErrors.rpc.invalidParams(`Invalid decimals "${r}": must be 0 <= 36.`);if(!v(t))throw a.ethErrors.rpc.invalidParams(`Invalid address "${t}".`)},n.isSmartContractCode=function(e){return!!e&&("0x"!==e&&"0x0"!==e)},n.successfulFetch=b,n.handleFetch=_,n.timeoutFetch=function(e,t,n=500){return r(this,void 0,void 0,(function*(){return Promise.race([b(e,t),new Promise(((e,t)=>setTimeout((()=>{t(new Error("timeout"))}),n)))])}))},n.normalizeEnsName=function(e){if(e&&"string"==typeof e)try{const t=u.default.normalize(e.trim());if(t.match(/^(([\w\d-]+)\.)*[\w\d-]{7,}\.(eth|test)$/u))return t}catch(e){}return null},n.query=function(e,t,n=[]){return new Promise(((r,i)=>{const s=(e,t)=>{e?i(e):r(t)};"function"==typeof e[t]?e[t](...n,s):e.sendAsync({method:t,params:n},s)}))};n.isEIP1559Transaction=e=>{const t=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);return t(e,"maxFeePerGas")&&t(e,"maxPriorityFeePerGas")};n.convertPriceToDecimal=e=>parseInt(e===undefined?"0x0":e,16);n.getIncreasedPriceHex=(e,t)=>s.addHexPrefix(`${parseInt(""+e*t,10).toString(16)}`);n.getIncreasedPriceFromExisting=(e,t)=>n.getIncreasedPriceHex(n.convertPriceToDecimal(e),t);n.validateGasValues=e=>{Object.keys(e).forEach((t=>{const n=e[t];if("string"!=typeof n||!s.isHexString(n))throw new TypeError(`expected hex string for ${t} but received: ${n}`)}))};n.isFeeMarketEIP1559Values=e=>{var t,n;return(null===(t=e)||void 0===t?void 0:t.maxFeePerGas)!==undefined||(null===(n=e)||void 0===n?void 0:n.maxPriorityFeePerGas)!==undefined};function w(e){if(e.startsWith("ipfs://ipfs/"))return e.replace("ipfs://ipfs/","");if(e.startsWith("ipfs://"))return e.replace("ipfs://","");throw new Error("this method should not be used with non ipfs urls")}function k(e){const t=w(e),n=t.indexOf("/"),r=-1!==n?t.substring(0,n):t,i=-1!==n?t.substring(n):undefined;return{cid:d.CID.parse(r).toV1().toString(),path:i}}function S(e){return e.match(/(^http:\/\/)|(^https:\/\/)/u)?e:`https://${e}`}n.isGasPriceValue=e=>{var t;return(null===(t=e)||void 0===t?void 0:t.gasPrice)!==undefined},n.validateMinimumIncrease=function(e,t){const r=n.convertPriceToDecimal(e),i=n.convertPriceToDecimal(t);if(r>=i)return e;throw new Error(`The proposed value: ${r} should meet or exceed the minimum value: ${i}`)},n.removeIpfsProtocolPrefix=w,n.getIpfsCIDv1AndPath=k,n.addUrlProtocolPrefix=S,n.getFormattedIpfsUrl=function(e,t,n){const{host:r,protocol:i,origin:s}=new URL(S(e));if(n){const{cid:e,path:n}=k(t);return`${i}//${e}.ipfs.${r}${null!=n?n:""}`}return`${s}/ipfs/${w(t)}`},n.isPlainObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};n.hasProperty=(e,t)=>Reflect.hasOwnProperty.call(e,t),n.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},n.isValidJson=function(e){try{return f.default(e,JSON.parse(JSON.stringify(e)))}catch(e){return!1}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/controllers/dist/util.js"}],[1094,{"./Caveat":1088,"./Permission":1089,"./PermissionController":1090,"./endowments":1091,"./rpc-methods":1097,"./utils":1099},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(n,"__esModule",{value:!0}),n.endowmentPermissionBuilders=n.permissionRpcMethods=void 0,s(e("./Caveat"),n),s(e("./Permission"),n),s(e("./PermissionController"),n),s(e("./utils"),n),n.permissionRpcMethods=o(e("./rpc-methods"));var a=e("./endowments");Object.defineProperty(n,"endowmentPermissionBuilders",{enumerable:!0,get:function(){return a.endowmentPermissionBuilders}})}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/controllers/dist/permissions/index.js"}],[1081,{"../BaseController":1050,"../util":1107,"async-mutex":2116,"eth-keyring-controller":3116,"eth-sig-util":3131,"ethereumjs-util":3195,"ethereumjs-wallet":1113},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{u(r.next(e))}catch(e){s(e)}}function a(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}u((r=r.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.KeyringController=n.SignTypedDataVersion=n.AccountImportStrategy=n.KeyringTypes=void 0;const u=e("ethereumjs-util"),c=e("eth-sig-util"),l=s(e("ethereumjs-wallet")),d=a(e("eth-keyring-controller")),f=e("async-mutex"),h=e("../BaseController"),p=e("../util"),g=new WeakMap;var m,y;!function(e){e.simple="Simple Key Pair",e.hd="HD Key Tree",e.qr="QR Hardware Wallet Device"}(m=n.KeyringTypes||(n.KeyringTypes={})),function(e){e.privateKey="privateKey",e.json="json"}(n.AccountImportStrategy||(n.AccountImportStrategy={})),function(e){e.V1="V1",e.V3="V3",e.V4="V4"}(y=n.SignTypedDataVersion||(n.SignTypedDataVersion={}));class v extends h.BaseController{constructor({removeIdentity:e,syncIdentities:t,updateIdentities:n,setSelectedAddress:r,setAccountLabel:i},s,o){super(s,o),this.mutex=new f.Mutex,this.name="KeyringController",g.set(this,{keyring:new d.default(Object.assign({initState:o},s))}),this.defaultState=Object.assign(Object.assign({},g.get(this).keyring.store.getState()),{keyrings:[]}),this.removeIdentity=e,this.syncIdentities=t,this.updateIdentities=n,this.setSelectedAddress=r,this.setAccountLabel=i,this.initialize(),this.fullUpdate()}addNewAccount(){return o(this,void 0,void 0,(function*(){const e=g.get(this).keyring.getKeyringsByType("HD Key Tree")[0];if(!e)throw new Error("No HD keyring found");const t=yield g.get(this).keyring.getAccounts();yield g.get(this).keyring.addNewAccount(e);const n=yield g.get(this).keyring.getAccounts();return yield this.verifySeedPhrase(),this.updateIdentities(n),n.forEach((e=>{t.includes(e)||this.setSelectedAddress(e)})),this.fullUpdate()}))}addNewAccountWithoutUpdate(){return o(this,void 0,void 0,(function*(){const e=g.get(this).keyring.getKeyringsByType("HD Key Tree")[0];if(!e)throw new Error("No HD keyring found");return yield g.get(this).keyring.addNewAccount(e),yield this.verifySeedPhrase(),this.fullUpdate()}))}createNewVaultAndRestore(e,t){return o(this,void 0,void 0,(function*(){const n=yield this.mutex.acquire();try{this.updateIdentities([]);const r=yield g.get(this).keyring.createNewVaultAndRestore(e,t);return this.updateIdentities(yield g.get(this).keyring.getAccounts()),this.fullUpdate(),r}finally{n()}}))}createNewVaultAndKeychain(e){return o(this,void 0,void 0,(function*(){const t=yield this.mutex.acquire();try{const n=yield g.get(this).keyring.createNewVaultAndKeychain(e);return this.updateIdentities(yield g.get(this).keyring.getAccounts()),this.fullUpdate(),n}finally{t()}}))}isUnlocked(){return g.get(this).keyring.memStore.getState().isUnlocked}exportSeedPhrase(e){if(g.get(this).keyring.password===e)return g.get(this).keyring.keyrings[0].mnemonic;throw new Error("Invalid password")}exportAccount(e,t){if(g.get(this).keyring.password===e)return g.get(this).keyring.exportAccount(t);throw new Error("Invalid password")}getAccounts(){return g.get(this).keyring.getAccounts()}importAccountWithStrategy(e,t){return o(this,void 0,void 0,(function*(){let n;switch(e){case"privateKey":const[r]=t;if(!r)throw new Error("Cannot import an empty key.");const i=u.addHexPrefix(r);let s;try{s=u.toBuffer(i)}catch(e){throw new Error("Cannot import invalid private key.")}if(!u.isValidPrivate(s))throw new Error("Cannot import invalid private key.");n=u.stripHexPrefix(i);break;case"json":let o;const[a,c]=t;try{o=l.thirdparty.fromEtherWallet(a,c)}catch(e){o=o||(yield l.default.fromV3(a,c,!0))}n=u.bufferToHex(o.getPrivateKey());break;default:throw new Error(`Unexpected import strategy: '${e}'`)}const r=yield g.get(this).keyring.addNewKeyring(m.simple,[n]),i=yield r.getAccounts(),s=yield g.get(this).keyring.getAccounts();return this.updateIdentities(s),this.setSelectedAddress(i[0]),this.fullUpdate()}))}removeAccount(e){return o(this,void 0,void 0,(function*(){return this.removeIdentity(e),yield g.get(this).keyring.removeAccount(e),this.fullUpdate()}))}setLocked(){return g.get(this).keyring.setLocked()}signMessage(e){return g.get(this).keyring.signMessage(e)}signPersonalMessage(e){return g.get(this).keyring.signPersonalMessage(e)}signTypedMessage(e,t){return o(this,void 0,void 0,(function*(){try{const n=c.normalize(e.from),r=yield this.getOrAddQRKeyring();if(-1!==(yield r.getAccounts()).findIndex((e=>e.toLowerCase()===n.toLowerCase()))){const n=Object.assign({},e);return t!==y.V1&&"string"==typeof n.data&&(n.data=JSON.parse(n.data)),g.get(this).keyring.signTypedMessage(n,{version:t})}const{password:i}=g.get(this).keyring,s=yield this.exportAccount(i,n),o=u.toBuffer(u.addHexPrefix(s));switch(t){case y.V1:return c.signTypedDataLegacy(o,{data:e.data});case y.V3:return c.signTypedData(o,{data:JSON.parse(e.data)});case y.V4:return c.signTypedData_v4(o,{data:JSON.parse(e.data)});default:throw new Error(`Unexpected signTypedMessage version: '${t}'`)}}catch(e){throw new Error(`Keyring Controller signTypedMessage: ${e}`)}}))}signTransaction(e,t){return g.get(this).keyring.signTransaction(e,t)}submitPassword(e){return o(this,void 0,void 0,(function*(){yield g.get(this).keyring.submitPassword(e);const t=yield g.get(this).keyring.getAccounts();return yield this.syncIdentities(t),this.fullUpdate()}))}subscribe(e){g.get(this).keyring.store.subscribe(e)}unsubscribe(e){return g.get(this).keyring.store.unsubscribe(e)}onLock(e){return g.get(this).keyring.on("lock",e)}onUnlock(e){return g.get(this).keyring.on("unlock",e)}verifySeedPhrase(){return o(this,void 0,void 0,(function*(){const e=g.get(this).keyring.getKeyringsByType(m.hd)[0];if(!e)throw new Error("No HD keyring found.");const t=(yield e.serialize()).mnemonic,n=yield e.getAccounts();if(0===n.length)throw new Error("Cannot verify an empty keyring.");const r=new(g.get(this).keyring.getKeyringClassForType(m.hd))({mnemonic:t,numberOfAccounts:n.length}),i=yield r.getAccounts();if(i.length!==n.length)throw new Error("Seed phrase imported incorrect number of accounts.");return i.forEach(((e,t)=>{if(e.toLowerCase()!==n[t].toLowerCase())throw new Error("Seed phrase imported different accounts.")})),t}))}fullUpdate(){return o(this,void 0,void 0,(function*(){const e=yield Promise.all(g.get(this).keyring.keyrings.map(((e,t)=>o(this,void 0,void 0,(function*(){const n=yield e.getAccounts();return{accounts:Array.isArray(n)?n.map((e=>p.toChecksumHexAddress(e))):[],index:t,type:e.type}})))));return this.update({keyrings:[...e]}),g.get(this).keyring.fullUpdate()}))}addQRKeyring(){return o(this,void 0,void 0,(function*(){const e=yield g.get(this).keyring.addNewKeyring(m.qr);return yield this.fullUpdate(),e}))}getOrAddQRKeyring(){return o(this,void 0,void 0,(function*(){return g.get(this).keyring.getKeyringsByType(m.qr)[0]||(yield this.addQRKeyring())}))}restoreQRKeyring(e){return o(this,void 0,void 0,(function*(){(yield this.getOrAddQRKeyring()).deserialize(e),this.updateIdentities(yield g.get(this).keyring.getAccounts()),yield this.fullUpdate()}))}resetQRKeyringState(){return o(this,void 0,void 0,(function*(){(yield this.getOrAddQRKeyring()).resetStore()}))}getQRKeyringState(){return o(this,void 0,void 0,(function*(){return(yield this.getOrAddQRKeyring()).getMemStore()}))}submitQRCryptoHDKey(e){return o(this,void 0,void 0,(function*(){(yield this.getOrAddQRKeyring()).submitCryptoHDKey(e)}))}submitQRCryptoAccount(e){return o(this,void 0,void 0,(function*(){(yield this.getOrAddQRKeyring()).submitCryptoAccount(e)}))}submitQRSignature(e,t){return o(this,void 0,void 0,(function*(){(yield this.getOrAddQRKeyring()).submitSignature(e,t)}))}cancelQRSignRequest(){return o(this,void 0,void 0,(function*(){(yield this.getOrAddQRKeyring()).cancelSignRequest()}))}connectQRHardware(e){return o(this,void 0,void 0,(function*(){try{const t=yield this.getOrAddQRKeyring();let n;switch(e){case-1:n=yield t.getPreviousPage();break;case 1:n=yield t.getNextPage();break;default:n=yield t.getFirstPage()}return n.map((e=>Object.assign(Object.assign({},e),{balance:"0x0"})))}catch(e){throw new Error(`Unspecified error when connect QR Hardware, ${e}`)}}))}unlockQRHardwareWalletAccount(e){return o(this,void 0,void 0,(function*(){const t=yield this.getOrAddQRKeyring();t.setAccountToUnlock(e);const n=yield g.get(this).keyring.getAccounts();yield g.get(this).keyring.addNewAccount(t);const r=yield g.get(this).keyring.getAccounts();this.updateIdentities(r),r.forEach((r=>{n.includes(r)||(this.setAccountLabel&&this.setAccountLabel(r,`${t.getName()} ${e}`),this.setSelectedAddress(r))})),yield g.get(this).keyring.persistAllKeyrings(),yield this.fullUpdate()}))}getAccountKeyringType(e){return o(this,void 0,void 0,(function*(){return(yield g.get(this).keyring.getKeyringForAccount(e)).type}))}forgetQRDevice(){return o(this,void 0,void 0,(function*(){(yield this.getOrAddQRKeyring()).forgetDevice();(yield g.get(this).keyring.getAccounts()).forEach((e=>{this.setSelectedAddress(e)})),yield g.get(this).keyring.persistAllKeyrings(),yield this.fullUpdate()}))}}n.KeyringController=v,n.default=v}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/controllers/dist/keyring/KeyringController.js"}],[1103,{"../BaseController":1050,"../util":1107,"eth-phishing-detect/src/config.json":3123,"eth-phishing-detect/src/detector":3124,"punycode/":6227},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{u(r.next(e))}catch(e){s(e)}}function a(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.PhishingController=void 0;const s=e("punycode/"),o=i(e("eth-phishing-detect/src/config.json")),a=i(e("eth-phishing-detect/src/detector")),u=e("../BaseController"),c=e("../util");class l extends u.BaseController{constructor(e,t){super(e,t),this.configUrl="https://cdn.jsdelivr.net/gh/MetaMask/eth-phishing-detect@master/src/config.json",this.name="PhishingController",this.defaultConfig={interval:36e5},this.defaultState={phishing:o.default,whitelist:[]},this.detector=new a.default(this.defaultState.phishing),this.initialize(),this.poll()}poll(e){return r(this,void 0,void 0,(function*(){e&&this.configure({interval:e},!1,!1),this.handle&&clearTimeout(this.handle),yield c.safelyExecute((()=>this.updatePhishingLists())),this.handle=setTimeout((()=>{this.poll(this.config.interval)}),this.config.interval)}))}test(e){const t=s.toASCII(e);return-1===this.state.whitelist.indexOf(t)&&this.detector.check(t).result}bypass(e){const t=s.toASCII(e),{whitelist:n}=this.state;-1===n.indexOf(t)&&this.update({whitelist:[...n,t]})}updatePhishingLists(){return r(this,void 0,void 0,(function*(){if(this.disabled)return;const e=yield this.queryConfig(this.configUrl);e&&(this.detector=new a.default(e),this.update({phishing:e}))}))}queryConfig(e){return r(this,void 0,void 0,(function*(){const t=yield fetch(e,{cache:"no-cache"});switch(t.status){case 200:return yield t.json();case 304:case 403:return null;default:throw new Error(`Fetch failed with status '${t.status}' for request '${e}'`)}}))}}n.PhishingController=l,n.default=l}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/controllers/dist/third-party/PhishingController.js"}],[1058,{"../BaseController":1050,"../constants":1071,"./Standards/CollectibleStandards/ERC1155/ERC1155Standard":1062,"./Standards/CollectibleStandards/ERC721/ERC721Standard":1063,"./Standards/ERC20Standard":1064,"single-call-balance-checker-abi":6547,web3:6823},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{u(r.next(e))}catch(e){s(e)}}function a(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.AssetsContractController=void 0;const s=i(e("web3")),o=i(e("single-call-balance-checker-abi")),a=e("../BaseController"),u=e("../constants"),c=e("./Standards/CollectibleStandards/ERC721/ERC721Standard"),l=e("./Standards/CollectibleStandards/ERC1155/ERC1155Standard"),d=e("./Standards/ERC20Standard"),f="AssetsContractController failed to set the provider correctly. A provider must be set for this method to be available";class h extends a.BaseController{constructor({onPreferencesStateChange:e},t,n){super(t,n),this.name="AssetsContractController",this.defaultConfig={provider:undefined,ipfsGateway:u.IPFS_DEFAULT_GATEWAY_URL},this.initialize(),e((({ipfsGateway:e})=>{this.configure({ipfsGateway:e})}))}set provider(e){this.web3=new s.default(e),this.erc721Standard=new c.ERC721Standard(this.web3),this.erc1155Standard=new l.ERC1155Standard(this.web3),this.erc20Standard=new d.ERC20Standard(this.web3)}get provider(){throw new Error("Property only used for setting")}getERC20BalanceOf(e,t){return r(this,void 0,void 0,(function*(){if(!this.erc20Standard)throw new Error(f);return this.erc20Standard.getBalanceOf(e,t)}))}getERC20TokenDecimals(e){return r(this,void 0,void 0,(function*(){if(this.erc20Standard===undefined)throw new Error(f);return yield this.erc20Standard.getTokenDecimals(e)}))}getERC721CollectibleTokenId(e,t,n){if(this.erc721Standard===undefined)throw new Error(f);return this.erc721Standard.getCollectibleTokenId(e,t,n)}getTokenStandardAndDetails(e,t,n){return r(this,void 0,void 0,(function*(){if(this.erc721Standard===undefined||this.erc1155Standard===undefined||this.erc20Standard===undefined)throw new Error(f);const{ipfsGateway:r}=this.config;try{return Object.assign({},yield this.erc721Standard.getDetails(e,r,n))}catch(e){}try{return Object.assign({},yield this.erc1155Standard.getDetails(e,r,n))}catch(e){}try{return Object.assign({},yield this.erc20Standard.getDetails(e,t))}catch(e){}throw new Error("Unable to determine contract standard")}))}getERC721TokenURI(e,t){return r(this,void 0,void 0,(function*(){if(this.erc721Standard===undefined)throw new Error(f);return this.erc721Standard.getTokenURI(e,t)}))}getERC721AssetName(e){return r(this,void 0,void 0,(function*(){if(this.erc721Standard===undefined)throw new Error(f);return this.erc721Standard.getAssetName(e)}))}getERC721AssetSymbol(e){return r(this,void 0,void 0,(function*(){if(this.erc721Standard===undefined)throw new Error(f);return this.erc721Standard.getAssetSymbol(e)}))}getERC721OwnerOf(e,t){return r(this,void 0,void 0,(function*(){if(this.erc721Standard===undefined)throw new Error(f);return this.erc721Standard.getOwnerOf(e,t)}))}getERC1155TokenURI(e,t){return r(this,void 0,void 0,(function*(){if(this.erc1155Standard===undefined)throw new Error(f);return this.erc1155Standard.getTokenURI(e,t)}))}getERC1155BalanceOf(e,t,n){return r(this,void 0,void 0,(function*(){if(this.erc1155Standard===undefined)throw new Error(f);return yield this.erc1155Standard.getBalanceOf(t,e,n)}))}transferSingleERC1155(e,t,n,i,s){return r(this,void 0,void 0,(function*(){if(this.erc1155Standard===undefined)throw new Error(f);return yield this.erc1155Standard.transferSingle(e,t,n,i,s)}))}getBalancesInSingleCall(e,t){return r(this,void 0,void 0,(function*(){const n=this.web3.eth.contract(o.default).at("0xb1f8e55c7f64d203c1400b9d8555d050f94adf39");return new Promise(((r,i)=>{n.balances([e],t,((e,n)=>{if(e)return void i(e);const s={};n.length>0&&t.forEach(((e,t)=>{const r=n[t];r.isZero()||(s[e]=r)})),r(s)}))}))}))}}n.AssetsContractController=h,n.default=h}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/controllers/dist/assets/AssetsContractController.js"}],[1086,{"../BaseController":1050,"../constants":1071,"async-mutex":2116,"eth-json-rpc-infura/src/createProvider":3073,"eth-query":3125,"web3-provider-engine/subproviders/provider":6805,"web3-provider-engine/zero":6815},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{u(r.next(e))}catch(e){s(e)}}function a(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.NetworkController=n.NetworksChainId=void 0;const o=s(e("eth-query")),a=s(e("web3-provider-engine/subproviders/provider")),u=s(e("eth-json-rpc-infura/src/createProvider")),c=s(e("web3-provider-engine/zero")),l=e("async-mutex"),d=e("../BaseController"),f=e("../constants");var h;!function(e){e.mainnet="1",e.kovan="42",e.rinkeby="4",e.goerli="5",e.ropsten="3",e.localhost="",e.rpc="",e.optimism="10",e.optimismTest="69"}(h=n.NetworksChainId||(n.NetworksChainId={}));class p extends d.BaseController{constructor(e,t){super(e,t),this.internalProviderConfig={},this.mutex=new l.Mutex,this.name="NetworkController",this.defaultState={network:"loading",isCustomNetwork:!1,provider:{type:f.MAINNET,chainId:h.mainnet},properties:{isEIP1559Compatible:!1}},this.initialize(),this.getEIP1559Compatibility()}initializeProvider(e,t,n,r,i){switch(this.update({isCustomNetwork:this.getIsCustomNetwork(n)}),e){case"kovan":case f.MAINNET:case"rinkeby":case"goerli":case"optimism":case"optimismTest":case"ropsten":this.setupInfuraProvider(e);break;case"localhost":this.setupStandardProvider("http://localhost:8545");break;case f.RPC:t&&this.setupStandardProvider(t,n,r,i);break;default:throw new Error(`Unrecognized network type: '${e}'`)}}refreshNetwork(){this.update({network:"loading",properties:{}});const{rpcTarget:e,type:t,chainId:n,ticker:r}=this.state.provider;this.initializeProvider(t,e,n,r),this.lookupNetwork()}registerProvider(){this.provider.on("error",this.verifyNetwork.bind(this)),this.ethQuery=new o.default(this.provider)}setupInfuraProvider(e){const t=u.default({network:e,projectId:this.config.infuraProjectId}),n=new a.default(t),r=Object.assign(Object.assign({},this.internalProviderConfig),{dataSubprovider:n,engineParams:{blockTrackerProvider:t,pollingInterval:12e3}});this.updateProvider(c.default(r))}getIsCustomNetwork(e){return e!==h.mainnet&&e!==h.kovan&&e!==h.rinkeby&&e!==h.goerli&&e!==h.ropsten&&e!==h.localhost}setupStandardProvider(e,t,n,r){const i=Object.assign(Object.assign({},this.internalProviderConfig),{chainId:t,engineParams:{pollingInterval:12e3},nickname:r,rpcUrl:e,ticker:n});this.updateProvider(c.default(i))}updateProvider(e){this.safelyStopProvider(this.provider),this.provider=e,this.registerProvider()}safelyStopProvider(e){setTimeout((()=>{null==e||e.stop()}),500)}verifyNetwork(){"loading"===this.state.network&&this.lookupNetwork()}set providerConfig(e){this.internalProviderConfig=e;const{type:t,rpcTarget:n,chainId:r,ticker:i,nickname:s}=this.state.provider;this.initializeProvider(t,n,r,i,s),this.registerProvider(),this.lookupNetwork()}get providerConfig(){throw new Error("Property only used for setting")}lookupNetwork(){return r(this,void 0,void 0,(function*(){if(!this.ethQuery||!this.ethQuery.sendAsync)return;const e=yield this.mutex.acquire();this.ethQuery.sendAsync({method:"net_version"},((t,n)=>{this.update({network:t?"loading":n}),e()}))}))}setProviderType(e){const t=this.state.provider,{rpcTarget:n,chainId:r,nickname:s}=t,o=i(t,["rpcTarget","chainId","nickname"]);this.update({provider:Object.assign(Object.assign({},o),{type:e,ticker:"ETH",chainId:h[e]})}),this.refreshNetwork()}setRpcTarget(e,t,n,r){this.update({provider:Object.assign(Object.assign({},this.state.provider),{type:f.RPC,ticker:n,rpcTarget:e,chainId:t,nickname:r})}),this.refreshNetwork()}getEIP1559Compatibility(){var e;const{properties:t={}}=this.state;return t.isEIP1559Compatible||"function"!=typeof(null===(e=this.ethQuery)||void 0===e?void 0:e.sendAsync)?Promise.resolve(!0):new Promise(((e,n)=>{this.ethQuery.sendAsync({method:"eth_getBlockByNumber",params:["latest",!1]},((r,i)=>{if(r)n(r);else{const n=void 0!==i.baseFeePerGas;t.isEIP1559Compatible!==n&&this.update({properties:{isEIP1559Compatible:n}}),e(n)}}))}))}}n.NetworkController=p,n.default=p}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/controllers/dist/network/NetworkController.js"}],[1104,{"../BaseController":1050,"../constants":1071,"../util":1107,"@ethereumjs/common":439,"@ethereumjs/tx":443,"async-mutex":2116,"eth-method-registry":1110,"eth-query":3125,"eth-rpc-errors":3129,"ethereumjs-util":3195,events:2479,uuid:6724},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{u(r.next(e))}catch(e){s(e)}}function a(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.TransactionController=n.SPEED_UP_RATE=n.CANCEL_RATE=n.WalletDevice=n.TransactionStatus=void 0;const s=e("events"),o=e("ethereumjs-util"),a=e("eth-rpc-errors"),u=i(e("eth-method-registry")),c=i(e("eth-query")),l=i(e("@ethereumjs/common")),d=e("@ethereumjs/tx"),f=e("uuid"),h=e("async-mutex"),p=e("../BaseController"),g=e("../util"),m=e("../constants"),y="london";var v;!function(e){e.approved="approved",e.cancelled="cancelled",e.confirmed="confirmed",e.failed="failed",e.rejected="rejected",e.signed="signed",e.submitted="submitted",e.unapproved="unapproved"}(v=n.TransactionStatus||(n.TransactionStatus={})),function(e){e.MM_MOBILE="metamask_mobile",e.MM_EXTENSION="metamask_extension",e.OTHER="other_device"}(n.WalletDevice||(n.WalletDevice={})),n.CANCEL_RATE=1.5,n.SPEED_UP_RATE=1.1;class b extends p.BaseController{constructor({getNetworkState:e,onNetworkStateChange:t,getProvider:n},r,i){super(r,i),this.mutex=new h.Mutex,this.normalizeTokenTx=(e,t,n)=>{const r=1e3*parseInt(e.timeStamp,10),{to:i,from:s,gas:o,gasPrice:a,gasUsed:u,hash:c,contractAddress:l,tokenDecimal:d,tokenSymbol:h,value:p}=e;return{id:f.v1({msecs:r}),isTransfer:!0,networkID:t,chainId:n,status:v.confirmed,time:r,transaction:{chainId:1,from:s,gas:o,gasPrice:a,gasUsed:u,to:i,value:p},transactionHash:c,transferInformation:{contractAddress:l,decimals:Number(d),symbol:h},verifiedOnBlockchain:!1}},this.hub=new s.EventEmitter,this.name="TransactionController",this.defaultConfig={interval:15e3,txHistoryLimit:40},this.defaultState={methodData:{},transactions:[]},this.initialize();const o=n();this.getNetworkState=e,this.ethQuery=new c.default(o),this.registry=new u.default({provider:o}),t((()=>{const e=n();this.ethQuery=new c.default(e),this.registry=new u.default({provider:e})})),this.poll()}failTransaction(e,t){const n=Object.assign(Object.assign({},e),{error:t,status:v.failed});this.updateTransaction(n),this.hub.emit(`${e.id}:finished`,n)}registryLookup(e){return r(this,void 0,void 0,(function*(){const t=yield this.registry.lookup(e);return{registryMethod:t,parsedRegistryMethod:this.registry.parse(t)}}))}normalizeTx(e,t,n){const r=1e3*parseInt(e.timeStamp,10),i={blockNumber:e.blockNumber,id:f.v1({msecs:r}),networkID:t,chainId:n,time:r,transaction:{data:e.input,from:e.from,gas:g.BNToHex(new o.BN(e.gas)),gasPrice:g.BNToHex(new o.BN(e.gasPrice)),gasUsed:g.BNToHex(new o.BN(e.gasUsed)),nonce:g.BNToHex(new o.BN(e.nonce)),to:e.to,value:g.BNToHex(new o.BN(e.value))},transactionHash:e.hash,verifiedOnBlockchain:!1};return"0"===e.isError?Object.assign(Object.assign({},i),{status:v.confirmed}):Object.assign(Object.assign({},i),{error:new Error("Transaction failed"),status:v.failed})}poll(e){return r(this,void 0,void 0,(function*(){e&&this.configure({interval:e},!1,!1),this.handle&&clearTimeout(this.handle),yield g.safelyExecute((()=>this.queryTransactionStatuses())),this.handle=setTimeout((()=>{this.poll(this.config.interval)}),this.config.interval)}))}handleMethodData(e){return r(this,void 0,void 0,(function*(){const t=yield this.mutex.acquire();try{const{methodData:n}=this.state;if(Object.keys(n).find((t=>e===t)))return n[e];const r=yield this.registryLookup(e);return this.update({methodData:Object.assign(Object.assign({},n),{[e]:r})}),r}finally{t()}}))}addTransaction(e,t,n){return r(this,void 0,void 0,(function*(){const{provider:r,network:i}=this.getNetworkState(),{transactions:s}=this.state;e=g.normalizeTransaction(e),g.validateTransaction(e);const o={id:f.v1(),networkID:i,chainId:r.chainId,origin:t,status:v.unapproved,time:Date.now(),transaction:e,deviceConfirmedOn:n,verifiedOnBlockchain:!1};try{const{gas:t}=yield this.estimateGas(e);e.gas=t}catch(e){return this.failTransaction(o,e),Promise.reject(e)}const u=new Promise(((e,t)=>{this.hub.once(`${o.id}:finished`,(n=>{switch(n.status){case v.submitted:return e(n.transactionHash);case v.rejected:return t(a.ethErrors.provider.userRejectedRequest("User rejected the transaction"));case v.cancelled:return t(a.ethErrors.rpc.internal("User cancelled the transaction"));case v.failed:return t(a.ethErrors.rpc.internal(n.error.message));default:return t(a.ethErrors.rpc.internal(`MetaMask Tx Signature: Unknown problem: ${JSON.stringify(n)}`))}}))}));return s.push(o),this.update({transactions:this.trimTransactionsForState(s)}),this.hub.emit("unapprovedTransaction",o),{result:u,transactionMeta:o}}))}prepareUnsignedEthTx(e){return d.TransactionFactory.fromTxData(e,{common:this.getCommonConfiguration(),freeze:!1})}getCommonConfiguration(){const{network:e,provider:{type:t,chainId:n,nickname:r}}=this.getNetworkState();if(t!==m.RPC)return new l.default({chain:t,hardfork:y});const i={name:r,chainId:parseInt(n,undefined),networkId:parseInt(e,undefined)};return l.default.forCustomChain(m.MAINNET,i,y)}approveTransaction(e){return r(this,void 0,void 0,(function*(){const{transactions:t}=this.state,n=yield this.mutex.acquire(),{provider:r}=this.getNetworkState(),{chainId:i}=r,s=t.findIndex((({id:t})=>e===t)),a=t[s],{nonce:u}=a.transaction;try{const{from:e}=a.transaction;if(!this.sign)return n(),void this.failTransaction(a,new Error("No sign method defined."));if(!i)return n(),void this.failTransaction(a,new Error("No chainId defined."));const t=parseInt(i,undefined),{approved:r}=v,s=u||(yield g.query(this.ethQuery,"getTransactionCount",[e,"pending"]));a.status=r,a.transaction.nonce=s,a.transaction.chainId=t;const c=Object.assign(Object.assign({},a.transaction),{gasLimit:a.transaction.gas,chainId:t,nonce:s,status:r}),l=g.isEIP1559Transaction(a.transaction),d=l?Object.assign(Object.assign({},c),{maxFeePerGas:a.transaction.maxFeePerGas,maxPriorityFeePerGas:a.transaction.maxPriorityFeePerGas,estimatedBaseFee:a.transaction.estimatedBaseFee,type:2}):c;l&&delete d.gasPrice;const f=this.prepareUnsignedEthTx(d),h=yield this.sign(f,e);a.status=v.signed,this.updateTransaction(a);const p=o.bufferToHex(h.serialize());a.rawTransaction=p,this.updateTransaction(a);const m=yield g.query(this.ethQuery,"sendRawTransaction",[p]);a.transactionHash=m,a.status=v.submitted,this.updateTransaction(a),this.hub.emit(`${a.id}:finished`,a)}catch(e){this.failTransaction(a,e)}finally{n()}}))}cancelTransaction(e){const t=this.state.transactions.find((({id:t})=>t===e));if(!t)return;t.status=v.rejected,this.hub.emit(`${t.id}:finished`,t);const n=this.state.transactions.filter((({id:t})=>t!==e));this.update({transactions:this.trimTransactionsForState(n)})}stopTransaction(e,t){var i,s;return r(this,void 0,void 0,(function*(){t&&g.validateGasValues(t);const r=this.state.transactions.find((({id:t})=>t===e));if(!r)return;if(!this.sign)throw new Error("No sign method defined.");const a=g.getIncreasedPriceFromExisting(r.transaction.gasPrice,n.CANCEL_RATE),u=g.isGasPriceValue(t)&&t.gasPrice,c=u&&g.validateMinimumIncrease(u,a)||a,l=null===(i=r.transaction)||void 0===i?void 0:i.maxFeePerGas,d=g.getIncreasedPriceFromExisting(l,n.CANCEL_RATE),f=g.isFeeMarketEIP1559Values(t)&&t.maxFeePerGas,h=f&&g.validateMinimumIncrease(f,d)||l&&d,p=null===(s=r.transaction)||void 0===s?void 0:s.maxPriorityFeePerGas,m=g.getIncreasedPriceFromExisting(p,n.CANCEL_RATE),y=g.isFeeMarketEIP1559Values(t)&&t.maxPriorityFeePerGas,b=y&&g.validateMinimumIncrease(y,m)||p&&m,_=h&&b?{from:r.transaction.from,gasLimit:r.transaction.gas,maxFeePerGas:h,maxPriorityFeePerGas:b,type:2,nonce:r.transaction.nonce,to:r.transaction.from,value:"0x0"}:{from:r.transaction.from,gasLimit:r.transaction.gas,gasPrice:c,nonce:r.transaction.nonce,to:r.transaction.from,value:"0x0"},w=this.prepareUnsignedEthTx(_),k=yield this.sign(w,r.transaction.from),S=o.bufferToHex(k.serialize());yield g.query(this.ethQuery,"sendRawTransaction",[S]),r.status=v.cancelled,this.hub.emit(`${r.id}:finished`,r)}))}speedUpTransaction(e,t){var i,s;return r(this,void 0,void 0,(function*(){t&&g.validateGasValues(t);const r=this.state.transactions.find((({id:t})=>t===e));if(!r)return;if(!this.sign)throw new Error("No sign method defined.");const{transactions:a}=this.state,u=g.getIncreasedPriceFromExisting(r.transaction.gasPrice,n.SPEED_UP_RATE),c=g.isGasPriceValue(t)&&t.gasPrice,l=c&&g.validateMinimumIncrease(c,u)||u,d=null===(i=r.transaction)||void 0===i?void 0:i.maxFeePerGas,h=g.getIncreasedPriceFromExisting(d,n.SPEED_UP_RATE),p=g.isFeeMarketEIP1559Values(t)&&t.maxFeePerGas,m=p&&g.validateMinimumIncrease(p,h)||d&&h,y=null===(s=r.transaction)||void 0===s?void 0:s.maxPriorityFeePerGas,v=g.getIncreasedPriceFromExisting(y,n.SPEED_UP_RATE),b=g.isFeeMarketEIP1559Values(t)&&t.maxPriorityFeePerGas,_=b&&g.validateMinimumIncrease(b,v)||y&&v,w=m&&_?Object.assign(Object.assign({},r.transaction),{gasLimit:r.transaction.gas,maxFeePerGas:m,maxPriorityFeePerGas:_,type:2}):Object.assign(Object.assign({},r.transaction),{gasLimit:r.transaction.gas,gasPrice:l}),k=this.prepareUnsignedEthTx(w),S=yield this.sign(k,r.transaction.from),T=o.bufferToHex(S.serialize()),E=yield g.query(this.ethQuery,"sendRawTransaction",[T]),P=Object.assign(Object.assign({},r),{id:f.v1(),time:Date.now(),transactionHash:E}),A=m&&_?Object.assign(Object.assign({},P),{transaction:Object.assign(Object.assign({},r.transaction),{maxFeePerGas:m,maxPriorityFeePerGas:_})}):Object.assign(Object.assign({},P),{transaction:Object.assign(Object.assign({},r.transaction),{gasPrice:l})});a.push(A),this.update({transactions:this.trimTransactionsForState(a)}),this.hub.emit(`${r.id}:speedup`,A)}))}estimateGas(e){return r(this,void 0,void 0,(function*(){const t=Object.assign({},e),{gas:n,gasPrice:r,to:i,value:s,data:a}=t,u=void 0===r?yield g.query(this.ethQuery,"gasPrice"):r,{isCustomNetwork:c}=this.getNetworkState();if(void 0!==n)return{gas:n,gasPrice:u};const{gasLimit:l}=yield g.query(this.ethQuery,"getBlockByNumber",["latest",!1]),d=i?yield g.query(this.ethQuery,"getCode",[i]):undefined;if(!c&&(!i||i&&!a&&(!d||"0x"===d)))return{gas:"0x5208",gasPrice:u};t.data=a?o.addHexPrefix(a):a,t.value=void 0===s?"0x0":s;const f=g.hexToBN(l);t.gas=g.BNToHex(g.fractionBN(f,19,20));const h=yield g.query(this.ethQuery,"estimateGas",[t]),p=g.hexToBN(h),m=f.muln(.9),y=p.muln(1.5);return p.gt(m)||c?{gas:o.addHexPrefix(h),gasPrice:u}:y.lt(m)?{gas:o.addHexPrefix(g.BNToHex(y)),gasPrice:u}:{gas:o.addHexPrefix(g.BNToHex(m)),gasPrice:u}}))}queryTransactionStatuses(){return r(this,void 0,void 0,(function*(){const{transactions:e}=this.state,{provider:t,network:n}=this.getNetworkState(),{chainId:i}=t;let s=!1;yield g.safelyExecute((()=>Promise.all(e.map(((t,o)=>r(this,void 0,void 0,(function*(){const r=t.chainId===i||!t.chainId&&t.networkID===n;if(!t.verifiedOnBlockchain&&r){const[n,r]=yield this.blockchainTransactionStateReconciler(t);r&&(e[o]=n,s=r)}}))))))),s&&this.update({transactions:this.trimTransactionsForState(e)})}))}updateTransaction(e){const{transactions:t}=this.state;e.transaction=g.normalizeTransaction(e.transaction),g.validateTransaction(e.transaction);const n=t.findIndex((({id:t})=>e.id===t));t[n]=e,this.update({transactions:this.trimTransactionsForState(t)})}wipeTransactions(e){if(e)return void this.update({transactions:[]});const{provider:t,network:n}=this.getNetworkState(),{chainId:r}=t,i=this.state.transactions.filter((({networkID:e,chainId:t})=>!(t===r||!t&&e===n)));this.update({transactions:this.trimTransactionsForState(i)})}fetchAll(e,t){return r(this,void 0,void 0,(function*(){const{provider:n,network:i}=this.getNetworkState(),{chainId:s,type:o}=n,{transactions:a}=this.state;if(-1===["1","3","4","42"].indexOf(i))return undefined;const[u,c]=yield g.handleTransactionFetch(o,e,this.config.txHistoryLimit,t),l=u.result.map((e=>this.normalizeTx(e,i,s))),d=c.result.map((e=>this.normalizeTokenTx(e,i,s))),[f,h]=this.etherscanTransactionStateReconciler([...l,...d],a);let p;return h.sort(((e,t)=>e.time<t.time?-1:1)),h.forEach((t=>r(this,void 0,void 0,(function*(){if((t.chainId===s||!t.chainId&&t.networkID===i)&&t.transaction.to&&t.transaction.to.toLowerCase()===e.toLowerCase()&&t.blockNumber&&(!p||parseInt(p,10)<parseInt(t.blockNumber,10))&&(p=t.blockNumber),t.toSmartContract===undefined)if(!t.transaction.to||t.transaction.data&&"0x"===t.transaction.data)t.toSmartContract=!1;else{const e=yield g.query(this.ethQuery,"getCode",[t.transaction.to]);t.toSmartContract=g.isSmartContractCode(e)}})))),f&&this.update({transactions:this.trimTransactionsForState(h)}),p}))}trimTransactionsForState(e){const t=new Set,n=e.reverse().filter((e=>{const{chainId:n,networkID:r,status:i,transaction:s,time:o}=e;if(s){const e=`${s.nonce}-${null!=n?n:r}-${new Date(o).toDateString()}`;if(t.has(e))return!0;if(t.size<this.config.txHistoryLimit||!this.isFinalState(i))return t.add(e),!0}return!1}));return n.reverse(),n}isFinalState(e){return e===v.rejected||e===v.confirmed||e===v.failed||e===v.cancelled}blockchainTransactionStateReconciler(e){return r(this,void 0,void 0,(function*(){const{status:t,transactionHash:n}=e;switch(t){case v.confirmed:const t=yield g.query(this.ethQuery,"getTransactionReceipt",[n]);if(!t)return[e,!1];if(e.verifiedOnBlockchain=!0,e.transaction.gasUsed=t.gasUsed,0===Number(t.status)){const t=new Error("Transaction failed. The transaction was reversed");return this.failTransaction(e,t),[e,!1]}return[e,!0];case v.submitted:const r=yield g.query(this.ethQuery,"getTransactionByHash",[n]);if(!r){if(yield this.checkTxReceiptStatusIsFailed(n)){const t=new Error("Transaction failed. The transaction was dropped or replaced by a new one");this.failTransaction(e,t)}}return(null==r?void 0:r.blockNumber)?(e.status=v.confirmed,this.hub.emit(`${e.id}:confirmed`,e),[e,!0]):[e,!1];default:return[e,!1]}}))}checkTxReceiptStatusIsFailed(e){return r(this,void 0,void 0,(function*(){const t=yield g.query(this.ethQuery,"getTransactionReceipt",[e]);return!!t&&0===Number(t.status)}))}etherscanTransactionStateReconciler(e,t){const n=this.getUpdatedTransactions(e,t),r=this.getNewTransactions(e,t),i=t.map((e=>{const t=n.findIndex((({transactionHash:t})=>t===e.transactionHash));return-1===t?e:n[t]}));return[r.length>0||i.length>0,[...r,...i]]}getNewTransactions(e,t){return e.filter((e=>!t.find((({transactionHash:t})=>t===e.transactionHash))))}getUpdatedTransactions(e,t){return e.filter((e=>t.find((t=>e.transactionHash===t.transactionHash&&this.isTransactionOutdated(e,t)))))}isTransactionOutdated(e,t){const n=this.isStatusOutdated(e.transactionHash,t.transactionHash,e.status,t.status),r=this.isGasDataOutdated(e.transaction.gasUsed,t.transaction.gasUsed);return n||r}isStatusOutdated(e,t,n,r){return e===t&&n!==r}isGasDataOutdated(e,t){return e!==t}}n.TransactionController=b,n.default=b}}},{package:"@metamask/controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/controllers/dist/transaction/TransactionController.js"}],[1187,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e){let t;switch(e){case"0x1":t="";break;case"0x3":t="ropsten.";break;case"0x4":t="rinkeby.";break;case"0x5":t="goerli.";break;case"0x2a":t="kovan.";break;default:t=null}return t}}}},{package:"@metamask/etherscan-link",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/etherscan-link/dist/prefix-for-chain.js"}],[1185,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.addPathToUrl=void 0,n.addPathToUrl=(e,t,n)=>{const{username:r,password:i,protocol:s,host:o,pathname:a,search:u,hash:c}=new URL(e),l=a.endsWith("/")?`${a}${t}/${n}`:`${a}/${t}/${n}`;return new URL(`${s}//${r?`${r}:${i}`:""}${o}${l}${u}${c}`).toString()}}}},{package:"@metamask/etherscan-link",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/etherscan-link/dist/helpers.js"}],[1188,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e){let t;switch(parseInt(e)){case 1:t="";break;case 3:t="ropsten.";break;case 4:t="rinkeby.";break;case 5:t="goerli.";break;case 42:t="kovan.";break;default:t=null}return t}}}},{package:"@metamask/etherscan-link",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/etherscan-link/dist/prefix-for-network.js"}],[3199,{buffer:2477},function(){with(this)return function(){"use strict";return function(e,t,n){!function(t,n){function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function s(e,t,n){if(s.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}var o;"object"==typeof t?t.exports=s:n.BN=s,s.BN=s,s.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:e("buffer").Buffer}catch(e){}function a(e,t){var n=e.charCodeAt(t);return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:void r(!1,"Invalid character in "+e)}function u(e,t,n){var r=a(e,n);return n-1>=t&&(r|=a(e,n-1)<<4),r}function c(e,t,n,i){for(var s=0,o=0,a=Math.min(e.length,n),u=t;u<a;u++){var c=e.charCodeAt(u)-48;s*=i,o=c>=49?c-49+10:c>=17?c-17+10:c,r(c>=0&&o<i,"Invalid character"),s+=o}return s}function l(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(s.isBN=function(e){return e instanceof s||null!==e&&"object"==typeof e&&e.constructor.wordSize===s.wordSize&&Array.isArray(e.words)},s.max=function(e,t){return e.cmp(t)>0?e:t},s.min=function(e,t){return e.cmp(t)<0?e:t},s.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,n):(this._parseBase(e,t,i),"le"===n&&this._initArray(this.toArray(),t,n)))},s.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},s.prototype._initArray=function(e,t,n){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var s,o,a=0;if("be"===n)for(i=e.length-1,s=0;i>=0;i-=3)o=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);else if("le"===n)for(i=0,s=0;i<e.length;i+=3)o=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);return this._strip()},s.prototype._parseHex=function(e,t,n){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,s=0,o=0;if("be"===n)for(r=e.length-1;r>=t;r-=2)i=u(e,t,r)<<s,this.words[o]|=67108863&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8;else for(r=(e.length-t)%2==0?t+1:t;r<e.length;r+=2)i=u(e,t,r)<<s,this.words[o]|=67108863&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8;this._strip()},s.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=t)r++;r--,i=i/t|0;for(var s=e.length-n,o=s%r,a=Math.min(s,s-o)+n,u=0,l=n;l<a;l+=r)u=c(e,l,l+r,t),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==o){var d=1;for(u=c(e,l,e.length,t),l=0;l<o;l++)d*=t;this.imuln(d),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},s.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},s.prototype._move=function(e){l(e,this)},s.prototype.clone=function(){var e=new s(null);return this.copy(e),e},s.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=d}catch(e){s.prototype.inspect=d}else s.prototype.inspect=d;function d(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var i=0,s=0,o=0;o<this.length;o++){var a=this.words[o],u=(16777215&(a<<i|s)).toString(16);n=0!==(s=a>>>24-i&16777215)||o!==this.length-1?f[6-u.length]+u+n:u+n,(i+=2)>=26&&(i-=26,o--)}for(0!==s&&(n=s.toString(16)+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var c=h[e],l=p[e];n="";var d=this.clone();for(d.negative=0;!d.isZero();){var g=d.modrn(l).toString(e);n=(d=d.idivn(l)).isZero()?g+n:f[c-g.length]+g+n}for(this.isZero()&&(n="0"+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(e,t){return this.toArrayLike(o,e,t)}),s.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)};function g(e,t,n){n.negative=t.negative^e.negative;var r=e.length+t.length|0;n.length=r,r=r-1|0;var i=0|e.words[0],s=0|t.words[0],o=i*s,a=67108863&o,u=o/67108864|0;n.words[0]=a;for(var c=1;c<r;c++){for(var l=u>>>26,d=67108863&u,f=Math.min(c,t.length-1),h=Math.max(0,c-e.length+1);h<=f;h++){var p=c-h|0;l+=(o=(i=0|e.words[p])*(s=0|t.words[h])+d)/67108864|0,d=67108863&o}n.words[c]=0|d,u=0|l}return 0!==u?n.words[c]=0|u:n.length--,n._strip()}s.prototype.toArrayLike=function(e,t,n){this._strip();var i=this.byteLength(),s=n||Math.max(1,i);r(i<=s,"byte array longer than desired length"),r(s>0,"Requested array length <= 0");var o=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,s);return this["_toArrayLike"+("le"===t?"LE":"BE")](o,i),o},s.prototype._toArrayLikeLE=function(e,t){for(var n=0,r=0,i=0,s=0;i<this.length;i++){var o=this.words[i]<<s|r;e[n++]=255&o,n<e.length&&(e[n++]=o>>8&255),n<e.length&&(e[n++]=o>>16&255),6===s?(n<e.length&&(e[n++]=o>>24&255),r=0,s=0):(r=o>>>24,s+=2)}if(n<e.length)for(e[n++]=r;n<e.length;)e[n++]=0},s.prototype._toArrayLikeBE=function(e,t){for(var n=e.length-1,r=0,i=0,s=0;i<this.length;i++){var o=this.words[i]<<s|r;e[n--]=255&o,n>=0&&(e[n--]=o>>8&255),n>=0&&(e[n--]=o>>16&255),6===s?(n>=0&&(e[n--]=o>>24&255),r=0,s=0):(r=o>>>24,s+=2)}if(n>=0)for(e[n--]=r;n>=0;)e[n--]=0},Math.clz32?s.prototype._countBits=function(e){return 32-Math.clz32(e)}:s.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},s.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 0==(8191&t)&&(n+=13,t>>>=13),0==(127&t)&&(n+=7,t>>>=7),0==(15&t)&&(n+=4,t>>>=4),0==(3&t)&&(n+=2,t>>>=2),0==(1&t)&&n++,n},s.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},s.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},s.prototype.ior=function(e){return r(0==(this.negative|e.negative)),this.iuor(e)},s.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},s.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},s.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this._strip()},s.prototype.iand=function(e){return r(0==(this.negative|e.negative)),this.iuand(e)},s.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},s.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},s.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var r=0;r<n.length;r++)this.words[r]=t.words[r]^n.words[r];if(this!==t)for(;r<t.length;r++)this.words[r]=t.words[r];return this.length=t.length,this._strip()},s.prototype.ixor=function(e){return r(0==(this.negative|e.negative)),this.iuxor(e)},s.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},s.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},s.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this._strip()},s.prototype.notn=function(e){return this.clone().inotn(e)},s.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var n=e/26|0,i=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<i:this.words[n]&~(1<<i),this._strip()},s.prototype.iadd=function(e){var t,n,r;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(n=this,r=e):(n=e,r=this);for(var i=0,s=0;s<r.length;s++)t=(0|n.words[s])+(0|r.words[s])+i,this.words[s]=67108863&t,i=t>>>26;for(;0!==i&&s<n.length;s++)t=(0|n.words[s])+i,this.words[s]=67108863&t,i=t>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this},s.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},s.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n,r,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=e):(n=e,r=this);for(var s=0,o=0;o<r.length;o++)s=(t=(0|n.words[o])-(0|r.words[o])+s)>>26,this.words[o]=67108863&t;for(;0!==s&&o<n.length;o++)s=(t=(0|n.words[o])+s)>>26,this.words[o]=67108863&t;if(0===s&&o<n.length&&n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this.length=Math.max(this.length,o),n!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(e){return this.clone().isub(e)};var m=function(e,t,n){var r,i,s,o=e.words,a=t.words,u=n.words,c=0,l=0|o[0],d=8191&l,f=l>>>13,h=0|o[1],p=8191&h,g=h>>>13,m=0|o[2],y=8191&m,v=m>>>13,b=0|o[3],_=8191&b,w=b>>>13,k=0|o[4],S=8191&k,T=k>>>13,E=0|o[5],P=8191&E,A=E>>>13,O=0|o[6],C=8191&O,x=O>>>13,M=0|o[7],j=8191&M,I=M>>>13,N=0|o[8],R=8191&N,D=N>>>13,B=0|o[9],U=8191&B,F=B>>>13,L=0|a[0],H=8191&L,G=L>>>13,K=0|a[1],q=8191&K,$=K>>>13,W=0|a[2],z=8191&W,V=W>>>13,Y=0|a[3],Q=8191&Y,J=Y>>>13,X=0|a[4],Z=8191&X,ee=X>>>13,te=0|a[5],ne=8191&te,re=te>>>13,ie=0|a[6],se=8191&ie,oe=ie>>>13,ae=0|a[7],ue=8191&ae,ce=ae>>>13,le=0|a[8],de=8191&le,fe=le>>>13,he=0|a[9],pe=8191&he,ge=he>>>13;n.negative=e.negative^t.negative,n.length=19;var me=(c+(r=Math.imul(d,H))|0)+((8191&(i=(i=Math.imul(d,G))+Math.imul(f,H)|0))<<13)|0;c=((s=Math.imul(f,G))+(i>>>13)|0)+(me>>>26)|0,me&=67108863,r=Math.imul(p,H),i=(i=Math.imul(p,G))+Math.imul(g,H)|0,s=Math.imul(g,G);var ye=(c+(r=r+Math.imul(d,q)|0)|0)+((8191&(i=(i=i+Math.imul(d,$)|0)+Math.imul(f,q)|0))<<13)|0;c=((s=s+Math.imul(f,$)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,r=Math.imul(y,H),i=(i=Math.imul(y,G))+Math.imul(v,H)|0,s=Math.imul(v,G),r=r+Math.imul(p,q)|0,i=(i=i+Math.imul(p,$)|0)+Math.imul(g,q)|0,s=s+Math.imul(g,$)|0;var ve=(c+(r=r+Math.imul(d,z)|0)|0)+((8191&(i=(i=i+Math.imul(d,V)|0)+Math.imul(f,z)|0))<<13)|0;c=((s=s+Math.imul(f,V)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,r=Math.imul(_,H),i=(i=Math.imul(_,G))+Math.imul(w,H)|0,s=Math.imul(w,G),r=r+Math.imul(y,q)|0,i=(i=i+Math.imul(y,$)|0)+Math.imul(v,q)|0,s=s+Math.imul(v,$)|0,r=r+Math.imul(p,z)|0,i=(i=i+Math.imul(p,V)|0)+Math.imul(g,z)|0,s=s+Math.imul(g,V)|0;var be=(c+(r=r+Math.imul(d,Q)|0)|0)+((8191&(i=(i=i+Math.imul(d,J)|0)+Math.imul(f,Q)|0))<<13)|0;c=((s=s+Math.imul(f,J)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,r=Math.imul(S,H),i=(i=Math.imul(S,G))+Math.imul(T,H)|0,s=Math.imul(T,G),r=r+Math.imul(_,q)|0,i=(i=i+Math.imul(_,$)|0)+Math.imul(w,q)|0,s=s+Math.imul(w,$)|0,r=r+Math.imul(y,z)|0,i=(i=i+Math.imul(y,V)|0)+Math.imul(v,z)|0,s=s+Math.imul(v,V)|0,r=r+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,J)|0)+Math.imul(g,Q)|0,s=s+Math.imul(g,J)|0;var _e=(c+(r=r+Math.imul(d,Z)|0)|0)+((8191&(i=(i=i+Math.imul(d,ee)|0)+Math.imul(f,Z)|0))<<13)|0;c=((s=s+Math.imul(f,ee)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,r=Math.imul(P,H),i=(i=Math.imul(P,G))+Math.imul(A,H)|0,s=Math.imul(A,G),r=r+Math.imul(S,q)|0,i=(i=i+Math.imul(S,$)|0)+Math.imul(T,q)|0,s=s+Math.imul(T,$)|0,r=r+Math.imul(_,z)|0,i=(i=i+Math.imul(_,V)|0)+Math.imul(w,z)|0,s=s+Math.imul(w,V)|0,r=r+Math.imul(y,Q)|0,i=(i=i+Math.imul(y,J)|0)+Math.imul(v,Q)|0,s=s+Math.imul(v,J)|0,r=r+Math.imul(p,Z)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(g,Z)|0,s=s+Math.imul(g,ee)|0;var we=(c+(r=r+Math.imul(d,ne)|0)|0)+((8191&(i=(i=i+Math.imul(d,re)|0)+Math.imul(f,ne)|0))<<13)|0;c=((s=s+Math.imul(f,re)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,r=Math.imul(C,H),i=(i=Math.imul(C,G))+Math.imul(x,H)|0,s=Math.imul(x,G),r=r+Math.imul(P,q)|0,i=(i=i+Math.imul(P,$)|0)+Math.imul(A,q)|0,s=s+Math.imul(A,$)|0,r=r+Math.imul(S,z)|0,i=(i=i+Math.imul(S,V)|0)+Math.imul(T,z)|0,s=s+Math.imul(T,V)|0,r=r+Math.imul(_,Q)|0,i=(i=i+Math.imul(_,J)|0)+Math.imul(w,Q)|0,s=s+Math.imul(w,J)|0,r=r+Math.imul(y,Z)|0,i=(i=i+Math.imul(y,ee)|0)+Math.imul(v,Z)|0,s=s+Math.imul(v,ee)|0,r=r+Math.imul(p,ne)|0,i=(i=i+Math.imul(p,re)|0)+Math.imul(g,ne)|0,s=s+Math.imul(g,re)|0;var ke=(c+(r=r+Math.imul(d,se)|0)|0)+((8191&(i=(i=i+Math.imul(d,oe)|0)+Math.imul(f,se)|0))<<13)|0;c=((s=s+Math.imul(f,oe)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,r=Math.imul(j,H),i=(i=Math.imul(j,G))+Math.imul(I,H)|0,s=Math.imul(I,G),r=r+Math.imul(C,q)|0,i=(i=i+Math.imul(C,$)|0)+Math.imul(x,q)|0,s=s+Math.imul(x,$)|0,r=r+Math.imul(P,z)|0,i=(i=i+Math.imul(P,V)|0)+Math.imul(A,z)|0,s=s+Math.imul(A,V)|0,r=r+Math.imul(S,Q)|0,i=(i=i+Math.imul(S,J)|0)+Math.imul(T,Q)|0,s=s+Math.imul(T,J)|0,r=r+Math.imul(_,Z)|0,i=(i=i+Math.imul(_,ee)|0)+Math.imul(w,Z)|0,s=s+Math.imul(w,ee)|0,r=r+Math.imul(y,ne)|0,i=(i=i+Math.imul(y,re)|0)+Math.imul(v,ne)|0,s=s+Math.imul(v,re)|0,r=r+Math.imul(p,se)|0,i=(i=i+Math.imul(p,oe)|0)+Math.imul(g,se)|0,s=s+Math.imul(g,oe)|0;var Se=(c+(r=r+Math.imul(d,ue)|0)|0)+((8191&(i=(i=i+Math.imul(d,ce)|0)+Math.imul(f,ue)|0))<<13)|0;c=((s=s+Math.imul(f,ce)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,r=Math.imul(R,H),i=(i=Math.imul(R,G))+Math.imul(D,H)|0,s=Math.imul(D,G),r=r+Math.imul(j,q)|0,i=(i=i+Math.imul(j,$)|0)+Math.imul(I,q)|0,s=s+Math.imul(I,$)|0,r=r+Math.imul(C,z)|0,i=(i=i+Math.imul(C,V)|0)+Math.imul(x,z)|0,s=s+Math.imul(x,V)|0,r=r+Math.imul(P,Q)|0,i=(i=i+Math.imul(P,J)|0)+Math.imul(A,Q)|0,s=s+Math.imul(A,J)|0,r=r+Math.imul(S,Z)|0,i=(i=i+Math.imul(S,ee)|0)+Math.imul(T,Z)|0,s=s+Math.imul(T,ee)|0,r=r+Math.imul(_,ne)|0,i=(i=i+Math.imul(_,re)|0)+Math.imul(w,ne)|0,s=s+Math.imul(w,re)|0,r=r+Math.imul(y,se)|0,i=(i=i+Math.imul(y,oe)|0)+Math.imul(v,se)|0,s=s+Math.imul(v,oe)|0,r=r+Math.imul(p,ue)|0,i=(i=i+Math.imul(p,ce)|0)+Math.imul(g,ue)|0,s=s+Math.imul(g,ce)|0;var Te=(c+(r=r+Math.imul(d,de)|0)|0)+((8191&(i=(i=i+Math.imul(d,fe)|0)+Math.imul(f,de)|0))<<13)|0;c=((s=s+Math.imul(f,fe)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,r=Math.imul(U,H),i=(i=Math.imul(U,G))+Math.imul(F,H)|0,s=Math.imul(F,G),r=r+Math.imul(R,q)|0,i=(i=i+Math.imul(R,$)|0)+Math.imul(D,q)|0,s=s+Math.imul(D,$)|0,r=r+Math.imul(j,z)|0,i=(i=i+Math.imul(j,V)|0)+Math.imul(I,z)|0,s=s+Math.imul(I,V)|0,r=r+Math.imul(C,Q)|0,i=(i=i+Math.imul(C,J)|0)+Math.imul(x,Q)|0,s=s+Math.imul(x,J)|0,r=r+Math.imul(P,Z)|0,i=(i=i+Math.imul(P,ee)|0)+Math.imul(A,Z)|0,s=s+Math.imul(A,ee)|0,r=r+Math.imul(S,ne)|0,i=(i=i+Math.imul(S,re)|0)+Math.imul(T,ne)|0,s=s+Math.imul(T,re)|0,r=r+Math.imul(_,se)|0,i=(i=i+Math.imul(_,oe)|0)+Math.imul(w,se)|0,s=s+Math.imul(w,oe)|0,r=r+Math.imul(y,ue)|0,i=(i=i+Math.imul(y,ce)|0)+Math.imul(v,ue)|0,s=s+Math.imul(v,ce)|0,r=r+Math.imul(p,de)|0,i=(i=i+Math.imul(p,fe)|0)+Math.imul(g,de)|0,s=s+Math.imul(g,fe)|0;var Ee=(c+(r=r+Math.imul(d,pe)|0)|0)+((8191&(i=(i=i+Math.imul(d,ge)|0)+Math.imul(f,pe)|0))<<13)|0;c=((s=s+Math.imul(f,ge)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,r=Math.imul(U,q),i=(i=Math.imul(U,$))+Math.imul(F,q)|0,s=Math.imul(F,$),r=r+Math.imul(R,z)|0,i=(i=i+Math.imul(R,V)|0)+Math.imul(D,z)|0,s=s+Math.imul(D,V)|0,r=r+Math.imul(j,Q)|0,i=(i=i+Math.imul(j,J)|0)+Math.imul(I,Q)|0,s=s+Math.imul(I,J)|0,r=r+Math.imul(C,Z)|0,i=(i=i+Math.imul(C,ee)|0)+Math.imul(x,Z)|0,s=s+Math.imul(x,ee)|0,r=r+Math.imul(P,ne)|0,i=(i=i+Math.imul(P,re)|0)+Math.imul(A,ne)|0,s=s+Math.imul(A,re)|0,r=r+Math.imul(S,se)|0,i=(i=i+Math.imul(S,oe)|0)+Math.imul(T,se)|0,s=s+Math.imul(T,oe)|0,r=r+Math.imul(_,ue)|0,i=(i=i+Math.imul(_,ce)|0)+Math.imul(w,ue)|0,s=s+Math.imul(w,ce)|0,r=r+Math.imul(y,de)|0,i=(i=i+Math.imul(y,fe)|0)+Math.imul(v,de)|0,s=s+Math.imul(v,fe)|0;var Pe=(c+(r=r+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,ge)|0)+Math.imul(g,pe)|0))<<13)|0;c=((s=s+Math.imul(g,ge)|0)+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,r=Math.imul(U,z),i=(i=Math.imul(U,V))+Math.imul(F,z)|0,s=Math.imul(F,V),r=r+Math.imul(R,Q)|0,i=(i=i+Math.imul(R,J)|0)+Math.imul(D,Q)|0,s=s+Math.imul(D,J)|0,r=r+Math.imul(j,Z)|0,i=(i=i+Math.imul(j,ee)|0)+Math.imul(I,Z)|0,s=s+Math.imul(I,ee)|0,r=r+Math.imul(C,ne)|0,i=(i=i+Math.imul(C,re)|0)+Math.imul(x,ne)|0,s=s+Math.imul(x,re)|0,r=r+Math.imul(P,se)|0,i=(i=i+Math.imul(P,oe)|0)+Math.imul(A,se)|0,s=s+Math.imul(A,oe)|0,r=r+Math.imul(S,ue)|0,i=(i=i+Math.imul(S,ce)|0)+Math.imul(T,ue)|0,s=s+Math.imul(T,ce)|0,r=r+Math.imul(_,de)|0,i=(i=i+Math.imul(_,fe)|0)+Math.imul(w,de)|0,s=s+Math.imul(w,fe)|0;var Ae=(c+(r=r+Math.imul(y,pe)|0)|0)+((8191&(i=(i=i+Math.imul(y,ge)|0)+Math.imul(v,pe)|0))<<13)|0;c=((s=s+Math.imul(v,ge)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,r=Math.imul(U,Q),i=(i=Math.imul(U,J))+Math.imul(F,Q)|0,s=Math.imul(F,J),r=r+Math.imul(R,Z)|0,i=(i=i+Math.imul(R,ee)|0)+Math.imul(D,Z)|0,s=s+Math.imul(D,ee)|0,r=r+Math.imul(j,ne)|0,i=(i=i+Math.imul(j,re)|0)+Math.imul(I,ne)|0,s=s+Math.imul(I,re)|0,r=r+Math.imul(C,se)|0,i=(i=i+Math.imul(C,oe)|0)+Math.imul(x,se)|0,s=s+Math.imul(x,oe)|0,r=r+Math.imul(P,ue)|0,i=(i=i+Math.imul(P,ce)|0)+Math.imul(A,ue)|0,s=s+Math.imul(A,ce)|0,r=r+Math.imul(S,de)|0,i=(i=i+Math.imul(S,fe)|0)+Math.imul(T,de)|0,s=s+Math.imul(T,fe)|0;var Oe=(c+(r=r+Math.imul(_,pe)|0)|0)+((8191&(i=(i=i+Math.imul(_,ge)|0)+Math.imul(w,pe)|0))<<13)|0;c=((s=s+Math.imul(w,ge)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,r=Math.imul(U,Z),i=(i=Math.imul(U,ee))+Math.imul(F,Z)|0,s=Math.imul(F,ee),r=r+Math.imul(R,ne)|0,i=(i=i+Math.imul(R,re)|0)+Math.imul(D,ne)|0,s=s+Math.imul(D,re)|0,r=r+Math.imul(j,se)|0,i=(i=i+Math.imul(j,oe)|0)+Math.imul(I,se)|0,s=s+Math.imul(I,oe)|0,r=r+Math.imul(C,ue)|0,i=(i=i+Math.imul(C,ce)|0)+Math.imul(x,ue)|0,s=s+Math.imul(x,ce)|0,r=r+Math.imul(P,de)|0,i=(i=i+Math.imul(P,fe)|0)+Math.imul(A,de)|0,s=s+Math.imul(A,fe)|0;var Ce=(c+(r=r+Math.imul(S,pe)|0)|0)+((8191&(i=(i=i+Math.imul(S,ge)|0)+Math.imul(T,pe)|0))<<13)|0;c=((s=s+Math.imul(T,ge)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,r=Math.imul(U,ne),i=(i=Math.imul(U,re))+Math.imul(F,ne)|0,s=Math.imul(F,re),r=r+Math.imul(R,se)|0,i=(i=i+Math.imul(R,oe)|0)+Math.imul(D,se)|0,s=s+Math.imul(D,oe)|0,r=r+Math.imul(j,ue)|0,i=(i=i+Math.imul(j,ce)|0)+Math.imul(I,ue)|0,s=s+Math.imul(I,ce)|0,r=r+Math.imul(C,de)|0,i=(i=i+Math.imul(C,fe)|0)+Math.imul(x,de)|0,s=s+Math.imul(x,fe)|0;var xe=(c+(r=r+Math.imul(P,pe)|0)|0)+((8191&(i=(i=i+Math.imul(P,ge)|0)+Math.imul(A,pe)|0))<<13)|0;c=((s=s+Math.imul(A,ge)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,r=Math.imul(U,se),i=(i=Math.imul(U,oe))+Math.imul(F,se)|0,s=Math.imul(F,oe),r=r+Math.imul(R,ue)|0,i=(i=i+Math.imul(R,ce)|0)+Math.imul(D,ue)|0,s=s+Math.imul(D,ce)|0,r=r+Math.imul(j,de)|0,i=(i=i+Math.imul(j,fe)|0)+Math.imul(I,de)|0,s=s+Math.imul(I,fe)|0;var Me=(c+(r=r+Math.imul(C,pe)|0)|0)+((8191&(i=(i=i+Math.imul(C,ge)|0)+Math.imul(x,pe)|0))<<13)|0;c=((s=s+Math.imul(x,ge)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,r=Math.imul(U,ue),i=(i=Math.imul(U,ce))+Math.imul(F,ue)|0,s=Math.imul(F,ce),r=r+Math.imul(R,de)|0,i=(i=i+Math.imul(R,fe)|0)+Math.imul(D,de)|0,s=s+Math.imul(D,fe)|0;var je=(c+(r=r+Math.imul(j,pe)|0)|0)+((8191&(i=(i=i+Math.imul(j,ge)|0)+Math.imul(I,pe)|0))<<13)|0;c=((s=s+Math.imul(I,ge)|0)+(i>>>13)|0)+(je>>>26)|0,je&=67108863,r=Math.imul(U,de),i=(i=Math.imul(U,fe))+Math.imul(F,de)|0,s=Math.imul(F,fe);var Ie=(c+(r=r+Math.imul(R,pe)|0)|0)+((8191&(i=(i=i+Math.imul(R,ge)|0)+Math.imul(D,pe)|0))<<13)|0;c=((s=s+Math.imul(D,ge)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863;var Ne=(c+(r=Math.imul(U,pe))|0)+((8191&(i=(i=Math.imul(U,ge))+Math.imul(F,pe)|0))<<13)|0;return c=((s=Math.imul(F,ge))+(i>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,u[0]=me,u[1]=ye,u[2]=ve,u[3]=be,u[4]=_e,u[5]=we,u[6]=ke,u[7]=Se,u[8]=Te,u[9]=Ee,u[10]=Pe,u[11]=Ae,u[12]=Oe,u[13]=Ce,u[14]=xe,u[15]=Me,u[16]=je,u[17]=Ie,u[18]=Ne,0!==c&&(u[19]=c,n.length++),n};function y(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var r=0,i=0,s=0;s<n.length-1;s++){var o=i;i=0;for(var a=67108863&r,u=Math.min(s,t.length-1),c=Math.max(0,s-e.length+1);c<=u;c++){var l=s-c,d=(0|e.words[l])*(0|t.words[c]),f=67108863&d;a=67108863&(f=f+a|0),i+=(o=(o=o+(d/67108864|0)|0)+(f>>>26)|0)>>>26,o&=67108863}n.words[s]=a,r=o,o=i}return 0!==r?n.words[s]=r:n.length--,n._strip()}function v(e,t,n){return y(e,t,n)}function b(e,t){this.x=e,this.y=t}Math.imul||(m=g),s.prototype.mulTo=function(e,t){var n=this.length+e.length;return 10===this.length&&10===e.length?m(this,e,t):n<63?g(this,e,t):n<1024?y(this,e,t):v(this,e,t)},b.prototype.makeRBT=function(e){for(var t=new Array(e),n=s.prototype._countBits(e)-1,r=0;r<e;r++)t[r]=this.revBin(r,n,e);return t},b.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var r=0,i=0;i<t;i++)r|=(1&e)<<t-i-1,e>>=1;return r},b.prototype.permute=function(e,t,n,r,i,s){for(var o=0;o<s;o++)r[o]=t[e[o]],i[o]=n[e[o]]},b.prototype.transform=function(e,t,n,r,i,s){this.permute(s,e,t,n,r,i);for(var o=1;o<i;o<<=1)for(var a=o<<1,u=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),l=0;l<i;l+=a)for(var d=u,f=c,h=0;h<o;h++){var p=n[l+h],g=r[l+h],m=n[l+h+o],y=r[l+h+o],v=d*m-f*y;y=d*y+f*m,m=v,n[l+h]=p+m,r[l+h]=g+y,n[l+h+o]=p-m,r[l+h+o]=g-y,h!==a&&(v=u*d-c*f,f=u*f+c*d,d=v)}},b.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},b.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=e[r];e[r]=e[n-r-1],e[n-r-1]=i,i=t[r],t[r]=-t[n-r-1],t[n-r-1]=-i}},b.prototype.normalize13b=function(e,t){for(var n=0,r=0;r<t/2;r++){var i=8192*Math.round(e[2*r+1]/t)+Math.round(e[2*r]/t)+n;e[r]=67108863&i,n=i<67108864?0:i/67108864|0}return e},b.prototype.convert13b=function(e,t,n,i){for(var s=0,o=0;o<t;o++)s+=0|e[o],n[2*o]=8191&s,s>>>=13,n[2*o+1]=8191&s,s>>>=13;for(o=2*t;o<i;++o)n[o]=0;r(0===s),r(0==(-8192&s))},b.prototype.stub=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=0;return t},b.prototype.mulp=function(e,t,n){var r=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(r),s=this.stub(r),o=new Array(r),a=new Array(r),u=new Array(r),c=new Array(r),l=new Array(r),d=new Array(r),f=n.words;f.length=r,this.convert13b(e.words,e.length,o,r),this.convert13b(t.words,t.length,c,r),this.transform(o,s,a,u,r,i),this.transform(c,s,l,d,r,i);for(var h=0;h<r;h++){var p=a[h]*l[h]-u[h]*d[h];u[h]=a[h]*d[h]+u[h]*l[h],a[h]=p}return this.conjugate(a,u,r),this.transform(a,u,f,s,r,i),this.conjugate(f,s,r),this.normalize13b(f,r),n.negative=e.negative^t.negative,n.length=e.length+t.length,n._strip()},s.prototype.mul=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},s.prototype.mulf=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),v(this,e,t)},s.prototype.imul=function(e){return this.clone().mulTo(e,this)},s.prototype.imuln=function(e){var t=e<0;t&&(e=-e),r("number"==typeof e),r(e<67108864);for(var n=0,i=0;i<this.length;i++){var s=(0|this.words[i])*e,o=(67108863&s)+(67108863&n);n>>=26,n+=s/67108864|0,n+=o>>>26,this.words[i]=67108863&o}return 0!==n&&(this.words[i]=n,this.length++),t?this.ineg():this},s.prototype.muln=function(e){return this.clone().imuln(e)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var r=n/26|0,i=n%26;t[n]=e.words[r]>>>i&1}return t}(e);if(0===t.length)return new s(1);for(var n=this,r=0;r<t.length&&0===t[r];r++,n=n.sqr());if(++r<t.length)for(var i=n.sqr();r<t.length;r++,i=i.sqr())0!==t[r]&&(n=n.mul(i));return n},s.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,n=e%26,i=(e-n)/26,s=67108863>>>26-n<<26-n;if(0!==n){var o=0;for(t=0;t<this.length;t++){var a=this.words[t]&s,u=(0|this.words[t])-a<<n;this.words[t]=u|o,o=a>>>26-n}o&&(this.words[t]=o,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this._strip()},s.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},s.prototype.iushrn=function(e,t,n){var i;r("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var s=e%26,o=Math.min((e-s)/26,this.length),a=67108863^67108863>>>s<<s,u=n;if(i-=o,i=Math.max(0,i),u){for(var c=0;c<o;c++)u.words[c]=this.words[c];u.length=o}if(0===o);else if(this.length>o)for(this.length-=o,c=0;c<this.length;c++)this.words[c]=this.words[c+o];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=i);c--){var d=0|this.words[c];this.words[c]=l<<26-s|d>>>s,l=d&a}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(e,t,n){return r(0===this.negative),this.iushrn(e,t,n)},s.prototype.shln=function(e){return this.clone().ishln(e)},s.prototype.ushln=function(e){return this.clone().iushln(e)},s.prototype.shrn=function(e){return this.clone().ishrn(e)},s.prototype.ushrn=function(e){return this.clone().iushrn(e)},s.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,i=1<<t;return!(this.length<=n)&&!!(this.words[n]&i)},s.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this._strip()},s.prototype.maskn=function(e){return this.clone().imaskn(e)},s.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},s.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},s.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},s.prototype.addn=function(e){return this.clone().iaddn(e)},s.prototype.subn=function(e){return this.clone().isubn(e)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(e,t,n){var i,s,o=e.length+n;this._expand(o);var a=0;for(i=0;i<e.length;i++){s=(0|this.words[i+n])+a;var u=(0|e.words[i])*t;a=((s-=67108863&u)>>26)-(u/67108864|0),this.words[i+n]=67108863&s}for(;i<this.length-n;i++)a=(s=(0|this.words[i+n])+a)>>26,this.words[i+n]=67108863&s;if(0===a)return this._strip();for(r(-1===a),a=0,i=0;i<this.length;i++)a=(s=-(0|this.words[i])+a)>>26,this.words[i]=67108863&s;return this.negative=1,this._strip()},s.prototype._wordDiv=function(e,t){var n=(this.length,e.length),r=this.clone(),i=e,o=0|i.words[i.length-1];0!==(n=26-this._countBits(o))&&(i=i.ushln(n),r.iushln(n),o=0|i.words[i.length-1]);var a,u=r.length-i.length;if("mod"!==t){(a=new s(null)).length=u+1,a.words=new Array(a.length);for(var c=0;c<a.length;c++)a.words[c]=0}var l=r.clone()._ishlnsubmul(i,1,u);0===l.negative&&(r=l,a&&(a.words[u]=1));for(var d=u-1;d>=0;d--){var f=67108864*(0|r.words[i.length+d])+(0|r.words[i.length+d-1]);for(f=Math.min(f/o|0,67108863),r._ishlnsubmul(i,f,d);0!==r.negative;)f--,r.negative=0,r._ishlnsubmul(i,1,d),r.isZero()||(r.negative^=1);a&&(a.words[d]=f)}return a&&a._strip(),r._strip(),"div"!==t&&0!==n&&r.iushrn(n),{div:a||null,mod:r}},s.prototype.divmod=function(e,t,n){return r(!e.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(i=a.div.neg()),"div"!==t&&(o=a.mod.neg(),n&&0!==o.negative&&o.iadd(e)),{div:i,mod:o}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(i=a.div.neg()),{div:i,mod:a.mod}):0!=(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(o=a.mod.neg(),n&&0!==o.negative&&o.isub(e)),{div:a.div,mod:o}):e.length>this.length||this.cmp(e)<0?{div:new s(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new s(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new s(this.modrn(e.words[0]))}:this._wordDiv(e,t);var i,o,a},s.prototype.div=function(e){return this.divmod(e,"div",!1).div},s.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},s.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},s.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,r=e.ushrn(1),i=e.andln(1),s=n.cmp(r);return s<0||1===i&&0===s?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},s.prototype.modrn=function(e){var t=e<0;t&&(e=-e),r(e<=67108863);for(var n=(1<<26)%e,i=0,s=this.length-1;s>=0;s--)i=(n*i+(0|this.words[s]))%e;return t?-i:i},s.prototype.modn=function(e){return this.modrn(e)},s.prototype.idivn=function(e){var t=e<0;t&&(e=-e),r(e<=67108863);for(var n=0,i=this.length-1;i>=0;i--){var s=(0|this.words[i])+67108864*n;this.words[i]=s/e|0,n=s%e}return this._strip(),t?this.ineg():this},s.prototype.divn=function(e){return this.clone().idivn(e)},s.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new s(1),o=new s(0),a=new s(0),u=new s(1),c=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++c;for(var l=n.clone(),d=t.clone();!t.isZero();){for(var f=0,h=1;0==(t.words[0]&h)&&f<26;++f,h<<=1);if(f>0)for(t.iushrn(f);f-- >0;)(i.isOdd()||o.isOdd())&&(i.iadd(l),o.isub(d)),i.iushrn(1),o.iushrn(1);for(var p=0,g=1;0==(n.words[0]&g)&&p<26;++p,g<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(l),u.isub(d)),a.iushrn(1),u.iushrn(1);t.cmp(n)>=0?(t.isub(n),i.isub(a),o.isub(u)):(n.isub(t),a.isub(i),u.isub(o))}return{a:a,b:u,gcd:n.iushln(c)}},s.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,o=new s(1),a=new s(0),u=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,l=1;0==(t.words[0]&l)&&c<26;++c,l<<=1);if(c>0)for(t.iushrn(c);c-- >0;)o.isOdd()&&o.iadd(u),o.iushrn(1);for(var d=0,f=1;0==(n.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(n.iushrn(d);d-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);t.cmp(n)>=0?(t.isub(n),o.isub(a)):(n.isub(t),a.isub(o))}return(i=0===t.cmpn(1)?o:a).cmpn(0)<0&&i.iadd(e),i},s.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var r=0;t.isEven()&&n.isEven();r++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=t.cmp(n);if(i<0){var s=t;t=n,n=s}else if(0===i||0===n.cmpn(1))break;t.isub(n)}return n.iushln(r)},s.prototype.invm=function(e){return this.egcd(e).a.umod(e)},s.prototype.isEven=function(){return 0==(1&this.words[0])},s.prototype.isOdd=function(){return 1==(1&this.words[0])},s.prototype.andln=function(e){return this.words[0]&e},s.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,i=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var s=i,o=n;0!==s&&o<this.length;o++){var a=0|this.words[o];s=(a+=s)>>>26,a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this._strip(),this.length>1)t=1;else{n&&(e=-e),r(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},s.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},s.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|e.words[n];if(r!==i){r<i?t=-1:r>i&&(t=1);break}}return t},s.prototype.gtn=function(e){return 1===this.cmpn(e)},s.prototype.gt=function(e){return 1===this.cmp(e)},s.prototype.gten=function(e){return this.cmpn(e)>=0},s.prototype.gte=function(e){return this.cmp(e)>=0},s.prototype.ltn=function(e){return-1===this.cmpn(e)},s.prototype.lt=function(e){return-1===this.cmp(e)},s.prototype.lten=function(e){return this.cmpn(e)<=0},s.prototype.lte=function(e){return this.cmp(e)<=0},s.prototype.eqn=function(e){return 0===this.cmpn(e)},s.prototype.eq=function(e){return 0===this.cmp(e)},s.red=function(e){return new P(e)},s.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(e){return this.red=e,this},s.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},s.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},s.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},s.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},s.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},s.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},s.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},s.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var _={k256:null,p224:null,p192:null,p25519:null};function w(e,t){this.name=e,this.p=new s(t,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function k(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function S(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function T(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function E(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function P(e){if("string"==typeof e){var t=s._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function A(e){P.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}w.prototype._tmp=function(){var e=new s(null);return e.words=new Array(Math.ceil(this.n/13)),e},w.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),t=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(t>this.n);var r=t<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):n.strip!==undefined?n.strip():n._strip(),n},w.prototype.split=function(e,t){e.iushrn(this.n,0,t)},w.prototype.imulK=function(e){return e.imul(this.k)},i(k,w),k.prototype.split=function(e,t){for(var n=4194303,r=Math.min(e.length,9),i=0;i<r;i++)t.words[i]=e.words[i];if(t.length=r,e.length<=9)return e.words[0]=0,void(e.length=1);var s=e.words[9];for(t.words[t.length++]=s&n,i=10;i<e.length;i++){var o=0|e.words[i];e.words[i-10]=(o&n)<<4|s>>>22,s=o}s>>>=22,e.words[i-10]=s,0===s&&e.length>10?e.length-=10:e.length-=9},k.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var r=0|e.words[n];t+=977*r,e.words[n]=67108863&t,t=64*r+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(S,w),i(T,w),i(E,w),E.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var r=19*(0|e.words[n])+t,i=67108863&r;r>>>=26,e.words[n]=i,t=r}return 0!==t&&(e.words[e.length++]=t),e},s._prime=function(e){if(_[e])return _[e];var t;if("k256"===e)t=new k;else if("p224"===e)t=new S;else if("p192"===e)t=new T;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new E}return _[e]=t,t},P.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},P.prototype._verify2=function(e,t){r(0==(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},P.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(l(e,e.umod(this.m)._forceRed(this)),e)},P.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},P.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},P.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},P.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},P.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},P.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},P.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},P.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},P.prototype.isqr=function(e){return this.imul(e,e.clone())},P.prototype.sqr=function(e){return this.mul(e,e)},P.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var n=this.m.add(new s(1)).iushrn(2);return this.pow(e,n)}for(var i=this.m.subn(1),o=0;!i.isZero()&&0===i.andln(1);)o++,i.iushrn(1);r(!i.isZero());var a=new s(1).toRed(this),u=a.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new s(2*l*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var d=this.pow(l,i),f=this.pow(e,i.addn(1).iushrn(1)),h=this.pow(e,i),p=o;0!==h.cmp(a);){for(var g=h,m=0;0!==g.cmp(a);m++)g=g.redSqr();r(m<p);var y=this.pow(d,new s(1).iushln(p-m-1));f=f.redMul(y),d=y.redSqr(),h=h.redMul(d),p=m}return f},P.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},P.prototype.pow=function(e,t){if(t.isZero())return new s(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=new Array(16);n[0]=new s(1).toRed(this),n[1]=e;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],e);var i=n[0],o=0,a=0,u=t.bitLength()%26;for(0===u&&(u=26),r=t.length-1;r>=0;r--){for(var c=t.words[r],l=u-1;l>=0;l--){var d=c>>l&1;i!==n[0]&&(i=this.sqr(i)),0!==d||0!==o?(o<<=1,o|=d,(4===++a||0===r&&0===l)&&(i=this.mul(i,n[o]),a=0,o=0)):a=0}u=26}return i},P.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},P.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},s.mont=function(e){return new A(e)},i(A,P),A.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},A.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},A.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},A.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new s(0)._forceRed(this);var n=e.mul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},A.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===t||t,this)}}},{package:"bn.js",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/ethereumjs-util/node_modules/bn.js/lib/bn.js"}],[3194,{"../../is-buffer/index.js":5378,"ethjs-util":3200},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.assertIsString=n.assertIsArray=n.assertIsBuffer=n.assertIsHexString=void 0;var r=e("ethjs-util");n.assertIsHexString=function(e){if(!r.isHexString(e))throw new Error("This method only supports 0x-prefixed hex strings but input was: "+e)},n.assertIsBuffer=function(e){if(!t.isBuffer(e))throw new Error("This method only supports Buffer but input was: "+e)},n.assertIsArray=function(e){if(!Array.isArray(e))throw new Error("This method only supports number arrays but input was: "+e)},n.assertIsString=function(e){if("string"!=typeof e)throw new Error("This method only supports strings but input was: "+e)}}).call(this)}).call(this,{isBuffer:e("../../is-buffer/index.js")})}}},{package:"ethereumjs-util",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/ethereumjs-util/dist.browser/helpers.js"}],[6448,{"bn.js":6449,buffer:2478},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.getLength=n.decode=n.encode=void 0;var i=r(e("bn.js"));function s(e,t){if("0"===e[0]&&"0"===e[1])throw new Error("invalid RLP: extra zeros");return parseInt(e,t)}function o(e,n){if(e<56)return t.from([e+n]);var r=c(e),i=c(n+55+r.length/2);return t.from(i+r,"hex")}function a(e){var n,r,i,o,u,c=[],l=e[0];if(l<=127)return{data:e.slice(0,1),remainder:e.slice(1)};if(l<=183){if(n=l-127,i=128===l?t.from([]):e.slice(1,n),2===n&&i[0]<128)throw new Error("invalid rlp encoding: byte must be less 0x80");return{data:i,remainder:e.slice(n)}}if(l<=191){if(r=l-182,e.length-1<r)throw new Error("invalid RLP: not enough bytes for string length");if((n=s(e.slice(1,r).toString("hex"),16))<=55)throw new Error("invalid RLP: expected string length to be greater than 55");if((i=e.slice(r,n+r)).length<n)throw new Error("invalid RLP: not enough bytes for string");return{data:i,remainder:e.slice(n+r)}}if(l<=247){for(n=l-191,o=e.slice(1,n);o.length;)u=a(o),c.push(u.data),o=u.remainder;return{data:c,remainder:e.slice(n)}}var d=(r=l-246)+(n=s(e.slice(1,r).toString("hex"),16));if(d>e.length)throw new Error("invalid rlp: total length is larger than the data");if(0===(o=e.slice(r,d)).length)throw new Error("invalid rlp, List has a invalid length");for(;o.length;)u=a(o),c.push(u.data),o=u.remainder;return{data:c,remainder:e.slice(d)}}function u(e){return"0x"===e.slice(0,2)}function c(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");var t=e.toString(16);return t.length%2?"0"+t:t}function l(e){if(!t.isBuffer(e)){if("string"==typeof e)return u(e)?t.from((r="string"!=typeof(s=e)?s:u(s)?s.slice(2):s).length%2?"0"+r:r,"hex"):t.from(e);if("number"==typeof e||"bigint"==typeof e)return e?(n=c(e),t.from(n,"hex")):t.from([]);if(null===e||e===undefined)return t.from([]);if(e instanceof Uint8Array)return t.from(e);if(i.default.isBN(e))return t.from(e.toArray());throw new Error("invalid type")}var n,r,s;return e}n.encode=function e(n){if(Array.isArray(n)){for(var r=[],i=0;i<n.length;i++)r.push(e(n[i]));var s=t.concat(r);return t.concat([o(s.length,192),s])}var a=l(n);return 1===a.length&&a[0]<128?a:t.concat([o(a.length,128),a])},n.decode=function(e,n){if(void 0===n&&(n=!1),!e||0===e.length)return t.from([]);var r=a(l(e));if(n)return r;if(0!==r.remainder.length)throw new Error("invalid remainder");return r.data},n.getLength=function(e){if(!e||0===e.length)return t.from([]);var n=l(e),r=n[0];if(r<=127)return n.length;if(r<=183)return r-127;if(r<=191)return r-182;if(r<=247)return r-191;var i=r-246;return i+s(n.slice(1,i).toString("hex"),16)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"rlp",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/rlp/dist.browser/index.js"}],[3172,{"./random":3171,secp256k1:6461},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{u(r.next(e))}catch(e){s(e)}}function a(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("secp256k1"),o=e("./random");n.createPrivateKey=function(){return r(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return[4,o.getRandomBytes(32)];case 1:return e=t.sent(),s.privateKeyVerify(e)?[2,e]:[3,0];case 2:return[2]}}))}))},n.createPrivateKeySync=function(){for(;;){var e=o.getRandomBytesSync(32);if(s.privateKeyVerify(e))return e}},function(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}(e("secp256k1"))}}},{package:"ethereum-cryptography",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/ethereum-cryptography/secp256k1.js"}],[6609,{"is-hex-prefixed":5386},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("is-hex-prefixed");t.exports=function(e){return"string"!=typeof e?e:r(e)?e.slice(2):e}}}},{package:"strip-hex-prefix",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/strip-hex-prefix/src/index.js"}],[5386,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e){if("string"!=typeof e)throw new Error("[is-hex-prefixed] value must be type 'string', is currently type "+typeof e+", while checking isHexPrefixed.");return"0x"===e.slice(0,2)}}}},{package:"is-hex-prefixed",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/is-hex-prefixed/src/index.js"}],[2586,{"cipher-base":2521,inherits:5094,"md5.js":5885,ripemd160:6446,"sha.js":6512},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("inherits"),i=e("md5.js"),s=e("ripemd160"),o=e("sha.js"),a=e("cipher-base");function u(e){a.call(this,"digest"),this._hash=e}r(u,a),u.prototype._update=function(e){this._hash.update(e)},u.prototype._final=function(){return this._hash.digest()},t.exports=function(e){return"md5"===(e=e.toLowerCase())?new i:"rmd160"===e||"ripemd160"===e?new s:new u(o(e))}}}},{package:"create-hash",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/create-hash/browser.js"}],[3164,{"./hash-utils":3163,keccak:5447},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=e("./hash-utils"),i=e("keccak");n.keccak224=r.createHashFunction((function(){return i("keccak224")})),n.keccak256=r.createHashFunction((function(){return i("keccak256")})),n.keccak384=r.createHashFunction((function(){return i("keccak384")})),n.keccak512=r.createHashFunction((function(){return i("keccak512")}))}}},{package:"ethereum-cryptography",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/ethereum-cryptography/keccak.js"}],[2556,{"../../is-buffer/index.js":5378},function(){with(this)return function(){"use strict";return function(e,t,n){(function(e){(function(){function t(e){return Object.prototype.toString.call(e)}n.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===t(e)},n.isBoolean=function(e){return"boolean"==typeof e},n.isNull=function(e){return null===e},n.isNullOrUndefined=function(e){return null==e},n.isNumber=function(e){return"number"==typeof e},n.isString=function(e){return"string"==typeof e},n.isSymbol=function(e){return"symbol"==typeof e},n.isUndefined=function(e){return void 0===e},n.isRegExp=function(e){return"[object RegExp]"===t(e)},n.isObject=function(e){return"object"==typeof e&&null!==e},n.isDate=function(e){return"[object Date]"===t(e)},n.isError=function(e){return"[object Error]"===t(e)||e instanceof Error},n.isFunction=function(e){return"function"==typeof e},n.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},n.isBuffer=e.isBuffer}).call(this)}).call(this,{isBuffer:e("../../is-buffer/index.js")})}}},{package:"core-util-is",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/core-util-is/lib/util.js"}],[6406,{_process:6127},function(){with(this)return function(){"use strict";return function(e,t,n){(function(e){(function(){void 0===e||!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,n,r,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var s,o,a=arguments.length;switch(a){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,n)}));case 3:return e.nextTick((function(){t.call(null,n,r)}));case 4:return e.nextTick((function(){t.call(null,n,r,i)}));default:for(s=new Array(a-1),o=0;o<s.length;)s[o++]=arguments[o];return e.nextTick((function(){t.apply(null,s)}))}}}:t.exports=e}).call(this)}).call(this,e("_process"))}}},{package:"process-nextick-args",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/readable-stream/node_modules/process-nextick-args/index.js"}],[6405,{events:2479},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=e("events").EventEmitter}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/readable-stream/lib/internal/streams/stream-browser.js"}],[6404,{"process-nextick-args":6406},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("process-nextick-args");function i(e,t){e.emit("error",t)}t.exports={destroy:function(e,t){var n=this,s=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return s||o?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||r.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(r.nextTick(i,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/readable-stream/lib/internal/streams/destroy.js"}],[6407,{buffer:2478},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("buffer"),i=r.Buffer;function s(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(s(r,n),n.Buffer=o),s(i,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return t!==undefined?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}}}},{package:"safe-buffer",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/readable-stream/node_modules/safe-buffer/index.js"}],[6723,{},function(){with(this)return function(){"use strict";return function(e,t,n){function r(e){try{if(!global.localStorage)return!1}catch(e){return!1}var t=global.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}t.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}}}},{package:"util-deprecate",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/util-deprecate/browser.js"}],[5401,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}}}},{package:"isarray",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/isarray/index.js"}],[6403,{"safe-buffer":6407,util:2477},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("safe-buffer").Buffer,i=e("util");t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var t,n,i,s=r.allocUnsafe(e>>>0),o=this.head,a=0;o;)t=o.data,n=s,i=a,t.copy(n,i),a+=o.data.length,o=o.next;return s},e}(),i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+" "+e})}}},{package:"readable-stream",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/readable-stream/lib/internal/streams/BufferList.js"}],[6408,{"safe-buffer":6407},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("safe-buffer").Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=c,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=l,this.end=d,t=3;break;default:return this.write=f,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return n!==undefined?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function l(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function f(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}n.StringDecoder=s,s.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if((t=this.fillLast(e))===undefined)return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},s.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},s.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=o(t[r]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=o(t[r]))>=0)return i>0&&(e.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=o(t[r]))>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}}}},{package:"string_decoder",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/readable-stream/node_modules/string_decoder/lib/string_decoder.js"}],[2484,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}}}},{package:"util",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/browserify/node_modules/util/support/isBufferBrowser.js"}],[2483,{},function(){with(this)return function(){"use strict";return function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}}},{package:"inherits",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/browserify/node_modules/util/node_modules/inherits/inherits_browser.js"}],[223,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i},t.exports.default=t.exports,t.exports.__esModule=!0}}},{package:"@babel/runtime",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js"}],[1935,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.setPrototypeOf=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){return e.__proto__=t,e}:function(e,t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n]);return e})}}},{package:"@sentry/utils",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@sentry/utils/dist/polyfill.js"}],[1918,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),function(e){e.Fatal="fatal",e.Error="error",e.Warning="warning",e.Log="log",e.Info="info",e.Debug="debug",e.Critical="critical"}(n.Severity||(n.Severity={})),function(e){e.fromString=function(t){switch(t){case"debug":return e.Debug;case"info":return e.Info;case"warn":case"warning":return e.Warning;case"error":return e.Error;case"fatal":return e.Fatal;case"critical":return e.Critical;default:return e.Log}}}(n.Severity||(n.Severity={}))}}},{package:"@sentry/types",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@sentry/types/dist/severity.js"}],[1919,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),function(e){e.Unknown="unknown",e.Skipped="skipped",e.Success="success",e.RateLimit="rate_limit",e.Invalid="invalid",e.Failed="failed"}(n.Status||(n.Status={})),function(e){e.fromHttpCode=function(t){return t>=200&&t<300?e.Success:429===t?e.RateLimit:t>=400&&t<500?e.Invalid:t>=500?e.Failed:e.Unknown}}(n.Status||(n.Status={}))}}},{package:"@sentry/types",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@sentry/types/dist/status.js"}],[1920,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),function(e){e.Explicit="explicitly_set",e.Sampler="client_sampler",e.Rate="client_rate",e.Inheritance="inheritance"}(n.TransactionSamplingMethod||(n.TransactionSamplingMethod={}))}}},{package:"@sentry/types",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@sentry/types/dist/transaction.js"}],[1921,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),function(e){e.BeforeSend="before_send",e.EventProcessor="event_processor",e.NetworkError="network_error",e.QueueOverflow="queue_overflow",e.RateLimitBackoff="ratelimit_backoff",e.SampleRate="sample_rate"}(n.Outcome||(n.Outcome={}))}}},{package:"@sentry/types",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@sentry/types/dist/transport.js"}],[1917,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),function(e){e.Ok="ok",e.Exited="exited",e.Crashed="crashed",e.Abnormal="abnormal"}(n.SessionStatus||(n.SessionStatus={})),function(e){e.Ok="ok",e.Errored="errored",e.Crashed="crashed"}(n.RequestSessionStatus||(n.RequestSessionStatus={}))}}},{package:"@sentry/types",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@sentry/types/dist/session.js"}],[1916,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),function(e){e[e.None=0]="None",e[e.Error=1]="Error",e[e.Debug=2]="Debug",e[e.Verbose=3]="Verbose"}(n.LogLevel||(n.LogLevel={}))}}},{package:"@sentry/types",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@sentry/types/dist/loglevel.js"}],[1857,{"./eventbuilder":1859,"./transports":1875,"@sentry/core":1883,"@sentry/types":1915,"@sentry/utils":1926,tslib:1879},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=e("tslib"),i=e("@sentry/core"),s=e("@sentry/types"),o=e("@sentry/utils"),a=e("./eventbuilder"),u=e("./transports"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.eventFromException=function(e,t){return a.eventFromException(this._options,e,t)},t.prototype.eventFromMessage=function(e,t,n){return void 0===t&&(t=s.Severity.Info),a.eventFromMessage(this._options,e,t,n)},t.prototype._setupTransport=function(){if(!this._options.dsn)return e.prototype._setupTransport.call(this);var t=r.__assign(r.__assign({},this._options.transportOptions),{dsn:this._options.dsn,tunnel:this._options.tunnel,sendClientReports:this._options.sendClientReports,_metadata:this._options._metadata});return this._options.transport?new this._options.transport(t):o.supportsFetch()?new u.FetchTransport(t):new u.XHRTransport(t)},t}(i.BaseBackend);n.BrowserBackend=c}}},{package:"@sentry/browser",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@sentry/browser/dist/backend.js"}],[1872,{tslib:1879},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=e("tslib"),i="?",s=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,o=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|capacitor).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,a=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,u=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,c=/\((\S*)(?::(\d+))(?::(\d+))\)/,l=/Minified React error #\d+;/i;n.computeStackTrace=function(e){var t=null,n=0;e&&("number"==typeof e.framesToPop?n=e.framesToPop:l.test(e.message)&&(n=1));try{if(t=function(e){if(!e||!e.stacktrace)return null;for(var t,n=e.stacktrace,r=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,s=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\((.*)\))? in (.*):\s*$/i,o=n.split("\n"),a=[],u=0;u<o.length;u+=2){var c=null;(t=r.exec(o[u]))?c={url:t[2],func:t[3],args:[],line:+t[1],column:null}:(t=s.exec(o[u]))&&(c={url:t[6],func:t[3]||t[4],args:t[5]?t[5].split(","):[],line:+t[1],column:+t[2]}),c&&(!c.func&&c.line&&(c.func=i),a.push(c))}if(!a.length)return null;return{message:h(e),name:e.name,stack:a}}(e),t)return f(t,n)}catch(e){}try{if(t=function(e){var t,n;if(!e||!e.stack)return null;for(var l,f,p,g=[],m=e.stack.split("\n"),y=0;y<m.length;++y){if(f=s.exec(m[y])){var v=f[2]&&0===f[2].indexOf("native");f[2]&&0===f[2].indexOf("eval")&&(l=c.exec(f[2]))&&(f[2]=l[1],f[3]=l[2],f[4]=l[3]);var b=f[2]&&0===f[2].indexOf("address at ")?f[2].substr("address at ".length):f[2],_=f[1]||i;_=(t=r.__read(d(_,b),2))[0],p={url:b=t[1],func:_,args:v?[f[2]]:[],line:f[3]?+f[3]:null,column:f[4]?+f[4]:null}}else if(f=a.exec(m[y]))p={url:f[2],func:f[1]||i,args:[],line:+f[3],column:f[4]?+f[4]:null};else{if(!(f=o.exec(m[y])))continue;f[3]&&f[3].indexOf(" > eval")>-1&&(l=u.exec(f[3]))?(f[1]=f[1]||"eval",f[3]=l[1],f[4]=l[2],f[5]=""):0!==y||f[5]||void 0===e.columnNumber||(g[0].column=e.columnNumber+1);b=f[3],_=f[1]||i;_=(n=r.__read(d(_,b),2))[0],p={url:b=n[1],func:_,args:f[2]?f[2].split(","):[],line:f[4]?+f[4]:null,column:f[5]?+f[5]:null}}!p.func&&p.line&&(p.func=i),g.push(p)}if(!g.length)return null;return{message:h(e),name:e.name,stack:g}}(e),t)return f(t,n)}catch(e){}return{message:h(e),name:e&&e.name,stack:[],failed:!0}};var d=function(e,t){var n=-1!==e.indexOf("safari-extension"),r=-1!==e.indexOf("safari-web-extension");return n||r?[-1!==e.indexOf("@")?e.split("@")[0]:i,n?"safari-extension:"+t:"safari-web-extension:"+t]:[e,t]};function f(e,t){try{return r.__assign(r.__assign({},e),{stack:e.stack.slice(t)})}catch(t){return e}}function h(e){var t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}}}},{package:"@sentry/browser",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@sentry/browser/dist/tracekit.js"}],[1870,{"./tracekit":1872,"@sentry/utils":1926},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=e("@sentry/utils"),i=e("./tracekit");function s(e){var t=o(e.stack),n={type:e.name,value:e.message};return t&&t.length&&(n.stacktrace={frames:t}),n.type===undefined&&""===n.value&&(n.value="Unrecoverable error caught"),n}function o(e){if(!e||!e.length)return[];var t=e,n=t[0].func||"",r=t[t.length-1].func||"";return-1===n.indexOf("captureMessage")&&-1===n.indexOf("captureException")||(t=t.slice(1)),-1!==r.indexOf("sentryWrapped")&&(t=t.slice(0,-1)),t.slice(0,50).map((function(e){return{colno:null===e.column?undefined:e.column,filename:e.url||t[0].url,function:e.func||"?",in_app:!0,lineno:null===e.line?undefined:e.line}})).reverse()}n.exceptionFromStacktrace=s,n.eventFromPlainObject=function(e,t,n){var s={exception:{values:[{type:r.isEvent(e)?e.constructor.name:n?"UnhandledRejection":"Error",value:"Non-Error "+(n?"promise rejection":"exception")+" captured with keys: "+r.extractExceptionKeysForMessage(e)}]},extra:{__serialized__:r.normalizeToSize(e)}};if(t){var a=o(i.computeStackTrace(t).stack);s.stacktrace={frames:a}}return s},n.eventFromStacktrace=function(e){return{exception:{values:[s(e)]}}},n.prepareFramesForEvent=o}}},{package:"@sentry/browser",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@sentry/browser/dist/parsers.js"}],[1876,{"@sentry/utils":1926},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e("@sentry/utils"),s=i.getGlobalObject();function o(){var e,t;if(r)return r;if(i.isNativeFetch(s.fetch))return r=s.fetch.bind(s);var n=s.document,o=s.fetch;if("function"==typeof(null===(e=n)||void 0===e?void 0:e.createElement))try{var a=n.createElement("iframe");a.hidden=!0,n.head.appendChild(a),(null===(t=a.contentWindow)||void 0===t?void 0:t.fetch)&&(o=a.contentWindow.fetch),n.head.removeChild(a)}catch(e){i.logger.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return r=o.bind(s)}n.getNativeFetchImplementation=o,n.sendReport=function(e,t){if("[object Navigator]"===Object.prototype.toString.call(s&&s.navigator)&&"function"==typeof s.navigator.sendBeacon)return s.navigator.sendBeacon.bind(s.navigator)(e,t);if(i.supportsFetch()){var n=o();return i.forget(n(e,{body:t,method:"POST",credentials:"omit",keepalive:!0}))}}}}},{package:"@sentry/browser",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@sentry/browser/dist/transports/utils.js"}],[1892,{},function(){with(this)return function(){"use strict";return function(e,t,n){
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r,i,s,o,a,u,c,l,d,f,h,p,g,m,y,v,b,_,w,k,S,T,E;!function(e){var n="object"==typeof global?global:"object"==typeof self?self:"object"==typeof this?this:{};function r(e,t){return e!==n&&("function"==typeof Object.create?Object.defineProperty(e,"__esModule",{value:!0}):e.__esModule=!0),function(n,r){return e[n]=t?t(n,r):r}}"function"==typeof define&&define.amd?define("tslib",["exports"],(function(t){e(r(n,r(t)))})):"object"==typeof t&&"object"==typeof t.exports?e(r(n,r(t.exports))):e(r(n))}((function(e){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};r=function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)},i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},o=function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},a=function(e,t){return function(n,r){t(n,r,e)}},u=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{u(r.next(e))}catch(e){s(e)}}function a(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}u((r=r.apply(e,t||[])).next())}))},l=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},E=function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]},d=function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])},f=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},h=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,s=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o},p=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e},g=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r},m=function(e){return this instanceof m?(this.v=e,this):new m(e)},y=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){s.push([e,t,n,r])>1||a(e,t)}))})}function a(e,t){try{(n=i[e](t)).value instanceof m?Promise.resolve(n.value.v).then(u,c):l(s[0][2],n)}catch(e){l(s[0][3],e)}var n}function u(e){a("next",e)}function c(e){a("throw",e)}function l(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}},v=function(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:m(e[r](t)),done:"return"===r}:i?i(t):t}:i}},b=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=f(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}},_=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},w=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},k=function(e){return e&&e.__esModule?e:{default:e}},S=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},T=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},e("__extends",r),e("__assign",i),e("__rest",s),e("__decorate",o),e("__param",a),e("__metadata",u),e("__awaiter",c),e("__generator",l),e("__exportStar",d),e("__createBinding",E),e("__values",f),e("__read",h),e("__spread",p),e("__spreadArrays",g),e("__await",m),e("__asyncGenerator",y),e("__asyncDelegator",v),e("__asyncValues",b),e("__makeTemplateObject",_),e("__importStar",w),e("__importDefault",k),e("__classPrivateFieldGet",S),e("__classPrivateFieldSet",T)}))}}},{package:"tslib",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@sentry/core/node_modules/tslib/tslib.js"}],[1884,{"@sentry/hub":1894,"@sentry/utils":1926,tslib:1892},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=e("tslib"),i=e("@sentry/hub"),s=e("@sentry/utils");function o(e){return e.reduce((function(e,t){return e.every((function(e){return t.name!==e.name}))&&e.push(t),e}),[])}function a(e){var t=e.defaultIntegrations&&r.__spread(e.defaultIntegrations)||[],n=e.integrations,i=r.__spread(o(t));Array.isArray(n)?i=r.__spread(i.filter((function(e){return n.every((function(t){return t.name!==e.name}))})),o(n)):"function"==typeof n&&(i=n(i),i=Array.isArray(i)?i:[i]);var s=i.map((function(e){return e.name})),a="Debug";return-1!==s.indexOf(a)&&i.push.apply(i,r.__spread(i.splice(s.indexOf(a),1))),i}function u(e){-1===n.installedIntegrations.indexOf(e.name)&&(e.setupOnce(i.addGlobalEventProcessor,i.getCurrentHub),n.installedIntegrations.push(e.name),s.logger.log("Integration installed: "+e.name))}n.installedIntegrations=[],n.getIntegrationsToSetup=a,n.setupIntegration=u,n.setupIntegrations=function(e){var t={};return a(e).forEach((function(e){t[e.name]=e,u(e)})),Object.defineProperty(t,"initialized",{value:!0}),t}}}},{package:"@sentry/core",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@sentry/core/dist/integration.js"}],[1885,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r;Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.name=e.id}return e.prototype.setupOnce=function(){r=Function.prototype.toString,Function.prototype.toString=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.__sentry_original__||this;return r.apply(n,e)}},e.id="FunctionToString",e}();n.FunctionToString=i}}},{package:"@sentry/core",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@sentry/core/dist/integrations/functiontostring.js"}],[1886,{"@sentry/hub":1894,"@sentry/utils":1926,tslib:1892},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=e("tslib"),i=e("@sentry/hub"),s=e("@sentry/utils"),o=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],a=function(){function e(t){void 0===t&&(t={}),this._options=t,this.name=e.id}return e.prototype.setupOnce=function(){i.addGlobalEventProcessor((function(t){var n=i.getCurrentHub();if(!n)return t;var r=n.getIntegration(e);if(r){var s=n.getClient(),o=s?s.getOptions():{},a="function"==typeof r._mergeOptions?r._mergeOptions(o):{};return"function"!=typeof r._shouldDropEvent?t:r._shouldDropEvent(t,a)?null:t}return t}))},e.prototype._shouldDropEvent=function(e,t){return this._isSentryError(e,t)?(s.logger.warn("Event dropped due to being internal Sentry Error.\nEvent: "+s.getEventDescription(e)),!0):this._isIgnoredError(e,t)?(s.logger.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: "+s.getEventDescription(e)),!0):this._isDeniedUrl(e,t)?(s.logger.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: "+s.getEventDescription(e)+".\nUrl: "+this._getEventFilterUrl(e)),!0):!this._isAllowedUrl(e,t)&&(s.logger.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: "+s.getEventDescription(e)+".\nUrl: "+this._getEventFilterUrl(e)),!0)},e.prototype._isSentryError=function(e,t){if(!t.ignoreInternal)return!1;try{return e&&e.exception&&e.exception.values&&e.exception.values[0]&&"SentryError"===e.exception.values[0].type||!1}catch(e){return!1}},e.prototype._isIgnoredError=function(e,t){return!(!t.ignoreErrors||!t.ignoreErrors.length)&&this._getPossibleEventMessages(e).some((function(e){return t.ignoreErrors.some((function(t){return s.isMatchingPattern(e,t)}))}))},e.prototype._isDeniedUrl=function(e,t){if(!t.denyUrls||!t.denyUrls.length)return!1;var n=this._getEventFilterUrl(e);return!!n&&t.denyUrls.some((function(e){return s.isMatchingPattern(n,e)}))},e.prototype._isAllowedUrl=function(e,t){if(!t.allowUrls||!t.allowUrls.length)return!0;var n=this._getEventFilterUrl(e);return!n||t.allowUrls.some((function(e){return s.isMatchingPattern(n,e)}))},e.prototype._mergeOptions=function(e){return void 0===e&&(e={}),{allowUrls:r.__spread(this._options.whitelistUrls||[],this._options.allowUrls||[],e.whitelistUrls||[],e.allowUrls||[]),denyUrls:r.__spread(this._options.blacklistUrls||[],this._options.denyUrls||[],e.blacklistUrls||[],e.denyUrls||[]),ignoreErrors:r.__spread(this._options.ignoreErrors||[],e.ignoreErrors||[],o),ignoreInternal:void 0===this._options.ignoreInternal||this._options.ignoreInternal}},e.prototype._getPossibleEventMessages=function(e){if(e.message)return[e.message];if(e.exception)try{var t=e.exception.values&&e.exception.values[0]||{},n=t.type,r=void 0===n?"":n,i=t.value,o=void 0===i?"":i;return[""+o,r+": "+o]}catch(t){return s.logger.error("Cannot extract message for event "+s.getEventDescription(e)),[]}return[]},e.prototype._getLastValidUrl=function(e){var t,n;void 0===e&&(e=[]);for(var r=e.length-1;r>=0;r--){var i=e[r];if("<anonymous>"!==(null===(t=i)||void 0===t?void 0:t.filename)&&"[native code]"!==(null===(n=i)||void 0===n?void 0:n.filename))return i.filename||null}return null},e.prototype._getEventFilterUrl=function(e){try{if(e.stacktrace){var t=e.stacktrace.frames;return this._getLastValidUrl(t)}if(e.exception){var n=e.exception.values&&e.exception.values[0].stacktrace&&e.exception.values[0].stacktrace.frames;return this._getLastValidUrl(n)}return null}catch(t){return s.logger.error("Cannot extract url for event "+s.getEventDescription(e)),null}},e.id="InboundFilters",e}();n.InboundFilters=a}}},{package:"@sentry/core",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@sentry/core/dist/integrations/inboundfilters.js"}],[1914,{},function(){with(this)return function(){"use strict";return function(e,t,n){
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r,i,s,o,a,u,c,l,d,f,h,p,g,m,y,v,b,_,w,k,S,T,E;!function(e){var n="object"==typeof global?global:"object"==typeof self?self:"object"==typeof this?this:{};function r(e,t){return e!==n&&("function"==typeof Object.create?Object.defineProperty(e,"__esModule",{value:!0}):e.__esModule=!0),function(n,r){return e[n]=t?t(n,r):r}}"function"==typeof define&&define.amd?define("tslib",["exports"],(function(t){e(r(n,r(t)))})):"object"==typeof t&&"object"==typeof t.exports?e(r(n,r(t.exports))):e(r(n))}((function(e){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};r=function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)},i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},o=function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},a=function(e,t){return function(n,r){t(n,r,e)}},u=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{u(r.next(e))}catch(e){s(e)}}function a(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}u((r=r.apply(e,t||[])).next())}))},l=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},E=function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]},d=function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])},f=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},h=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,s=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o},p=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e},g=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r},m=function(e){return this instanceof m?(this.v=e,this):new m(e)},y=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){s.push([e,t,n,r])>1||a(e,t)}))})}function a(e,t){try{(n=i[e](t)).value instanceof m?Promise.resolve(n.value.v).then(u,c):l(s[0][2],n)}catch(e){l(s[0][3],e)}var n}function u(e){a("next",e)}function c(e){a("throw",e)}function l(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}},v=function(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:m(e[r](t)),done:"return"===r}:i?i(t):t}:i}},b=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=f(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}},_=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},w=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},k=function(e){return e&&e.__esModule?e:{default:e}},S=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},T=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},e("__extends",r),e("__assign",i),e("__rest",s),e("__decorate",o),e("__param",a),e("__metadata",u),e("__awaiter",c),e("__generator",l),e("__exportStar",d),e("__createBinding",E),e("__values",f),e("__read",h),e("__spread",p),e("__spreadArrays",g),e("__await",m),e("__asyncGenerator",y),e("__asyncDelegator",v),e("__asyncValues",b),e("__makeTemplateObject",_),e("__importStar",w),e("__importDefault",k),e("__classPrivateFieldGet",S),e("__classPrivateFieldSet",T)}))}}},{package:"tslib",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@sentry/minimal/node_modules/tslib/tslib.js"}],[1895,{"@sentry/utils":1926,tslib:1898},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=e("tslib"),i=e("@sentry/utils"),s=function(){function e(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._user={},this._tags={},this._extra={},this._contexts={}}return e.clone=function(t){var n=new e;return t&&(n._breadcrumbs=r.__spread(t._breadcrumbs),n._tags=r.__assign({},t._tags),n._extra=r.__assign({},t._extra),n._contexts=r.__assign({},t._contexts),n._user=t._user,n._level=t._level,n._span=t._span,n._session=t._session,n._transactionName=t._transactionName,n._fingerprint=t._fingerprint,n._eventProcessors=r.__spread(t._eventProcessors),n._requestSession=t._requestSession),n},e.prototype.addScopeListener=function(e){this._scopeListeners.push(e)},e.prototype.addEventProcessor=function(e){return this._eventProcessors.push(e),this},e.prototype.setUser=function(e){return this._user=e||{},this._session&&this._session.update({user:e}),this._notifyScopeListeners(),this},e.prototype.getUser=function(){return this._user},e.prototype.getRequestSession=function(){return this._requestSession},e.prototype.setRequestSession=function(e){return this._requestSession=e,this},e.prototype.setTags=function(e){return this._tags=r.__assign(r.__assign({},this._tags),e),this._notifyScopeListeners(),this},e.prototype.setTag=function(e,t){var n;return this._tags=r.__assign(r.__assign({},this._tags),((n={})[e]=t,n)),this._notifyScopeListeners(),this},e.prototype.setExtras=function(e){return this._extra=r.__assign(r.__assign({},this._extra),e),this._notifyScopeListeners(),this},e.prototype.setExtra=function(e,t){var n;return this._extra=r.__assign(r.__assign({},this._extra),((n={})[e]=t,n)),this._notifyScopeListeners(),this},e.prototype.setFingerprint=function(e){return this._fingerprint=e,this._notifyScopeListeners(),this},e.prototype.setLevel=function(e){return this._level=e,this._notifyScopeListeners(),this},e.prototype.setTransactionName=function(e){return this._transactionName=e,this._notifyScopeListeners(),this},e.prototype.setTransaction=function(e){return this.setTransactionName(e)},e.prototype.setContext=function(e,t){var n;return null===t?delete this._contexts[e]:this._contexts=r.__assign(r.__assign({},this._contexts),((n={})[e]=t,n)),this._notifyScopeListeners(),this},e.prototype.setSpan=function(e){return this._span=e,this._notifyScopeListeners(),this},e.prototype.getSpan=function(){return this._span},e.prototype.getTransaction=function(){var e,t,n,r,i=this.getSpan();return(null===(e=i)||void 0===e?void 0:e.transaction)?null===(t=i)||void 0===t?void 0:t.transaction:(null===(r=null===(n=i)||void 0===n?void 0:n.spanRecorder)||void 0===r?void 0:r.spans[0])?i.spanRecorder.spans[0]:undefined},e.prototype.setSession=function(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this},e.prototype.getSession=function(){return this._session},e.prototype.update=function(t){if(!t)return this;if("function"==typeof t){var n=t(this);return n instanceof e?n:this}return t instanceof e?(this._tags=r.__assign(r.__assign({},this._tags),t._tags),this._extra=r.__assign(r.__assign({},this._extra),t._extra),this._contexts=r.__assign(r.__assign({},this._contexts),t._contexts),t._user&&Object.keys(t._user).length&&(this._user=t._user),t._level&&(this._level=t._level),t._fingerprint&&(this._fingerprint=t._fingerprint),t._requestSession&&(this._requestSession=t._requestSession)):i.isPlainObject(t)&&(t=t,this._tags=r.__assign(r.__assign({},this._tags),t.tags),this._extra=r.__assign(r.__assign({},this._extra),t.extra),this._contexts=r.__assign(r.__assign({},this._contexts),t.contexts),t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession)),this},e.prototype.clear=function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=undefined,this._transactionName=undefined,this._fingerprint=undefined,this._requestSession=undefined,this._span=undefined,this._session=undefined,this._notifyScopeListeners(),this},e.prototype.addBreadcrumb=function(e,t){var n="number"==typeof t?Math.min(t,100):100;if(n<=0)return this;var s=r.__assign({timestamp:i.dateTimestampInSeconds()},e);return this._breadcrumbs=r.__spread(this._breadcrumbs,[s]).slice(-n),this._notifyScopeListeners(),this},e.prototype.clearBreadcrumbs=function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this},e.prototype.applyToEvent=function(e,t){var n;if(this._extra&&Object.keys(this._extra).length&&(e.extra=r.__assign(r.__assign({},this._extra),e.extra)),this._tags&&Object.keys(this._tags).length&&(e.tags=r.__assign(r.__assign({},this._tags),e.tags)),this._user&&Object.keys(this._user).length&&(e.user=r.__assign(r.__assign({},this._user),e.user)),this._contexts&&Object.keys(this._contexts).length&&(e.contexts=r.__assign(r.__assign({},this._contexts),e.contexts)),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts=r.__assign({trace:this._span.getTraceContext()},e.contexts);var i=null===(n=this._span.transaction)||void 0===n?void 0:n.name;i&&(e.tags=r.__assign({transaction:i},e.tags))}return this._applyFingerprint(e),e.breadcrumbs=r.__spread(e.breadcrumbs||[],this._breadcrumbs),e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:undefined,this._notifyEventProcessors(r.__spread(o(),this._eventProcessors),e,t)},e.prototype._notifyEventProcessors=function(e,t,n,s){var o=this;return void 0===s&&(s=0),new i.SyncPromise((function(a,u){var c=e[s];if(null===t||"function"!=typeof c)a(t);else{var l=c(r.__assign({},t),n);i.isThenable(l)?l.then((function(t){return o._notifyEventProcessors(e,t,n,s+1).then(a)})).then(null,u):o._notifyEventProcessors(e,l,n,s+1).then(a).then(null,u)}}))},e.prototype._notifyScopeListeners=function(){var e=this;this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((function(t){t(e)})),this._notifyingListeners=!1)},e.prototype._applyFingerprint=function(e){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint},e}();function o(){var e=i.getGlobalObject();return e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.globalEventProcessors=e.__SENTRY__.globalEventProcessors||[],e.__SENTRY__.globalEventProcessors}n.Scope=s,n.addGlobalEventProcessor=function(e){o().push(e)}}}},{package:"@sentry/hub",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@sentry/hub/dist/scope.js"}],[1896,{"@sentry/types":1915,"@sentry/utils":1926},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=e("@sentry/types"),i=e("@sentry/utils"),s=function(){function e(e){this.errors=0,this.sid=i.uuid4(),this.duration=0,this.status=r.SessionStatus.Ok,this.init=!0,this.ignoreDuration=!1;var t=i.timestampInSeconds();this.timestamp=t,this.started=t,e&&this.update(e)}return e.prototype.update=function(e){if(void 0===e&&(e={}),e.user&&(!this.ipAddress&&e.user.ip_address&&(this.ipAddress=e.user.ip_address),this.did||e.did||(this.did=e.user.id||e.user.email||e.user.username)),this.timestamp=e.timestamp||i.timestampInSeconds(),e.ignoreDuration&&(this.ignoreDuration=e.ignoreDuration),e.sid&&(this.sid=32===e.sid.length?e.sid:i.uuid4()),e.init!==undefined&&(this.init=e.init),!this.did&&e.did&&(this.did=""+e.did),"number"==typeof e.started&&(this.started=e.started),this.ignoreDuration)this.duration=undefined;else if("number"==typeof e.duration)this.duration=e.duration;else{var t=this.timestamp-this.started;this.duration=t>=0?t:0}e.release&&(this.release=e.release),e.environment&&(this.environment=e.environment),!this.ipAddress&&e.ipAddress&&(this.ipAddress=e.ipAddress),!this.userAgent&&e.userAgent&&(this.userAgent=e.userAgent),"number"==typeof e.errors&&(this.errors=e.errors),e.status&&(this.status=e.status)},e.prototype.close=function(e){e?this.update({status:e}):this.status===r.SessionStatus.Ok?this.update({status:r.SessionStatus.Exited}):this.update()},e.prototype.toJSON=function(){return i.dropUndefinedKeys({sid:""+this.sid,init:this.init,started:new Date(1e3*this.started).toISOString(),timestamp:new Date(1e3*this.timestamp).toISOString(),status:this.status,errors:this.errors,did:"number"==typeof this.did||"string"==typeof this.did?""+this.did:undefined,duration:this.duration,attrs:i.dropUndefinedKeys({release:this.release,environment:this.environment,ip_address:this.ipAddress,user_agent:this.userAgent})})},e}();n.Session=s}}},{package:"@sentry/hub",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@sentry/hub/dist/session.js"}],[1893,{"./scope":1895,"./session":1896,"@sentry/types":1915,"@sentry/utils":1926,tslib:1898},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=e("tslib"),i=e("@sentry/types"),s=e("@sentry/utils"),o=e("./scope"),a=e("./session");n.API_VERSION=4;var u=function(){function e(e,t,r){void 0===t&&(t=new o.Scope),void 0===r&&(r=n.API_VERSION),this._version=r,this._stack=[{}],this.getStackTop().scope=t,e&&this.bindClient(e)}return e.prototype.isOlderThan=function(e){return this._version<e},e.prototype.bindClient=function(e){this.getStackTop().client=e,e&&e.setupIntegrations&&e.setupIntegrations()},e.prototype.pushScope=function(){var e=o.Scope.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e},e.prototype.popScope=function(){return!(this.getStack().length<=1)&&!!this.getStack().pop()},e.prototype.withScope=function(e){var t=this.pushScope();try{e(t)}finally{this.popScope()}},e.prototype.getClient=function(){return this.getStackTop().client},e.prototype.getScope=function(){return this.getStackTop().scope},e.prototype.getStack=function(){return this._stack},e.prototype.getStackTop=function(){return this._stack[this._stack.length-1]},e.prototype.captureException=function(e,t){var n=this._lastEventId=s.uuid4(),i=t;if(!t){var o=void 0;try{throw new Error("Sentry syntheticException")}catch(e){o=e}i={originalException:e,syntheticException:o}}return this._invokeClient("captureException",e,r.__assign(r.__assign({},i),{event_id:n})),n},e.prototype.captureMessage=function(e,t,n){var i=this._lastEventId=s.uuid4(),o=n;if(!n){var a=void 0;try{throw new Error(e)}catch(e){a=e}o={originalException:e,syntheticException:a}}return this._invokeClient("captureMessage",e,t,r.__assign(r.__assign({},o),{event_id:i})),i},e.prototype.captureEvent=function(e,t){var n=s.uuid4();return"transaction"!==e.type&&(this._lastEventId=n),this._invokeClient("captureEvent",e,r.__assign(r.__assign({},t),{event_id:n})),n},e.prototype.lastEventId=function(){return this._lastEventId},e.prototype.addBreadcrumb=function(e,t){var n=this.getStackTop(),i=n.scope,o=n.client;if(i&&o){var a=o.getOptions&&o.getOptions()||{},u=a.beforeBreadcrumb,c=void 0===u?null:u,l=a.maxBreadcrumbs,d=void 0===l?100:l;if(!(d<=0)){var f=s.dateTimestampInSeconds(),h=r.__assign({timestamp:f},e),p=c?s.consoleSandbox((function(){return c(h,t)})):h;null!==p&&i.addBreadcrumb(p,d)}}},e.prototype.setUser=function(e){var t=this.getScope();t&&t.setUser(e)},e.prototype.setTags=function(e){var t=this.getScope();t&&t.setTags(e)},e.prototype.setExtras=function(e){var t=this.getScope();t&&t.setExtras(e)},e.prototype.setTag=function(e,t){var n=this.getScope();n&&n.setTag(e,t)},e.prototype.setExtra=function(e,t){var n=this.getScope();n&&n.setExtra(e,t)},e.prototype.setContext=function(e,t){var n=this.getScope();n&&n.setContext(e,t)},e.prototype.configureScope=function(e){var t=this.getStackTop(),n=t.scope,r=t.client;n&&r&&e(n)},e.prototype.run=function(e){var t=l(this);try{e(this)}finally{l(t)}},e.prototype.getIntegration=function(e){var t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return s.logger.warn("Cannot retrieve integration "+e.id+" from the current Hub"),null}},e.prototype.startSpan=function(e){return this._callExtensionMethod("startSpan",e)},e.prototype.startTransaction=function(e,t){return this._callExtensionMethod("startTransaction",e,t)},e.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")},e.prototype.captureSession=function(e){if(void 0===e&&(e=!1),e)return this.endSession();this._sendSessionUpdate()},e.prototype.endSession=function(){var e,t,n,r,i;null===(n=null===(t=null===(e=this.getStackTop())||void 0===e?void 0:e.scope)||void 0===t?void 0:t.getSession())||void 0===n||n.close(),this._sendSessionUpdate(),null===(i=null===(r=this.getStackTop())||void 0===r?void 0:r.scope)||void 0===i||i.setSession()},e.prototype.startSession=function(e){var t=this.getStackTop(),n=t.scope,o=t.client,u=o&&o.getOptions()||{},c=u.release,l=u.environment,d=(s.getGlobalObject().navigator||{}).userAgent,f=new a.Session(r.__assign(r.__assign(r.__assign({release:c,environment:l},n&&{user:n.getUser()}),d&&{userAgent:d}),e));if(n){var h=n.getSession&&n.getSession();h&&h.status===i.SessionStatus.Ok&&h.update({status:i.SessionStatus.Exited}),this.endSession(),n.setSession(f)}return f},e.prototype._sendSessionUpdate=function(){var e=this.getStackTop(),t=e.scope,n=e.client;if(t){var r=t.getSession&&t.getSession();r&&n&&n.captureSession&&n.captureSession(r)}},e.prototype._invokeClient=function(e){for(var t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var s=this.getStackTop(),o=s.scope,a=s.client;a&&a[e]&&(t=a)[e].apply(t,r.__spread(n,[o]))},e.prototype._callExtensionMethod=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=c(),i=r.__SENTRY__;if(i&&i.extensions&&"function"==typeof i.extensions[e])return i.extensions[e].apply(this,t);s.logger.warn("Extension method "+e+" couldn't be found, doing nothing.")},e}();function c(){var e=s.getGlobalObject();return e.__SENTRY__=e.__SENTRY__||{extensions:{},hub:undefined},e}function l(e){var t=c(),n=f(t);return h(t,e),n}function d(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function f(e){return e&&e.__SENTRY__&&e.__SENTRY__.hub||(e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.hub=new u),e.__SENTRY__.hub}function h(e,t){return!!e&&(e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.hub=t,!0)}n.Hub=u,n.getMainCarrier=c,n.makeMain=l,n.getCurrentHub=function(){var e=c();return d(e)&&!f(e).isOlderThan(n.API_VERSION)||h(e,new u),s.isNodeEnv()?function(e){var t,r,i;try{var s=null===(i=null===(r=null===(t=c().__SENTRY__)||void 0===t?void 0:t.extensions)||void 0===r?void 0:r.domain)||void 0===i?void 0:i.active;if(!s)return f(e);if(!d(s)||f(s).isOlderThan(n.API_VERSION)){var a=f(e).getStackTop();h(s,new u(a.client,o.Scope.clone(a.scope)))}return f(s)}catch(t){return f(e)}}(e):f(e)},n.getActiveDomain=function(){s.logger.warn("Function `getActiveDomain` is deprecated and will be removed in a future version.");var e=c().__SENTRY__;return e&&e.extensions&&e.extensions.domain&&e.extensions.domain.active},n.getHubFromCarrier=f,n.setHubOnCarrier=h}}},{package:"@sentry/hub",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@sentry/hub/dist/hub.js"}],[1897,{"./hub":1893,"@sentry/types":1915,"@sentry/utils":1926},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=e("@sentry/types"),i=e("@sentry/utils"),s=e("./hub"),o=function(){function e(e,t){var n=this;this.flushTimeout=60,this._pendingAggregates={},this._isEnabled=!0,this._transport=e,this._intervalId=setInterval((function(){return n.flush()}),1e3*this.flushTimeout),this._sessionAttrs=t}return e.prototype.sendSessionAggregates=function(e){this._transport.sendSession?this._transport.sendSession(e).then(null,(function(e){i.logger.error("Error while sending session: "+e)})):i.logger.warn("Dropping session because custom transport doesn't implement sendSession")},e.prototype.flush=function(){var e=this.getSessionAggregates();0!==e.aggregates.length&&(this._pendingAggregates={},this.sendSessionAggregates(e))},e.prototype.getSessionAggregates=function(){var e=this,t=Object.keys(this._pendingAggregates).map((function(t){return e._pendingAggregates[parseInt(t)]})),n={attrs:this._sessionAttrs,aggregates:t};return i.dropUndefinedKeys(n)},e.prototype.close=function(){clearInterval(this._intervalId),this._isEnabled=!1,this.flush()},e.prototype.incrementSessionStatusCount=function(){var e,t;if(this._isEnabled){var n=s.getCurrentHub().getScope(),r=null===(e=n)||void 0===e?void 0:e.getRequestSession();r&&r.status&&(this._incrementSessionStatusCount(r.status,new Date),null===(t=n)||void 0===t||t.setRequestSession(undefined))}},e.prototype._incrementSessionStatusCount=function(e,t){var n=new Date(t).setSeconds(0,0);this._pendingAggregates[n]=this._pendingAggregates[n]||{};var i=this._pendingAggregates[n];switch(i.started||(i.started=new Date(n).toISOString()),e){case r.RequestSessionStatus.Errored:return i.errored=(i.errored||0)+1,i.errored;case r.RequestSessionStatus.Ok:return i.exited=(i.exited||0)+1,i.exited;case r.RequestSessionStatus.Crashed:return i.crashed=(i.crashed||0)+1,i.crashed}},e}();n.SessionFlusher=o}}},{package:"@sentry/hub",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@sentry/hub/dist/sessionflusher.js"}],[3245,{"promise-to-callback":6129},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("promise-to-callback");function i(e,t){var n=this,r=t||{};if(!(this instanceof i))throw new Error('[ethjs-rpc] the EthRPC object requires the "new" flag in order to function normally (i.e. `const eth = new EthRPC(provider);`).');n.options=Object.assign({jsonSpace:r.jsonSpace||0,max:r.max||9999999999999}),n.idCounter=Math.floor(Math.random()*n.options.max),n.setProvider=function(e){if("object"!=typeof e)throw new Error("[ethjs-rpc] the EthRPC object requires that the first input 'provider' must be an object, got '"+typeof e+"' (i.e. 'const eth = new EthRPC(provider);')");n.currentProvider=e},n.setProvider(e)}t.exports=i,i.prototype.sendAsync=function(e,t){var n=this;n.idCounter=n.idCounter%n.options.max;var i,s,o=(i=e,s=n.idCounter++,Object.assign({},{id:s,jsonrpc:"2.0",params:[]},i)),a=new Promise((function(e,t){n.currentProvider.sendAsync(o,(function(r,i){var s=i||{};if(r||s.error){var a="[ethjs-rpc] "+(s.error?"rpc":"")+" error with payload "+JSON.stringify(o,null,n.options.jsonSpace)+" "+(r?String(r):JSON.stringify(s.error,null,n.options.jsonSpace)),u=new Error(a);return u.value=r||s.error,void t(u)}e(s.result)}))}));return t?r(a)(t):a}}}},{package:"ethjs-rpc",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/ethjs-rpc/lib/index.js"}],[3242,{"ethjs-schema":3246,"ethjs-util":3249,"number-to-bn":5994,"strip-hex-prefix":6609},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("ethjs-schema"),i=e("ethjs-util"),s=e("number-to-bn"),o=e("strip-hex-prefix"),a=i.padToEven,u=i.arrayContainsArray,c=i.getBinarySize;function l(e,t,n){if(-1===["string","number","object"].indexOf(typeof e)||null===e)return e;var r=s(e),i=n&&r.toString(16).length%2?"0":"";if(s(e).isNeg())throw new Error("[ethjs-format] while formatting quantity '"+r.toString(10)+"', invalid negative number. Number must be positive or zero.");return t?"0x"+i+r.toString(16):r}function d(e,t){var n=e;return-1===r.tags.indexOf(e)&&(n=l(e,t)),n}function f(e,t){var n=e,r=0;if("string"==typeof e&&(n="0x"+a(o(e)),r=c(n)),"0x00"===n&&(n="0x0"),"number"==typeof t&&null!==e&&"0x"!==n&&"0x0"!==n&&(!/^[0-9A-Fa-f]+$/.test(o(n))||r!==2+2*t))throw new Error("[ethjs-format] hex string '"+n+"' must be an alphanumeric "+(2+2*t)+" utf8 byte hex (chars: a-fA-F) string, is "+r+" bytes");return n}function h(e,t,n){var i=Object.assign({},t),s=null;if("string"==typeof e&&(s="Boolean|EthSyncing"===e?Object.assign({},r.objects.EthSyncing):"DATA|Transaction"===e?Object.assign({},r.objects.Transaction):Object.assign({},r.objects[e])),!u(Object.keys(t),s.__required))throw new Error("[ethjs-format] object "+JSON.stringify(t)+" must contain properties: "+s.__required.join(", "));return Object.keys(s).forEach((function(e){"__required"!==e&&void 0!==t[e]&&(i[e]=g(s[e],t[e],n))})),i}function p(e,t,n,r){var i=t.slice(),s=e;if("Array|DATA"===e&&(s=["D"]),"FilterChange"===e&&"string"==typeof t[0]&&(s=["D32"]),!0===n&&"number"==typeof r&&t.length<r)throw new Error("array "+JSON.stringify(t)+" must contain at least "+r+" params, but only contains "+t.length+".");return s=s.slice(),t.forEach((function(e,t){var r=0;s.length>1&&(r=t),i[t]=g(s[r],e,n)})),i}function g(e,t,n,r){var i=t;return"Q"===e?i=l(t,n):"QP"===e?i=l(t,n,!0):"Q|T"===e?i=d(t,n):"D"===e?i=f(t):"D20"===e?i=f(t,20):"D32"===e?i=f(t,32):"object"==typeof t&&null!==t&&!1===Array.isArray(t)?i=h(e,t,n):Array.isArray(t)&&(i=p(e,t,n,r)),i}t.exports={schema:r,formatQuantity:l,formatQuantityOrTag:d,formatObject:h,formatArray:p,format:g,formatInputs:function(e,t){return g(r.methods[e][0],t,!0,r.methods[e][2])},formatOutputs:function(e,t){return g(r.methods[e][1],t,!1)}}}}},{package:"ethjs-format",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/ethjs-format/lib/index.js"}],[3228,{_process:6127},function(){with(this)return function(){"use strict";return function(e,t,n){(function(e){(function(){
/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.5.5
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2016
 * @license MIT
 */
!function(n){"object"==typeof e&&e.versions&&e.versions.node&&(n=global);for(var r=!n.JS_SHA3_TEST&&"object"==typeof t&&t.exports,i="0123456789abcdef".split(""),s=[0,8,16,24],o=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],a=[224,256,384,512],u=["hex","buffer","arrayBuffer","array"],c=function(e,t,n){return function(r){return new v(e,t,e).update(r)[n]()}},l=function(e,t,n){return function(r,i){return new v(e,t,i).update(r)[n]()}},d=function(e,t){var n=c(e,t,"hex");n.create=function(){return new v(e,t,e)},n.update=function(e){return n.create().update(e)};for(var r=0;r<u.length;++r){var i=u[r];n[i]=c(e,t,i)}return n},f=[{name:"keccak",padding:[1,256,65536,16777216],bits:a,createMethod:d},{name:"sha3",padding:[6,1536,393216,100663296],bits:a,createMethod:d},{name:"shake",padding:[31,7936,2031616,520093696],bits:[128,256],createMethod:function(e,t){var n=l(e,t,"hex");n.create=function(n){return new v(e,t,n)},n.update=function(e,t){return n.create(t).update(e)};for(var r=0;r<u.length;++r){var i=u[r];n[i]=l(e,t,i)}return n}}],h={},p=0;p<f.length;++p)for(var g=f[p],m=g.bits,y=0;y<m.length;++y)h[g.name+"_"+m[y]]=g.createMethod(m[y],g.padding);function v(e,t,n){this.blocks=[],this.s=[],this.padding=t,this.outputBits=n,this.reset=!0,this.block=0,this.start=0,this.blockCount=1600-(e<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=n>>5,this.extraBytes=(31&n)>>3;for(var r=0;r<50;++r)this.s[r]=0}v.prototype.update=function(e){var t="string"!=typeof e;t&&e.constructor==n.ArrayBuffer&&(e=new Uint8Array(e));for(var r,i,o=e.length,a=this.blocks,u=this.byteCount,c=this.blockCount,l=0,d=this.s;l<o;){if(this.reset)for(this.reset=!1,a[0]=this.block,r=1;r<c+1;++r)a[r]=0;if(t)for(r=this.start;l<o&&r<u;++l)a[r>>2]|=e[l]<<s[3&r++];else for(r=this.start;l<o&&r<u;++l)(i=e.charCodeAt(l))<128?a[r>>2]|=i<<s[3&r++]:i<2048?(a[r>>2]|=(192|i>>6)<<s[3&r++],a[r>>2]|=(128|63&i)<<s[3&r++]):i<55296||i>=57344?(a[r>>2]|=(224|i>>12)<<s[3&r++],a[r>>2]|=(128|i>>6&63)<<s[3&r++],a[r>>2]|=(128|63&i)<<s[3&r++]):(i=65536+((1023&i)<<10|1023&e.charCodeAt(++l)),a[r>>2]|=(240|i>>18)<<s[3&r++],a[r>>2]|=(128|i>>12&63)<<s[3&r++],a[r>>2]|=(128|i>>6&63)<<s[3&r++],a[r>>2]|=(128|63&i)<<s[3&r++]);if(this.lastByteIndex=r,r>=u){for(this.start=r-u,this.block=a[c],r=0;r<c;++r)d[r]^=a[r];b(d),this.reset=!0}else this.start=r}return this},v.prototype.finalize=function(){var e=this.blocks,t=this.lastByteIndex,n=this.blockCount,r=this.s;if(e[t>>2]|=this.padding[3&t],this.lastByteIndex==this.byteCount)for(e[0]=e[n],t=1;t<n+1;++t)e[t]=0;for(e[n-1]|=2147483648,t=0;t<n;++t)r[t]^=e[t];b(r)},v.prototype.toString=v.prototype.hex=function(){this.finalize();for(var e,t=this.blockCount,n=this.s,r=this.outputBlocks,s=this.extraBytes,o=0,a=0,u="";a<r;){for(o=0;o<t&&a<r;++o,++a)e=n[o],u+=i[e>>4&15]+i[15&e]+i[e>>12&15]+i[e>>8&15]+i[e>>20&15]+i[e>>16&15]+i[e>>28&15]+i[e>>24&15];a%t==0&&(b(n),o=0)}return s&&(e=n[o],s>0&&(u+=i[e>>4&15]+i[15&e]),s>1&&(u+=i[e>>12&15]+i[e>>8&15]),s>2&&(u+=i[e>>20&15]+i[e>>16&15])),u},v.prototype.arrayBuffer=function(){this.finalize();var e,t=this.blockCount,n=this.s,r=this.outputBlocks,i=this.extraBytes,s=0,o=0,a=this.outputBits>>3;e=i?new ArrayBuffer(r+1<<2):new ArrayBuffer(a);for(var u=new Uint32Array(e);o<r;){for(s=0;s<t&&o<r;++s,++o)u[o]=n[s];o%t==0&&b(n)}return i&&(u[s]=n[s],e=e.slice(0,a)),e},v.prototype.buffer=v.prototype.arrayBuffer,v.prototype.digest=v.prototype.array=function(){this.finalize();for(var e,t,n=this.blockCount,r=this.s,i=this.outputBlocks,s=this.extraBytes,o=0,a=0,u=[];a<i;){for(o=0;o<n&&a<i;++o,++a)e=a<<2,t=r[o],u[e]=255&t,u[e+1]=t>>8&255,u[e+2]=t>>16&255,u[e+3]=t>>24&255;a%n==0&&b(r)}return s&&(e=a<<2,t=r[o],s>0&&(u[e]=255&t),s>1&&(u[e+1]=t>>8&255),s>2&&(u[e+2]=t>>16&255)),u};var b=function(e){var t,n,r,i,s,a,u,c,l,d,f,h,p,g,m,y,v,b,_,w,k,S,T,E,P,A,O,C,x,M,j,I,N,R,D,B,U,F,L,H,G,K,q,$,W,z,V,Y,Q,J,X,Z,ee,te,ne,re,ie,se,oe,ae,ue,ce,le;for(r=0;r<48;r+=2)i=e[0]^e[10]^e[20]^e[30]^e[40],s=e[1]^e[11]^e[21]^e[31]^e[41],a=e[2]^e[12]^e[22]^e[32]^e[42],u=e[3]^e[13]^e[23]^e[33]^e[43],c=e[4]^e[14]^e[24]^e[34]^e[44],l=e[5]^e[15]^e[25]^e[35]^e[45],d=e[6]^e[16]^e[26]^e[36]^e[46],f=e[7]^e[17]^e[27]^e[37]^e[47],t=(h=e[8]^e[18]^e[28]^e[38]^e[48])^(a<<1|u>>>31),n=(p=e[9]^e[19]^e[29]^e[39]^e[49])^(u<<1|a>>>31),e[0]^=t,e[1]^=n,e[10]^=t,e[11]^=n,e[20]^=t,e[21]^=n,e[30]^=t,e[31]^=n,e[40]^=t,e[41]^=n,t=i^(c<<1|l>>>31),n=s^(l<<1|c>>>31),e[2]^=t,e[3]^=n,e[12]^=t,e[13]^=n,e[22]^=t,e[23]^=n,e[32]^=t,e[33]^=n,e[42]^=t,e[43]^=n,t=a^(d<<1|f>>>31),n=u^(f<<1|d>>>31),e[4]^=t,e[5]^=n,e[14]^=t,e[15]^=n,e[24]^=t,e[25]^=n,e[34]^=t,e[35]^=n,e[44]^=t,e[45]^=n,t=c^(h<<1|p>>>31),n=l^(p<<1|h>>>31),e[6]^=t,e[7]^=n,e[16]^=t,e[17]^=n,e[26]^=t,e[27]^=n,e[36]^=t,e[37]^=n,e[46]^=t,e[47]^=n,t=d^(i<<1|s>>>31),n=f^(s<<1|i>>>31),e[8]^=t,e[9]^=n,e[18]^=t,e[19]^=n,e[28]^=t,e[29]^=n,e[38]^=t,e[39]^=n,e[48]^=t,e[49]^=n,g=e[0],m=e[1],z=e[11]<<4|e[10]>>>28,V=e[10]<<4|e[11]>>>28,C=e[20]<<3|e[21]>>>29,x=e[21]<<3|e[20]>>>29,ae=e[31]<<9|e[30]>>>23,ue=e[30]<<9|e[31]>>>23,K=e[40]<<18|e[41]>>>14,q=e[41]<<18|e[40]>>>14,R=e[2]<<1|e[3]>>>31,D=e[3]<<1|e[2]>>>31,y=e[13]<<12|e[12]>>>20,v=e[12]<<12|e[13]>>>20,Y=e[22]<<10|e[23]>>>22,Q=e[23]<<10|e[22]>>>22,M=e[33]<<13|e[32]>>>19,j=e[32]<<13|e[33]>>>19,ce=e[42]<<2|e[43]>>>30,le=e[43]<<2|e[42]>>>30,te=e[5]<<30|e[4]>>>2,ne=e[4]<<30|e[5]>>>2,B=e[14]<<6|e[15]>>>26,U=e[15]<<6|e[14]>>>26,b=e[25]<<11|e[24]>>>21,_=e[24]<<11|e[25]>>>21,J=e[34]<<15|e[35]>>>17,X=e[35]<<15|e[34]>>>17,I=e[45]<<29|e[44]>>>3,N=e[44]<<29|e[45]>>>3,E=e[6]<<28|e[7]>>>4,P=e[7]<<28|e[6]>>>4,re=e[17]<<23|e[16]>>>9,ie=e[16]<<23|e[17]>>>9,F=e[26]<<25|e[27]>>>7,L=e[27]<<25|e[26]>>>7,w=e[36]<<21|e[37]>>>11,k=e[37]<<21|e[36]>>>11,Z=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,$=e[8]<<27|e[9]>>>5,W=e[9]<<27|e[8]>>>5,A=e[18]<<20|e[19]>>>12,O=e[19]<<20|e[18]>>>12,se=e[29]<<7|e[28]>>>25,oe=e[28]<<7|e[29]>>>25,H=e[38]<<8|e[39]>>>24,G=e[39]<<8|e[38]>>>24,S=e[48]<<14|e[49]>>>18,T=e[49]<<14|e[48]>>>18,e[0]=g^~y&b,e[1]=m^~v&_,e[10]=E^~A&C,e[11]=P^~O&x,e[20]=R^~B&F,e[21]=D^~U&L,e[30]=$^~z&Y,e[31]=W^~V&Q,e[40]=te^~re&se,e[41]=ne^~ie&oe,e[2]=y^~b&w,e[3]=v^~_&k,e[12]=A^~C&M,e[13]=O^~x&j,e[22]=B^~F&H,e[23]=U^~L&G,e[32]=z^~Y&J,e[33]=V^~Q&X,e[42]=re^~se&ae,e[43]=ie^~oe&ue,e[4]=b^~w&S,e[5]=_^~k&T,e[14]=C^~M&I,e[15]=x^~j&N,e[24]=F^~H&K,e[25]=L^~G&q,e[34]=Y^~J&Z,e[35]=Q^~X&ee,e[44]=se^~ae&ce,e[45]=oe^~ue&le,e[6]=w^~S&g,e[7]=k^~T&m,e[16]=M^~I&E,e[17]=j^~N&P,e[26]=H^~K&R,e[27]=G^~q&D,e[36]=J^~Z&$,e[37]=X^~ee&W,e[46]=ae^~ce&te,e[47]=ue^~le&ne,e[8]=S^~g&y,e[9]=T^~m&v,e[18]=I^~E&A,e[19]=N^~P&O,e[28]=K^~R&B,e[29]=q^~D&U,e[38]=Z^~$&z,e[39]=ee^~W&V,e[48]=ce^~te&re,e[49]=le^~ne&ie,e[0]^=o[r],e[1]^=o[r+1]};if(r)t.exports=h;else if(n)for(var _ in h)n[_]=h[_]}(this)}).call(this)}).call(this,e("_process"))}}},{package:"js-sha3",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/ethjs-contract/node_modules/js-sha3/src/sha3.js"}],[3249,{buffer:2478,"is-hex-prefixed":5386,"strip-hex-prefix":6609},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r=e("is-hex-prefixed"),i=e("strip-hex-prefix");function s(e){var t=e;if("string"!=typeof t)throw new Error("[ethjs-util] while padding to even, value must be string, is currently "+typeof t+", while padToEven.");return t.length%2&&(t="0"+t),t}function o(e){return"0x"+s(e.toString(16))}t.exports={arrayContainsArray:function(e,t,n){if(!0!==Array.isArray(e))throw new Error("[ethjs-util] method arrayContainsArray requires input 'superset' to be an array got type '"+typeof e+"'");if(!0!==Array.isArray(t))throw new Error("[ethjs-util] method arrayContainsArray requires input 'subset' to be an array got type '"+typeof t+"'");return t[Boolean(n)?"some":"every"]((function(t){return e.indexOf(t)>=0}))},intToBuffer:function(e){var t=o(e);return n.from(t.slice(2),"hex")},getBinarySize:function(e){if("string"!=typeof e)throw new Error("[ethjs-util] while getting binary size, method getBinarySize requires input 'str' to be type String, got '"+typeof e+"'.");return n.byteLength(e,"utf8")},isHexPrefixed:r,stripHexPrefix:i,padToEven:s,intToHex:o,fromAscii:function(e){for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n).toString(16);t+=r.length<2?"0"+r:r}return"0x"+t},fromUtf8:function(e){return"0x"+s(new n(e,"utf8").toString("hex")).replace(/^0+|0+$/g,"")},toAscii:function(e){var t="",n=0,r=e.length;for("0x"===e.substring(0,2)&&(n=2);n<r;n+=2){var i=parseInt(e.substr(n,2),16);t+=String.fromCharCode(i)}return t},toUtf8:function(e){return new n(s(i(e).replace(/^0+|0+$/g,"")),"hex").toString("utf8")},getKeys:function(e,t,n){if(!Array.isArray(e))throw new Error("[ethjs-util] method getKeys expecting type Array as 'params' input, got '"+typeof e+"'");if("string"!=typeof t)throw new Error("[ethjs-util] method getKeys expecting type String for input 'key' got '"+typeof t+"'.");for(var r=[],i=0;i<e.length;i++){var s=e[i][t];if(n&&!s)s="";else if("string"!=typeof s)throw new Error("invalid abi");r.push(s)}return r},isHexString:function(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"ethjs-util",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/ethjs-util/lib/index.js"}],[3241,{},function(){with(this)return function(){"use strict";return function(e,t,n){function r(e,t){function n(e){var n=this;n.filterId=null,n.options=Object.assign({delay:300,decoder:function(e){return e},defaultFilterObject:{}},e||{}),n.watchers={},n.interval=setInterval((function(){null!==n.filterId&&Object.keys(n.watchers).length>0&&t.getFilterChanges(n.filterId,(function(e,t){var r=[],i=null;if(!e)try{t.forEach((function(e,i){r[i]=t[i],"object"==typeof t[i]&&(r[i].data=n.options.decoder(r[i].data))}))}catch(e){i=new Error("[ethjs-filter] while decoding filter change event data from RPC '"+JSON.stringify(r)+"': "+e)}Object.keys(n.watchers).forEach((function(s){var o=n.watchers[s];!0!==o.stop?i?o.callback(i,null):e?o.callback(e,null):Array.isArray(r)&&t.length>0&&o.callback(e,r):delete n.watchers[s]}))}))}),n.options.delay)}return n.prototype.at=function(e){this.filterId=e},n.prototype.watch=function(e){var t=e||function(){},n=this,r=Math.random().toString(36).substring(7);return n.watchers[r]={callback:t,stop:!1,stopWatching:function(){n.watchers[r].stop=!0}},n.watchers[r]},n.prototype.uninstall=function(e){var n=this,r=e||null;n.watchers=Object.assign({}),clearInterval(n.interval);var i=new Promise((function(e,r){t.uninstallFilter(n.filterId,(function(t,n){t?r(t):e(n)}))}));return r&&i.then((function(e){return r(null,e)})).catch((function(e){return r(e,null)})),r?null:i},n.prototype.new=function(){var n=null,r=this,i=[],s=[].slice.call(arguments);"function"==typeof s[s.length-1]&&(n=s.pop()),"Filter"===e&&i.push(Object.assign(r.options.defaultFilterObject,s[s.length-1]||{}));var o=new Promise((function(n,s){i.push((function(e,t){e?s(e):(r.filterId=t,n(t))})),t["new"+e].apply(t,i)}));return n&&o.then((function(e){return n(null,e)})).catch((function(e){return n(e,null)})),n?null:o},n}t.exports=function e(t){var n=this;if(!(n instanceof e))throw new Error("the EthFilter object must be instantiated with `new` flag.. (e.g. `const filters = new EthFilter(query);`)");if("object"!=typeof t)throw new Error("the EthFilter object must be instantiated with an EthQuery instance (e.g. `const filters = new EthFilter(new EthQuery(provider));`). See github.com/ethjs/ethjs-query for more details..");n.Filter=r("Filter",t),n.BlockFilter=r("BlockFilter",t),n.PendingTransactionFilter=r("PendingTransactionFilter",t)}}}},{package:"ethjs-filter",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/ethjs-filter/lib/index.js"}],[3221,{"./utils/index.js":3222,buffer:2478},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r=e("./utils/index.js"),i=r.uint256Coder,s=(r.coderBoolean,r.coderFixedBytes,r.coderAddress,r.coderDynamicBytes,r.coderString,r.coderArray,r.paramTypePart,r.getParamCoder);function o(){}function a(e,t){if(e.length!==t.length)throw new Error("[ethjs-abi] while encoding params, types/values mismatch, Your contract requires "+e.length+" types (arguments), and you passed in "+t.length);var r=[];function o(e){return parseInt(32*Math.ceil(e/32))}e.forEach((function(e,n){var i=s(e);r.push({dynamic:i.dynamic,value:i.encode(t[n])})}));var a=0,u=0;r.forEach((function(e){e.dynamic?(a+=32,u+=o(e.value.length)):a+=o(e.value.length)}));var c=0,l=a,d=new n(a+u);return r.forEach((function(e,t){e.dynamic?(i.encode(l).copy(d,c),c+=32,e.value.copy(d,l),l+=o(e.value.length)):(e.value.copy(d,c),c+=o(e.value.length))})),"0x"+d.toString("hex")}function u(e,t,n){var a=!(arguments.length>3&&arguments[3]!==undefined)||arguments[3];arguments.length<3&&(n=t,t=e,e=[]),n=r.hexOrBuffer(n);var u=new o,c=0;return t.forEach((function(t,r){var o=s(t);if(o.dynamic){var l=i.decode(n,c),d=o.decode(n,l.value.toNumber());c+=l.consumed}else{d=o.decode(n,c);c+=d.consumed}a&&(u[r]=d.value),e[r]&&(u[e[r]]=d.value)})),u}function c(e,t){var i=e.name+"("+r.getKeys(e.inputs,"type").join(",")+")";return""+("0x"+new n(r.keccak256(i),"hex").slice(0,4).toString("hex"))+a(r.getKeys(e.inputs,"type"),t).substring(2)}function l(e){var t=e.name+"("+r.getKeys(e.inputs,"type").join(",")+")";return"0x"+r.keccak256(t)}function d(e,t,i){var o=!(arguments.length>3&&arguments[3]!==undefined)||arguments[3],a=e.inputs.filter((function(e){return!e.indexed})),c=r.getKeys(a,"name",!0),l=r.getKeys(a,"type"),d=u(c,l,r.hexOrBuffer(t),o),f=e.anonymous?0:1;return e.inputs.filter((function(e){return e.indexed})).map((function(e,t){var r=new n(i[t+f].slice(2),"hex"),o=s(e.type);d[e.name]=o.decode(r,0).value})),d._eventName=e.name,d}function f(e,t){var n=!(arguments.length>2&&arguments[2]!==undefined)||arguments[2];if(e&&t.topics[0]===l(e))return d(e,t.data,t.topics,n)}t.exports={encodeParams:a,decodeParams:u,encodeMethod:c,decodeMethod:function(e,t){return u(r.getKeys(e.outputs,"name",!0),r.getKeys(e.outputs,"type"),r.hexOrBuffer(t))},encodeEvent:function(e,t){return c(e,t)},decodeEvent:d,decodeLogItem:f,logDecoder:function(e){var t=!(arguments.length>1&&arguments[1]!==undefined)||arguments[1],n={};return e.filter((function(e){return"event"===e.type})).map((function(e){n[l(e)]=e})),function(e){return e.map((function(e){return f(n[e.topics[0]],e,t)})).filter((function(e){return e}))}},eventSignature:l}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"ethjs-abi",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/ethjs-abi/lib/index.js"}],[2205,{"core-js/library/fn/object/assign":2228},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports={default:e("core-js/library/fn/object/assign"),__esModule:!0}}}},{package:"babel-runtime",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/babel-runtime/core-js/object/assign.js"}],[3225,{"./has-tx-object":3226,"babel-runtime/core-js/json/stringify":2204,"babel-runtime/core-js/object/assign":2205,"babel-runtime/helpers/asyncToGenerator":2213,"babel-runtime/regenerator":2330,"ethjs-abi":3221,"ethjs-filter":3241,"ethjs-util":3249,"js-sha3":3228,"promise-to-callback":6129},function(){with(this)return function(){"use strict";return function(e,t,n){var r=a(e("babel-runtime/regenerator")),i=a(e("babel-runtime/core-js/json/stringify")),s=a(e("babel-runtime/helpers/asyncToGenerator")),o=a(e("babel-runtime/core-js/object/assign"));function a(e){return e&&e.__esModule?e:{default:e}}var u=e("ethjs-abi"),c=e("ethjs-filter"),l=e("ethjs-util").getKeys,d=e("js-sha3").keccak_256,f=e("./has-tx-object"),h=e("promise-to-callback");function p(e){return e.filter((function(e){return("function"===e.type||"event"===e.type)&&e.name.length>0}))}t.exports=function(){var e=(a=(0,s.default)(r.default.mark((function e(t){var s,a,c,l,d,h=t.methodObject,p=t.methodArgs;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s="call",a={},f(p)&&(a=p.pop()),(c=(0,o.default)({},n.defaultTxObject,a,{to:n.address})).data=u.encodeMethod(h,p),!1===h.constant&&(s="sendTransaction"),e.next=8,n.query[s](c);case 8:if(l=e.sent,"call"!==s){e.next=19;break}return e.prev=10,d=u.decodeMethod(h,l),e.abrupt("return",d);case 15:throw e.prev=15,e.t0=e.catch(10),new Error("[ethjs-contract] while formatting incoming raw call data "+(0,i.default)(l)+" "+e.t0);case 19:return e.abrupt("return",l);case 20:case"end":return e.stop()}}),e,this,[[10,15]])}))),function(e){return a.apply(this,arguments)}),t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},n=this;var a;function g(e){return function(){var t=[].slice.call(arguments),r=l(e.inputs,"type",!1),i="0x"+d(e.name+"("+r.join(",")+")"),s=[i],a=(0,o.default)({},t[0])||{},c=(0,o.default)({},t[0]||{},{to:n.address,topics:s}),f=(0,o.default)({},a,{decoder:function(t){return u.decodeEvent(e,t,s)},defaultFilterObject:c});return new n.filters.Filter(f)}}function m(t){return function(){var n=void 0,r=[].slice.call(arguments);"function"==typeof r[r.length-1]&&(n=r.pop());var i=e({methodObject:t,methodArgs:r});return n?h(i)(n):i}}n.abi=t.contractABI||[],n.query=t.query,n.address=t.address||"0x",n.bytecode=t.contractBytecode||"0x",n.defaultTxObject=t.contractDefaultTxObject||{},n.filters=new c(n.query),p(n.abi).forEach((function(e){"function"===e.type?n[e.name]=m(e):"event"===e.type&&(n[e.name]=g(e))}))}}}},{package:"ethjs-contract",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/ethjs-contract/lib/contract.js"}],[3226,{"babel-runtime/core-js/object/keys":2208},function(){with(this)return function(){"use strict";return function(e,t,n){var r,i=e("babel-runtime/core-js/object/keys"),s=(r=i)&&r.__esModule?r:{default:r};var o=["from","to","data","value","gasPrice","gas"];t.exports=function(e){if(!Array.isArray(e)||0===e.length)return!1;var t=e[e.length-1];if(!t)return!1;if("object"!=typeof t)return!1;if(0===(0,s.default)(t).length)return!0;var n=(0,s.default)(t);if(o.some((function(e){return n.includes(e)})))return!0;return!1}}}},{package:"ethjs-contract",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/ethjs-contract/lib/has-tx-object.js"}],[3043,{_process:6127},function(){with(this)return function(){"use strict";return function(e,t,n){(function(e){(function(){
/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.5.7
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2016
 * @license MIT
 */
!function(){var n="object"==typeof window?window:{};!n.JS_SHA3_NO_NODE_JS&&"object"==typeof e&&e.versions&&e.versions.node&&(n=global);for(var r=!n.JS_SHA3_NO_COMMON_JS&&"object"==typeof t&&t.exports,i="0123456789abcdef".split(""),s=[0,8,16,24],o=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],a=[224,256,384,512],u=["hex","buffer","arrayBuffer","array"],c=function(e,t,n){return function(r){return new _(e,t,e).update(r)[n]()}},l=function(e,t,n){return function(r,i){return new _(e,t,i).update(r)[n]()}},d=function(e,t){var n=c(e,t,"hex");n.create=function(){return new _(e,t,e)},n.update=function(e){return n.create().update(e)};for(var r=0;r<u.length;++r){var i=u[r];n[i]=c(e,t,i)}return n},f=[{name:"keccak",padding:[1,256,65536,16777216],bits:a,createMethod:d},{name:"sha3",padding:[6,1536,393216,100663296],bits:a,createMethod:d},{name:"shake",padding:[31,7936,2031616,520093696],bits:[128,256],createMethod:function(e,t){var n=l(e,t,"hex");n.create=function(n){return new _(e,t,n)},n.update=function(e,t){return n.create(t).update(e)};for(var r=0;r<u.length;++r){var i=u[r];n[i]=l(e,t,i)}return n}}],h={},p=[],g=0;g<f.length;++g)for(var m=f[g],y=m.bits,v=0;v<y.length;++v){var b=m.name+"_"+y[v];p.push(b),h[b]=m.createMethod(y[v],m.padding)}function _(e,t,n){this.blocks=[],this.s=[],this.padding=t,this.outputBits=n,this.reset=!0,this.block=0,this.start=0,this.blockCount=1600-(e<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=n>>5,this.extraBytes=(31&n)>>3;for(var r=0;r<50;++r)this.s[r]=0}_.prototype.update=function(e){var t="string"!=typeof e;t&&e.constructor===ArrayBuffer&&(e=new Uint8Array(e));for(var n,r,i=e.length,o=this.blocks,a=this.byteCount,u=this.blockCount,c=0,l=this.s;c<i;){if(this.reset)for(this.reset=!1,o[0]=this.block,n=1;n<u+1;++n)o[n]=0;if(t)for(n=this.start;c<i&&n<a;++c)o[n>>2]|=e[c]<<s[3&n++];else for(n=this.start;c<i&&n<a;++c)(r=e.charCodeAt(c))<128?o[n>>2]|=r<<s[3&n++]:r<2048?(o[n>>2]|=(192|r>>6)<<s[3&n++],o[n>>2]|=(128|63&r)<<s[3&n++]):r<55296||r>=57344?(o[n>>2]|=(224|r>>12)<<s[3&n++],o[n>>2]|=(128|r>>6&63)<<s[3&n++],o[n>>2]|=(128|63&r)<<s[3&n++]):(r=65536+((1023&r)<<10|1023&e.charCodeAt(++c)),o[n>>2]|=(240|r>>18)<<s[3&n++],o[n>>2]|=(128|r>>12&63)<<s[3&n++],o[n>>2]|=(128|r>>6&63)<<s[3&n++],o[n>>2]|=(128|63&r)<<s[3&n++]);if(this.lastByteIndex=n,n>=a){for(this.start=n-a,this.block=o[u],n=0;n<u;++n)l[n]^=o[n];w(l),this.reset=!0}else this.start=n}return this},_.prototype.finalize=function(){var e=this.blocks,t=this.lastByteIndex,n=this.blockCount,r=this.s;if(e[t>>2]|=this.padding[3&t],this.lastByteIndex===this.byteCount)for(e[0]=e[n],t=1;t<n+1;++t)e[t]=0;for(e[n-1]|=2147483648,t=0;t<n;++t)r[t]^=e[t];w(r)},_.prototype.toString=_.prototype.hex=function(){this.finalize();for(var e,t=this.blockCount,n=this.s,r=this.outputBlocks,s=this.extraBytes,o=0,a=0,u="";a<r;){for(o=0;o<t&&a<r;++o,++a)e=n[o],u+=i[e>>4&15]+i[15&e]+i[e>>12&15]+i[e>>8&15]+i[e>>20&15]+i[e>>16&15]+i[e>>28&15]+i[e>>24&15];a%t==0&&(w(n),o=0)}return s&&(e=n[o],s>0&&(u+=i[e>>4&15]+i[15&e]),s>1&&(u+=i[e>>12&15]+i[e>>8&15]),s>2&&(u+=i[e>>20&15]+i[e>>16&15])),u},_.prototype.arrayBuffer=function(){this.finalize();var e,t=this.blockCount,n=this.s,r=this.outputBlocks,i=this.extraBytes,s=0,o=0,a=this.outputBits>>3;e=i?new ArrayBuffer(r+1<<2):new ArrayBuffer(a);for(var u=new Uint32Array(e);o<r;){for(s=0;s<t&&o<r;++s,++o)u[o]=n[s];o%t==0&&w(n)}return i&&(u[s]=n[s],e=e.slice(0,a)),e},_.prototype.buffer=_.prototype.arrayBuffer,_.prototype.digest=_.prototype.array=function(){this.finalize();for(var e,t,n=this.blockCount,r=this.s,i=this.outputBlocks,s=this.extraBytes,o=0,a=0,u=[];a<i;){for(o=0;o<n&&a<i;++o,++a)e=a<<2,t=r[o],u[e]=255&t,u[e+1]=t>>8&255,u[e+2]=t>>16&255,u[e+3]=t>>24&255;a%n==0&&w(r)}return s&&(e=a<<2,t=r[o],s>0&&(u[e]=255&t),s>1&&(u[e+1]=t>>8&255),s>2&&(u[e+2]=t>>16&255)),u};var w=function(e){var t,n,r,i,s,a,u,c,l,d,f,h,p,g,m,y,v,b,_,w,k,S,T,E,P,A,O,C,x,M,j,I,N,R,D,B,U,F,L,H,G,K,q,$,W,z,V,Y,Q,J,X,Z,ee,te,ne,re,ie,se,oe,ae,ue,ce,le;for(r=0;r<48;r+=2)i=e[0]^e[10]^e[20]^e[30]^e[40],s=e[1]^e[11]^e[21]^e[31]^e[41],a=e[2]^e[12]^e[22]^e[32]^e[42],u=e[3]^e[13]^e[23]^e[33]^e[43],c=e[4]^e[14]^e[24]^e[34]^e[44],l=e[5]^e[15]^e[25]^e[35]^e[45],d=e[6]^e[16]^e[26]^e[36]^e[46],f=e[7]^e[17]^e[27]^e[37]^e[47],t=(h=e[8]^e[18]^e[28]^e[38]^e[48])^(a<<1|u>>>31),n=(p=e[9]^e[19]^e[29]^e[39]^e[49])^(u<<1|a>>>31),e[0]^=t,e[1]^=n,e[10]^=t,e[11]^=n,e[20]^=t,e[21]^=n,e[30]^=t,e[31]^=n,e[40]^=t,e[41]^=n,t=i^(c<<1|l>>>31),n=s^(l<<1|c>>>31),e[2]^=t,e[3]^=n,e[12]^=t,e[13]^=n,e[22]^=t,e[23]^=n,e[32]^=t,e[33]^=n,e[42]^=t,e[43]^=n,t=a^(d<<1|f>>>31),n=u^(f<<1|d>>>31),e[4]^=t,e[5]^=n,e[14]^=t,e[15]^=n,e[24]^=t,e[25]^=n,e[34]^=t,e[35]^=n,e[44]^=t,e[45]^=n,t=c^(h<<1|p>>>31),n=l^(p<<1|h>>>31),e[6]^=t,e[7]^=n,e[16]^=t,e[17]^=n,e[26]^=t,e[27]^=n,e[36]^=t,e[37]^=n,e[46]^=t,e[47]^=n,t=d^(i<<1|s>>>31),n=f^(s<<1|i>>>31),e[8]^=t,e[9]^=n,e[18]^=t,e[19]^=n,e[28]^=t,e[29]^=n,e[38]^=t,e[39]^=n,e[48]^=t,e[49]^=n,g=e[0],m=e[1],z=e[11]<<4|e[10]>>>28,V=e[10]<<4|e[11]>>>28,C=e[20]<<3|e[21]>>>29,x=e[21]<<3|e[20]>>>29,ae=e[31]<<9|e[30]>>>23,ue=e[30]<<9|e[31]>>>23,K=e[40]<<18|e[41]>>>14,q=e[41]<<18|e[40]>>>14,R=e[2]<<1|e[3]>>>31,D=e[3]<<1|e[2]>>>31,y=e[13]<<12|e[12]>>>20,v=e[12]<<12|e[13]>>>20,Y=e[22]<<10|e[23]>>>22,Q=e[23]<<10|e[22]>>>22,M=e[33]<<13|e[32]>>>19,j=e[32]<<13|e[33]>>>19,ce=e[42]<<2|e[43]>>>30,le=e[43]<<2|e[42]>>>30,te=e[5]<<30|e[4]>>>2,ne=e[4]<<30|e[5]>>>2,B=e[14]<<6|e[15]>>>26,U=e[15]<<6|e[14]>>>26,b=e[25]<<11|e[24]>>>21,_=e[24]<<11|e[25]>>>21,J=e[34]<<15|e[35]>>>17,X=e[35]<<15|e[34]>>>17,I=e[45]<<29|e[44]>>>3,N=e[44]<<29|e[45]>>>3,E=e[6]<<28|e[7]>>>4,P=e[7]<<28|e[6]>>>4,re=e[17]<<23|e[16]>>>9,ie=e[16]<<23|e[17]>>>9,F=e[26]<<25|e[27]>>>7,L=e[27]<<25|e[26]>>>7,w=e[36]<<21|e[37]>>>11,k=e[37]<<21|e[36]>>>11,Z=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,$=e[8]<<27|e[9]>>>5,W=e[9]<<27|e[8]>>>5,A=e[18]<<20|e[19]>>>12,O=e[19]<<20|e[18]>>>12,se=e[29]<<7|e[28]>>>25,oe=e[28]<<7|e[29]>>>25,H=e[38]<<8|e[39]>>>24,G=e[39]<<8|e[38]>>>24,S=e[48]<<14|e[49]>>>18,T=e[49]<<14|e[48]>>>18,e[0]=g^~y&b,e[1]=m^~v&_,e[10]=E^~A&C,e[11]=P^~O&x,e[20]=R^~B&F,e[21]=D^~U&L,e[30]=$^~z&Y,e[31]=W^~V&Q,e[40]=te^~re&se,e[41]=ne^~ie&oe,e[2]=y^~b&w,e[3]=v^~_&k,e[12]=A^~C&M,e[13]=O^~x&j,e[22]=B^~F&H,e[23]=U^~L&G,e[32]=z^~Y&J,e[33]=V^~Q&X,e[42]=re^~se&ae,e[43]=ie^~oe&ue,e[4]=b^~w&S,e[5]=_^~k&T,e[14]=C^~M&I,e[15]=x^~j&N,e[24]=F^~H&K,e[25]=L^~G&q,e[34]=Y^~J&Z,e[35]=Q^~X&ee,e[44]=se^~ae&ce,e[45]=oe^~ue&le,e[6]=w^~S&g,e[7]=k^~T&m,e[16]=M^~I&E,e[17]=j^~N&P,e[26]=H^~K&R,e[27]=G^~q&D,e[36]=J^~Z&$,e[37]=X^~ee&W,e[46]=ae^~ce&te,e[47]=ue^~le&ne,e[8]=S^~g&y,e[9]=T^~m&v,e[18]=I^~E&A,e[19]=N^~P&O,e[28]=K^~R&B,e[29]=q^~D&U,e[38]=Z^~$&z,e[39]=ee^~W&V,e[48]=ce^~te&re,e[49]=le^~ne&ie,e[0]^=o[r],e[1]^=o[r+1]};if(r)t.exports=h;else for(g=0;g<p.length;++g)n[p[g]]=h[p[g]]}()}).call(this)}).call(this,e("_process"))}}},{package:"js-sha3",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/eth-ens-namehash/node_modules/js-sha3/src/sha3.js"}],[5080,{"./idna-map":5079,punycode:2480},function(){with(this)return function(){"use strict";return function(e,t,n){var r,i;r=this,i=function(e,t){function n(n,r,i){for(var s=[],o=e.ucs2.decode(n),a=0;a<o.length;a++){var u=o[a],c=e.ucs2.encode([o[a]]),l=t.mapChar(u),d=l>>23,f=l>>21&3,h=l>>5&65535,p=31&l,g=t.mapStr.substr(h,p);if(0===f||r&&1&d)throw new Error("Illegal char "+c);1===f?s.push(g):2===f?s.push(i?g:c):3===f&&s.push(c)}return s.join("").normalize("NFC")}function r(t,r,s){s===undefined&&(s=!1);var o=n(t,s,r).split(".");return(o=o.map((function(t){return t.startsWith("xn--")?i(t=e.decode(t.substring(4)),s,!1):i(t,s,r),t}))).join(".")}function i(e,r,i){if("-"===e[2]&&"-"===e[3])throw new Error("Failed to validate "+e);if(e.startsWith("-")||e.endsWith("-"))throw new Error("Failed to validate "+e);if(e.includes("."))throw new Error("Failed to validate "+e);if(n(e,r,i)!==e)throw new Error("Failed to validate "+e);var s=e.codePointAt(0);if(t.mapChar(s)&2<<23)throw new Error("Label contains illegal character: "+s)}return{toUnicode:function(e,t){return t===undefined&&(t={}),r(e,!1,"useStd3ASCII"in t&&t.useStd3ASCII)},toAscii:function(t,n){n===undefined&&(n={});var i,s=!("transitional"in n)||n.transitional,o="useStd3ASCII"in n&&n.useStd3ASCII,a="verifyDnsLength"in n&&n.verifyDnsLength,u=r(t,s,o).split(".").map(e.toASCII),c=u.join(".");if(a){if(c.length<1||c.length>253)throw new Error("DNS name has wrong length: "+c);for(i=0;i<u.length;i++){var l=u[i];if(l.length<1||l.length>63)throw new Error("DNS label has wrong length: "+l)}}return c}}},"function"==typeof define&&define.amd?define(["punycode","./idna-map"],(function(e,t){return i(e,t)})):"object"==typeof n?t.exports=i(e("punycode"),e("./idna-map")):r.uts46=i(r.punycode,r.idna_map)}}},{package:"idna-uts46-hx",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/idna-uts46-hx/uts46.js"}],[3060,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e){return(t,n,r,i)=>{const s=e[t.method];return s===undefined?r():"function"==typeof s?s(t,n,r,i):(n.result=s,i())}}}}},{package:"json-rpc-engine",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/eth-json-rpc-filters/node_modules/json-rpc-engine/src/createScaffoldMiddleware.js"}],[3061,{},function(){with(this)return function(){"use strict";return function(e,t,n){const r=(e,t)=>function(){const n=t.promiseModule,r=new Array(arguments.length);for(let e=0;e<arguments.length;e++)r[e]=arguments[e];return new n(((n,i)=>{t.errorFirst?r.push((function(e,r){if(t.multiArgs){const t=new Array(arguments.length-1);for(let e=1;e<arguments.length;e++)t[e-1]=arguments[e];e?(t.unshift(e),i(t)):n(t)}else e?i(e):n(r)})):r.push((function(e){if(t.multiArgs){const e=new Array(arguments.length-1);for(let t=0;t<arguments.length;t++)e[t]=arguments[t];n(e)}else n(e)})),e.apply(this,r)}))};t.exports=(e,t)=>{t=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},t);const n=e=>{const n=t=>"string"==typeof t?e===t:t.test(e);return t.include?t.include.some(n):!t.exclude.some(n)};let i;i="function"==typeof e?function(){return t.excludeMain?e.apply(this,arguments):r(e,t).apply(this,arguments)}:Object.create(Object.getPrototypeOf(e));for(const s in e){const o=e[s];i[s]="function"==typeof o&&n(s)?r(o,t):o}return i}}}},{package:"pify",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/eth-json-rpc-filters/node_modules/pify/index.js"}],[3051,{"./base-filter":3052},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("./base-filter");t.exports=class extends r{constructor(){super(),this.allResults=[]}async update(){throw new Error("BaseFilterWithHistory - no update method specified")}addResults(e){this.allResults=this.allResults.concat(e),super.addResults(e)}addInitialResults(e){this.allResults=this.allResults.concat(e),super.addInitialResults(e)}getAllResults(){return this.allResults}}}}},{package:"eth-json-rpc-filters",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/eth-json-rpc-filters/base-filter-history.js"}],[3052,{"safe-event-emitter":6451},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("safe-event-emitter");t.exports=class extends r{constructor(){super(),this.updates=[]}async initialize(){}async update(){throw new Error("BaseFilter - no update method specified")}addResults(e){this.updates=this.updates.concat(e),e.forEach((e=>this.emit("update",e)))}addInitialResults(e){}getChangesAndClear(){const e=this.updates;return this.updates=[],e}}}}},{package:"eth-json-rpc-filters",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/eth-json-rpc-filters/base-filter.js"}],[5691,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r="__lodash_hash_undefined__",i=9007199254740991,s="[object Arguments]",o="[object Array]",a="[object Boolean]",u="[object Date]",c="[object Error]",l="[object Function]",d="[object Map]",f="[object Number]",h="[object Object]",p="[object Promise]",g="[object RegExp]",m="[object Set]",y="[object String]",v="[object Symbol]",b="[object WeakMap]",_="[object ArrayBuffer]",w="[object DataView]",k=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,S=/^\w*$/,T=/^\./,E=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,P=/\\(\\)?/g,A=/^\[object .+?Constructor\]$/,O=/^(?:0|[1-9]\d*)$/,C={};C["[object Float32Array]"]=C["[object Float64Array]"]=C["[object Int8Array]"]=C["[object Int16Array]"]=C["[object Int32Array]"]=C["[object Uint8Array]"]=C["[object Uint8ClampedArray]"]=C["[object Uint16Array]"]=C["[object Uint32Array]"]=!0,C[s]=C[o]=C[_]=C[a]=C[w]=C[u]=C[c]=C[l]=C[d]=C[f]=C[h]=C[g]=C[m]=C[y]=C[b]=!1;var x="object"==typeof global&&global&&global.Object===Object&&global,M="object"==typeof self&&self&&self.Object===Object&&self,j=x||M||Function("return this")(),I="object"==typeof n&&n&&!n.nodeType&&n,N=I&&"object"==typeof t&&t&&!t.nodeType&&t,R=N&&N.exports===I&&x.process,D=function(){try{return R&&R.binding("util")}catch(e){}}(),B=D&&D.isTypedArray;function U(e,t){for(var n=-1,r=e?e.length:0,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function F(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function L(e,t){for(var n=-1,r=e?e.length:0;++n<r;)if(t(e[n],n,e))return!0;return!1}function H(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function G(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function K(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var q,$,W,z=Array.prototype,V=Function.prototype,Y=Object.prototype,Q=j["__core-js_shared__"],J=(q=/[^.]+$/.exec(Q&&Q.keys&&Q.keys.IE_PROTO||""))?"Symbol(src)_1."+q:"",X=V.toString,Z=Y.hasOwnProperty,ee=Y.toString,te=RegExp("^"+X.call(Z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ne=j.Symbol,re=j.Uint8Array,ie=Y.propertyIsEnumerable,se=z.splice,oe=ne?ne.isConcatSpreadable:undefined,ae=($=Object.keys,W=Object,function(e){return $(W(e))}),ue=qe(j,"DataView"),ce=qe(j,"Map"),le=qe(j,"Promise"),de=qe(j,"Set"),fe=qe(j,"WeakMap"),he=qe(Object,"create"),pe=Ze(ue),ge=Ze(ce),me=Ze(le),ye=Ze(de),ve=Ze(fe),be=ne?ne.prototype:undefined,_e=be?be.valueOf:undefined,we=be?be.toString:undefined;function ke(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Se(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Te(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ee(e){var t=-1,n=e?e.length:0;for(this.__data__=new Te;++t<n;)this.add(e[t])}function Pe(e){this.__data__=new Se(e)}function Ae(e,t){var n=rt(e)||nt(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],r=n.length,i=!!r;for(var s in e)!t&&!Z.call(e,s)||i&&("length"==s||ze(s,r))||n.push(s);return n}function Oe(e,t){for(var n=e.length;n--;)if(tt(e[n][0],t))return n;return-1}ke.prototype.clear=function(){this.__data__=he?he(null):{}},ke.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},ke.prototype.get=function(e){var t=this.__data__;if(he){var n=t[e];return n===r?undefined:n}return Z.call(t,e)?t[e]:undefined},ke.prototype.has=function(e){var t=this.__data__;return he?t[e]!==undefined:Z.call(t,e)},ke.prototype.set=function(e,t){return this.__data__[e]=he&&t===undefined?r:t,this},Se.prototype.clear=function(){this.__data__=[]},Se.prototype.delete=function(e){var t=this.__data__,n=Oe(t,e);return!(n<0)&&(n==t.length-1?t.pop():se.call(t,n,1),!0)},Se.prototype.get=function(e){var t=this.__data__,n=Oe(t,e);return n<0?undefined:t[n][1]},Se.prototype.has=function(e){return Oe(this.__data__,e)>-1},Se.prototype.set=function(e,t){var n=this.__data__,r=Oe(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},Te.prototype.clear=function(){this.__data__={hash:new ke,map:new(ce||Se),string:new ke}},Te.prototype.delete=function(e){return Ke(this,e).delete(e)},Te.prototype.get=function(e){return Ke(this,e).get(e)},Te.prototype.has=function(e){return Ke(this,e).has(e)},Te.prototype.set=function(e,t){return Ke(this,e).set(e,t),this},Ee.prototype.add=Ee.prototype.push=function(e){return this.__data__.set(e,r),this},Ee.prototype.has=function(e){return this.__data__.has(e)},Pe.prototype.clear=function(){this.__data__=new Se},Pe.prototype.delete=function(e){return this.__data__.delete(e)},Pe.prototype.get=function(e){return this.__data__.get(e)},Pe.prototype.has=function(e){return this.__data__.has(e)},Pe.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Se){var r=n.__data__;if(!ce||r.length<199)return r.push([e,t]),this;n=this.__data__=new Te(r)}return n.set(e,t),this};var Ce,xe,Me=(Ce=function(e,t){return e&&Ie(e,t,dt)},function(e,t){if(null==e)return e;if(!it(e))return Ce(e,t);for(var n=e.length,r=xe?n:-1,i=Object(e);(xe?r--:++r<n)&&!1!==t(i[r],r,i););return e});function je(e,t,n,r,i){var s=-1,o=e.length;for(n||(n=We),i||(i=[]);++s<o;){var a=e[s];t>0&&n(a)?t>1?je(a,t-1,n,r,i):F(i,a):r||(i[i.length]=a)}return i}var Ie=function(e){return function(t,n,r){for(var i=-1,s=Object(t),o=r(t),a=o.length;a--;){var u=o[e?a:++i];if(!1===n(s[u],u,s))break}return t}}();function Ne(e,t){for(var n=0,r=(t=Ve(t,e)?[t]:He(t)).length;null!=e&&n<r;)e=e[Xe(t[n++])];return n&&n==r?e:undefined}function Re(e,t){return null!=e&&t in Object(e)}function De(e,t,n,r,i){return e===t||(null==e||null==t||!at(e)&&!ut(t)?e!=e&&t!=t:function(e,t,n,r,i,l){var p=rt(e),b=rt(t),k=o,S=o;p||(k=(k=$e(e))==s?h:k);b||(S=(S=$e(t))==s?h:S);var T=k==h&&!H(e),E=S==h&&!H(t),P=k==S;if(P&&!T)return l||(l=new Pe),p||lt(e)?Ge(e,t,n,r,i,l):function(e,t,n,r,i,s,o){switch(n){case w:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case _:return!(e.byteLength!=t.byteLength||!r(new re(e),new re(t)));case a:case u:case f:return tt(+e,+t);case c:return e.name==t.name&&e.message==t.message;case g:case y:return e==t+"";case d:var l=G;case m:var h=2&s;if(l||(l=K),e.size!=t.size&&!h)return!1;var p=o.get(e);if(p)return p==t;s|=1,o.set(e,t);var b=Ge(l(e),l(t),r,i,s,o);return o.delete(e),b;case v:if(_e)return _e.call(e)==_e.call(t)}return!1}(e,t,k,n,r,i,l);if(!(2&i)){var A=T&&Z.call(e,"__wrapped__"),O=E&&Z.call(t,"__wrapped__");if(A||O){var C=A?e.value():e,x=O?t.value():t;return l||(l=new Pe),n(C,x,r,i,l)}}if(!P)return!1;return l||(l=new Pe),function(e,t,n,r,i,s){var o=2&i,a=dt(e),u=a.length,c=dt(t).length;if(u!=c&&!o)return!1;var l=u;for(;l--;){var d=a[l];if(!(o?d in t:Z.call(t,d)))return!1}var f=s.get(e);if(f&&s.get(t))return f==t;var h=!0;s.set(e,t),s.set(t,e);var p=o;for(;++l<u;){var g=e[d=a[l]],m=t[d];if(r)var y=o?r(m,g,d,t,e,s):r(g,m,d,e,t,s);if(!(y===undefined?g===m||n(g,m,r,i,s):y)){h=!1;break}p||(p="constructor"==d)}if(h&&!p){var v=e.constructor,b=t.constructor;v==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b||(h=!1)}return s.delete(e),s.delete(t),h}(e,t,n,r,i,l)}(e,t,De,n,r,i))}function Be(e){return!(!at(e)||function(e){return!!J&&J in e}(e))&&(st(e)||H(e)?te:A).test(Ze(e))}function Ue(e){return"function"==typeof e?e:null==e?ft:"object"==typeof e?rt(e)?function(e,t){if(Ve(e)&&Ye(t))return Qe(Xe(e),t);return function(n){var r=function(e,t,n){var r=null==e?undefined:Ne(e,t);return r===undefined?n:r}(n,e);return r===undefined&&r===t?function(e,t){return null!=e&&function(e,t,n){t=Ve(t,e)?[t]:He(t);var r,i=-1,s=t.length;for(;++i<s;){var o=Xe(t[i]);if(!(r=null!=e&&n(e,o)))break;e=e[o]}if(r)return r;return!!(s=e?e.length:0)&&ot(s)&&ze(o,s)&&(rt(e)||nt(e))}(e,t,Re)}(n,e):De(t,r,undefined,3)}}(e[0],e[1]):function(e){var t=function(e){var t=dt(e),n=t.length;for(;n--;){var r=t[n],i=e[r];t[n]=[r,i,Ye(i)]}return t}(e);if(1==t.length&&t[0][2])return Qe(t[0][0],t[0][1]);return function(n){return n===e||function(e,t,n,r){var i=n.length,s=i,o=!r;if(null==e)return!s;for(e=Object(e);i--;){var a=n[i];if(o&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<s;){var u=(a=n[i])[0],c=e[u],l=a[1];if(o&&a[2]){if(c===undefined&&!(u in e))return!1}else{var d=new Pe;if(r)var f=r(c,l,u,e,t,d);if(!(f===undefined?De(l,c,r,3,d):f))return!1}}return!0}(n,e,t)}}(e):Ve(t=e)?(n=Xe(t),function(e){return null==e?undefined:e[n]}):function(e){return function(t){return Ne(t,e)}}(t);var t,n}function Fe(e){if(n=(t=e)&&t.constructor,r="function"==typeof n&&n.prototype||Y,t!==r)return ae(e);var t,n,r,i=[];for(var s in Object(e))Z.call(e,s)&&"constructor"!=s&&i.push(s);return i}function Le(e,t){var n=-1,r=it(e)?Array(e.length):[];return Me(e,(function(e,i,s){r[++n]=t(e,i,s)})),r}function He(e){return rt(e)?e:Je(e)}function Ge(e,t,n,r,i,s){var o=2&i,a=e.length,u=t.length;if(a!=u&&!(o&&u>a))return!1;var c=s.get(e);if(c&&s.get(t))return c==t;var l=-1,d=!0,f=1&i?new Ee:undefined;for(s.set(e,t),s.set(t,e);++l<a;){var h=e[l],p=t[l];if(r)var g=o?r(p,h,l,t,e,s):r(h,p,l,e,t,s);if(g!==undefined){if(g)continue;d=!1;break}if(f){if(!L(t,(function(e,t){if(!f.has(t)&&(h===e||n(h,e,r,i,s)))return f.add(t)}))){d=!1;break}}else if(h!==p&&!n(h,p,r,i,s)){d=!1;break}}return s.delete(e),s.delete(t),d}function Ke(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function qe(e,t){var n=function(e,t){return null==e?undefined:e[t]}(e,t);return Be(n)?n:undefined}var $e=function(e){return ee.call(e)};function We(e){return rt(e)||nt(e)||!!(oe&&e&&e[oe])}function ze(e,t){return!!(t=null==t?i:t)&&("number"==typeof e||O.test(e))&&e>-1&&e%1==0&&e<t}function Ve(e,t){if(rt(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ct(e))||(S.test(e)||!k.test(e)||null!=t&&e in Object(t))}function Ye(e){return e==e&&!at(e)}function Qe(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==undefined||e in Object(n)))}}(ue&&$e(new ue(new ArrayBuffer(1)))!=w||ce&&$e(new ce)!=d||le&&$e(le.resolve())!=p||de&&$e(new de)!=m||fe&&$e(new fe)!=b)&&($e=function(e){var t=ee.call(e),n=t==h?e.constructor:undefined,r=n?Ze(n):undefined;if(r)switch(r){case pe:return w;case ge:return d;case me:return p;case ye:return m;case ve:return b}return t});var Je=et((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(ct(e))return we?we.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(t);var n=[];return T.test(e)&&n.push(""),e.replace(E,(function(e,t,r,i){n.push(r?i.replace(P,"$1"):t||e)})),n}));function Xe(e){if("string"==typeof e||ct(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Ze(e){if(null!=e){try{return X.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function et(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=e.apply(this,r);return n.cache=s.set(i,o),o};return n.cache=new(et.Cache||Te),n}function tt(e,t){return e===t||e!=e&&t!=t}function nt(e){return function(e){return ut(e)&&it(e)}(e)&&Z.call(e,"callee")&&(!ie.call(e,"callee")||ee.call(e)==s)}et.Cache=Te;var rt=Array.isArray;function it(e){return null!=e&&ot(e.length)&&!st(e)}function st(e){var t=at(e)?ee.call(e):"";return t==l||"[object GeneratorFunction]"==t}function ot(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}function at(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function ut(e){return!!e&&"object"==typeof e}function ct(e){return"symbol"==typeof e||ut(e)&&ee.call(e)==v}var lt=B?function(e){return function(t){return e(t)}}(B):function(e){return ut(e)&&ot(e.length)&&!!C[ee.call(e)]};function dt(e){return it(e)?Ae(e):Fe(e)}function ft(e){return e}t.exports=function(e,t){return je(function(e,t){return(rt(e)?U:Le)(e,Ue(t))}(e,t),1)}}}},{package:"lodash.flatmap",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/lodash.flatmap/index.js"}],[5996,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;function o(e){if(null===e||e===undefined)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}t.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,a,u=o(e),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]))i.call(n,l)&&(u[l]=n[l]);if(r){a=r(n);for(var d=0;d<a.length;d++)s.call(n,a[d])&&(u[a[d]]=n[a[d]])}}return u}}}},{package:"object-assign",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/object-assign/index.js"}],[2091,{"./support/isBuffer":2090,_process:6127,inherits:2089},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r=/%[sdj%]/g;n.format=function(e){if(!m(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(o(arguments[n]));return t.join(" ")}n=1;for(var i=arguments,s=i.length,a=String(e).replace(r,(function(e){if("%%"===e)return"%";if(n>=s)return e;switch(e){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(e){return"[Circular]"}default:return e}})),u=i[n];n<s;u=i[++n])p(u)||!b(u)?a+=" "+u:a+=" "+o(u);return a},n.deprecate=function(e,r){if(y(global.process))return function(){return n.deprecate(e,r).apply(this,arguments)};if(!0===t.noDeprecation)return e;var i=!1;return function(){if(!i){if(t.throwDeprecation)throw new Error(r);t.traceDeprecation?console.trace(r):console.error(r),i=!0}return e.apply(this,arguments)}};var i,s={};function o(e,t){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),h(t)?r.showHidden=t:t&&n._extend(r,t),y(r.showHidden)&&(r.showHidden=!1),y(r.depth)&&(r.depth=2),y(r.colors)&&(r.colors=!1),y(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=a),c(r,e,r.depth)}function a(e,t){var n=o.styles[t];return n?"["+o.colors[n][0]+"m"+e+"["+o.colors[n][1]+"m":e}function u(e,t){return e}function c(e,t,r){if(e.customInspect&&t&&k(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(r,e);return m(i)||(i=c(e,i,r)),i}var s=function(e,t){if(y(t))return e.stylize("undefined","undefined");if(m(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(g(t))return e.stylize(""+t,"number");if(h(t))return e.stylize(""+t,"boolean");if(p(t))return e.stylize("null","null")}(e,t);if(s)return s;var o=Object.keys(t),a=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),w(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return l(t);if(0===o.length){if(k(t)){var u=t.name?": "+t.name:"";return e.stylize("[Function"+u+"]","special")}if(v(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(_(t))return e.stylize(Date.prototype.toString.call(t),"date");if(w(t))return l(t)}var b,S="",T=!1,E=["{","}"];(f(t)&&(T=!0,E=["[","]"]),k(t))&&(S=" [Function"+(t.name?": "+t.name:"")+"]");return v(t)&&(S=" "+RegExp.prototype.toString.call(t)),_(t)&&(S=" "+Date.prototype.toUTCString.call(t)),w(t)&&(S=" "+l(t)),0!==o.length||T&&0!=t.length?r<0?v(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),b=T?function(e,t,n,r,i){for(var s=[],o=0,a=t.length;o<a;++o)A(t,String(o))?s.push(d(e,t,n,r,String(o),!0)):s.push("");return i.forEach((function(i){i.match(/^\d+$/)||s.push(d(e,t,n,r,i,!0))})),s}(e,t,r,a,o):o.map((function(n){return d(e,t,r,a,n,T)})),e.seen.pop(),function(e,t,n){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(b,S,E)):E[0]+S+E[1]}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,n,r,i,s){var o,a,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?a=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(a=e.stylize("[Setter]","special")),A(r,i)||(o="["+i+"]"),a||(e.seen.indexOf(u.value)<0?(a=p(n)?c(e,u.value,null):c(e,u.value,n-1)).indexOf("\n")>-1&&(a=s?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),y(o)){if(s&&i.match(/^\d+$/))return a;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+a}function f(e){return Array.isArray(e)}function h(e){return"boolean"==typeof e}function p(e){return null===e}function g(e){return"number"==typeof e}function m(e){return"string"==typeof e}function y(e){return void 0===e}function v(e){return b(e)&&"[object RegExp]"===S(e)}function b(e){return"object"==typeof e&&null!==e}function _(e){return b(e)&&"[object Date]"===S(e)}function w(e){return b(e)&&("[object Error]"===S(e)||e instanceof Error)}function k(e){return"function"==typeof e}function S(e){return Object.prototype.toString.call(e)}function T(e){return e<10?"0"+e.toString(10):e.toString(10)}n.debuglog=function(e){if(y(i)&&(i=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!s[e])if(new RegExp("\\b"+e+"\\b","i").test(i)){var r=t.pid;s[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,r,t)}}else s[e]=function(){};return s[e]},n.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=f,n.isBoolean=h,n.isNull=p,n.isNullOrUndefined=function(e){return null==e},n.isNumber=g,n.isString=m,n.isSymbol=function(e){return"symbol"==typeof e},n.isUndefined=y,n.isRegExp=v,n.isObject=b,n.isDate=_,n.isError=w,n.isFunction=k,n.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},n.isBuffer=e("./support/isBuffer");var E=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function P(){var e=new Date,t=[T(e.getHours()),T(e.getMinutes()),T(e.getSeconds())].join(":");return[e.getDate(),E[e.getMonth()],t].join(" ")}function A(e,t){return Object.prototype.hasOwnProperty.call(e,t)}n.log=function(){console.log("%s - %s",P(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!b(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this)}).call(this,e("_process"))}}},{package:"util",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/assert/node_modules/util/util.js"}],[3175,{"./lib/index.js":3176},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=e("./lib/index.js")}}},{package:"ethereumjs-abi",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/ethereumjs-abi/index.js"}]],[],{});