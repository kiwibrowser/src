LavaPack.loadBundle([[2507,{assert:1714,coinstring:2152,crypto:2218,"safe-buffer":5800,secp256k1:2508},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("assert"),i=e("safe-buffer").Buffer,s=e("crypto"),o=e("coinstring"),a=e("secp256k1"),u=i.from("Bitcoin seed","utf8"),c=2147483648,l={private:76066276,public:76067358};function f(e){this.versions=e||l,this.depth=0,this.index=0,this._privateKey=null,this._publicKey=null,this.chainCode=null,this._fingerprint=0,this.parentFingerprint=0}function h(e,t,r){var n=i.allocUnsafe(78);n.writeUInt32BE(t,0),n.writeUInt8(e.depth,4);var s=e.depth?e.parentFingerprint:0;return n.writeUInt32BE(s,5),n.writeUInt32BE(e.index,9),e.chainCode.copy(n,13),r.copy(n,45),n}function d(e){var t=s.createHash("sha256").update(e).digest();return s.createHash("rmd160").update(t).digest()}Object.defineProperty(f.prototype,"fingerprint",{get:function(){return this._fingerprint}}),Object.defineProperty(f.prototype,"identifier",{get:function(){return this._identifier}}),Object.defineProperty(f.prototype,"pubKeyHash",{get:function(){return this.identifier}}),Object.defineProperty(f.prototype,"privateKey",{get:function(){return this._privateKey},set:function(e){n.equal(e.length,32,"Private key must be 32 bytes."),n(!0===a.privateKeyVerify(e),"Invalid private key"),this._privateKey=e,this._publicKey=a.publicKeyCreate(e,!0),this._identifier=d(this.publicKey),this._fingerprint=this._identifier.slice(0,4).readUInt32BE(0)}}),Object.defineProperty(f.prototype,"publicKey",{get:function(){return this._publicKey},set:function(e){n(33===e.length||65===e.length,"Public key must be 33 or 65 bytes."),n(!0===a.publicKeyVerify(e),"Invalid public key"),this._publicKey=a.publicKeyConvert(e,!0),this._identifier=d(this.publicKey),this._fingerprint=this._identifier.slice(0,4).readUInt32BE(0),this._privateKey=null}}),Object.defineProperty(f.prototype,"privateExtendedKey",{get:function(){return this._privateKey?o.encode(h(this,this.versions.private,i.concat([i.alloc(1,0),this.privateKey]))):null}}),Object.defineProperty(f.prototype,"publicExtendedKey",{get:function(){return o.encode(h(this,this.versions.public,this.publicKey))}}),f.prototype.derive=function(e){if("m"===e||"M"===e||"m'"===e||"M'"===e)return this;var t=e.split("/"),r=this;return t.forEach((function(e,t){if(0!==t){var i=e.length>1&&"'"===e[e.length-1],s=parseInt(e,10);n(s<c,"Invalid index"),i&&(s+=c),r=r.deriveChild(s)}else n(e,"m","Invalid path")})),r},f.prototype.deriveChild=function(e){var t,r=e>=c,o=i.allocUnsafe(4);if(o.writeUInt32BE(e,0),r){n(this.privateKey,"Could not derive hardened child key");var u=this.privateKey,l=i.alloc(1,0);u=i.concat([l,u]),t=i.concat([u,o])}else t=i.concat([this.publicKey,o]);var h=s.createHmac("sha512",this.chainCode).update(t).digest(),d=h.slice(0,32),p=h.slice(32),m=new f(this.versions);if(this.privateKey)try{m.privateKey=a.privateKeyTweakAdd(this.privateKey,d)}catch(t){return this.derive(e+1)}else try{m.publicKey=a.publicKeyTweakAdd(this.publicKey,d,!0)}catch(t){return this.derive(e+1,r)}return m.chainCode=p,m.depth=this.depth+1,m.parentFingerprint=this.fingerprint,m.index=e,m},f.prototype.sign=function(e){return a.sign(e,this.privateKey).signature},f.prototype.verify=function(e,t){return a.verify(e,t,this.publicKey)},f.prototype.toJSON=function(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}},f.fromMasterSeed=function(e,t){var r=s.createHmac("sha512",u).update(e).digest(),n=r.slice(0,32),i=r.slice(32),o=new f(t);return o.chainCode=i,o.privateKey=n,o},f.fromExtendedKey=function(e,t){var r=new f(t=t||l),i=o.decode(e),s=i.readUInt32BE(0);n(s===t.private||s===t.public,"Version mismatch: does not match private or public"),r.depth=i.readUInt8(4),r.parentFingerprint=i.readUInt32BE(5),r.index=i.readUInt32BE(9),r.chainCode=i.slice(13,45);var a=i.slice(45);return 0===a.readUInt8(0)?(n(s===t.private,"Version mismatch: version does not match private"),r.privateKey=a.slice(1)):(n(s===t.public,"Version mismatch: version does not match public"),r.publicKey=a),r},f.fromJSON=function(e){return f.fromExtendedKey(e.xpriv)},f.HARDENED_OFFSET=c,t.exports=f}}},{package:"hdkey",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/eth-trezor-keyring/node_modules/hdkey/lib/hdkey.js"}],[6020,{"./constants":6010,"./env/node":6016,"./types":6031,"@babel/runtime/helpers/defineProperty":194,"@babel/runtime/helpers/interopRequireDefault":200},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("@babel/runtime/helpers/interopRequireDefault");r.__esModule=!0;var i={};r.default=void 0;var s=n(e("@babel/runtime/helpers/defineProperty")),o=e("./constants");Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in r&&r[e]===o[e]||(r[e]=o[e]))}));var a=e("./env/node"),u=e("./types");function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,s.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in r&&r[e]===u[e]||(r[e]=u[e]))}));var f={manifest:a.manifest,init:a.init,getSettings:a.getSettings,on:function(e,t){a.eventEmitter.on(e,t)},off:function(e,t){a.eventEmitter.removeListener(e,t)},removeAllListeners:function(){a.eventEmitter.removeAllListeners()},uiResponse:a.uiResponse,blockchainGetAccountBalanceHistory:function(e){return(0,a.call)(l({method:"blockchainGetAccountBalanceHistory"},e))},blockchainGetCurrentFiatRates:function(e){return(0,a.call)(l({method:"blockchainGetCurrentFiatRates"},e))},blockchainGetFiatRatesForTimestamps:function(e){return(0,a.call)(l({method:"blockchainGetFiatRatesForTimestamps"},e))},blockchainDisconnect:function(e){return(0,a.call)(l({method:"blockchainDisconnect"},e))},blockchainEstimateFee:function(e){return(0,a.call)(l({method:"blockchainEstimateFee"},e))},blockchainGetTransactions:function(e){return(0,a.call)(l({method:"blockchainGetTransactions"},e))},blockchainSetCustomBackend:function(e){return(0,a.call)(l({method:"blockchainSetCustomBackend"},e))},blockchainSubscribe:function(e){return(0,a.call)(l({method:"blockchainSubscribe"},e))},blockchainSubscribeFiatRates:function(e){return(0,a.call)(l({method:"blockchainSubscribeFiatRates"},e))},blockchainUnsubscribe:function(e){return(0,a.call)(l({method:"blockchainUnsubscribe"},e))},blockchainUnsubscribeFiatRates:function(e){return(0,a.call)(l({method:"blockchainUnsubscribeFiatRates"},e))},customMessage:function(e){return(0,a.customMessage)(e)},requestLogin:function(e){return(0,a.requestLogin)(e)},cardanoGetAddress:function(e){var t=a.eventEmitter.listenerCount(o.UI.ADDRESS_VALIDATION)>0;return(0,a.call)(l(l({method:"cardanoGetAddress"},e),{},{useEventListener:t}))},cardanoGetNativeScriptHash:function(e){return(0,a.call)(l({method:"cardanoGetNativeScriptHash"},e))},cardanoGetPublicKey:function(e){return(0,a.call)(l({method:"cardanoGetPublicKey"},e))},cardanoSignTransaction:function(e){return(0,a.call)(l({method:"cardanoSignTransaction"},e))},cipherKeyValue:function(e){return(0,a.call)(l({method:"cipherKeyValue"},e))},composeTransaction:function(e){return(0,a.call)(l({method:"composeTransaction"},e))},ethereumGetAddress:function(e){var t=a.eventEmitter.listenerCount(o.UI.ADDRESS_VALIDATION)>0;return(0,a.call)(l(l({method:"ethereumGetAddress"},e),{},{useEventListener:t}))},ethereumGetPublicKey:function(e){return(0,a.call)(l({method:"ethereumGetPublicKey"},e))},ethereumSignMessage:function(e){return(0,a.call)(l({method:"ethereumSignMessage"},e))},ethereumSignTransaction:function(e){return(0,a.call)(l({method:"ethereumSignTransaction"},e))},ethereumSignTypedData:function(e){return(0,a.call)(l({method:"ethereumSignTypedData"},e))},ethereumVerifyMessage:function(e){return(0,a.call)(l({method:"ethereumVerifyMessage"},e))},getAccountInfo:function(e){return(0,a.call)(l({method:"getAccountInfo"},e))},getAddress:function(e){var t=a.eventEmitter.listenerCount(o.UI.ADDRESS_VALIDATION)>0;return(0,a.call)(l(l({method:"getAddress"},e),{},{useEventListener:t}))},getDeviceState:function(e){return(0,a.call)(l({method:"getDeviceState"},e))},getFeatures:function(e){return(0,a.call)(l({method:"getFeatures"},e))},getPublicKey:function(e){return(0,a.call)(l({method:"getPublicKey"},e))},liskGetAddress:function(){return(0,a.call)({method:"liskDeprecated"})},liskGetPublicKey:function(){return(0,a.call)({method:"liskDeprecated"})},liskSignMessage:function(){return(0,a.call)({method:"liskDeprecated"})},liskSignTransaction:function(){return(0,a.call)({method:"liskDeprecated"})},liskVerifyMessage:function(){return(0,a.call)({method:"liskDeprecated"})},nemGetAddress:function(e){var t=a.eventEmitter.listenerCount(o.UI.ADDRESS_VALIDATION)>0;return(0,a.call)(l(l({method:"nemGetAddress"},e),{},{useEventListener:t}))},nemSignTransaction:function(e){return(0,a.call)(l({method:"nemSignTransaction"},e))},pushTransaction:function(e){return(0,a.call)(l({method:"pushTransaction"},e))},rippleGetAddress:function(e){var t=a.eventEmitter.listenerCount(o.UI.ADDRESS_VALIDATION)>0;return(0,a.call)(l(l({method:"rippleGetAddress"},e),{},{useEventListener:t}))},rippleSignTransaction:function(e){return(0,a.call)(l({method:"rippleSignTransaction"},e))},signMessage:function(e){return(0,a.call)(l({method:"signMessage"},e))},signTransaction:function(e){return(0,a.call)(l({method:"signTransaction"},e))},stellarGetAddress:function(e){var t=a.eventEmitter.listenerCount(o.UI.ADDRESS_VALIDATION)>0;return(0,a.call)(l(l({method:"stellarGetAddress"},e),{},{useEventListener:t}))},stellarSignTransaction:function(e){return(0,a.call)(l({method:"stellarSignTransaction"},e))},tezosGetAddress:function(e){var t=a.eventEmitter.listenerCount(o.UI.ADDRESS_VALIDATION)>0;return(0,a.call)(l(l({method:"tezosGetAddress"},e),{},{useEventListener:t}))},tezosGetPublicKey:function(e){return(0,a.call)(l({method:"tezosGetPublicKey"},e))},tezosSignTransaction:function(e){return(0,a.call)(l({method:"tezosSignTransaction"},e))},eosGetPublicKey:function(e){return(0,a.call)(l({method:"eosGetPublicKey"},e))},eosSignTransaction:function(e){return(0,a.call)(l({method:"eosSignTransaction"},e))},binanceGetAddress:function(e){var t=a.eventEmitter.listenerCount(o.UI.ADDRESS_VALIDATION)>0;return(0,a.call)(l(l({method:"binanceGetAddress"},e),{},{useEventListener:t}))},binanceGetPublicKey:function(e){return(0,a.call)(l({method:"binanceGetPublicKey"},e))},binanceSignTransaction:function(e){return(0,a.call)(l({method:"binanceSignTransaction"},e))},verifyMessage:function(e){return(0,a.call)(l({method:"verifyMessage"},e))},resetDevice:function(e){return(0,a.call)(l({method:"resetDevice"},e))},wipeDevice:function(e){return(0,a.call)(l({method:"wipeDevice"},e))},applyFlags:function(e){return(0,a.call)(l({method:"applyFlags"},e))},applySettings:function(e){return(0,a.call)(l({method:"applySettings"},e))},backupDevice:function(e){return(0,a.call)(l({method:"backupDevice"},e))},changePin:function(e){return(0,a.call)(l({method:"changePin"},e))},firmwareUpdate:function(e){return(0,a.call)(l({method:"firmwareUpdate"},e))},recoveryDevice:function(e){return(0,a.call)(l({method:"recoveryDevice"},e))},getCoinInfo:function(e){return(0,a.call)(l({method:"getCoinInfo"},e))},rebootToBootloader:function(e){return(0,a.call)(l({method:"rebootToBootloader"},e))},dispose:a.dispose,cancel:a.cancel,renderWebUSBButton:a.renderWebUSBButton,disableWebUSB:a.disableWebUSB};r.default=f}}},{package:"trezor-connect",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/trezor-connect/lib/index.js"}],[6023,{"@babel/runtime/helpers/defineProperty":194,"@babel/runtime/helpers/interopRequireDefault":200,"@metamask/eth-sig-util":1116},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("@babel/runtime/helpers/interopRequireDefault")(e("@babel/runtime/helpers/defineProperty"));function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var s=e("@metamask/eth-sig-util");function o(e){switch(Object.prototype.toString.call(e)){case"[object Object]":var t=Object.keys(e).map((function(t){return[t,o(e[t])]}));return Object.fromEntries(t);case"[object Array]":return e.map((function(e){return o(e)}));case"[object BigInt]":return e.toString();default:return e}}t.exports=function(e,t){if(!t)throw new Error("Trezor: Only version 4 of typed data signing is supported");var r=s.SignTypedDataVersion.V4,a=s.TypedDataUtils.sanitizeData(e),u=a.types,c=a.primaryType,l=a.domain,f=a.message;return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){(0,n.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({domain_separator_hash:s.TypedDataUtils.hashStruct("EIP712Domain",o(l),u,r).toString("hex"),message_hash:s.TypedDataUtils.hashStruct(c,o(f),u,r).toString("hex")},e)}}}},{package:"trezor-connect",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/trezor-connect/lib/plugins/ethereum/typedData.js"}],[578,{"@ethereumjs/tx":410,"@keystonehq/base-eth-keyring":547,"@keystonehq/bc-ur-registry-eth":582,"@metamask/obs-store":587,buffer:2105,events:2106,rlp:5798,uuid:6074},function(){with(this)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0});var n,i=e("@keystonehq/base-eth-keyring"),s=e("events"),o=e("@metamask/obs-store"),a=e("@keystonehq/bc-ur-registry-eth"),u=e("uuid"),c=e("@ethereumjs/tx"),l=(n=e("rlp"))&&"object"==typeof n&&"default"in n?n.default:n;class f extends s.EventEmitter{constructor(){if(super(),this.readCryptoHDKeyOrCryptoAccount=()=>new Promise(((e,r)=>{this.memStore.updateState({sync:{reading:!0}}),this.on("keystone-sync_success-hdkey",(r=>{const n=a.CryptoHDKey.fromCBOR(t.from(r,"hex"));this.resetState(),e(n)})),this.on("keystone-sync_success-account",(r=>{const n=a.CryptoAccount.fromCBOR(t.from(r,"hex"));this.resetState(),e(n)})),this.on("keystone-sync_cancel",(()=>{this.resetState(),r(new Error("KeystoneError#sync_cancel. Sync process canceled, please retry"))}))})),this.submitCryptoHDKey=e=>{this.emit("keystone-sync_success-hdkey",e)},this.submitCryptoAccount=e=>{this.emit("keystone-sync_success-account",e)},this.cancelSync=()=>{this.emit("keystone-sync_cancel")},this.requestSignature=(e,r,n)=>new Promise(((i,s)=>{const o=e.toUR(),c=e.getRequestId(),l=u.stringify(c),f={requestId:l,payload:{type:o.type,cbor:o.cbor.toString("hex")},title:r,description:n};this.memStore.updateState({sign:{request:f}}),this.once(`${l}-signed`,(e=>{const r=a.ETHSignature.fromCBOR(t.from(e,"hex"));this.resetState(),i(r)})),this.once(`${l}-canceled`,(()=>{this.resetState(),s(new Error("KeystoneError#Tx_canceled. Signing canceled, please retry"))}))})),this.submitSignature=(e,t)=>{this.emit(`${e}-signed`,t)},this.cancelRequestSignature=()=>{const e=this.memStore.getState().sign.request;if(e){const{requestId:t}=e;this.memStore.updateState({sign:{}}),this.emit(`${t}-canceled`)}},this.resetState=()=>{this.memStore.updateState({sync:{reading:!1},sign:{}})},f.instance)return f.instance;this.memStore=new o.ObservableStore({sync:{reading:!1},sign:{},_version:1}),f.instance=this}}class h extends i.BaseKeyring{constructor(e){if(super(e),this.getInteraction=()=>new f,this.getMemStore=()=>this.getInteraction().memStore,this.removeAccount=e=>{if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()))},this.forgetDevice=()=>{this.page=0,this.perPage=5,this.accounts=[],this.currentAccount=0,this.name="QR Hardware",this.initialized=!1,this.xfp="",this.xpub="",this.hdPath="",this.indexes={},this.hdk=undefined,this.paths={}},this.submitCryptoHDKey=this.getInteraction().submitCryptoHDKey,this.submitCryptoAccount=this.getInteraction().submitCryptoAccount,this.submitSignature=this.getInteraction().submitSignature,this.cancelSync=this.getInteraction().cancelSync,this.cancelSignRequest=this.getInteraction().cancelRequestSignature,h.instance)return h.instance.deserialize(e),h.instance;h.instance=this}async signTransaction(e,t){const r=0===t.type?a.DataType.transaction:a.DataType.typedTransaction;let n;n=0===t.type?l.encode(t.getMessageToSign(!1)):t.getMessageToSign(!1);const i=await this._pathFromAddress(e),s=t.common.chainId(),o=u.v4(),f=a.EthSignRequest.constructETHRequest(n,r,i,this.xfp,o,s),{r:h,s:d,v:p}=await this.requestSignature(o,f,"Scan with your Keystone",'After your Keystone has signed the transaction, click on "Scan Keystone" to receive the signature'),m=t.toJSON();m.v=p,m.s=d,m.r=h,m.type=t.type;return c.TransactionFactory.fromTxData(m,{common:t.common})}}h.type=i.BaseKeyring.type,r.MetaMaskKeyring=h}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@keystonehq/metamask-airgapped-keyring/dist/metamask-airgapped-keyring.cjs.development.js"}],[579,{"@ethereumjs/tx":410,"@keystonehq/base-eth-keyring":547,"@keystonehq/bc-ur-registry-eth":582,"@metamask/obs-store":587,buffer:2105,events:2106,rlp:5798,uuid:6074},function(){with(this)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0});var n,i=e("@keystonehq/base-eth-keyring"),s=e("events"),o=e("@metamask/obs-store"),a=e("@keystonehq/bc-ur-registry-eth"),u=e("uuid"),c=e("@ethereumjs/tx"),l=(n=e("rlp"))&&"object"==typeof n&&"default"in n?n.default:n;class f extends s.EventEmitter{constructor(){if(super(),this.readCryptoHDKeyOrCryptoAccount=()=>new Promise(((e,r)=>{this.memStore.updateState({sync:{reading:!0}}),this.on("keystone-sync_success-hdkey",(r=>{const n=a.CryptoHDKey.fromCBOR(t.from(r,"hex"));this.resetState(),e(n)})),this.on("keystone-sync_success-account",(r=>{const n=a.CryptoAccount.fromCBOR(t.from(r,"hex"));this.resetState(),e(n)})),this.on("keystone-sync_cancel",(()=>{this.resetState(),r(new Error("KeystoneError#sync_cancel. Sync process canceled, please retry"))}))})),this.submitCryptoHDKey=e=>{this.emit("keystone-sync_success-hdkey",e)},this.submitCryptoAccount=e=>{this.emit("keystone-sync_success-account",e)},this.cancelSync=()=>{this.emit("keystone-sync_cancel")},this.requestSignature=(e,r,n)=>new Promise(((i,s)=>{const o=e.toUR(),c=e.getRequestId(),l=u.stringify(c),f={requestId:l,payload:{type:o.type,cbor:o.cbor.toString("hex")},title:r,description:n};this.memStore.updateState({sign:{request:f}}),this.once(l+"-signed",(e=>{const r=a.ETHSignature.fromCBOR(t.from(e,"hex"));this.resetState(),i(r)})),this.once(l+"-canceled",(()=>{this.resetState(),s(new Error("KeystoneError#Tx_canceled. Signing canceled, please retry"))}))})),this.submitSignature=(e,t)=>{this.emit(e+"-signed",t)},this.cancelRequestSignature=()=>{const e=this.memStore.getState().sign.request;if(e){const{requestId:t}=e;this.memStore.updateState({sign:{}}),this.emit(t+"-canceled")}},this.resetState=()=>{this.memStore.updateState({sync:{reading:!1},sign:{}})},f.instance)return f.instance;this.memStore=new o.ObservableStore({sync:{reading:!1},sign:{},_version:1}),f.instance=this}}class h extends i.BaseKeyring{constructor(e){if(super(e),this.getInteraction=()=>new f,this.getMemStore=()=>this.getInteraction().memStore,this.removeAccount=e=>{if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()))},this.forgetDevice=()=>{this.page=0,this.perPage=5,this.accounts=[],this.currentAccount=0,this.name="QR Hardware",this.initialized=!1,this.xfp="",this.xpub="",this.hdPath="",this.indexes={},this.hdk=void 0,this.paths={}},this.submitCryptoHDKey=this.getInteraction().submitCryptoHDKey,this.submitCryptoAccount=this.getInteraction().submitCryptoAccount,this.submitSignature=this.getInteraction().submitSignature,this.cancelSync=this.getInteraction().cancelSync,this.cancelSignRequest=this.getInteraction().cancelRequestSignature,h.instance)return h.instance.deserialize(e),h.instance;h.instance=this}async signTransaction(e,t){const r=0===t.type?a.DataType.transaction:a.DataType.typedTransaction;let n;n=0===t.type?l.encode(t.getMessageToSign(!1)):t.getMessageToSign(!1);const i=await this._pathFromAddress(e),s=t.common.chainId(),o=u.v4(),f=a.EthSignRequest.constructETHRequest(n,r,i,this.xfp,o,s),{r:h,s:d,v:p}=await this.requestSignature(o,f,"Scan with your Keystone",'After your Keystone has signed the transaction, click on "Scan Keystone" to receive the signature'),m=t.toJSON();return m.v=p,m.s=d,m.r=h,m.type=t.type,c.TransactionFactory.fromTxData(m,{common:t.common})}}h.type=i.BaseKeyring.type,r.MetaMaskKeyring=h}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@keystonehq/metamask-airgapped-keyring/dist/metamask-airgapped-keyring.cjs.production.min.js"}],[161,{},function(){with(this)return function(){"use strict";return function(e,t,r){function n(e){return new Promise((t=>setTimeout(t,e)))}async function i(e){const t=await window.fetch(`http://localhost:8889?key=${e}`),r=await t.text();return r.length?JSON.parse(r):null}t.exports=class{static openBox(e){return this.address=e,Promise.resolve({onSyncDone:e=>{setTimeout(e,200)},openSpace:async(e,t)=>{const{onSyncDone:r}=t;return this.spaceName=e,setTimeout(r,150),await n(50),{private:{get:async e=>{await n(50);return await i(`${this.address}-${this.spaceName}-${e}`)},set:async(e,t)=>(await async function(e,t){return(await window.fetch("http://localhost:8889",{method:"POST",body:JSON.stringify({key:e,data:t})})).text()}(`${this.address}-${this.spaceName}-${e}`,t),await n(50),null)}}},logout:()=>undefined})}static async getConfig(e){return await i(`${e}-metamask-metamaskBackup`)?{spaces:{metamask:{}}}:{}}}}}},{package:"<root>",file:"/Users/mac/code/a-mises/metamask-extension/development/mock-3box.js"}],[20,{"./middleware/pending":22,"eth-json-rpc-middleware":2433,"json-rpc-engine":4772},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function({version:e,getAccounts:t,processTransaction:r,processEthSignMessage:o,processTypedMessage:a,processTypedMessageV3:u,processTypedMessageV4:c,processPersonalMessage:l,processDecryptMessage:f,processEncryptionPublicKey:h,getPendingNonce:d,getPendingTransactionByHash:p}){return(0,n.mergeMiddleware)([(0,n.createScaffoldMiddleware)({eth_syncing:!1,web3_clientVersion:`MetaMask/v${e}`}),(0,i.createWalletMiddleware)({getAccounts:t,processTransaction:r,processEthSignMessage:o,processTypedMessage:a,processTypedMessageV3:u,processTypedMessageV4:c,processPersonalMessage:l,processDecryptMessage:f,processEncryptionPublicKey:h}),(0,s.createPendingNonceMiddleware)({getPendingNonce:d}),(0,s.createPendingTxMiddleware)({getPendingTransactionByHash:p})])};var n=e("json-rpc-engine"),i=e("eth-json-rpc-middleware"),s=e("./middleware/pending")}}},{package:"<root>",file:"/Users/mac/code/a-mises/metamask-extension/app/scripts/controllers/network/createMetamaskMiddleware.js"}],[167,{"./3id":168,"./api":170,"./config.js":171,"./privateStore":173,"./publicStore":174,"./space":175,"./utils/id":177,"./utils/index":178,"./verified":180,"3box-orbitdb-plugins":162,"@babel/runtime/helpers/asyncToGenerator":190,"@babel/runtime/helpers/classCallCheck":191,"@babel/runtime/helpers/createClass":193,"@babel/runtime/helpers/defineProperty":194,"@babel/runtime/helpers/interopRequireDefault":200,"@babel/runtime/helpers/slicedToArray":213,"@babel/runtime/regenerator":220,ipfs:4683,"orbit-db":5406,"orbit-db-access-controllers":5357,"orbit-db-pubsub":5399,store:5926},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/slicedToArray")),s=n(e("@babel/runtime/regenerator")),o=n(e("@babel/runtime/helpers/defineProperty")),a=n(e("@babel/runtime/helpers/asyncToGenerator")),u=n(e("@babel/runtime/helpers/classCallCheck")),c=n(e("@babel/runtime/helpers/createClass"));function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(r,!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h=e("store"),d=e("ipfs"),p=e("orbit-db"),m=e("orbit-db-pubsub"),y=e("orbit-db-access-controllers"),g=e("3box-orbitdb-plugins"),v=g.LegacyIPFS3BoxAccessController,b=g.ThreadAccessController,_=g.ModeratorAccessController;y.addAccessController({AccessController:v}),y.addAccessController({AccessController:b}),y.addAccessController({AccessController:_});var w,E,k=e("./3id"),A=e("./publicStore"),S=e("./privateStore"),x=e("./verified"),I=e("./space"),T=e("./utils/index"),P=e("./utils/id"),N=e("./config.js"),C=e("./api"),R="ethereum-eoa",O=N.address_server_url,M=N.pinning_node,D=N.pinning_room,L=N.ipfs_options,B=N.orbitdb_options,U=function(){function e(t,r,n){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};(0,u.default)(this,e),this._3id=t,this._web3provider=r,this._ipfs=n,this._serverUrl=i.addressServer||O,this._onSyncDoneCB=function(){},this._boxSynced=!1,this.public=null,this.private=null,this.verified=new x(this),this.spaces={},this.spacesPubSubMessages={}}var t,r,n,o,l,d,y,g,v,b,_,N,L,U,K,F,V,H,G,q,z,W,Y,Z,J,$,X,Q,ee,te;return(0,c.default)(e,[{key:"_load",value:(te=(0,a.default)(s.default.mark((function e(){var t,r,n,o,u,c,l,h,d,y,g,v,b,_,w=this,k=arguments;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.length>0&&k[0]!==undefined?k[0]:{},r=this._3id.muportFingerprint+".root",this.pinningNode=t.pinningNode||M,this._ipfs.swarm.connect(this.pinningNode,(function(){})),e.t0=p,e.t1=this._ipfs,e.t2=t.orbitPath,e.next=9,this._3id.getOdbId();case 9:return e.t3=e.sent,e.t4={directory:e.t2,identity:e.t3},e.next=13,e.t0.createInstance.call(e.t0,e.t1,e.t4);case 13:return this._orbitdb=e.sent,E=this._orbitdb,n=this._3id.getKeyringBySpaceName(r).getPublicKeys(!0).signingKey,e.next=18,this._orbitdb.feed(r,f({},B,{format:"dag-pb",accessController:{write:[n],type:"legacy-ipfs-3box",skipManifest:!0}}));case 18:return this._rootStore=e.sent,o=this._rootStore.address.toString(),e.t5=m,e.t6=this._ipfs,e.next=24,this._ipfs.id();case 24:return e.t7=e.sent.id,this._pubsub=new e.t5(e.t6,e.t7),u=function(){var e=(0,a.default)(s.default.mark((function e(t,r){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r===w.pinningNode.split("/").pop()&&w._pubsub.publish(D,{type:"PIN_DB",odbAddress:o,did:w.DID});case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),this.public=new A(this._orbitdb,this._3id.muportFingerprint+".public",this._linkProfile.bind(this),this._ensurePinningNodeConnected.bind(this),this._3id),this.private=new S(this._orbitdb,this._3id.muportFingerprint+".private",this._ensurePinningNodeConnected.bind(this),this._3id),e.next=31,Promise.all([this.public._load(),this.private._load()]);case 31:return c=e.sent,l=(0,i.default)(c,2),h=l[0],d=l[1],y=[],g={},v=!0,b=!1,_=function(){var e=(0,a.default)(s.default.mark((function e(t,r){var n;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b||(b=!0,setTimeout((function(){v=!1}),3e3)),"HAS_ENTRIES"!==r.type){e.next=12;break}if(r.odbAddress!==d||g[d]||(y.push(w.private._sync(r.numEntries)),g[d]=!0),r.odbAddress!==h||g[h]||(y.push(w.public._sync(r.numEntries)),g[h]=!0),v&&!0===r.odbAddress.includes("space")&&(w.spacesPubSubMessages[r.odbAddress]=r),2!==y.length){e.next=12;break}return n=y,y=[],e.next=10,Promise.all(n);case 10:w._boxSynced=!0,w._onSyncDoneCB();case 12:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),this._pubsub.subscribe(D,_,u),e.next=43,this._createRootStore(o,d,h,this.pinningNode);case 43:case"end":return e.stop()}}),e,this)}))),function(){return te.apply(this,arguments)})},{key:"_createRootStore",value:(ee=(0,a.default)(s.default.mark((function e(t,r,n){var i,o,u=this;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rootStore.load();case 2:return e.next=4,this._rootStore.iterator({limit:-1}).collect();case 4:if((i=e.sent).find((function(e){return e.payload.value.odbAddress===n}))){e.next=8;break}return e.next=8,this._rootStore.add({odbAddress:n});case 8:if(i.find((function(e){return e.payload.value.odbAddress===r}))){e.next=11;break}return e.next=11,this._rootStore.add({odbAddress:r});case 11:this._publishRootStore(t),o=function(){var e=(0,a.default)(s.default.mark((function e(){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.filter((function(e){return"address-link"===e.payload.value.type})).map((function(e){u._ipfs.dag.get(e.payload.value.data)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o();case 14:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return ee.apply(this,arguments)})},{key:"openSpace",value:(Q=(0,a.default)(s.default.mark((function e(t){var r,n=arguments;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.length>1&&n[1]!==undefined?n[1]:{},this.spaces[t]){e.next=23;break}return this.spaces[t]=new I(t,this._3id,this._orbitdb,this._rootStore,this._ensurePinningNodeConnected.bind(this)),e.prev=3,r=Object.assign({numEntriesMessages:this.spacesPubSubMessages},r),e.next=7,this.spaces[t].open(r);case 7:return e.next=9,this.isAddressLinked();case 9:if(e.sent){e.next=11;break}this.linkAddress();case 11:e.next=21;break;case 13:if(e.prev=13,e.t0=e.catch(3),delete this.spaces[t],!e.t0.message.includes("User denied message signature.")){e.next=20;break}throw new Error("User denied space consent.");case 20:throw new Error("An error occured while opening space: ",e.t0.message);case 21:e.next=24;break;case 23:r.onSyncDone&&r.onSyncDone();case 24:return e.abrupt("return",this.spaces[t]);case 25:case"end":return e.stop()}}),e,this,[[3,13]])}))),function(e){return Q.apply(this,arguments)})},{key:"onSyncDone",value:function(e){this._onSyncDoneCB=e,this._boxSynced&&this._onSyncDoneCB()}},{key:"_publishRootStore",value:(X=(0,a.default)(s.default.mark((function e(t){var r;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._3id.signJWT({rootStoreAddress:t});case 2:return r=e.sent,e.prev=3,e.next=6,T.fetchJson(this._serverUrl+"/odbAddress",{address_token:r});case 6:e.next=12;break;case 8:if(e.prev=8,e.t0=e.catch(3),e.t0.statusCode){e.next=12;break}throw new Error(e.t0);case 12:return e.abrupt("return",!0);case 13:case"end":return e.stop()}}),e,this,[[3,8]])}))),function(e){return X.apply(this,arguments)})},{key:"linkAddress",value:($=(0,a.default)(s.default.mark((function e(){var t,r=arguments;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=r.length>0&&r[0]!==undefined?r[0]:{}).proof){e.next=5;break}return e.next=4,this._writeAddressLink(t.proof);case 4:return e.abrupt("return");case 5:if(t.type&&t.type!==R){e.next=8;break}return e.next=8,this._linkProfile();case 8:case"end":return e.stop()}}),e,this)}))),function(){return $.apply(this,arguments)})},{key:"linkAccount",value:(J=(0,a.default)(s.default.mark((function e(){var t,r=arguments;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&r[0]!==undefined?r[0]:R,console.warn("linkAccount: deprecated, please use linkAddress going forward"),e.next=4,this.linkAddress(t);case 4:case"end":return e.stop()}}),e,this)}))),function(){return J.apply(this,arguments)})},{key:"removeAddressLink",value:(Z=(0,a.default)(s.default.mark((function e(t){var r,n;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=t.toLowerCase(),e.next=3,this.isAddressLinked({address:t});case 3:if(e.sent){e.next=6;break}throw new Error("removeAddressLink: link for given address does not exist");case 6:return r={address:t,type:"delete-address-link"},e.next=10,this._3id.signJWT(r,{expiresIn:3600});case 10:return n=e.sent,e.prev=11,e.next=14,T.fetchJson(this._serverUrl+"/linkdelete",{delete_token:n});case 14:e.next=20;break;case 16:if(e.prev=16,e.t0=e.catch(11),e.t0.statusCode){e.next=20;break}throw new Error(e.t0);case 20:return e.next=22,this._deleteAddressLink(t);case 22:return e.abrupt("return",!0);case 23:case"end":return e.stop()}}),e,this,[[11,16]])}))),function(e){return Z.apply(this,arguments)})},{key:"isAddressLinked",value:(Y=(0,a.default)(s.default.mark((function e(){var t,r,n,i=arguments;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=i.length>0&&i[0]!==undefined?i[0]:{}).address&&(t.address=t.address.toLowerCase()),e.next=4,this._readAddressLinks();case 4:return r=e.sent,n=r.find((function(e){var r=!t.address||e.address===t.address;return t.type?r&&e.type===t.type:r})),e.abrupt("return",Boolean(n));case 7:case"end":return e.stop()}}),e,this)}))),function(){return Y.apply(this,arguments)})},{key:"isAccountLinked",value:(W=(0,a.default)(s.default.mark((function e(){var t,r=arguments;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&r[0]!==undefined?r[0]:R,console.warn("isAccountLinked: deprecated, please use isAddressLinked going forward"),e.abrupt("return",this.isAddressLinked(t));case 3:case"end":return e.stop()}}),e,this)}))),function(){return W.apply(this,arguments)})},{key:"listAddressLinks",value:(z=(0,a.default)(s.default.mark((function e(){var t;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._readAddressLinks();case 2:return t=e.sent,e.abrupt("return",t.reduce((function(e,t){var r=Object.assign({},t);return r.linkId=r.entry.hash,delete r.entry,r}),[]));case 4:case"end":return e.stop()}}),e,this)}))),function(){return z.apply(this,arguments)})},{key:"_linkProfile",value:(q=(0,a.default)(s.default.mark((function e(){var t,r,n,i;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._3id.managementAddress,e.next=3,this._readAddressLink(t);case 3:if(r=e.sent){e.next=19;break}return n=this.DID,e.prev=6,e.next=9,T.getLinkConsent(t,n,this._web3provider);case 9:i=e.sent,e.next=16;break;case 12:throw e.prev=12,e.t0=e.catch(6),console.log(e.t0),new Error("Link consent message must be signed before adding data, to link address to store");case 16:return r={version:1,type:R,message:i.msg,signature:i.sig,timestamp:i.timestamp},e.next=19,this._writeAddressLink(r);case 19:return e.next=21,this.public.get("proof_did");case 21:if(e.sent){e.next=29;break}return e.t1=this.public,e.next=25,this._3id.signJWT();case 25:return e.t2=e.sent,e.t3={noLink:!0},e.next=29,e.t1.set.call(e.t1,"proof_did",e.t2,e.t3);case 29:T.fetchJson(this._serverUrl+"/link",r).catch(console.error);case 30:case"end":return e.stop()}}),e,this,[[6,12]])}))),function(){return q.apply(this,arguments)})},{key:"_writeAddressLink",value:(G=(0,a.default)(s.default.mark((function e(t){var r,n;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._ipfs.dag.put(t);case 2:return r=e.sent.toBaseEncodedString(),e.next=5,this._linkCIDExists(r);case 5:if(!e.sent){e.next=8;break}return e.abrupt("return");case 8:return n={type:"address-link",data:r},e.next=11,this._rootStore.add(n);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return G.apply(this,arguments)})},{key:"_linkCIDExists",value:(H=(0,a.default)(s.default.mark((function e(t){var r,n;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rootStore.iterator({limit:-1}).collect();case 2:return r=e.sent,n=r.filter((function(e){return"address-link"===e.payload.value.type})),e.abrupt("return",n.find((function(e){return e.data===t})));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return H.apply(this,arguments)})},{key:"_deleteAddressLink",value:(V=(0,a.default)(s.default.mark((function e(t){var r;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=t.toLowerCase(),e.next=3,this._readAddressLink(t);case 3:if(r=e.sent){e.next=6;break}throw new Error("_deleteAddressLink: link for given address does not exist");case 6:return e.abrupt("return",this._rootStore.remove(r.entry.hash));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return V.apply(this,arguments)})},{key:"_readAddressLinks",value:(F=(0,a.default)(s.default.mark((function e(){var t,r,n,i=this;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rootStore.iterator({limit:-1}).collect();case 2:return t=e.sent,r=t.filter((function(e){return"address-link"===e.payload.value.type})),n=r.map(function(){var e=(0,a.default)(s.default.mark((function e(t){var r;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i._ipfs.dag.get(t.payload.value.data);case 2:if((r=e.sent.value).address){e.next=7;break}return e.next=6,T.recoverPersonalSign(r.message,r.signature);case 6:r.address=e.sent;case 7:return r.entry=t,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",Promise.all(n));case 6:case"end":return e.stop()}}),e,this)}))),function(){return F.apply(this,arguments)})},{key:"_readAddressLink",value:(K=(0,a.default)(s.default.mark((function e(t){var r;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=t.toLowerCase(),e.next=3,this._readAddressLinks();case 3:return r=e.sent,e.abrupt("return",r.find((function(e){return e.address.toLowerCase()===t})));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return K.apply(this,arguments)})},{key:"_ensurePinningNodeConnected",value:(U=(0,a.default)(s.default.mark((function e(t,r){var n,i=this;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._ipfs.pubsub.peers(t);case 2:e.sent.find((function(e){return e===i.pinningNode.split("/").pop()}))||(this._ipfs.swarm.connect(this.pinningNode,(function(){})),n=this._rootStore.address.toString(),r?this._pubsub.publish(D,{type:"SYNC_DB",odbAddress:t,thread:!0}):this._pubsub.publish(D,{type:"PIN_DB",odbAddress:n}));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return U.apply(this,arguments)})},{key:"close",value:(L=(0,a.default)(s.default.mark((function e(){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._orbitdb.stop();case 2:return e.next=4,this._pubsub.disconnect();case 4:E=null;case 5:case"end":return e.stop()}}),e,this)}))),function(){return L.apply(this,arguments)})},{key:"logout",value:(N=(0,a.default)(s.default.mark((function e(){var t;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.close();case 2:this._3id.logout(),t=this._3id.managementAddress,h.remove("linkConsent_"+t);case 5:case"end":return e.stop()}}),e,this)}))),function(){return N.apply(this,arguments)})},{key:"DID",get:function(){return this._3id.muportDID}}],[{key:"getProfile",value:(_=(0,a.default)(s.default.mark((function e(t){var r,n,i,o,a=arguments;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>1&&a[1]!==undefined?a[1]:{},n=r.metadata,!(r=Object.assign({useCacheService:!0},r)).useCacheService){e.next=9;break}return e.next=6,C.getProfile(t,r.profileServer,{metadata:n});case 6:i=e.sent,e.next=15;break;case 9:if(!n){e.next=11;break}throw new Error("getting metadata is not yet supported outside of the API");case 11:return o=t.toLowerCase(),e.next=14,this._getProfileOrbit(o,r);case 14:i=e.sent;case 15:return e.abrupt("return",i);case 16:case"end":return e.stop()}}),e,this)}))),function(e){return _.apply(this,arguments)})},{key:"getProfiles",value:(b=(0,a.default)(s.default.mark((function e(t){var r,n=arguments;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&n[1]!==undefined?n[1]:{},e.abrupt("return",C.getProfiles(t,r));case 2:case"end":return e.stop()}}),e)}))),function(e){return b.apply(this,arguments)})},{key:"getSpace",value:(v=(0,a.default)(s.default.mark((function e(t,r){var n,i=arguments;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>2&&i[2]!==undefined?i[2]:{},e.abrupt("return",C.getSpace(t,r,n.profileServer,n));case 2:case"end":return e.stop()}}),e)}))),function(e,t){return v.apply(this,arguments)})},{key:"getThread",value:(g=(0,a.default)(s.default.mark((function e(t,r,n,i){var o,a=arguments;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.length>4&&a[4]!==undefined?a[4]:{},e.abrupt("return",C.getThread(t,r,n,i,o));case 2:case"end":return e.stop()}}),e)}))),function(e,t,r,n){return g.apply(this,arguments)})},{key:"getThreadByAddress",value:(y=(0,a.default)(s.default.mark((function e(t){var r,n=arguments;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&n[1]!==undefined?n[1]:{},e.abrupt("return",C.getThreadByAddress(t,r));case 2:case"end":return e.stop()}}),e)}))),function(e){return y.apply(this,arguments)})},{key:"getConfig",value:(d=(0,a.default)(s.default.mark((function e(t){var r,n=arguments;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&n[1]!==undefined?n[1]:{},e.abrupt("return",C.getConfig(t,r));case 2:case"end":return e.stop()}}),e)}))),function(e){return d.apply(this,arguments)})},{key:"listSpaces",value:(l=(0,a.default)(s.default.mark((function e(t){var r,n=arguments;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&n[1]!==undefined?n[1]:{},e.abrupt("return",C.listSpaces(t,r.profileServer));case 2:case"end":return e.stop()}}),e)}))),function(e){return l.apply(this,arguments)})},{key:"_getProfileOrbit",value:(o=(0,a.default)(s.default.mark((function e(t){var r,n,i,o,u,c,l,f,h,d,m,y,g=arguments;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=g.length>1&&g[1]!==undefined?g[1]:{},!P.isMuportDID(t)){e.next=3;break}throw new Error("DID are supported in the cached version only");case 3:return e.next=5,C.getRootStoreAddress(t.toLowerCase(),r.addressServer);case 5:if(n=e.sent,!w){e.next=12;break}i=w,e.next=15;break;case 12:return e.next=14,j(r.ipfs,r.iframeStore,r.ipfsOptions);case 14:i=e.sent;case 15:if(E?o=E:(u=null,o=new p(i,r.orbitPath,{cache:u})),c=r.pinningNode||M,i.swarm.connect(c,(function(){})),l=new A(o),!n){e.next=41;break}return e.next=22,o.open(n);case 22:return f=e.sent,h=new Promise((function(e,t){f.events.on("ready",e)})),f.load(),e.next=27,h;case 27:if(f.iterator({limit:-1}).collect().length){e.next=30;break}return e.next=30,new Promise((function(e,t){f.events.on("replicate.progress",(function(t,r,n,i,s){i===s&&f.events.on("replicated",e)}))}));case 30:return d=f.iterator({limit:-1}).collect().find((function(e){return"public"===e.payload.value.odbAddress.split(".")[1]})),e.next=33,l._load(d.payload.value.odbAddress);case 33:return e.next=35,l._sync();case 35:return m=l.all(),y=function(){var e=(0,a.default)(s.default.mark((function e(){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.close();case 2:return e.next=4,l.close();case 4:case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y(),e.abrupt("return",m);case 41:return e.abrupt("return",null);case 42:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)})},{key:"profileGraphQL",value:(n=(0,a.default)(s.default.mark((function e(t){var r,n=arguments;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&n[1]!==undefined?n[1]:{},e.abrupt("return",C.profileGraphQL(t,r.graphqlServer));case 2:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})},{key:"getVerifiedAccounts",value:(r=(0,a.default)(s.default.mark((function e(t){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C.getVerifiedAccounts(t));case 1:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"openBox",value:(t=(0,a.default)(s.default.mark((function t(r,n){var i,o,a,u,c=arguments;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=c.length>2&&c[2]!==undefined?c[2]:{},t.t0=w,t.t0){t.next=6;break}return t.next=5,j(i.ipfs,i.iframeStore,i.ipfsOptions);case 5:t.t0=t.sent;case 6:return o=t.t0,w=o,t.next=10,k.getIdFromEthAddress(r,n,o,i);case 10:return a=t.sent,u=new e(a,n,o,i),t.next=14,u._load(i);case 14:return t.abrupt("return",u);case 15:case"end":return t.stop()}}),t)}))),function(e,r){return t.apply(this,arguments)})},{key:"isLoggedIn",value:function(e){return k.isLoggedIn(e)}}]),e}();function j(e,t,r){return K.apply(this,arguments)}function K(){return(K=(0,a.default)(s.default.mark((function e(t,r,n){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&r&&console.log("Warning: iframeStore true, orbit db cache in iframe, but the given ipfs object is being used, and may not be running in same iframe."),!t){e.next=5;break}return e.abrupt("return",t);case 5:return e.abrupt("return",new Promise((function(e,r){(t=new d(n||L)).on("error",(function(e){console.error(e),r(e)})),t.on("ready",(function(){return e(t)}))})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}U.idUtils=P,t.exports=U}}},{package:"3box",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/3box/lib/3box.js"}],[70,{"../../../../shared/constants/network":6254,"./handlers":74,"@babel/runtime/helpers/interopRequireDefault":200,"@metamask/controllers":1047,"@metamask/rpc-methods":1224,"eth-rpc-errors":2482,lodash:5219},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.createMethodMiddleware=function(e){const t=f.filter((t=>!Object.hasOwnProperty.call(e,t)));if(t.length>0)throw new Error(`Missing expected hooks:\n\n${t.join("\n")}\n`);return async function(t,r,n,i){if(u.UNSUPPORTED_RPC_METHODS.has(t.method))return i(o.ethErrors.rpc.methodNotSupported());const a=l.get(t.method);if(a){const{implementation:o,hookNames:u}=a;try{return await o(t,r,n,i,(0,s.selectHooks)(e,u))}catch(e){return console.error(e),i(e)}}return n()}};var i=e("@metamask/controllers"),s=e("@metamask/rpc-methods"),o=e("eth-rpc-errors"),a=e("lodash"),u=e("../../../../shared/constants/network");const c=[...n(e("./handlers")).default,...i.permissionRpcMethods.handlers],l=c.reduce(((e,t)=>{for(const r of t.methodNames)e.set(r,t);return e}),new Map),f=Array.from(new Set((0,a.flatten)(c.map((({hookNames:e})=>Object.keys(e))))).values())}}},{package:"<root>",file:"/Users/mac/code/a-mises/metamask-extension/app/scripts/lib/rpc-method-middleware/createMethodMiddleware.js"}],[4322,{"./core":4321,"./helpers":4323},function(){with(this)return function(){"use strict";return function(e,t,r){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0});
/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017 Joachim Wester
 * MIT license
 */
var i=e("./helpers"),s=e("./core"),o=e("./core");r.applyOperation=o.applyOperation,r.applyPatch=o.applyPatch,r.applyReducer=o.applyReducer,r.getValueByPointer=o.getValueByPointer,r.validate=o.validate,r.validator=o.validator;var a=e("./helpers");r.JsonPatchError=a.PatchError,r.deepClone=a._deepClone,r.escapePathComponent=a.escapePathComponent,r.unescapePathComponent=a.unescapePathComponent;var u=new WeakMap,c=function(e){this.observers=new Map,this.obj=e},l=function(e,t){this.callback=e,this.observer=t};function f(e,t){t.unobserve()}function h(e,t){var r,n=function(e){return u.get(e)}(e);if(n){var s=function(e,t){return e.observers.get(t)}(n,t);r=s&&s.observer}else n=new c(e),u.set(e,n);if(r)return r;if(r={},n.value=i._deepClone(e),t){r.callback=t,r.next=null;var o=function(){d(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};"undefined"!=typeof window&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=[],r.object=e,r.unobserve=function(){d(r),clearTimeout(r.next),function(e,t){e.observers.delete(t.callback)}(n,r),"undefined"!=typeof window&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},n.observers.set(t,new l(t,r)),r}function d(e,t){void 0===t&&(t=!1);var r=u.get(e.object);p(r.value,e.object,e.patches,"",t),e.patches.length&&s.applyPatch(r.value,e.patches);var n=e.patches;return n.length>0&&(e.patches=[],e.callback&&e.callback(n)),n}function p(e,t,r,n,s){if(t!==e){"function"==typeof t.toJSON&&(t=t.toJSON());for(var o=i._objectKeys(t),a=i._objectKeys(e),u=!1,c=a.length-1;c>=0;c--){var l=e[h=a[c]];if(!i.hasOwnProperty(t,h)||t[h]===undefined&&l!==undefined&&!1===Array.isArray(t))Array.isArray(e)===Array.isArray(t)?(s&&r.push({op:"test",path:n+"/"+i.escapePathComponent(h),value:i._deepClone(l)}),r.push({op:"remove",path:n+"/"+i.escapePathComponent(h)}),u=!0):(s&&r.push({op:"test",path:n,value:e}),r.push({op:"replace",path:n,value:t}),!0);else{var f=t[h];"object"==typeof l&&null!=l&&"object"==typeof f&&null!=f?p(l,f,r,n+"/"+i.escapePathComponent(h),s):l!==f&&(!0,s&&r.push({op:"test",path:n+"/"+i.escapePathComponent(h),value:i._deepClone(l)}),r.push({op:"replace",path:n+"/"+i.escapePathComponent(h),value:i._deepClone(f)}))}}if(u||o.length!=a.length)for(c=0;c<o.length;c++){var h=o[c];i.hasOwnProperty(e,h)||t[h]===undefined||r.push({op:"add",path:n+"/"+i.escapePathComponent(h),value:i._deepClone(t[h])})}}}function m(e,t,r){void 0===r&&(r=!1);var n=[];return p(e,t,n,"",r),n}r.unobserve=f,r.observe=h,r.generate=d,r.compare=m;var y=e("./core"),g=e("./helpers");r.default=n({},y,{unobserve:f,observe:h,generate:d,compare:m,JsonPatchError:g.PatchError,deepClone:i._deepClone,escapePathComponent:i.escapePathComponent,unescapePathComponent:g.unescapePathComponent})}}},{package:"fast-json-patch",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/fast-json-patch/lib/duplex.js"}],[268,{cids:242},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("cids");r.cidForWeb=e=>{let t=new n(e);0===t.version&&(t=t.toV1());let r=t.toString("base32");if(r.length>63){const e=t.toString("base36");if(e.length<=63)return e;throw new TypeError("CID is longer than DNS limit of 63 characters and is not compatible with public gateways")}return r};r.cidV0ToV1Base32=e=>{let t=new n(e);return 0===t.version&&(t=t.toV1()),t.toString("base32")}}}},{package:"@ensdomains/content-hash",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@ensdomains/content-hash/src/helpers.js"}],[260,{"./constants":259,buffer:2105,multibase:245,varint:6096,"web-encoding":6100},function(){with(this)return function(){"use strict";return function(e,t,r){const{Buffer:n}=e("buffer"),i=e("multibase"),s=e("varint"),{names:o}=e("./constants"),{TextDecoder:a}=e("web-encoding"),u=new a,c={};for(const e in o)c[o[e]]=e;function l(e){r.decode(e)}r.names=o,r.codes=Object.freeze(c),r.toHexString=function(e){if(!(e instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return(n.isBuffer(e)?e:n.from(e.buffer,e.byteOffset,e.byteLength)).toString("hex")},r.fromHexString=function(e){return n.from(e,"hex")},r.toB58String=function(e){if(!(e instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return u.decode(i.encode("base58btc",e)).slice(1)},r.fromB58String=function(e){const t=e instanceof Uint8Array?u.decode(e):e;return i.decode("z"+t)},r.decode=function(e){if(!(e instanceof Uint8Array))throw new Error("multihash must be a Uint8Array");let t=n.isBuffer(e)?e:n.from(e.buffer,e.byteOffset,e.byteLength);if(t.length<2)throw new Error("multihash too short. must be > 2 bytes.");const i=s.decode(t);if(!r.isValidCode(i))throw new Error(`multihash unknown function code: 0x${i.toString(16)}`);t=t.slice(s.decode.bytes);const o=s.decode(t);if(o<0)throw new Error(`multihash invalid length: ${o}`);if(t=t.slice(s.decode.bytes),t.length!==o)throw new Error(`multihash length inconsistent: 0x${t.toString("hex")}`);return{code:i,name:c[i],length:o,digest:t}},r.encode=function(e,t,i){if(!e||t===undefined)throw new Error("multihash encode requires at least two args: digest, code");const o=r.coerceCode(t);if(!(e instanceof Uint8Array))throw new Error("digest should be a Uint8Array");if(null==i&&(i=e.length),i&&e.length!==i)throw new Error("digest length should be equal to specified length.");const a=s.encode(o),u=s.encode(i),c=n.alloc(a.length+u.length+e.length);return c.set(a,0),c.set(u,a.length),c.set(e,a.length+u.length),c},r.coerceCode=function(e){let t=e;if("string"==typeof e){if(o[e]===undefined)throw new Error(`Unrecognized hash function named: ${e}`);t=o[e]}if("number"!=typeof t)throw new Error(`Hash function code should be a number. Got: ${t}`);if(c[t]===undefined&&!r.isAppCode(t))throw new Error(`Unrecognized function code: ${t}`);return t},r.isAppCode=function(e){return e>0&&e<16},r.isValidCode=function(e){return!!r.isAppCode(e)||!!c[e]},r.validate=l,r.prefix=function(e){return l(e),n.from(e.buffer,e.byteOffset,2)}}}},{package:"multihashes",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@ensdomains/content-hash/node_modules/multihashes/src/index.js"}],[270,{buffer:2105,cids:242,"js-base64":4762,multihashes:260},function(){with(this)return function(){"use strict";return function(e,t,r){(function(t){(function(){const n=e("cids"),i=e("multihashes"),s=e("js-base64"),o=e=>{let t=e.slice(0,2),r=e.slice(2),n="";return n="0x"===t?r:e,i.fromHexString(n)},a=e=>{try{const{multihash:t}=e;if(t.length<38){const e=i.decode(t);if("identity"===e.name&&e.length<36)return!1}return!0}catch(e){return!1}return!1},u={skynet:e=>s.toUint8Array(e),swarm:e=>{const t=i.encode(o(e),"keccak-256");return new n(1,"swarm-manifest",t).bytes},ipfs:e=>new n(e).toV1().bytes,ipns:e=>{const t=new n(e);if(!a(t))throw Error("ipns-ns allows only valid cryptographic libp2p-key identifiers, try using ED25519 pubkey instead");return new n(1,"libp2p-key",t.multihash).bytes},utf8:e=>t.from(e,"utf8")},c={hexMultiHash:e=>{const t=new n(e);return i.decode(t.multihash).digest.toString("hex")},ipfs:e=>{const t=new n(e).toV1();return t.toString("libp2p-key"===t.codec?"base36":"base32")},ipns:e=>{const t=new n(e).toV1();return a(t)?t.toString("base36"):(console.warn("[ensdomains/content-hash] use of non-cryptographic identifiers in ipns-ns is deprecated and will be removed, migrate to ED25519 libp2p-key"),String(i.decode(new n(e).multihash).digest))},utf8:e=>e.toString("utf8"),base64:e=>s.fromUint8Array(e,!0)},l={"skynet-ns":{encode:u.skynet,decode:c.base64},"swarm-ns":{encode:u.swarm,decode:c.hexMultiHash},"ipfs-ns":{encode:u.ipfs,decode:c.ipfs},"ipns-ns":{encode:u.ipns,decode:c.ipns},default:{encode:u.utf8,decode:c.utf8}};r.hexStringToBuffer=o,r.profiles=l}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@ensdomains/content-hash",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@ensdomains/content-hash/src/profiles.js"}],[254,{"./constants":253,"./int-table":255,"./print":256,"./util":257,"./varint-table":258,"uint8arrays/concat":261,varint:250},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("varint"),i=e("./int-table"),s=e("./varint-table"),o=e("./util"),a=e("uint8arrays/concat");const u=e("./constants"),c=e("./print");t.exports={addPrefix:function(e,t){let r;if(e instanceof Uint8Array)r=o.varintUint8ArrayEncode(e);else{if(!s[e])throw new Error("multicodec not recognized");r=s[e]}return a([r,t],r.length+t.length)},rmPrefix:function(e){return n.decode(e),e.slice(n.decode.bytes)},getCodec:function(e){const t=n.decode(e),r=i.get(t);if(r===undefined)throw new Error(`Code ${t} not found`);return r},getName:function(e){return i.get(e)},getNumber:function(e){const t=s[e];if(t===undefined)throw new Error("Codec `"+e+"` not found");return n.decode(t)},getCode:function(e){return n.decode(e)},getCodeVarint:function(e){const t=s[e];if(t===undefined)throw new Error("Codec `"+e+"` not found");return t},getVarint:function(e){return n.encode(e)},print:c,...u}}}},{package:"multicodec",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@ensdomains/content-hash/node_modules/multicodec/src/index.js"}],[1695,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports={name:"analytics-node",version:"3.4.0-beta.3",description:"The hassle-free way to integrate analytics into any Node.js application",license:"MIT",repository:"segmentio/analytics-node",author:{name:"Segment",email:"tools+npm@segment.com",url:"https://segment.com"},engines:{node:">=4"},"size-limit":[{limit:"25 KB",path:"index.js"}],scripts:{"circle-lint":".buildscript/circle.sh",dependencies:"yarn",size:"size-limit",test:"standard && nyc ava --timeout=20s&& .buildscript/e2e.sh","report-coverage":"nyc report --reporter=lcov > coverage.lcov && codecov",np:"np --no-publish",release:"yarn run np"},files:["index.js"],keywords:["analytics","stats","segment.io","segmentio","segment","client","driver"],dependencies:{"@segment/loosely-validate-event":"^2.0.0",axios:"^0.19.2","axios-retry":"^3.0.2","lodash.isstring":"^4.0.1",md5:"^2.2.1",ms:"^2.0.0","remove-trailing-slash":"^0.1.0",uuid:"^3.2.1"},devDependencies:{ava:"^0.25.0","basic-auth":"^2.0.1","body-parser":"^1.17.1",codecov:"^3.0.0",commander:"^2.9.0",delay:"^4.2.0",express:"^4.15.2",husky:"^3.0.4",nyc:"^14.1.1",pify:"^4.0.1",sinon:"^7.3.2","size-limit":"^1.3.5",snyk:"^1.171.1",standard:"^12.0.1"}}}}},{package:"analytics-node",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/analytics-node/package.json"}],[5789,{},function(){with(this)return function(){"use strict";return function(e,t,r){(r=t.exports=function(e){return String(e).replace(r.expr,"")}).expr=/\/+$/}}},{package:"remove-trailing-slash",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/remove-trailing-slash/index.js"}],[5252,{},function(){with(this)return function(){"use strict";return function(e,t,r){var n=1e3,i=60*n,s=60*i,o=24*s,a=7*o,u=365.25*o;function c(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}t.exports=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*u;case"weeks":case"week":case"w":return r*a;case"days":case"day":case"d":return r*o;case"hours":case"hour":case"hrs":case"hr":case"h":return r*s;case"minutes":case"minute":case"mins":case"min":case"m":return r*i;case"seconds":case"second":case"secs":case"sec":case"s":return r*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return undefined}}(e);if("number"===r&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=o)return c(e,t,o,"day");if(t>=s)return c(e,t,s,"hour");if(t>=i)return c(e,t,i,"minute");if(t>=n)return c(e,t,n,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=o)return Math.round(e/o)+"d";if(t>=s)return Math.round(e/s)+"h";if(t>=i)return Math.round(e/i)+"m";if(t>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}}}},{package:"ms",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/ms/index.js"}],[5046,{},function(){with(this)return function(){"use strict";return function(e,t,r){var n=Object.prototype.toString,i=Array.isArray;t.exports=function(e){return"string"==typeof e||!i(e)&&function(e){return!!e&&"object"==typeof e}(e)&&"[object String]"==n.call(e)}}}},{package:"lodash.isstring",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/lodash.isstring/index.js"}],[1694,{"./lib/bytesToUuid":1692,"./lib/rng":1693},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./lib/rng"),i=e("./lib/bytesToUuid");t.exports=function(e,t,r){var s=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||n)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var a=0;a<16;++a)t[s+a]=o[a];return t||i(o)}}}},{package:"uuid",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/analytics-node/node_modules/uuid/v4.js"}],[5239,{charenc:2144,crypt:2217,"is-buffer":4731},function(){with(this)return function(){"use strict";return function(e,t,r){var n,i,s,o,a;n=e("crypt"),i=e("charenc").utf8,s=e("is-buffer"),o=e("charenc").bin,(a=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?o.stringToBytes(e):i.stringToBytes(e):s(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var r=n.bytesToWords(e),u=8*e.length,c=1732584193,l=-271733879,f=-1732584194,h=271733878,d=0;d<r.length;d++)r[d]=16711935&(r[d]<<8|r[d]>>>24)|4278255360&(r[d]<<24|r[d]>>>8);r[u>>>5]|=128<<u%32,r[14+(u+64>>>9<<4)]=u;var p=a._ff,m=a._gg,y=a._hh,g=a._ii;for(d=0;d<r.length;d+=16){var v=c,b=l,_=f,w=h;c=p(c,l,f,h,r[d+0],7,-680876936),h=p(h,c,l,f,r[d+1],12,-389564586),f=p(f,h,c,l,r[d+2],17,606105819),l=p(l,f,h,c,r[d+3],22,-1044525330),c=p(c,l,f,h,r[d+4],7,-176418897),h=p(h,c,l,f,r[d+5],12,1200080426),f=p(f,h,c,l,r[d+6],17,-1473231341),l=p(l,f,h,c,r[d+7],22,-45705983),c=p(c,l,f,h,r[d+8],7,1770035416),h=p(h,c,l,f,r[d+9],12,-1958414417),f=p(f,h,c,l,r[d+10],17,-42063),l=p(l,f,h,c,r[d+11],22,-1990404162),c=p(c,l,f,h,r[d+12],7,1804603682),h=p(h,c,l,f,r[d+13],12,-40341101),f=p(f,h,c,l,r[d+14],17,-1502002290),c=m(c,l=p(l,f,h,c,r[d+15],22,1236535329),f,h,r[d+1],5,-165796510),h=m(h,c,l,f,r[d+6],9,-1069501632),f=m(f,h,c,l,r[d+11],14,643717713),l=m(l,f,h,c,r[d+0],20,-373897302),c=m(c,l,f,h,r[d+5],5,-701558691),h=m(h,c,l,f,r[d+10],9,38016083),f=m(f,h,c,l,r[d+15],14,-660478335),l=m(l,f,h,c,r[d+4],20,-405537848),c=m(c,l,f,h,r[d+9],5,568446438),h=m(h,c,l,f,r[d+14],9,-1019803690),f=m(f,h,c,l,r[d+3],14,-187363961),l=m(l,f,h,c,r[d+8],20,1163531501),c=m(c,l,f,h,r[d+13],5,-1444681467),h=m(h,c,l,f,r[d+2],9,-51403784),f=m(f,h,c,l,r[d+7],14,1735328473),c=y(c,l=m(l,f,h,c,r[d+12],20,-1926607734),f,h,r[d+5],4,-378558),h=y(h,c,l,f,r[d+8],11,-2022574463),f=y(f,h,c,l,r[d+11],16,1839030562),l=y(l,f,h,c,r[d+14],23,-35309556),c=y(c,l,f,h,r[d+1],4,-1530992060),h=y(h,c,l,f,r[d+4],11,1272893353),f=y(f,h,c,l,r[d+7],16,-155497632),l=y(l,f,h,c,r[d+10],23,-1094730640),c=y(c,l,f,h,r[d+13],4,681279174),h=y(h,c,l,f,r[d+0],11,-358537222),f=y(f,h,c,l,r[d+3],16,-722521979),l=y(l,f,h,c,r[d+6],23,76029189),c=y(c,l,f,h,r[d+9],4,-640364487),h=y(h,c,l,f,r[d+12],11,-421815835),f=y(f,h,c,l,r[d+15],16,530742520),c=g(c,l=y(l,f,h,c,r[d+2],23,-995338651),f,h,r[d+0],6,-198630844),h=g(h,c,l,f,r[d+7],10,1126891415),f=g(f,h,c,l,r[d+14],15,-1416354905),l=g(l,f,h,c,r[d+5],21,-57434055),c=g(c,l,f,h,r[d+12],6,1700485571),h=g(h,c,l,f,r[d+3],10,-1894986606),f=g(f,h,c,l,r[d+10],15,-1051523),l=g(l,f,h,c,r[d+1],21,-2054922799),c=g(c,l,f,h,r[d+8],6,1873313359),h=g(h,c,l,f,r[d+15],10,-30611744),f=g(f,h,c,l,r[d+6],15,-1560198380),l=g(l,f,h,c,r[d+13],21,1309151649),c=g(c,l,f,h,r[d+4],6,-145523070),h=g(h,c,l,f,r[d+11],10,-1120210379),f=g(f,h,c,l,r[d+2],15,718787259),l=g(l,f,h,c,r[d+9],21,-343485551),c=c+v>>>0,l=l+b>>>0,f=f+_>>>0,h=h+w>>>0}return n.endian([c,l,f,h])})._ff=function(e,t,r,n,i,s,o){var a=e+(t&r|~t&n)+(i>>>0)+o;return(a<<s|a>>>32-s)+t},a._gg=function(e,t,r,n,i,s,o){var a=e+(t&n|r&~n)+(i>>>0)+o;return(a<<s|a>>>32-s)+t},a._hh=function(e,t,r,n,i,s,o){var a=e+(t^r^n)+(i>>>0)+o;return(a<<s|a>>>32-s)+t},a._ii=function(e,t,r,n,i,s,o){var a=e+(r^(t|~n))+(i>>>0)+o;return(a<<s|a>>>32-s)+t},a._blocksize=16,a._digestsize=16,t.exports=function(e,t){if(e===undefined||null===e)throw new Error("Illegal argument "+e);var r=n.wordsToBytes(a(e,t));return t&&t.asBytes?r:t&&t.asString?o.bytesToString(r):n.bytesToHex(r)}}}},{package:"md5",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/md5/md5.js"}],[1488,{assert:1714,buffer:2105,"component-type":2177,"join-component":4761},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("component-type"),i=e("join-component"),s=e("assert");t.exports=function(e,t){switch(a(e),t=t||e.type,s(t,"You must pass an event type."),t){case"track":return function(e){s(e.anonymousId||e.userId,'You must pass either an "anonymousId" or a "userId".'),s(e.event,'You must pass an "event".')}(e);case"group":return function(e){s(e.anonymousId||e.userId,'You must pass either an "anonymousId" or a "userId".'),s(e.groupId,'You must pass a "groupId".')}(e);case"identify":case"page":case"screen":return function(e){s(e.anonymousId||e.userId,'You must pass either an "anonymousId" or a "userId".')}(e);case"alias":return function(e){s(e.userId,'You must pass a "userId".'),s(e.previousId,'You must pass a "previousId".')}(e);default:s(0,'Invalid event type: "'+t+'"')}};var o={anonymousId:["string","number"],category:"string",context:"object",event:"string",groupId:["string","number"],integrations:"object",name:"string",previousId:["string","number"],timestamp:"date",userId:["string","number"],type:"string"};function a(e){s("object"===n(e),"You must pass a message object.");var t=JSON.stringify(e);for(var a in s(r.byteLength(t,"utf8")<32768,"Your message must be < 32kb."),o){var u=e[a];if(u){var c=o[a];"array"!==n(c)&&(c=[c]);var l="object"===c[0]?"an":"a";s(c.some((function(e){return n(u)===e})),'"'+a+'" must be '+l+" "+i(c,"or")+".")}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@segment/loosely-validate-event",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@segment/loosely-validate-event/index.js"}],[1797,{"./lib/index":1798},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=e("./lib/index").default}}},{package:"axios-retry",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/axios-retry/index.js"}],[1799,{"./lib/axios":1801},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=e("./lib/axios")}}},{package:"axios",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/axios/index.js"}],[2559,{"./account":2555,"./bytes":2556,"./constants":2557,"./hash":2558,"./object":2560,"./secp256k1v3-adapter":2561,"./signature":2564,"bn.js":2059,"ethjs-util":2565,rlp:5798},function(){with(this)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.secp256k1=r.rlp=r.BN=void 0;var s=e("./secp256k1v3-adapter");r.secp256k1=s;var o=e("ethjs-util"),a=e("bn.js");r.BN=a;var u=e("rlp");r.rlp=u,Object.assign(r,o),i(e("./constants"),r),i(e("./account"),r),i(e("./hash"),r),i(e("./signature"),r),i(e("./bytes"),r),i(e("./object"),r)}}},{package:"ethereumjs-util",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/ethereumjs-wallet/node_modules/ethereumjs-util/dist/index.js"}],[5810,{buffer:2105,pbkdf2:5460},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("pbkdf2").pbkdf2Sync,i=2147483647;function s(e,t,n,i,s){if(r.isBuffer(e)&&r.isBuffer(n))e.copy(n,i,t,t+s);else for(;s--;)n[i++]=e[t++]}t.exports=function(e,t,o,a,u,c,l){if(0===o||0!=(o&o-1))throw Error("N must be > 0 and a power of 2");if(o>i/128/a)throw Error("Parameter N is too large");if(a>i/128/u)throw Error("Parameter r is too large");var f,h=new r(256*a),d=new r(128*a*o),p=new Int32Array(16),m=new Int32Array(16),y=new r(64),g=n(e,t,1,128*u*a,"sha256");if(l){var v=u*o*2,b=0;f=function(){++b%1e3==0&&l({current:b,total:v,percent:b/v*100})}}for(var _=0;_<u;_++)w(g,128*_*a,a,o,d,h);return n(e,g,1,c,"sha256");function w(e,t,r,n,i,s){var o,a=128*r;for(e.copy(s,0,t,t+a),o=0;o<n;o++)s.copy(i,o*a,0,0+a),E(s,0,a,r),f&&f();for(o=0;o<n;o++){var u=0+64*(2*r-1);S(i,(s.readUInt32LE(u)&n-1)*a,s,0,a),E(s,0,a,r),f&&f()}s.copy(e,t,0,0+a)}function E(e,t,r,n){var i;for(s(e,t+64*(2*n-1),y,0,64),i=0;i<2*n;i++)S(e,64*i,y,0,64),A(y),s(y,0,e,r+64*i,64);for(i=0;i<n;i++)s(e,r+2*i*64,e,t+64*i,64);for(i=0;i<n;i++)s(e,r+64*(2*i+1),e,t+64*(i+n),64)}function k(e,t){return e<<t|e>>>32-t}function A(e){var t;for(t=0;t<16;t++)p[t]=(255&e[4*t+0])<<0,p[t]|=(255&e[4*t+1])<<8,p[t]|=(255&e[4*t+2])<<16,p[t]|=(255&e[4*t+3])<<24;for(s(p,0,m,0,16),t=8;t>0;t-=2)m[4]^=k(m[0]+m[12],7),m[8]^=k(m[4]+m[0],9),m[12]^=k(m[8]+m[4],13),m[0]^=k(m[12]+m[8],18),m[9]^=k(m[5]+m[1],7),m[13]^=k(m[9]+m[5],9),m[1]^=k(m[13]+m[9],13),m[5]^=k(m[1]+m[13],18),m[14]^=k(m[10]+m[6],7),m[2]^=k(m[14]+m[10],9),m[6]^=k(m[2]+m[14],13),m[10]^=k(m[6]+m[2],18),m[3]^=k(m[15]+m[11],7),m[7]^=k(m[3]+m[15],9),m[11]^=k(m[7]+m[3],13),m[15]^=k(m[11]+m[7],18),m[1]^=k(m[0]+m[3],7),m[2]^=k(m[1]+m[0],9),m[3]^=k(m[2]+m[1],13),m[0]^=k(m[3]+m[2],18),m[6]^=k(m[5]+m[4],7),m[7]^=k(m[6]+m[5],9),m[4]^=k(m[7]+m[6],13),m[5]^=k(m[4]+m[7],18),m[11]^=k(m[10]+m[9],7),m[8]^=k(m[11]+m[10],9),m[9]^=k(m[8]+m[11],13),m[10]^=k(m[9]+m[8],18),m[12]^=k(m[15]+m[14],7),m[13]^=k(m[12]+m[15],9),m[14]^=k(m[13]+m[12],13),m[15]^=k(m[14]+m[13],18);for(t=0;t<16;++t)p[t]=m[t]+p[t];for(t=0;t<16;t++){var r=4*t;e[r+0]=p[t]>>0&255,e[r+1]=p[t]>>8&255,e[r+2]=p[t]>>16&255,e[r+3]=p[t]>>24&255}}function S(e,t,r,n,i){for(var s=0;s<i;s++)r[n+s]^=e[t+s]}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"scryptsy",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/scryptsy/lib/scrypt.js"}],[2568,{"./lib/bytesToUuid":2566,"./lib/rng":2567},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./lib/rng"),i=e("./lib/bytesToUuid");t.exports=function(e,t,r){var s=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||n)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var a=0;a<16;++a)t[s+a]=o[a];return t||i(o)}}}},{package:"uuid",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/ethereumjs-wallet/node_modules/uuid/v4.js"}],[5971,{"./createEventEmitterProxy":5969,"./createSwappableProxy":5970},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("./createSwappableProxy"),i=e("./createEventEmitterProxy");t.exports={createSwappableProxy:n,createEventEmitterProxy:i}}}},{package:"swappable-obj-proxy",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/swappable-obj-proxy/src/index.js"}],[19,{"../../../../shared/constants/time":6257,"@babel/runtime/helpers/defineProperty":194,"@babel/runtime/helpers/interopRequireDefault":200,_process:5480,"eth-block-tracker":2388,"eth-json-rpc-middleware":2433,"json-rpc-engine":4772},function(){with(this)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=function({rpcUrl:e,chainId:t}){const r=(0,o.createFetchMiddleware)({rpcUrl:e}),n=(0,o.providerFromMiddleware)(r),i=new a.PollingBlockTracker(l(l({},h),{},{provider:n}));return{networkMiddleware:(0,s.mergeMiddleware)([...f?[(0,s.createAsyncMiddleware)((async(e,t,r)=>("eth_estimateGas"===e.method&&await new Promise((e=>setTimeout(e,2*u.SECOND))),r())))]:[],d(t),(0,o.createBlockRefRewriteMiddleware)({blockTracker:i}),(0,o.createBlockCacheMiddleware)({blockTracker:i}),(0,o.createInflightCacheMiddleware)(),(0,o.createBlockTrackerInspectorMiddleware)({blockTracker:i}),r]),blockTracker:i}};var i=n(e("@babel/runtime/helpers/defineProperty")),s=e("json-rpc-engine"),o=e("eth-json-rpc-middleware"),a=e("eth-block-tracker"),u=e("../../../../shared/constants/time");function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const f=t.env.IN_TEST,h=f?{pollingInterval:u.SECOND}:{};function d(e){return(t,r,n,i)=>"eth_chainId"===t.method?(r.result=e,i()):n()}}).call(this)}).call(this,e("_process"))}}},{package:"<root>",file:"/Users/mac/code/a-mises/metamask-extension/app/scripts/controllers/network/createJsonRpcClient.js"}],[18,{"../../../../shared/constants/network":6254,"@babel/runtime/helpers/interopRequireDefault":200,"eth-block-tracker":2388,"eth-json-rpc-infura":2427,"eth-json-rpc-middleware":2433,"json-rpc-engine":4772},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=function({network:e,projectId:t}){const r=(0,o.default)({network:e,projectId:t,maxAttempts:5,source:"metamask"}),n=(0,s.providerFromMiddleware)(r),u=new a.PollingBlockTracker({provider:n});return{networkMiddleware:(0,i.mergeMiddleware)([c({network:e}),(0,s.createBlockCacheMiddleware)({blockTracker:u}),(0,s.createInflightCacheMiddleware)(),(0,s.createBlockRefMiddleware)({blockTracker:u,provider:n}),(0,s.createRetryOnEmptyMiddleware)({blockTracker:u,provider:n}),(0,s.createBlockTrackerInspectorMiddleware)({blockTracker:u}),r]),blockTracker:u}};var i=e("json-rpc-engine"),s=e("eth-json-rpc-middleware"),o=n(e("eth-json-rpc-infura")),a=e("eth-block-tracker"),u=e("../../../../shared/constants/network");function c({network:e}){if(!u.NETWORK_TYPE_TO_ID_MAP[e])throw new Error(`createInfuraClient - unknown network "${e}"`);const{chainId:t,networkId:r}=u.NETWORK_TYPE_TO_ID_MAP[e];return(0,i.createScaffoldMiddleware)({eth_chainId:t,net_version:r})}}}},{package:"<root>",file:"/Users/mac/code/a-mises/metamask-extension/app/scripts/controllers/network/createInfuraClient.js"}],[1329,{},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CHAIN_IDS=r.API_BASE_URL=void 0,r.API_BASE_URL="https://transaction.metaswap.codefi.network",r.CHAIN_IDS={ETHEREUM:"0x1",RINKEBY:"0x4",BSC:"0x38"}}}},{package:"@metamask/smart-transactions-controller",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/smart-transactions-controller/dist/constants.js"}],[1331,{},function(){with(this)return function(){"use strict";return function(e,t,r){var n,i;Object.defineProperty(r,"__esModule",{value:!0}),r.cancellationReasonToStatusMap=r.SmartTransactionStatuses=r.SmartTransactionCancellationReason=r.SmartTransactionMinedTx=r.APIType=void 0,function(e){e[e.GET_FEES=0]="GET_FEES",e[e.ESTIMATE_GAS=1]="ESTIMATE_GAS",e[e.SUBMIT_TRANSACTIONS=2]="SUBMIT_TRANSACTIONS",e[e.CANCEL=3]="CANCEL",e[e.BATCH_STATUS=4]="BATCH_STATUS",e[e.LIVENESS=5]="LIVENESS"}(r.APIType||(r.APIType={})),function(e){e.NOT_MINED="not_mined",e.SUCCESS="success",e.CANCELLED="cancelled",e.REVERTED="reverted",e.UNKNOWN="unknown"}(r.SmartTransactionMinedTx||(r.SmartTransactionMinedTx={})),function(e){e.WOULD_REVERT="would_revert",e.TOO_CHEAP="too_cheap",e.DEADLINE_MISSED="deadline_missed",e.INVALID_NONCE="invalid_nonce",e.USER_CANCELLED="user_cancelled",e.NOT_CANCELLED="not_cancelled"}(n=r.SmartTransactionCancellationReason||(r.SmartTransactionCancellationReason={})),function(e){e.PENDING="pending",e.SUCCESS="success",e.REVERTED="reverted",e.UNKNOWN="unknown",e.CANCELLED="cancelled",e.CANCELLED_WOULD_REVERT="cancelled_would_revert",e.CANCELLED_TOO_CHEAP="cancelled_too_cheap",e.CANCELLED_DEADLINE_MISSED="cancelled_deadline_missed",e.CANCELLED_INVALID_NONCE="cancelled_invalid_nonce",e.CANCELLED_USER_CANCELLED="cancelled_user_cancelled",e.RESOLVED="resolved"}(i=r.SmartTransactionStatuses||(r.SmartTransactionStatuses={})),r.cancellationReasonToStatusMap={[n.WOULD_REVERT]:i.CANCELLED_WOULD_REVERT,[n.TOO_CHEAP]:i.CANCELLED_TOO_CHEAP,[n.DEADLINE_MISSED]:i.CANCELLED_DEADLINE_MISSED,[n.INVALID_NONCE]:i.CANCELLED_INVALID_NONCE,[n.USER_CANCELLED]:i.CANCELLED_USER_CANCELLED}}}},{package:"@metamask/smart-transactions-controller",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/smart-transactions-controller/dist/types.js"}],[1333,{},function(){with(this)return function(){"use strict";return function(e,t,r){!function(e){var r,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,s=Math.floor,o="[BigNumber Error] ",a=o+"Number primitive has more than 15 significant digits: ",u=1e14,c=14,l=9007199254740991,f=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],h=1e7,d=1e9;function p(e){var t=0|e;return e>0||e===t?t:t-1}function m(e){for(var t,r,n=1,i=e.length,s=e[0]+"";n<i;){for(t=e[n++]+"",r=c-t.length;r--;t="0"+t);s+=t}for(i=s.length;48===s.charCodeAt(--i););return s.slice(0,i+1||1)}function y(e,t){var r,n,i=e.c,s=t.c,o=e.s,a=t.s,u=e.e,c=t.e;if(!o||!a)return null;if(r=i&&!i[0],n=s&&!s[0],r||n)return r?n?0:-a:o;if(o!=a)return o;if(r=o<0,n=u==c,!i||!s)return n?0:!i^r?1:-1;if(!n)return u>c^r?1:-1;for(a=(u=i.length)<(c=s.length)?u:c,o=0;o<a;o++)if(i[o]!=s[o])return i[o]>s[o]^r?1:-1;return u==c?0:u>c^r?1:-1}function g(e,t,r,n){if(e<t||e>r||e!==s(e))throw Error(o+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function v(e){var t=e.c.length-1;return p(e.e/c)==t&&e.c[t]%2!=0}function b(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function _(e,t,r){var n,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else if(++t>(n=e.length)){for(i=r,t-=n;--t;i+=r);e+=i}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}r=function e(t){var r,w,E,k,A,S,x,I,T,P,N=H.prototype={constructor:H,toString:null,valueOf:null},C=new H(1),R=20,O=4,M=-7,D=21,L=-1e7,B=1e7,U=!1,j=1,K=0,F={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},V="0123456789abcdefghijklmnopqrstuvwxyz";function H(e,t){var r,i,o,u,f,h,d,p,m=this;if(!(m instanceof H))return new H(e,t);if(null==t){if(e&&!0===e._isBigNumber)return m.s=e.s,void(!e.c||e.e>B?m.c=m.e=null:e.e<L?m.c=[m.e=0]:(m.e=e.e,m.c=e.c.slice()));if((h="number"==typeof e)&&0*e==0){if(m.s=1/e<0?(e=-e,-1):1,e===~~e){for(u=0,f=e;f>=10;f/=10,u++);return void(u>B?m.c=m.e=null:(m.e=u,m.c=[e]))}p=String(e)}else{if(!n.test(p=String(e)))return E(m,p,h);m.s=45==p.charCodeAt(0)?(p=p.slice(1),-1):1}(u=p.indexOf("."))>-1&&(p=p.replace(".","")),(f=p.search(/e/i))>0?(u<0&&(u=f),u+=+p.slice(f+1),p=p.substring(0,f)):u<0&&(u=p.length)}else{if(g(t,2,V.length,"Base"),10==t)return W(m=new H(e),R+m.e+1,O);if(p=String(e),h="number"==typeof e){if(0*e!=0)return E(m,p,h,t);if(m.s=1/e<0?(p=p.slice(1),-1):1,H.DEBUG&&p.replace(/^0\.0*|\./,"").length>15)throw Error(a+e)}else m.s=45===p.charCodeAt(0)?(p=p.slice(1),-1):1;for(r=V.slice(0,t),u=f=0,d=p.length;f<d;f++)if(r.indexOf(i=p.charAt(f))<0){if("."==i){if(f>u){u=d;continue}}else if(!o&&(p==p.toUpperCase()&&(p=p.toLowerCase())||p==p.toLowerCase()&&(p=p.toUpperCase()))){o=!0,f=-1,u=0;continue}return E(m,String(e),h,t)}h=!1,(u=(p=w(p,t,10,m.s)).indexOf("."))>-1?p=p.replace(".",""):u=p.length}for(f=0;48===p.charCodeAt(f);f++);for(d=p.length;48===p.charCodeAt(--d););if(p=p.slice(f,++d)){if(d-=f,h&&H.DEBUG&&d>15&&(e>l||e!==s(e)))throw Error(a+m.s*e);if((u=u-f-1)>B)m.c=m.e=null;else if(u<L)m.c=[m.e=0];else{if(m.e=u,m.c=[],f=(u+1)%c,u<0&&(f+=c),f<d){for(f&&m.c.push(+p.slice(0,f)),d-=c;f<d;)m.c.push(+p.slice(f,f+=c));f=c-(p=p.slice(f)).length}else f-=d;for(;f--;p+="0");m.c.push(+p)}}else m.c=[m.e=0]}function G(e,t,r,n){var i,s,o,a,u;if(null==r?r=O:g(r,0,8),!e.c)return e.toString();if(i=e.c[0],o=e.e,null==t)u=m(e.c),u=1==n||2==n&&(o<=M||o>=D)?b(u,o):_(u,o,"0");else if(s=(e=W(new H(e),t,r)).e,a=(u=m(e.c)).length,1==n||2==n&&(t<=s||s<=M)){for(;a<t;u+="0",a++);u=b(u,s)}else if(t-=o,u=_(u,s,"0"),s+1>a){if(--t>0)for(u+=".";t--;u+="0");}else if((t+=s-a)>0)for(s+1==a&&(u+=".");t--;u+="0");return e.s<0&&i?"-"+u:u}function q(e,t){for(var r,n=1,i=new H(e[0]);n<e.length;n++){if(!(r=new H(e[n])).s){i=r;break}t.call(i,r)&&(i=r)}return i}function z(e,t,r){for(var n=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,n++);return(r=n+r*c-1)>B?e.c=e.e=null:r<L?e.c=[e.e=0]:(e.e=r,e.c=t),e}function W(e,t,r,n){var o,a,l,h,d,p,m,y=e.c,g=f;if(y){e:{for(o=1,h=y[0];h>=10;h/=10,o++);if((a=t-o)<0)a+=c,l=t,m=(d=y[p=0])/g[o-l-1]%10|0;else if((p=i((a+1)/c))>=y.length){if(!n)break e;for(;y.length<=p;y.push(0));d=m=0,o=1,l=(a%=c)-c+1}else{for(d=h=y[p],o=1;h>=10;h/=10,o++);m=(l=(a%=c)-c+o)<0?0:d/g[o-l-1]%10|0}if(n=n||t<0||null!=y[p+1]||(l<0?d:d%g[o-l-1]),n=r<4?(m||n)&&(0==r||r==(e.s<0?3:2)):m>5||5==m&&(4==r||n||6==r&&(a>0?l>0?d/g[o-l]:0:y[p-1])%10&1||r==(e.s<0?8:7)),t<1||!y[0])return y.length=0,n?(t-=e.e+1,y[0]=g[(c-t%c)%c],e.e=-t||0):y[0]=e.e=0,e;if(0==a?(y.length=p,h=1,p--):(y.length=p+1,h=g[c-a],y[p]=l>0?s(d/g[o-l]%g[l])*h:0),n)for(;;){if(0==p){for(a=1,l=y[0];l>=10;l/=10,a++);for(l=y[0]+=h,h=1;l>=10;l/=10,h++);a!=h&&(e.e++,y[0]==u&&(y[0]=1));break}if(y[p]+=h,y[p]!=u)break;y[p--]=0,h=1}for(a=y.length;0===y[--a];y.pop());}e.e>B?e.c=e.e=null:e.e<L&&(e.c=[e.e=0])}return e}function Y(e){var t,r=e.e;return null===r?e.toString():(t=m(e.c),t=r<=M||r>=D?b(t,r):_(t,r,"0"),e.s<0?"-"+t:t)}return H.clone=e,H.ROUND_UP=0,H.ROUND_DOWN=1,H.ROUND_CEIL=2,H.ROUND_FLOOR=3,H.ROUND_HALF_UP=4,H.ROUND_HALF_DOWN=5,H.ROUND_HALF_EVEN=6,H.ROUND_HALF_CEIL=7,H.ROUND_HALF_FLOOR=8,H.EUCLID=9,H.config=H.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(o+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(g(r=e[t],0,d,t),R=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(g(r=e[t],0,8,t),O=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(g(r[0],-d,0,t),g(r[1],0,d,t),M=r[0],D=r[1]):(g(r,-d,d,t),M=-(D=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)g(r[0],-d,-1,t),g(r[1],1,d,t),L=r[0],B=r[1];else{if(g(r,-d,d,t),!r)throw Error(o+t+" cannot be zero: "+r);L=-(B=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(o+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw U=!r,Error(o+"crypto unavailable");U=r}else U=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(g(r=e[t],0,9,t),j=r),e.hasOwnProperty(t="POW_PRECISION")&&(g(r=e[t],0,d,t),K=r),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(o+t+" not an object: "+r);F=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(o+t+" invalid: "+r);V=r}}return{DECIMAL_PLACES:R,ROUNDING_MODE:O,EXPONENTIAL_AT:[M,D],RANGE:[L,B],CRYPTO:U,MODULO_MODE:j,POW_PRECISION:K,FORMAT:F,ALPHABET:V}},H.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!H.DEBUG)return!0;var t,r,n=e.c,i=e.e,a=e.s;e:if("[object Array]"=={}.toString.call(n)){if((1===a||-1===a)&&i>=-d&&i<=d&&i===s(i)){if(0===n[0]){if(0===i&&1===n.length)return!0;break e}if((t=(i+1)%c)<1&&(t+=c),String(n[0]).length==t){for(t=0;t<n.length;t++)if((r=n[t])<0||r>=u||r!==s(r))break e;if(0!==r)return!0}}}else if(null===n&&null===i&&(null===a||1===a||-1===a))return!0;throw Error(o+"Invalid BigNumber: "+e)},H.maximum=H.max=function(){return q(arguments,N.lt)},H.minimum=H.min=function(){return q(arguments,N.gt)},H.random=(k=9007199254740992,A=Math.random()*k&2097151?function(){return s(Math.random()*k)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,r,n,a,u,l=0,h=[],p=new H(C);if(null==e?e=R:g(e,0,d),a=i(e/c),U)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(a*=2));l<a;)(u=131072*t[l]+(t[l+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),t[l]=r[0],t[l+1]=r[1]):(h.push(u%1e14),l+=2);l=a/2}else{if(!crypto.randomBytes)throw U=!1,Error(o+"crypto unavailable");for(t=crypto.randomBytes(a*=7);l<a;)(u=281474976710656*(31&t[l])+1099511627776*t[l+1]+4294967296*t[l+2]+16777216*t[l+3]+(t[l+4]<<16)+(t[l+5]<<8)+t[l+6])>=9e15?crypto.randomBytes(7).copy(t,l):(h.push(u%1e14),l+=7);l=a/7}if(!U)for(;l<a;)(u=A())<9e15&&(h[l++]=u%1e14);for(a=h[--l],e%=c,a&&e&&(u=f[c-e],h[l]=s(a/u)*u);0===h[l];h.pop(),l--);if(l<0)h=[n=0];else{for(n=-1;0===h[0];h.splice(0,1),n-=c);for(l=1,u=h[0];u>=10;u/=10,l++);l<c&&(n-=c-l)}return p.e=n,p.c=h,p}),H.sum=function(){for(var e=1,t=arguments,r=new H(t[0]);e<t.length;)r=r.plus(t[e++]);return r},w=function(){var e="0123456789";function t(e,t,r,n){for(var i,s,o=[0],a=0,u=e.length;a<u;){for(s=o.length;s--;o[s]*=t);for(o[0]+=n.indexOf(e.charAt(a++)),i=0;i<o.length;i++)o[i]>r-1&&(null==o[i+1]&&(o[i+1]=0),o[i+1]+=o[i]/r|0,o[i]%=r)}return o.reverse()}return function(n,i,s,o,a){var u,c,l,f,h,d,p,y,g=n.indexOf("."),v=R,b=O;for(g>=0&&(f=K,K=0,n=n.replace(".",""),d=(y=new H(i)).pow(n.length-g),K=f,y.c=t(_(m(d.c),d.e,"0"),10,s,e),y.e=y.c.length),l=f=(p=t(n,i,s,a?(u=V,e):(u=e,V))).length;0==p[--f];p.pop());if(!p[0])return u.charAt(0);if(g<0?--l:(d.c=p,d.e=l,d.s=o,p=(d=r(d,y,v,b,s)).c,h=d.r,l=d.e),g=p[c=l+v+1],f=s/2,h=h||c<0||null!=p[c+1],h=b<4?(null!=g||h)&&(0==b||b==(d.s<0?3:2)):g>f||g==f&&(4==b||h||6==b&&1&p[c-1]||b==(d.s<0?8:7)),c<1||!p[0])n=h?_(u.charAt(1),-v,u.charAt(0)):u.charAt(0);else{if(p.length=c,h)for(--s;++p[--c]>s;)p[c]=0,c||(++l,p=[1].concat(p));for(f=p.length;!p[--f];);for(g=0,n="";g<=f;n+=u.charAt(p[g++]));n=_(n,l,u.charAt(0))}return n}}(),r=function(){function e(e,t,r){var n,i,s,o,a=0,u=e.length,c=t%h,l=t/h|0;for(e=e.slice();u--;)a=((i=c*(s=e[u]%h)+(n=l*s+(o=e[u]/h|0)*c)%h*h+a)/r|0)+(n/h|0)+l*o,e[u]=i%r;return a&&(e=[a].concat(e)),e}function t(e,t,r,n){var i,s;if(r!=n)s=r>n?1:-1;else for(i=s=0;i<r;i++)if(e[i]!=t[i]){s=e[i]>t[i]?1:-1;break}return s}function r(e,t,r,n){for(var i=0;r--;)e[r]-=i,i=e[r]<t[r]?1:0,e[r]=i*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,i,o,a,l){var f,h,d,m,y,g,v,b,_,w,E,k,A,S,x,I,T,P=n.s==i.s?1:-1,N=n.c,C=i.c;if(!(N&&N[0]&&C&&C[0]))return new H(n.s&&i.s&&(N?!C||N[0]!=C[0]:C)?N&&0==N[0]||!C?0*P:P/0:NaN);for(_=(b=new H(P)).c=[],P=o+(h=n.e-i.e)+1,l||(l=u,h=p(n.e/c)-p(i.e/c),P=P/c|0),d=0;C[d]==(N[d]||0);d++);if(C[d]>(N[d]||0)&&h--,P<0)_.push(1),m=!0;else{for(S=N.length,I=C.length,d=0,P+=2,(y=s(l/(C[0]+1)))>1&&(C=e(C,y,l),N=e(N,y,l),I=C.length,S=N.length),A=I,E=(w=N.slice(0,I)).length;E<I;w[E++]=0);T=C.slice(),T=[0].concat(T),x=C[0],C[1]>=l/2&&x++;do{if(y=0,(f=t(C,w,I,E))<0){if(k=w[0],I!=E&&(k=k*l+(w[1]||0)),(y=s(k/x))>1)for(y>=l&&(y=l-1),v=(g=e(C,y,l)).length,E=w.length;1==t(g,w,v,E);)y--,r(g,I<v?T:C,v,l),v=g.length,f=1;else 0==y&&(f=y=1),v=(g=C.slice()).length;if(v<E&&(g=[0].concat(g)),r(w,g,E,l),E=w.length,-1==f)for(;t(C,w,I,E)<1;)y++,r(w,I<E?T:C,E,l),E=w.length}else 0===f&&(y++,w=[0]);_[d++]=y,w[0]?w[E++]=N[A]||0:(w=[N[A]],E=1)}while((A++<S||null!=w[0])&&P--);m=null!=w[0],_[0]||_.splice(0,1)}if(l==u){for(d=1,P=_[0];P>=10;P/=10,d++);W(b,o+(b.e=d+h*c-1)+1,a,m)}else b.e=h,b.r=+m;return b}}(),S=/^(-?)0([xbo])(?=\w[\w.]*$)/i,x=/^([^.]+)\.$/,I=/^\.([^.]+)$/,T=/^-?(Infinity|NaN)$/,P=/^\s*\+(?=[\w.])|^\s+|\s+$/g,E=function(e,t,r,n){var i,s=r?t:t.replace(P,"");if(T.test(s))e.s=isNaN(s)?null:s<0?-1:1;else{if(!r&&(s=s.replace(S,(function(e,t,r){return i="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=i?e:t})),n&&(i=n,s=s.replace(x,"$1").replace(I,"0.$1")),t!=s))return new H(s,i);if(H.DEBUG)throw Error(o+"Not a"+(n?" base "+n:"")+" number: "+t);e.s=null}e.c=e.e=null},N.absoluteValue=N.abs=function(){var e=new H(this);return e.s<0&&(e.s=1),e},N.comparedTo=function(e,t){return y(this,new H(e,t))},N.decimalPlaces=N.dp=function(e,t){var r,n,i,s=this;if(null!=e)return g(e,0,d),null==t?t=O:g(t,0,8),W(new H(s),e+s.e+1,t);if(!(r=s.c))return null;if(n=((i=r.length-1)-p(this.e/c))*c,i=r[i])for(;i%10==0;i/=10,n--);return n<0&&(n=0),n},N.dividedBy=N.div=function(e,t){return r(this,new H(e,t),R,O)},N.dividedToIntegerBy=N.idiv=function(e,t){return r(this,new H(e,t),0,1)},N.exponentiatedBy=N.pow=function(e,t){var r,n,a,u,l,f,h,d,p=this;if((e=new H(e)).c&&!e.isInteger())throw Error(o+"Exponent not an integer: "+Y(e));if(null!=t&&(t=new H(t)),l=e.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!e.c||!e.c[0])return d=new H(Math.pow(+Y(p),l?2-v(e):+Y(e))),t?d.mod(t):d;if(f=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new H(NaN);(n=!f&&p.isInteger()&&t.isInteger())&&(p=p.mod(t))}else{if(e.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||l&&p.c[1]>=24e7:p.c[0]<8e13||l&&p.c[0]<=9999975e7)))return u=p.s<0&&v(e)?-0:0,p.e>-1&&(u=1/u),new H(f?1/u:u);K&&(u=i(K/c+2))}for(l?(r=new H(.5),f&&(e.s=1),h=v(e)):h=(a=Math.abs(+Y(e)))%2,d=new H(C);;){if(h){if(!(d=d.times(p)).c)break;u?d.c.length>u&&(d.c.length=u):n&&(d=d.mod(t))}if(a){if(0===(a=s(a/2)))break;h=a%2}else if(W(e=e.times(r),e.e+1,1),e.e>14)h=v(e);else{if(0===(a=+Y(e)))break;h=a%2}p=p.times(p),u?p.c&&p.c.length>u&&(p.c.length=u):n&&(p=p.mod(t))}return n?d:(f&&(d=C.div(d)),t?d.mod(t):u?W(d,K,O,undefined):d)},N.integerValue=function(e){var t=new H(this);return null==e?e=O:g(e,0,8),W(t,t.e+1,e)},N.isEqualTo=N.eq=function(e,t){return 0===y(this,new H(e,t))},N.isFinite=function(){return!!this.c},N.isGreaterThan=N.gt=function(e,t){return y(this,new H(e,t))>0},N.isGreaterThanOrEqualTo=N.gte=function(e,t){return 1===(t=y(this,new H(e,t)))||0===t},N.isInteger=function(){return!!this.c&&p(this.e/c)>this.c.length-2},N.isLessThan=N.lt=function(e,t){return y(this,new H(e,t))<0},N.isLessThanOrEqualTo=N.lte=function(e,t){return-1===(t=y(this,new H(e,t)))||0===t},N.isNaN=function(){return!this.s},N.isNegative=function(){return this.s<0},N.isPositive=function(){return this.s>0},N.isZero=function(){return!!this.c&&0==this.c[0]},N.minus=function(e,t){var r,n,i,s,o=this,a=o.s;if(t=(e=new H(e,t)).s,!a||!t)return new H(NaN);if(a!=t)return e.s=-t,o.plus(e);var l=o.e/c,f=e.e/c,h=o.c,d=e.c;if(!l||!f){if(!h||!d)return h?(e.s=-t,e):new H(d?o:NaN);if(!h[0]||!d[0])return d[0]?(e.s=-t,e):new H(h[0]?o:3==O?-0:0)}if(l=p(l),f=p(f),h=h.slice(),a=l-f){for((s=a<0)?(a=-a,i=h):(f=l,i=d),i.reverse(),t=a;t--;i.push(0));i.reverse()}else for(n=(s=(a=h.length)<(t=d.length))?a:t,a=t=0;t<n;t++)if(h[t]!=d[t]){s=h[t]<d[t];break}if(s&&(i=h,h=d,d=i,e.s=-e.s),(t=(n=d.length)-(r=h.length))>0)for(;t--;h[r++]=0);for(t=u-1;n>a;){if(h[--n]<d[n]){for(r=n;r&&!h[--r];h[r]=t);--h[r],h[n]+=u}h[n]-=d[n]}for(;0==h[0];h.splice(0,1),--f);return h[0]?z(e,h,f):(e.s=3==O?-1:1,e.c=[e.e=0],e)},N.modulo=N.mod=function(e,t){var n,i,s=this;return e=new H(e,t),!s.c||!e.s||e.c&&!e.c[0]?new H(NaN):!e.c||s.c&&!s.c[0]?new H(s):(9==j?(i=e.s,e.s=1,n=r(s,e,0,3),e.s=i,n.s*=i):n=r(s,e,0,j),(e=s.minus(n.times(e))).c[0]||1!=j||(e.s=s.s),e)},N.multipliedBy=N.times=function(e,t){var r,n,i,s,o,a,l,f,d,m,y,g,v,b,_,w=this,E=w.c,k=(e=new H(e,t)).c;if(!(E&&k&&E[0]&&k[0]))return!w.s||!e.s||E&&!E[0]&&!k||k&&!k[0]&&!E?e.c=e.e=e.s=null:(e.s*=w.s,E&&k?(e.c=[0],e.e=0):e.c=e.e=null),e;for(n=p(w.e/c)+p(e.e/c),e.s*=w.s,(l=E.length)<(m=k.length)&&(v=E,E=k,k=v,i=l,l=m,m=i),i=l+m,v=[];i--;v.push(0));for(b=u,_=h,i=m;--i>=0;){for(r=0,y=k[i]%_,g=k[i]/_|0,s=i+(o=l);s>i;)r=((f=y*(f=E[--o]%_)+(a=g*f+(d=E[o]/_|0)*y)%_*_+v[s]+r)/b|0)+(a/_|0)+g*d,v[s--]=f%b;v[s]=r}return r?++n:v.splice(0,1),z(e,v,n)},N.negated=function(){var e=new H(this);return e.s=-e.s||null,e},N.plus=function(e,t){var r,n=this,i=n.s;if(t=(e=new H(e,t)).s,!i||!t)return new H(NaN);if(i!=t)return e.s=-t,n.minus(e);var s=n.e/c,o=e.e/c,a=n.c,l=e.c;if(!s||!o){if(!a||!l)return new H(i/0);if(!a[0]||!l[0])return l[0]?e:new H(a[0]?n:0*i)}if(s=p(s),o=p(o),a=a.slice(),i=s-o){for(i>0?(o=s,r=l):(i=-i,r=a),r.reverse();i--;r.push(0));r.reverse()}for((i=a.length)-(t=l.length)<0&&(r=l,l=a,a=r,t=i),i=0;t;)i=(a[--t]=a[t]+l[t]+i)/u|0,a[t]=u===a[t]?0:a[t]%u;return i&&(a=[i].concat(a),++o),z(e,a,o)},N.precision=N.sd=function(e,t){var r,n,i,s=this;if(null!=e&&e!==!!e)return g(e,1,d),null==t?t=O:g(t,0,8),W(new H(s),e,t);if(!(r=s.c))return null;if(n=(i=r.length-1)*c+1,i=r[i]){for(;i%10==0;i/=10,n--);for(i=r[0];i>=10;i/=10,n++);}return e&&s.e+1>n&&(n=s.e+1),n},N.shiftedBy=function(e){return g(e,-9007199254740991,l),this.times("1e"+e)},N.squareRoot=N.sqrt=function(){var e,t,n,i,s,o=this,a=o.c,u=o.s,c=o.e,l=R+4,f=new H("0.5");if(1!==u||!a||!a[0])return new H(!u||u<0&&(!a||a[0])?NaN:a?o:1/0);if(0==(u=Math.sqrt(+Y(o)))||u==1/0?(((t=m(a)).length+c)%2==0&&(t+="0"),u=Math.sqrt(+t),c=p((c+1)/2)-(c<0||c%2),n=new H(t=u==1/0?"5e"+c:(t=u.toExponential()).slice(0,t.indexOf("e")+1)+c)):n=new H(u+""),n.c[0])for((u=(c=n.e)+l)<3&&(u=0);;)if(s=n,n=f.times(s.plus(r(o,s,l,1))),m(s.c).slice(0,u)===(t=m(n.c)).slice(0,u)){if(n.e<c&&--u,"9999"!=(t=t.slice(u-3,u+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(W(n,n.e+R+2,1),e=!n.times(n).eq(o));break}if(!i&&(W(s,s.e+R+2,0),s.times(s).eq(o))){n=s;break}l+=4,u+=4,i=1}return W(n,n.e+R+1,O,e)},N.toExponential=function(e,t){return null!=e&&(g(e,0,d),e++),G(this,e,t,1)},N.toFixed=function(e,t){return null!=e&&(g(e,0,d),e=e+this.e+1),G(this,e,t)},N.toFormat=function(e,t,r){var n,i=this;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=F;else if("object"!=typeof r)throw Error(o+"Argument not an object: "+r);if(n=i.toFixed(e,t),i.c){var s,a=n.split("."),u=+r.groupSize,c=+r.secondaryGroupSize,l=r.groupSeparator||"",f=a[0],h=a[1],d=i.s<0,p=d?f.slice(1):f,m=p.length;if(c&&(s=u,u=c,c=s,m-=s),u>0&&m>0){for(s=m%u||u,f=p.substr(0,s);s<m;s+=u)f+=l+p.substr(s,u);c>0&&(f+=l+p.slice(s)),d&&(f="-"+f)}n=h?f+(r.decimalSeparator||"")+((c=+r.fractionGroupSize)?h.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):h):f}return(r.prefix||"")+n+(r.suffix||"")},N.toFraction=function(e){var t,n,i,s,a,u,l,h,d,p,y,g,v=this,b=v.c;if(null!=e&&(!(l=new H(e)).isInteger()&&(l.c||1!==l.s)||l.lt(C)))throw Error(o+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+Y(l));if(!b)return new H(v);for(t=new H(C),d=n=new H(C),i=h=new H(C),g=m(b),a=t.e=g.length-v.e-1,t.c[0]=f[(u=a%c)<0?c+u:u],e=!e||l.comparedTo(t)>0?a>0?t:d:l,u=B,B=1/0,l=new H(g),h.c[0]=0;p=r(l,t,0,1),1!=(s=n.plus(p.times(i))).comparedTo(e);)n=i,i=s,d=h.plus(p.times(s=d)),h=s,t=l.minus(p.times(s=t)),l=s;return s=r(e.minus(n),i,0,1),h=h.plus(s.times(d)),n=n.plus(s.times(i)),h.s=d.s=v.s,y=r(d,i,a*=2,O).minus(v).abs().comparedTo(r(h,n,a,O).minus(v).abs())<1?[d,i]:[h,n],B=u,y},N.toNumber=function(){return+Y(this)},N.toPrecision=function(e,t){return null!=e&&g(e,1,d),G(this,e,t,2)},N.toString=function(e){var t,r=this,n=r.s,i=r.e;return null===i?n?(t="Infinity",n<0&&(t="-"+t)):t="NaN":(null==e?t=i<=M||i>=D?b(m(r.c),i):_(m(r.c),i,"0"):10===e?t=_(m((r=W(new H(r),R+i+1,O)).c),r.e,"0"):(g(e,2,V.length,"Base"),t=w(_(m(r.c),i,"0"),10,e,n,!0)),n<0&&r.c[0]&&(t="-"+t)),t},N.valueOf=N.toJSON=function(){return Y(this)},N._isBigNumber=!0,null!=t&&H.set(t),H}(),r.default=r.BigNumber=r,"function"==typeof define&&define.amd?define((function(){return r})):void 0!==t&&t.exports?t.exports=r:(e||(e="undefined"!=typeof self&&self?self:window),e.BigNumber=r)}(this)}}},{package:"bignumber.js",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/smart-transactions-controller/node_modules/bignumber.js/bignumber.js"}],[1332,{"./constants":1329,"./types":1331,"fast-json-patch":1337,lodash:5219},function(){with(this)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.handleFetch=r.getStxProcessingTime=r.snapshotFromTxMeta=r.replayHistory=r.generateHistoryEntry=r.calculateStatus=r.getAPIRequestURL=r.isSmartTransactionStatusResolved=r.isSmartTransactionPending=void 0;const i=n(e("fast-json-patch")),s=e("lodash"),o=e("./types"),a=e("./constants");r.isSmartTransactionPending=function(e){return e.status===o.SmartTransactionStatuses.PENDING};r.isSmartTransactionStatusResolved=e=>"uuid_not_found"===e,r.getAPIRequestURL=function(e,t){const r=parseInt(t,16);switch(e){case o.APIType.GET_FEES:return`${a.API_BASE_URL}/networks/${r}/getFees`;case o.APIType.ESTIMATE_GAS:return`${a.API_BASE_URL}/networks/${r}/estimateGas`;case o.APIType.SUBMIT_TRANSACTIONS:return`${a.API_BASE_URL}/networks/${r}/submitTransactions`;case o.APIType.CANCEL:return`${a.API_BASE_URL}/networks/${r}/cancel`;case o.APIType.BATCH_STATUS:return`${a.API_BASE_URL}/networks/${r}/batchStatus`;case o.APIType.LIVENESS:return`${a.API_BASE_URL}/networks/${r}/health`;default:throw new Error("Invalid APIType")}};r.calculateStatus=e=>{if(r.isSmartTransactionStatusResolved(e))return o.SmartTransactionStatuses.RESOLVED;const t=[o.SmartTransactionCancellationReason.WOULD_REVERT,o.SmartTransactionCancellationReason.TOO_CHEAP,o.SmartTransactionCancellationReason.DEADLINE_MISSED,o.SmartTransactionCancellationReason.INVALID_NONCE,o.SmartTransactionCancellationReason.USER_CANCELLED];if((null==e?void 0:e.minedTx)===o.SmartTransactionMinedTx.NOT_MINED){if(e.cancellationReason===o.SmartTransactionCancellationReason.NOT_CANCELLED)return o.SmartTransactionStatuses.PENDING;const r=t.findIndex((t=>t===e.cancellationReason))>-1;if(e.cancellationReason&&r)return o.cancellationReasonToStatusMap[e.cancellationReason]}else{if((null==e?void 0:e.minedTx)===o.SmartTransactionMinedTx.SUCCESS)return o.SmartTransactionStatuses.SUCCESS;if((null==e?void 0:e.minedTx)===o.SmartTransactionMinedTx.CANCELLED)return o.SmartTransactionStatuses.CANCELLED;if((null==e?void 0:e.minedTx)===o.SmartTransactionMinedTx.REVERTED)return o.SmartTransactionStatuses.REVERTED;if((null==e?void 0:e.minedTx)===o.SmartTransactionMinedTx.UNKNOWN)return o.SmartTransactionStatuses.UNKNOWN}return o.SmartTransactionStatuses.UNKNOWN},r.generateHistoryEntry=function(e,t,r){const n=i.default.compare(e,t);return n[0]&&(r&&(n[0].note=r),n[0].timestamp=Date.now()),n},r.replayHistory=function(e){return s.cloneDeep(e).reduce(((e,t)=>i.default.applyPatch(e,t).newDocument))},r.snapshotFromTxMeta=function(e){const t=Object.assign({},e);return delete t.history,s.cloneDeep(t)};r.getStxProcessingTime=e=>e?Math.round((Date.now()-e)/1e3):undefined,r.handleFetch=async function(e,t){const r=await fetch(e,t),n=await r.json();if(!r.ok){const{error:e,error_details:t}=n;throw console.log("response",r),new Error(`Fetch error:${JSON.stringify({status:r.status,type:e,message:t})}`)}return n}}}},{package:"@metamask/smart-transactions-controller",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/smart-transactions-controller/dist/utils.js"}],[5220,{"./_baseAssignValue":5075,"./_baseForOwn":5082,"./_baseIteratee":5098},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./_baseAssignValue"),i=e("./_baseForOwn"),s=e("./_baseIteratee");t.exports=function(e,t){var r={};return t=s(t,3),i(e,(function(e,i,s){n(r,i,t(e,i,s))})),r}}}},{package:"lodash",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/lodash/mapValues.js"}],[5195,{"./_baseClone":5076},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./_baseClone");t.exports=function(e){return n(e,5)}}}},{package:"lodash",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/lodash/cloneDeep.js"}],[2152,{bs58:2153,buffer:2105,"create-hash":2212},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("bs58"),i=e("create-hash");function s(e,t){var i;(Array.isArray(e)||e instanceof Uint8Array)&&(e=new r(e)),null!=t?("number"==typeof t&&(t=new r([t])),i=r.concat([t,e])):i=e;var s=u(i).slice(0,4),o=r.concat([i,s]);return n.encode(o)}function o(e,t){var i,s=n.decode(e),o=new r(s);if(null==t)i=0;else if("number"==typeof t&&(t=new r([t])),i=t.length,o.slice(0,i).toString("hex")!==t.toString("hex"))throw new Error("Invalid version");var a=o.slice(-4),c=o.length-4,l=o.slice(0,c),f=u(l).slice(0,4);if(a.toString("hex")!==f.toString("hex"))throw new Error("Invalid checksum");return l.slice(i)}function a(e,t){try{o(e,t)}catch(e){return!1}return!0}function u(e){var t=i("sha256").update(e).digest();return i("sha256").update(t).digest()}t.exports={encode:s,decode:o,isValid:a,createEncoder:function(e){return function(t){return s(t,e)}},createDecoder:function(e){return function(t){return o(t,e)}},createValidator:function(e){return function(t){return a(t,e)}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"coinstring",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/coinstring/lib/coinstring.js"}],[1109,{"./lib":1113,"./lib/elliptic":1112},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=e("./lib")(e("./lib/elliptic"))}}},{package:"secp256k1",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/secp256k1/elliptic.js"}],[1100,{assert:1714,"bn.js":2059,"create-hash":2212,"ethjs-util":1101,keccak:1103,rlp:5798,"safe-buffer":5800,secp256k1:1109},function(){with(this)return function(){"use strict";return function(e,t,r){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=e("keccak"),s=e("secp256k1"),o=e("assert"),a=e("rlp"),u=e("bn.js"),c=e("create-hash"),l=e("safe-buffer").Buffer;Object.assign(r,e("ethjs-util")),r.MAX_INTEGER=new u("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16),r.TWO_POW256=new u("10000000000000000000000000000000000000000000000000000000000000000",16),r.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",r.SHA3_NULL_S=r.KECCAK256_NULL_S,r.KECCAK256_NULL=l.from(r.KECCAK256_NULL_S,"hex"),r.SHA3_NULL=r.KECCAK256_NULL,r.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",r.SHA3_RLP_ARRAY_S=r.KECCAK256_RLP_ARRAY_S,r.KECCAK256_RLP_ARRAY=l.from(r.KECCAK256_RLP_ARRAY_S,"hex"),r.SHA3_RLP_ARRAY=r.KECCAK256_RLP_ARRAY,r.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",r.SHA3_RLP_S=r.KECCAK256_RLP_S,r.KECCAK256_RLP=l.from(r.KECCAK256_RLP_S,"hex"),r.SHA3_RLP=r.KECCAK256_RLP,r.BN=u,r.rlp=a,r.secp256k1=s,r.zeros=function(e){return l.allocUnsafe(e).fill(0)},r.zeroAddress=function(){var e=r.zeros(20);return r.bufferToHex(e)},r.setLengthLeft=r.setLength=function(e,t,n){var i=r.zeros(t);return e=r.toBuffer(e),n?e.length<t?(e.copy(i),i):e.slice(0,t):e.length<t?(e.copy(i,t-e.length),i):e.slice(-t)},r.setLengthRight=function(e,t){return r.setLength(e,t,!0)},r.unpad=r.stripZeros=function(e){for(var t=(e=r.stripHexPrefix(e))[0];e.length>0&&"0"===t.toString();)t=(e=e.slice(1))[0];return e},r.toBuffer=function(e){if(!l.isBuffer(e))if(Array.isArray(e))e=l.from(e);else if("string"==typeof e)e=r.isHexString(e)?l.from(r.padToEven(r.stripHexPrefix(e)),"hex"):l.from(e);else if("number"==typeof e)e=r.intToBuffer(e);else if(null===e||e===undefined)e=l.allocUnsafe(0);else if(u.isBN(e))e=e.toArrayLike(l);else{if(!e.toArray)throw new Error("invalid type");e=l.from(e.toArray())}return e},r.bufferToInt=function(e){return new u(r.toBuffer(e)).toNumber()},r.bufferToHex=function(e){return"0x"+(e=r.toBuffer(e)).toString("hex")},r.fromSigned=function(e){return new u(e).fromTwos(256)},r.toUnsigned=function(e){return l.from(e.toTwos(256).toArray())},r.keccak=function(e,t){return e=r.toBuffer(e),t||(t=256),i("keccak"+t).update(e).digest()},r.keccak256=function(e){return r.keccak(e)},r.sha3=r.keccak,r.sha256=function(e){return e=r.toBuffer(e),c("sha256").update(e).digest()},r.ripemd160=function(e,t){e=r.toBuffer(e);var n=c("rmd160").update(e).digest();return!0===t?r.setLength(n,32):n},r.rlphash=function(e){return r.keccak(a.encode(e))},r.isValidPrivate=function(e){return s.privateKeyVerify(e)},r.isValidPublic=function(e,t){return 64===e.length?s.publicKeyVerify(l.concat([l.from([4]),e])):!!t&&s.publicKeyVerify(e)},r.pubToAddress=r.publicToAddress=function(e,t){return e=r.toBuffer(e),t&&64!==e.length&&(e=s.publicKeyConvert(e,!1).slice(1)),o(64===e.length),r.keccak(e).slice(-20)};var f=r.privateToPublic=function(e){return e=r.toBuffer(e),s.publicKeyCreate(e,!1).slice(1)};r.importPublic=function(e){return 64!==(e=r.toBuffer(e)).length&&(e=s.publicKeyConvert(e,!1).slice(1)),e},r.ecsign=function(e,t){var r=s.sign(e,t),n={};return n.r=r.signature.slice(0,32),n.s=r.signature.slice(32,64),n.v=r.recovery+27,n},r.hashPersonalMessage=function(e){var t=r.toBuffer("Ethereum Signed Message:\n"+e.length.toString());return r.keccak(l.concat([t,e]))},r.ecrecover=function(e,t,n,i){var o=l.concat([r.setLength(n,32),r.setLength(i,32)],64),a=t-27;if(0!==a&&1!==a)throw new Error("Invalid signature v value");var u=s.recover(e,o,a);return s.publicKeyConvert(u,!1).slice(1)},r.toRpcSig=function(e,t,n){if(27!==e&&28!==e)throw new Error("Invalid recovery id");return r.bufferToHex(l.concat([r.setLengthLeft(t,32),r.setLengthLeft(n,32),r.toBuffer(e-27)]))},r.fromRpcSig=function(e){if(65!==(e=r.toBuffer(e)).length)throw new Error("Invalid signature length");var t=e[64];return t<27&&(t+=27),{v:t,r:e.slice(0,32),s:e.slice(32,64)}},r.privateToAddress=function(e){return r.publicToAddress(f(e))},r.isValidAddress=function(e){return/^0x[0-9a-fA-F]{40}$/.test(e)},r.isZeroAddress=function(e){return r.zeroAddress()===r.addHexPrefix(e)},r.toChecksumAddress=function(e){e=r.stripHexPrefix(e).toLowerCase();for(var t=r.keccak(e).toString("hex"),n="0x",i=0;i<e.length;i++)parseInt(t[i],16)>=8?n+=e[i].toUpperCase():n+=e[i];return n},r.isValidChecksumAddress=function(e){return r.isValidAddress(e)&&r.toChecksumAddress(e)===e},r.generateAddress=function(e,t){return e=r.toBuffer(e),t=(t=new u(t)).isZero()?null:l.from(t.toArray()),r.rlphash([e,t]).slice(-20)},r.isPrecompiled=function(e){var t=r.unpad(e);return 1===t.length&&t[0]>=1&&t[0]<=8},r.addHexPrefix=function(e){return"string"!=typeof e||r.isHexPrefixed(e)?e:"0x"+e},r.isValidSignature=function(e,t,r,n){var i=new u("7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0",16),s=new u("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",16);return 32===t.length&&32===r.length&&((27===e||28===e)&&(t=new u(t),r=new u(r),!(t.isZero()||t.gt(s)||r.isZero()||r.gt(s))&&(!1!==n||1!==new u(r).cmp(i))))},r.baToJSON=function(e){if(l.isBuffer(e))return"0x"+e.toString("hex");if(e instanceof Array){for(var t=[],n=0;n<e.length;n++)t.push(r.baToJSON(e[n]));return t}},r.defineProperties=function(e,t,i){if(e.raw=[],e._fields=[],e.toJSON=function(t){if(t){var n={};return e._fields.forEach((function(t){n[t]="0x"+e[t].toString("hex")})),n}return r.baToJSON(this.raw)},e.serialize=function(){return a.encode(e.raw)},t.forEach((function(t,n){function i(){return e.raw[n]}function s(i){"00"!==(i=r.toBuffer(i)).toString("hex")||t.allowZero||(i=l.allocUnsafe(0)),t.allowLess&&t.length?(i=r.stripZeros(i),o(t.length>=i.length,"The field "+t.name+" must not have more "+t.length+" bytes")):t.allowZero&&0===i.length||!t.length||o(t.length===i.length,"The field "+t.name+" must have byte length of "+t.length),e.raw[n]=i}e._fields.push(t.name),Object.defineProperty(e,t.name,{enumerable:!0,configurable:!0,get:i,set:s}),t.default&&(e[t.name]=t.default),t.alias&&Object.defineProperty(e,t.alias,{enumerable:!1,configurable:!0,set:s,get:i})})),i)if("string"==typeof i&&(i=l.from(r.stripHexPrefix(i),"hex")),l.isBuffer(i)&&(i=a.decode(i)),Array.isArray(i)){if(i.length>e._fields.length)throw new Error("wrong number of fields in data");i.forEach((function(t,n){e[e._fields[n]]=r.toBuffer(t)}))}else{if("object"!==(void 0===i?"undefined":n(i)))throw new Error("invalid data");var s=Object.keys(i);t.forEach((function(t){-1!==s.indexOf(t.name)&&(e[t.name]=i[t.name]),-1!==s.indexOf(t.alias)&&(e[t.alias]=i[t.alias])}))}}}}},{package:"ethereumjs-util",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/eth-sig-util/node_modules/ethereumjs-util/dist/index.js"}],[2439,{"json-stable-stringify":4776},function(){with(this)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.cacheTypeForPayload=r.blockTagParamIndex=r.paramsWithoutBlockTag=r.blockTagForPayload=r.canCache=r.cacheIdentifierForPayload=void 0;const i=n(e("json-stable-stringify"));function s(e){return"never"!==u(e)}function o(e){if(!e.params)return[];const t=a(e);return t===undefined||t>=e.params.length?e.params:"eth_getBlockByNumber"===e.method?e.params.slice(1):e.params.slice(0,t)}function a(e){switch(e.method){case"eth_getStorageAt":return 2;case"eth_getBalance":case"eth_getCode":case"eth_getTransactionCount":case"eth_call":return 1;case"eth_getBlockByNumber":return 0;default:return undefined}}function u(e){switch(e.method){case"web3_clientVersion":case"web3_sha3":case"eth_protocolVersion":case"eth_getBlockTransactionCountByHash":case"eth_getUncleCountByBlockHash":case"eth_getCode":case"eth_getBlockByHash":case"eth_getTransactionByHash":case"eth_getTransactionByBlockHashAndIndex":case"eth_getTransactionReceipt":case"eth_getUncleByBlockHashAndIndex":case"eth_getCompilers":case"eth_compileLLL":case"eth_compileSolidity":case"eth_compileSerpent":case"shh_version":case"test_permaCache":return"perma";case"eth_getBlockByNumber":case"eth_getBlockTransactionCountByNumber":case"eth_getUncleCountByBlockNumber":case"eth_getTransactionByBlockNumberAndIndex":case"eth_getUncleByBlockNumberAndIndex":case"test_forkCache":return"fork";case"eth_gasPrice":case"eth_blockNumber":case"eth_getBalance":case"eth_getStorageAt":case"eth_getTransactionCount":case"eth_call":case"eth_estimateGas":case"eth_getFilterLogs":case"eth_getLogs":case"test_blockCache":return"block";default:return"never"}}r.cacheIdentifierForPayload=function(e,t){var r;const n=t?o(e):null!==(r=e.params)&&void 0!==r?r:[];return s(e)?`${e.method}:${(0,i.default)(n)}`:null},r.canCache=s,r.blockTagForPayload=function(e){if(!e.params)return undefined;const t=a(e);return t===undefined||t>=e.params.length?undefined:e.params[t]},r.paramsWithoutBlockTag=o,r.blockTagParamIndex=a,r.cacheTypeForPayload=u}}},{package:"eth-json-rpc-middleware",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/eth-json-rpc-middleware/dist/utils/cache.js"}],[2462,{},function(){with(this)return function(){"use strict";return function(e,t,r){const n=(e,t)=>function(){const r=t.promiseModule,n=new Array(arguments.length);for(let e=0;e<arguments.length;e++)n[e]=arguments[e];return new r(((r,i)=>{t.errorFirst?n.push((function(e,n){if(t.multiArgs){const t=new Array(arguments.length-1);for(let e=1;e<arguments.length;e++)t[e-1]=arguments[e];e?(t.unshift(e),i(t)):r(t)}else e?i(e):r(n)})):n.push((function(e){if(t.multiArgs){const e=new Array(arguments.length-1);for(let t=0;t<arguments.length;t++)e[t]=arguments[t];r(e)}else r(e)})),e.apply(this,n)}))};t.exports=(e,t)=>{t=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},t);const r=e=>{const r=t=>"string"==typeof t?e===t:t.test(e);return t.include?t.include.some(r):!t.exclude.some(r)};let i;i="function"==typeof e?function(){return t.excludeMain?e.apply(this,arguments):n(e,t).apply(this,arguments)}:Object.create(Object.getPrototypeOf(e));for(const s in e){const o=e[s];i[s]="function"==typeof o&&r(s)?n(o,t):o}return i}}}},{package:"pify",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/eth-json-rpc-middleware/node_modules/pify/index.js"}],[2441,{"ethereumjs-abi":2442,"ethereumjs-util":2454},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("ethereumjs-util"),i=e("ethereumjs-abi");function s(e){const t=new Error("Expect argument to be non-empty array");if("object"!=typeof e||!e.length)throw t;const r=e.map((function(e){return"bytes"===e.type?n.toBuffer(e.value):e.value})),s=e.map((function(e){return e.type})),o=e.map((function(e){if(!e.name)throw t;return e.type+" "+e.name}));return i.soliditySHA3(["bytes32","bytes32"],[i.soliditySHA3(new Array(e.length).fill("string"),o),i.soliditySHA3(s,r)])}function o(e,t){const r=n.toBuffer(t),i=n.fromRpcSig(r);return n.ecrecover(e,i.v,i.r,i.s)}function a(e){const t=n.toBuffer(e.data);return o(n.hashPersonalMessage(t),e.sig)}function u(e,t){for(var r=""+e;r.length<t;)r="0"+r;return r}t.exports={concatSig:function(e,t,r){const i=n.fromSigned(t),s=n.fromSigned(r),o=n.bufferToInt(e),a=u(n.toUnsigned(i).toString("hex"),64),c=u(n.toUnsigned(s).toString("hex"),64),l=n.stripHexPrefix(n.intToHex(o));return n.addHexPrefix(a.concat(c,l)).toString("hex")},normalize:function(e){if(e){if("number"==typeof e){const t=n.toBuffer(e);e=n.bufferToHex(t)}if("string"!=typeof e){var t="eth-sig-util.normalize() requires hex string or integer input.";throw new Error(t+=" received "+typeof e+": "+e)}return n.addHexPrefix(e.toLowerCase())}},personalSign:function(e,t){var r=n.toBuffer(t.data),i=n.hashPersonalMessage(r),s=n.ecsign(i,e);return n.bufferToHex(this.concatSig(s.v,s.r,s.s))},recoverPersonalSignature:function(e){const t=a(e),r=n.publicToAddress(t);return n.bufferToHex(r)},extractPublicKey:function(e){return"0x"+a(e).toString("hex")},typedSignatureHash:function(e){const t=s(e);return n.bufferToHex(t)},signTypedData:function(e,t){const r=s(t.data),i=n.ecsign(r,e);return n.bufferToHex(this.concatSig(i.v,i.r,i.s))},recoverTypedSignature:function(e){const t=o(s(e.data),e.sig),r=n.publicToAddress(t);return n.bufferToHex(r)}}}}},{package:"eth-sig-util",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/eth-json-rpc-middleware/node_modules/eth-sig-util/index.js"}],[4350,{},function(){with(this)return function(){"use strict";return function(e,t,r){var n,i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0}),r.ETH_ABI_LATTICE_FW_TYPE_MAP=r.MAX_CHAIN_ID_BYTES=r.HANDLE_LARGER_CHAIN_ID=r.HARDENED_OFFSET=r.VERSION_BYTE=r.REQUEST_TYPE_BYTE=r.signingSchema=r.responseMsgs=r.responseCodes=r.messageConstants=r.ethMsgProtocol=r.encReqCodes=r.deviceCodes=r.decResLengths=r.addressSizes=r.ENC_MSG_LEN=r.BASE_URL=r.BIP_CONSTANTS=r.AES_IV=r.ADDR_STR_LEN=r.getFwVersionConst=r.ASCII_REGEX=r.EXTERNAL=void 0;r.AES_IV=[109,121,115,101,99,114,101,116,112,97,115,115,119,111,114,100];r.ADDR_STR_LEN=129;var s={empty:0,getAddresses:1290,sign:1090,getWallets:142,addAbiDefs:8,getKvRecords:1395,getAbiRecords:1215,removeAbiRecords:1,test:1646};r.decResLengths=s;var o=0;r.ENC_MSG_LEN=o,Object.keys(s).forEach((function(e){s[e]+82>o&&(r.ENC_MSG_LEN=o=s[e]+82)}));r.deviceCodes={CONNECT:1,ENCRYPTED_REQUEST:2};r.encReqCodes={FINALIZE_PAIRING:0,GET_ADDRESSES:1,ADD_PERMISSION:2,SIGN_TRANSACTION:3,GET_WALLETS:4,ADD_PERMISSION_V0:5,ADD_ABI_DEFS:6,GET_KV_RECORDS:7,ADD_KV_RECORDS:8,REMOVE_KV_RECORDS:9,GET_ABI_RECORDS:10,REMOVE_ABI_RECORDS:11,TEST:12};r.messageConstants={NOT_PAIRED:0,PAIRED:1};r.addressSizes={BTC:20,ETH:20};var a={RESP_SUCCESS:0,RESP_ERR_INVALID_MSG:128,RESP_ERR_UNSUPPORTED_VER:129,RESP_ERR_DEV_BUSY:130,RESP_ERR_USER_TIMEOUT:131,RESP_ERR_USER_DECLINED:132,RESP_ERR_PAIR_FAIL:133,RESP_ERR_PAIR_DISABLED:134,RESP_ERR_PERMISSION_DISABLED:135,RESP_ERR_INTERNAL:136,RESP_ERR_GCE_TIMEOUT:137,RESP_ERR_WRONG_WALLET:138,RESP_ERR_DEV_LOCKED:139,RESP_ERR_DISABLED:140,RESP_ERR_ALREADY:141,RESP_ERR_INVALID_EPHEM_ID:142};r.responseCodes=a;var u=((n={})[a.RESP_SUCCESS]=0,n[a.RESP_ERR_INVALID_MSG]="Invalid request",n[a.RESP_ERR_UNSUPPORTED_VER]="Unsupported version",n[a.RESP_ERR_DEV_BUSY]="Device busy",n[a.RESP_ERR_USER_TIMEOUT]="Timeout waiting for user",n[a.RESP_ERR_USER_DECLINED]="Request declined by user",n[a.RESP_ERR_PAIR_FAIL]="Pairing failed",n[a.RESP_ERR_PAIR_DISABLED]="Pairing is currently disabled",n[a.RESP_ERR_PERMISSION_DISABLED]="Automated signing is currently disabled",n[a.RESP_ERR_INTERNAL]="Device error",n[a.RESP_ERR_GCE_TIMEOUT]="Timeout",n[a.RESP_ERR_WRONG_WALLET]="Active wallet does not match request",n[a.RESP_ERR_DEV_LOCKED]="Device locked",n[a.RESP_ERR_DISABLED]="Disabled",n[a.RESP_ERR_ALREADY]="Record already exists. You must first remove it on your device.",n[a.RESP_ERR_INVALID_EPHEM_ID]="Could not find requester. Please reconnect.",n);r.responseMsgs=u;r.signingSchema={BTC_TRANSFER:0,ETH_TRANSFER:1,ERC20_TRANSFER:2,ETH_MSG:3,EXTRA_DATA:4,GENERAL_SIGNING:5};var c=2147483648;r.HARDENED_OFFSET=c;var l={PURPOSES:{ETH:2147483692,BTC_LEGACY:2147483692,BTC_WRAPPED_SEGWIT:2147483697,BTC_SEGWIT:2147483732},COINS:{ETH:2147483708,BTC:c,BTC_TESTNET:2147483649}};r.BIP_CONSTANTS=l;r.REQUEST_TYPE_BYTE=2;r.VERSION_BYTE=1;r.HANDLE_LARGER_CHAIN_ID=255;r.MAX_CHAIN_ID_BYTES=8;r.BASE_URL="https://signing.gridpl.us";var f={address:1,bool:2,uint8:3,uint16:4,uint24:5,uint32:6,uint40:7,uint48:8,uint56:9,uint64:10,uint72:11,uint80:12,uint88:13,uint96:14,uint104:15,uint112:16,uint120:17,uint128:18,uint136:19,uint144:20,uint152:21,uint160:22,uint168:23,uint176:24,uint184:25,uint192:26,uint200:27,uint208:28,uint216:29,uint224:30,uint232:31,uint240:32,uint248:33,uint256:34,int8:35,int16:36,int24:37,int32:38,int40:39,int48:40,int56:41,int64:42,int72:43,int80:44,int88:45,int96:46,int104:47,int112:48,int120:49,int128:50,int136:51,int144:52,int152:53,int160:54,int168:55,int176:56,int184:57,int192:58,int200:59,int208:60,int216:61,int224:62,int232:63,int240:64,int248:65,int256:66,uint:67,bytes1:69,bytes2:70,bytes3:71,bytes4:72,bytes5:73,bytes6:74,bytes7:75,bytes8:76,bytes9:77,bytes10:78,bytes11:79,bytes12:80,bytes13:81,bytes14:82,bytes15:83,bytes16:84,bytes17:85,bytes18:86,bytes19:87,bytes20:88,bytes21:89,bytes22:90,bytes23:91,bytes24:92,bytes25:93,bytes26:94,bytes27:95,bytes28:96,bytes29:97,bytes30:98,bytes31:99,bytes32:100,bytes:101,string:102},h=i(i({},f),{tuple1:103,tuple2:104,tuple3:105,tuple4:106,tuple5:107,tuple6:108,tuple7:109,tuple8:110,tuple9:111,tuple10:112,tuple11:113,tuple12:114,tuple13:115,tuple14:116,tuple15:117,tuple16:118,tuple17:119});r.ETH_ABI_LATTICE_FW_TYPE_MAP=h;var d={SIGN_PERSONAL:{str:"signPersonal",enumIdx:0},TYPED_DATA:{str:"typedData",enumIdx:1,rawDataMaxLen:1629,typeCodes:f}};r.ethMsgProtocol=d,r.EXTERNAL={GET_ADDR_FLAGS:{SECP256K1_PUB:3,ED25519_PUB:4},SIGNING:{HASHES:{NONE:0,KECCAK256:1,SHA256:2},CURVES:{SECP256K1:0,ED25519:1},ENCODINGS:{NONE:1,SOLANA:2,TERRA:3,EVM:4}}},r.getFwVersionConst=function(e){var t={extraDataFrameSz:0,extraDataMaxFrames:0,genericSigning:{}};function n(e,t){return e[2]>t[0]||e[2]===t[0]&&e[1]>t[1]||e[2]===t[0]&&e[1]===t[1]&&e[0]>t[2]||e[2]===t[0]&&e[1]===t[1]&&e[0]===t[2]}var i=0===e.length;return!i&&n(e,[0,10,4])||!i&&n(e,[0,10,0])?(t.reqMaxDataSz=1678,t.ethMaxGasPrice=2e13,t.addrFlagsAllowed=!0):(t.reqMaxDataSz=1152,t.ethMaxGasPrice=5e11,t.addrFlagsAllowed=!1),t.ethMaxDataSz=t.reqMaxDataSz-128,t.ethMaxMsgSz=t.ethMaxDataSz,t.eip712MaxTypeParams=18,!i&&n(e,[0,10,4])&&(t.extraDataFrameSz=1500,t.extraDataMaxFrames=1),!i&&n(e,[0,10,5])&&(t.varAddrPathSzAllowed=!0,t.eip712Supported=!0),!i&&n(e,[0,10,8])&&(t.prehashAllowed=!0),!i&&n(e,[0,10,10])&&(t.ethMsgPreHashAllowed=!0),!i&&n(e,[0,11,0])&&(t.allowedEthTxTypes=[1,2],t.ethMaxDataSz-=10,t.ethMaxMsgSz=t.ethMaxDataSz),!i&&n(e,[0,11,2])&&(t.personalSignHeaderSz=72),!i&&n(e,[0,12,0])&&(t.kvActionsAllowed=!0,t.kvKeyMaxStrSz=63,t.kvValMaxStrSz=63,t.kvActionMaxNum=10,t.kvRemoveMaxNum=100),!i&&n(e,[0,13,0])&&(t.allowBtcLegacyAndSegwitAddrs=!0,t.contractDeployKey="0x08002e0fec8e6acf00835f43c9764f7364fa3f42"),!i&&n(e,[0,14,0])&&(t.abiCategorySz=32,t.abiMaxRmv=200,t.genericSigning.baseReqSz=1552,t.genericSigning.baseDataSz=1519,t.genericSigning.hashTypes=r.EXTERNAL.SIGNING.HASHES,t.genericSigning.curveTypes=r.EXTERNAL.SIGNING.CURVES,t.genericSigning.encodingTypes={NONE:r.EXTERNAL.SIGNING.ENCODINGS.NONE,SOLANA:r.EXTERNAL.SIGNING.ENCODINGS.SOLANA},t.getAddressFlags=[r.EXTERNAL.GET_ADDR_FLAGS.ED25519_PUB,r.EXTERNAL.GET_ADDR_FLAGS.SECP256K1_PUB],t.eip712MaxTypeParams=36),!i&&n(e,[0,14,1])&&(t.genericSigning.encodingTypes.TERRA=r.EXTERNAL.SIGNING.ENCODINGS.TERRA),!i&&n(e,[0,15,0])&&(t.genericSigning.encodingTypes.EVM=r.EXTERNAL.SIGNING.ENCODINGS.EVM,t.ethMaxDataSz=1519),t};r.ASCII_REGEX=/^[\x00-\x7F]+$/}}},{package:"gridplus-sdk",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/gridplus-sdk/dist/constants.js"}],[4349,{"./bitcoin":4348,"./constants":4350,"./ethereum":4351,"./ethereumAbi":4352,"./genericSigning":4353,"./index":4354,"./util":4355,bitwise:2026,"buffer/":2121,"hash.js/lib/hash/sha":4409,superagent:5962},function(){with(this)return function(){"use strict";return function(e,t,r){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.Client=void 0;var s=i(e("bitwise")),o=e("buffer/"),a=i(e("superagent")),u=i(e("./bitcoin")),c=e("hash.js/lib/hash/sha"),l=e("./index"),f=e("./constants"),h=i(e("./ethereum")),d=e("./ethereumAbi"),p=e("./genericSigning"),m=e("./util"),y=o.Buffer.alloc(32),g=function(){function e(e){var t=e.baseUrl,r=e.name,n=e.privKey,i=e.stateData,s=e.timeout,o=e.retryCount,a=e.skipRetryOnWrongWallet;if(this.ephemeralPub=null,this.deviceId=null,this.isPaired=!1,this.activeWallets={internal:{uid:y,name:null,capabilities:null,external:!1},external:{uid:y,name:null,capabilities:null,external:!0}},this.skipRetryOnWrongWallet=a||!1,i)this._unpackAndApplyStateData(i);else{if(this.baseUrl=t||f.BASE_URL,r&&(r.length<5||r.length>24))throw new Error("`name` must be 5-24 characters");this.name=r||"Unknown",this.privKey=n||(0,m.randomBytes)(32),this.key=(0,m.getP256KeyPair)(this.privKey),this.retryCount=o||3,this.timeout=s||6e4}}return e.prototype.getStateData=function(){return this._packStateData()},e.prototype.getFwVersion=function(){return this.fwVersion&&this.fwVersion.length>=3?{fix:this.fwVersion[0],minor:this.fwVersion[1],major:this.fwVersion[2]}:null},e.prototype.connect=function(e,t){var r=this;return new Promise((function(n,i){var s=(0,m.promisifyCb)(n,i,t);if("function"==typeof e){if(!r.deviceId)return s("No device ID has been stored. Please connect with your device ID first.");s=e}else r.deviceId=e;var o=r._buildRequest(f.deviceCodes.CONNECT,r.pubKeyBytes());r._request(o,null,(function(e,t){return e?s(e):(r.isPaired=r._handleConnect(t)||!1,!r.isPaired||r._fwVersionGTE(0,14,1)?s(e,r.isPaired):void r.fetchActiveWallet((function(e){return s(e,r.isPaired)})))}))}))},e.prototype.pair=function(e,t){var r=this;return new Promise((function(n,i){var s=(0,m.promisifyCb)(n,i,t),a=r.pubKeyBytes(),u=o.Buffer.alloc(25);if(r.name.length<5||r.name.length>24)return s("Invalid length for name provided. Must be 5-24 characters.");e.length>0&&u.write(r.name);var l=o.Buffer.concat([a,u,o.Buffer.from(e)]),f=o.Buffer.from((0,c.sha256)().update(l).digest("hex"),"hex"),h=r.key.sign(f),d=(0,m.toPaddedDER)(h),p=o.Buffer.concat([u,d]);r._request(p,"FINALIZE_PAIRING",(function(e,t){if(e)return s(e);var n=r._handlePair(t);if(n)return s(n);r.fetchActiveWallet((function(e){return e?s(e):s(null,r.hasActiveWallet())}))}))}))},e.prototype.test=function(e,t){var r=this;return new Promise((function(n,i){var s=(0,m.promisifyCb)(n,i,t);if(!e.payload)return s("First argument must contain `testID` and `payload` fields.");var a=o.Buffer.alloc(506);a.writeUInt32BE(e.testID,0),a.writeUInt16BE(e.payload.length,4),e.payload.copy(a,6),r._request(a,"TEST",(function(e,t){if(e)return s(e);var n=r._handleEncResponse(t,f.decResLengths.test);return null!==n.err?s(n.err):s(null,n.data.slice(65))}))}))},e.prototype.getAddresses=function(e,t){var r=this;return new Promise((function(n,i){var a=(0,m.promisifyCb)(n,i,t),u=e.startPath,c=e.n,l=e.flag,h=void 0===l?0:l;if(u===undefined||c===undefined)return a("Please provide `startPath` and `n` options");if(u.length<2||u.length>5)return a("Path must include between 2 and 5 indices");if(c>10)return a("You may only request ".concat(10," addresses at once."));var d=(0,f.getFwVersionConst)(r.fwVersion);if(!(0,m.isValidAssetPath)(u,d))return a("Parent derivation path is not supported");var p=53;if(d.varAddrPathSzAllowed)p+=1;else if(5!==u.length)return a("Your Lattice firmware only supports derivation paths with 5 indices. Please upgrade.");var y=o.Buffer.alloc(p),g=0,v=r.getActiveWallet();if(null===v)return a("No active wallet.");v.uid.copy(y,g),g+=32,d.varAddrPathSzAllowed&&(y.writeUInt8(u.length,g),g+=1);for(var b=0;b<5;b++)b<=u.length&&y.writeUInt32BE(u[b],g),g+=4;var _,w=0;if(d.addrFlagsAllowed){w=d.getAddressFlags&&d.getAddressFlags.indexOf(h)>-1?h:0;var E=s.default.nibble.read(w),k=s.default.nibble.read(c);_=s.default.byte.write(E.concat(k))}else _=c;return y.writeUInt8(_,g),g++,r._request(y,"GET_ADDRESSES",(function(e,t){if(e)return a(e);var n=r._handleGetAddresses(t,w);return n.err?a(n.err):a(null,n.data)}))}))},e.prototype.sign=function(e,t,r,i){var s=this;return void 0===r&&(r=null),void 0===i&&(i=null),new Promise((function(a,c){var l=(0,m.promisifyCb)(a,c,t),d=e.data;if(!d)return l("You must provide `data`");var y,g,v,b=(0,f.getFwVersionConst)(s.fwVersion);d=n({fwConstants:b},d);var _=null;if(null!==r&&null!==i)_=r.currency,y=r,g=o.Buffer.concat([i,y.extraDataPayloads.shift()]),v=f.signingSchema.EXTRA_DATA;else{_=e.currency;try{var w=b.genericSigning&&b.genericSigning.encodingTypes&&b.genericSigning.encodingTypes.EVM;if("ETH"===_&&w){var E;console.warn("Using the legacy ETH signing path. This will soon be deprecated. "+"Please switch to general signing request.");try{E=h.default.ethConvertLegacyToGenericReq(d)}catch(e){return l("Could not convert legacy request. Please switch to a general signing "+"request. See gridplus-sdk docs for more information.")}d={fwConstants:b,encodingType:f.EXTERNAL.SIGNING.ENCODINGS.EVM,curveType:f.EXTERNAL.SIGNING.CURVES.SECP256K1,hashType:f.EXTERNAL.SIGNING.HASHES.KECCAK256,signerPath:d.signerPath,payload:E},_=null}y="ETH"===_?h.default.buildEthereumTxRequest(d):"ETH_MSG"===_?h.default.buildEthereumMsgRequest(d):"BTC"===_?u.default.buildBitcoinTxRequest(d):(0,p.buildGenericSigningMsgRequest)(d)}catch(e){return l("Error building signing request: ".concat(e.message))}if(y.err!==undefined)return l(y.err);if(y.payload.length>b.reqMaxDataSz)return l("Transaction is too large");g=y.payload,v=y.schema}var k=o.Buffer.alloc(2+b.reqMaxDataSz),A=0,S=y.extraDataPayloads&&Number(y.extraDataPayloads.length>0);k.writeUInt8(S,A),A+=1,k.writeUInt8(v,A),A+=1;var x=s.getActiveWallet();return null===x?l("No active wallet."):(x.uid.copy(k,A),A+=x.uid.length,g.copy(k,A),s._request(k,"SIGN_TRANSACTION",(function(t,n){if(t){if(t)return l(t)}else{if(S){var o=s._handleEncResponse(n,f.decResLengths.sign);return i=o.data.slice(65,73),r||((r=y).currency=_),s.sign(e,l,r,i)}try{var a=s._handleSign(n,_,y);return l(null,a)}catch(t){return l(t.message)}}})))}))},e.prototype.addAbiDefs=function(e,t,r){var n=this;return void 0===r&&(r=null),new Promise((function(i,s){var a,u=(0,m.promisifyCb)(i,s,t),c=e.slice(0,d.MAX_ABI_DEFS);e=e.slice(d.MAX_ABI_DEFS);try{a=(0,d.buildAddAbiPayload)(c)}catch(e){return u(e)}var l=o.Buffer.alloc(a.length+10);return l.writeUInt16LE(e.length,0),null!==r&&r.copy(l,2),a.copy(l,10),n._request(l,"ADD_ABI_DEFS",(function(t,i,s){if(s&&s!==f.responseCodes.RESP_SUCCESS)return u("Error making request.");if(t)return u(t);var o=n._handleEncResponse(i,f.decResLengths.addAbiDefs);if(r=o.data.slice(65,73),0===e.length)return u(null);n.addAbiDefs(e,u,r)}))}))},e.prototype.getAbiRecords=function(e,t,r){var n=this;return new Promise((function(i,s){var a=(0,m.promisifyCb)(i,s,t),u=e.n,c=void 0===u?1:u,l=e.startIdx,h=void 0===l?0:l,p=e.category,y=void 0===p?"":p,g=(0,f.getFwVersionConst)(n.fwVersion);if(c<1)return a("Must request at least one record (n=0)");if(c<0||h<0)return a("Both `n` and `startIdx` must be >=0");if(!g.abiCategorySz)return a("Outdated Lattice firmware. Please update.");if(y.length>=g.abiCategorySz)return a("category must be <".concat(g.abiCategorySz-1," characters, got ").concat(y.length));r||(r={startIdx:h,numRemaining:null,numFetched:null,records:[]});var v=o.Buffer.alloc(4+g.abiCategorySz);return v.writeUInt16LE(h,0),v.writeUInt16LE(c,2),o.Buffer.from(y).copy(v,4),n._request(v,"GET_ABI_RECORDS",(function(t,i){if(t)return a(t);var s=n._handleEncResponse(i,f.decResLengths.getAbiRecords);if(s.err)return a(s.err);var o=65,u=s.data.readUInt32LE(o);o+=4;var c=s.data.readUInt8(o);o+=1,r.numRemaining=u,r.records||(r.records=[]);for(var l=0;l<c;l++){var h=s.data.slice(o,o+d.ABI_DEF_SZ);o+=d.ABI_DEF_SZ,r.records.push((0,d.unpackAbiDef)(h))}return e.n-=c,e.n<1||c<1?(r.numFetched=r.records.length,a(null,r)):(e.startIdx+=c,n.getAbiRecords(e,a,r))}))}))},e.prototype.removeAbiRecords=function(e,t,r){var n=this;return void 0===r&&(r={numRemoved:0,numTried:0}),new Promise((function(i,s){var a=(0,m.promisifyCb)(i,s,t),u=e.sigs,c=(0,f.getFwVersionConst)(n.fwVersion);if(!c.abiMaxRmv)return a("Outdated Lattice firmware. Please update.");if(0===u.length)return a("At least one signature in `sigs` must be provided.");var l=u.slice(r.numTried,r.numTried+c.abiMaxRmv),d=o.Buffer.alloc(1+4*c.abiMaxRmv),p=0;return d.writeUInt8(l.length,p),p+=1,l.forEach((function(e){try{var t=h.default.ensureHexBuffer(e);if(4!==t.length)return a("Signatures must be 4 bytes.");t.copy(d,p),p+=4}catch(e){return a("Error writing signature: ".concat(e.message))}})),n._request(d,"REMOVE_ABI_RECORDS",(function(t,i){if(t)return a(t);var s=n._handleEncResponse(i,f.decResLengths.removeAbiRecords);if(s.err)return a(s.err);var o=65,u=s.data.readUInt8(o);return o+=1,r.numRemoved+=u,r.numTried+=l.length,r.numTried>=e.sigs.length?a(null,r):n.removeAbiRecords(e,a,r)}))}))},e.prototype.addPermissionV0=function(e,t){var r=this;return new Promise((function(n,i){var s=(0,m.promisifyCb)(n,i,t),a=e.currency,u=e.timeWindow,c=e.limit,l=e.decimals,d=e.asset;if(!a||u===undefined||c===undefined||l===undefined||null===u||null===c||null===l)return s("currency, timeWindow, decimals, and limit are all required options.");if(0===u||0===c)return s("Time window and spending limit must be positive.");var p=a;d&&(p+="_".concat(d));var y=o.Buffer.alloc(293);if(o.Buffer.from(p).length>255)return s("Asset name too long.");o.Buffer.from(p).copy(y,0);var g=h.default.ensureHexBuffer(c);return g.length>32?s("Limit too large."):(g.copy(y,32-g.length+256),y.writeUInt32BE(u,288),y.writeUInt8(l,292),r._request(y,"ADD_PERMISSION_V0",(function(e,t){if(!e){var n=r._handleEncResponse(t,f.decResLengths.empty);return n.err?s(n.err):s(null)}if(e)return s(e)})))}))},e.prototype.getKvRecords=function(e,t){var r=this;return new Promise((function(n,i){var s=(0,m.promisifyCb)(n,i,t),a=e.type,u=void 0===a?0:a,c=e.n,l=void 0===c?1:c,h=e.start,d=void 0===h?0:h,p=(0,f.getFwVersionConst)(r.fwVersion);if(!p.kvActionsAllowed)return s("Unsupported. Please update firmware.");if(l<1)return s("You must request at least one record.");if(l>p.kvActionMaxNum)return s("You may only request up to ".concat(p.kvActionMaxNum," records at once."));var y=o.Buffer.alloc(9);return y.writeUInt32LE(u,0),y.writeUInt8(l,4),y.writeUInt32LE(d,5),r._request(y,"GET_KV_RECORDS",(function(e,t){if(!e){var n=r._handleEncResponse(t,f.decResLengths.getKvRecords);if(n.err)return s(n.err);var i=65,o=parseInt(n.data.slice(i,i+4).toString("hex"),16);i+=4;var a=parseInt(n.data.slice(i,i+1).toString("hex"),16);if(i+=1,a>p.kvActionMaxNum)return s("Too many records fetched. Firmware error.");for(var u=[],c=0;c<a;c++){var l={};l.id=parseInt(n.data.slice(i,i+4).toString("hex"),16),i+=4,l.type=parseInt(n.data.slice(i,i+4).toString("hex"),16),i+=4,l.caseSensitive=1===parseInt(n.data.slice(i,i+1).toString("hex"),16),i+=1;var h=parseInt(n.data.slice(i,i+1).toString("hex"),16);i+=1,l.key=n.data.slice(i,i+h-1).toString(),i+=p.kvKeyMaxStrSz+1;var d=parseInt(n.data.slice(i,i+1).toString("hex"),16);i+=1,l.val=n.data.slice(i,i+d-1).toString(),i+=p.kvValMaxStrSz+1,u.push(l)}return s(null,{records:u,total:o,fetched:a})}if(e)return s(e)}))}))},e.prototype.addKvRecords=function(e,t){var r=this;return new Promise((function(n,i){var s=(0,m.promisifyCb)(n,i,t),a=e.type,u=void 0===a?0:a,c=e.records,l=void 0===c?{}:c,h=e.caseSensitive,d=void 0!==h&&h,p=(0,f.getFwVersionConst)(r.fwVersion);if(!p.kvActionsAllowed)return s("Unsupported. Please update firmware.");if("object"!=typeof l||0===Object.keys(l).length)return s("One or more key-value mapping must be provided in `records` param.");if(Object.keys(l).length>p.kvActionMaxNum)return s("Too many keys provided. Please only provide up to ".concat(p.kvActionMaxNum,"."));if(Object.keys(l).length<1)return s("You must provide at least one key to add.");var y=o.Buffer.alloc(1+139*p.kvActionMaxNum);y.writeUInt8(Object.keys(l).length,0);var g=1;try{Object.keys(l).forEach((function(e){if("string"!=typeof e||String(e).length>p.kvKeyMaxStrSz)throw new Error("Key ".concat(e," too large. Must be <=").concat(p.kvKeyMaxStrSz," characters."));if("string"!=typeof l[e]||String(l[e]).length>p.kvValMaxStrSz)throw new Error("Value ".concat(l[e]," too large. Must be <=").concat(p.kvValMaxStrSz," characters."));if(0===String(e).length||0===String(l[e]).length)throw new Error("Keys and values must be >0 characters.");if(!f.ASCII_REGEX.test(e)||!f.ASCII_REGEX.test(l[e]))throw new Error("Unicode characters are not supported.");y.writeUInt32LE(0,g),g+=4,y.writeUInt32LE(u,g),g+=4,y.writeUInt8(d?1:0,g),g+=1,y.writeUInt8(String(e).length+1,g),g+=1,o.Buffer.from(String(e)).copy(y,g),g+=p.kvKeyMaxStrSz+1,y.writeUInt8(String(l[e]).length+1,g),g+=1,o.Buffer.from(String(l[e])).copy(y,g),g+=p.kvValMaxStrSz+1}))}catch(e){return s("Error building request: ".concat(e.message))}return r._request(y,"ADD_KV_RECORDS",(function(e,t){if(!e){var n=r._handleEncResponse(t,f.decResLengths.empty);return n.err?s(n.err):s(null)}if(e)return s(e)}))}))},e.prototype.removeKvRecords=function(e,t){var r=this;return new Promise((function(n,i){var s=(0,m.promisifyCb)(n,i,t),a=e.type,u=void 0===a?0:a,c=e.ids,l=void 0===c?[]:c,h=(0,f.getFwVersionConst)(r.fwVersion);if(!h.kvActionsAllowed)return s("Unsupported. Please update firmware.");if(!Array.isArray(l)||l.length<1)return s("You must include one or more `ids` to removed.");if(l.length>h.kvRemoveMaxNum)return s("Only up to ".concat(h.kvRemoveMaxNum," records may be removed at once."));var d=o.Buffer.alloc(5+4*h.kvRemoveMaxNum);d.writeUInt32LE(u,0),d.writeUInt8(l.length,4);for(var p=0;p<l.length;p++)d.writeUInt32LE(l[p],5+4*p);return r._request(d,"REMOVE_KV_RECORDS",(function(e,t){if(!e){var n=r._handleEncResponse(t,f.decResLengths.empty);return n.err?s(n.err):s(null)}if(e)return s(e)}))}))},e.prototype.fetchActiveWallet=function(e){var t=this;return new Promise((function(r,n){var i=(0,m.promisifyCb)(r,n,e),s=o.Buffer.alloc(0);return t._request(s,"GET_WALLETS",(function(e,r){return e?(t._resetActiveWallets(),i(e)):i(t._handleGetWallets(r))}))}))},e.prototype._getSharedSecret=function(){return o.Buffer.from(this.key.derive(this.ephemeralPub.getPublic()).toArray("be",32))},e.prototype._getEphemId=function(){if(null===this.ephemeralPub)return null;var e=this._getSharedSecret();return o.Buffer.from((0,c.sha256)().update(e).digest("hex"),"hex").slice(0,4)},e.prototype._buildEncRequest=function(e,t){var r=parseInt(this._getEphemId().toString("hex"),16),n=o.Buffer.concat([o.Buffer.from([e]),t]),i=(0,m.checksum)(n),s=o.Buffer.alloc(n.length+4);n.copy(s,0),s.writeUInt32LE(i,n.length);var a=this._getSharedSecret(),u=(0,m.aes256_encrypt)(s,a),c=o.Buffer.alloc(f.ENC_MSG_LEN+4);return c.writeUInt32LE(r,0),u.copy(c,4),this._buildRequest(f.deviceCodes.ENCRYPTED_REQUEST,c)},e.prototype._buildRequest=function(e,t){var r=t&&o.Buffer.isBuffer(t)?t.length+1:1;e===f.deviceCodes.ENCRYPTED_REQUEST&&(r=1+t.length);var n=0,i=o.Buffer.alloc(r+8);n=i.writeUInt8(f.VERSION_BYTE,n),n=i.writeUInt8(f.REQUEST_TYPE_BYTE,n);var s=(0,m.randomBytes)(4);n=i.writeUInt32BE(parseInt("0x".concat(s.toString("hex"))),n),n=i.writeUInt16BE(r,n),n=i.writeUInt8(e,n),r>1&&(n=t.copy(i,n));var a=(0,m.checksum)(i),u=o.Buffer.alloc(i.length+4);return n=i.copy(u),u.writeUInt32BE(a,n),u},e.prototype._request=function(e,t,r,n){var i=this;if(void 0===n&&(n=this.retryCount),!this.deviceId)return r("Device ID is not set. Please set it and try again.");if(t&&f.encReqCodes[t]===undefined)return r("Unknown encrypted request code.");var s=t?this._buildEncRequest(f.encReqCodes[t],e):e,o="".concat(this.baseUrl,"/").concat(this.deviceId);a.default.post(o).timeout(this.timeout).send({data:s}).then((function(s){if(!s||!s.body)return r("Invalid response: ".concat(s));if(200!==s.body.status)return r("Error code ".concat(s.body.status,": ").concat(s.body.message));var o=(0,m.parseLattice1Response)(s.body.message),a=o.responseCode===f.responseCodes.RESP_ERR_DEV_BUSY||o.responseCode===f.responseCodes.RESP_ERR_GCE_TIMEOUT,u=o.responseCode===f.responseCodes.RESP_ERR_WRONG_WALLET,c=o.responseCode===f.responseCodes.RESP_ERR_INVALID_EPHEM_ID,l=n>0;if(l&&a)setTimeout((function(){i._request(e,t,r,n-1)}),3e3);else if(l&&c)i.connect(i.deviceId,(function(s,o){return s?r(s):o?void i._request(e,t,r,n-1):r("Not paired to device.")}));else if(l&&u&&!i.skipRetryOnWrongWallet)i._resetActiveWallets(),i.fetchActiveWallet().then((function(){if(!(e=i._replaceWalletUID(t,e)))return r("Wrong wallet. Failed to switch. Please reconnect.");i._request(e,t,r,0)})).catch((function(e){return r(e)}));else if(o.responseCode||o.err){if(o.err)return r(o.err);r(f.responseMsgs[o.responseCode]||"Unknown request failure")}else r(null,o.data,o.responseCode)})).catch((function(e){var t="ECONNABORTED"===e.code&&"ETIME"===e.errno;return r(t?"Timeout waiting for device. Please ensure it is connected to the internet and try again in a minute.":"Failed to make request to device: ".concat(e.message))}))},e.prototype._handleConnect=function(e){var t=0,r=e.readUInt8(t)===f.messageConstants.PAIRED;t++;var n=e.slice(t,t+65).toString("hex");if(t+=65,this.fwVersion=e.slice(t,t+4),t+=4,this.ephemeralPub=(0,m.getP256KeyPairFromPub)(n),r&&this._fwVersionGTE(0,14,1)){var i=e.slice(t,t+160);t+=160;var s=this._getSharedSecret(),o=(0,m.aes256_decrypt)(i,s);if(0!==o[o.length-2]||0!==o[o.length-1])throw new Error("Failed to connect to Lattice.");this._parseAndAddWallets(o)}return r},e.prototype._handleEncResponse=function(e,t){var r=this._getSharedSecret(),n=e.slice(0,f.ENC_MSG_LEN),i=(0,m.aes256_decrypt)(n,r);t+=65;var s=i.slice(0,t),o=parseInt("0x".concat(i.slice(t,t+4).toString("hex"))),a=(0,m.checksum)(s);if(o!==a)return{err:"Checksum mismatch in response from Lattice (calculated ".concat(a,", wanted ").concat(o,")")};var u=i.slice(0,65).toString("hex");try{return this.ephemeralPub=(0,m.getP256KeyPairFromPub)(u),{err:null,data:i}}catch(e){return{err:"Error handling getAddresses response: ".concat(e.toString())}}},e.prototype._handlePair=function(e){var t=this._handleEncResponse(e,f.decResLengths.empty);return t.err?t.err:(this.isPaired=!0,null)},e.prototype._handleGetAddresses=function(e,t){var r=this._handleEncResponse(e,f.decResLengths.getAddresses);if(null!==r.err)return r;var n=r.data,i=65,s=[],o=l.Constants.GET_ADDR_FLAGS,a=o.ED25519_PUB,u=o.SECP256K1_PUB,c=t===a||t===u;for(c&&(i+=1);i+4<f.decResLengths.getAddresses;)if(c){var h=n.slice(i,i+65),d=h.every((function(e){return 0===e}));d||t!==a?d||s.push(h):s.push(h.slice(0,32)),i+=65}else{var p=n.slice(i,i+f.ADDR_STR_LEN);i+=f.ADDR_STR_LEN;var m=p.indexOf(0);m>0&&s.push(p.slice(0,m).toString())}return{data:s,err:null}},e.prototype._handleGetWallets=function(e){var t=this._handleEncResponse(e,f.decResLengths.getWallets);if(null!==t.err)return t;var r=t.data;return this._parseAndAddWallets(r.slice(65)),this.activeWallets.internal.uid.equals(y)&&this.activeWallets.external.uid.equals(y)?"No active wallet.":null},e.prototype._parseAndAddWallets=function(e){var t=0;this.activeWallets.internal.uid=e.slice(t,t+32),this.activeWallets.internal.capabilities=e.readUInt32BE(t+32),this.activeWallets.internal.name=e.slice(t+36,t+71),t+=71,this.activeWallets.external.uid=e.slice(t,t+32),this.activeWallets.external.capabilities=e.readUInt32BE(t+32),this.activeWallets.external.name=e.slice(t+36,t+71)},e.prototype._handleSign=function(e,t,r){void 0===r&&(r=null);var n=this._handleEncResponse(e,f.decResLengths.sign);if(null!==n.err)return{err:n.err};var i,s=65,a=n.data;if("BTC"===t){var l=u.default.getAddressFormat(r.origData.changePath),d=a.slice(s,s+20);s+=20,i=u.default.getBitcoinAddress(d,l)}if("BTC"===t){for(var y=[],g=[],v=0;s<a.length&&48===a[s];){var b=s,_=s+2+a[s+1];g.push(a.slice(b,_));var w=33*v+825,E=33*(v+1)+825;y.push(a.slice(w,E)),s+=74,v+=1}var k={inputs:[],outputs:[]};k.outputs.push({value:r.origData.value,recipient:r.origData.recipient}),r.changeData.value>0&&k.outputs.push({value:r.changeData.value,recipient:i});for(var A=0;A<g.length;A++)k.inputs.push({hash:r.origData.prevOuts[A].txHash,index:r.origData.prevOuts[A].index,sig:g[A],pubkey:y[A],signerPath:r.origData.prevOuts[A].signerPath});var S=u.default.serializeTx(k),x=S,I=o.Buffer.from((0,c.sha256)().update(o.Buffer.from(x,"hex")).digest("hex"),"hex");return{tx:S,txHash:(0,c.sha256)().update(I).digest("hex"),changeRecipient:i,sigs:g}}if("ETH"===t){var T=(0,m.parseDER)(a.slice(s,s+2+a[s+1]));s+=74;var P=a.slice(s,s+20),N=h.default.buildEthRawTx(r,T,P),C=N.rawTx,R=N.sigWithV;return{tx:"0x".concat(C),txHash:"0x".concat(h.default.hashTransaction(C)),sig:{v:R.v,r:R.r.toString("hex"),s:R.s.toString("hex")},signer:P}}if("ETH_MSG"===t){T=(0,m.parseDER)(a.slice(s,s+2+a[s+1]));s+=74;var O=a.slice(s,s+20),M=h.default.validateEthereumMsgResponse({signer:O,sig:T},r);return{sig:{v:M.v,r:M.r.toString("hex"),s:M.s.toString("hex")},signer:O}}return(0,p.parseGenericSigningResponse)(a,s,r.curveType,r.omitPubkey)},e.prototype._resetActiveWallets=function(){this.activeWallets.internal.uid=y,this.activeWallets.internal.name=null,this.activeWallets.internal.capabilities=null,this.activeWallets.external.uid=y,this.activeWallets.external.name=null,this.activeWallets.external.capabilities=null},e.prototype._replaceWalletUID=function(e,t){var r=this.getActiveWallet();return r?"GET_ADDRESSES"===e?(r.uid.copy(t,0),t):"SIGN_TRANSACTION"===e?(r.uid.copy(t,2),t):null:null},e.prototype._packStateData=function(){try{var e={activeWallets:{internal:{uid:this.activeWallets.internal.uid.toString("hex"),name:this.activeWallets.internal.name.toString(),capabilities:this.activeWallets.internal.capabilities},external:{uid:this.activeWallets.external.uid.toString("hex"),name:this.activeWallets.external.name.toString(),capabilities:this.activeWallets.external.capabilities}},ephemeralPub:this.ephemeralPub.getPublic().encode("hex"),fwVersion:this.fwVersion.toString("hex"),deviceId:this.deviceId,name:this.name,baseUrl:this.baseUrl,privKey:this.privKey.toString("hex"),retryCount:this.retryCount,timeout:this.timeout};return JSON.stringify(e)}catch(e){return console.warn("Could not pack state data."),null}},e.prototype._unpackAndApplyStateData=function(e){try{var t=JSON.parse(e),r={uid:o.Buffer.from(t.activeWallets.internal.uid,"hex"),name:o.Buffer.from(t.activeWallets.internal.name),capabilities:t.activeWallets.internal.capabilities,external:!1},n={uid:o.Buffer.from(t.activeWallets.external.uid,"hex"),name:o.Buffer.from(t.activeWallets.external.name),capabilities:t.activeWallets.external.capabilities,external:!0},i=o.Buffer.from(t.ephemeralPub,"hex"),s=o.Buffer.from(t.fwVersion,"hex"),a=o.Buffer.from(t.privKey,"hex");this.activeWallets.internal=r,this.activeWallets.external=n,this.ephemeralPub=(0,m.getP256KeyPairFromPub)(i),this.fwVersion=s,this.deviceId=t.deviceId,this.name=t.name,this.baseUrl=t.baseUrl,this.privKey=a,this.key=(0,m.getP256KeyPair)(this.privKey),this.retryCount=t.retryCount,this.timeout=t.timeout}catch(e){console.warn("Could not apply state data.")}},e.prototype._fwVersionGTE=function(e,t,r){var n=this.getFwVersion(),i=n.major,s=n.minor,o=n.fix;return i>e||i>=e&&s>t||i>=e&&s>=t&&o>=r},e.prototype.getActiveWallet=function(){return y.equals(this.activeWallets.external.uid)?y.equals(this.activeWallets.internal.uid)?null:this.activeWallets.internal:this.activeWallets.external},e.prototype.hasActiveWallet=function(){return null!==this.getActiveWallet()},e.prototype.pubKeyBytes=function(e){void 0===e&&(e=!1);var t=this.key.getPublic().encode("hex"),r=o.Buffer.from(t,"hex");if(!0===e){var n=r.slice(1,33).reverse(),i=r.slice(33,65).reverse();return o.Buffer.concat([r[0],n,i])}return r},e.prototype.parseAbi=function(e,t,r){return void 0===r&&(r=!1),"etherscan"===e?d.abiParsers[e](t,r):{err:"No ".concat(e," parser available.")}},e}();r.Client=g}}},{package:"gridplus-sdk",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/gridplus-sdk/dist/client.js"}],[6053,{},function(){with(this)return function(){"use strict";return function(e,t,r){r.isatty=function(){return!1},r.ReadStream=function(){throw new Error("tty.ReadStream is not implemented")},r.WriteStream=function(){throw new Error("tty.WriteStream is not implemented")}}}},{package:"tty-browserify",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/tty-browserify/index.js"}],[6070,{"./fallback":6069,"node-gyp-build":5341},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){try{t.exports=e("node-gyp-build")(r)}catch(r){t.exports=e("./fallback")}}).call(this)}).call(this,"/node_modules/utf-8-validate")}}},{package:"utf-8-validate",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/utf-8-validate/index.js"}],[2123,{"./fallback":2122,"node-gyp-build":5341},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){try{t.exports=e("node-gyp-build")(r)}catch(r){t.exports=e("./fallback")}}).call(this)}).call(this,"/node_modules/bufferutil")}}},{package:"bufferutil",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/bufferutil/index.js"}],[2102,{"./binding":2101,_process:5480,assert:1714,buffer:2105,stream:2108,util:2112},function(){with(this)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=e("buffer").Buffer,i=e("stream").Transform,s=e("./binding"),o=e("util"),a=e("assert").ok,u=e("buffer").kMaxLength,c="Cannot create final Buffer. It would be larger "+"than 0x"+u.toString(16)+" bytes";s.Z_MIN_WINDOWBITS=8,s.Z_MAX_WINDOWBITS=15,s.Z_DEFAULT_WINDOWBITS=15,s.Z_MIN_CHUNK=64,s.Z_MAX_CHUNK=Infinity,s.Z_DEFAULT_CHUNK=16384,s.Z_MIN_MEMLEVEL=1,s.Z_MAX_MEMLEVEL=9,s.Z_DEFAULT_MEMLEVEL=8,s.Z_MIN_LEVEL=-1,s.Z_MAX_LEVEL=9,s.Z_DEFAULT_LEVEL=s.Z_DEFAULT_COMPRESSION;for(var l=Object.keys(s),f=0;f<l.length;f++){var h=l[f];h.match(/^Z/)&&Object.defineProperty(r,h,{enumerable:!0,value:s[h],writable:!1})}for(var d={Z_OK:s.Z_OK,Z_STREAM_END:s.Z_STREAM_END,Z_NEED_DICT:s.Z_NEED_DICT,Z_ERRNO:s.Z_ERRNO,Z_STREAM_ERROR:s.Z_STREAM_ERROR,Z_DATA_ERROR:s.Z_DATA_ERROR,Z_MEM_ERROR:s.Z_MEM_ERROR,Z_BUF_ERROR:s.Z_BUF_ERROR,Z_VERSION_ERROR:s.Z_VERSION_ERROR},p=Object.keys(d),m=0;m<p.length;m++){var y=p[m];d[d[y]]=y}function g(e,t,r){var i=[],s=0;function o(){for(var t;null!==(t=e.read());)i.push(t),s+=t.length;e.once("readable",o)}function a(){var t,o=null;s>=u?o=new RangeError(c):t=n.concat(i,s),i=[],e.close(),r(o,t)}e.on("error",(function(t){e.removeListener("end",a),e.removeListener("readable",o),r(t)})),e.on("end",a),e.end(t),o()}function v(e,t){if("string"==typeof t&&(t=n.from(t)),!n.isBuffer(t))throw new TypeError("Not a string or buffer");var r=e._finishFlushFlag;return e._processChunk(t,r)}function b(e){if(!(this instanceof b))return new b(e);I.call(this,e,s.DEFLATE)}function _(e){if(!(this instanceof _))return new _(e);I.call(this,e,s.INFLATE)}function w(e){if(!(this instanceof w))return new w(e);I.call(this,e,s.GZIP)}function E(e){if(!(this instanceof E))return new E(e);I.call(this,e,s.GUNZIP)}function k(e){if(!(this instanceof k))return new k(e);I.call(this,e,s.DEFLATERAW)}function A(e){if(!(this instanceof A))return new A(e);I.call(this,e,s.INFLATERAW)}function S(e){if(!(this instanceof S))return new S(e);I.call(this,e,s.UNZIP)}function x(e){return e===s.Z_NO_FLUSH||e===s.Z_PARTIAL_FLUSH||e===s.Z_SYNC_FLUSH||e===s.Z_FULL_FLUSH||e===s.Z_FINISH||e===s.Z_BLOCK}function I(e,t){var o=this;if(this._opts=e=e||{},this._chunkSize=e.chunkSize||r.Z_DEFAULT_CHUNK,i.call(this,e),e.flush&&!x(e.flush))throw new Error("Invalid flush flag: "+e.flush);if(e.finishFlush&&!x(e.finishFlush))throw new Error("Invalid flush flag: "+e.finishFlush);if(this._flushFlag=e.flush||s.Z_NO_FLUSH,this._finishFlushFlag=void 0!==e.finishFlush?e.finishFlush:s.Z_FINISH,e.chunkSize&&(e.chunkSize<r.Z_MIN_CHUNK||e.chunkSize>r.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<r.Z_MIN_WINDOWBITS||e.windowBits>r.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<r.Z_MIN_LEVEL||e.level>r.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<r.Z_MIN_MEMLEVEL||e.memLevel>r.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=r.Z_FILTERED&&e.strategy!=r.Z_HUFFMAN_ONLY&&e.strategy!=r.Z_RLE&&e.strategy!=r.Z_FIXED&&e.strategy!=r.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!n.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new s.Zlib(t);var a=this;this._hadError=!1,this._handle.onerror=function(e,t){T(a),a._hadError=!0;var n=new Error(e);n.errno=t,n.code=r.codes[t],a.emit("error",n)};var u=r.Z_DEFAULT_COMPRESSION;"number"==typeof e.level&&(u=e.level);var c=r.Z_DEFAULT_STRATEGY;"number"==typeof e.strategy&&(c=e.strategy),this._handle.init(e.windowBits||r.Z_DEFAULT_WINDOWBITS,u,e.memLevel||r.Z_DEFAULT_MEMLEVEL,c,e.dictionary),this._buffer=n.allocUnsafe(this._chunkSize),this._offset=0,this._level=u,this._strategy=c,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!o._handle},configurable:!0,enumerable:!0})}function T(e,r){r&&t.nextTick(r),e._handle&&(e._handle.close(),e._handle=null)}function P(e){e.emit("close")}Object.defineProperty(r,"codes",{enumerable:!0,value:Object.freeze(d),writable:!1}),r.Deflate=b,r.Inflate=_,r.Gzip=w,r.Gunzip=E,r.DeflateRaw=k,r.InflateRaw=A,r.Unzip=S,r.createDeflate=function(e){return new b(e)},r.createInflate=function(e){return new _(e)},r.createDeflateRaw=function(e){return new k(e)},r.createInflateRaw=function(e){return new A(e)},r.createGzip=function(e){return new w(e)},r.createGunzip=function(e){return new E(e)},r.createUnzip=function(e){return new S(e)},r.deflate=function(e,t,r){return"function"==typeof t&&(r=t,t={}),g(new b(t),e,r)},r.deflateSync=function(e,t){return v(new b(t),e)},r.gzip=function(e,t,r){return"function"==typeof t&&(r=t,t={}),g(new w(t),e,r)},r.gzipSync=function(e,t){return v(new w(t),e)},r.deflateRaw=function(e,t,r){return"function"==typeof t&&(r=t,t={}),g(new k(t),e,r)},r.deflateRawSync=function(e,t){return v(new k(t),e)},r.unzip=function(e,t,r){return"function"==typeof t&&(r=t,t={}),g(new S(t),e,r)},r.unzipSync=function(e,t){return v(new S(t),e)},r.inflate=function(e,t,r){return"function"==typeof t&&(r=t,t={}),g(new _(t),e,r)},r.inflateSync=function(e,t){return v(new _(t),e)},r.gunzip=function(e,t,r){return"function"==typeof t&&(r=t,t={}),g(new E(t),e,r)},r.gunzipSync=function(e,t){return v(new E(t),e)},r.inflateRaw=function(e,t,r){return"function"==typeof t&&(r=t,t={}),g(new A(t),e,r)},r.inflateRawSync=function(e,t){return v(new A(t),e)},o.inherits(I,i),I.prototype.params=function(e,n,i){if(e<r.Z_MIN_LEVEL||e>r.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(n!=r.Z_FILTERED&&n!=r.Z_HUFFMAN_ONLY&&n!=r.Z_RLE&&n!=r.Z_FIXED&&n!=r.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+n);if(this._level!==e||this._strategy!==n){var o=this;this.flush(s.Z_SYNC_FLUSH,(function(){a(o._handle,"zlib binding closed"),o._handle.params(e,n),o._hadError||(o._level=e,o._strategy=n,i&&i())}))}else t.nextTick(i)},I.prototype.reset=function(){return a(this._handle,"zlib binding closed"),this._handle.reset()},I.prototype._flush=function(e){this._transform(n.alloc(0),"",e)},I.prototype.flush=function(e,r){var i=this,o=this._writableState;("function"==typeof e||e===undefined&&!r)&&(r=e,e=s.Z_FULL_FLUSH),o.ended?r&&t.nextTick(r):o.ending?r&&this.once("end",r):o.needDrain?r&&this.once("drain",(function(){return i.flush(e,r)})):(this._flushFlag=e,this.write(n.alloc(0),"",r))},I.prototype.close=function(e){T(this,e),t.nextTick(P,this)},I.prototype._transform=function(e,t,r){var i,o=this._writableState,a=(o.ending||o.ended)&&(!e||o.length===e.length);return null===e||n.isBuffer(e)?this._handle?(a?i=this._finishFlushFlag:(i=this._flushFlag,e.length>=o.length&&(this._flushFlag=this._opts.flush||s.Z_NO_FLUSH)),void this._processChunk(e,i,r)):r(new Error("zlib binding closed")):r(new Error("invalid input"))},I.prototype._processChunk=function(e,t,r){var i=e&&e.length,s=this._chunkSize-this._offset,o=0,l=this,f="function"==typeof r;if(!f){var h,d=[],p=0;this.on("error",(function(e){h=e})),a(this._handle,"zlib binding closed");do{var m=this._handle.writeSync(t,e,o,i,this._buffer,this._offset,s)}while(!this._hadError&&v(m[0],m[1]));if(this._hadError)throw h;if(p>=u)throw T(this),new RangeError(c);var y=n.concat(d,p);return T(this),y}a(this._handle,"zlib binding closed");var g=this._handle.write(t,e,o,i,this._buffer,this._offset,s);function v(u,c){if(this&&(this.buffer=null,this.callback=null),!l._hadError){var h=s-c;if(a(h>=0,"have should not go down"),h>0){var m=l._buffer.slice(l._offset,l._offset+h);l._offset+=h,f?l.push(m):(d.push(m),p+=m.length)}if((0===c||l._offset>=l._chunkSize)&&(s=l._chunkSize,l._offset=0,l._buffer=n.allocUnsafe(l._chunkSize)),0===c){if(o+=i-u,i=u,!f)return!0;var y=l._handle.write(t,e,o,i,l._buffer,l._offset,l._chunkSize);return y.callback=v,void(y.buffer=e)}if(!f)return!1;r()}}g.buffer=e,g.callback=v},o.inherits(b,I),o.inherits(_,I),o.inherits(w,I),o.inherits(E,I),o.inherits(k,I),o.inherits(A,I),o.inherits(S,I)}).call(this)}).call(this,e("_process"))}}},{package:"browserify-zlib",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/browserify-zlib/lib/index.js"}],[2508,{"./lib":2512,"./lib/elliptic":2511},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=e("./lib")(e("./lib/elliptic"))}}},{package:"secp256k1",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/eth-trezor-keyring/node_modules/secp256k1/elliptic.js"}],[6031,{"./account":6026,"./api":6027,"./backend/blockchain":6028,"./backend/transactions":6029,"./events":6030,"./misc":6032,"./networks/binance":6033,"./networks/bitcoin":6034,"./networks/cardano":6035,"./networks/coinInfo":6036,"./networks/eos":6037,"./networks/ethereum":6038,"./networks/nem":6039,"./networks/ripple":6040,"./networks/stellar":6041,"./networks/tezos":6042,"./params":6043,"./trezor/device":6044,"./trezor/management":6045},function(){with(this)return function(){"use strict";return function(e,t,r){r.__esModule=!0;var n=e("./api");Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===n[e]||(r[e]=n[e]))}));var i=e("./events");Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===i[e]||(r[e]=i[e]))}));var s=e("./misc");Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===s[e]||(r[e]=s[e]))}));var o=e("./params");Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===o[e]||(r[e]=o[e]))}));var a=e("./account");Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===a[e]||(r[e]=a[e]))}));var u=e("./trezor/device");Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===u[e]||(r[e]=u[e]))}));var c=e("./trezor/management");Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===c[e]||(r[e]=c[e]))}));var l=e("./networks/bitcoin");Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===l[e]||(r[e]=l[e]))}));var f=e("./networks/binance");Object.keys(f).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===f[e]||(r[e]=f[e]))}));var h=e("./networks/cardano");Object.keys(h).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===h[e]||(r[e]=h[e]))}));var d=e("./networks/coinInfo");Object.keys(d).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===d[e]||(r[e]=d[e]))}));var p=e("./networks/eos");Object.keys(p).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===p[e]||(r[e]=p[e]))}));var m=e("./networks/ethereum");Object.keys(m).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===m[e]||(r[e]=m[e]))}));var y=e("./networks/nem");Object.keys(y).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===y[e]||(r[e]=y[e]))}));var g=e("./networks/ripple");Object.keys(g).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===g[e]||(r[e]=g[e]))}));var v=e("./networks/stellar");Object.keys(v).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===v[e]||(r[e]=v[e]))}));var b=e("./networks/tezos");Object.keys(b).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===b[e]||(r[e]=b[e]))}));var _=e("./backend/blockchain");Object.keys(_).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===_[e]||(r[e]=_[e]))}));var w=e("./backend/transactions");Object.keys(w).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===w[e]||(r[e]=w[e]))}))}}},{package:"trezor-connect",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/trezor-connect/lib/types/index.js"}],[6010,{"./blockchain":6005,"./cardano":6006,"./device":6007,"./errors":6008,"./iframe":6009,"./network":6011,"./popup":6012,"./transport":6013,"./ui":6014},function(){with(this)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.CARDANO=r.UI=r.TRANSPORT=r.POPUP=r.NETWORK=r.IFRAME=r.ERRORS=r.DEVICE=r.BLOCKCHAIN=r.BLOCKCHAIN_EVENT=r.RESPONSE_EVENT=r.TRANSPORT_EVENT=r.DEVICE_EVENT=r.UI_EVENT=r.CORE_EVENT=void 0;var n=d(e("./blockchain"));r.BLOCKCHAIN=n;var i=d(e("./device"));r.DEVICE=i;var s=d(e("./errors"));r.ERRORS=s;var o=d(e("./iframe"));r.IFRAME=o;var a=d(e("./network"));r.NETWORK=a;var u=d(e("./popup"));r.POPUP=u;var c=d(e("./transport"));r.TRANSPORT=c;var l=d(e("./ui"));r.UI=l;var f=d(e("./cardano"));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}r.CARDANO=f;r.CORE_EVENT="CORE_EVENT";r.UI_EVENT="UI_EVENT";r.DEVICE_EVENT="DEVICE_EVENT";r.TRANSPORT_EVENT="TRANSPORT_EVENT";r.RESPONSE_EVENT="RESPONSE_EVENT";r.BLOCKCHAIN_EVENT="BLOCKCHAIN_EVENT"}}},{package:"trezor-connect",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/trezor-connect/lib/constants/index.js"}],[6016,{"../../constants":6010,"../../data/ConnectSettings":6015,"../../iframe/builder":6018,"../../message":6022,"../../message/builder":6021,"../../popup/PopupManager":6024,"../../types":6031,"../../utils/debug":6047,"../../webusb/button":6049,"@babel/runtime/helpers/asyncToGenerator":190,"@babel/runtime/helpers/defineProperty":194,"@babel/runtime/helpers/interopRequireDefault":200,"@babel/runtime/regenerator":220,events:2106},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("@babel/runtime/helpers/interopRequireDefault");r.__esModule=!0,r.disableWebUSB=r.requestLogin=r.customMessage=r.getSettings=r.renderWebUSBButton=r.uiResponse=r.call=r.init=r.cancel=r.dispose=r.manifest=r.eventEmitter=void 0;var i=n(e("@babel/runtime/regenerator")),s=n(e("@babel/runtime/helpers/defineProperty")),o=n(e("@babel/runtime/helpers/asyncToGenerator")),a=n(e("events")),u=n(e("../../popup/PopupManager")),c=g(e("../../iframe/builder")),l=n(e("../../webusb/button")),f=e("../../message"),h=e("../../message/builder"),d=e("../../data/ConnectSettings"),p=e("../../utils/debug"),m=e("../../constants");g(e("../../types"));function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(y=function(e){return e?r:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=y(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){(0,s.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _=new a.default;r.eventEmitter=_;var w,E,k=(0,p.initLog)("[trezor-connect.js]"),A=function(){var e=new u.default(w);return e.on(m.POPUP.CLOSED,(function(e){c.postMessage({type:m.POPUP.CLOSED,payload:e?{error:e}:null},!1)})),e};r.manifest=function(e){w=(0,d.parse)({manifest:e})};var S=function(){_.removeAllListeners(),c.dispose(),E&&E.close()};r.dispose=S;r.cancel=function(e){E&&E.emit(m.POPUP.CLOSED,e)};var x=function(e){if(e.origin===c.origin){var t=(0,f.parseMessage)(e.data),r=t.event,n=t.type,i=t.payload,s=t.id||0;switch(k.log("handleMessage",t),r){case m.RESPONSE_EVENT:c.messagePromises[s]?(c.messagePromises[s].resolve({id:s,success:t.success,payload:i}),delete c.messagePromises[s]):k.warn("Unknown message id "+s);break;case m.DEVICE_EVENT:case m.TRANSPORT_EVENT:case m.BLOCKCHAIN_EVENT:_.emit(r,t),_.emit(n,i);break;case m.UI_EVENT:if(n===m.IFRAME.BOOTSTRAP){c.clearTimeout();break}n===m.IFRAME.LOADED&&c.initPromise.resolve(),n===m.IFRAME.ERROR&&c.initPromise.reject(i.error),_.emit(r,t),_.emit(n,i);break;default:k.log("Undefined message",r,e)}}},I=function(){var e=(0,o.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),!c.instance){e.next=3;break}throw m.ERRORS.TypedError("Init_AlreadyInitialized");case 3:if(w||(w=(0,d.parse)(t)),w.manifest){e.next=6;break}throw m.ERRORS.TypedError("Init_ManifestMissing");case 6:if(!w.lazyLoad){e.next=9;break}return w.lazyLoad=!1,e.abrupt("return");case 9:return E||(E=A()),k.enabled=!!w.debug,window.addEventListener("message",x),window.addEventListener("unload",S),e.next=15,c.init(w);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();r.init=I;var T=function(){var e=(0,o.default)(i.default.mark((function e(t){var r;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.instance||c.timeout){e.next=15;break}if((w=(0,d.parse)(w)).manifest){e.next=4;break}return e.abrupt("return",(0,f.errorMessage)(m.ERRORS.TypedError("Init_ManifestMissing")));case 4:return E||(E=A()),E.request(!0),e.prev=6,e.next=9,I(w);case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(6),E&&(["Init_IframeBlocked","Init_IframeTimeout"].includes(e.t0.code)?E.postMessage((0,h.UiMessage)(m.UI.IFRAME_FAILURE)):E.close()),e.abrupt("return",(0,f.errorMessage)(e.t0));case 15:if(!c.timeout){e.next=17;break}return e.abrupt("return",(0,f.errorMessage)(m.ERRORS.TypedError("Init_ManifestMissing")));case 17:if(!c.error){e.next=19;break}return e.abrupt("return",(0,f.errorMessage)(c.error));case 19:return w.popup&&E&&E.request(),e.prev=20,e.next=23,c.postMessage({type:m.IFRAME.CALL,payload:t});case 23:if(!(r=e.sent)){e.next=27;break}return!r.success&&"Device_CallInProgress"!==r.payload.code&&E&&E.unlock(),e.abrupt("return",r);case 27:return E&&E.unlock(),e.abrupt("return",(0,f.errorMessage)(m.ERRORS.TypedError("Method_NoResponse")));case 31:return e.prev=31,e.t1=e.catch(20),k.error("__call error",e.t1),E&&E.close(),e.abrupt("return",(0,f.errorMessage)(e.t1));case 36:case"end":return e.stop()}}),e,null,[[6,11],[20,31]])})));return function(t){return e.apply(this,arguments)}}();r.call=T;var P=function(e){c.postMessage({event:m.UI_EVENT,type:m.UI.CUSTOM_MESSAGE_RESPONSE,payload:e})};r.uiResponse=function(e){var t=e.type,r=e.payload;c.postMessage({event:m.UI_EVENT,type:t,payload:r})};r.renderWebUSBButton=function(e){(0,l.default)(e,w.webusbSrc,c.origin)};r.getSettings=function(){return c.instance?T({method:"getSettings"}):Promise.resolve((0,f.errorMessage)(m.ERRORS.TypedError("Init_NotInitialized")))};var N=function(){var e=(0,o.default)(i.default.mark((function e(t){var r,n,s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"==typeof t.callback){e.next=2;break}return e.abrupt("return",(0,f.errorMessage)(m.ERRORS.TypedError("Method_CustomMessage_Callback")));case 2:return r=t.callback,n=function(){var e=(0,o.default)(i.default.mark((function e(t){var n,s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.data)||n.type!==m.UI.CUSTOM_MESSAGE_REQUEST){e.next=6;break}return e.next=4,r(n.payload);case 4:s=e.sent,P(s||{message:"release"});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),window.addEventListener("message",n,!1),e.next=7,T(b(b({method:"customMessage"},t),{},{callback:null}));case 7:return s=e.sent,window.removeEventListener("message",n),e.abrupt("return",s);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();r.customMessage=N;var C=function(){var e=(0,o.default)(i.default.mark((function e(t){var r,n,s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof t.callback){e.next=9;break}return r=t.callback,n=function(){var e=(0,o.default)(i.default.mark((function e(t){var n,s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.data)||n.type!==m.UI.LOGIN_CHALLENGE_REQUEST){e.next=12;break}return e.prev=2,e.next=5,r();case 5:s=e.sent,c.postMessage({event:m.UI_EVENT,type:m.UI.LOGIN_CHALLENGE_RESPONSE,payload:s}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),c.postMessage({event:m.UI_EVENT,type:m.UI.LOGIN_CHALLENGE_RESPONSE,payload:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),window.addEventListener("message",n,!1),e.next=6,T(b(b({method:"requestLogin"},t),{},{asyncChallenge:!0,callback:null}));case 6:return s=e.sent,window.removeEventListener("message",n),e.abrupt("return",s);case 9:return e.abrupt("return",T(b({method:"requestLogin"},t)));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();r.requestLogin=C;r.disableWebUSB=function(){c.postMessage({event:m.UI_EVENT,type:m.TRANSPORT.DISABLE_WEBUSB})}}}},{package:"trezor-connect",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/trezor-connect/lib/env/browser/index.js"}],[1116,{"./encryption":1115,"./personal-sign":1117,"./sign-typed-data":1118,"./utils":1119},function(){with(this)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.normalize=r.concatSig=void 0,i(e("./personal-sign"),r),i(e("./sign-typed-data"),r),i(e("./encryption"),r);var s=e("./utils");Object.defineProperty(r,"concatSig",{enumerable:!0,get:function(){return s.concatSig}}),Object.defineProperty(r,"normalize",{enumerable:!0,get:function(){return s.normalize}})}}},{package:"@metamask/eth-sig-util",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/eth-sig-util/dist/index.js"}],[582,{"./bc-ur-registry-eth.cjs.development.js":580,"./bc-ur-registry-eth.cjs.production.min.js":581},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=e("./bc-ur-registry-eth.cjs.production.min.js")}}},{package:"@keystonehq/bc-ur-registry-eth",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@keystonehq/bc-ur-registry-eth/dist/index.js"}],[547,{"./base-eth-keyring.cjs.development.js":545,"./base-eth-keyring.cjs.production.min.js":546},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=e("./base-eth-keyring.cjs.production.min.js")}}},{package:"@keystonehq/base-eth-keyring",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@keystonehq/base-eth-keyring/dist/index.js"}],[587,{"./ComposedStore":583,"./MergedStore":584,"./ObservableStore":585,"./asStream":586,"./transform":588},function(){with(this)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./asStream"),r),i(e("./ComposedStore"),r),i(e("./MergedStore"),r),i(e("./ObservableStore"),r),i(e("./transform"),r)}}},{package:"@metamask/obs-store",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/obs-store/dist/index.js"}],[22,{"../util":24,"json-rpc-engine":4772},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createPendingNonceMiddleware=function({getPendingNonce:e}){return(0,n.createAsyncMiddleware)((async(t,r,n)=>{const{method:i,params:s}=t;if("eth_getTransactionCount"!==i)return void n();const[o,a]=s;"pending"===a?r.result=await e(o):n()}))},r.createPendingTxMiddleware=function({getPendingTransactionByHash:e}){return(0,n.createAsyncMiddleware)((async(t,r,n)=>{const{method:s,params:o}=t;if("eth_getTransactionByHash"!==s)return void n();const[a]=o,u=e(a);u?r.result=(0,i.formatTxMetaForRpcResult)(u):n()}))};var n=e("json-rpc-engine"),i=e("../util")}}},{package:"<root>",file:"/Users/mac/code/a-mises/metamask-extension/app/scripts/controllers/network/middleware/pending.js"}],[5926,{"../plugins/json2":5927,"../src/store-engine":5929,"../storages/all":5931},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("../src/store-engine"),i=e("../storages/all"),s=[e("../plugins/json2")];t.exports=n.createStore(i,s)}}},{package:"store",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/store/dist/store.legacy.js"}],[173,{"./keyValueStore":172,"./utils/index":178,"@babel/runtime/helpers/asyncToGenerator":190,"@babel/runtime/helpers/classCallCheck":191,"@babel/runtime/helpers/createClass":193,"@babel/runtime/helpers/defineProperty":194,"@babel/runtime/helpers/get":196,"@babel/runtime/helpers/getPrototypeOf":197,"@babel/runtime/helpers/inherits":198,"@babel/runtime/helpers/interopRequireDefault":200,"@babel/runtime/helpers/possibleConstructorReturn":211,"@babel/runtime/regenerator":220},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/regenerator")),s=n(e("@babel/runtime/helpers/defineProperty")),o=n(e("@babel/runtime/helpers/asyncToGenerator")),a=n(e("@babel/runtime/helpers/classCallCheck")),u=n(e("@babel/runtime/helpers/createClass")),c=n(e("@babel/runtime/helpers/possibleConstructorReturn")),l=n(e("@babel/runtime/helpers/getPrototypeOf")),f=n(e("@babel/runtime/helpers/get")),h=n(e("@babel/runtime/helpers/inherits"));function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(r,!0).forEach((function(t){(0,s.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m=e("./keyValueStore"),y=e("./utils/index"),g=function(e){function t(e,r,n,i){var s;return(0,a.default)(this,t),(s=(0,c.default)(this,(0,l.default)(t).call(this,e,r,n,i))).keyring=i.getKeyringBySpaceName(r),s._salt=s.keyring.getDBSalt(),s}var r,n,s,d,m;return(0,h.default)(t,e),(0,u.default)(t,[{key:"get",value:(m=(0,o.default)(i.default.mark((function e(r){var n,s,o=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&o[1]!==undefined?o[1]:{},e.next=3,(0,f.default)((0,l.default)(t.prototype),"get",this).call(this,this._genDbKey(r),n);case 3:if(s=e.sent){e.next=6;break}return e.abrupt("return",null);case 6:if(!n.metadata){e.next=8;break}return e.abrupt("return",p({},s,{value:this._decryptEntry(s.value)}));case 8:return e.abrupt("return",this._decryptEntry(s));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"getMetadata",value:(d=(0,o.default)(i.default.mark((function e(r){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)((0,l.default)(t.prototype),"getMetadata",this).call(this,this._genDbKey(r)));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"set",value:(s=(0,o.default)(i.default.mark((function e(r,n){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._encryptEntry(n),r=this._genDbKey(r),e.abrupt("return",(0,f.default)((0,l.default)(t.prototype),"set",this).call(this,r,n));case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"setMultiple",value:(n=(0,o.default)(i.default.mark((function e(r,n){var s,o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y.throwIfNotEqualLenArrays(r,n),s=r.map(this._genDbKey,this),o=n.map(this._encryptEntry,this),e.abrupt("return",(0,f.default)((0,l.default)(t.prototype),"setMultiple",this).call(this,s,o));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"remove",value:(r=(0,o.default)(i.default.mark((function e(r){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._genDbKey(r),e.abrupt("return",(0,f.default)((0,l.default)(t.prototype),"remove",this).call(this,r));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"_genDbKey",value:function(e){return y.throwIfUndefined(e,"key"),y.sha256Multihash(this._salt+e)}},{key:"_encryptEntry",value:function(e){if(void 0===e)throw new Error("Entry to encrypt cannot be undefined");return this.keyring.symEncrypt(this._pad(JSON.stringify(e)))}},{key:"_decryptEntry",value:function(e){var t=e.ciphertext,r=e.nonce;return JSON.parse(this._unpad(this.keyring.symDecrypt(t,r)))}},{key:"_pad",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:24,r=(t-e.length%t)%t;return"".concat(e).concat("\0".repeat(r))}},{key:"_unpad",value:function(e){return e.replace(/\0+$/,"")}},{key:"log",get:function(){var e=this;return(0,f.default)((0,l.default)(t.prototype),"log",this).map((function(t){return Object.assign(t,{value:t.value?e._decryptEntry(t.value):null})}))}}]),t}(m);t.exports=g}}},{package:"3box",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/3box/lib/privateStore.js"}],[175,{"./keyValueStore":172,"./thread":176,"./utils":178,"@babel/runtime/helpers/asyncToGenerator":190,"@babel/runtime/helpers/classCallCheck":191,"@babel/runtime/helpers/createClass":193,"@babel/runtime/helpers/defineProperty":194,"@babel/runtime/helpers/interopRequireDefault":200,"@babel/runtime/regenerator":220,"orbit-db/src/orbit-db-address":5409},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/defineProperty")),s=n(e("@babel/runtime/regenerator")),o=n(e("@babel/runtime/helpers/asyncToGenerator")),a=n(e("@babel/runtime/helpers/classCallCheck")),u=n(e("@babel/runtime/helpers/createClass"));function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(r,!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f=e("./keyValueStore"),h=e("./thread"),d=e("./utils"),p=d.sha256Multihash,m=d.throwIfUndefined,y=d.throwIfNotEqualLenArrays,g=e("orbit-db/src/orbit-db-address"),v=function(e){return"3box.space.".concat(e,".keyvalue")},b=function(e,t){return"3box.thread.".concat(e,".").concat(t)},_=function(){function e(t,r,n,i,s){(0,a.default)(this,e),this._name=t,this._3id=r,this._ensureConnected=s,this._store=new f(n,v(this._name),this._ensureConnected,this._3id),this._orbitdb=n,this._activeThreads={},this._rootStore=i,this.public=null,this.private=null}var t,r,n,i,c,l;return(0,u.default)(e,[{key:"open",value:(l=(0,o.default)(s.default.mark((function e(){var t,r,n,i,a,u,c,l,f=this,h=arguments;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&h[0]!==undefined?h[0]:{},this._store._db){e.next=29;break}return e.next=4,this._3id.initKeyringByName(this._name);case 4:return r=e.sent,t.consentCallback&&t.consentCallback(r,this._name),e.next=8,this._store._load();case 8:return n=e.sent,e.next=11,this._rootStore.iterator({limit:-1}).collect();case 11:if(i=e.sent,a=i.find((function(e){return e.payload.value.odbAddress&&-1!==e.payload.value.odbAddress.indexOf(v(f._name))}))){e.next=18;break}return e.next=16,this._rootStore.add({type:"space",DID:this.DID,odbAddress:n});case 16:e.next=23;break;case 18:if(a.payload.value.type){e.next=23;break}return e.next=21,this._rootStore.del(a.hash);case 21:return e.next=23,this._rootStore.add({type:"space",DID:this.DID,odbAddress:n});case 23:u=t.numEntriesMessages&&t.numEntriesMessages[n],c=u?t.numEntriesMessages[n].numEntries:undefined,l=function(){var e=(0,o.default)(s.default.mark((function e(){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f._store._sync(c);case 2:t.onSyncDone&&t.onSyncDone();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),this._syncSpacePromise=l(),this.public=w(this._store),this.private=E(this._store,this._3id.getKeyringBySpaceName(v(this._name)));case 29:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"joinThread",value:(c=(0,o.default)(s.default.mark((function e(t){var r,n,i,o,a=arguments;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&a[1]!==undefined?a[1]:{},n=r.noAutoSub?function(){}:this.subscribeThread.bind(this),r.firstModerator||(r.firstModerator=this._3id.getSubDID(this._name)),i=new h(this._orbitdb,b(this._name,t),this._3id,r.members,r.firstModerator,n,this._ensureConnected),e.next=6,i._getThreadAddress();case 6:if(o=e.sent,!this._activeThreads[o]){e.next=9;break}return e.abrupt("return",this._activeThreads[o]);case 9:return e.next=11,i._load();case 11:return this._activeThreads[o]=i,e.abrupt("return",i);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"joinThreadByAddress",value:(i=(0,o.default)(s.default.mark((function e(t){var r,n,i,o,a,u=arguments;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&u[1]!==undefined?u[1]:{},g.isValid(t)){e.next=3;break}throw new Error("joinThreadByAddress: valid orbitdb address required");case 3:if(n=t.split(".")[2],i=t.split(".")[3],n===this._name){e.next=7;break}throw new Error("joinThreadByAddress: attempting to open thread from different space, must open within same space");case 7:if(!this._activeThreads[t]){e.next=9;break}return e.abrupt("return",this._activeThreads[t]);case 9:return o=r.noAutoSub?function(){}:this.subscribeThread.bind(this),a=new h(this._orbitdb,b(this._name,i),this._3id,r.members,r.firstModerator,o,this._ensureConnected),e.next=13,a._load(t);case 13:return this._activeThreads[t]=a,e.abrupt("return",a);case 15:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"subscribeThread",value:(n=(0,o.default)(s.default.mark((function e(t){var r,n,i=arguments;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=i.length>1&&i[1]!==undefined?i[1]:{},g.isValid(t)){e.next=3;break}throw new Error("subscribeThread: must subscribe to valid thread/orbitdb address");case 3:return n="thread-".concat(t),e.next=6,this._syncSpacePromise;case 6:return e.next=8,this.public.get(n);case 8:if(e.sent){e.next=11;break}return e.next=11,this.public.set(n,Object.assign({},r,{address:t}));case 11:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"unsubscribeThread",value:(r=(0,o.default)(s.default.mark((function e(t){var r;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="thread-".concat(t),e.next=3,this.public.get(r);case 3:if(!e.sent){e.next=6;break}return e.next=6,this.public.remove(r);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"subscribedThreads",value:(t=(0,o.default)(s.default.mark((function e(){var t;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.public.all();case 2:return t=e.sent,e.abrupt("return",Object.keys(t).reduce((function(e,r){if(r.startsWith("thread")){var n=r.split("thread-")[1];g.isValid(n)&&e.push(t[r])}return e}),[]));case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"DID",get:function(){return this._3id.getSubDID(this._name)}}]),e}();t.exports=_;var w=function(e){var t,r,n,i,a,u,c="pub_";return{get:(u=(0,o.default)(s.default.mark((function t(r){var n,i=arguments;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&i[1]!==undefined?i[1]:{},t.abrupt("return",e.get(c+r,n));case 2:case"end":return t.stop()}}),t)}))),function(e){return u.apply(this,arguments)}),getMetadata:(a=(0,o.default)(s.default.mark((function t(r){return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.getMetadata(c+r));case 1:case"end":return t.stop()}}),t)}))),function(e){return a.apply(this,arguments)}),set:(i=(0,o.default)(s.default.mark((function t(r,n){return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m(r,"key"),t.abrupt("return",e.set(c+r,n));case 2:case"end":return t.stop()}}),t)}))),function(e,t){return i.apply(this,arguments)}),setMultiple:(n=(0,o.default)(s.default.mark((function t(r,n){var i;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return y(r,n),i=r.map((function(e){return c+e})),t.abrupt("return",e.setMultiple(i,n));case 3:case"end":return t.stop()}}),t)}))),function(e,t){return n.apply(this,arguments)}),remove:(r=(0,o.default)(s.default.mark((function t(r){return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m(r,"key"),t.abrupt("return",e.remove(c+r));case 2:case"end":return t.stop()}}),t)}))),function(e){return r.apply(this,arguments)}),get log(){return e.log.reduce((function(e,t){return t.key.startsWith(c)&&(t.key=t.key.slice(4),e.push(t)),e}),[])},all:(t=(0,o.default)(s.default.mark((function t(r){var n;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.all(r);case 2:return n=t.sent,t.abrupt("return",Object.keys(n).reduce((function(e,t){return t.startsWith(c)&&(e[t.slice(4)]=n[t]),e}),{}));case 4:case"end":return t.stop()}}),t)}))),function(e){return t.apply(this,arguments)})}},E=function(e,t){var r,n,i,a,u,c,f="priv_",h=t.getDBSalt(),d=function(e){return m(e,"key"),f+p(h+e)},g=function(e){return t.symEncrypt(function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:24,r=(t-e.length%t)%t;return"".concat(e).concat("\0".repeat(r))}(JSON.stringify(e)))},v=function(e){var r=e.ciphertext,n=e.nonce;return JSON.parse(t.symDecrypt(r,n).replace(/\0+$/,""))};return{get:(c=(0,o.default)(s.default.mark((function t(r){var n,i,o=arguments;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&o[1]!==undefined?o[1]:{},t.next=3,e.get(d(r),n);case 3:if(i=t.sent){t.next=6;break}return t.abrupt("return",null);case 6:if(!n.metadata){t.next=8;break}return t.abrupt("return",l({},i,{value:v(i.value).value}));case 8:return t.abrupt("return",v(i).value);case 9:case"end":return t.stop()}}),t)}))),function(e){return c.apply(this,arguments)}),getMetadata:(u=(0,o.default)(s.default.mark((function t(r){return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.getMetadata(d(r)));case 1:case"end":return t.stop()}}),t)}))),function(e){return u.apply(this,arguments)}),set:(a=(0,o.default)(s.default.mark((function t(r,n){return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.set(d(r),g({key:r,value:n})));case 1:case"end":return t.stop()}}),t)}))),function(e,t){return a.apply(this,arguments)}),setMultiple:(i=(0,o.default)(s.default.mark((function t(r,n){var i,o;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return y(r,n),i=r.map(d),o=n.map((function(e,t){return g({key:r[t],value:e})})),t.abrupt("return",e.setMultiple(i,o));case 4:case"end":return t.stop()}}),t)}))),function(e,t){return i.apply(this,arguments)}),remove:(n=(0,o.default)(s.default.mark((function t(r){return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.remove(d(r)));case 1:case"end":return t.stop()}}),t)}))),function(e){return n.apply(this,arguments)}),get log(){return e.log.reduce((function(e,t){if(t.key.startsWith(f)){var r=v(t.value);t.key=r.key,t.value=r.value,e.push(t)}return e}),[])},all:(r=(0,o.default)(s.default.mark((function t(){var r,n,i=arguments;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>0&&i[0]!==undefined?i[0]:{},t.next=3,e.all(r);case 3:return n=t.sent,t.abrupt("return",Object.keys(n).reduce((function(e,t){if(t.startsWith(f)){var i=n[t];if(r.metadata){var s=v(i.value);e[s.key]=l({},i,{value:s.value})}else{var o=v(i);e[o.key]=o.value}}return e}),{}));case 5:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})}}}}},{package:"3box",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/3box/lib/space.js"}],[170,{"./config.js":171,"./utils/id":177,"./utils/index":178,"./utils/verifier":179,"@babel/runtime/helpers/asyncToGenerator":190,"@babel/runtime/helpers/interopRequireDefault":200,"@babel/runtime/regenerator":220,"graphql-request":4345},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/regenerator")),s=n(e("@babel/runtime/helpers/asyncToGenerator")),o=e("graphql-request").request,a=e("./utils/index"),u=e("./utils/verifier"),c=e("./utils/id").isMuportDID,l=e("./config.js"),f=l.graphql_server_url,h=l.profile_server_url,d=l.address_server_url;function p(){return p=(0,s.default)(i.default.mark((function e(t){var r,n,s=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&s[1]!==undefined?s[1]:d,e.next=3,a.fetchJson(r+"/odbAddress/"+t);case 3:return n=e.sent,e.abrupt("return",n.data.rootStoreAddress);case 5:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function m(){return m=(0,s.default)(i.default.mark((function e(t){var r,n=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.length>1&&n[1]!==undefined?n[1]:h,e.prev=1,!c(t)){e.next=8;break}return e.next=5,a.fetchJson(r+"/list-spaces?did="+encodeURIComponent(t));case 5:case 10:return e.abrupt("return",e.sent);case 8:return e.next=10,a.fetchJson(r+"/list-spaces?address="+encodeURIComponent(t));case 11:e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(1),e.abrupt("return",[]);case 16:case"end":return e.stop()}}),e,null,[[1,13]])}))),m.apply(this,arguments)}function y(){return y=(0,s.default)(i.default.mark((function e(t,r){var n,s,o,u,l,f=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=f.length>2&&f[2]!==undefined?f[2]:h,s=f.length>3&&f[3]!==undefined?f[3]:{},o=s.metadata,!(u=s.blocklist)||!u(t)){e.next=4;break}throw new Error("user with ".concat(t," is blocked"));case 4:return l="".concat(n,"/space"),e.prev=5,l=c(t)?"".concat(l,"?did=").concat(encodeURIComponent(t)):"".concat(l,"?address=").concat(encodeURIComponent(t.toLowerCase())),l="".concat(l,"&name=").concat(encodeURIComponent(r)),o&&(l="".concat(l,"&metadata=").concat(encodeURIComponent(o))),e.next=11,a.fetchJson(l);case 11:return e.abrupt("return",e.sent);case 14:return e.prev=14,e.t0=e.catch(5),e.abrupt("return",{});case 17:case"end":return e.stop()}}),e,null,[[5,14]])}))),y.apply(this,arguments)}function g(e,t){return v.apply(this,arguments)}function v(){return v=(0,s.default)(i.default.mark((function e(t,r){var n,s,o=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>2&&o[2]!==undefined?o[2]:{},e.next=3,w(t,n);case 3:if((s=e.sent).spaces[r]&&s.spaces[r].DID){e.next=6;break}throw new Error("Could not find appropriate DID for address ".concat(t));case 6:return e.abrupt("return",s.spaces[r].DID);case 7:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}function b(){return b=(0,s.default)(i.default.mark((function e(t,r,n,s){var o,u,c,l=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=l.length>4&&l[4]!==undefined?l[4]:{},u=o.profileServer||h,!n.startsWith("0x")){e.next=6;break}return e.next=5,g(n,t,o);case 5:n=e.sent;case 6:return e.prev=6,c="".concat(u,"/thread?space=").concat(encodeURIComponent(t),"&name=").concat(encodeURIComponent(r)),c+="&mod=".concat(encodeURIComponent(n),"&members=").concat(encodeURIComponent(s)),e.next=11,a.fetchJson(c);case 11:return e.abrupt("return",e.sent);case 14:throw e.prev=14,e.t0=e.catch(6),new Error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[6,14]])}))),b.apply(this,arguments)}function _(){return _=(0,s.default)(i.default.mark((function e(t){var r,n,s=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&s[1]!==undefined?s[1]:{},n=r.profileServer||h,e.prev=2,e.next=5,a.fetchJson("".concat(n,"/thread?address=").concat(encodeURIComponent(t)));case 5:return e.abrupt("return",e.sent);case 8:throw e.prev=8,e.t0=e.catch(2),new Error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])}))),_.apply(this,arguments)}function w(e){return E.apply(this,arguments)}function E(){return E=(0,s.default)(i.default.mark((function e(t){var r,n,s=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&s[1]!==undefined?s[1]:{},n=r.profileServer||h,e.prev=2,e.next=5,a.fetchJson("".concat(n,"/config?address=").concat(encodeURIComponent(t)));case 5:return e.abrupt("return",e.sent);case 8:throw e.prev=8,e.t0=e.catch(2),new Error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])}))),E.apply(this,arguments)}function k(){return k=(0,s.default)(i.default.mark((function e(t){var r,n,s,o,u,l=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>1&&l[1]!==undefined?l[1]:h,n=l.length>2&&l[2]!==undefined?l[2]:{},s=n.metadata,!(o=n.blocklist)||!o(t)){e.next=4;break}throw new Error("user with ".concat(t," is blocked"));case 4:return u="".concat(r,"/profile"),e.prev=5,u=c(t)?"".concat(u,"?did=").concat(encodeURIComponent(t)):"".concat(u,"?address=").concat(encodeURIComponent(t.toLowerCase())),s&&(u="".concat(u,"&metadata=").concat(encodeURIComponent(s))),e.next=10,a.fetchJson(u);case 10:return e.abrupt("return",e.sent);case 13:return e.prev=13,e.t0=e.catch(5),e.abrupt("return",{});case 16:case"end":return e.stop()}}),e,null,[[5,13]])}))),k.apply(this,arguments)}function A(){return A=(0,s.default)(i.default.mark((function e(t){var r,n,s,o=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&o[1]!==undefined?o[1]:{},r=Object.assign({profileServer:h},r),n={addressList:[],didList:[]},t.forEach((function(e){c(e)?n.didList.push(e):n.addressList.push(e)})),s="".concat(r.profileServer,"/profileList"),e.abrupt("return",a.fetchJson(s,n));case 6:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}function S(){return S=(0,s.default)(i.default.mark((function e(t){var r,n=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&n[1]!==undefined?n[1]:{},r=Object.assign({graphqlServer:f},r),e.abrupt("return",o(r.graphqlServer,t));case 3:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}function x(){return(x=(0,s.default)(i.default.mark((function e(t){var r,n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,e.next=4,u.verifyDID(t.proof_did);case 4:if(n=e.sent,r.did=n,!t.proof_github){e.next=15;break}return e.prev=7,e.next=10,u.verifyGithub(n,t.proof_github);case 10:r.github=e.sent,e.next=15;break;case 13:e.prev=13,e.t0=e.catch(7);case 15:if(!t.proof_twitter){e.next=24;break}return e.prev=16,e.next=19,u.verifyTwitter(n,t.proof_twitter);case 19:r.twitter=e.sent,e.next=24;break;case 22:e.prev=22,e.t1=e.catch(16);case 24:if(!t.ethereum_proof){e.next=33;break}return e.prev=25,e.next=28,u.verifyEthereum(t.ethereum_proof,n);case 28:r.ethereum=e.sent,e.next=33;break;case 31:e.prev=31,e.t2=e.catch(25);case 33:e.next=37;break;case 35:e.prev=35,e.t3=e.catch(1);case 37:return e.abrupt("return",r);case 38:case"end":return e.stop()}}),e,null,[[1,35],[7,13],[16,22],[25,31]])})))).apply(this,arguments)}t.exports={profileGraphQL:function(e){return S.apply(this,arguments)},getProfile:function(e){return k.apply(this,arguments)},getSpace:function(e,t){return y.apply(this,arguments)},listSpaces:function(e){return m.apply(this,arguments)},getThread:function(e,t,r,n){return b.apply(this,arguments)},getThreadByAddress:function(e){return _.apply(this,arguments)},getConfig:w,getRootStoreAddress:function(e){return p.apply(this,arguments)},getProfiles:function(e){return A.apply(this,arguments)},getVerifiedAccounts:function(e){return x.apply(this,arguments)},getSpaceDID:g}}}},{package:"3box",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/3box/lib/api.js"}],[5399,{"./src/ipfs-pubsub":5400},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=e("./src/ipfs-pubsub")}}},{package:"orbit-db-pubsub",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/orbit-db-pubsub/index.js"}],[178,{"@babel/runtime/helpers/asyncToGenerator":190,"@babel/runtime/helpers/interopRequireDefault":200,"@babel/runtime/regenerator":220,buffer:2105,ethers:183,"js-sha256":4763,multihashes:5282,"node-fetch":5310},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n,i,s,o,a=e("@babel/runtime/helpers/interopRequireDefault"),u=a(e("@babel/runtime/regenerator")),c=a(e("@babel/runtime/helpers/asyncToGenerator")),l="undefined"!=typeof window?window.fetch:e("node-fetch"),f=e("multihashes"),h=e("js-sha256").sha256,d=e("ethers"),p=function(e,t){var r=new Error(t);return r.statusCode=e,r},m=function(e,t){var r="Create a new 3Box profile"+"\n\n"+"- \n"+"Your unique profile ID is "+e;return t&&(r+=" \n"+"Timestamp: "+t),r},y=function(e,t,r){var n=(Boolean(e.sendAsync)?e.sendAsync:e.send).bind(e);return new Promise((function(e,r){n(t,(function(t,n){t&&r(t),n.error&&r(n.error),e(n.result)}))}))};t.exports={getMessageConsent:m,recoverPersonalSign:(o=(0,c.default)(u.default.mark((function e(t,r){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&r){e.next=2;break}throw new Error("recoverPersonalSign: missing arguments, msg and/or personalSig");case 2:return e.abrupt("return",d.utils.verifyMessage(t,r));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return o.apply(this,arguments)}),openBoxConsent:function(e,t){var n="0x"+r.from("This app wants to view and update your 3Box profile.","utf8").toString("hex");return y(t,{jsonrpc:"2.0",id:0,method:"personal_sign",params:[n,e],fromAddress:e})},openSpaceConsent:function(e,t,n){var i="Allow this app to open your ".concat(n," space."),s="0x"+r.from(i,"utf8").toString("hex");return y(t,{jsonrpc:"2.0",id:0,method:"personal_sign",params:[s,e],fromAddress:e})},getLinkConsent:(s=(0,c.default)(u.default.mark((function e(t,n,i){var s,o,a,c,l;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Math.floor((new Date).getTime()/1e3),o=m(n,s),a="0x"+r.from(o,"utf8").toString("hex"),c=[a,t],e.next=7,y(i,{jsonrpc:"2.0",id:0,method:"personal_sign",params:c,fromAddress:t});case 7:return l=e.sent,e.abrupt("return",{msg:o,sig:l,timestamp:s});case 9:case"end":return e.stop()}}),e)}))),function(e,t,r){return s.apply(this,arguments)}),fetchJson:(i=(0,c.default)(u.default.mark((function e(t,r){var n,i;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r&&(n={body:JSON.stringify(r),method:"POST",headers:{"Content-Type":"application/json"}}),e.next=3,l(t,n);case 3:if(!(i=e.sent).ok){e.next=8;break}return e.abrupt("return",i.json());case 8:throw p(i.status,"Invalid response (".concat(i.status,") for query at ").concat(t));case 9:case"end":return e.stop()}}),e)}))),function(e,t){return i.apply(this,arguments)}),fetchText:(n=(0,c.default)(u.default.mark((function e(t,r){var n;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(t,r);case 2:if(!(n=e.sent).ok){e.next=7;break}return e.abrupt("return",n.text());case 7:throw p(n.status,"Invalid response (".concat(n.status,") for query at ").concat(t));case 8:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)}),throwIfUndefined:function(e,t){if(e===undefined||null===e)throw new Error("".concat(t," is a required argument"))},throwIfNotEqualLenArrays:function(e,t){if(!Array.isArray(e)||!Array.isArray(t))throw new Error("One or more arguments are not an array");if(e.length!==t.length)throw new Error("Arrays must be of the same length")},sha256Multihash:function(e){var t=r.from(h.digest(e));return f.encode(t,"sha2-256").toString("hex")},sha256:h}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/3box/lib/utils/index.js"}],[171,{_process:5480,"ipfs-log":4496},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("ipfs-log"),i="0.0.3";t.exports={address_server_url:r.env.ADDRESS_SERVER_URL||"https://beta.3box.io/address-server",pinning_node:r.env.PINNING_NODE||"/dnsaddr/ipfs.3box.io/tcp/443/wss/ipfs/QmZvxEpiVNjmNbEKyQGvFzAY1BwmGuuvdUTmcTstQPhyVC",pinning_room:r.env.PINNING_ROOM||"3box-pinning",iframe_store_version:r.env.IFRAME_STORE_VERSION||i,iframe_store_url:r.env.IFRAME_STORE_URL||"https://iframe.3box.io/".concat(i,"/iframe.html"),ipfs_options:{EXPERIMENTAL:{pubsub:!0},preload:{enabled:!1},config:{Bootstrap:[]}},orbitdb_options:{syncLocal:!0,sortFn:n.Sorting.SortByEntryHash},graphql_server_url:r.env.GRAPHQL_SERVER_URL||"https://api.3box.io/graph/",profile_server_url:r.env.PROFILE_SERVER_URL||"https://ipfs.3box.io",muport_ipfs_host:r.env.MUPORT_IPFS_HOST||"ipfs.infura.io",muport_ipfs_port:r.env.MUPORT_IPFS_PORT||5001,muport_ipfs_protocol:r.env.MUPORT_IPFS_PROTOCOL||"https"}}).call(this)}).call(this,e("_process"))}}},{package:"3box",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/3box/lib/config.js"}],[177,{"@babel/runtime/helpers/asyncToGenerator":190,"@babel/runtime/helpers/interopRequireDefault":200,"@babel/runtime/regenerator":220,"did-jwt":181},function(){with(this)return function(){"use strict";return function(e,t,r){var n,i=e("@babel/runtime/helpers/interopRequireDefault"),s=i(e("@babel/runtime/regenerator")),o=i(e("@babel/runtime/helpers/asyncToGenerator")),a=e("did-jwt");t.exports={isMuportDID:function(e){return e.startsWith("did:muport:")},isClaim:(n=(0,o.default)(s.default.mark((function e(t){var r,n=arguments;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&n[1]!==undefined?n[1]:{},e.prev=1,e.next=4,a.decodeJWT(t,r);case 4:return e.abrupt("return",!0);case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[1,7]])}))),function(e){return n.apply(this,arguments)}),verifyClaim:a.verifyJWT}}}},{package:"3box",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/3box/lib/utils/id.js"}],[168,{"../config.js":171,"../utils/index":178,"./keyring":169,"3box-orbitdb-plugins":162,"3id-resolver":184,"@babel/runtime/helpers/asyncToGenerator":190,"@babel/runtime/helpers/classCallCheck":191,"@babel/runtime/helpers/createClass":193,"@babel/runtime/helpers/interopRequireDefault":200,"@babel/runtime/regenerator":220,buffer:2105,"did-jwt":181,ethers:183,"ipfs-did-document":4485,"ipfs-mini":4528,"orbit-db-identity-provider":5379,store:5926},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/regenerator")),s=n(e("@babel/runtime/helpers/asyncToGenerator")),o=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),u=e("ethers").utils.HDNode,c=e("did-jwt"),l=e("ipfs-did-document"),f=e("ipfs-mini"),h=e("store"),d=e("orbit-db-identity-provider"),p=e("3box-orbitdb-plugins").OdbIdentityProvider;d.addIdentityProvider(p);var m=e("3id-resolver"),y=e("../utils/index"),g=e("./keyring"),v=e("../config.js"),b="serialized3id_",_={host:v.muport_ipfs_host,port:v.muport_ipfs_port,protocol:v.muport_ipfs_protocol},w=function(){function e(t,r,n,i){(0,o.default)(this,e),this._ethereum=r,this._ipfs=n,this._keyrings={},this._initKeys(t,i),m(n),h.set(b+this.managementAddress,this.serializeState())}var t,n,p,v,w,k,A;return(0,a.default)(e,[{key:"signJWT",value:(A=(0,s.default)(i.default.mark((function e(t){var r,n,s,o,a,u,l,f=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>1&&f[1]!==undefined?f[1]:{},n=r.use3ID,s=r.space,o=r.expiresIn,a=s?this._keyrings[s]:this._mainKeyring,u=this.muportDID,n?u=this.DID:s&&(u=this._subDIDs[s]),l={signer:a.getJWTSigner(),issuer:u,expiresIn:o},e.abrupt("return",c.createJWT(t,l));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return A.apply(this,arguments)})},{key:"getSubDID",value:function(e){return this._subDIDs[e]}},{key:"getOdbId",value:(k=(0,s.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d.createIdentity({type:"3ID",threeId:this,space:t}));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return k.apply(this,arguments)})},{key:"serializeState",value:function(){var e=this,t={managementAddress:this.managementAddress,seed:this._mainKeyring.serialize(),spaceSeeds:{}};return Object.keys(this._keyrings).map((function(r){t.spaceSeeds[r]=e._keyrings[r].serialize()})),JSON.stringify(t)}},{key:"_initKeys",value:function(e){var t=this,r=JSON.parse(e);this.managementAddress=r.managementAddress.toLowerCase(),this._mainKeyring=new g(r.seed),Object.keys(r.spaceSeeds).map((function(e){t._keyrings[e]=new g(r.spaceSeeds[e])}))}},{key:"_initDID",value:(w=(0,s.default)(i.default.mark((function e(t){var r,n,s,o=this;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._initMuport(t),e.next=3,this._init3ID();case 3:return this._rootDID=e.sent,n=Object.keys(this._keyrings),e.next=7,Promise.all(n.map((function(e){return o._init3ID(e)})));case 7:return s=e.sent,this._subDIDs={},n.map((function(e,t){o._subDIDs[e]=s[t]})),e.next=12,r;case 12:case"end":return e.stop()}}),e,this)}))),function(e){return w.apply(this,arguments)})},{key:"_init3ID",value:(v=(0,s.default)(i.default.mark((function e(t){var r,n,s,o,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=new l(this._ipfs,"3"),t){e.next=9;break}n=this._mainKeyring.getPublicKeys(!0),r.addPublicKey("signingKey","Secp256k1VerificationKey2018","publicKeyHex",n.signingKey),r.addPublicKey("encryptionKey","Curve25519EncryptionPublicKey","publicKeyBase64",n.asymEncryptionKey),r.addPublicKey("managementKey","Secp256k1VerificationKey2018","ethereumAddress",this.managementAddress),r.addAuthentication("Secp256k1SignatureAuthentication2018","signingKey"),e.next=20;break;case 9:return s=this._keyrings[t].getPublicKeys(!0),r.addPublicKey("subSigningKey","Secp256k1VerificationKey2018","publicKeyHex",s.signingKey),r.addPublicKey("subEncryptionKey","Curve25519EncryptionPublicKey","publicKeyBase64",s.asymEncryptionKey),r.addAuthentication("Secp256k1SignatureAuthentication2018","subSigningKey"),r.addCustomProperty("space",t),r.addCustomProperty("root",this.DID),o={subSigningKey:s.signingKey,subEncryptionKey:s.asymEncryptionKey,space:t,iat:null},e.next=18,this.signJWT(o,{use3ID:!0});case 18:a=e.sent.split(".")[2],r.addCustomProperty("proof",{alg:"ES256K",signature:a});case 20:return e.next=22,r.commit({noTimestamp:!0});case 22:return e.abrupt("return",r.DID);case 23:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:"_initMuport",value:(p=(0,s.default)(i.default.mark((function e(t){var n,o,a,u;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._mainKeyring.getPublicKeys(),o=E(n.signingKey,this.managementAddress,n.asymEncryptionKey),e.next=4,this._ipfs.add(r.from(JSON.stringify(o)));case 4:a=e.sent[0].hash,this._muportDID="did:muport:"+a,this.muportFingerprint=y.sha256Multihash(this.muportDID),u=function(){var e=(0,s.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:new f(t).addJSON(o,(function(e,t){e&&console.error(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u();case 9:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"getKeyringBySpaceName",value:function(e){var t=e.split(".");return t[0]===this.muportFingerprint?this._mainKeyring:this._keyrings[t[2]]}},{key:"initKeyringByName",value:(n=(0,s.default)(i.default.mark((function e(t){var r,n,s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._keyrings[t]){e.next=14;break}return e.next=3,y.openSpaceConsent(this.managementAddress,this._ethereum,t);case 3:return r=e.sent,n="0x"+y.sha256(r.slice(2)),s=u.mnemonicToSeed(u.entropyToMnemonic(n)),this._keyrings[t]=new g(s),e.next=9,this._init3ID(t);case 9:return this._subDIDs[t]=e.sent,h.set(b+this.managementAddress,this.serializeState()),e.abrupt("return",!0);case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"logout",value:function(){h.remove(b+this.managementAddress)}},{key:"DID",get:function(){return this._rootDID}},{key:"muportDID",get:function(){return this._muportDID}}],[{key:"isLoggedIn",value:function(e){return Boolean(h.get(b+e.toLowerCase()))}},{key:"getIdFromEthAddress",value:(t=(0,s.default)(i.default.mark((function t(r,n,s){var o,a,c,l,f,d,p,m,g=arguments;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=g.length>3&&g[3]!==undefined?g[3]:{},a=r.toLowerCase(),!(c=h.get(b+a))){t.next=7;break}o.consentCallback&&o.consentCallback(!1),t.next=19;break;case 7:if(!o.contentSignature){t.next=11;break}l=o.contentSignature,t.next=14;break;case 11:return t.next=13,y.openBoxConsent(a,n);case 13:l=t.sent;case 14:o.consentCallback&&o.consentCallback(!0),f="0x"+y.sha256(l.slice(2)),d=u.entropyToMnemonic(f),p=u.mnemonicToSeed(d),c=JSON.stringify({managementAddress:a,seed:p,spaceSeeds:{}});case 19:return m=new e(c,n,s,o),t.next=22,m._initDID(o.muportIpfs||_);case 22:return t.abrupt("return",m);case 23:case"end":return t.stop()}}),t)}))),function(e,r,n){return t.apply(this,arguments)})}]),e}(),E=function(e,t,r){return{version:1,signingKey:e,managementKey:t,asymEncryptionKey:r}};t.exports=w}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/3box/lib/3id/index.js"}],[5357,{"./src/access-controllers":5360},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("./src/access-controllers");t.exports=n}}},{package:"orbit-db-access-controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/orbit-db-access-controllers/index.js"}],[180,{"./utils/verifier":179,"@babel/runtime/helpers/asyncToGenerator":190,"@babel/runtime/helpers/classCallCheck":191,"@babel/runtime/helpers/createClass":193,"@babel/runtime/helpers/interopRequireDefault":200,"@babel/runtime/regenerator":220},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/regenerator")),s=n(e("@babel/runtime/helpers/asyncToGenerator")),o=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),u=e("./utils/verifier"),c=function(){function e(t){(0,o.default)(this,e),this._box=t,this._did=t._3id.muportDID}var t,r,n,c,l,f,h,d,p,m,y;return(0,a.default)(e,[{key:"_addVerifiedPublicAccount",value:(y=(0,s.default)(i.default.mark((function e(t,r,n){var s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(this._did,r);case 2:return s=e.sent,e.next=5,this._box.public.set("proof_"+t,r);case 5:return e.abrupt("return",s);case 6:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return y.apply(this,arguments)})},{key:"_getVerifiedPublicAccount",value:(m=(0,s.default)(i.default.mark((function e(t,r){var n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._box.public.get("proof_"+t);case 2:return n=e.sent,e.abrupt("return",r(this._did,n));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return m.apply(this,arguments)})},{key:"_addVerifiedPrivateAccount",value:(p=(0,s.default)(i.default.mark((function e(t,r,n){var s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(this._did,r);case 2:return s=e.sent,e.next=5,this._box.private.set("proof_"+t,r);case 5:return e.abrupt("return",s);case 6:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return p.apply(this,arguments)})},{key:"_getVerifiedPrivateAccount",value:(d=(0,s.default)(i.default.mark((function e(t,r){var n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._box.private.get("proof_"+t);case 2:return n=e.sent,e.abrupt("return",r(this._did,n));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return d.apply(this,arguments)})},{key:"DID",value:(h=(0,s.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._did);case 1:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"github",value:(f=(0,s.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._getVerifiedPublicAccount("github",u.verifyGithub));case 1:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"addGithub",value:(l=(0,s.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._addVerifiedPublicAccount("github",t,u.verifyGithub));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"twitter",value:(c=(0,s.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._getVerifiedPublicAccount("twitter",u.verifyTwitter));case 1:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"addTwitter",value:(n=(0,s.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._addVerifiedPublicAccount("twitter",t,u.verifyTwitter));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"email",value:(r=(0,s.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._getVerifiedPrivateAccount("email",u.verifyEmail));case 1:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"addEmail",value:(t=(0,s.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._addVerifiedPrivateAccount("email",t,u.verifyEmail));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}();t.exports=c}}},{package:"3box",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/3box/lib/verified.js"}],[162,{"./legacyIpfs3boxAccessController":163,"./moderatorAccessController":164,"./odbIdentityProvider":165,"./threadAccessController":166},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("./odbIdentityProvider"),i=e("./moderatorAccessController"),s=e("./threadAccessController"),o=e("./legacyIpfs3boxAccessController");t.exports={OdbIdentityProvider:n,ModeratorAccessController:i,ThreadAccessController:s,LegacyIPFS3BoxAccessController:o}}}},{package:"3box-orbitdb-plugins",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/3box-orbitdb-plugins/src/index.js"}],[174,{"./keyValueStore":172,"./utils/index":178,"@babel/runtime/helpers/asyncToGenerator":190,"@babel/runtime/helpers/classCallCheck":191,"@babel/runtime/helpers/createClass":193,"@babel/runtime/helpers/get":196,"@babel/runtime/helpers/getPrototypeOf":197,"@babel/runtime/helpers/inherits":198,"@babel/runtime/helpers/interopRequireDefault":200,"@babel/runtime/helpers/possibleConstructorReturn":211,"@babel/runtime/regenerator":220},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/regenerator")),s=n(e("@babel/runtime/helpers/asyncToGenerator")),o=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),u=n(e("@babel/runtime/helpers/possibleConstructorReturn")),c=n(e("@babel/runtime/helpers/getPrototypeOf")),l=n(e("@babel/runtime/helpers/get")),f=n(e("@babel/runtime/helpers/inherits")),h=e("./keyValueStore"),d=e("./utils/index"),p=d.throwIfUndefined,m=d.throwIfNotEqualLenArrays,y=function(e){function t(e,r,n,i,s){var a;return(0,o.default)(this,t),(a=(0,u.default)(this,(0,c.default)(t).call(this,e,r,i,s)))._linkProfile=n,a}var r,n;return(0,f.default)(t,e),(0,a.default)(t,[{key:"set",value:(n=(0,s.default)(i.default.mark((function e(r,n){var s,o=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=o.length>2&&o[2]!==undefined?o[2]:{},p(r,"key"),s.noLink){e.next=5;break}return e.next=5,this._linkProfile();case 5:return e.abrupt("return",(0,l.default)((0,c.default)(t.prototype),"set",this).call(this,r,n));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"setMultiple",value:(r=(0,s.default)(i.default.mark((function e(r,n){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(r,n),e.next=3,this._linkProfile();case 3:return e.abrupt("return",(0,l.default)((0,c.default)(t.prototype),"setMultiple",this).call(this,r,n));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})}]),t}(h);t.exports=y}}},{package:"3box",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/3box/lib/publicStore.js"}],[5406,{"./db-manifest":5407,"./exchange-heads":5408,"./orbit-db-address":5409,"./utils":5410,logplease:5230,"orbit-db-access-controllers":5357,"orbit-db-cache":5369,"orbit-db-counterstore":5371,"orbit-db-docstore":5374,"orbit-db-eventstore":5376,"orbit-db-feedstore":5378,"orbit-db-identity-provider":5379,"orbit-db-keystore":5386,"orbit-db-kvstore":5398,"orbit-db-pubsub":5399,path:5456},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("path"),i=e("orbit-db-eventstore"),s=e("orbit-db-feedstore"),o=e("orbit-db-kvstore"),a=e("orbit-db-counterstore"),u=e("orbit-db-docstore"),c=e("orbit-db-pubsub"),l=e("orbit-db-cache"),f=e("orbit-db-keystore"),h=e("orbit-db-identity-provider");let d=e("orbit-db-access-controllers");const p=e("./orbit-db-address"),m=e("./db-manifest"),y=e("./exchange-heads"),{isDefined:g,io:v}=e("./utils"),b=e("logplease"),_=b.create("orbit-db");b.setLogLevel("ERROR");let w={counter:a,eventlog:i,feed:s,docstore:u,keyvalue:o};class E{constructor(e,t,r={}){if(!g(e))throw new Error("IPFS is a required argument. See https://github.com/orbitdb/orbit-db/blob/master/API.md#createinstance");if(!g(t))throw new Error("identity is a required argument. See https://github.com/orbitdb/orbit-db/blob/master/API.md#createinstance");this._ipfs=e,this.identity=t,this.id=r.peerId,this._pubsub=r&&r.broker?new r.broker(this._ipfs):new c(this._ipfs,this.id),this.directory=r.directory||"./orbitdb",this.keystore=r.keystore,this.cache=r.cache||l,this.stores={},this._directConnections={},d=r.AccessControllers||d}static async createInstance(e,t={}){if(!g(e))throw new Error("IPFS is a required argument. See https://github.com/orbitdb/orbit-db/blob/master/API.md#createinstance");const{id:r}=await e.id(),i=t.directory||"./orbitdb",s=t.keystore||f.create(n.join(i,r,"/keystore")),o=t.identity||await h.createIdentity({id:t.id||r,keystore:s});t=Object.assign({},t,{peerId:r,directory:i,keystore:s});return new E(e,o,t)}async feed(e,t={}){return t=Object.assign({create:!0,type:"feed"},t),this.open(e,t)}async log(e,t={}){return t=Object.assign({create:!0,type:"eventlog"},t),this.open(e,t)}async eventlog(e,t={}){return this.log(e,t)}async keyvalue(e,t={}){return t=Object.assign({create:!0,type:"keyvalue"},t),this.open(e,t)}async kvstore(e,t={}){return this.keyvalue(e,t)}async counter(e,t={}){return t=Object.assign({create:!0,type:"counter"},t),this.open(e,t)}async docs(e,t={}){return t=Object.assign({create:!0,type:"docstore"},t),this.open(e,t)}async docstore(e,t={}){return this.docs(e,t)}async disconnect(){this.keystore.close&&await this.keystore.close();const e=Object.values(this.stores);for(let t of e)await t.close(),delete this.stores[t.address.toString()];Object.keys(this._directConnections).forEach((e=>{this._directConnections[e].close(),delete this._directConnections[e]})),this._pubsub&&await this._pubsub.disconnect(),this.stores={}}async stop(){await this.disconnect()}async _createStore(e,t,r){const n=w[e];if(!n)throw new Error(`Invalid database type '${e}'`);let i;r.accessControllerAddress&&(i=await d.resolve(this,r.accessControllerAddress,r.accessController));const s=await this._loadCache(this.directory,t),o=Object.assign({replicate:!0},r,{accessController:i,keystore:this.keystore,cache:s,onClose:this._onClose.bind(this)}),a=r.identity||this.identity,u=new n(this._ipfs,a,t,o);u.events.on("write",this._onWrite.bind(this));const c=t.toString();return this.stores[c]=u,o.replicate&&this._pubsub&&this._pubsub.subscribe(c,this._onMessage.bind(this),this._onPeerConnected.bind(this)),u}_onWrite(e,t,r){if(!r)throw new Error("'heads' not defined");this._pubsub&&this._pubsub.publish(e,r)}async _onMessage(e,t){const r=this.stores[e];try{_.debug(`Received ${t.length} heads for '${e}':\n`,JSON.stringify(t.map((e=>e.hash)),null,2)),r&&t&&t.length>0&&await r.sync(t)}catch(e){_.error(e)}}async _onPeerConnected(e,t){_.debug(`New peer '${t}' connected to '${e}'`);const r=e=>this.stores[e];await y(this._ipfs,e,t,r,(e=>this._directConnections[e]),((e,t)=>this._onMessage(e,t)),(e=>this._directConnections[e._receiverID]=e));r(e)&&r(e).events.emit("peer",t)}async _onClose(e){_.debug(`Close ${e}`),this._pubsub&&await this._pubsub.unsubscribe(e),delete this.stores[e]}async _determineAddress(e,t,r={}){if(!E.isValidType(t))throw new Error(`Invalid database type '${t}'`);if(p.isValid(e))throw new Error("Given database name is an address. Please give only the name of the database!");r.accessController=Object.assign({},{name:e,type:"ipfs"},r.accessController);const i=await d.create(this,r.accessController.type,r.accessController||{}),s=await m(this._ipfs,e,t,i,r);return p.parse(n.join("/orbitdb",s,e))}async create(e,t,r={}){_.debug("create()");const n=r.directory||this.directory;_.debug(`Creating database '${e}' as ${t} in '${n}'`);const i=await this._determineAddress(e,t,r),s=await this._loadCache(n,i);if(await this._haveLocalData(s,i)&&!r.overwrite)throw new Error(`Database '${i}' already exists!`);return await this._addManifestToCache(n,i),_.debug(`Created database '${i}'`),this.open(i,r)}async determineAddress(e,t,r={}){const n=Object.assign({},{onlyHash:!0},r);return this._determineAddress(e,t,n)}async open(e,t={}){_.debug("open()"),t=Object.assign({localOnly:!1,create:!1},t),_.debug(`Open database '${e}'`);const r=t.directory||this.directory;if(_.debug(`Look from '${r}'`),!p.isValid(e)){if(t.create){if(t.create&&!t.type)throw new Error(`Database type not provided! Provide a type with 'options.type' (${E.databaseTypes.join("|")})`);return _.warn(`Not a valid OrbitDB address '${e}', creating the database`),t.overwrite=!t.overwrite||t.overwrite,this.create(e,t.type,t)}throw new Error("'options.create' set to 'false'. If you want to create a database, set 'options.create' to 'true'.")}const n=p.parse(e),i=await this._loadCache(r,n),s=await this._haveLocalData(i,n);if(_.debug((s?"Found":"Didn't find")+` database '${n}'`),t.localOnly&&!s)throw _.warn(`Database '${n}' doesn't exist!`),new Error(`Database '${n}' doesn't exist!`);_.debug(`Loading Manifest for '${n}'`);const o=await v.read(this._ipfs,n.root);if(_.debug(`Manifest for '${n}':\n${JSON.stringify(o,null,2)}`),t.type&&o.type!==t.type)throw new Error(`Database '${n}' is type '${o.type}' but was opened as '${t.type}'`);return await this._addManifestToCache(r,n),t=Object.assign({},t,{accessControllerAddress:o.accessController}),this._createStore(o.type,n,t)}async _addManifestToCache(e,t){const r=await this._loadCache(e,t);await r.set(n.join(t.toString(),"_manifest"),t.root),_.debug(`Saved manifest to IPFS as '${t.root}'`)}async _loadCache(e,t){let r;try{r=await this.cache.load(e,t)}catch(e){console.log(e),_.error("Couldn't load Cache:",e)}return r}async _haveLocalData(e,t){if(!e)return!1;const r=await e.get(n.join(t.toString(),"_manifest"));return r!==undefined&&null!==r}static get databaseTypes(){return Object.keys(w)}static isValidType(e){return Object.keys(w).includes(e)}static addDatabaseType(e,t){if(w[e])throw new Error(`Type already exists: ${e}`);w[e]=t}static getDatabaseTypes(){return w}static isValidAddress(e){return p.isValid(e)}static parseAddress(e){return p.parse(e)}}t.exports=E}}},{package:"orbit-db",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/orbit-db/src/OrbitDB.js"}],[4683,{"./boot":4625,"./components":4658,"./config":4682,"./mfs-preload":4693,"./preload":4694,"./runtime/ipld-nodejs":4699,"./runtime/repo-nodejs":4702,"./state":4703,buffer:2105,cids:2146,debug:2280,events:2106,"ipfs-block-service":4483,ipld:4724,"is-ipfs":4742,"libp2p-crypto":4897,"merge-options":5240,multiaddr:5256,multibase:5264,multicodec:5267,multihashes:5282,"multihashing-async":4606,"peer-book":5469,"peer-id":5470,"peer-info":5471},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("ipfs-block-service"),i=e("ipld"),s=e("peer-id"),o=e("peer-info"),a=e("libp2p-crypto"),u=e("is-ipfs"),c=e("multiaddr"),l=e("multihashes"),f=e("peer-book"),h=e("multibase"),d=e("multicodec"),p=e("multihashing-async"),m=e("cids"),y=e("debug"),g=e("merge-options"),v=e("events"),b=e("./config"),_=e("./boot"),w=e("./components"),E=e("./runtime/repo-nodejs"),k=e("./preload"),A=e("./mfs-preload"),S=e("./runtime/ipld-nodejs");class x extends v{constructor(t){super();t=b.validate(t||{}),this._options=g({init:!0,start:!0,EXPERIMENTAL:{},preload:{enabled:!0,addresses:["/dnsaddr/node0.preload.ipfs.io/https","/dnsaddr/node1.preload.ipfs.io/https"]}},t),!1===t.init&&(this._options.init=!1),!1!==t.start&&(this._options.start=!0),"string"==typeof t.repo||t.repo===undefined?this._repo=E(t.repo):this._repo=t.repo,this.log=y("ipfs"),this.log.err=y("ipfs:err"),this._peerInfoBook=new f,this._peerInfo=undefined,this._bitswap=undefined,this._blockService=new n(this._repo),this._ipld=new i(S(this._blockService,this._options.ipld,this.log)),this._preload=k(this),this._mfsPreload=A(this),this._ipns=undefined,this._print=this._options.silent?this.log:console.log,this.init=w.init(this),this.preStart=w.preStart(this),this.start=w.start(this),this.stop=w.stop(this),this.shutdown=this.stop,this.isOnline=w.isOnline(this),Object.assign(this,w.filesRegular(this)),this.version=w.version(this),this.id=w.id(this),this.repo=w.repo(this),this.bootstrap=w.bootstrap(this),this.config=w.config(this),this.block=w.block(this),this.object=w.object(this),this.dag=w.dag(this),this.files=w.filesMFS(this),this.libp2p=null,this.swarm=w.swarm(this),this.name=w.name(this),this.bitswap=w.bitswap(this),this.pin=w.pin(this),this.ping=w.ping(this),this.pingPullStream=w.pingPullStream(this),this.pingReadableStream=w.pingReadableStream(this),this.pubsub=w.pubsub(this),this.dht=w.dht(this),this.dns=w.dns(this),this.key=w.key(this),this.stats=w.stats(this),this.resolve=w.resolve(this),this._options.EXPERIMENTAL.pubsub&&this.log("EXPERIMENTAL pubsub is enabled"),this._options.EXPERIMENTAL.ipnsPubsub&&(this._options.EXPERIMENTAL.pubsub||(this.log("EXPERIMENTAL pubsub is enabled to use IPNS pubsub"),this._options.EXPERIMENTAL.pubsub=!0),this.log("EXPERIMENTAL IPNS pubsub is enabled")),this._options.EXPERIMENTAL.sharding&&this.log("EXPERIMENTAL sharding is enabled"),this.state=e("./state")(this),_(this)}}t.exports=x;const I=r;Object.assign(t.exports,{crypto:a,isIPFS:u,Buffer:I,CID:m,multiaddr:c,multibase:h,multihash:l,multihashing:p,multicodec:d,PeerId:s,PeerInfo:o}),t.exports.createNode=e=>new x(e)}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"ipfs",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/ipfs/src/core/index.js"}],[74,{"./add-ethereum-chain":71,"./eth-accounts":72,"./get-provider-state":73,"./log-web3-shim-usage":75,"./request-accounts":76,"./send-metadata":77,"./switch-ethereum-chain":78,"./watch-asset":79,"@babel/runtime/helpers/interopRequireDefault":200},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("./add-ethereum-chain")),s=n(e("./eth-accounts")),o=n(e("./get-provider-state")),a=n(e("./log-web3-shim-usage")),u=n(e("./request-accounts")),c=n(e("./send-metadata")),l=n(e("./switch-ethereum-chain")),f=n(e("./watch-asset"));var h=[i.default,s.default,o.default,a.default,u.default,c.default,l.default,f.default];r.default=h}}},{package:"<root>",file:"/Users/mac/code/a-mises/metamask-extension/app/scripts/lib/rpc-method-middleware/handlers/index.js"}],[1224,{"./permitted":1229,"./restricted":1234,"./utils":1238},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.selectHooks=r.restrictedMethodPermissionBuilders=r.permittedMethods=void 0;var n=e("./permitted");Object.defineProperty(r,"permittedMethods",{enumerable:!0,get:function(){return n.handlers}});var i=e("./restricted");Object.defineProperty(r,"restrictedMethodPermissionBuilders",{enumerable:!0,get:function(){return i.builders}});var s=e("./utils");Object.defineProperty(r,"selectHooks",{enumerable:!0,get:function(){return s.selectHooks}})}}},{package:"@metamask/rpc-methods",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/rpc-methods/dist/index.js"}],[4323,{},function(){with(this)return function(){"use strict";return function(e,t,r){
/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017 Joachim Wester
 * MIT license
 */
var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var s=Object.prototype.hasOwnProperty;function o(e,t){return s.call(e,t)}function a(e){if(Array.isArray(e)){for(var t=new Array(e.length),r=0;r<t.length;r++)t[r]=""+r;return t}if(Object.keys)return Object.keys(e);t=[];for(var n in e)o(e,n)&&t.push(n);return t}function u(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function c(e,t){var r;for(var n in e)if(o(e,n)){if(e[n]===t)return u(n)+"/";if("object"==typeof e[n]&&""!=(r=c(e[n],t)))return u(n)+"/"+r}return""}function l(e,t){var r=[e];for(var n in t){var i="object"==typeof t[n]?JSON.stringify(t[n],null,2):t[n];void 0!==i&&r.push(n+": "+i)}return r.join("\n")}Object.defineProperty(r,"hasOwnProperty",{value:o}),r._objectKeys=a,r._deepClone=function(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}},r.isInteger=function(e){for(var t,r=0,n=e.length;r<n;){if(!((t=e.charCodeAt(r))>=48&&t<=57))return!1;r++}return!0},r.escapePathComponent=u,r.unescapePathComponent=function(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")},r._getPathRecursive=c,r.getPath=function(e,t){if(e===t)return"/";var r=c(e,t);if(""===r)throw new Error("Object not found in root");return"/"+r},r.hasUndefined=function e(t){if(t===undefined)return!0;if(t)if(Array.isArray(t)){for(var r=0,n=t.length;r<n;r++)if(e(t[r]))return!0}else if("object"==typeof t){var i=a(t),s=i.length;for(r=0;r<s;r++)if(e(t[i[r]]))return!0}return!1};var f=function(e){function t(t,r,n,i,s){var o=this.constructor,a=e.call(this,l(t,{name:r,index:n,operation:i,tree:s}))||this;return a.name=r,a.index=n,a.operation=i,a.tree=s,Object.setPrototypeOf(a,o.prototype),a.message=l(t,{name:r,index:n,operation:i,tree:s}),a}return i(t,e),t}(Error);r.PatchError=f}}},{package:"fast-json-patch",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/fast-json-patch/lib/helpers.js"}],[4321,{"./helpers":4323,"fast-deep-equal":4324},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("fast-deep-equal"),i=e("./helpers");r.JsonPatchError=i.PatchError,r.deepClone=i._deepClone;var s={add:function(e,t,r){return e[t]=this.value,{newDocument:r}},remove:function(e,t,r){var n=e[t];return delete e[t],{newDocument:r,removed:n}},replace:function(e,t,r){var n=e[t];return e[t]=this.value,{newDocument:r,removed:n}},move:function(e,t,r){var n=a(r,this.path);n&&(n=i._deepClone(n));var s=u(r,{op:"remove",path:this.from}).removed;return u(r,{op:"add",path:this.path,value:s}),{newDocument:r,removed:n}},copy:function(e,t,r){var n=a(r,this.from);return u(r,{op:"add",path:this.path,value:i._deepClone(n)}),{newDocument:r}},test:function(e,t,r){return{newDocument:r,test:n(e[t],this.value)}},_get:function(e,t,r){return this.value=e[t],{newDocument:r}}},o={add:function(e,t,r){return i.isInteger(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:r,index:t}},remove:function(e,t,r){return{newDocument:r,removed:e.splice(t,1)[0]}},replace:function(e,t,r){var n=e[t];return e[t]=this.value,{newDocument:r,removed:n}},move:s.move,copy:s.copy,test:s.test,_get:s._get};function a(e,t){if(""==t)return e;var r={op:"_get",path:t};return u(e,r),r.value}function u(e,t,u,c,l,h){if(void 0===u&&(u=!1),void 0===c&&(c=!0),void 0===l&&(l=!0),void 0===h&&(h=0),u&&("function"==typeof u?u(t,0,e,t.path):f(t,0)),""===t.path){var d={newDocument:e};if("add"===t.op)return d.newDocument=t.value,d;if("replace"===t.op)return d.newDocument=t.value,d.removed=e,d;if("move"===t.op||"copy"===t.op)return d.newDocument=a(e,t.from),"move"===t.op&&(d.removed=e),d;if("test"===t.op){if(d.test=n(e,t.value),!1===d.test)throw new r.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",h,t,e);return d.newDocument=e,d}if("remove"===t.op)return d.removed=e,d.newDocument=null,d;if("_get"===t.op)return t.value=e,d;if(u)throw new r.JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",h,t,e);return d}c||(e=i._deepClone(e));var p=(t.path||"").split("/"),m=e,y=1,g=p.length,v=undefined,b=void 0,_=void 0;for(_="function"==typeof u?u:f;;){if(b=p[y],l&&"__proto__"==b)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(u&&v===undefined&&(m[b]===undefined?v=p.slice(0,y).join("/"):y==g-1&&(v=t.path),v!==undefined&&_(t,0,e,v)),y++,Array.isArray(m)){if("-"===b)b=m.length;else{if(u&&!i.isInteger(b))throw new r.JsonPatchError("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",h,t,e);i.isInteger(b)&&(b=~~b)}if(y>=g){if(u&&"add"===t.op&&b>m.length)throw new r.JsonPatchError("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",h,t,e);if(!1===(d=o[t.op].call(t,m,b,e)).test)throw new r.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",h,t,e);return d}}else if(b&&-1!=b.indexOf("~")&&(b=i.unescapePathComponent(b)),y>=g){if(!1===(d=s[t.op].call(t,m,b,e)).test)throw new r.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",h,t,e);return d}m=m[b]}}function c(e,t,n,s,o){if(void 0===s&&(s=!0),void 0===o&&(o=!0),n&&!Array.isArray(t))throw new r.JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");s||(e=i._deepClone(e));for(var a=new Array(t.length),c=0,l=t.length;c<l;c++)a[c]=u(e,t[c],n,!0,o,c),e=a[c].newDocument;return a.newDocument=e,a}function l(e,t,n){var i=u(e,t);if(!1===i.test)throw new r.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return i.newDocument}function f(e,t,n,o){if("object"!=typeof e||null===e||Array.isArray(e))throw new r.JsonPatchError("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(!s[e.op])throw new r.JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n);if("string"!=typeof e.path)throw new r.JsonPatchError("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new r.JsonPatchError('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new r.JsonPatchError("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&e.value===undefined)throw new r.JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&i.hasUndefined(e.value))throw new r.JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n)if("add"==e.op){var a=e.path.split("/").length,u=o.split("/").length;if(a!==u+1&&a!==u)throw new r.JsonPatchError("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==o)throw new r.JsonPatchError("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if("move"===e.op||"copy"===e.op){var c=h([{op:"_get",path:e.from,value:undefined}],n);if(c&&"OPERATION_PATH_UNRESOLVABLE"===c.name)throw new r.JsonPatchError("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}function h(e,t,n){try{if(!Array.isArray(e))throw new r.JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)c(i._deepClone(t),i._deepClone(e),n||!0);else{n=n||f;for(var s=0;s<e.length;s++)n(e[s],s,t,undefined)}}catch(e){if(e instanceof r.JsonPatchError)return e;throw e}}r.getValueByPointer=a,r.applyOperation=u,r.applyPatch=c,r.applyReducer=l,r.validator=f,r.validate=h,r.default={JsonPatchError:r.JsonPatchError,deepClone:r.deepClone,getValueByPointer:a,applyOperation:u,applyPatch:c,applyReducer:l,validator:f,validate:h}}}},{package:"fast-json-patch",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/fast-json-patch/lib/core.js"}],[242,{"./cid-util":241,multibase:224,multicodec:232,multihashes:236,"uint8arrays/concat":237,"uint8arrays/equals":238,"uint8arrays/to-string":240},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("multihashes"),i=e("multibase"),s=e("multicodec"),o=e("./cid-util"),a=e("uint8arrays/concat"),u=e("uint8arrays/to-string"),c=e("uint8arrays/equals"),l=s.nameToCode,f=Object.keys(l).reduce(((e,t)=>(e[l[t]]=t,e)),{}),h=Symbol.for("@ipld/js-cid/CID");class d{constructor(e,t,r,o){if(this.version,this.codec,this.multihash,Object.defineProperty(this,h,{value:!0}),d.isCID(e)){const t=e;return this.version=t.version,this.codec=t.codec,this.multihash=t.multihash,void(this.multibaseName=t.multibaseName||(0===t.version?"base58btc":"base32"))}if("string"==typeof e){const t=i.isEncoded(e);if(t){const r=i.decode(e);this.version=parseInt(r[0].toString(),16),this.codec=s.getCodec(r.slice(1)),this.multihash=s.rmPrefix(r.slice(1)),this.multibaseName=t}else this.version=0,this.codec="dag-pb",this.multihash=n.fromB58String(e),this.multibaseName="base58btc";return d.validateCID(this),void Object.defineProperty(this,"string",{value:e})}if(e instanceof Uint8Array){const t=parseInt(e[0].toString(),16);if(1===t){const r=e;this.version=t,this.codec=s.getCodec(r.slice(1)),this.multihash=s.rmPrefix(r.slice(1)),this.multibaseName="base32"}else this.version=0,this.codec="dag-pb",this.multihash=e,this.multibaseName="base58btc";d.validateCID(this)}else this.version=e,"number"==typeof t&&(t=f[t]),this.codec=t,this.multihash=r,this.multibaseName=o||(0===e?"base58btc":"base32"),d.validateCID(this)}get bytes(){let e=this._bytes;if(!e){if(0===this.version)e=this.multihash;else{if(1!==this.version)throw new Error("unsupported version");{const t=s.getCodeVarint(this.codec);e=a([[1],t,this.multihash],1+t.byteLength+this.multihash.byteLength)}}Object.defineProperty(this,"_bytes",{value:e})}return e}get prefix(){const e=s.getCodeVarint(this.codec),t=n.prefix(this.multihash);return a([[this.version],e,t],1+e.byteLength+t.byteLength)}get code(){return l[this.codec]}toV0(){if("dag-pb"!==this.codec)throw new Error("Cannot convert a non dag-pb CID to CIDv0");const{name:e,length:t}=n.decode(this.multihash);if("sha2-256"!==e)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");if(32!==t)throw new Error("Cannot convert non 32 byte multihash CID to CIDv0");return new d(0,this.codec,this.multihash)}toV1(){return new d(1,this.codec,this.multihash,this.multibaseName)}toBaseEncodedString(e=this.multibaseName){if(this.string&&0!==this.string.length&&e===this.multibaseName)return this.string;let t;if(0===this.version){if("base58btc"!==e)throw new Error("not supported with CIDv0, to support different bases, please migrate the instance do CIDv1, you can do that through cid.toV1()");t=n.toB58String(this.multihash)}else{if(1!==this.version)throw new Error("unsupported version");t=u(i.encode(e,this.bytes))}return e===this.multibaseName&&Object.defineProperty(this,"string",{value:t}),t}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}toString(e){return this.toBaseEncodedString(e)}toJSON(){return{codec:this.codec,version:this.version,hash:this.multihash}}equals(e){return this.codec===e.codec&&this.version===e.version&&c(this.multihash,e.multihash)}static validateCID(e){const t=o.checkCIDComponents(e);if(t)throw new Error(t)}static isCID(e){return e instanceof d||Boolean(e&&e[h])}}d.codecs=l,t.exports=d}}},{package:"cids",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@ensdomains/content-hash/node_modules/cids/src/index.js"}],[259,{},function(){with(this)return function(){"use strict";return function(e,t,r){const n=Object.freeze({identity:0,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,"murmur3-128":34,"murmur3-32":35,"dbl-sha2-256":86,md4:212,md5:213,bmt:214,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082});t.exports={names:n}}}},{package:"multihashes",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@ensdomains/content-hash/node_modules/multihashes/src/constants.js"}],[6096,{"./decode.js":6094,"./encode.js":6095,"./length.js":6097},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports={encode:e("./encode.js"),decode:e("./decode.js"),encodingLength:e("./length.js")}}}},{package:"varint",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/varint/index.js"}],[6100,{util:2112},function(){with(this)return function(){"use strict";return function(e,t,r){r.TextEncoder="undefined"!=typeof TextEncoder?TextEncoder:e("util").TextEncoder,r.TextDecoder="undefined"!=typeof TextDecoder?TextDecoder:e("util").TextDecoder}}},{package:"web-encoding",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/web-encoding/src/lib.js"}],[245,{"./constants":244,"./util":247,buffer:2105},function(){with(this)return function(){"use strict";return function(e,t,r){const{Buffer:n}=e("buffer"),i=e("./constants"),{decodeText:s,asBuffer:o}=e("./util");function a(e){if(i.names[e])return i.names[e];if(i.codes[e])return i.codes[e];throw new Error(`Unsupported encoding: ${e}`)}(r=t.exports=function(e,t){if(!t)throw new Error("requires an encoded buffer");const{name:r,codeBuf:i}=a(e);!function(e,t){a(e).decode(s(t))}(r,t);const o=n.alloc(i.length+t.length);return o.set(i,0),o.set(t,i.length),o}).encode=function(e,t){const r=a(e);return n.concat([r.codeBuf,n.from(r.encode(t))])},r.decode=function(e){ArrayBuffer.isView(e)&&(e=s(e));const t=e[0];["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(t)&&(e=e.toLowerCase());const r=a(e[0]);return o(r.decode(e.substring(1)))},r.isEncoded=function(e){if(e instanceof Uint8Array&&(e=s(e)),"[object String]"!==Object.prototype.toString.call(e))return!1;try{return a(e[0]).name}catch(e){return!1}},r.encoding=a,r.encodingFromData=function(e){return e instanceof Uint8Array&&(e=s(e)),a(e[0])},r.names=Object.freeze(i.names),r.codes=Object.freeze(i.codes)}}},{package:"multibase",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@ensdomains/content-hash/node_modules/multibase/src/index.js"}],[4762,{buffer:2105},function(){with(this)return function(){"use strict";return function(e,t,r){(function(e){(function(){!function(e,n){"object"==typeof r&&void 0!==t?t.exports=n():"function"==typeof define&&define.amd?define(n):function(){const t=e.Base64,r=n();r.noConflict=()=>(e.Base64=t,r),e.Meteor&&(Base64=r),e.Base64=r}()}("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:this,(function(){const t="3.6.1",r="function"==typeof atob,n="function"==typeof btoa,i="function"==typeof e,s="function"==typeof TextDecoder?new TextDecoder:undefined,o="function"==typeof TextEncoder?new TextEncoder:undefined,a=[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],u=(e=>{let t={};return e.forEach(((e,r)=>t[e]=r)),t})(a),c=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,l=String.fromCharCode.bind(String),f="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):(e,t=(e=>e))=>new Uint8Array(Array.prototype.slice.call(e,0).map(t)),h=e=>e.replace(/[+\/]/g,(e=>"+"==e?"-":"_")).replace(/=+$/m,""),d=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),p=e=>{let t,r,n,i,s="";const o=e.length%3;for(let o=0;o<e.length;){if((r=e.charCodeAt(o++))>255||(n=e.charCodeAt(o++))>255||(i=e.charCodeAt(o++))>255)throw new TypeError("invalid character found");t=r<<16|n<<8|i,s+=a[t>>18&63]+a[t>>12&63]+a[t>>6&63]+a[63&t]}return o?s.slice(0,o-3)+"===".substring(o):s},m=n?e=>btoa(e):i?t=>e.from(t,"binary").toString("base64"):p,y=i?t=>e.from(t).toString("base64"):e=>{let t=[];for(let r=0,n=e.length;r<n;r+=4096)t.push(l.apply(null,e.subarray(r,r+4096)));return m(t.join(""))},g=(e,t=!1)=>t?h(y(e)):y(e),v=e=>{if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?l(192|t>>>6)+l(128|63&t):l(224|t>>>12&15)+l(128|t>>>6&63)+l(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return l(240|t>>>18&7)+l(128|t>>>12&63)+l(128|t>>>6&63)+l(128|63&t)},b=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,_=e=>e.replace(b,v),w=i?t=>e.from(t,"utf8").toString("base64"):o?e=>y(o.encode(e)):e=>m(_(e)),E=(e,t=!1)=>t?h(w(e)):w(e),k=e=>E(e,!0),A=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,S=e=>{switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return l(55296+(t>>>10))+l(56320+(1023&t));case 3:return l((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return l((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},x=e=>e.replace(A,S),I=e=>{if(e=e.replace(/\s+/g,""),!c.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));let t,r,n,i="";for(let s=0;s<e.length;)t=u[e.charAt(s++)]<<18|u[e.charAt(s++)]<<12|(r=u[e.charAt(s++)])<<6|(n=u[e.charAt(s++)]),i+=64===r?l(t>>16&255):64===n?l(t>>16&255,t>>8&255):l(t>>16&255,t>>8&255,255&t);return i},T=r?e=>atob(d(e)):i?t=>e.from(t,"base64").toString("binary"):I,P=i?t=>f(e.from(t,"base64")):e=>f(T(e),(e=>e.charCodeAt(0))),N=e=>P(R(e)),C=i?t=>e.from(t,"base64").toString("utf8"):s?e=>s.decode(P(e)):e=>x(T(e)),R=e=>d(e.replace(/[-_]/g,(e=>"-"==e?"+":"/"))),O=e=>C(R(e)),M=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),D=function(){const e=(e,t)=>Object.defineProperty(String.prototype,e,M(t));e("fromBase64",(function(){return O(this)})),e("toBase64",(function(e){return E(this,e)})),e("toBase64URI",(function(){return E(this,!0)})),e("toBase64URL",(function(){return E(this,!0)})),e("toUint8Array",(function(){return N(this)}))},L=function(){const e=(e,t)=>Object.defineProperty(Uint8Array.prototype,e,M(t));e("toBase64",(function(e){return g(this,e)})),e("toBase64URI",(function(){return g(this,!0)})),e("toBase64URL",(function(){return g(this,!0)}))},B={version:t,VERSION:"3.6.1",atob:T,atobPolyfill:I,btoa:m,btoaPolyfill:p,fromBase64:O,toBase64:E,encode:E,encodeURI:k,encodeURL:k,utob:_,btou:x,decode:O,isValid:e=>{if("string"!=typeof e)return!1;const t=e.replace(/\s+/g,"").replace(/=+$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},fromUint8Array:g,toUint8Array:N,extendString:D,extendUint8Array:L,extendBuiltins:()=>{D(),L()},Base64:{}};return Object.keys(B).forEach((e=>B.Base64[e]=B[e])),B}))}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"js-base64",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/js-base64/base64.js"}],[256,{"./base-table":252},function(){with(this)return function(){"use strict";return function(e,t,r){const{baseTable:n}=e("./base-table"),i={};for(const[e,t]of Object.entries(n))i[t]===undefined&&(i[t]=e);t.exports=Object.freeze(i)}}},{package:"multicodec",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@ensdomains/content-hash/node_modules/multicodec/src/print.js"}],[253,{"./base-table":252},function(){with(this)return function(){"use strict";return function(e,t,r){const{baseTable:n}=e("./base-table"),i={};for(const[e,t]of Object.entries(n)){i[e.toUpperCase().replace(/-/g,"_")]=t}t.exports=Object.freeze(i)}}},{package:"multicodec",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@ensdomains/content-hash/node_modules/multicodec/src/constants.js"}],[255,{"./base-table":252},function(){with(this)return function(){"use strict";return function(e,t,r){const{baseTable:n}=e("./base-table"),i=new Map;for(const e in n){const t=n[e];i.set(t,e)}t.exports=Object.freeze(i)}}},{package:"multicodec",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@ensdomains/content-hash/node_modules/multicodec/src/int-table.js"}],[258,{"./base-table":252,"./util":257},function(){with(this)return function(){"use strict";return function(e,t,r){const{baseTable:n}=e("./base-table"),i=e("./util").varintEncode,s={};for(const e in n){const t=n[e];s[e]=i(t)}t.exports=Object.freeze(s)}}},{package:"multicodec",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@ensdomains/content-hash/node_modules/multicodec/src/varint-table.js"}],[250,{"./decode.js":248,"./encode.js":249,"./length.js":251},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports={encode:e("./encode.js"),decode:e("./decode.js"),encodingLength:e("./length.js")}}}},{package:"varint",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@ensdomains/content-hash/node_modules/multicodec/node_modules/varint/index.js"}],[261,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(e,t){t||(t=e.reduce(((e,t)=>e+t.length),0));const r=new Uint8Array(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return r}}}},{package:"uint8arrays",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@ensdomains/content-hash/node_modules/uint8arrays/concat.js"}],[257,{"uint8arrays/from-string":262,"uint8arrays/to-string":267,varint:250},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("varint"),i=e("uint8arrays/to-string"),s=e("uint8arrays/from-string");function o(e){return parseInt(i(e,"base16"),16)}t.exports={numberToUint8Array:function(e){let t=e.toString(16);t.length%2==1&&(t="0"+t);return s(t,"base16")},uint8ArrayToNumber:o,varintUint8ArrayEncode:function(e){return Uint8Array.from(n.encode(o(e)))},varintEncode:function(e){return Uint8Array.from(n.encode(e))}}}}},{package:"multicodec",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@ensdomains/content-hash/node_modules/multicodec/src/util.js"}],[1693,{},function(){with(this)return function(){"use strict";return function(e,t,r){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var i=new Uint8Array(16);t.exports=function(){return n(i),i}}else{var s=new Array(16);t.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),s[t]=e>>>((3&t)<<3)&255;return s}}}}},{package:"uuid",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/analytics-node/node_modules/uuid/lib/rng-browser.js"}],[1692,{},function(){with(this)return function(){"use strict";return function(e,t,r){for(var n=[],i=0;i<256;++i)n[i]=(i+256).toString(16).substr(1);t.exports=function(e,t){var r=t||0,i=n;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}}}},{package:"uuid",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/analytics-node/node_modules/uuid/lib/bytesToUuid.js"}],[2217,{},function(){with(this)return function(){"use strict";return function(e,t,r){var n,i;n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&i.rotl(e,8)|4278255360&i.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=i.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],r=0,n=0;r<e.length;r++,n+=8)t[n>>>5]|=e[r]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},bytesToHex:function(e){for(var t=[],r=0;r<e.length;r++)t.push((e[r]>>>4).toString(16)),t.push((15&e[r]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},bytesToBase64:function(e){for(var t=[],r=0;r<e.length;r+=3)for(var i=e[r]<<16|e[r+1]<<8|e[r+2],s=0;s<4;s++)8*r+6*s<=8*e.length?t.push(n.charAt(i>>>6*(3-s)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],r=0,i=0;r<e.length;i=++r%4)0!=i&&t.push((n.indexOf(e.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|n.indexOf(e.charAt(r))>>>6-2*i);return t}},t.exports=i}}},{package:"crypt",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/crypt/crypt.js"}],[2144,{},function(){with(this)return function(){"use strict";return function(e,t,r){var n={utf8:{stringToBytes:function(e){return n.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(n.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}};t.exports=n}}},{package:"charenc",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/charenc/charenc.js"}],[2177,{},function(){with(this)return function(){"use strict";return function(e,t,r){var n=Object.prototype.toString;t.exports=function(e){switch(n.call(e)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}return null===e?"null":e===undefined?"undefined":e!=e?"nan":e&&1===e.nodeType?"element":null!=(t=e)&&(t._isBuffer||t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t))?"buffer":typeof(e=e.valueOf?e.valueOf():Object.prototype.valueOf.apply(e));var t}}}},{package:"component-type",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/component-type/index.js"}],[4761,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){return t=t||"and",r=r||", ",e.length<2?e[0]||"":(t.slice(0,2)===r?2==e.length&&(t=t.slice(1)):t=" "+t,e.slice(0,-1).join(r)+t+" "+e[e.length-1])}}}},{package:"join-component",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/join-component/index.js"}],[1798,{"is-retry-allowed":4749},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.isNetworkError=a,r.isRetryableError=l,r.isSafeRequestError=f,r.isIdempotentRequestError=h,r.isNetworkOrIdempotentRequestError=d,r.exponentialDelay=m,r.default=g;var n,i=e("is-retry-allowed"),s=(n=i)&&n.__esModule?n:{default:n};var o="axios-retry";function a(e){return!e.response&&Boolean(e.code)&&"ECONNABORTED"!==e.code&&(0,s.default)(e)}var u=["get","head","options"],c=u.concat(["put","delete"]);function l(e){return"ECONNABORTED"!==e.code&&(!e.response||e.response.status>=500&&e.response.status<=599)}function f(e){return!!e.config&&(l(e)&&-1!==u.indexOf(e.config.method))}function h(e){return!!e.config&&(l(e)&&-1!==c.indexOf(e.config.method))}function d(e){return a(e)||h(e)}function p(){return 0}function m(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=100*Math.pow(2,e),r=.2*t*Math.random();return t+r}function y(e){var t=e[o]||{};return t.retryCount=t.retryCount||0,e[o]=t,t}function g(e,t){e.interceptors.request.use((function(e){return y(e).lastRequestTime=Date.now(),e})),e.interceptors.response.use(null,(function(r){var n=r.config;if(!n)return Promise.reject(r);var i=function(e,t){return Object.assign({},t,e[o])}(n,t),s=i.retries,a=s===undefined?3:s,u=i.retryCondition,c=u===undefined?d:u,l=i.retryDelay,f=l===undefined?p:l,h=i.shouldResetTimeout,m=h!==undefined&&h,g=y(n);if(c(r)&&g.retryCount<a){g.retryCount+=1;var v=f(g.retryCount,r);if(function(e,t){e.defaults.agent===t.agent&&delete t.agent,e.defaults.httpAgent===t.httpAgent&&delete t.httpAgent,e.defaults.httpsAgent===t.httpsAgent&&delete t.httpsAgent}(e,n),!m&&n.timeout&&g.lastRequestTime){var b=Date.now()-g.lastRequestTime;n.timeout=Math.max(n.timeout-b-v,1)}return n.transformRequest=[function(e){return e}],new Promise((function(t){return setTimeout((function(){return t(e(n))}),v)}))}return Promise.reject(r)}))}g.isNetworkError=a,g.isSafeRequestError=f,g.isIdempotentRequestError=h,g.isNetworkOrIdempotentRequestError=d,g.exponentialDelay=m,g.isRetryableError=l}}},{package:"axios-retry",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/axios-retry/lib/index.js"}],[1801,{"./cancel/Cancel":1802,"./cancel/CancelToken":1803,"./cancel/isCancel":1804,"./core/Axios":1805,"./core/mergeConfig":1811,"./defaults":1814,"./helpers/bind":1815,"./helpers/isAxiosError":1820,"./helpers/spread":1824,"./utils":1826},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./utils"),i=e("./helpers/bind"),s=e("./core/Axios"),o=e("./core/mergeConfig");function a(e){var t=new s(e),r=i(s.prototype.request,t);return n.extend(r,s.prototype,t),n.extend(r,t),r}var u=a(e("./defaults"));u.Axios=s,u.create=function(e){return a(o(u.defaults,e))},u.Cancel=e("./cancel/Cancel"),u.CancelToken=e("./cancel/CancelToken"),u.isCancel=e("./cancel/isCancel"),u.all=function(e){return Promise.all(e)},u.spread=e("./helpers/spread"),u.isAxiosError=e("./helpers/isAxiosError"),t.exports=u,t.exports.default=u}}},{package:"axios",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/axios/lib/axios.js"}],[2557,{"bn.js":2059,buffer:2105},function(){with(this)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.KECCAK256_RLP=r.KECCAK256_RLP_S=r.KECCAK256_RLP_ARRAY=r.KECCAK256_RLP_ARRAY_S=r.KECCAK256_NULL=r.KECCAK256_NULL_S=r.TWO_POW256=r.MAX_INTEGER=void 0;var n=e("bn.js");r.MAX_INTEGER=new n("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16),r.TWO_POW256=new n("10000000000000000000000000000000000000000000000000000000000000000",16),r.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",r.KECCAK256_NULL=t.from(r.KECCAK256_NULL_S,"hex"),r.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",r.KECCAK256_RLP_ARRAY=t.from(r.KECCAK256_RLP_ARRAY_S,"hex"),r.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",r.KECCAK256_RLP=t.from(r.KECCAK256_RLP_S,"hex")}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"ethereumjs-util",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/ethereumjs-wallet/node_modules/ethereumjs-util/dist/constants.js"}],[2556,{"bn.js":2059,buffer:2105,"ethjs-util":2565},function(){with(this)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.baToJSON=r.addHexPrefix=r.toUnsigned=r.fromSigned=r.bufferToHex=r.bufferToInt=r.toBuffer=r.stripZeros=r.unpad=r.setLengthRight=r.setLength=r.setLengthLeft=r.zeros=void 0;var n=e("ethjs-util"),i=e("bn.js");r.zeros=function(e){return t.allocUnsafe(e).fill(0)},r.setLengthLeft=function(e,t,n){void 0===n&&(n=!1);var i=r.zeros(t);return e=r.toBuffer(e),n?e.length<t?(e.copy(i),i):e.slice(0,t):e.length<t?(e.copy(i,t-e.length),i):e.slice(-t)},r.setLength=r.setLengthLeft,r.setLengthRight=function(e,t){return r.setLength(e,t,!0)},r.unpad=function(e){for(var t=(e=n.stripHexPrefix(e))[0];e.length>0&&"0"===t.toString();)t=(e=e.slice(1))[0];return e},r.stripZeros=r.unpad,r.toBuffer=function(e){if(!t.isBuffer(e))if(Array.isArray(e))e=t.from(e);else if("string"==typeof e){if(!n.isHexString(e))throw new Error("Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: "+e);e=t.from(n.padToEven(n.stripHexPrefix(e)),"hex")}else if("number"==typeof e)e=n.intToBuffer(e);else if(null===e||e===undefined)e=t.allocUnsafe(0);else if(i.isBN(e))e=e.toArrayLike(t);else{if(!e.toArray)throw new Error("invalid type");e=t.from(e.toArray())}return e},r.bufferToInt=function(e){return new i(r.toBuffer(e)).toNumber()},r.bufferToHex=function(e){return"0x"+(e=r.toBuffer(e)).toString("hex")},r.fromSigned=function(e){return new i(e).fromTwos(256)},r.toUnsigned=function(e){return t.from(e.toTwos(256).toArray())},r.addHexPrefix=function(e){return"string"!=typeof e||n.isHexPrefixed(e)?e:"0x"+e},r.baToJSON=function(e){if(t.isBuffer(e))return"0x"+e.toString("hex");if(e instanceof Array){for(var n=[],i=0;i<e.length;i++)n.push(r.baToJSON(e[i]));return n}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"ethereumjs-util",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/ethereumjs-wallet/node_modules/ethereumjs-util/dist/bytes.js"}],[2564,{"./bytes":2556,"./hash":2558,"./secp256k1v3-adapter":2561,"bn.js":2059,buffer:2105},function(){with(this)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.hashPersonalMessage=r.isValidSignature=r.fromRpcSig=r.toRpcSig=r.ecrecover=r.ecsign=void 0;var n=e("./secp256k1v3-adapter"),i=e("bn.js"),s=e("./bytes"),o=e("./hash");function a(e,t){return t?e-(2*t+35):e-27}function u(e){return 0===e||1===e}r.ecsign=function(e,t,r){var i=n.sign(e,t),s=i.recovery;return{r:i.signature.slice(0,32),s:i.signature.slice(32,64),v:r?s+(2*r+35):s+27}},r.ecrecover=function(e,r,i,o,c){var l=t.concat([s.setLength(i,32),s.setLength(o,32)],64),f=a(r,c);if(!u(f))throw new Error("Invalid signature v value");var h=n.recover(e,l,f);return n.publicKeyConvert(h,!1).slice(1)},r.toRpcSig=function(e,r,n,i){if(!u(a(e,i)))throw new Error("Invalid signature v value");return s.bufferToHex(t.concat([s.setLengthLeft(r,32),s.setLengthLeft(n,32),s.toBuffer(e)]))},r.fromRpcSig=function(e){var t=s.toBuffer(e);if(65!==t.length)throw new Error("Invalid signature length");var r=t[64];return r<27&&(r+=27),{v:r,r:t.slice(0,32),s:t.slice(32,64)}},r.isValidSignature=function(e,t,r,n,s){void 0===n&&(n=!0);var o=new i("7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0",16),c=new i("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",16);if(32!==t.length||32!==r.length)return!1;if(!u(a(e,s)))return!1;var l=new i(t),f=new i(r);return!(l.isZero()||l.gt(c)||f.isZero()||f.gt(c))&&(!n||1!==f.cmp(o))},r.hashPersonalMessage=function(e){var r=t.from("Ethereum Signed Message:\n"+e.length.toString(),"utf-8");return o.keccak(t.concat([r,e]))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"ethereumjs-util",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/ethereumjs-wallet/node_modules/ethereumjs-util/dist/signature.js"}],[2560,{"./bytes":2556,assert:1714,buffer:2105,"ethjs-util":2565,rlp:5798},function(){with(this)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.defineProperties=void 0;var n=e("assert"),i=e("ethjs-util"),s=e("rlp"),o=e("./bytes");r.defineProperties=function(e,r,a){if(e.raw=[],e._fields=[],e.toJSON=function(t){if(void 0===t&&(t=!1),t){var r={};return e._fields.forEach((function(t){r[t]="0x"+e[t].toString("hex")})),r}return o.baToJSON(e.raw)},e.serialize=function(){return s.encode(e.raw)},r.forEach((function(r,i){function s(){return e.raw[i]}function a(s){"00"!==(s=o.toBuffer(s)).toString("hex")||r.allowZero||(s=t.allocUnsafe(0)),r.allowLess&&r.length?(s=o.stripZeros(s),n(r.length>=s.length,"The field "+r.name+" must not have more "+r.length+" bytes")):r.allowZero&&0===s.length||!r.length||n(r.length===s.length,"The field "+r.name+" must have byte length of "+r.length),e.raw[i]=s}e._fields.push(r.name),Object.defineProperty(e,r.name,{enumerable:!0,configurable:!0,get:s,set:a}),r.default&&(e[r.name]=r.default),r.alias&&Object.defineProperty(e,r.alias,{enumerable:!1,configurable:!0,set:a,get:s})})),a)if("string"==typeof a&&(a=t.from(i.stripHexPrefix(a),"hex")),t.isBuffer(a)&&(a=s.decode(a)),Array.isArray(a)){if(a.length>e._fields.length)throw new Error("wrong number of fields in data");a.forEach((function(t,r){e[e._fields[r]]=o.toBuffer(t)}))}else{if("object"!=typeof a)throw new Error("invalid data");var u=Object.keys(a);r.forEach((function(t){-1!==u.indexOf(t.name)&&(e[t.name]=a[t.name]),-1!==u.indexOf(t.alias)&&(e[t.alias]=a[t.alias])}))}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"ethereumjs-util",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/ethereumjs-wallet/node_modules/ethereumjs-util/dist/object.js"}],[2555,{"./bytes":2556,"./hash":2558,"./secp256k1v3-adapter":2561,assert:1714,"bn.js":2059,buffer:2105,"ethjs-util":2565},function(){with(this)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.importPublic=r.privateToPublic=r.privateToAddress=r.publicToAddress=r.pubToAddress=r.isValidPublic=r.isValidPrivate=r.isPrecompiled=r.generateAddress2=r.generateAddress=r.isValidChecksumAddress=r.toChecksumAddress=r.isZeroAddress=r.isValidAddress=r.zeroAddress=void 0;var n=e("assert"),i=e("ethjs-util"),s=e("./secp256k1v3-adapter"),o=e("bn.js"),a=e("./bytes"),u=e("./hash");r.zeroAddress=function(){var e=a.zeros(20);return a.bufferToHex(e)},r.isValidAddress=function(e){return/^0x[0-9a-fA-F]{40}$/.test(e)},r.isZeroAddress=function(e){return r.zeroAddress()===a.addHexPrefix(e)},r.toChecksumAddress=function(e,t){e=i.stripHexPrefix(e).toLowerCase();for(var r=t!==undefined?t.toString()+"0x":"",n=u.keccak(r+e).toString("hex"),s="0x",o=0;o<e.length;o++)parseInt(n[o],16)>=8?s+=e[o].toUpperCase():s+=e[o];return s},r.isValidChecksumAddress=function(e,t){return r.isValidAddress(e)&&r.toChecksumAddress(e,t)===e},r.generateAddress=function(e,r){e=a.toBuffer(e);var n=new o(r);return n.isZero()?u.rlphash([e,null]).slice(-20):u.rlphash([e,t.from(n.toArray())]).slice(-20)},r.generateAddress2=function(e,r,i){var s=a.toBuffer(e),o=a.toBuffer(r),c=a.toBuffer(i);return n(20===s.length),n(32===o.length),u.keccak256(t.concat([t.from("ff","hex"),s,o,u.keccak256(c)])).slice(-20)},r.isPrecompiled=function(e){var t=a.unpad(e);return 1===t.length&&t[0]>=1&&t[0]<=8},r.isValidPrivate=function(e){return s.privateKeyVerify(e)},r.isValidPublic=function(e,r){return void 0===r&&(r=!1),64===e.length?s.publicKeyVerify(t.concat([t.from([4]),e])):!!r&&s.publicKeyVerify(e)},r.pubToAddress=function(e,t){return void 0===t&&(t=!1),e=a.toBuffer(e),t&&64!==e.length&&(e=s.publicKeyConvert(e,!1).slice(1)),n(64===e.length),u.keccak(e).slice(-20)},r.publicToAddress=r.pubToAddress,r.privateToAddress=function(e){return r.publicToAddress(r.privateToPublic(e))},r.privateToPublic=function(e){return e=a.toBuffer(e),s.publicKeyCreate(e,!1).slice(1)},r.importPublic=function(e){return 64!==(e=a.toBuffer(e)).length&&(e=s.publicKeyConvert(e,!1).slice(1)),e}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"ethereumjs-util",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/ethereumjs-wallet/node_modules/ethereumjs-util/dist/account.js"}],[2558,{"./bytes":2556,buffer:2105,"create-hash":2212,"ethereum-cryptography/keccak":2517,"ethjs-util":2565,rlp:5798},function(){with(this)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.rlphash=r.ripemd160=r.sha256=r.keccak256=r.keccak=void 0;var n=e("ethereum-cryptography/keccak"),i=n.keccak224,s=n.keccak384,o=n.keccak256,a=n.keccak512,u=e("create-hash"),c=e("ethjs-util"),l=e("rlp"),f=e("./bytes");r.keccak=function(e,r){switch(void 0===r&&(r=256),e="string"!=typeof e||c.isHexString(e)?f.toBuffer(e):t.from(e,"utf8"),r||(r=256),r){case 224:return i(e);case 256:return o(e);case 384:return s(e);case 512:return a(e);default:throw new Error("Invald algorithm: keccak"+r)}},r.keccak256=function(e){return r.keccak(e)},r.sha256=function(e){return e=f.toBuffer(e),u("sha256").update(e).digest()},r.ripemd160=function(e,t){e=f.toBuffer(e);var r=u("rmd160").update(e).digest();return!0===t?f.setLength(r,32):r},r.rlphash=function(e){return r.keccak(l.encode(e))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"ethereumjs-util",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/ethereumjs-wallet/node_modules/ethereumjs-util/dist/hash.js"}],[2565,{buffer:2105,"is-hex-prefixed":4739,"strip-hex-prefix":5960},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("is-hex-prefixed"),i=e("strip-hex-prefix");function s(e){var t=e;if("string"!=typeof t)throw new Error("[ethjs-util] while padding to even, value must be string, is currently "+typeof t+", while padToEven.");return t.length%2&&(t="0"+t),t}function o(e){return"0x"+e.toString(16)}t.exports={arrayContainsArray:function(e,t,r){if(!0!==Array.isArray(e))throw new Error("[ethjs-util] method arrayContainsArray requires input 'superset' to be an array got type '"+typeof e+"'");if(!0!==Array.isArray(t))throw new Error("[ethjs-util] method arrayContainsArray requires input 'subset' to be an array got type '"+typeof t+"'");return t[Boolean(r)?"some":"every"]((function(t){return e.indexOf(t)>=0}))},intToBuffer:function(e){var t=o(e);return new r(s(t.slice(2)),"hex")},getBinarySize:function(e){if("string"!=typeof e)throw new Error("[ethjs-util] while getting binary size, method getBinarySize requires input 'str' to be type String, got '"+typeof e+"'.");return r.byteLength(e,"utf8")},isHexPrefixed:n,stripHexPrefix:i,padToEven:s,intToHex:o,fromAscii:function(e){for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r).toString(16);t+=n.length<2?"0"+n:n}return"0x"+t},fromUtf8:function(e){return"0x"+s(new r(e,"utf8").toString("hex")).replace(/^0+|0+$/g,"")},toAscii:function(e){var t="",r=0,n=e.length;for("0x"===e.substring(0,2)&&(r=2);r<n;r+=2){var i=parseInt(e.substr(r,2),16);t+=String.fromCharCode(i)}return t},toUtf8:function(e){return new r(s(i(e).replace(/^0+|0+$/g,"")),"hex").toString("utf8")},getKeys:function(e,t,r){if(!Array.isArray(e))throw new Error("[ethjs-util] method getKeys expecting type Array as 'params' input, got '"+typeof e+"'");if("string"!=typeof t)throw new Error("[ethjs-util] method getKeys expecting type String for input 'key' got '"+typeof t+"'.");for(var n=[],i=0;i<e.length;i++){var s=e[i][t];if(r&&!s)s="";else if("string"!=typeof s)throw new Error("invalid abi");n.push(s)}return n},isHexString:function(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"ethjs-util",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/ethereumjs-wallet/node_modules/ethjs-util/lib/index.js"}],[2561,{"./secp256k1v3-lib/der":2562,"./secp256k1v3-lib/index":2563,buffer:2105,"ethereum-cryptography/secp256k1":2525},function(){with(this)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.ecdhUnsafe=r.ecdh=r.recover=r.verify=r.sign=r.signatureImportLax=r.signatureImport=r.signatureExport=r.signatureNormalize=r.publicKeyCombine=r.publicKeyTweakMul=r.publicKeyTweakAdd=r.publicKeyVerify=r.publicKeyConvert=r.publicKeyCreate=r.privateKeyTweakMul=r.privateKeyTweakAdd=r.privateKeyModInverse=r.privateKeyNegate=r.privateKeyImport=r.privateKeyExport=r.privateKeyVerify=void 0;var n=e("ethereum-cryptography/secp256k1"),i=e("./secp256k1v3-lib/index"),s=e("./secp256k1v3-lib/der");r.privateKeyVerify=function(e){return 32===e.length&&n.privateKeyVerify(Uint8Array.from(e))},r.privateKeyExport=function(e,t){if(32!==e.length)throw new RangeError("private key length is invalid");var r=i.privateKeyExport(e,t);return s.privateKeyExport(e,r,t)},r.privateKeyImport=function(e){if(null!==(e=s.privateKeyImport(e))&&32===e.length&&r.privateKeyVerify(e))return e;throw new Error("couldn't import from DER format")},r.privateKeyNegate=function(e){return t.from(n.privateKeyNegate(Uint8Array.from(e)))},r.privateKeyModInverse=function(e){if(32!==e.length)throw new Error("private key length is invalid");return t.from(i.privateKeyModInverse(Uint8Array.from(e)))},r.privateKeyTweakAdd=function(e,r){return t.from(n.privateKeyTweakAdd(Uint8Array.from(e),r))},r.privateKeyTweakMul=function(e,r){return t.from(n.privateKeyTweakMul(Uint8Array.from(e),Uint8Array.from(r)))},r.publicKeyCreate=function(e,r){return t.from(n.publicKeyCreate(Uint8Array.from(e),r))},r.publicKeyConvert=function(e,r){return t.from(n.publicKeyConvert(Uint8Array.from(e),r))},r.publicKeyVerify=function(e){return(33===e.length||65===e.length)&&n.publicKeyVerify(Uint8Array.from(e))},r.publicKeyTweakAdd=function(e,r,i){return t.from(n.publicKeyTweakAdd(Uint8Array.from(e),Uint8Array.from(r),i))},r.publicKeyTweakMul=function(e,r,i){return t.from(n.publicKeyTweakMul(Uint8Array.from(e),Uint8Array.from(r),i))},r.publicKeyCombine=function(e,r){var i=[];return e.forEach((function(e){i.push(Uint8Array.from(e))})),t.from(n.publicKeyCombine(i,r))},r.signatureNormalize=function(e){return t.from(n.signatureNormalize(Uint8Array.from(e)))},r.signatureExport=function(e){return t.from(n.signatureExport(Uint8Array.from(e)))},r.signatureImport=function(e){return t.from(n.signatureImport(Uint8Array.from(e)))},r.signatureImportLax=function(e){if(0===e.length)throw new RangeError("signature length is invalid");var t=s.signatureImportLax(e);if(null===t)throw new Error("couldn't parse DER signature");return i.signatureImport(t)},r.sign=function(e,r,i){if(null===i)throw new TypeError("options should be an Object");var s=undefined;if(i){if(s={},null===i.data)throw new TypeError("options.data should be a Buffer");if(i.data){if(32!=i.data.length)throw new RangeError("options.data length is invalid");s.data=new Uint8Array(i.data)}if(null===i.noncefn)throw new TypeError("options.noncefn should be a Function");i.noncefn&&(s.noncefn=function(e,r,n,s,o){var a=null!=n?t.from(n):null,u=null!=s?t.from(s):null,c=t.from("");return i.noncefn&&(c=i.noncefn(t.from(e),t.from(r),a,u,o)),new Uint8Array(c)})}var o=n.ecdsaSign(Uint8Array.from(e),Uint8Array.from(r),s);return{signature:t.from(o.signature),recovery:o.recid}},r.verify=function(e,t,r){return n.ecdsaVerify(Uint8Array.from(t),Uint8Array.from(e),r)},r.recover=function(e,r,i,s){return t.from(n.ecdsaRecover(Uint8Array.from(r),i,Uint8Array.from(e),s))},r.ecdh=function(e,r){return t.from(n.ecdh(Uint8Array.from(e),Uint8Array.from(r),{}))},r.ecdhUnsafe=function(e,r,n){if(33!==e.length&&65!==e.length)throw new RangeError("public key length is invalid");if(32!==r.length)throw new RangeError("private key length is invalid");return t.from(i.ecdhUnsafe(Uint8Array.from(e),Uint8Array.from(r),n))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"ethereumjs-util",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/ethereumjs-wallet/node_modules/ethereumjs-util/dist/secp256k1v3-adapter.js"}],[2567,{},function(){with(this)return function(){"use strict";return function(e,t,r){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var i=new Uint8Array(16);t.exports=function(){return n(i),i}}else{var s=new Array(16);t.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),s[t]=e>>>((3&t)<<3)&255;return s}}}}},{package:"uuid",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/ethereumjs-wallet/node_modules/uuid/lib/rng-browser.js"}],[2566,{},function(){with(this)return function(){"use strict";return function(e,t,r){for(var n=[],i=0;i<256;++i)n[i]=(i+256).toString(16).substr(1);t.exports=function(e,t){var r=t||0,i=n;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}}}},{package:"uuid",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/ethereumjs-wallet/node_modules/uuid/lib/bytesToUuid.js"}],[5969,{},function(){with(this)return function(){"use strict";return function(e,t,r){const n=()=>!0,i=["newListener","removeListener"],s=e=>!i.includes(e);t.exports=function(e,t){let r=(t=t||{}).eventFilter||n;if("skipInternal"===r&&(r=s),"function"!=typeof r)throw new Error("createEventEmitterProxy - Invalid eventFilter");let i=e;return new Proxy({},{get:(e,t)=>"setTarget"===t?o:i[t],set:(e,t,r)=>"setTarget"===t?(o=r,!0):(i[t]=r,!0)});function o(e){const t=i;i=e,t.eventNames().filter(r).forEach((r=>{(function(e,t){if(e.rawListeners)return e.rawListeners(t);let r=e._events[t]||[];Array.isArray(r)||(r=[r]);return r.slice()})(t,r).forEach((t=>e.on(r,t)))})),t.removeAllListeners()}}}}},{package:"swappable-obj-proxy",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/swappable-obj-proxy/src/createEventEmitterProxy.js"}],[5970,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(e){let t=e;return new Proxy({},{get:(e,n)=>"setTarget"===n?r:t[n],set:(e,n,i)=>"setTarget"===n?(r=i,!0):(t[n]=i,!0)});function r(e){t=e}}}}},{package:"swappable-obj-proxy",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/swappable-obj-proxy/src/createSwappableProxy.js"}],[2388,{"./BaseBlockTracker":2385,"./PollingBlockTracker":2386,"./SubscribeBlockTracker":2387},function(){with(this)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./BaseBlockTracker"),r),i(e("./PollingBlockTracker"),r),i(e("./SubscribeBlockTracker"),r)}}},{package:"eth-block-tracker",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/eth-block-tracker/dist/index.js"}],[1337,{"./commonjs/core.js":1334,"./commonjs/duplex.js":1335,"./commonjs/helpers.js":1336},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./commonjs/core.js");Object.assign(r,n);var i=e("./commonjs/duplex.js");Object.assign(r,i);var s=e("./commonjs/helpers.js");r.JsonPatchError=s.PatchError,r.deepClone=s._deepClone,r.escapePathComponent=s.escapePathComponent,r.unescapePathComponent=s.unescapePathComponent}}},{package:"fast-json-patch",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/smart-transactions-controller/node_modules/fast-json-patch/index.js"}],[5082,{"./_baseFor":5081,"./keys":5217},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./_baseFor"),i=e("./keys");t.exports=function(e,t){return e&&n(e,t,i)}}}},{package:"lodash",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/lodash/_baseForOwn.js"}],[5075,{"./_defineProperty":5128},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./_defineProperty");t.exports=function(e,t,r){"__proto__"==t&&n?n(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}}}},{package:"lodash",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/lodash/_baseAssignValue.js"}],[5098,{"./_baseMatches":5101,"./_baseMatchesProperty":5102,"./identity":5200,"./isArray":5203,"./property":5223},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./_baseMatches"),i=e("./_baseMatchesProperty"),s=e("./identity"),o=e("./isArray"),a=e("./property");t.exports=function(e){return"function"==typeof e?e:null==e?s:"object"==typeof e?o(e)?i(e[0],e[1]):n(e):a(e)}}}},{package:"lodash",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/lodash/_baseIteratee.js"}],[5076,{"./_Stack":5058,"./_arrayEach":5063,"./_assignValue":5071,"./_baseAssign":5073,"./_baseAssignIn":5074,"./_cloneBuffer":5116,"./_copyArray":5121,"./_copySymbols":5123,"./_copySymbolsIn":5124,"./_getAllKeys":5133,"./_getAllKeysIn":5134,"./_getTag":5142,"./_initCloneArray":5150,"./_initCloneByTag":5151,"./_initCloneObject":5152,"./isArray":5203,"./isBuffer":5206,"./isMap":5210,"./isObject":5211,"./isSet":5214,"./keys":5217,"./keysIn":5218},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./_Stack"),i=e("./_arrayEach"),s=e("./_assignValue"),o=e("./_baseAssign"),a=e("./_baseAssignIn"),u=e("./_cloneBuffer"),c=e("./_copyArray"),l=e("./_copySymbols"),f=e("./_copySymbolsIn"),h=e("./_getAllKeys"),d=e("./_getAllKeysIn"),p=e("./_getTag"),m=e("./_initCloneArray"),y=e("./_initCloneByTag"),g=e("./_initCloneObject"),v=e("./isArray"),b=e("./isBuffer"),_=e("./isMap"),w=e("./isObject"),E=e("./isSet"),k=e("./keys"),A=e("./keysIn"),S="[object Arguments]",x="[object Function]",I="[object Object]",T={};T[S]=T["[object Array]"]=T["[object ArrayBuffer]"]=T["[object DataView]"]=T["[object Boolean]"]=T["[object Date]"]=T["[object Float32Array]"]=T["[object Float64Array]"]=T["[object Int8Array]"]=T["[object Int16Array]"]=T["[object Int32Array]"]=T["[object Map]"]=T["[object Number]"]=T[I]=T["[object RegExp]"]=T["[object Set]"]=T["[object String]"]=T["[object Symbol]"]=T["[object Uint8Array]"]=T["[object Uint8ClampedArray]"]=T["[object Uint16Array]"]=T["[object Uint32Array]"]=!0,T["[object Error]"]=T[x]=T["[object WeakMap]"]=!1,t.exports=function e(t,r,P,N,C,R){var O,M=1&r,D=2&r,L=4&r;if(P&&(O=C?P(t,N,C,R):P(t)),O!==undefined)return O;if(!w(t))return t;var B=v(t);if(B){if(O=m(t),!M)return c(t,O)}else{var U=p(t),j=U==x||"[object GeneratorFunction]"==U;if(b(t))return u(t,M);if(U==I||U==S||j&&!C){if(O=D||j?{}:g(t),!M)return D?f(t,a(O,t)):l(t,o(O,t))}else{if(!T[U])return C?t:{};O=y(t,U,M)}}R||(R=new n);var K=R.get(t);if(K)return K;R.set(t,O),E(t)?t.forEach((function(n){O.add(e(n,r,P,n,t,R))})):_(t)&&t.forEach((function(n,i){O.set(i,e(n,r,P,i,t,R))}));var F=B?undefined:(L?D?d:h:D?A:k)(t);return i(F||t,(function(n,i){F&&(n=t[i=n]),s(O,i,e(n,r,P,i,t,R))})),O}}}},{package:"lodash",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/lodash/_baseClone.js"}],[2153,{},function(){with(this)return function(){"use strict";return function(e,t,r){for(var n="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",i={},s=0;s<n.length;s++)i[n.charAt(s)]=s;t.exports={encode:function(e){if(0===e.length)return"";var t,r=[0];for(o=0;o<e.length;o++){for(t=0;t<r.length;t++)r[t]<<=8;r[0]+=e[o];var i=0;for(t=0;t<r.length;++t)r[t]+=i,i=r[t]/58|0,r[t]%=58;for(;i;)r.push(i%58),i=i/58|0}for(o=0;0===e[o]&&o<e.length-1;o++)r.push(0);for(var s="",o=r.length-1;o>=0;o--)s+=n[r[o]];return s},decode:function(e){if(0===e.length)return[];var t,r,n=[0];for(t=0;t<e.length;t++){var s=e[t];if(!(s in i))throw new Error("Non-base58 character");for(r=0;r<n.length;r++)n[r]*=58;n[0]+=i[s];var o=0;for(r=0;r<n.length;++r)n[r]+=o,o=n[r]>>8,n[r]&=255;for(;o;)n.push(255&o),o>>=8}for(t=0;"1"===e[t]&&t<e.length-1;t++)n.push(0);return n.reverse()}}}}},{package:"bs58",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/coinstring/node_modules/bs58/lib/bs58.js"}],[1112,{"../messages.json":1114,"bn.js":2059,"create-hash":2212,elliptic:2342,"safe-buffer":5800},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("safe-buffer").Buffer,i=e("create-hash"),s=e("bn.js"),o=e("elliptic").ec,a=e("../messages.json"),u=new o("secp256k1"),c=u.curve;function l(e){var t=e[0];switch(t){case 2:case 3:return 33!==e.length?null:function(e,t){var r=new s(t);if(r.cmp(c.p)>=0)return null;var n=(r=r.toRed(c.red)).redSqr().redIMul(r).redIAdd(c.b).redSqrt();return 3===e!==n.isOdd()&&(n=n.redNeg()),u.keyPair({pub:{x:r,y:n}})}(t,e.slice(1,33));case 4:case 6:case 7:return 65!==e.length?null:function(e,t,r){var n=new s(t),i=new s(r);if(n.cmp(c.p)>=0||i.cmp(c.p)>=0)return null;if(n=n.toRed(c.red),i=i.toRed(c.red),(6===e||7===e)&&i.isOdd()!==(7===e))return null;var o=n.redSqr().redIMul(n);return i.redSqr().redISub(o.redIAdd(c.b)).isZero()?u.keyPair({pub:{x:n,y:i}}):null}(t,e.slice(1,33),e.slice(33,65));default:return null}}r.privateKeyVerify=function(e){var t=new s(e);return t.cmp(c.n)<0&&!t.isZero()},r.privateKeyExport=function(e,t){var r=new s(e);if(r.cmp(c.n)>=0||r.isZero())throw new Error(a.EC_PRIVATE_KEY_EXPORT_DER_FAIL);return n.from(u.keyFromPrivate(e).getPublic(t,!0))},r.privateKeyNegate=function(e){var t=new s(e);return t.isZero()?n.alloc(32):c.n.sub(t).umod(c.n).toArrayLike(n,"be",32)},r.privateKeyModInverse=function(e){var t=new s(e);if(t.cmp(c.n)>=0||t.isZero())throw new Error(a.EC_PRIVATE_KEY_RANGE_INVALID);return t.invm(c.n).toArrayLike(n,"be",32)},r.privateKeyTweakAdd=function(e,t){var r=new s(t);if(r.cmp(c.n)>=0)throw new Error(a.EC_PRIVATE_KEY_TWEAK_ADD_FAIL);if(r.iadd(new s(e)),r.cmp(c.n)>=0&&r.isub(c.n),r.isZero())throw new Error(a.EC_PRIVATE_KEY_TWEAK_ADD_FAIL);return r.toArrayLike(n,"be",32)},r.privateKeyTweakMul=function(e,t){var r=new s(t);if(r.cmp(c.n)>=0||r.isZero())throw new Error(a.EC_PRIVATE_KEY_TWEAK_MUL_FAIL);return r.imul(new s(e)),r.cmp(c.n)&&(r=r.umod(c.n)),r.toArrayLike(n,"be",32)},r.publicKeyCreate=function(e,t){var r=new s(e);if(r.cmp(c.n)>=0||r.isZero())throw new Error(a.EC_PUBLIC_KEY_CREATE_FAIL);return n.from(u.keyFromPrivate(e).getPublic(t,!0))},r.publicKeyConvert=function(e,t){var r=l(e);if(null===r)throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);return n.from(r.getPublic(t,!0))},r.publicKeyVerify=function(e){return null!==l(e)},r.publicKeyTweakAdd=function(e,t,r){var i=l(e);if(null===i)throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);if((t=new s(t)).cmp(c.n)>=0)throw new Error(a.EC_PUBLIC_KEY_TWEAK_ADD_FAIL);var o=c.g.mul(t).add(i.pub);if(o.isInfinity())throw new Error(a.EC_PUBLIC_KEY_TWEAK_ADD_FAIL);return n.from(o.encode(!0,r))},r.publicKeyTweakMul=function(e,t,r){var i=l(e);if(null===i)throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);if((t=new s(t)).cmp(c.n)>=0||t.isZero())throw new Error(a.EC_PUBLIC_KEY_TWEAK_MUL_FAIL);return n.from(i.pub.mul(t).encode(!0,r))},r.publicKeyCombine=function(e,t){for(var r=new Array(e.length),i=0;i<e.length;++i)if(r[i]=l(e[i]),null===r[i])throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);for(var s=r[0].pub,o=1;o<r.length;++o)s=s.add(r[o].pub);if(s.isInfinity())throw new Error(a.EC_PUBLIC_KEY_COMBINE_FAIL);return n.from(s.encode(!0,t))},r.signatureNormalize=function(e){var t=new s(e.slice(0,32)),r=new s(e.slice(32,64));if(t.cmp(c.n)>=0||r.cmp(c.n)>=0)throw new Error(a.ECDSA_SIGNATURE_PARSE_FAIL);var i=n.from(e);return 1===r.cmp(u.nh)&&c.n.sub(r).toArrayLike(n,"be",32).copy(i,32),i},r.signatureExport=function(e){var t=e.slice(0,32),r=e.slice(32,64);if(new s(t).cmp(c.n)>=0||new s(r).cmp(c.n)>=0)throw new Error(a.ECDSA_SIGNATURE_PARSE_FAIL);return{r:t,s:r}},r.signatureImport=function(e){var t=new s(e.r);t.cmp(c.n)>=0&&(t=new s(0));var r=new s(e.s);return r.cmp(c.n)>=0&&(r=new s(0)),n.concat([t.toArrayLike(n,"be",32),r.toArrayLike(n,"be",32)])},r.sign=function(e,t,r,i){if("function"==typeof r){var o=r;r=function(r){var u=o(e,t,null,i,r);if(!n.isBuffer(u)||32!==u.length)throw new Error(a.ECDSA_SIGN_FAIL);return new s(u)}}var l=new s(t);if(l.cmp(c.n)>=0||l.isZero())throw new Error(a.ECDSA_SIGN_FAIL);var f=u.sign(e,t,{canonical:!0,k:r,pers:i});return{signature:n.concat([f.r.toArrayLike(n,"be",32),f.s.toArrayLike(n,"be",32)]),recovery:f.recoveryParam}},r.verify=function(e,t,r){var n={r:t.slice(0,32),s:t.slice(32,64)},i=new s(n.r),o=new s(n.s);if(i.cmp(c.n)>=0||o.cmp(c.n)>=0)throw new Error(a.ECDSA_SIGNATURE_PARSE_FAIL);if(1===o.cmp(u.nh)||i.isZero()||o.isZero())return!1;var f=l(r);if(null===f)throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);return u.verify(e,n,{x:f.pub.x,y:f.pub.y})},r.recover=function(e,t,r,i){var o={r:t.slice(0,32),s:t.slice(32,64)},l=new s(o.r),f=new s(o.s);if(l.cmp(c.n)>=0||f.cmp(c.n)>=0)throw new Error(a.ECDSA_SIGNATURE_PARSE_FAIL);try{if(l.isZero()||f.isZero())throw new Error;var h=u.recoverPubKey(e,o,r);return n.from(h.encode(!0,i))}catch(e){throw new Error(a.ECDSA_RECOVER_FAIL)}},r.ecdh=function(e,t){var n=r.ecdhUnsafe(e,t,!0);return i("sha256").update(n).digest()},r.ecdhUnsafe=function(e,t,r){var i=l(e);if(null===i)throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);var o=new s(t);if(o.cmp(c.n)>=0||o.isZero())throw new Error(a.ECDH_FAIL);return n.from(i.pub.mul(o).encode(!0,r))}}}},{package:"secp256k1",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/secp256k1/lib/elliptic/index.js"}],[1113,{"./assert":1110,"./der":1111,"./messages.json":1114},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./assert"),i=e("./der"),s=e("./messages.json");function o(e,t){return e===undefined?t:(n.isBoolean(e,s.COMPRESSED_TYPE_INVALID),e)}t.exports=function(e){return{privateKeyVerify:function(t){return n.isBuffer(t,s.EC_PRIVATE_KEY_TYPE_INVALID),32===t.length&&e.privateKeyVerify(t)},privateKeyExport:function(t,r){n.isBuffer(t,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,s.EC_PRIVATE_KEY_LENGTH_INVALID),r=o(r,!0);var a=e.privateKeyExport(t,r);return i.privateKeyExport(t,a,r)},privateKeyImport:function(t){if(n.isBuffer(t,s.EC_PRIVATE_KEY_TYPE_INVALID),(t=i.privateKeyImport(t))&&32===t.length&&e.privateKeyVerify(t))return t;throw new Error(s.EC_PRIVATE_KEY_IMPORT_DER_FAIL)},privateKeyNegate:function(t){return n.isBuffer(t,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,s.EC_PRIVATE_KEY_LENGTH_INVALID),e.privateKeyNegate(t)},privateKeyModInverse:function(t){return n.isBuffer(t,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,s.EC_PRIVATE_KEY_LENGTH_INVALID),e.privateKeyModInverse(t)},privateKeyTweakAdd:function(t,r){return n.isBuffer(t,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,s.EC_PRIVATE_KEY_LENGTH_INVALID),n.isBuffer(r,s.TWEAK_TYPE_INVALID),n.isBufferLength(r,32,s.TWEAK_LENGTH_INVALID),e.privateKeyTweakAdd(t,r)},privateKeyTweakMul:function(t,r){return n.isBuffer(t,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,s.EC_PRIVATE_KEY_LENGTH_INVALID),n.isBuffer(r,s.TWEAK_TYPE_INVALID),n.isBufferLength(r,32,s.TWEAK_LENGTH_INVALID),e.privateKeyTweakMul(t,r)},publicKeyCreate:function(t,r){return n.isBuffer(t,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,s.EC_PRIVATE_KEY_LENGTH_INVALID),r=o(r,!0),e.publicKeyCreate(t,r)},publicKeyConvert:function(t,r){return n.isBuffer(t,s.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,s.EC_PUBLIC_KEY_LENGTH_INVALID),r=o(r,!0),e.publicKeyConvert(t,r)},publicKeyVerify:function(t){return n.isBuffer(t,s.EC_PUBLIC_KEY_TYPE_INVALID),e.publicKeyVerify(t)},publicKeyTweakAdd:function(t,r,i){return n.isBuffer(t,s.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,s.EC_PUBLIC_KEY_LENGTH_INVALID),n.isBuffer(r,s.TWEAK_TYPE_INVALID),n.isBufferLength(r,32,s.TWEAK_LENGTH_INVALID),i=o(i,!0),e.publicKeyTweakAdd(t,r,i)},publicKeyTweakMul:function(t,r,i){return n.isBuffer(t,s.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,s.EC_PUBLIC_KEY_LENGTH_INVALID),n.isBuffer(r,s.TWEAK_TYPE_INVALID),n.isBufferLength(r,32,s.TWEAK_LENGTH_INVALID),i=o(i,!0),e.publicKeyTweakMul(t,r,i)},publicKeyCombine:function(t,r){n.isArray(t,s.EC_PUBLIC_KEYS_TYPE_INVALID),n.isLengthGTZero(t,s.EC_PUBLIC_KEYS_LENGTH_INVALID);for(var i=0;i<t.length;++i)n.isBuffer(t[i],s.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t[i],33,65,s.EC_PUBLIC_KEY_LENGTH_INVALID);return r=o(r,!0),e.publicKeyCombine(t,r)},signatureNormalize:function(t){return n.isBuffer(t,s.ECDSA_SIGNATURE_TYPE_INVALID),n.isBufferLength(t,64,s.ECDSA_SIGNATURE_LENGTH_INVALID),e.signatureNormalize(t)},signatureExport:function(t){n.isBuffer(t,s.ECDSA_SIGNATURE_TYPE_INVALID),n.isBufferLength(t,64,s.ECDSA_SIGNATURE_LENGTH_INVALID);var r=e.signatureExport(t);return i.signatureExport(r)},signatureImport:function(t){n.isBuffer(t,s.ECDSA_SIGNATURE_TYPE_INVALID),n.isLengthGTZero(t,s.ECDSA_SIGNATURE_LENGTH_INVALID);var r=i.signatureImport(t);if(r)return e.signatureImport(r);throw new Error(s.ECDSA_SIGNATURE_PARSE_DER_FAIL)},signatureImportLax:function(t){n.isBuffer(t,s.ECDSA_SIGNATURE_TYPE_INVALID),n.isLengthGTZero(t,s.ECDSA_SIGNATURE_LENGTH_INVALID);var r=i.signatureImportLax(t);if(r)return e.signatureImport(r);throw new Error(s.ECDSA_SIGNATURE_PARSE_DER_FAIL)},sign:function(t,r,i){n.isBuffer(t,s.MSG32_TYPE_INVALID),n.isBufferLength(t,32,s.MSG32_LENGTH_INVALID),n.isBuffer(r,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(r,32,s.EC_PRIVATE_KEY_LENGTH_INVALID);var o=null,a=null;return i!==undefined&&(n.isObject(i,s.OPTIONS_TYPE_INVALID),i.data!==undefined&&(n.isBuffer(i.data,s.OPTIONS_DATA_TYPE_INVALID),n.isBufferLength(i.data,32,s.OPTIONS_DATA_LENGTH_INVALID),o=i.data),i.noncefn!==undefined&&(n.isFunction(i.noncefn,s.OPTIONS_NONCEFN_TYPE_INVALID),a=i.noncefn)),e.sign(t,r,a,o)},verify:function(t,r,i){return n.isBuffer(t,s.MSG32_TYPE_INVALID),n.isBufferLength(t,32,s.MSG32_LENGTH_INVALID),n.isBuffer(r,s.ECDSA_SIGNATURE_TYPE_INVALID),n.isBufferLength(r,64,s.ECDSA_SIGNATURE_LENGTH_INVALID),n.isBuffer(i,s.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(i,33,65,s.EC_PUBLIC_KEY_LENGTH_INVALID),e.verify(t,r,i)},recover:function(t,r,i,a){return n.isBuffer(t,s.MSG32_TYPE_INVALID),n.isBufferLength(t,32,s.MSG32_LENGTH_INVALID),n.isBuffer(r,s.ECDSA_SIGNATURE_TYPE_INVALID),n.isBufferLength(r,64,s.ECDSA_SIGNATURE_LENGTH_INVALID),n.isNumber(i,s.RECOVERY_ID_TYPE_INVALID),n.isNumberInInterval(i,-1,4,s.RECOVERY_ID_VALUE_INVALID),a=o(a,!0),e.recover(t,r,i,a)},ecdh:function(t,r){return n.isBuffer(t,s.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,s.EC_PUBLIC_KEY_LENGTH_INVALID),n.isBuffer(r,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(r,32,s.EC_PRIVATE_KEY_LENGTH_INVALID),e.ecdh(t,r)},ecdhUnsafe:function(t,r,i){return n.isBuffer(t,s.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,s.EC_PUBLIC_KEY_LENGTH_INVALID),n.isBuffer(r,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(r,32,s.EC_PRIVATE_KEY_LENGTH_INVALID),i=o(i,!0),e.ecdhUnsafe(t,r,i)}}}}}},{package:"secp256k1",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/secp256k1/lib/index.js"}],[1101,{buffer:2105,"is-hex-prefixed":4739,"strip-hex-prefix":5960},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("is-hex-prefixed"),i=e("strip-hex-prefix");function s(e){var t=e;if("string"!=typeof t)throw new Error("[ethjs-util] while padding to even, value must be string, is currently "+typeof t+", while padToEven.");return t.length%2&&(t="0"+t),t}function o(e){return"0x"+e.toString(16)}t.exports={arrayContainsArray:function(e,t,r){if(!0!==Array.isArray(e))throw new Error("[ethjs-util] method arrayContainsArray requires input 'superset' to be an array got type '"+typeof e+"'");if(!0!==Array.isArray(t))throw new Error("[ethjs-util] method arrayContainsArray requires input 'subset' to be an array got type '"+typeof t+"'");return t[Boolean(r)?"some":"every"]((function(t){return e.indexOf(t)>=0}))},intToBuffer:function(e){var t=o(e);return new r(s(t.slice(2)),"hex")},getBinarySize:function(e){if("string"!=typeof e)throw new Error("[ethjs-util] while getting binary size, method getBinarySize requires input 'str' to be type String, got '"+typeof e+"'.");return r.byteLength(e,"utf8")},isHexPrefixed:n,stripHexPrefix:i,padToEven:s,intToHex:o,fromAscii:function(e){for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r).toString(16);t+=n.length<2?"0"+n:n}return"0x"+t},fromUtf8:function(e){return"0x"+s(new r(e,"utf8").toString("hex")).replace(/^0+|0+$/g,"")},toAscii:function(e){var t="",r=0,n=e.length;for("0x"===e.substring(0,2)&&(r=2);r<n;r+=2){var i=parseInt(e.substr(r,2),16);t+=String.fromCharCode(i)}return t},toUtf8:function(e){return new r(s(i(e).replace(/^0+|0+$/g,"")),"hex").toString("utf8")},getKeys:function(e,t,r){if(!Array.isArray(e))throw new Error("[ethjs-util] method getKeys expecting type Array as 'params' input, got '"+typeof e+"'");if("string"!=typeof t)throw new Error("[ethjs-util] method getKeys expecting type String for input 'key' got '"+typeof t+"'.");for(var n=[],i=0;i<e.length;i++){var s=e[i][t];if(r&&!s)s="";else if("string"!=typeof s)throw new Error("invalid abi");n.push(s)}return n},isHexString:function(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"ethjs-util",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/ethjs-util/lib/index.js"}],[1103,{"./lib/api":1104,"./lib/keccak":1108},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=e("./lib/api")(e("./lib/keccak"))}}},{package:"keccak",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/keccak/js.js"}],[2454,{assert:1714,"bn.js":2059,"create-hash":2212,"ethjs-util":2455,keccak:2456,rlp:5798,"safe-buffer":5800,secp256k1:2463},function(){with(this)return function(){"use strict";return function(e,t,r){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=e("keccak"),s=e("secp256k1"),o=e("assert"),a=e("rlp"),u=e("bn.js"),c=e("create-hash"),l=e("safe-buffer").Buffer;Object.assign(r,e("ethjs-util")),r.MAX_INTEGER=new u("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16),r.TWO_POW256=new u("10000000000000000000000000000000000000000000000000000000000000000",16),r.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",r.SHA3_NULL_S=r.KECCAK256_NULL_S,r.KECCAK256_NULL=l.from(r.KECCAK256_NULL_S,"hex"),r.SHA3_NULL=r.KECCAK256_NULL,r.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",r.SHA3_RLP_ARRAY_S=r.KECCAK256_RLP_ARRAY_S,r.KECCAK256_RLP_ARRAY=l.from(r.KECCAK256_RLP_ARRAY_S,"hex"),r.SHA3_RLP_ARRAY=r.KECCAK256_RLP_ARRAY,r.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",r.SHA3_RLP_S=r.KECCAK256_RLP_S,r.KECCAK256_RLP=l.from(r.KECCAK256_RLP_S,"hex"),r.SHA3_RLP=r.KECCAK256_RLP,r.BN=u,r.rlp=a,r.secp256k1=s,r.zeros=function(e){return l.allocUnsafe(e).fill(0)},r.zeroAddress=function(){var e=r.zeros(20);return r.bufferToHex(e)},r.setLengthLeft=r.setLength=function(e,t,n){var i=r.zeros(t);return e=r.toBuffer(e),n?e.length<t?(e.copy(i),i):e.slice(0,t):e.length<t?(e.copy(i,t-e.length),i):e.slice(-t)},r.setLengthRight=function(e,t){return r.setLength(e,t,!0)},r.unpad=r.stripZeros=function(e){for(var t=(e=r.stripHexPrefix(e))[0];e.length>0&&"0"===t.toString();)t=(e=e.slice(1))[0];return e},r.toBuffer=function(e){if(!l.isBuffer(e))if(Array.isArray(e))e=l.from(e);else if("string"==typeof e)e=r.isHexString(e)?l.from(r.padToEven(r.stripHexPrefix(e)),"hex"):l.from(e);else if("number"==typeof e)e=r.intToBuffer(e);else if(null===e||e===undefined)e=l.allocUnsafe(0);else if(u.isBN(e))e=e.toArrayLike(l);else{if(!e.toArray)throw new Error("invalid type");e=l.from(e.toArray())}return e},r.bufferToInt=function(e){return new u(r.toBuffer(e)).toNumber()},r.bufferToHex=function(e){return"0x"+(e=r.toBuffer(e)).toString("hex")},r.fromSigned=function(e){return new u(e).fromTwos(256)},r.toUnsigned=function(e){return l.from(e.toTwos(256).toArray())},r.keccak=function(e,t){return e=r.toBuffer(e),t||(t=256),i("keccak"+t).update(e).digest()},r.keccak256=function(e){return r.keccak(e)},r.sha3=r.keccak,r.sha256=function(e){return e=r.toBuffer(e),c("sha256").update(e).digest()},r.ripemd160=function(e,t){e=r.toBuffer(e);var n=c("rmd160").update(e).digest();return!0===t?r.setLength(n,32):n},r.rlphash=function(e){return r.keccak(a.encode(e))},r.isValidPrivate=function(e){return s.privateKeyVerify(e)},r.isValidPublic=function(e,t){return 64===e.length?s.publicKeyVerify(l.concat([l.from([4]),e])):!!t&&s.publicKeyVerify(e)},r.pubToAddress=r.publicToAddress=function(e,t){return e=r.toBuffer(e),t&&64!==e.length&&(e=s.publicKeyConvert(e,!1).slice(1)),o(64===e.length),r.keccak(e).slice(-20)};var f=r.privateToPublic=function(e){return e=r.toBuffer(e),s.publicKeyCreate(e,!1).slice(1)};r.importPublic=function(e){return 64!==(e=r.toBuffer(e)).length&&(e=s.publicKeyConvert(e,!1).slice(1)),e},r.ecsign=function(e,t){var r=s.sign(e,t),n={};return n.r=r.signature.slice(0,32),n.s=r.signature.slice(32,64),n.v=r.recovery+27,n},r.hashPersonalMessage=function(e){var t=r.toBuffer("Ethereum Signed Message:\n"+e.length.toString());return r.keccak(l.concat([t,e]))},r.ecrecover=function(e,t,n,i){var o=l.concat([r.setLength(n,32),r.setLength(i,32)],64),a=t-27;if(0!==a&&1!==a)throw new Error("Invalid signature v value");var u=s.recover(e,o,a);return s.publicKeyConvert(u,!1).slice(1)},r.toRpcSig=function(e,t,n){if(27!==e&&28!==e)throw new Error("Invalid recovery id");return r.bufferToHex(l.concat([r.setLengthLeft(t,32),r.setLengthLeft(n,32),r.toBuffer(e-27)]))},r.fromRpcSig=function(e){if(65!==(e=r.toBuffer(e)).length)throw new Error("Invalid signature length");var t=e[64];return t<27&&(t+=27),{v:t,r:e.slice(0,32),s:e.slice(32,64)}},r.privateToAddress=function(e){return r.publicToAddress(f(e))},r.isValidAddress=function(e){return/^0x[0-9a-fA-F]{40}$/.test(e)},r.isZeroAddress=function(e){return r.zeroAddress()===r.addHexPrefix(e)},r.toChecksumAddress=function(e){e=r.stripHexPrefix(e).toLowerCase();for(var t=r.keccak(e).toString("hex"),n="0x",i=0;i<e.length;i++)parseInt(t[i],16)>=8?n+=e[i].toUpperCase():n+=e[i];return n},r.isValidChecksumAddress=function(e){return r.isValidAddress(e)&&r.toChecksumAddress(e)===e},r.generateAddress=function(e,t){return e=r.toBuffer(e),t=(t=new u(t)).isZero()?null:l.from(t.toArray()),r.rlphash([e,t]).slice(-20)},r.isPrecompiled=function(e){var t=r.unpad(e);return 1===t.length&&t[0]>=1&&t[0]<=8},r.addHexPrefix=function(e){return"string"!=typeof e||r.isHexPrefixed(e)?e:"0x"+e},r.isValidSignature=function(e,t,r,n){var i=new u("7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0",16),s=new u("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",16);return 32===t.length&&32===r.length&&((27===e||28===e)&&(t=new u(t),r=new u(r),!(t.isZero()||t.gt(s)||r.isZero()||r.gt(s))&&(!1!==n||1!==new u(r).cmp(i))))},r.baToJSON=function(e){if(l.isBuffer(e))return"0x"+e.toString("hex");if(e instanceof Array){for(var t=[],n=0;n<e.length;n++)t.push(r.baToJSON(e[n]));return t}},r.defineProperties=function(e,t,i){if(e.raw=[],e._fields=[],e.toJSON=function(t){if(t){var n={};return e._fields.forEach((function(t){n[t]="0x"+e[t].toString("hex")})),n}return r.baToJSON(this.raw)},e.serialize=function(){return a.encode(e.raw)},t.forEach((function(t,n){function i(){return e.raw[n]}function s(i){"00"!==(i=r.toBuffer(i)).toString("hex")||t.allowZero||(i=l.allocUnsafe(0)),t.allowLess&&t.length?(i=r.stripZeros(i),o(t.length>=i.length,"The field "+t.name+" must not have more "+t.length+" bytes")):t.allowZero&&0===i.length||!t.length||o(t.length===i.length,"The field "+t.name+" must have byte length of "+t.length),e.raw[n]=i}e._fields.push(t.name),Object.defineProperty(e,t.name,{enumerable:!0,configurable:!0,get:i,set:s}),t.default&&(e[t.name]=t.default),t.alias&&Object.defineProperty(e,t.alias,{enumerable:!1,configurable:!0,set:s,get:i})})),i)if("string"==typeof i&&(i=l.from(r.stripHexPrefix(i),"hex")),l.isBuffer(i)&&(i=a.decode(i)),Array.isArray(i)){if(i.length>e._fields.length)throw new Error("wrong number of fields in data");i.forEach((function(t,n){e[e._fields[n]]=r.toBuffer(t)}))}else{if("object"!==(void 0===i?"undefined":n(i)))throw new Error("invalid data");var s=Object.keys(i);t.forEach((function(t){-1!==s.indexOf(t.name)&&(e[t.name]=i[t.name]),-1!==s.indexOf(t.alias)&&(e[t.alias]=i[t.alias])}))}}}}},{package:"ethereumjs-util",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/eth-json-rpc-middleware/node_modules/ethereumjs-util/dist/index.js"}],[2442,{"./lib/index.js":2443},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=e("./lib/index.js")}}},{package:"ethereumjs-abi",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/eth-json-rpc-middleware/node_modules/ethereumjs-abi/index.js"}],[4355,{"./constants":4350,"aes-js":1689,"bignumber.js":4357,"buffer/":2121,"crc-32":2183,elliptic:2342},function(){with(this)return function(){"use strict";return function(e,t,r){var n=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.randomBytes=r.promisifyCb=r.existsIn=r.isAsciiStr=r.buildSignerPathBuf=r.getP256KeyPairFromPub=r.getP256KeyPair=r.parseDER=r.aes256_decrypt=r.aes256_encrypt=r.fixLen=r.ensureHexBuffer=r.splitFrames=r.isValidAssetPath=r.toPaddedDER=r.checksum=r.parseLattice1Response=void 0;var s=i(e("aes-js")),o=i(e("bignumber.js")),a=e("buffer/"),u=i(e("crc-32")),c=i(e("elliptic")),l=e("./constants"),f=l.BIP_CONSTANTS.COINS,h=l.BIP_CONSTANTS.PURPOSES,d=new(0,c.default.ec)("p256");r.parseLattice1Response=function(e){var t={err:null,data:null},n=a.Buffer.from(e,"hex"),i=0,s=n.readUInt8(i);if(i++,s!==l.VERSION_BYTE)return t.err="Incorrect protocol version. Please update your SDK",t;var o=n.readUInt8(i);if(i++,0!==o)return t.err="Incorrect response from Lattice1",t;n.readUInt32BE(i),i+=4;var u=n.readUInt16BE(i);i+=2;var c=n.slice(i,i+u);i+=u;var f=c.readUInt8(0);return f!==l.responseCodes.RESP_SUCCESS?(t.err="".concat(l.responseMsgs[f]?l.responseMsgs[f]:"Unknown Error"," (Lattice)"),t.responseCode=f,t):(t.data=c.slice(1,c.length),n.readUInt32BE(i)!==(0,r.checksum)(n.slice(0,n.length-4))?(t.err="Invalid checksum from device response",t.data=null,t):t)};r.checksum=function(e){return u.default.buf(e)>>>0};r.toPaddedDER=function(e){var t=a.Buffer.alloc(74);return a.Buffer.from(e.toDER()).copy(t),t};r.isValidAssetPath=function(e,t){var r=[h.ETH,h.BTC_LEGACY,h.BTC_WRAPPED_SEGWIT,h.BTC_SEGWIT],n=[f.ETH,f.BTC,f.BTC_TESTNET];return!((e[1]===f.BTC||e[1]===f.BTC_TESTNET)&&e[0]!==h.BTC_WRAPPED_SEGWIT&&!t.allowBtcLegacyAndSegwitAddrs)&&(r.indexOf(e[0])>=0&&(n.indexOf(e[1])>=0||[60,61,966,700,9006,9e3,1007,553,178,137,37310,108,40,889,1987,820,6060,1620,1313114,76,246529,246785,1001,227,916,464,2221,344,73799,246].indexOf(e[1]-l.HARDENED_OFFSET)>0))};r.splitFrames=function(e,t){for(var r=[],n=Math.ceil(e.length/t),i=0,s=0;s<n;s++)r.push(e.slice(i,i+t)),i+=t;return r};r.ensureHexBuffer=function(e,t){void 0===t&&(t=!0);try{if(null===e||0===e&&!0===t)return a.Buffer.alloc(0);var r="number"==typeof e||function(e){var t=new o.default(e).toString().split(".").join(""),r=new String(e);return t.slice(0,8)===r.slice(0,8)}(e);return(e=r?"".concat(new o.default(e).toString(16)):"string"==typeof e&&"0x"===e.slice(0,2)?e.slice(2):e.toString("hex")).length%2>0&&(e="0".concat(e)),"00"!==e||r?a.Buffer.from(e,"hex"):a.Buffer.alloc(0)}catch(t){throw new Error("Cannot convert ".concat(e.toString()," to hex buffer (").concat(t.toString(),")"))}};r.fixLen=function(e,t){var r=a.Buffer.alloc(t);return e.length<t?(e.copy(r,t-e.length),r):e.slice(-t)};r.aes256_encrypt=function(e,t){var r=a.Buffer.from(l.AES_IV),n=new s.default.ModeOfOperation.cbc(t,r),i=e.length%16==0?e:s.default.padding.pkcs7.pad(e);return a.Buffer.from(n.encrypt(i))};r.aes256_decrypt=function(e,t){var r=a.Buffer.from(l.AES_IV),n=new s.default.ModeOfOperation.cbc(t,r);return a.Buffer.from(n.decrypt(e))};r.parseDER=function(e){if(48!==e[0]||2!==e[2])return null;var t=3,r={r:null,s:null},n=e[t];if(t++,r.r=e.slice(t,t+n),2!==e[t+=n])return null;var i=e[++t];return t++,r.s=e.slice(t,t+i),r};r.getP256KeyPair=function(e){return d.keyFromPrivate(e,"hex")};r.getP256KeyPairFromPub=function(e){return d.keyFromPublic(e,"hex")};r.buildSignerPathBuf=function(e,t){var r=a.Buffer.alloc(24),n=0;if(t&&e.length>5)throw new Error("Signer path must be <=5 indices.");if(!t&&5!==e.length)throw new Error("Your Lattice firmware only supports 5-index derivation paths. Please upgrade.");r.writeUInt32LE(e.length,n),n+=4;for(var i=0;i<5;i++)i<e.length?r.writeUInt32LE(e[i],n):r.writeUInt32LE(0,n),n+=4;return r};r.isAsciiStr=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)return!1;for(var r=t?[32,10]:[],n=0;n<e.length;n++){var i=e.charCodeAt(n);if(r.indexOf(i)<0&&(i<32||i>127))return!1}return!0};r.existsIn=function(e,t){return Object.keys(t).some((function(r){return t[r]===e}))};r.promisifyCb=function(e,t,r){return function(i){for(var s=[],o=1;o<arguments.length;o++)s[o-1]=arguments[o];return r&&"function"==typeof r?r.apply(void 0,n([i],s,!1)):i&&"string"==typeof i?t(i):e.apply(void 0,s)}};r.randomBytes=function(e){for(var t=a.Buffer.alloc(e),r=0;r<e;r++)t[r]=Math.round(255*Math.random());return t}}}},{package:"gridplus-sdk",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/gridplus-sdk/dist/util.js"}],[4352,{"./constants":4350,"buffer/":2121,"js-sha3":4764},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.abiParsers=r.unpackAbiDef=r.getFuncSig=r.buildAddAbiPayload=r.ABI_DEF_SZ=r.MAX_ABI_DEFS=void 0;var n=e("buffer/"),i=e("js-sha3"),s=e("./constants"),o=100,a=32,u=18;r.MAX_ABI_DEFS=2,r.ABI_DEF_SZ=605;r.buildAddAbiPayload=function(e){if(!e||!Array.isArray(e))throw new Error("Missing definitions.");if(e.length>r.MAX_ABI_DEFS)throw new Error("You may only add ".concat(r.MAX_ABI_DEFS," ABI definitions per request."));var t=n.Buffer.alloc(1+r.MAX_ABI_DEFS*r.ABI_DEF_SZ),i=0;return t.writeUInt8(e.length,i),i++,e.forEach((function(e){if(!e.sig||!e.name||!e.params)throw new Error("name, sig, and params must be present for every ABI definition.");var r=n.Buffer.from(e.sig,"hex");if(4!==r.length)throw new Error("Function signatures must always be four bytes.");if(r.copy(t,i),i+=r.length,n.Buffer.from(e.name).length>99)throw new Error("Only function names shorter than ".concat(99," characters are supported."));n.Buffer.from(e.name).slice(0,o).copy(t,i),i+=o;var s=Array.isArray(e.params)?e.params.length:0;if(t.writeUInt8(s,i),i++,e.category&&"string"==typeof e.category){var c=n.Buffer.from(e.category);if(c.length>31)throw new Error("Category name must be shorter than ".concat(31,". Got ").concat(c.length));c.copy(t,i)}if(i+=a,s>u)throw new Error("Currently only ABI defintions with <=10 parameters are supported.");s>0?(e.params.forEach((function(e){if(e.name===undefined||e.latticeTypeIdx===undefined||e.isArray===undefined||e.arraySz===undefined)throw new Error("name, latticeTypeIdx, isArray, and arraySz must be defined for all ABI params.");n.Buffer.from(e.name).slice(0,20).copy(t,i),i+=20})),i+=20*(u-s),e.params.forEach((function(e){t.writeUInt8(e.latticeTypeIdx,i),i++,t.writeUInt8(e.isArray?1:0,i),i++,t.writeUInt32LE(e.arraySz,i),i+=4})),i+=6*(u-s)):i+=468})),t};r.getFuncSig=function(e){var t="".concat(e.name,"(");return e.inputs.forEach((function(e){if(e.type.indexOf("tuple")>-1){var r=e.type.slice(e.type.indexOf("tuple")+5);t+="(",e.components.forEach((function(r,n){t+="".concat(r.type).concat(n===e.components.length-1?"":",")})),t+=")".concat(r,",")}else t+="".concat(e.type,",")})),e.inputs.length>0&&(t=t.slice(0,t.length-1)),t+=")",(0,i.keccak256)(t).slice(0,8)};function c(e,t,r){void 0===t&&(t=[]),void 0===r&&(r=!1);var n=[];if(e.forEach((function(e){var i=e.type,o={isArray:!1,arraySz:0,name:e.name},a=i.indexOf("["),u=i.indexOf("]");if(i.split("[").length>2)throw new Error("Skipping function with unsupported multidimensional array type");if(a>-1&&u>-1)if(a>=u);else if(a+1===u)o.isArray=!0;else{var l=parseInt(i.slice(a+1,u));if(isNaN(l))return o;o.isArray=!0,o.arraySz=l}var f,h=a>-1?i.slice(0,a):i;if("tuple"===h){if(!0===r)throw new Error("Nested tuples are not supported");h="tuple".concat(e.components.length),n=c(e.components,n,!0)}if(o.latticeTypeIdx=(f=h,s.ETH_ABI_LATTICE_FW_TYPE_MAP[f]),!o.latticeTypeIdx)throw new Error("Unsupported type: ".concat(i));t.push(o)})),t.concat(n).length>18)throw new Error("Function has too many parameters for Lattice firmware (18 max)");return t.concat(n)}r.unpackAbiDef=function(e){var t=0,r={header:{sig:"",name:"",numParam:0},category:"",params:[]};r.header.sig="0x"+e.slice(t,t+4).toString("hex"),t+=4,r.header.name=e.slice(t,t+o).toString().split("\0")[0],t+=o,r.header.numParam=e.readUInt8(t),t+=1,r.category=e.slice(t,t+a).toString().split("\0")[0],t+=a;for(var n=0;n<u;n++){if(n<r.header.numParam){var i={name:"",type:0,typeName:"",isArray:!1,arraySz:0};i.name=e.slice(t,t+20).toString().split("\0")[0],r.params.push(i)}t+=20}function c(e){var t=null;return Object.keys(s.ETH_ABI_LATTICE_FW_TYPE_MAP).forEach((function(r){s.ETH_ABI_LATTICE_FW_TYPE_MAP[r]===e&&(t=r)})),t}for(n=0;n<u;n++)n<r.header.numParam&&(r.params[n].type=e.readUInt8(t),t+=1,r.params[n].typeName=c(r.params[n].type),r.params[n].isArray=e.readUInt8(t),t+=1,r.params[n].arraySz=e.readUInt32LE(t),t+=4);return r},r.abiParsers={etherscan:function(e,t){void 0===t&&(t=!1);var n=[];return e.forEach((function(e){if(e.name&&e.inputs&&"function"===e.type&&"view"!==e.stateMutability&&!0!==e.constant)try{var i=(0,r.getFuncSig)(e),s=c(e.inputs);n.push({name:e.name,sig:i,params:s})}catch(r){if(!0!==t)throw new Error(r);console.error("Failed to load def:",e.name,r.toString())}})),n}},r.default={MAX_ABI_DEFS:r.MAX_ABI_DEFS,buildAddAbiPayload:r.buildAddAbiPayload,getFuncSig:r.getFuncSig,abiParsers:r.abiParsers}}}},{package:"gridplus-sdk",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/gridplus-sdk/dist/ethereumAbi.js"}],[2121,{"base64-js":1969,ieee754:4436},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("base64-js"),i=e("ieee754"),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=u,r.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},r.INSPECT_MAX_BYTES=50;var o=2147483647;function a(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,u.prototype),t}function u(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return f(e)}return c(e,t,r)}function c(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!u.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|m(e,t),n=a(r),i=n.write(e,t);i!==r&&(n=n.slice(0,i));return n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(F(e,Uint8Array)){var t=new Uint8Array(e);return d(t.buffer,t.byteOffset,t.byteLength)}return h(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, "+"or Array-like Object. Received type "+typeof e);if(F(e,ArrayBuffer)||e&&F(e.buffer,ArrayBuffer))return d(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(F(e,SharedArrayBuffer)||e&&F(e.buffer,SharedArrayBuffer)))return d(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return u.from(n,t,r);var i=function(e){if(u.isBuffer(e)){var t=0|p(e.length),r=a(t);return 0===r.length||e.copy(r,0,0,t),r}if(e.length!==undefined)return"number"!=typeof e.length||V(e.length)?a(0):h(e);if("Buffer"===e.type&&Array.isArray(e.data))return h(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, "+"or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function f(e){return l(e),a(e<0?0:0|p(e))}function h(e){for(var t=e.length<0?0:0|p(e.length),r=a(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function d(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=t===undefined&&r===undefined?new Uint8Array(e):r===undefined?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,u.prototype),n}function p(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+o.toString(16)+" bytes");return 0|e}function m(e,t){if(u.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||F(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. '+"Received type "+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return U(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return j(e).length;default:if(i)return n?-1:U(e).length;t=(""+t).toLowerCase(),i=!0}}function y(e,t,r){var n=!1;if((t===undefined||t<0)&&(t=0),t>this.length)return"";if((r===undefined||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return N(this,t,r);case"utf8":case"utf-8":return x(this,t,r);case"ascii":return T(this,t,r);case"latin1":case"binary":return P(this,t,r);case"base64":return S(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function g(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function v(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),V(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:b(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):b(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function b(e,t,r,n,i){var s,o=1,a=e.length,u=t.length;if(n!==undefined&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,a/=2,u/=2,r/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var l=-1;for(s=r;s<a;s++)if(c(e,s)===c(t,-1===l?0:s-l)){if(-1===l&&(l=s),s-l+1===u)return l*o}else-1!==l&&(s-=s-l),l=-1}else for(r+u>a&&(r=a-u),s=r;s>=0;s--){for(var f=!0,h=0;h<u;h++)if(c(e,s+h)!==c(t,h)){f=!1;break}if(f)return s}return-1}function _(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var s=t.length;n>s/2&&(n=s/2);for(var o=0;o<n;++o){var a=parseInt(t.substr(2*o,2),16);if(V(a))return o;e[r+o]=a}return o}function w(e,t,r,n){return K(U(t,e.length-r),e,r,n)}function E(e,t,r,n){return K(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function k(e,t,r,n){return K(j(t),e,r,n)}function A(e,t,r,n){return K(function(e,t){for(var r,n,i,s=[],o=0;o<e.length&&!((t-=2)<0);++o)n=(r=e.charCodeAt(o))>>8,i=r%256,s.push(i),s.push(n);return s}(t,e.length-r),e,r,n)}function S(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function x(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var s,o,a,u,c=e[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=r)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(s=e[i+1]))&&(u=(31&c)<<6|63&s)>127&&(l=u);break;case 3:s=e[i+1],o=e[i+2],128==(192&s)&&128==(192&o)&&(u=(15&c)<<12|(63&s)<<6|63&o)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:s=e[i+1],o=e[i+2],a=e[i+3],128==(192&s)&&128==(192&o)&&128==(192&a)&&(u=(15&c)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=f}return function(e){var t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=I));return r}(n)}r.kMaxLength=o,u.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by "+"`buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){return u.isBuffer(this)?this.buffer:undefined}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){return u.isBuffer(this)?this.byteOffset:undefined}}),u.poolSize=8192,u.from=function(e,t,r){return c(e,t,r)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(e,t,r){return function(e,t,r){return l(e),e<=0?a(e):t!==undefined?"string"==typeof r?a(e).fill(t,r):a(e).fill(t):a(e)}(e,t,r)},u.allocUnsafe=function(e){return f(e)},u.allocUnsafeSlow=function(e){return f(e)},u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if(F(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),F(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var r;if(t===undefined)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=u.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var s=e[r];if(F(s,Uint8Array))i+s.length>n.length?u.from(s).copy(n,i):Uint8Array.prototype.set.call(n,s,i);else{if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,i)}i+=s.length}return n},u.byteLength=m,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},u.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?x(this,0,e):y.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},s&&(u.prototype[s]=u.prototype.inspect),u.prototype.compare=function(e,t,r,n,i){if(F(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. '+"Received type "+typeof e);if(t===undefined&&(t=0),r===undefined&&(r=e?e.length:0),n===undefined&&(n=0),i===undefined&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var s=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(t>>>=0),a=Math.min(s,o),c=this.slice(n,i),l=e.slice(t,r),f=0;f<a;++f)if(c[f]!==l[f]){s=c[f],o=l[f];break}return s<o?-1:o<s?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return v(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return v(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(t===undefined)n="utf8",r=this.length,t=0;else if(r===undefined&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,n===undefined&&(n="utf8")):(n=r,r=undefined)}var i=this.length-t;if((r===undefined||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return _(this,e,t,r);case"utf8":case"utf-8":return w(this,e,t,r);case"ascii":case"latin1":case"binary":return E(this,e,t,r);case"base64":return k(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function T(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function P(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function N(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",s=t;s<r;++s)i+=H[e[s]];return i}function C(e,t,r){for(var n=e.slice(t,r),i="",s=0;s<n.length-1;s+=2)i+=String.fromCharCode(n[s]+256*n[s+1]);return i}function R(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,r,n,i,s){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function M(e,t,r,n,i,s){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function D(e,t,r,n,s){return t=+t,r>>>=0,s||M(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function L(e,t,r,n,s){return t=+t,r>>>=0,s||M(e,0,r,8),i.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=t===undefined?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,u.prototype),n},u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||R(e,t,this.length);for(var n=this[e],i=1,s=0;++s<t&&(i*=256);)n+=this[e+s]*i;return n},u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||R(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e>>>=0,t||R(e,1,this.length),this[e]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||R(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||R(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||R(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||R(e,t,this.length);for(var n=this[e],i=1,s=0;++s<t&&(i*=256);)n+=this[e+s]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||R(e,t,this.length);for(var n=t,i=1,s=this[e+--n];n>0&&(i*=256);)s+=this[e+--n]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*t)),s},u.prototype.readInt8=function(e,t){return e>>>=0,t||R(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||R(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){e>>>=0,t||R(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return e>>>=0,t||R(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||R(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||R(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||R(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||O(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,s=0;for(this[t]=255&e;++s<r&&(i*=256);)this[t+s]=e/i&255;return t+r},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||O(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+r},u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);O(this,e,t,r,i-1,-i)}var s=0,o=1,a=0;for(this[t]=255&e;++s<r&&(o*=256);)e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);O(this,e,t,r,i-1,-i)}var s=r-1,o=1,a=0;for(this[t+s]=255&e;--s>=0&&(o*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeFloatLE=function(e,t,r){return D(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return D(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return L(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return L(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(!u.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},u.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),n!==undefined&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var i=e.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(e=i)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var s;if(t>>>=0,r=r===undefined?this.length:r>>>0,e||(e=0),"number"==typeof e)for(s=t;s<r;++s)this[s]=e;else{var o=u.isBuffer(e)?e:u.from(e,n),a=o.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<r-t;++s)this[s+t]=o[s%a]}return this};var B=/[^+/0-9A-Za-z-_]/g;function U(e,t){var r;t=t||Infinity;for(var n=e.length,i=null,s=[],o=0;o<n;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function j(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(B,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function K(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function F(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function V(e){return e!=e}var H=function(){for(var e="0123456789abcdef",t=new Array(256),r=0;r<16;++r)for(var n=16*r,i=0;i<16;++i)t[n+i]=e[r]+e[i];return t}()}}},{package:"buffer",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/buffer/index.js"}],[5962,{"./agent-base":5961,"./is-object":5963,"./request-base":5964,"./response-base":5965,"component-emitter":2175},function(){with(this)return function(){"use strict";return function(e,t,r){var n;"undefined"!=typeof window?n=window:"undefined"!=typeof self?n=self:(console.warn("Using browser-only version of superagent in non-browser environment"),n=this);var i=e("component-emitter"),s=e("./request-base"),o=e("./is-object"),a=e("./response-base"),u=e("./agent-base");function c(){}var l=r=t.exports=function(e,t){return"function"==typeof t?new r.Request("GET",e).end(t):1==arguments.length?new r.Request("GET",e):new r.Request(e,t)};r.Request=g,l.getXHR=function(){if(!(!n.XMLHttpRequest||n.location&&"file:"==n.location.protocol&&n.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw Error("Browser-only version of superagent could not find XHR")};var f="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};function h(e){if(!o(e))return e;var t=[];for(var r in e)d(t,r,e[r]);return t.join("&")}function d(e,t,r){if(null!=r)if(Array.isArray(r))r.forEach((function(r){d(e,t,r)}));else if(o(r))for(var n in r)d(e,t+"["+n+"]",r[n]);else e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));else null===r&&e.push(encodeURIComponent(t))}function p(e){for(var t,r,n={},i=e.split("&"),s=0,o=i.length;s<o;++s)-1==(r=(t=i[s]).indexOf("="))?n[decodeURIComponent(t)]="":n[decodeURIComponent(t.slice(0,r))]=decodeURIComponent(t.slice(r+1));return n}function m(e){return/[\/+]json($|[^-\w])/.test(e)}function y(e){this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var t=this.xhr.status;1223===t&&(t=204),this._setStatusProperties(t),this.header=this.headers=function(e){for(var t,r,n,i,s=e.split(/\r?\n/),o={},a=0,u=s.length;a<u;++a)-1!==(t=(r=s[a]).indexOf(":"))&&(n=r.slice(0,t).toLowerCase(),i=f(r.slice(t+1)),o[n]=i);return o}(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&e._responseType?this.body=this.xhr.response:this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function g(e,t){var r=this;this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",(function(){var e,t=null,n=null;try{n=new y(r)}catch(e){return(t=new Error("Parser is unable to parse the response")).parse=!0,t.original=e,r.xhr?(t.rawResponse=void 0===r.xhr.responseType?r.xhr.responseText:r.xhr.response,t.status=r.xhr.status?r.xhr.status:null,t.statusCode=t.status):(t.rawResponse=null,t.status=null),r.callback(t)}r.emit("response",n);try{r._isResponseOK(n)||(e=new Error(n.statusText||"Unsuccessful HTTP response"))}catch(t){e=t}e?(e.original=t,e.response=n,e.status=n.status,r.callback(e,n)):r.callback(null,n)}))}function v(e,t,r){var n=l("DELETE",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n}l.serializeObject=h,l.parseString=p,l.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},l.serialize={"application/x-www-form-urlencoded":h,"application/json":JSON.stringify},l.parse={"application/x-www-form-urlencoded":p,"application/json":JSON.parse},a(y.prototype),y.prototype._parseBody=function(e){var t=l.parse[this.type];return this.req._parser?this.req._parser(this,e):(!t&&m(this.type)&&(t=l.parse["application/json"]),t&&e&&(e.length||e instanceof Object)?t(e):null)},y.prototype.toError=function(){var e=this.req,t=e.method,r=e.url,n="cannot "+t+" "+r+" ("+this.status+")",i=new Error(n);return i.status=this.status,i.method=t,i.url=r,i},l.Response=y,i(g.prototype),s(g.prototype),g.prototype.type=function(e){return this.set("Content-Type",l.types[e]||e),this},g.prototype.accept=function(e){return this.set("Accept",l.types[e]||e),this},g.prototype.auth=function(e,t,r){1===arguments.length&&(t=""),"object"==typeof t&&null!==t&&(r=t,t=""),r||(r={type:"function"==typeof btoa?"basic":"auto"});var n=function(e){if("function"==typeof btoa)return btoa(e);throw new Error("Cannot use basic auth, btoa is not a function")};return this._auth(e,t,r,n)},g.prototype.query=function(e){return"string"!=typeof e&&(e=h(e)),e&&this._query.push(e),this},g.prototype.attach=function(e,t,r){if(t){if(this._data)throw Error("superagent can't mix .send() and .attach()");this._getFormData().append(e,t,r||t.name)}return this},g.prototype._getFormData=function(){return this._formData||(this._formData=new n.FormData),this._formData},g.prototype.callback=function(e,t){if(this._shouldRetry(e,t))return this._retry();var r=this._callback;this.clearTimeout(),e&&(this._maxRetries&&(e.retries=this._retries-1),this.emit("error",e)),r(e,t)},g.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},g.prototype.buffer=g.prototype.ca=g.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},g.prototype.pipe=g.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")},g.prototype._isHost=function(e){return e&&"object"==typeof e&&!Array.isArray(e)&&"[object Object]"!==Object.prototype.toString.call(e)},g.prototype.end=function(e){return this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=e||c,this._finalizeQueryString(),this._end()},g.prototype._end=function(){var e=this,t=this.xhr=l.getXHR(),r=this._formData||this._data;this._setTimeouts(),t.onreadystatechange=function(){var r=t.readyState;if(r>=2&&e._responseTimeoutTimer&&clearTimeout(e._responseTimeoutTimer),4==r){var n;try{n=t.status}catch(e){n=0}if(!n){if(e.timedout||e._aborted)return;return e.crossDomainError()}e.emit("end")}};var n=function(t,r){r.total>0&&(r.percent=r.loaded/r.total*100),r.direction=t,e.emit("progress",r)};if(this.hasListeners("progress"))try{t.onprogress=n.bind(null,"download"),t.upload&&(t.upload.onprogress=n.bind(null,"upload"))}catch(e){}try{this.username&&this.password?t.open(this.method,this.url,!0,this.username,this.password):t.open(this.method,this.url,!0)}catch(e){return this.callback(e)}if(this._withCredentials&&(t.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof r&&!this._isHost(r)){var i=this._header["content-type"],s=this._serializer||l.serialize[i?i.split(";")[0]:""];!s&&m(i)&&(s=l.serialize["application/json"]),s&&(r=s(r))}for(var o in this.header)null!=this.header[o]&&this.header.hasOwnProperty(o)&&t.setRequestHeader(o,this.header[o]);return this._responseType&&(t.responseType=this._responseType),this.emit("request",this),t.send(void 0!==r?r:null),this},l.agent=function(){return new u},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach((function(e){u.prototype[e.toLowerCase()]=function(t,r){var n=new l.Request(e,t);return this._setDefaults(n),r&&n.end(r),n}})),u.prototype.del=u.prototype.delete,l.get=function(e,t,r){var n=l("GET",e);return"function"==typeof t&&(r=t,t=null),t&&n.query(t),r&&n.end(r),n},l.head=function(e,t,r){var n=l("HEAD",e);return"function"==typeof t&&(r=t,t=null),t&&n.query(t),r&&n.end(r),n},l.options=function(e,t,r){var n=l("OPTIONS",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},l.del=v,l.delete=v,l.patch=function(e,t,r){var n=l("PATCH",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},l.post=function(e,t,r){var n=l("POST",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},l.put=function(e,t,r){var n=l("PUT",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n}}}},{package:"superagent",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/superagent/lib/client.js"}],[2026,{"./bits":1995,"./buffer":2012,"./byte":2023,"./integer":2028,"./nibble":2031,"./string":2034},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.string=r.nibble=r.integer=r.byte=r.buffer=r.bits=void 0;var n=e("./bits");r.bits=n.default;var i=e("./buffer");r.buffer=i.default;var s=e("./byte");r.byte=s.default;var o=e("./integer");r.integer=o.default;var a=e("./nibble");r.nibble=a.default;var u=e("./string");r.string=u.default;var c={bits:n.default,buffer:i.default,byte:s.default,integer:o.default,nibble:a.default,string:u.default};r.default=c}}},{package:"bitwise",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/bitwise/index.js"}],[4353,{"./constants":4350,"./index":4354,"./util":4355,"buffer/":2121,"hash.js/lib/hash/sha":4409,"js-sha3":4764},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getEncodedPayload=r.parseGenericSigningResponse=r.buildGenericSigningMsgRequest=void 0;var n=e("buffer/"),i=e("js-sha3"),s=e("hash.js/lib/hash/sha"),o=e("./constants"),a=e("./index"),u=e("./util");r.buildGenericSigningMsgRequest=function(e){var t=e.signerPath,a=e.curveType,c=e.hashType,l=e.encodingType,f=void 0===l?null:l,h=e.omitPubkey,d=void 0!==h&&h,p=e.fwConstants,m=p.extraDataFrameSz,y=p.extraDataMaxFrames,g=p.prehashAllowed,v=p.genericSigning,b=p.varAddrPathSzAllowed,_=v.curveTypes,w=v.encodingTypes,E=v.hashTypes,k=v.baseDataSz,A=v.baseReqSz,S=(0,r.getEncodedPayload)(e.payload,f,w),x=S.encoding,I=S.payloadBuf;if(0===I.length)throw new Error("Payload could not be handled.");if(!(v&&m&&y&&g))throw new Error("Unsupported. Please update your Lattice firmware.");if(!(0,u.existsIn)(a,_))throw new Error("Unsupported curve type.");if(!(0,u.existsIn)(c,E))throw new Error("Unsupported hash type.");if(a===_.ED25519){if(c!==E.NONE)throw new Error("Signing on ed25519 requires unhashed message");t.forEach((function(e){if(e<o.HARDENED_OFFSET)throw new Error("Signing on ed25519 requires all signer path indices be hardened.")}))}var T=n.Buffer.alloc(A),P=0;T.writeUInt32LE(x,P),P+=4,T.writeUInt8(c,P),P+=1,T.writeUInt8(a,P),P+=1;var N=(0,u.buildSignerPathBuf)(t,b);N.copy(T,P),P+=N.length,T.writeUInt8(d?1:0,P),P+=1,T.writeUInt16LE(I.length,P),P+=2;var C=k+y*m,R=[],O=null;if(I.length>k)if(g&&I.length>C){if(c===E.NONE)throw new Error("Message too large to send and could not be prehashed (hashType=NONE).");if(c===E.KECCAK256)O=n.Buffer.from((0,i.keccak256)(I),"hex");else{if(c!==E.SHA256)throw new Error("Unsupported hash type.");O=n.Buffer.from((0,s.sha256)().update(I).digest("hex"),"hex")}}else{(0,u.splitFrames)(I.slice(k),m).forEach((function(e){var t=n.Buffer.alloc(4);t.writeUInt32LE(e.length,0),R.push(n.Buffer.concat([t,e]))}))}return(O||I).copy(T,P),{payload:T,extraDataPayloads:R,schema:o.signingSchema.GENERAL_SIGNING,curveType:a,omitPubkey:d}};r.parseGenericSigningResponse=function(e,t,r,i){var s={pubkey:null,sig:null};if(r===a.Constants.SIGNING.CURVES.SECP256K1){if(i)t+=65;else{var o=e.readUint8(t);if(t+=1,2===o||3===o)s.pubkey=n.Buffer.alloc(33),s.pubkey.writeUInt8(o,0),e.slice(t,t+32).copy(s.pubkey,1);else{if(4!==o)throw new Error("Bad compression byte in signing response.");s.pubkey=n.Buffer.alloc(65),s.pubkey.writeUInt8(o,0),e.slice(t).copy(s.pubkey,1)}t+=64}s.sig=(0,u.parseDER)(e.slice(t,t+2+e[t+1])),s.sig.r=(0,u.fixLen)(s.sig.r,32),s.sig.s=(0,u.fixLen)(s.sig.s,32)}else{if(r!==a.Constants.SIGNING.CURVES.ED25519)throw new Error("Unsupported curve.");i||(s.pubkey=n.Buffer.alloc(32),e.slice(t,t+32).copy(s.pubkey)),t+=32,s.sig={r:e.slice(t,t+32),s:e.slice(t+32,t+64)}}return s};r.getEncodedPayload=function(e,t,r){if(t||(t=a.Constants.SIGNING.ENCODINGS.NONE),!(0,u.existsIn)(t,r))throw new Error("Encoding not supported by Lattice firmware. You may want to update.");return{payloadBuf:"string"==typeof e&&"0x"===e.slice(0,2)?n.Buffer.from(e.slice(2),"hex"):n.Buffer.from(e),encoding:t}}}}},{package:"gridplus-sdk",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/gridplus-sdk/dist/genericSigning.js"}],[4348,{"./constants":4350,bech32:4356,bs58check:2115,"buffer/":2121,"hash.js/lib/hash/ripemd":4408,"hash.js/lib/hash/sha":4409},function(){with(this)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var i=e("bech32"),s=n(e("bs58check")),o=e("buffer/"),a=e("hash.js/lib/hash/ripemd"),u=e("hash.js/lib/hash/sha"),c=e("./constants"),l=o.Buffer.from("01","hex"),f=c.BIP_CONSTANTS.PURPOSES,h=c.BIP_CONSTANTS.COINS,d=0,p=169,m=118,y=135,g=136,v=172,b=208,_=240;function w(e,t){return o.Buffer.concat([e,t])}function E(e){var t=o.Buffer.alloc(4);return t.writeUInt32LE(e,0),t}function k(e){var t;return e<253?(t=o.Buffer.alloc(1)).writeUInt8(e,0):e<=65535?((t=o.Buffer.alloc(3)).writeUInt8(253,0),t.writeUInt16LE(e,1)):e<4294967295?((t=o.Buffer.alloc(5)).writeUInt8(254,0),t.writeUInt32LE(e,1)):((t=o.Buffer.alloc(9)).writeUInt8(255,0),t.writeUInt32LE(e>>>0,1),t.writeUInt32LE(e/4294967296|0,5)),t}function A(e,t,r){"number"==typeof e&&(e=e.toString(16));var n=o.Buffer.alloc(8),i=e.length%2==0?e.toString(16):"0".concat(e.toString(16));return o.Buffer.from(i,"hex").reverse().copy(n,0),n.copy(t,r),n}function S(e){var t,r;try{t=s.default.decode(e)[0],r=s.default.decode(e).slice(1)}catch(s){try{var n=i.bech32.decode(e);if("bc"===n.prefix)t=b;else{if("tb"!==n.prefix)throw new Error("Unsupported prefix: must be bc or tb.");t=_}if(0!==n.words[0])throw new Error("Unsupported segwit version: must be 0, got ".concat(n.words[0]));r=o.Buffer.from(i.bech32.fromWords(n.words.slice(1)))}catch(t){throw new Error("Unable to decode address: ".concat(e,": ").concat(t.message))}}return{versionByte:t,pkh:r}}function x(e){if(e.length<2)throw new Error("Path must be >1 index");var t=e[0],r=e[1];if(t===f.BTC_SEGWIT&&r===h.BTC)return b;if(t===f.BTC_SEGWIT&&r===h.BTC_TESTNET)return _;if(t===f.BTC_WRAPPED_SEGWIT&&r===h.BTC)return 5;if(t===f.BTC_WRAPPED_SEGWIT&&r===h.BTC_TESTNET)return 196;if(t===f.BTC_LEGACY&&r===h.BTC)return 0;if(t===f.BTC_LEGACY&&r===h.BTC_TESTNET)return 111;throw new Error("Invalid Bitcoin path provided. Cannot determine address format.")}function I(e){switch(e.signerPath[0]){case f.BTC_LEGACY:return 1;case f.BTC_WRAPPED_SEGWIT:return 3;case f.BTC_SEGWIT:return 4;default:throw new Error("Unsupported path purpose (".concat(e.signerPath[0],"): cannot determine BTC script type."))}}r.default={buildBitcoinTxRequest:function(e){try{var t=e.prevOuts,r=e.recipient,n=e.value,i=e.changePath,s=e.fee;if(!i)throw new Error("No changePath provided.");if(5!==i.length)throw new Error("Please provide a full change path.");var a=o.Buffer.alloc(59+69*t.length),u=0,l=x(i);a.writeUInt8(l,0),u++,a.writeUInt32LE(i.length,u),u+=4;for(var f=0;f<i.length;f++)a.writeUInt32LE(i[f],u),u+=4;a.writeUInt32LE(s,u),u+=4;var h=S(r);a.writeUInt8(h.versionByte,u),u++,h.pkh.copy(a,u),u+=h.pkh.length,A(n,a,u),u+=8,a.writeUInt8(t.length,u),u++;var d=0;return t.forEach((function(e){if(!e.signerPath||5!==e.signerPath.length)throw new Error("Full recipient path not specified ");a.writeUInt32LE(e.signerPath.length,u),u+=4;for(var t=0;t<e.signerPath.length;t++)a.writeUInt32LE(e.signerPath[t],u),u+=4;a.writeUInt32LE(e.index,u),u+=4,A(e.value,a,u),u+=8,d+=e.value;var r=I(e);a.writeUInt8(r,u),u++,o.Buffer.isBuffer(e.txHash)||(e.txHash=o.Buffer.from(e.txHash,"hex")),e.txHash.copy(a,u),u+=e.txHash.length})),{payload:a,schema:c.signingSchema.BTC_TRANSFER,origData:e,changeData:{value:d-(n+s)}}}catch(e){return{err:e}}},serializeTx:function(e){var t=e.inputs,r=e.outputs,n=e.lockTime,i=void 0===n?0:n,s=o.Buffer.alloc(4),c=0,h=function(e){var t=!1;return e.forEach((function(e){e.signerPath[0]!==f.BTC_SEGWIT&&e.signerPath[0]!==f.BTC_WRAPPED_SEGWIT||(t=!0)})),t}(t);s.writeUInt32LE(2,c),c+=4,h&&(s=w(s,o.Buffer.from("00","hex")),s=w(s,o.Buffer.from("01","hex")));var x=k(t.length);s=w(s,x),c+=x.length,t.forEach((function(e){s=w(s,e.hash.reverse()),c+=e.hash.length;var t=E(e.index);s=w(s,t),c+=t.length;var r=I(e);if(3===r){var n=function(e){var t=o.Buffer.alloc(22),r=o.Buffer.from((0,u.sha256)().update(e).digest("hex"),"hex"),n=o.Buffer.from((0,a.ripemd160)().update(r).digest("hex"),"hex");return t.writeUInt8(d,0),t.writeUInt8(n.length,1),n.copy(t,2),t}(e.pubkey),i=k(n.length),f=k((h=o.Buffer.concat([i,n])).length);s=w(s,f),c+=f.length,s=w(s,h),c+=h.length}else if(1===r){var h=function(e,t){var r=k((e=o.Buffer.concat([e,l])).length),n=k(t.length),i=o.Buffer.concat([r,e,n,t]),s=k(i.length);return o.Buffer.concat([s,i])}(e.sig,e.pubkey);s=w(s,h),c+=h.length}else if(4===r){var p=o.Buffer.from("00","hex");s=w(s,p),c+=1}var m=E(4294967295);s=w(s,m),c+=m.length}));var T=k(r.length);if(s=w(s,T),c+=T.length,r.forEach((function(e){var t,r,n=(t=e.value,r=o.Buffer.alloc(8),A(t,r,0),r);s=w(s,n),c+=n.length;var i=function(e){var t=S(e);switch(t.versionByte){case b:case _:return r=t.pkh,(n=o.Buffer.alloc(2+r.length)).writeUInt8(d,0),n.writeUInt8(r.length,1),r.copy(n,2),n;case 5:case 196:return function(e){var t=o.Buffer.alloc(3+e.length),r=0;return t.writeUInt8(p,r),r++,t.writeUInt8(e.length,r),r++,e.copy(t,r),r+=e.length,t.writeUInt8(y,r),r++,t}(t.pkh);case 0:case 111:return function(e){var t=o.Buffer.alloc(5+e.length),r=0;return t.writeUInt8(m,r),r++,t.writeUInt8(p,r),r++,t.writeUInt8(e.length,r),r++,e.copy(t,r),r+=e.length,t.writeUInt8(g,r),r++,t.writeUInt8(v,r),r++,t}(t.pkh);default:throw new Error("Unknown version byte: ".concat(t.versionByte,". Cannot build BTC transaction."))}var r,n}(e.recipient),a=k(i.length);s=w(s,a),c+=a.length,s=w(s,i),c+=i.length})),h){for(var P=[],N=[],C=0;C<t.length;C++)P.push(t[C].sig),N.push(t[C].pubkey);var R=function(e,t){var r=o.Buffer.alloc(0),n=o.Buffer.alloc(1);n.writeUInt8(2,0);for(var i=0;i<e.length;i++){var s=o.Buffer.concat([e[i],l]),a=k(s.length),u=t[i],c=k(u.length);r=o.Buffer.concat([r,n,a,s,c,u])}return r}(P,N);s=w(s,R),c+=R.length}return o.Buffer.concat([s,E(i)]).toString("hex")},getBitcoinAddress:function(e,t){var r=null,n=null;if(t===b?(r="bc",n=0):t===_&&(r="tb",n=0),null!==r&&null!==n){var a=i.bech32.toWords(e);return a.unshift(n),i.bech32.encode(r,a)}return s.default.encode(o.Buffer.concat([o.Buffer.from([t]),e]))},getAddressFormat:x}}}},{package:"gridplus-sdk",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/gridplus-sdk/dist/bitcoin.js"}],[4351,{"./constants":4350,"./util":4355,"@ethereumjs/common":406,"@ethereumjs/tx":410,"bignumber.js":4357,borc:2066,"buffer/":2121,"eth-eip712-util-browser":2391,"js-sha3":4764,rlp:4358,"rlp-browser":5797,secp256k1:5811},function(){with(this)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var a=o(e("bignumber.js")),u=o(e("borc")),c=e("buffer/"),l=e("eth-eip712-util-browser"),f=e("js-sha3"),h=o(e("rlp-browser")),d=e("rlp"),p=o(e("secp256k1")),m=e("./constants"),y=e("./util"),g=s(e("@ethereumjs/common")),v=e("@ethereumjs/tx");function b(e){for(var t=e[0];e.length>0&&"0"===t.toString();)t=(e=e.slice(1))[0];return e}function _(e,t,r,n){void 0===n&&(n={});try{var i=new Uint8Array(e),s=0,o=(0,y.fixLen)(t.r,32);t.r=o;var a=(0,y.fixLen)(t.s,32);t.s=a;var u=new Uint8Array(c.Buffer.concat([o,a])),l=p.default.ecdsaRecover(u,s,i,!1).slice(1);if(w(l)===r.toString("hex"))return t.v=E(s,n),t;if(s=1,w(l=p.default.ecdsaRecover(u,s,i,!1).slice(1))===r.toString("hex"))return t.v=E(s,n),t;throw new Error("Invalid Ethereum signature returned.")}catch(e){throw new Error(e)}}function w(e){return(0,f.keccak256)(e).slice(-40)}function E(e,t){void 0===t&&(t={});var r=t.chainId,n=t.useEIP155,i=t.type;if(1===i||2===i)return(0,y.ensureHexBuffer)(e,!0);if(!1===n||null===r)return c.Buffer.from(new a.default(e).plus(27).toString(16),"hex");var s=A(r),o=new a.default(s.toString("hex"),16);return(0,y.ensureHexBuffer)("0x".concat(o.times(2).plus(35).plus(e).toString(16)))}var k={mainnet:1,roptsten:3,rinkeby:4,kovan:42,goerli:5};function A(e){var t,r;if((t=!0===S(e)?(0,y.ensureHexBuffer)(e):(0,y.ensureHexBuffer)("0x".concat(new a.default(e).toString(16)))).length>8)throw new Error("ChainID provided is too large.");return t.length<=2||4===t.length||8===t.length?t:(3===t.length?(r=c.Buffer.alloc(4)).writeUInt32BE(e):t.length<=8&&(r=c.Buffer.alloc(8),t.copy(r,8-t.length)),r)}function S(e){if("string"!=typeof e)return!1;if("0x"!==e.slice(0,2))return!1;try{return!1===new a.default(e,16).isNaN()}catch(e){return!1}}function x(e,t){var r=t.fwConstants,n=r.ethMaxMsgSz,i=r.extraDataFrameSz,s=r.extraDataMaxFrames,o=n,a=i>0&&s>0,u=[];if(e.length>o){var l=o+s*i;if(!a)throw new Error("Your message is ".concat(e.length," bytes, but can only be a maximum of ").concat(o));if(a&&e.length>l)throw new Error("Your message is ".concat(e.length," bytes, but can only be a maximum of ").concat(l));(0,y.splitFrames)(e.slice(o),i).forEach((function(e){var t=c.Buffer.alloc(4);t.writeUInt32LE(e.length,0),u.push(c.Buffer.concat([t,e]))}))}return u}function I(e,t,r,n){void 0===n&&(n=!1);try{r[t].forEach((function(t){var i=t.type.indexOf("[")>-1,s=i?t.type.slice(0,t.type.indexOf("[")):t.type,o=Object.keys(r).indexOf(s)>-1;if(o&&Array.isArray(e))for(var a=0;a<e.length;a++)e[a][t.name]=I(e[a][t.name],s,r,n);else if(o)e[t.name]=I(e[t.name],s,r,n);else if(Array.isArray(e))for(a=0;a<e.length;a++)if(i)for(var u=0;u<e[a][t.name].length;u++)e[a][t.name][u]=T(e[a][t.name][u],s,n);else e[a][t.name]=T(e[a][t.name],s,n);else if(i)for(a=0;a<e[t.name].length;a++)e[t.name][a]=T(e[t.name][a],s,n);else e[t.name]=T(e[t.name],s,n)}))}catch(e){throw new Error(e.message)}return e}function T(e,t,r){if(void 0===r&&(r=!1),"bytes"===t)e=(0,y.ensureHexBuffer)(e),r&&(e="0x".concat(e.toString("hex")));else if("bytes"===t.slice(0,5)){var n=parseInt(t.slice(5));if((e=(0,y.ensureHexBuffer)(e)).length!==n)throw new Error("Expected ".concat(t," type, but got ").concat(e.length," bytes"));r&&(e="0x".concat(e.toString("hex")))}else if("address"===t){if(0===(e=(0,y.ensureHexBuffer)(e)).length&&(e=c.Buffer.alloc(20)),20!==e.length)throw new Error("Address type must be 20 bytes, but got ".concat(e.length," bytes"));r&&(e="0x".concat(e.toString("hex")))}else if(m.ethMsgProtocol.TYPED_DATA.typeCodes[t]&&(t.indexOf("uint")>-1||t.indexOf("int")>-1)){var i=(0,y.ensureHexBuffer)(e);0===i.length&&(i=c.Buffer.from("00","hex")),e=r?"0x".concat(i.toString("hex")):(new u.default.Encoder).semanticTypes[1][0](i.toString("hex"),16)}else"bool"===t&&(e=!0===e?1:0);return e}function P(e){return c.Buffer.from("Ethereum Signed Message:\n".concat(e.toString()),"utf-8")}function N(e,t){return t?c.Buffer.concat([c.Buffer.from([t]),h.default.encode(e)]):h.default.encode(e)}r.default={buildEthereumMsgRequest:function(e){if(!e.payload||!e.protocol||!e.signerPath)throw new Error("You must provide `payload`, `signerPath`, and `protocol` arguments in the messsage request");if(e.signerPath.length>5||e.signerPath.length<2)throw new Error("Please provide a signer path with 2-5 indices");var t={schema:m.signingSchema.ETH_MSG,payload:null,input:e,msg:null};try{switch(e.protocol){case"signPersonal":return function(e,t){var r=t.fwConstants.ethMaxMsgSz,n=t.fwConstants.varAddrPathSzAllowed,i=24+r+4,s=0;e.payload=c.Buffer.alloc(i),e.payload.writeUInt8(m.ethMsgProtocol.SIGN_PERSONAL,0),s+=1;var o=(0,y.buildSignerPathBuf)(t.signerPath,n);o.copy(e.payload,s),s+=o.length;var a=t.payload,u=!1;if("string"==typeof t.payload)if("0x"===t.payload.slice(0,2))a=(0,y.ensureHexBuffer)(t.payload),u=!1===m.ASCII_REGEX.test(c.Buffer.from(t.payload.slice(2),"hex").toString());else{if(!1===(0,y.isAsciiStr)(t.payload))throw new Error("Currently, the Lattice can only display ASCII strings.");a=c.Buffer.from(t.payload)}else if("boolean"==typeof t.displayHex)u=t.displayHex;else{if(!t.payload.toString)throw new Error("Unsupported input data type");u=!1===m.ASCII_REGEX.test(t.payload.toString())}var l=t.fwConstants,h=r+l.extraDataMaxFrames*l.extraDataFrameSz;l.personalSignHeaderSz&&(h-=l.personalSignHeaderSz);if(l.ethMsgPreHashAllowed&&a.length>h){e.payload.writeUInt8(u,s),s+=1,e.payload.writeUInt16LE(a.length,s),s+=2;var d=c.Buffer.from((0,f.keccak256)(c.Buffer.concat([P(a.length),a])),"hex");d.copy(e.payload,s),e.prehash=d}else{var p=x(a,t);e.extraDataPayloads=p,e.msg=a,e.payload.writeUInt8(u,s),s+=1,e.payload.writeUInt16LE(a.length,s),s+=2,a.copy(e.payload,s)}return e}(t,e);case"eip712":if(!e.fwConstants.eip712Supported)throw new Error("EIP712 is not supported by your Lattice firmware version. Please upgrade.");return function(e,t){try{var r=t.fwConstants,n=r.ethMaxMsgSz,i=r.varAddrPathSzAllowed,s=r.eip712MaxTypeParams,o=m.ethMsgProtocol.TYPED_DATA,a=24+n+4,f=0;e.payload=c.Buffer.alloc(a),e.payload.writeUInt8(o.enumIdx,0),f+=1;var h=(0,y.buildSignerPathBuf)(t.signerPath,i);h.copy(e.payload,f),f+=h.length;var d=JSON.parse(JSON.stringify(t.payload));if(!d.primaryType||!d.types[d.primaryType])throw new Error("primaryType must be specified and the type must be included.");if(!d.message||!d.domain)throw new Error("message and domain must be specified.");if(0>Object.keys(d.types).indexOf("EIP712Domain"))throw new Error("EIP712Domain type must be defined.");t.payload.message=I(JSON.parse(JSON.stringify(d.message)),JSON.parse(JSON.stringify(d.primaryType)),JSON.parse(JSON.stringify(d.types)),!0),t.payload.domain=I(JSON.parse(JSON.stringify(d.domain)),"EIP712Domain",JSON.parse(JSON.stringify(d.types)),!0),d.domain=I(d.domain,"EIP712Domain",d.types,!1),d.message=I(d.message,d.primaryType,d.types,!1);var p=c.Buffer.from(u.default.encode(d)),g=t.fwConstants,v=n+g.extraDataMaxFrames*g.extraDataFrameSz,b=p.length>v;if(Object.keys(d.types).forEach((function(e){d.types[e].length>s&&(b=!0)})),g.ethMsgPreHashAllowed&&b){e.payload.writeUInt16LE(p.length,f),f+=2;var _=l.TypedDataUtils.hash(e.input.payload);_.copy(e.payload,f),e.prehash=_}else{var w=x(p,t);e.extraDataPayloads=w,e.payload.writeUInt16LE(p.length,f),f+=2,p.copy(e.payload,f),f+=p.length,e.payload=e.payload.slice(0,f)}return e}catch(e){return{err:"Failed to build EIP712 request: ".concat(e.message)}}}(t,e);default:throw new Error("Unsupported protocol")}}catch(e){return{err:e.toString()}}},validateEthereumMsgResponse:function(e,t){var r=e.signer,n=e.sig,i=t.input,s=t.msg,o=t.prehash,a=void 0===o?null:o;if("signPersonal"===i.protocol)return _(a||c.Buffer.from((0,f.keccak256)(c.Buffer.concat([P(s.length),s])),"hex"),n,r,{chainId:1,useEIP155:!1});if("eip712"===i.protocol){var u=l.TypedDataUtils.hash(t.input.payload);return _(a||u,n,r,{useEIP155:!1})}throw new Error("Unsupported protocol")},buildEthereumTxRequest:function(e){try{var t=e.chainId,r=void 0===t?1:t,n=e.signerPath,i=e.eip155,s=void 0===i?null:i,o=e.fwConstants,a=e.type,u=void 0===a?null:a,l=o.contractDeployKey,h=o.extraDataFrameSz,d=o.extraDataMaxFrames,p=o.prehashAllowed,g=h>0&&d>0,v=o.ethMaxDataSz,b=o.varAddrPathSzAllowed;if("number"!=typeof r&&!1===S(r)&&(r=k[r]),!r)throw new Error("Unsupported chain ID or name");if(!n)throw new Error("`signerPath` not provided");if(null===e.to&&!l)throw new Error("Contract deployment not supported. Please update your Lattice firmware.");var _=null===e.to&&l,w=o.allowedEthTxTypes&&o.allowedEthTxTypes.indexOf(2)>-1,E=o.allowedEthTxTypes&&o.allowedEthTxTypes.indexOf(1)>-1,x=w&&(2===u||"eip1559"===u),I=E&&(1===u||"eip2930"===u);if(null!==u&&!x&&!I)throw new Error("Unsupported Ethereum transaction type");var T=function(e){switch(e){case 3:case 4:return!1;default:return!0}}(r);null!==s&&"boolean"==typeof s?T=s:(x||I)&&(T=!1),e.value||(e.value=0);var P=[],C=(0,y.ensureHexBuffer)(r),R=(0,y.ensureHexBuffer)(e.nonce),O=void 0,M=(0,y.ensureHexBuffer)(e.gasLimit),D=void 0,L=void 0;_?(D=c.Buffer.alloc(0),L=(0,y.ensureHexBuffer)(l)):(D=(0,y.ensureHexBuffer)(e.to),L=(0,y.ensureHexBuffer)(e.to));var B=(0,y.ensureHexBuffer)(e.value),U=(0,y.ensureHexBuffer)(e.data);(x||I)&&P.push(C),P.push(R);var j=void 0,K=void 0;if(x){if(!e.maxPriorityFeePerGas)throw new Error("EIP1559 transactions must include `maxPriorityFeePerGas`");j=(0,y.ensureHexBuffer)(e.maxPriorityFeePerGas),P.push(j),K=(0,y.ensureHexBuffer)(e.maxFeePerGas),P.push(K),O=K}else O=(0,y.ensureHexBuffer)(e.gasPrice),P.push(O);P.push(M),P.push(D),P.push(B),P.push(U);var F=!1;if(x||I){var V=[];Array.isArray(e.accessList)&&e.accessList.forEach((function(e){var t=[];e.storageKeys.forEach((function(e){t.push((0,y.ensureHexBuffer)(e))})),V.push([(0,y.ensureHexBuffer)(e.address),t]),F=!0})),P.push(V)}else!0===T&&(P.push(C),P.push((0,y.ensureHexBuffer)(null)),P.push((0,y.ensureHexBuffer)(null)));var H=c.Buffer.alloc(v+122),G=0;H.writeUInt8(Number(T),G),G++;var q=void 0,z=0;if(!0==(1!==(re=A(r)).length||255===re.readUInt8(0))){if((z=(q=A(r)).length)>m.MAX_CHAIN_ID_BYTES)throw new Error("ChainID provided is too large.");H.writeUInt8(m.HANDLE_LARGER_CHAIN_ID,G),G++}else{if(1!==(q=(0,y.ensureHexBuffer)(r)).length)throw new Error("Error parsing chainID");q.copy(H,G),G+=q.length}var W=(0,y.buildSignerPathBuf)(n,b);if(W.copy(H,G),G+=W.length,R.length>4)throw new Error("Nonce too large");if(R.copy(H,G+(4-R.length)),G+=4,O.length>8)throw new Error("Gas price too large");if(O.copy(H,G+(8-O.length)),G+=8,M.length>4)throw new Error("Gas limit too large");if(M.copy(H,G+(4-M.length)),G+=4,20!==L.length)throw new Error("Invalid `to` address");if(L.copy(H,G),G+=20,B.length>32)throw new Error("Value too large");B.copy(H,G+(32-B.length)),G+=32;var Y=!1;if(o.allowedEthTxTypes)if(F&&(Y=!0),H.writeUInt8(Y?1:0,G),G+=1,x){if(H.writeUInt8(2,G),G+=1,j.length>8)throw new Error("maxPriorityFeePerGasBytes too large");j.copy(H,G+(8-j.length)),G+=8}else I?(H.writeUInt8(1,G),G+=1,G+=8):G+=9;var Z=[],J=null,$=U.length||0,X=z>0?z+1:0,Q=c.Buffer.alloc($+X);if(X>0&&(Q.writeUInt8(z,0),q.copy(Q,1)),U.copy(Q,X),$>v){var ee=$+X,te=v+d*h;if(p&&ee>te)J=c.Buffer.from((0,f.keccak256)(N(P,u)),"hex");else{if(!g||g&&ee>te)throw new Error("Data field too large (got ".concat(U.length,"; must be <=").concat(te-X," bytes)"));(0,y.splitFrames)(Q.slice(v),h).forEach((function(e){var t=c.Buffer.alloc(4);t.writeUInt32LE(e.length,0),Z.push(c.Buffer.concat([t,e]))}))}}else Y&&(J=c.Buffer.from((0,f.keccak256)(N(P,u)),"hex"));return H.writeUInt16BE(U.length,G),G+=2,z>0&&(H.writeUInt8(z,G),G++,q.copy(H,G),G+=z),J?(J.copy(H,G),G+=v):(U.slice(0,v).copy(H,G),G+=v),{rawTx:P,type:u,payload:H.slice(0,G),extraDataPayloads:Z,schema:m.signingSchema.ETH_TRANSFER,chainId:r,useEIP155:T,signerPath:n}}catch(e){return{err:e.message}}var re},buildEthRawTx:function(e,t,r){var n=_(c.Buffer.from((0,f.keccak256)(N(e.rawTx,e.type)),"hex"),t,r,e),i=e.useEIP155?e.rawTx.slice(0,-3):e.rawTx;i.push(n.v),i.push(b(n.r)),i.push(b(n.s));var s=h.default.encode(i);return e.type&&(s=c.Buffer.concat([c.Buffer.from([e.type]),s])),{rawTx:s.toString("hex"),sigWithV:n}},hashTransaction:function(e){return(0,f.keccak256)(c.Buffer.from(e,"hex"))},chainIds:k,ensureHexBuffer:y.ensureHexBuffer,ethConvertLegacyToGenericReq:function(e){var t;t=e.chainId&&"01"!==(0,y.ensureHexBuffer)(e.chainId).toString("hex")?g.default.custom({chainId:e.chainId},{hardfork:g.Hardfork.London,eips:[1559,2930]}):new g.default({chain:g.Chain.Mainnet,hardfork:g.Hardfork.London});var r=v.TransactionFactory.fromTxData(e,{common:t});return e.type?r.getMessageToSign(!1):c.Buffer.from((0,d.encode)(r.getMessageToSign(!1)))}}}}},{package:"gridplus-sdk",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/gridplus-sdk/dist/ethereum.js"}],[6069,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(e){const t=e.length;let r=0;for(;r<t;)if(0==(128&e[r]))r++;else if(192==(224&e[r])){if(r+1===t||128!=(192&e[r+1])||192==(254&e[r]))return!1;r+=2}else if(224==(240&e[r])){if(r+2>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||224===e[r]&&128==(224&e[r+1])||237===e[r]&&160==(224&e[r+1]))return!1;r+=3}else{if(240!=(248&e[r]))return!1;if(r+3>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||128!=(192&e[r+3])||240===e[r]&&128==(240&e[r+1])||244===e[r]&&e[r+1]>143||e[r]>244)return!1;r+=4}return!0}}}},{package:"utf-8-validate",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/utf-8-validate/fallback.js"}],[5341,{_process:5480,fs:2103,os:5412,path:5456},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("fs"),i=e("path"),s=e("os"),o="function"==typeof __webpack_require__?__non_webpack_require__:e,a=r.config&&r.config.variables||{},u=!!r.env.PREBUILDS_ONLY,c=r.versions.modules,l=!(!r.versions||!r.versions.electron)||!!r.env.ELECTRON_RUN_AS_NODE||"undefined"!=typeof window&&window.process&&"renderer"===window.process.type?"electron":r.versions&&r.versions.nw?"node-webkit":"node",f=s.arch(),h=s.platform(),d=r.env.LIBC||(function(e){return"linux"===e&&n.existsSync("/etc/alpine-release")}(h)?"musl":"glibc"),p=r.env.ARM_VERSION||("arm64"===f?"8":a.arm_version)||"",m=(r.versions.uv||"").split(".")[0];function y(e){return o(y.path(e))}function g(e){try{return n.readdirSync(e)}catch(e){return[]}}function v(e,t){var r=g(e).filter(t);return r[0]&&i.join(e,r[0])}function b(e){return/\.node$/.test(e)}function _(e){var t=e.split("-");if(2===t.length){var r=t[0],n=t[1].split("+");if(r&&n.length&&n.every(Boolean))return{name:e,platform:r,architectures:n}}}function w(e,t){return function(r){return null!=r&&(r.platform===e&&r.architectures.includes(t))}}function E(e,t){return e.architectures.length-t.architectures.length}function k(e){var t=e.split("."),r={file:e,specificity:0};if("node"===t.pop()){for(var n=0;n<t.length;n++){var i=t[n];if("node"===i||"electron"===i||"node-webkit"===i)r.runtime=i;else if("napi"===i)r.napi=!0;else if("abi"===i.slice(0,3))r.abi=i.slice(3);else if("uv"===i.slice(0,2))r.uv=i.slice(2);else if("armv"===i.slice(0,4))r.armv=i.slice(4);else{if("glibc"!==i&&"musl"!==i)continue;r.libc=i}r.specificity++}return r}}function A(e,t){return function(r){return null!=r&&(!(r.runtime!==e&&!function(e){return"node"===e.runtime&&e.napi}(r))&&(!(r.abi!==t&&!r.napi)&&((!r.uv||r.uv===m)&&((!r.armv||r.armv===p)&&(!r.libc||r.libc===d)))))}}function S(e){return function(t,r){return t.runtime!==r.runtime?t.runtime===e?-1:1:t.abi!==r.abi?t.abi?-1:1:t.specificity!==r.specificity?t.specificity>r.specificity?-1:1:0}}t.exports=y,y.path=function(e){e=i.resolve(e||".");try{var t=o(i.join(e,"package.json")).name.toUpperCase().replace(/-/g,"_");r.env[t+"_PREBUILD"]&&(e=r.env[t+"_PREBUILD"])}catch(e){}if(!u){var n=v(i.join(e,"build/Release"),b);if(n)return n;var s=v(i.join(e,"build/Debug"),b);if(s)return s}var a=I(e);if(a)return a;var y=I(i.dirname(r.execPath));if(y)return y;var x=["platform="+h,"arch="+f,"runtime="+l,"abi="+c,"uv="+m,p?"armv="+p:"","libc="+d,"node="+r.versions.node,r.versions.electron?"electron="+r.versions.electron:"","function"==typeof __webpack_require__?"webpack=true":""].filter(Boolean).join(" ");throw new Error("No native build was found for "+x+"\n    loaded from: "+e+"\n");function I(e){var t=g(i.join(e,"prebuilds")).map(_).filter(w(h,f)).sort(E)[0];if(t){var r=i.join(e,"prebuilds",t.name),n=g(r).map(k).filter(A(l,c)).sort(S(l))[0];return n?i.join(r,n.file):void 0}}},y.parseTags=k,y.matchTags=A,y.compareTags=S,y.parseTuple=_,y.matchTuple=w,y.compareTuples=E}).call(this)}).call(this,e("_process"))}}},{package:"node-gyp-build",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/node-gyp-build/index.js"}],[2122,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports={mask:(e,t,r,n,i)=>{for(var s=0;s<i;s++)r[n+s]=e[s]^t[3&s]},unmask:(e,t)=>{const r=e.length;for(var n=0;n<r;n++)e[n]^=t[3&n]}}}}},{package:"bufferutil",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/bufferutil/fallback.js"}],[2101,{_process:5480,assert:1714,buffer:2105,"pako/lib/zlib/constants":5424,"pako/lib/zlib/deflate.js":5426,"pako/lib/zlib/inflate.js":5428,"pako/lib/zlib/zstream":5432},function(){with(this)return function(){"use strict";return function(e,t,r){(function(t,n){(function(){var i=e("assert"),s=e("pako/lib/zlib/zstream"),o=e("pako/lib/zlib/deflate.js"),a=e("pako/lib/zlib/inflate.js"),u=e("pako/lib/zlib/constants");for(var c in u)r[c]=u[c];r.NONE=0,r.DEFLATE=1,r.INFLATE=2,r.GZIP=3,r.GUNZIP=4,r.DEFLATERAW=5,r.INFLATERAW=6,r.UNZIP=7;function l(e){if("number"!=typeof e||e<r.DEFLATE||e>r.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=e,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}l.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,i(this.init_done,"close before init"),i(this.mode<=r.UNZIP),this.mode===r.DEFLATE||this.mode===r.GZIP||this.mode===r.DEFLATERAW?o.deflateEnd(this.strm):this.mode!==r.INFLATE&&this.mode!==r.GUNZIP&&this.mode!==r.INFLATERAW&&this.mode!==r.UNZIP||a.inflateEnd(this.strm),this.mode=r.NONE,this.dictionary=null)},l.prototype.write=function(e,t,r,n,i,s,o){return this._write(!0,e,t,r,n,i,s,o)},l.prototype.writeSync=function(e,t,r,n,i,s,o){return this._write(!1,e,t,r,n,i,s,o)},l.prototype._write=function(e,s,o,a,u,c,l,f){if(i.equal(arguments.length,8),i(this.init_done,"write before init"),i(this.mode!==r.NONE,"already finalized"),i.equal(!1,this.write_in_progress,"write already in progress"),i.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,i.equal(!1,s===undefined,"must provide flush value"),this.write_in_progress=!0,s!==r.Z_NO_FLUSH&&s!==r.Z_PARTIAL_FLUSH&&s!==r.Z_SYNC_FLUSH&&s!==r.Z_FULL_FLUSH&&s!==r.Z_FINISH&&s!==r.Z_BLOCK)throw new Error("Invalid flush value");if(null==o&&(o=n.alloc(0),u=0,a=0),this.strm.avail_in=u,this.strm.input=o,this.strm.next_in=a,this.strm.avail_out=f,this.strm.output=c,this.strm.next_out=l,this.flush=s,!e)return this._process(),this._checkError()?this._afterSync():void 0;var h=this;return t.nextTick((function(){h._process(),h._after()})),this},l.prototype._afterSync=function(){var e=this.strm.avail_out,t=this.strm.avail_in;return this.write_in_progress=!1,[t,e]},l.prototype._process=function(){var e=null;switch(this.mode){case r.DEFLATE:case r.GZIP:case r.DEFLATERAW:this.err=o.deflate(this.strm,this.flush);break;case r.UNZIP:switch(this.strm.avail_in>0&&(e=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===e)break;if(31!==this.strm.input[e]){this.mode=r.INFLATE;break}if(this.gzip_id_bytes_read=1,e++,1===this.strm.avail_in)break;case 1:if(null===e)break;139===this.strm.input[e]?(this.gzip_id_bytes_read=2,this.mode=r.GUNZIP):this.mode=r.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case r.INFLATE:case r.GUNZIP:case r.INFLATERAW:for(this.err=a.inflate(this.strm,this.flush),this.err===r.Z_NEED_DICT&&this.dictionary&&(this.err=a.inflateSetDictionary(this.strm,this.dictionary),this.err===r.Z_OK?this.err=a.inflate(this.strm,this.flush):this.err===r.Z_DATA_ERROR&&(this.err=r.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===r.GUNZIP&&this.err===r.Z_STREAM_END&&0!==this.strm.next_in[0];)this.reset(),this.err=a.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},l.prototype._checkError=function(){switch(this.err){case r.Z_OK:case r.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===r.Z_FINISH)return this._error("unexpected end of file"),!1;break;case r.Z_STREAM_END:break;case r.Z_NEED_DICT:return null==this.dictionary?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},l.prototype._after=function(){if(this._checkError()){var e=this.strm.avail_out,t=this.strm.avail_in;this.write_in_progress=!1,this.callback(t,e),this.pending_close&&this.close()}},l.prototype._error=function(e){this.strm.msg&&(e=this.strm.msg),this.onerror(e,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},l.prototype.init=function(e,t,n,s,o){i(4===arguments.length||5===arguments.length,"init(windowBits, level, memLevel, strategy, [dictionary])"),i(e>=8&&e<=15,"invalid windowBits"),i(t>=-1&&t<=9,"invalid compression level"),i(n>=1&&n<=9,"invalid memlevel"),i(s===r.Z_FILTERED||s===r.Z_HUFFMAN_ONLY||s===r.Z_RLE||s===r.Z_FIXED||s===r.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(t,e,n,s,o),this._setDictionary()},l.prototype.params=function(){throw new Error("deflateParams Not supported")},l.prototype.reset=function(){this._reset(),this._setDictionary()},l.prototype._init=function(e,t,n,i,u){switch(this.level=e,this.windowBits=t,this.memLevel=n,this.strategy=i,this.flush=r.Z_NO_FLUSH,this.err=r.Z_OK,this.mode!==r.GZIP&&this.mode!==r.GUNZIP||(this.windowBits+=16),this.mode===r.UNZIP&&(this.windowBits+=32),this.mode!==r.DEFLATERAW&&this.mode!==r.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new s,this.mode){case r.DEFLATE:case r.GZIP:case r.DEFLATERAW:this.err=o.deflateInit2(this.strm,this.level,r.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case r.INFLATE:case r.GUNZIP:case r.INFLATERAW:case r.UNZIP:this.err=a.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==r.Z_OK&&this._error("Init error"),this.dictionary=u,this.write_in_progress=!1,this.init_done=!0},l.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=r.Z_OK,this.mode){case r.DEFLATE:case r.DEFLATERAW:this.err=o.deflateSetDictionary(this.strm,this.dictionary)}this.err!==r.Z_OK&&this._error("Failed to set dictionary")}},l.prototype._reset=function(){switch(this.err=r.Z_OK,this.mode){case r.DEFLATE:case r.DEFLATERAW:case r.GZIP:this.err=o.deflateReset(this.strm);break;case r.INFLATE:case r.INFLATERAW:case r.GUNZIP:this.err=a.inflateReset(this.strm)}this.err!==r.Z_OK&&this._error("Failed to reset stream")},r.Zlib=l}).call(this)}).call(this,e("_process"),e("buffer").Buffer)}}},{package:"browserify-zlib",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/browserify-zlib/lib/binding.js"}],[2511,{"../messages.json":2513,"bn.js":2059,"create-hash":2212,elliptic:2342,"safe-buffer":5800},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("safe-buffer").Buffer,i=e("create-hash"),s=e("bn.js"),o=e("elliptic").ec,a=e("../messages.json"),u=new o("secp256k1"),c=u.curve;function l(e){var t=e[0];switch(t){case 2:case 3:return 33!==e.length?null:function(e,t){var r=new s(t);if(r.cmp(c.p)>=0)return null;var n=(r=r.toRed(c.red)).redSqr().redIMul(r).redIAdd(c.b).redSqrt();return 3===e!==n.isOdd()&&(n=n.redNeg()),u.keyPair({pub:{x:r,y:n}})}(t,e.slice(1,33));case 4:case 6:case 7:return 65!==e.length?null:function(e,t,r){var n=new s(t),i=new s(r);if(n.cmp(c.p)>=0||i.cmp(c.p)>=0)return null;if(n=n.toRed(c.red),i=i.toRed(c.red),(6===e||7===e)&&i.isOdd()!==(7===e))return null;var o=n.redSqr().redIMul(n);return i.redSqr().redISub(o.redIAdd(c.b)).isZero()?u.keyPair({pub:{x:n,y:i}}):null}(t,e.slice(1,33),e.slice(33,65));default:return null}}r.privateKeyVerify=function(e){var t=new s(e);return t.cmp(c.n)<0&&!t.isZero()},r.privateKeyExport=function(e,t){var r=new s(e);if(r.cmp(c.n)>=0||r.isZero())throw new Error(a.EC_PRIVATE_KEY_EXPORT_DER_FAIL);return n.from(u.keyFromPrivate(e).getPublic(t,!0))},r.privateKeyNegate=function(e){var t=new s(e);return t.isZero()?n.alloc(32):c.n.sub(t).umod(c.n).toArrayLike(n,"be",32)},r.privateKeyModInverse=function(e){var t=new s(e);if(t.cmp(c.n)>=0||t.isZero())throw new Error(a.EC_PRIVATE_KEY_RANGE_INVALID);return t.invm(c.n).toArrayLike(n,"be",32)},r.privateKeyTweakAdd=function(e,t){var r=new s(t);if(r.cmp(c.n)>=0)throw new Error(a.EC_PRIVATE_KEY_TWEAK_ADD_FAIL);if(r.iadd(new s(e)),r.cmp(c.n)>=0&&r.isub(c.n),r.isZero())throw new Error(a.EC_PRIVATE_KEY_TWEAK_ADD_FAIL);return r.toArrayLike(n,"be",32)},r.privateKeyTweakMul=function(e,t){var r=new s(t);if(r.cmp(c.n)>=0||r.isZero())throw new Error(a.EC_PRIVATE_KEY_TWEAK_MUL_FAIL);return r.imul(new s(e)),r.cmp(c.n)&&(r=r.umod(c.n)),r.toArrayLike(n,"be",32)},r.publicKeyCreate=function(e,t){var r=new s(e);if(r.cmp(c.n)>=0||r.isZero())throw new Error(a.EC_PUBLIC_KEY_CREATE_FAIL);return n.from(u.keyFromPrivate(e).getPublic(t,!0))},r.publicKeyConvert=function(e,t){var r=l(e);if(null===r)throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);return n.from(r.getPublic(t,!0))},r.publicKeyVerify=function(e){return null!==l(e)},r.publicKeyTweakAdd=function(e,t,r){var i=l(e);if(null===i)throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);if((t=new s(t)).cmp(c.n)>=0)throw new Error(a.EC_PUBLIC_KEY_TWEAK_ADD_FAIL);var o=c.g.mul(t).add(i.pub);if(o.isInfinity())throw new Error(a.EC_PUBLIC_KEY_TWEAK_ADD_FAIL);return n.from(o.encode(!0,r))},r.publicKeyTweakMul=function(e,t,r){var i=l(e);if(null===i)throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);if((t=new s(t)).cmp(c.n)>=0||t.isZero())throw new Error(a.EC_PUBLIC_KEY_TWEAK_MUL_FAIL);return n.from(i.pub.mul(t).encode(!0,r))},r.publicKeyCombine=function(e,t){for(var r=new Array(e.length),i=0;i<e.length;++i)if(r[i]=l(e[i]),null===r[i])throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);for(var s=r[0].pub,o=1;o<r.length;++o)s=s.add(r[o].pub);if(s.isInfinity())throw new Error(a.EC_PUBLIC_KEY_COMBINE_FAIL);return n.from(s.encode(!0,t))},r.signatureNormalize=function(e){var t=new s(e.slice(0,32)),r=new s(e.slice(32,64));if(t.cmp(c.n)>=0||r.cmp(c.n)>=0)throw new Error(a.ECDSA_SIGNATURE_PARSE_FAIL);var i=n.from(e);return 1===r.cmp(u.nh)&&c.n.sub(r).toArrayLike(n,"be",32).copy(i,32),i},r.signatureExport=function(e){var t=e.slice(0,32),r=e.slice(32,64);if(new s(t).cmp(c.n)>=0||new s(r).cmp(c.n)>=0)throw new Error(a.ECDSA_SIGNATURE_PARSE_FAIL);return{r:t,s:r}},r.signatureImport=function(e){var t=new s(e.r);t.cmp(c.n)>=0&&(t=new s(0));var r=new s(e.s);return r.cmp(c.n)>=0&&(r=new s(0)),n.concat([t.toArrayLike(n,"be",32),r.toArrayLike(n,"be",32)])},r.sign=function(e,t,r,i){if("function"==typeof r){var o=r;r=function(r){var u=o(e,t,null,i,r);if(!n.isBuffer(u)||32!==u.length)throw new Error(a.ECDSA_SIGN_FAIL);return new s(u)}}var l=new s(t);if(l.cmp(c.n)>=0||l.isZero())throw new Error(a.ECDSA_SIGN_FAIL);var f=u.sign(e,t,{canonical:!0,k:r,pers:i});return{signature:n.concat([f.r.toArrayLike(n,"be",32),f.s.toArrayLike(n,"be",32)]),recovery:f.recoveryParam}},r.verify=function(e,t,r){var n={r:t.slice(0,32),s:t.slice(32,64)},i=new s(n.r),o=new s(n.s);if(i.cmp(c.n)>=0||o.cmp(c.n)>=0)throw new Error(a.ECDSA_SIGNATURE_PARSE_FAIL);if(1===o.cmp(u.nh)||i.isZero()||o.isZero())return!1;var f=l(r);if(null===f)throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);return u.verify(e,n,{x:f.pub.x,y:f.pub.y})},r.recover=function(e,t,r,i){var o={r:t.slice(0,32),s:t.slice(32,64)},l=new s(o.r),f=new s(o.s);if(l.cmp(c.n)>=0||f.cmp(c.n)>=0)throw new Error(a.ECDSA_SIGNATURE_PARSE_FAIL);try{if(l.isZero()||f.isZero())throw new Error;var h=u.recoverPubKey(e,o,r);return n.from(h.encode(!0,i))}catch(e){throw new Error(a.ECDSA_RECOVER_FAIL)}},r.ecdh=function(e,t){var n=r.ecdhUnsafe(e,t,!0);return i("sha256").update(n).digest()},r.ecdhUnsafe=function(e,t,r){var i=l(e);if(null===i)throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);var o=new s(t);if(o.cmp(c.n)>=0||o.isZero())throw new Error(a.ECDH_FAIL);return n.from(i.pub.mul(o).encode(!0,r))}}}},{package:"secp256k1",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/eth-trezor-keyring/node_modules/secp256k1/lib/elliptic/index.js"}],[2512,{"./assert":2509,"./der":2510,"./messages.json":2513},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./assert"),i=e("./der"),s=e("./messages.json");function o(e,t){return e===undefined?t:(n.isBoolean(e,s.COMPRESSED_TYPE_INVALID),e)}t.exports=function(e){return{privateKeyVerify:function(t){return n.isBuffer(t,s.EC_PRIVATE_KEY_TYPE_INVALID),32===t.length&&e.privateKeyVerify(t)},privateKeyExport:function(t,r){n.isBuffer(t,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,s.EC_PRIVATE_KEY_LENGTH_INVALID),r=o(r,!0);var a=e.privateKeyExport(t,r);return i.privateKeyExport(t,a,r)},privateKeyImport:function(t){if(n.isBuffer(t,s.EC_PRIVATE_KEY_TYPE_INVALID),(t=i.privateKeyImport(t))&&32===t.length&&e.privateKeyVerify(t))return t;throw new Error(s.EC_PRIVATE_KEY_IMPORT_DER_FAIL)},privateKeyNegate:function(t){return n.isBuffer(t,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,s.EC_PRIVATE_KEY_LENGTH_INVALID),e.privateKeyNegate(t)},privateKeyModInverse:function(t){return n.isBuffer(t,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,s.EC_PRIVATE_KEY_LENGTH_INVALID),e.privateKeyModInverse(t)},privateKeyTweakAdd:function(t,r){return n.isBuffer(t,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,s.EC_PRIVATE_KEY_LENGTH_INVALID),n.isBuffer(r,s.TWEAK_TYPE_INVALID),n.isBufferLength(r,32,s.TWEAK_LENGTH_INVALID),e.privateKeyTweakAdd(t,r)},privateKeyTweakMul:function(t,r){return n.isBuffer(t,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,s.EC_PRIVATE_KEY_LENGTH_INVALID),n.isBuffer(r,s.TWEAK_TYPE_INVALID),n.isBufferLength(r,32,s.TWEAK_LENGTH_INVALID),e.privateKeyTweakMul(t,r)},publicKeyCreate:function(t,r){return n.isBuffer(t,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,s.EC_PRIVATE_KEY_LENGTH_INVALID),r=o(r,!0),e.publicKeyCreate(t,r)},publicKeyConvert:function(t,r){return n.isBuffer(t,s.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,s.EC_PUBLIC_KEY_LENGTH_INVALID),r=o(r,!0),e.publicKeyConvert(t,r)},publicKeyVerify:function(t){return n.isBuffer(t,s.EC_PUBLIC_KEY_TYPE_INVALID),e.publicKeyVerify(t)},publicKeyTweakAdd:function(t,r,i){return n.isBuffer(t,s.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,s.EC_PUBLIC_KEY_LENGTH_INVALID),n.isBuffer(r,s.TWEAK_TYPE_INVALID),n.isBufferLength(r,32,s.TWEAK_LENGTH_INVALID),i=o(i,!0),e.publicKeyTweakAdd(t,r,i)},publicKeyTweakMul:function(t,r,i){return n.isBuffer(t,s.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,s.EC_PUBLIC_KEY_LENGTH_INVALID),n.isBuffer(r,s.TWEAK_TYPE_INVALID),n.isBufferLength(r,32,s.TWEAK_LENGTH_INVALID),i=o(i,!0),e.publicKeyTweakMul(t,r,i)},publicKeyCombine:function(t,r){n.isArray(t,s.EC_PUBLIC_KEYS_TYPE_INVALID),n.isLengthGTZero(t,s.EC_PUBLIC_KEYS_LENGTH_INVALID);for(var i=0;i<t.length;++i)n.isBuffer(t[i],s.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t[i],33,65,s.EC_PUBLIC_KEY_LENGTH_INVALID);return r=o(r,!0),e.publicKeyCombine(t,r)},signatureNormalize:function(t){return n.isBuffer(t,s.ECDSA_SIGNATURE_TYPE_INVALID),n.isBufferLength(t,64,s.ECDSA_SIGNATURE_LENGTH_INVALID),e.signatureNormalize(t)},signatureExport:function(t){n.isBuffer(t,s.ECDSA_SIGNATURE_TYPE_INVALID),n.isBufferLength(t,64,s.ECDSA_SIGNATURE_LENGTH_INVALID);var r=e.signatureExport(t);return i.signatureExport(r)},signatureImport:function(t){n.isBuffer(t,s.ECDSA_SIGNATURE_TYPE_INVALID),n.isLengthGTZero(t,s.ECDSA_SIGNATURE_LENGTH_INVALID);var r=i.signatureImport(t);if(r)return e.signatureImport(r);throw new Error(s.ECDSA_SIGNATURE_PARSE_DER_FAIL)},signatureImportLax:function(t){n.isBuffer(t,s.ECDSA_SIGNATURE_TYPE_INVALID),n.isLengthGTZero(t,s.ECDSA_SIGNATURE_LENGTH_INVALID);var r=i.signatureImportLax(t);if(r)return e.signatureImport(r);throw new Error(s.ECDSA_SIGNATURE_PARSE_DER_FAIL)},sign:function(t,r,i){n.isBuffer(t,s.MSG32_TYPE_INVALID),n.isBufferLength(t,32,s.MSG32_LENGTH_INVALID),n.isBuffer(r,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(r,32,s.EC_PRIVATE_KEY_LENGTH_INVALID);var o=null,a=null;return i!==undefined&&(n.isObject(i,s.OPTIONS_TYPE_INVALID),i.data!==undefined&&(n.isBuffer(i.data,s.OPTIONS_DATA_TYPE_INVALID),n.isBufferLength(i.data,32,s.OPTIONS_DATA_LENGTH_INVALID),o=i.data),i.noncefn!==undefined&&(n.isFunction(i.noncefn,s.OPTIONS_NONCEFN_TYPE_INVALID),a=i.noncefn)),e.sign(t,r,a,o)},verify:function(t,r,i){return n.isBuffer(t,s.MSG32_TYPE_INVALID),n.isBufferLength(t,32,s.MSG32_LENGTH_INVALID),n.isBuffer(r,s.ECDSA_SIGNATURE_TYPE_INVALID),n.isBufferLength(r,64,s.ECDSA_SIGNATURE_LENGTH_INVALID),n.isBuffer(i,s.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(i,33,65,s.EC_PUBLIC_KEY_LENGTH_INVALID),e.verify(t,r,i)},recover:function(t,r,i,a){return n.isBuffer(t,s.MSG32_TYPE_INVALID),n.isBufferLength(t,32,s.MSG32_LENGTH_INVALID),n.isBuffer(r,s.ECDSA_SIGNATURE_TYPE_INVALID),n.isBufferLength(r,64,s.ECDSA_SIGNATURE_LENGTH_INVALID),n.isNumber(i,s.RECOVERY_ID_TYPE_INVALID),n.isNumberInInterval(i,-1,4,s.RECOVERY_ID_VALUE_INVALID),a=o(a,!0),e.recover(t,r,i,a)},ecdh:function(t,r){return n.isBuffer(t,s.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,s.EC_PUBLIC_KEY_LENGTH_INVALID),n.isBuffer(r,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(r,32,s.EC_PRIVATE_KEY_LENGTH_INVALID),e.ecdh(t,r)},ecdhUnsafe:function(t,r,i){return n.isBuffer(t,s.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,s.EC_PUBLIC_KEY_LENGTH_INVALID),n.isBuffer(r,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(r,32,s.EC_PRIVATE_KEY_LENGTH_INVALID),i=o(i,!0),e.ecdhUnsafe(t,r,i)}}}}}},{package:"secp256k1",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/eth-trezor-keyring/node_modules/secp256k1/lib/index.js"}],[6026,{},function(){with(this)return function(){"use strict";return function(e,t,r){}}},{package:"trezor-connect",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/trezor-connect/lib/types/account.js"}],[6043,{},function(){with(this)return function(){"use strict";return function(e,t,r){}}},{package:"trezor-connect",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/trezor-connect/lib/types/params.js"}],[6032,{},function(){with(this)return function(){"use strict";return function(e,t,r){}}},{package:"trezor-connect",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/trezor-connect/lib/types/misc.js"}],[6034,{},function(){with(this)return function(){"use strict";return function(e,t,r){}}},{package:"trezor-connect",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/trezor-connect/lib/types/networks/bitcoin.js"}],[6033,{},function(){with(this)return function(){"use strict";return function(e,t,r){}}},{package:"trezor-connect",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/trezor-connect/lib/types/networks/binance.js"}],[6037,{},function(){with(this)return function(){"use strict";return function(e,t,r){}}},{package:"trezor-connect",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/trezor-connect/lib/types/networks/eos.js"}],[6045,{},function(){with(this)return function(){"use strict";return function(e,t,r){}}},{package:"trezor-connect",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/trezor-connect/lib/types/trezor/management.js"}],[6038,{},function(){with(this)return function(){"use strict";return function(e,t,r){}}},{package:"trezor-connect",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/trezor-connect/lib/types/networks/ethereum.js"}],[6036,{},function(){with(this)return function(){"use strict";return function(e,t,r){}}},{package:"trezor-connect",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/trezor-connect/lib/types/networks/coinInfo.js"}],[6039,{},function(){with(this)return function(){"use strict";return function(e,t,r){}}},{package:"trezor-connect",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/trezor-connect/lib/types/networks/nem.js"}],[6042,{},function(){with(this)return function(){"use strict";return function(e,t,r){}}},{package:"trezor-connect",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/trezor-connect/lib/types/networks/tezos.js"}],[6041,{},function(){with(this)return function(){"use strict";return function(e,t,r){}}},{package:"trezor-connect",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/trezor-connect/lib/types/networks/stellar.js"}],[6040,{},function(){with(this)return function(){"use strict";return function(e,t,r){}}},{package:"trezor-connect",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/trezor-connect/lib/types/networks/ripple.js"}],[6029,{},function(){with(this)return function(){"use strict";return function(e,t,r){}}},{package:"trezor-connect",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/trezor-connect/lib/types/backend/transactions.js"}],[6035,{"../trezor/protobuf":6046},function(){with(this)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.CardanoTxWitnessType=r.CardanoTxSigningMode=r.CardanoPoolRelayType=r.CardanoNativeScriptHashDisplayFormat=r.CardanoNativeScriptType=r.CardanoCertificateType=r.CardanoAddressType=void 0;var n=e("../trezor/protobuf");r.CardanoAddressType=n.Enum_CardanoAddressType,r.CardanoCertificateType=n.Enum_CardanoCertificateType,r.CardanoNativeScriptType=n.Enum_CardanoNativeScriptType,r.CardanoNativeScriptHashDisplayFormat=n.Enum_CardanoNativeScriptHashDisplayFormat,r.CardanoPoolRelayType=n.Enum_CardanoPoolRelayType,r.CardanoTxSigningMode=n.Enum_CardanoTxSigningMode,r.CardanoTxWitnessType=n.Enum_CardanoTxWitnessType}}},{package:"trezor-connect",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/trezor-connect/lib/types/networks/cardano.js"}],[6030,{"../constants":6010},function(){with(this)return function(){"use strict";return function(e,t,r){e("../constants")}}},{package:"trezor-connect",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/trezor-connect/lib/types/events.js"}],[6027,{"../constants":6010,"./account":6026,"./backend/blockchain":6028,"./events":6030,"./misc":6032,"./networks/binance":6033,"./networks/bitcoin":6034,"./networks/cardano":6035,"./networks/coinInfo":6036,"./networks/eos":6037,"./networks/ethereum":6038,"./networks/nem":6039,"./networks/ripple":6040,"./networks/stellar":6041,"./networks/tezos":6042,"./params":6043,"./trezor/device":6044,"./trezor/management":6045,"./trezor/protobuf":6046},function(){with(this)return function(){"use strict";return function(e,t,r){i(e("../constants")),i(e("./params")),i(e("./trezor/device")),i(e("./trezor/management")),i(e("./trezor/protobuf")),i(e("./account")),i(e("./networks/bitcoin")),i(e("./networks/binance")),i(e("./networks/cardano")),i(e("./networks/coinInfo")),i(e("./networks/eos")),i(e("./networks/ethereum")),i(e("./networks/nem")),i(e("./networks/ripple")),i(e("./networks/stellar")),i(e("./networks/tezos")),i(e("./misc")),i(e("./events")),i(e("./backend/blockchain"));function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}function i(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(i,o,a):i[o]=e[o]}return i.default=e,r&&r.set(e,i),i}}}},{package:"trezor-connect",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/trezor-connect/lib/types/api.js"}],[6044,{"../../constants":6010},function(){with(this)return function(){"use strict";return function(e,t,r){e("../../constants")}}},{package:"trezor-connect",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/trezor-connect/lib/types/trezor/device.js"}],[6028,{"../../constants":6010},function(){with(this)return function(){"use strict";return function(e,t,r){e("../../constants")}}},{package:"trezor-connect",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/trezor-connect/lib/types/backend/blockchain.js"}],[6009,{},function(){with(this)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.CALL=r.ERROR=r.INIT=r.LOADED=r.BOOTSTRAP=void 0;r.BOOTSTRAP="iframe-bootstrap";r.LOADED="iframe-loaded";r.INIT="iframe-init";r.ERROR="iframe-error";r.CALL="iframe-call"}}},{package:"trezor-connect",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/trezor-connect/lib/constants/iframe.js"}],[6012,{},function(){with(this)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.CLOSE_WINDOW=r.CANCEL_POPUP_REQUEST=r.CLOSED=r.HANDSHAKE=r.EXTENSION_USB_PERMISSIONS=r.ERROR=r.INIT=r.LOADED=r.BOOTSTRAP=void 0;r.BOOTSTRAP="popup-bootstrap";r.LOADED="popup-loaded";r.INIT="popup-init";r.ERROR="popup-error";r.EXTENSION_USB_PERMISSIONS="open-usb-permissions";r.HANDSHAKE="popup-handshake";r.CLOSED="popup-closed";r.CANCEL_POPUP_REQUEST="ui-cancel-popup-request";r.CLOSE_WINDOW="window.close"}}},{package:"trezor-connect",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/trezor-connect/lib/constants/popup.js"}],[6011,{},function(){with(this)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.TYPES=void 0;var n=Object.freeze({bitcoin:"Bitcoin",ethereum:"Ethereum",eos:"Eos",nem:"NEM",stellar:"Stellar",cardano:"Cardano",ripple:"Ripple",tezos:"Tezors",binance:"Binance"});r.TYPES=n}}},{package:"trezor-connect",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/trezor-connect/lib/constants/network.js"}],[6014,{},function(){with(this)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.IFRAME_FAILURE=r.ADDRESS_VALIDATION=r.BUNDLE_PROGRESS=r.LOGIN_CHALLENGE_RESPONSE=r.LOGIN_CHALLENGE_REQUEST=r.CUSTOM_MESSAGE_RESPONSE=r.CUSTOM_MESSAGE_REQUEST=r.CHANGE_SETTINGS=r.RECEIVE_WORD=r.RECEIVE_FEE=r.RECEIVE_ACCOUNT=r.CHANGE_ACCOUNT=r.RECEIVE_DEVICE=r.RECEIVE_PASSPHRASE=r.RECEIVE_PIN=r.RECEIVE_CONFIRMATION=r.RECEIVE_PERMISSION=r.REQUEST_WORD=r.REQUEST_BUTTON=r.INSUFFICIENT_FUNDS=r.UPDATE_CUSTOM_FEE=r.SELECT_FEE=r.SELECT_ACCOUNT=r.SELECT_DEVICE=r.SET_OPERATION=r.LOADING=r.CONNECT=r.INVALID_PASSPHRASE_ACTION=r.INVALID_PASSPHRASE=r.REQUEST_PASSPHRASE_ON_DEVICE=r.REQUEST_PASSPHRASE=r.INVALID_PIN=r.REQUEST_PIN=r.REQUEST_CONFIRMATION=r.REQUEST_PERMISSION=r.CLOSE_UI_WINDOW=r.REQUEST_UI_WINDOW=r.DEVICE_NEEDS_BACKUP=r.FIRMWARE_PROGRESS=r.FIRMWARE_NOT_INSTALLED=r.FIRMWARE_NOT_COMPATIBLE=r.FIRMWARE_NOT_SUPPORTED=r.FIRMWARE_OUTDATED=r.FIRMWARE_OLD=r.SEEDLESS=r.INITIALIZE=r.REQUIRE_MODE=r.NOT_IN_BOOTLOADER=r.BOOTLOADER=r.TRANSPORT=void 0;r.TRANSPORT="ui-no_transport";r.BOOTLOADER="ui-device_bootloader_mode";r.NOT_IN_BOOTLOADER="ui-device_not_in_bootloader_mode";r.REQUIRE_MODE="ui-device_require_mode";r.INITIALIZE="ui-device_not_initialized";r.SEEDLESS="ui-device_seedless";r.FIRMWARE_OLD="ui-device_firmware_old";r.FIRMWARE_OUTDATED="ui-device_firmware_outdated";r.FIRMWARE_NOT_SUPPORTED="ui-device_firmware_unsupported";r.FIRMWARE_NOT_COMPATIBLE="ui-device_firmware_not_compatible";r.FIRMWARE_NOT_INSTALLED="ui-device_firmware_not_installed";r.FIRMWARE_PROGRESS="ui-firmware-progress";r.DEVICE_NEEDS_BACKUP="ui-device_needs_backup";r.REQUEST_UI_WINDOW="ui-request_window";r.CLOSE_UI_WINDOW="ui-close_window";r.REQUEST_PERMISSION="ui-request_permission";r.REQUEST_CONFIRMATION="ui-request_confirmation";r.REQUEST_PIN="ui-request_pin";r.INVALID_PIN="ui-invalid_pin";r.REQUEST_PASSPHRASE="ui-request_passphrase";r.REQUEST_PASSPHRASE_ON_DEVICE="ui-request_passphrase_on_device";r.INVALID_PASSPHRASE="ui-invalid_passphrase";r.INVALID_PASSPHRASE_ACTION="ui-invalid_passphrase_action";r.CONNECT="ui-connect";r.LOADING="ui-loading";r.SET_OPERATION="ui-set_operation";r.SELECT_DEVICE="ui-select_device";r.SELECT_ACCOUNT="ui-select_account";r.SELECT_FEE="ui-select_fee";r.UPDATE_CUSTOM_FEE="ui-update_custom_fee";r.INSUFFICIENT_FUNDS="ui-insufficient_funds";r.REQUEST_BUTTON="ui-button";r.REQUEST_WORD="ui-request_word";r.RECEIVE_PERMISSION="ui-receive_permission";r.RECEIVE_CONFIRMATION="ui-receive_confirmation";r.RECEIVE_PIN="ui-receive_pin";r.RECEIVE_PASSPHRASE="ui-receive_passphrase";r.RECEIVE_DEVICE="ui-receive_device";r.CHANGE_ACCOUNT="ui-change_account";r.RECEIVE_ACCOUNT="ui-receive_account";r.RECEIVE_FEE="ui-receive_fee";r.RECEIVE_WORD="ui-receive_word";r.CHANGE_SETTINGS="ui-change_settings";r.CUSTOM_MESSAGE_REQUEST="ui-custom_request";r.CUSTOM_MESSAGE_RESPONSE="ui-custom_response";r.LOGIN_CHALLENGE_REQUEST="ui-login_challenge_request";r.LOGIN_CHALLENGE_RESPONSE="ui-login_challenge_response";r.BUNDLE_PROGRESS="ui-bundle_progress";r.ADDRESS_VALIDATION="ui-address_validation";r.IFRAME_FAILURE="ui-iframe_failure"}}},{package:"trezor-connect",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/trezor-connect/lib/constants/ui.js"}],[6013,{},function(){with(this)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.START_PENDING=r.DISABLE_WEBUSB=r.REQUEST=r.STREAM=r.UPDATE=r.ERROR=r.START=void 0;r.START="transport-start";r.ERROR="transport-error";r.UPDATE="transport-update";r.STREAM="transport-stream";r.REQUEST="transport-request_device";r.DISABLE_WEBUSB="transport-disable_webusb";r.START_PENDING="transport-start_pending"}}},{package:"trezor-connect",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/trezor-connect/lib/constants/transport.js"}],[6005,{},function(){with(this)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.FIAT_RATES_UPDATE=r.NOTIFICATION=r.BLOCK=r.CONNECT=r.ERROR=void 0;r.ERROR="blockchain-error";r.CONNECT="blockchain-connect";r.BLOCK="blockchain-block";r.NOTIFICATION="blockchain-notification";r.FIAT_RATES_UPDATE="fiat-rates-update"}}},{package:"trezor-connect",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/trezor-connect/lib/constants/blockchain.js"}],[6006,{},function(){with(this)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.POOL_RELAY_TYPE=r.CERTIFICATE_TYPE=r.ADDRESS_TYPE=r.NETWORK_IDS=r.PROTOCOL_MAGICS=void 0;var n=Object.freeze({mainnet:764824073,testnet:42});r.PROTOCOL_MAGICS=n;var i=Object.freeze({mainnet:1,testnet:0});r.NETWORK_IDS=i;var s=Object.freeze({Base:0,Pointer:4,Enterprise:6,Byron:8,Reward:14});r.ADDRESS_TYPE=s;var o=Object.freeze({StakeRegistration:0,StakeDeregistration:1,StakeDelegation:2,StakePoolRegistration:3});r.CERTIFICATE_TYPE=o;var a=Object.freeze({SingleHostIp:0,SingleHostName:1,MultipleHostName:2});r.POOL_RELAY_TYPE=a}}},{package:"trezor-connect",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/trezor-connect/lib/constants/cardano.js"}],[6007,{},function(){with(this)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.WAIT_FOR_SELECTION=r.WORD=r.PASSPHRASE_ON_DEVICE=r.PASSPHRASE=r.PIN=r.BUTTON=r.LOADING=r.USED_ELSEWHERE=r.RELEASED=r.ACQUIRED=r.RELEASE=r.ACQUIRE=r.CHANGED=r.DISCONNECT=r.CONNECT_UNACQUIRED=r.CONNECT=void 0;r.CONNECT="device-connect";r.CONNECT_UNACQUIRED="device-connect_unacquired";r.DISCONNECT="device-disconnect";r.CHANGED="device-changed";r.ACQUIRE="device-acquire";r.RELEASE="device-release";r.ACQUIRED="device-acquired";r.RELEASED="device-released";r.USED_ELSEWHERE="device-used_elsewhere";r.LOADING="device-loading";r.BUTTON="button";r.PIN="pin";r.PASSPHRASE="passphrase";r.PASSPHRASE_ON_DEVICE="passphrase_on_device";r.WORD="word";r.WAIT_FOR_SELECTION="device-wait_for_selection"}}},{package:"trezor-connect",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/trezor-connect/lib/constants/device.js"}],[6008,{"@babel/runtime/helpers/inheritsLoose":199,"@babel/runtime/helpers/interopRequireDefault":200,"@babel/runtime/helpers/wrapNativeSuper":219},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("@babel/runtime/helpers/interopRequireDefault");r.__esModule=!0,r.LIBUSB_ERROR_MESSAGE=r.WEBUSB_ERROR_MESSAGE=r.INVALID_PIN_ERROR_MESSAGE=r.WRONG_PREVIOUS_SESSION_ERROR_MESSAGE=r.TypedError=r.TrezorError=r.ERROR_CODES=void 0;var i=n(e("@babel/runtime/helpers/inheritsLoose")),s=n(e("@babel/runtime/helpers/wrapNativeSuper")),o={Init_NotInitialized:"TrezorConnect not yet initialized",Init_AlreadyInitialized:"TrezorConnect has been already initialized",Init_IframeBlocked:"Iframe blocked",Init_IframeTimeout:"Iframe timeout",Init_ManifestMissing:"Manifest not set. Read more at https://github.com/trezor/connect/blob/develop/docs/index.md",Popup_ConnectionMissing:"Unable to establish connection with iframe",Transport_Missing:"Transport is missing",Transport_InvalidProtobuf:"",Method_InvalidPackage:"This version of trezor-connect is not suitable to work without browser. Use trezor-connect@extended package instead",Method_InvalidParameter:"",Method_NotAllowed:"Method not allowed for this configuration",Method_PermissionsNotGranted:"Permissions not granted",Method_Cancel:"Cancelled",Method_Interrupted:"Popup closed",Method_UnknownCoin:"Coin not found",Method_AddressNotMatch:"Addresses do not match",Method_FirmwareUpdate_DownloadFailed:"Failed to download firmware binary",Method_CustomMessage_Callback:'Parameter "callback" is not a function',Method_Discovery_BundleException:"",Method_Override:"override",Method_NoResponse:"Call resolved without response",Backend_NotSupported:"BlockchainLink settings not found in coins.json",Backend_WorkerMissing:"",Backend_Disconnected:"Backend disconnected",Backend_Invalid:"Invalid backend",Backend_Error:"",Runtime:"",Device_NotFound:"Device not found",Device_InitializeFailed:"",Device_FwException:"",Device_ModeException:"",Device_Disconnected:"Device disconnected",Device_UsedElsewhere:"Device is used in another window",Device_InvalidState:"Passphrase is incorrect",Device_CallInProgress:"Device call in progress"};r.ERROR_CODES=o;var a=function(e){function t(t,r){var n;return(n=e.call(this,r)||this).code=t,n.message=r,n}return(0,i.default)(t,e),t}((0,s.default)(Error));r.TrezorError=a;r.TypedError=function(e,t){return new a(e,t||o[e])};r.WRONG_PREVIOUS_SESSION_ERROR_MESSAGE="wrong previous session";r.INVALID_PIN_ERROR_MESSAGE="PIN invalid";r.WEBUSB_ERROR_MESSAGE="NetworkError: Unable to claim interface.";r.LIBUSB_ERROR_MESSAGE="LIBUSB_ERROR"}}},{package:"trezor-connect",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/trezor-connect/lib/constants/errors.js"}],[6049,{},function(){with(this)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.default=void 0;var n=function(e,t,r){var n=e||".trezor-webusb-button",i=document.querySelectorAll(n),s=t+"?"+Date.now();i.forEach((function(e){if(e.getElementsByTagName("iframe").length<1){var t=e.getBoundingClientRect(),n=document.createElement("iframe");n.frameBorder="0",n.width=Math.round(t.width)+"px",n.height=Math.round(t.height)+"px",n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.zIndex="1",n.setAttribute("allow","usb"),n.setAttribute("scrolling","no"),n.onload=function(){n.contentWindow.postMessage({},r)},n.src=s,e.append(n)}}))};r.default=n}}},{package:"trezor-connect",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/trezor-connect/lib/webusb/button.js"}],[6047,{},function(){with(this)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.getLog=r.enableLogByPrefix=r.enableLog=r.initLog=void 0;var n={DescriptorStream:"color: #77ab59",DeviceList:"color: #36802d",Device:"color: #bada55",Core:"color: #c9df8a",IFrame:"color: #FFFFFF; background: #f4a742;",Popup:"color: #f48a00"},i=function(){function e(e,t){this.prefix=e,this.enabled=t,this.messages=[],this.css=n[e]||"color: #000000; background: #FFFFFF;"}var t=e.prototype;return t.addMessage=function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];this.messages.push({level:e,prefix:t,message:n,timestamp:(new Date).getTime()}),this.messages.length>100&&this.messages.shift()},t.log=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n;(this.addMessage.apply(this,["log",this.prefix].concat(t)),this.enabled)&&(n=console).log.apply(n,[this.prefix].concat(t))},t.error=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n;(this.addMessage.apply(this,["error",this.prefix].concat(t)),this.enabled)&&(n=console).error.apply(n,[this.prefix].concat(t))},t.warn=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n;(this.addMessage.apply(this,["warn",this.prefix].concat(t)),this.enabled)&&(n=console).warn.apply(n,[this.prefix].concat(t))},t.debug=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n;(this.addMessage.apply(this,["debug",this.prefix].concat(t)),this.enabled)&&(n=console).log.apply(n,["%c"+this.prefix,this.css].concat(t))},e}(),s={};r.initLog=function(e,t){var r=new i(e,!!t);return s[e]=r,r};r.enableLog=function(e){Object.keys(s).forEach((function(t){s[t].enabled=e}))};r.enableLogByPrefix=function(e,t){s[e]&&(s[e].enabled=t)};r.getLog=function(){var e=[];return Object.keys(s).forEach((function(t){e=e.concat(s[t].messages)})),e.sort((function(e,t){return e.timestamp-t.timestamp})),e}}}},{package:"trezor-connect",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/trezor-connect/lib/utils/debug.js"}],[6022,{},function(){with(this)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.errorMessage=r.parseMessage=void 0;r.parseMessage=function(e){var t={event:e.event,type:e.type,payload:e.payload};return"number"==typeof e.id&&(t.id=e.id),"boolean"==typeof e.success&&(t.success=e.success),t};r.errorMessage=function(e){return{success:!1,payload:{error:e.message,code:e.code}}}}}},{package:"trezor-connect",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/trezor-connect/lib/message/index.js"}],[6018,{"../constants":6010,"../env/browser/networkUtils":6017,"../utils/deferred":6048,"./inline-styles":6019,"@babel/runtime/helpers/asyncToGenerator":190,"@babel/runtime/helpers/interopRequireDefault":200,"@babel/runtime/regenerator":220},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("@babel/runtime/helpers/interopRequireDefault");r.__esModule=!0,r.clearTimeout=r.dispose=r.postMessage=r.init=r.messagePromises=r.error=r.timeout=r.initPromise=r.origin=r.instance=void 0;var i,s,o=n(e("@babel/runtime/regenerator")),a=n(e("@babel/runtime/helpers/asyncToGenerator")),u=e("../utils/deferred"),c=e("../constants"),l=e("../env/browser/networkUtils"),f=n(e("./inline-styles"));r.instance=i,r.origin=s;var h=(0,u.create)();r.initPromise=h;var d,p=0;r.timeout=p,r.error=d;var m=0,y={};r.messagePromises=y;var g=function(){var e=(0,a.default)(o.default.mark((function e(t){var n,a,f,d,m;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.initPromise=h=(0,u.create)(),(n=document.getElementById("trezorconnect"))?r.instance=i=n:(r.instance=i=document.createElement("iframe"),i.frameBorder="0",i.width="0px",i.height="0px",i.style.position="absolute",i.style.display="none",i.style.border="0px",i.style.width="0px",i.style.height="0px",i.id="trezorconnect"),"web"===t.env?(f=t.manifest?JSON.stringify(t.manifest):"undefined",d="version="+t.version+"&manifest="+encodeURIComponent(btoa(JSON.stringify(f))),a=t.iframeSrc+"?"+d):a=t.iframeSrc,i.setAttribute("src",a),t.webusb&&i.setAttribute("allow","usb"),r.origin=s=(0,l.getOrigin)(i.src),r.timeout=p=window.setTimeout((function(){h.reject(c.ERRORS.TypedError("Init_IframeTimeout"))}),1e4),m=function(){if(i){try{var e=i.contentWindow.location.origin;if(!e||"null"===e)return void b()}catch(e){}var r;"undefined"!=typeof chrome&&chrome.runtime&&void 0!==chrome.runtime.onConnect&&(chrome.runtime.onConnect.addListener((function(){})),r=chrome.runtime.id),i.contentWindow.postMessage({type:c.IFRAME.INIT,payload:{settings:t,extension:r}},s),i.onload=undefined}else h.reject(c.ERRORS.TypedError("Init_IframeBlocked"))},i.attachEvent?i.attachEvent("onload",m):i.onload=m,document.body&&(document.body.appendChild(i),v()),e.prev=11,e.next=14,h.promise;case 14:e.next=20;break;case 16:throw e.prev=16,e.t0=e.catch(11),i&&(i.parentNode&&i.parentNode.removeChild(i),r.instance=i=null),e.t0;case 20:return e.prev=20,window.clearTimeout(p),r.timeout=p=0,e.finish(20);case 24:case"end":return e.stop()}}),e,null,[[11,16,20,24]])})));return function(t){return e.apply(this,arguments)}}();r.init=g;var v=function(){if(!i)throw c.ERRORS.TypedError("Init_IframeBlocked");var e=i.ownerDocument,t=e.head||e.getElementsByTagName("head")[0],r=document.createElement("style");r.setAttribute("type","text/css"),r.setAttribute("id","TrezorConnectStylesheet"),r.styleSheet?(r.styleSheet.cssText=f.default,t.appendChild(r)):(r.appendChild(document.createTextNode(f.default)),t.append(r))},b=function(){window.clearTimeout(p),r.error=d=c.ERRORS.TypedError("Init_IframeBlocked"),_(),h.reject(d)};r.postMessage=function(e,t){if(void 0===t&&(t=!0),!i)throw c.ERRORS.TypedError("Init_IframeBlocked");if(t){m++,e.id=m,y[m]=(0,u.create)();var r=y[m].promise;return i.contentWindow.postMessage(e,s),r}return i.contentWindow.postMessage(e,s),null};var _=function(){if(i&&i.parentNode)try{i.parentNode.removeChild(i)}catch(e){}r.instance=i=null,r.timeout=p=0};r.dispose=_;r.clearTimeout=function(){window.clearTimeout(p)}}}},{package:"trezor-connect",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/trezor-connect/lib/iframe/builder.js"}],[6015,{"@babel/runtime/helpers/defineProperty":194,"@babel/runtime/helpers/interopRequireDefault":200},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("@babel/runtime/helpers/interopRequireDefault");r.__esModule=!0,r.parse=r.corsValidator=r.getEnv=r.DEFAULT_PRIORITY=void 0;var i=n(e("@babel/runtime/helpers/defineProperty"));function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var o="8.2.6",a="https://connect.trezor.io/"+(o.split(".").map((function(e){return parseInt(e,10)}))[0]+"/");r.DEFAULT_PRIORITY=2;var u={configSrc:"./data/config.json",version:o,debug:!1,priority:2,trustedHost:!1,connectSrc:a,iframeSrc:a+"iframe.html",popup:!0,popupSrc:a+"popup.html",webusbSrc:a+"webusb.html",transportReconnect:!1,webusb:!0,pendingTransportEvent:!0,supportedBrowser:"undefined"==typeof navigator||!/Trident|MSIE|Edge/.test(navigator.userAgent),manifest:null,env:"web",lazyLoad:!1,timestamp:(new Date).getTime(),interactionTimeout:600},c=function(){if("undefined"!=typeof chrome&&chrome.runtime&&void 0!==chrome.runtime.onConnect)return"webextension";if("undefined"!=typeof navigator){if("string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase())return"react-native";if(navigator.userAgent.toLowerCase().indexOf(" electron/")>-1)return"electron"}return"web"};r.getEnv=c;var l=function(e){if("string"==typeof e)return e.match(/^https:\/\/([A-Za-z0-9\-_]+\.)*trezor\.io\//)||e.match(/^https?:\/\/localhost:[58][0-9]{3}\//)||e.match(/^https:\/\/([A-Za-z0-9\-_]+\.)*sldev\.cz\//)||e.match(/^https?:\/\/([A-Za-z0-9\-_]+\.)*trezoriovpjcahpzkrewelclulmszwbqpzmzgub37gbcjlvluxtruqad\.onion\//)?e:void 0};r.corsValidator=l;r.parse=function(e){void 0===e&&(e={});var t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},u);if(Object.prototype.hasOwnProperty.call(e,"debug")&&(Array.isArray(e),"boolean"==typeof e.debug?t.debug=e.debug:"string"==typeof e.debug&&(t.debug="true"===e.debug)),"string"==typeof e.connectSrc&&(t.connectSrc=e.connectSrc),"undefined"!=typeof global&&"string"==typeof global.__TREZOR_CONNECT_SRC&&(t.connectSrc=l(global.__TREZOR_CONNECT_SRC),t.debug=!0),"undefined"!=typeof window&&window.location&&"string"==typeof window.location.search){var r=window.location.search.split("&").find((function(e){return e.indexOf("trezor-connect-src")>=0}));if(r){var n=r.split("=")[1];t.connectSrc=l(decodeURIComponent(n)),t.debug=!0}}var o=t.connectSrc||a;return t.iframeSrc=o+"iframe.html",t.popupSrc=o+"popup.html",t.webusbSrc=o+"webusb.html","boolean"==typeof e.transportReconnect&&(t.transportReconnect=e.transportReconnect),"boolean"==typeof e.webusb&&(t.webusb=e.webusb),"boolean"==typeof e.popup&&(t.popup=e.popup),"boolean"==typeof e.lazyLoad&&(t.lazyLoad=e.lazyLoad),"boolean"==typeof e.pendingTransportEvent&&(t.pendingTransportEvent=e.pendingTransportEvent),"undefined"!=typeof window&&window.location&&"file:"===window.location.protocol&&(t.origin="file://"+window.location.pathname,t.webusb=!1),"string"==typeof e.extension&&(t.extension=e.extension),"string"==typeof e.env?t.env=e.env:t.env=c(),"number"==typeof e.timestamp&&(t.timestamp=e.timestamp),"number"==typeof e.interactionTimeout&&(t.interactionTimeout=e.interactionTimeout),"object"==typeof e.manifest&&(t.manifest=function(e){if(e&&"string"==typeof e.email&&"string"==typeof e.appUrl)return{email:e.email,appUrl:e.appUrl}}(e.manifest)),u=t}}}},{package:"trezor-connect",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/trezor-connect/lib/data/ConnectSettings.js"}],[6021,{"../constants":6010,"@babel/runtime/helpers/defineProperty":194,"@babel/runtime/helpers/interopRequireDefault":200},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("@babel/runtime/helpers/interopRequireDefault");r.__esModule=!0,r.BlockchainMessage=r.ResponseMessage=r.TransportMessage=r.DeviceMessage=r.UiMessage=void 0;var i=n(e("@babel/runtime/helpers/defineProperty")),s=e("../constants");function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r.UiMessage=function(e,t){return{event:s.UI_EVENT,type:e,payload:t}};r.DeviceMessage=function(e,t){return{event:s.DEVICE_EVENT,type:e,payload:t}};r.TransportMessage=function(e,t){return{event:s.TRANSPORT_EVENT,type:e,payload:t.error?a(a({},t),{},{error:t.error.message,code:t.error.code}):t}};r.ResponseMessage=function(e,t,r){return void 0===r&&(r=null),{event:s.RESPONSE_EVENT,type:s.RESPONSE_EVENT,id:e,success:t,payload:t?r:{error:r.error.message,code:r.error.code}}};r.BlockchainMessage=function(e,t){return{event:s.BLOCKCHAIN_EVENT,type:e,payload:t}}}}},{package:"trezor-connect",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/trezor-connect/lib/message/builder.js"}],[6024,{"../constants/iframe":6009,"../constants/popup":6012,"../constants/ui":6014,"../env/browser/networkUtils":6017,"../utils/deferred":6048,"./showPopupRequest":6025,"@babel/runtime/helpers/assertThisInitialized":189,"@babel/runtime/helpers/asyncToGenerator":190,"@babel/runtime/helpers/defineProperty":194,"@babel/runtime/helpers/inheritsLoose":199,"@babel/runtime/helpers/interopRequireDefault":200,"@babel/runtime/regenerator":220,events:2106},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("@babel/runtime/helpers/interopRequireDefault");r.__esModule=!0,r.default=void 0;var i=n(e("@babel/runtime/regenerator")),s=n(e("@babel/runtime/helpers/asyncToGenerator")),o=n(e("@babel/runtime/helpers/assertThisInitialized")),a=n(e("@babel/runtime/helpers/inheritsLoose")),u=n(e("@babel/runtime/helpers/defineProperty")),c=n(e("events")),l=g(e("../constants/popup")),f=g(e("../constants/iframe")),h=g(e("../constants/ui")),d=e("./showPopupRequest"),p=e("../env/browser/networkUtils"),m=e("../utils/deferred");function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(y=function(e){return e?r:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=y(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}var v=function(e){function t(t){var r;return r=e.call(this)||this,(0,u.default)((0,o.default)(r),"requestTimeout",0),(0,u.default)((0,o.default)(r),"closeInterval",0),(0,u.default)((0,o.default)(r),"extensionTabId",0),r.settings=t,r.origin=(0,p.getOrigin)(t.popupSrc),r.handleMessage=r.handleMessage.bind((0,o.default)(r)),r.iframeHandshake=(0,m.create)(f.LOADED),"webextension"===r.settings.env&&(r.handleExtensionConnect=r.handleExtensionConnect.bind((0,o.default)(r)),r.handleExtensionMessage=r.handleExtensionMessage.bind((0,o.default)(r)),chrome.runtime.onConnect.addListener(r.handleExtensionConnect)),window.addEventListener("message",r.handleMessage,!1),r}(0,a.default)(t,e);var r=t.prototype;return r.request=function(e){var t=this;if(void 0===e&&(e=!1),this.locked)this._window&&("webextension"===this.settings.env?chrome.tabs.update(this._window.id,{active:!0}):this._window.focus());else{var r=this.open.bind(this);if(this.locked=!0,this.settings.supportedBrowser){var n=e||"webextension"===this.settings.env?1:850;this.requestTimeout=window.setTimeout((function(){t.requestTimeout=0,r(e)}),n)}else r()}},r.cancel=function(){this.close()},r.unlock=function(){this.locked=!1},r.open=function(e){var t=this,r=this.settings.popupSrc;this.settings.supportedBrowser?(this.popupPromise=(0,m.create)(l.LOADED),this.openWrapper(e?r+"#loading":r),this.closeInterval=window.setInterval((function(){t._window&&("webextension"===t.settings.env?chrome.tabs.get(t._window.id,(function(e){e||(t.close(),t.emit(l.CLOSED))})):t._window.closed&&(t.close(),t.emit(l.CLOSED)))}),500),this.openTimeout=window.setTimeout((function(){t.close(),(0,d.showPopupRequest)(t.open.bind(t),(function(){t.emit(l.CLOSED)}))}),3e3)):this.openWrapper(r+"#unsupported")},r.openWrapper=function(e){var t=this;"webextension"===this.settings.env?chrome.windows.getCurrent(null,(function(r){"normal"!==r.type?chrome.windows.create({url:e},(function(e){chrome.tabs.query({windowId:e.id,active:!0},(function(e){t._window=e[0]}))})):chrome.tabs.query({currentWindow:!0,active:!0},(function(r){t.extensionTabId=r[0].id,chrome.tabs.create({url:e,index:r[0].index+1},(function(e){t._window=e}))}))})):"electron"===this.settings.env?this._window=window.open(e,"modal"):(this._window=window.open("","_blank"),this._window&&(this._window.location.href=e))},r.handleExtensionConnect=function(e){"trezor-connect"===e.name&&(!this._window||this._window&&this._window.id!==e.sender.tab.id?e.disconnect():(window.clearTimeout(this.openTimeout),this.extensionPort=e,this.extensionPort.onMessage.addListener(this.handleExtensionMessage)))},r.handleExtensionMessage=function(e){var t=this;if(this.extensionPort){var r=this.extensionPort,n=e.data;if(n&&"object"==typeof n)if(n.type===l.ERROR){var i=n.payload&&"string"==typeof n.payload.error?n.payload.error:null;this.emit(l.CLOSED,i?"Popup error: "+i:null),this.close()}else n.type===l.LOADED?(this.popupPromise&&this.popupPromise.resolve(),this.iframeHandshake.promise.then((function(e){r.postMessage({type:l.INIT,payload:{settings:t.settings,useBroadcastChannel:e}})}))):n.type===l.EXTENSION_USB_PERMISSIONS?chrome.tabs.query({currentWindow:!0,active:!0},(function(e){chrome.tabs.create({url:"trezor-usb-permissions.html",index:e[0].index+1},(function(e){}))})):n.type===l.CLOSE_WINDOW&&(this.emit(l.CLOSED),this.close())}},r.handleMessage=function(e){var t=this,r=e.data;if((0,p.getOrigin)(e.origin)===this.origin&&r&&"object"==typeof r)if(r.type===f.LOADED){var n=!(!r.payload||"boolean"!=typeof r.payload.useBroadcastChannel)&&r.payload.useBroadcastChannel;this.iframeHandshake.resolve(n)}else if(r.type===l.BOOTSTRAP)window.clearTimeout(this.openTimeout);else if(r.type===l.ERROR&&this._window){var i=r.payload&&"string"==typeof r.payload.error?r.payload.error:null;this.emit(l.CLOSED,i?"Popup error: "+i:null),this.close()}else r.type===l.LOADED?(this.popupPromise&&this.popupPromise.resolve(),this.iframeHandshake.promise.then((function(e){t._window.postMessage({type:l.INIT,payload:{settings:t.settings,useBroadcastChannel:e}},t.origin)}))):r.type!==l.CANCEL_POPUP_REQUEST&&r.type!==h.CLOSE_UI_WINDOW||this.close()},r.close=function(){if(this.locked=!1,this.popupPromise=undefined,this.requestTimeout&&(window.clearTimeout(this.requestTimeout),this.requestTimeout=0),this.openTimeout&&(window.clearTimeout(this.openTimeout),this.openTimeout=0),this.closeInterval&&(window.clearInterval(this.closeInterval),this.closeInterval=0),this.extensionPort&&(this.extensionPort.disconnect(),this.extensionPort=null),this.extensionTabId&&(chrome.tabs.update(this.extensionTabId,{active:!0}),this.extensionTabId=0),this._window){if("webextension"===this.settings.env){chrome.runtime.lastError;chrome.tabs.remove(this._window.id,(function(){chrome.runtime.lastError}))}else this._window.close();this._window=null}},r.postMessage=function(){var e=(0,s.default)(i.default.mark((function e(t){var r=this;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._window||t.type===h.REQUEST_UI_WINDOW||!this.openTimeout){e.next=4;break}return this.close(),(0,d.showPopupRequest)(this.open.bind(this),(function(){r.emit(l.CLOSED)})),e.abrupt("return");case 4:if(!this.popupPromise){e.next=7;break}return e.next=7,this.popupPromise.promise;case 7:this._window&&this._window.postMessage(t,this.origin);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t}(c.default);r.default=v}}},{package:"trezor-connect",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/trezor-connect/lib/popup/PopupManager.js"}],[1117,{"./utils":1119,"ethereumjs-util":1124},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.extractPublicKey=r.recoverPersonalSignature=r.personalSign=void 0;const n=e("ethereumjs-util"),i=e("./utils");function s(e,t){const r=n.hashPersonalMessage(i.legacyToBuffer(e));return i.recoverPublicKey(r,t)}r.personalSign=function({privateKey:e,data:t}){if(i.isNullish(t))throw new Error("Missing data parameter");if(i.isNullish(e))throw new Error("Missing privateKey parameter");const r=i.legacyToBuffer(t),s=n.hashPersonalMessage(r),o=n.ecsign(s,e);return i.concatSig(n.toBuffer(o.v),o.r,o.s)},r.recoverPersonalSignature=function({data:e,signature:t}){if(i.isNullish(e))throw new Error("Missing data parameter");if(i.isNullish(t))throw new Error("Missing signature parameter");const r=s(e,t),o=n.publicToAddress(r);return n.bufferToHex(o)},r.extractPublicKey=function({data:e,signature:t}){if(i.isNullish(e))throw new Error("Missing data parameter");if(i.isNullish(t))throw new Error("Missing signature parameter");return`0x${s(e,t).toString("hex")}`}}}},{package:"@metamask/eth-sig-util",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/eth-sig-util/dist/personal-sign.js"}],[1118,{"./utils":1119,buffer:2105,"ethereumjs-abi":2528,"ethereumjs-util":1124},function(){with(this)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.recoverTypedSignature=r.signTypedData=r.typedSignatureHash=r.TypedDataUtils=r.TYPED_MESSAGE_SCHEMA=r.SignTypedDataVersion=void 0;const n=e("ethereumjs-util"),i=e("ethereumjs-abi"),s=e("./utils");var o;function a(e,t){if(!Object.keys(o).includes(e))throw new Error(`Invalid version: '${e}'`);if(t&&!t.includes(e))throw new Error(`SignTypedDataVersion not allowed: '${e}'. Allowed versions are: ${t.join(", ")}`)}function u(e,r,s,l,f){if(a(f,[o.V3,o.V4]),e[s]!==undefined)return["bytes32",f===o.V4&&null==l?"0x0000000000000000000000000000000000000000000000000000000000000000":n.keccak(c(s,l,e,f))];if(l===undefined)throw new Error(`missing value for field ${r} of type ${s}`);if("bytes"===s)return["bytes32",n.keccak(l)];if("string"===s)return"string"==typeof l&&(l=t.from(l,"utf8")),["bytes32",n.keccak(l)];if(s.lastIndexOf("]")===s.length-1){if(f===o.V3)throw new Error("Arrays are unimplemented in encodeData; use V4 extension");const t=s.slice(0,s.lastIndexOf("[")),a=l.map((n=>u(e,r,t,n,f)));return["bytes32",n.keccak(i.rawEncode(a.map((([e])=>e)),a.map((([,e])=>e))))]}return[s,l]}function c(e,t,r,n){a(n,[o.V3,o.V4]);const s=["bytes32"],c=[d(e,r)];for(const i of r[e]){if(n===o.V3&&t[i.name]===undefined)continue;const[e,a]=u(r,i.name,i.type,t[i.name],n);s.push(e),c.push(a)}return i.rawEncode(s,c)}function l(e,t){let r="";const n=f(e,t);n.delete(e);const i=[e,...Array.from(n).sort()];for(const e of i){if(!t[e])throw new Error(`No type definition specified: ${e}`);r+=`${e}(${t[e].map((({name:e,type:t})=>`${t} ${e}`)).join(",")})`}return r}function f(e,t,r=new Set){if([e]=e.match(/^\w*/u),r.has(e)||t[e]===undefined)return r;r.add(e);for(const n of t[e])f(n.type,t,r);return r}function h(e,t,r,i){return a(i,[o.V3,o.V4]),n.keccak(c(e,t,r,i))}function d(e,t){return n.keccak(l(e,t))}function p(e){const t={};for(const n in r.TYPED_MESSAGE_SCHEMA.properties)e[n]&&(t[n]=e[n]);return"types"in t&&(t.types=Object.assign({EIP712Domain:[]},t.types)),t}function m(e){const t=new Error("Expect argument to be non-empty array");if("object"!=typeof e||!("length"in e)||!e.length)throw t;const r=e.map((function(e){return"bytes"!==e.type?e.value:s.legacyToBuffer(e.value)})),n=e.map((function(e){return e.type})),o=e.map((function(e){if(!e.name)throw t;return`${e.type} ${e.name}`}));return i.soliditySHA3(["bytes32","bytes32"],[i.soliditySHA3(new Array(e.length).fill("string"),o),i.soliditySHA3(n,r)])}!function(e){e.V1="V1",e.V3="V3",e.V4="V4"}(o=r.SignTypedDataVersion||(r.SignTypedDataVersion={})),r.TYPED_MESSAGE_SCHEMA={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string",enum:function(){const e=Array.from(new Array(32)).map(((e,t)=>"int"+8*(t+1))),t=Array.from(new Array(32)).map(((e,t)=>"uint"+8*(t+1))),r=Array.from(new Array(32)).map(((e,t)=>`bytes${t+1}`));return["bool","address","string","bytes",...e,...t,...r]}()}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},r.TypedDataUtils={encodeData:c,encodeType:l,findTypeDependencies:f,hashStruct:h,hashType:d,sanitizeData:p,eip712Hash:function(e,r){a(r,[o.V3,o.V4]);const i=p(e),s=[t.from("1901","hex")];return s.push(h("EIP712Domain",i.domain,i.types,r)),"EIP712Domain"!==i.primaryType&&s.push(h(i.primaryType,i.message,i.types,r)),n.keccak(t.concat(s))}},r.typedSignatureHash=function(e){const t=m(e);return n.bufferToHex(t)},r.signTypedData=function({privateKey:e,data:t,version:i}){if(a(i),s.isNullish(t))throw new Error("Missing data parameter");if(s.isNullish(e))throw new Error("Missing private key parameter");const u=i===o.V1?m(t):r.TypedDataUtils.eip712Hash(t,i),c=n.ecsign(u,e);return s.concatSig(n.toBuffer(c.v),c.r,c.s)},r.recoverTypedSignature=function({data:e,signature:t,version:i}){if(a(i),s.isNullish(e))throw new Error("Missing data parameter");if(s.isNullish(t))throw new Error("Missing signature parameter");const u=i===o.V1?m(e):r.TypedDataUtils.eip712Hash(e,i),c=s.recoverPublicKey(u,t),l=n.publicToAddress(c);return n.bufferToHex(l)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-sig-util",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/eth-sig-util/dist/sign-typed-data.js"}],[1115,{"./utils":1119,buffer:2105,tweetnacl:6055,"tweetnacl-util":6054},function(){with(this)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.getEncryptionPublicKey=r.decryptSafely=r.decrypt=r.encryptSafely=r.encrypt=void 0;const o=s(e("tweetnacl")),a=s(e("tweetnacl-util")),u=e("./utils");function c({publicKey:e,data:t,version:r}){if(u.isNullish(e))throw new Error("Missing publicKey parameter");if(u.isNullish(t))throw new Error("Missing data parameter");if(u.isNullish(r))throw new Error("Missing version parameter");if("x25519-xsalsa20-poly1305"===r){if("string"!=typeof t)throw new Error("Message data must be given as a string");const r=o.box.keyPair();let n;try{n=a.decodeBase64(e)}catch(e){throw new Error("Bad public key")}const i=a.decodeUTF8(t),s=o.randomBytes(o.box.nonceLength),u=o.box(i,s,n,r.secretKey);return{version:"x25519-xsalsa20-poly1305",nonce:a.encodeBase64(s),ephemPublicKey:a.encodeBase64(r.publicKey),ciphertext:a.encodeBase64(u)}}throw new Error("Encryption type/version not supported")}function l({encryptedData:e,privateKey:t}){if(u.isNullish(e))throw new Error("Missing encryptedData parameter");if(u.isNullish(t))throw new Error("Missing privateKey parameter");if("x25519-xsalsa20-poly1305"===e.version){const r=f(t),n=o.box.keyPair.fromSecretKey(r).secretKey,i=a.decodeBase64(e.nonce),s=a.decodeBase64(e.ciphertext),u=a.decodeBase64(e.ephemPublicKey),c=o.box.open(s,i,u,n);let l;try{l=a.encodeUTF8(c)}catch(e){throw new Error("Decryption failed.")}if(l)return l;throw new Error("Decryption failed.")}throw new Error("Encryption type/version not supported.")}function f(e){const r=t.from(e,"hex").toString("base64");return a.decodeBase64(r)}r.encrypt=c,r.encryptSafely=function({publicKey:e,data:r,version:n}){if(u.isNullish(e))throw new Error("Missing publicKey parameter");if(u.isNullish(r))throw new Error("Missing data parameter");if(u.isNullish(n))throw new Error("Missing version parameter");if("object"==typeof r&&"toJSON"in r)throw new Error("Cannot encrypt with toJSON property.  Please remove toJSON property");const i={data:r,padding:""},s=t.byteLength(JSON.stringify(i),"utf-8")%2048;let o=0;return s>0&&(o=2048-s-16),i.padding="0".repeat(o),c({publicKey:e,data:JSON.stringify(i),version:n})},r.decrypt=l,r.decryptSafely=function({encryptedData:e,privateKey:t}){if(u.isNullish(e))throw new Error("Missing encryptedData parameter");if(u.isNullish(t))throw new Error("Missing privateKey parameter");return JSON.parse(l({encryptedData:e,privateKey:t})).data},r.getEncryptionPublicKey=function(e){const t=f(e),r=o.box.keyPair.fromSecretKey(t).publicKey;return a.encodeBase64(r)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-sig-util",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/eth-sig-util/dist/encryption.js"}],[1119,{buffer:2105,"ethereumjs-util":1124,"ethjs-util":1130},function(){with(this)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.normalize=r.recoverPublicKey=r.concatSig=r.legacyToBuffer=r.isNullish=r.padWithZeroes=void 0;const n=e("ethereumjs-util"),i=e("ethjs-util");function s(e,t){if(""!==e&&!/^[a-f0-9]+$/iu.test(e))throw new Error(`Expected an unprefixed hex string. Received: ${e}`);if(t<0)throw new Error(`Expected a non-negative integer target length. Received: ${t}`);return String.prototype.padStart.call(e,t,"0")}r.padWithZeroes=s,r.isNullish=function(e){return null===e||e===undefined},r.legacyToBuffer=function(e){return"string"!=typeof e||i.isHexString(e)?n.toBuffer(e):t.from(e)},r.concatSig=function(e,t,r){const o=n.fromSigned(t),a=n.fromSigned(r),u=n.bufferToInt(e),c=s(n.toUnsigned(o).toString("hex"),64),l=s(n.toUnsigned(a).toString("hex"),64),f=i.stripHexPrefix(i.intToHex(u));return n.addHexPrefix(c.concat(l,f))},r.recoverPublicKey=function(e,t){const r=n.fromRpcSig(t);return n.ecrecover(e,r.v,r.r,r.s)},r.normalize=function(e){if(!e)return undefined;if("number"==typeof e){const t=n.toBuffer(e);e=n.bufferToHex(t)}if("string"!=typeof e){let t="eth-sig-util.normalize() requires hex string or integer input.";throw t+=` received ${typeof e}: ${e}`,new Error(t)}return n.addHexPrefix(e.toLowerCase())}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-sig-util",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@metamask/eth-sig-util/dist/utils.js"}],[581,{"@keystonehq/bc-ur-registry":571,buffer:2105,"ethereumjs-util":2548,hdkey:4418,uuid:6074},function(){with(this)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0});var n,i=e("@keystonehq/bc-ur-registry"),s=e("uuid"),o=(n=e("hdkey"))&&"object"==typeof n&&"default"in n?n.default:n,a=e("ethereumjs-util");const{RegistryType:u}=i.extend,c={ETH_SIGN_REQUEST:new u("eth-sign-request",401),ETH_SIGNATAURE:new u("eth-signature",402)},{decodeToDataItem:l,RegistryTypes:f}=i.extend;var h,d;!function(e){e[e.requestId=1]="requestId",e[e.signData=2]="signData",e[e.dataType=3]="dataType",e[e.chainId=4]="chainId",e[e.derivationPath=5]="derivationPath",e[e.address=6]="address",e[e.origin=7]="origin"}(h||(h={})),(d=r.DataType||(r.DataType={}))[d.transaction=1]="transaction",d[d.typedData=2]="typedData",d[d.personalMessage=3]="personalMessage",d[d.typedTransaction=4]="typedTransaction";class p extends i.RegistryItem{constructor(e){super(),this.getRegistryType=()=>c.ETH_SIGN_REQUEST,this.setupData=e=>{this.requestId=e.requestId,this.signData=e.signData,this.dataType=e.dataType,this.chainId=e.chainId,this.derivationPath=e.derivationPath,this.address=e.address,this.origin=e.origin},this.getRequestId=()=>this.requestId,this.getSignData=()=>this.signData,this.getDataType=()=>this.dataType,this.getChainId=()=>this.chainId,this.getDerivationPath=()=>this.derivationPath.getPath(),this.getSignRequestAddress=()=>this.address,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};this.requestId&&(e[h.requestId]=new i.DataItem(this.requestId,f.UUID.getTag())),this.address&&(e[h.address]=this.address),this.chainId&&(e[h.chainId]=this.chainId),this.origin&&(e[h.origin]=this.origin),e[h.signData]=this.signData,e[h.dataType]=this.dataType;const t=this.derivationPath.toDataItem();return t.setTag(this.derivationPath.getRegistryType().getTag()),e[h.derivationPath]=t,new i.DataItem(e)},this.setupData(e)}static constructETHRequest(e,r,n,o,a,u,c,l){const f=n.replace(/[m|M]\//,"").split("/"),h=new i.CryptoKeypath(f.map((e=>{const t=parseInt(e.replace("'",""));let r=!1;return e.endsWith("'")&&(r=!0),new i.PathComponent({index:t,hardened:r})})),t.from(o,"hex"));return new p({requestId:a?t.from(s.parse(a)):void 0,signData:e,dataType:r,derivationPath:h,chainId:u,address:c?t.from(c.replace("0x",""),"hex"):void 0,origin:l||void 0})}}p.fromDataItem=e=>{const t=e.getData(),r=t[h.signData],n=t[h.dataType],s=i.CryptoKeypath.fromDataItem(t[h.derivationPath]),o=t[h.chainId]?t[h.chainId]:void 0,a=t[h.address]?t[h.address]:void 0,u=t[h.requestId]?t[h.requestId].getData():void 0;return new p({requestId:u,signData:r,dataType:n,chainId:o,derivationPath:s,address:a,origin:t[h.origin]?t[h.origin]:void 0})},p.fromCBOR=e=>{const t=l(e);return p.fromDataItem(t)};const{RegistryTypes:m,decodeToDataItem:y}=i.extend;var g;!function(e){e[e.requestId=1]="requestId",e[e.signature=2]="signature"}(g||(g={}));class v extends i.RegistryItem{constructor(e,t){super(),this.getRegistryType=()=>c.ETH_SIGNATAURE,this.getRequestId=()=>this.requestId,this.getSignature=()=>this.signature,this.toDataItem=()=>{const e={};return this.requestId&&(e[g.requestId]=new i.DataItem(this.requestId,m.UUID.getTag())),e[g.signature]=this.signature,new i.DataItem(e)},this.signature=e,this.requestId=t}}v.fromDataItem=e=>{const t=e.getData(),r=t[g.signature],n=t[g.requestId]?t[g.requestId].getData():void 0;return new v(r,n)},v.fromCBOR=e=>{const t=y(e);return v.fromDataItem(t)};const b=(e,t)=>{const r=o.fromExtendedKey(e).derive(t),n="0x"+a.publicToAddress(r.publicKey,!0).toString("hex");return a.toChecksumAddress(n)},{cbor:_}=i.extend;_.patchTags(Object.values(c).filter((e=>!!e.getTag())).map((e=>e.getTag()))),Object.keys(i).forEach((function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return i[e]}})})),r.ETHSignature=v,r.EthSignRequest=p,r.findHDpatfromAddress=(e,t,r,n)=>{for(let i=0;i<r;i++){const r=b(t,"M/0/"+i);if(e.toLowerCase()==r.toLowerCase())return`${n}/0/${i}`}return null},r.generateAddressfromXpub=b}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/bc-ur-registry-eth",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@keystonehq/bc-ur-registry-eth/dist/bc-ur-registry-eth.cjs.production.min.js"}],[580,{"@keystonehq/bc-ur-registry":571,buffer:2105,"ethereumjs-util":2548,hdkey:4418,uuid:6074},function(){with(this)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0});var n,i=e("@keystonehq/bc-ur-registry"),s=e("uuid"),o=(n=e("hdkey"))&&"object"==typeof n&&"default"in n?n.default:n,a=e("ethereumjs-util");const{RegistryType:u}=i.extend,c={ETH_SIGN_REQUEST:new u("eth-sign-request",401),ETH_SIGNATAURE:new u("eth-signature",402)},{decodeToDataItem:l,RegistryTypes:f}=i.extend;var h,d;!function(e){e[e.requestId=1]="requestId",e[e.signData=2]="signData",e[e.dataType=3]="dataType",e[e.chainId=4]="chainId",e[e.derivationPath=5]="derivationPath",e[e.address=6]="address",e[e.origin=7]="origin"}(h||(h={})),(d=r.DataType||(r.DataType={}))[d.transaction=1]="transaction",d[d.typedData=2]="typedData",d[d.personalMessage=3]="personalMessage",d[d.typedTransaction=4]="typedTransaction";class p extends i.RegistryItem{constructor(e){super(),this.getRegistryType=()=>c.ETH_SIGN_REQUEST,this.setupData=e=>{this.requestId=e.requestId,this.signData=e.signData,this.dataType=e.dataType,this.chainId=e.chainId,this.derivationPath=e.derivationPath,this.address=e.address,this.origin=e.origin},this.getRequestId=()=>this.requestId,this.getSignData=()=>this.signData,this.getDataType=()=>this.dataType,this.getChainId=()=>this.chainId,this.getDerivationPath=()=>this.derivationPath.getPath(),this.getSignRequestAddress=()=>this.address,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};this.requestId&&(e[h.requestId]=new i.DataItem(this.requestId,f.UUID.getTag())),this.address&&(e[h.address]=this.address),this.chainId&&(e[h.chainId]=this.chainId),this.origin&&(e[h.origin]=this.origin),e[h.signData]=this.signData,e[h.dataType]=this.dataType;const t=this.derivationPath.toDataItem();return t.setTag(this.derivationPath.getRegistryType().getTag()),e[h.derivationPath]=t,new i.DataItem(e)},this.setupData(e)}static constructETHRequest(e,r,n,o,a,u,c,l){const f=n.replace(/[m|M]\//,"").split("/"),h=new i.CryptoKeypath(f.map((e=>{const t=parseInt(e.replace("'",""));let r=!1;return e.endsWith("'")&&(r=!0),new i.PathComponent({index:t,hardened:r})})),t.from(o,"hex"));return new p({requestId:a?t.from(s.parse(a)):undefined,signData:e,dataType:r,derivationPath:h,chainId:u,address:c?t.from(c.replace("0x",""),"hex"):undefined,origin:l||undefined})}}p.fromDataItem=e=>{const t=e.getData(),r=t[h.signData],n=t[h.dataType],s=i.CryptoKeypath.fromDataItem(t[h.derivationPath]),o=t[h.chainId]?t[h.chainId]:undefined,a=t[h.address]?t[h.address]:undefined,u=t[h.requestId]?t[h.requestId].getData():undefined,c=t[h.origin]?t[h.origin]:undefined;return new p({requestId:u,signData:r,dataType:n,chainId:o,derivationPath:s,address:a,origin:c})},p.fromCBOR=e=>{const t=l(e);return p.fromDataItem(t)};const{RegistryTypes:m,decodeToDataItem:y}=i.extend;var g;!function(e){e[e.requestId=1]="requestId",e[e.signature=2]="signature"}(g||(g={}));class v extends i.RegistryItem{constructor(e,t){super(),this.getRegistryType=()=>c.ETH_SIGNATAURE,this.getRequestId=()=>this.requestId,this.getSignature=()=>this.signature,this.toDataItem=()=>{const e={};return this.requestId&&(e[g.requestId]=new i.DataItem(this.requestId,m.UUID.getTag())),e[g.signature]=this.signature,new i.DataItem(e)},this.signature=e,this.requestId=t}}v.fromDataItem=e=>{const t=e.getData(),r=t[g.signature],n=t[g.requestId]?t[g.requestId].getData():undefined;return new v(r,n)},v.fromCBOR=e=>{const t=y(e);return v.fromDataItem(t)};const b=(e,t)=>{const r=o.fromExtendedKey(e).derive(t),n="0x"+a.publicToAddress(r.publicKey,!0).toString("hex");return a.toChecksumAddress(n)},{cbor:_}=i.extend;_.patchTags(Object.values(c).filter((e=>!!e.getTag())).map((e=>e.getTag()))),Object.keys(i).forEach((function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return i[e]}})})),r.ETHSignature=v,r.EthSignRequest=p,r.findHDpatfromAddress=(e,t,r,n)=>{for(let i=0;i<r;i++){const r=b(t,`M/0/${i}`);if(e.toLowerCase()==r.toLowerCase())return`${n}/0/${i}`}return null},r.generateAddressfromXpub=b}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/bc-ur-registry-eth",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@keystonehq/bc-ur-registry-eth/dist/bc-ur-registry-eth.cjs.development.js"}],[545,{"@ethereumjs/tx":548,"@keystonehq/bc-ur-registry-eth":553,buffer:2105,"ethereumjs-util":2548,hdkey:4418,uuid:6074},function(){with(this)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0});var n,i=(n=e("hdkey"))&&"object"==typeof n&&"default"in n?n.default:n,s=e("ethereumjs-util"),o=e("@ethereumjs/tx"),a=e("@keystonehq/bc-ur-registry-eth"),u=e("uuid");const c="QR Hardware Wallet Device",l="m",f="0/*";var h,d;!function(e){e.hd="hd",e.pubkey="pubkey"}(h||(h={})),function(e){e.standard="account.standard",e.ledger_live="account.ledger_live",e.ledger_legacy="account.ledger_legacy"}(d||(d={}));class p{constructor(e){this.version=1,this.getInteraction=()=>{throw new Error("KeystoneError#invalid_extends: method getInteraction not implemented, please extend BaseKeyring by overwriting this method.")},this.type=c,this.requestSignature=async(e,t,r,n)=>{const i=await this.getInteraction().requestSignature(t,r,n),s=i.getRequestId(),o=i.getSignature();if(s){if(u.stringify(s)!==e)throw new Error("KeystoneError#invalid_data: read signature error: mismatched requestId")}return{r:o.slice(0,32),s:o.slice(32,64),v:o.slice(64)}},this.__readCryptoHDKey=e=>{var t,r;const n=`m/${e.getOrigin().getPath()}`,i=null==(t=e.getOrigin().getSourceFingerprint())?void 0:t.toString("hex"),s=(null==(r=e.getChildren())?void 0:r.getPath())||f,o=e.getName();if(e.getNote()===d.standard?this.keyringAccount=d.standard:e.getNote()===d.ledger_legacy&&(this.keyringAccount=d.ledger_legacy),!i)throw new Error("KeystoneError#invalid_data: invalid crypto-hdkey, cannot get source fingerprint");const a=e.getBip32Key();this.xfp=i,this.xpub=a,this.hdPath=n,this.childrenPath=s,o!==undefined&&""!==o&&(this.name=o),this.initialized=!0},this.__readCryptoAccount=e=>{var t,r;const n=null==(t=e.getMasterFingerprint())?void 0:t.toString("hex");if(!n)throw new Error("KeystoneError#invalid_data: invalid crypto-account, cannot get master fingerprint");this.xfp=n,this.initialized=!0;let i=!1;const o=e.getOutputDescriptors();if(!o||0===o.length)throw new Error("KeystoneError#invalid_data: invalid crypto-account, no crypto output found");if(o.length%5!=0)throw new Error("KeystoneError#invalid_data: only support 5x pubkey accounts for now");return null==(r=e.getOutputDescriptors())||r.forEach((e=>{try{const t=e.getHDKey();if(t){const e=t.getKey(),r=`M/${t.getOrigin().getPath()}`,n="0x"+s.publicToAddress(e,!0).toString("hex");this.name=t.getName(),t.getNote()===d.ledger_live&&(this.keyringAccount=d.ledger_live),this.paths[s.toChecksumAddress(n)]===undefined&&(i=!0),this.paths[s.toChecksumAddress(n)]=r}}catch(e){throw new Error(`KeystoneError#invalid_data: ${e}`)}})),i},this.getName=()=>this.name,this.setAccountToUnlock=e=>{this.unlockedAccount=parseInt(e,10)},this.__getNormalPage=e=>(this.page+=e,this.page<=0&&(this.page=1),new Promise((async(e,t)=>{try{const t=(this.page-1)*this.perPage,r=t+this.perPage,n=[];for(let e=t;e<r;e++){const t=await this.__addressFromIndex(l,e);n.push({address:t,balance:null,index:e}),this.indexes[s.toChecksumAddress(t)]=e}e(n)}catch(e){t(e)}}))),this.__getLedgerLivePage=e=>{const t=this.page+e;return new Promise((async(r,n)=>{try{const n=(t-1)*this.perPage,i=n+this.perPage,s=[];for(let e=n;e<i;e++){const t=await this.__addressFromIndex(l,e);s.push({address:t,balance:null,index:e})}this.page+=e,r(s)}catch(e){n(e)}}))},this.__addressFromIndex=async(e,t)=>{if(this.keyringMode===h.hd){this.checkKeyring(),this.hdk||(this.hdk=i.fromExtendedKey(this.xpub));const r=this.childrenPath.replace("*",String(t)).replaceAll("*","0"),n=this.hdk.derive(`${e}/${r}`),o="0x"+s.publicToAddress(n.publicKey,!0).toString("hex");return s.toChecksumAddress(o)}{const e=Object.keys(this.paths)[t];if(e)return s.toChecksumAddress(e);throw new Error("KeystoneError#pubkey_account.no_expected_account")}},this.page=0,this.perPage=5,this.accounts=[],this.currentAccount=0,this.unlockedAccount=0,this.name="QR Hardware",this.keyringMode=h.hd,this.keyringAccount=d.standard,this.initialized=!1,this.xfp="",this.xpub="",this.hdPath="",this.childrenPath=f,this.indexes={},this.paths={},this.deserialize(e)}async readKeyring(){const e=await this.getInteraction().readCryptoHDKeyOrCryptoAccount();e.getRegistryType()===a.extend.RegistryTypes.CRYPTO_HDKEY?(this.keyringMode=h.hd,this.__readCryptoHDKey(e)):(this.keyringMode=h.pubkey,this.__readCryptoAccount(e))}checkKeyring(){if(!this.xfp||!this.xpub||!this.hdPath)throw new Error("KeystoneError#invalid_keyring: keyring not fulfilled, please call function `readKeyring` firstly")}serialize(){return Promise.resolve({initialized:this.initialized,accounts:this.accounts,currentAccount:this.currentAccount,page:this.page,perPage:this.perPage,keyringAccount:this.keyringAccount,keyringMode:this.keyringMode,name:this.name,version:this.version,xfp:this.xfp,xpub:this.xpub,hdPath:this.hdPath,childrenPath:this.childrenPath,indexes:this.indexes,paths:this.paths})}deserialize(e){e&&(this.accounts=e.accounts,this.currentAccount=e.currentAccount,this.page=e.page,this.perPage=e.perPage,this.name=e.name,this.initialized=e.initialized,this.keyringMode=e.keyringMode||h.hd,this.keyringAccount=e.keyringAccount||d.standard,this.xfp=e.xfp,this.xpub=e.xpub,this.hdPath=e.hdPath,this.indexes=e.indexes,this.paths=e.paths,this.childrenPath=e.childrenPath||f)}setCurrentAccount(e){this.currentAccount=e}getCurrentAccount(){return this.currentAccount}getCurrentAddress(){return this.accounts[this.currentAccount]}addAccounts(e=1){return new Promise((async(t,r)=>{try{const r=this.unlockedAccount,n=r+e,i=[];for(let e=r;e<n;e++){const t=await this.__addressFromIndex(l,e);i.push(t),this.page=0,this.unlockedAccount++}this.accounts=this.accounts.concat(i),t(this.accounts)}catch(e){r(e)}}))}getFirstPage(){return this.page=0,this.__getPage(1)}getNextPage(){return this.__getPage(1)}getPreviousPage(){return this.__getPage(-1)}async __getPage(e){return this.initialized||await this.readKeyring(),this.keyringMode===h.hd?this.__getNormalPage(e):this.__getLedgerLivePage(e)}getAccounts(){return Promise.resolve(this.accounts)}removeAccount(e){if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()))}static serializeTx(e){return e.v=new s.BN(e.common.chainId()),e.r=new s.BN(0),e.s=new s.BN(0),e.serialize()}async signTransaction(e,t){const r=await this._pathFromAddress(e),n=t.common.chainId(),i=u.v4(),s=a.EthSignRequest.constructETHRequest(p.serializeTx(t),a.DataType.transaction,r,this.xfp,i,n),{r:c,s:l,v:f}=await this.requestSignature(i,s,"Scan with your Keystone",'After your Keystone has signed the transaction, click on "Scan Keystone" to receive the signature'),h=t.toJSON();return o.Transaction.fromTxData({to:h.to,gasLimit:h.gasLimit,gasPrice:h.gasPrice,data:h.data,nonce:h.nonce,value:h.value,r:c,s:l,v:f},{common:t.common})}signMessage(e,t){return this.signPersonalMessage(e,t)}async signPersonalMessage(e,r){const n=s.stripHexPrefix(r),i=await this._pathFromAddress(e),o=u.v4(),c=a.EthSignRequest.constructETHRequest(t.from(n,"hex"),a.DataType.personalMessage,i,this.xfp,o,undefined,e),{r:l,s:f,v:h}=await this.requestSignature(o,c,"Scan with your Keystone",'After your Keystone has signed this message, click on "Scan Keystone" to receive the signature');return"0x"+t.concat([l,f,h]).toString("hex")}async signTypedData(e,r){const n=await this._pathFromAddress(e),i=u.v4(),s=a.EthSignRequest.constructETHRequest(t.from(JSON.stringify(r),"utf-8"),a.DataType.typedData,n,this.xfp,i,undefined,e),{r:o,s:c,v:l}=await this.requestSignature(i,s,"Scan with your Keystone",'After your Keystone has signed this data, click on "Scan Keystone" to receive the signature');return"0x"+t.concat([o,c,l]).toString("hex")}async _pathFromAddress(e){if(this.keyringMode===h.hd){const t=s.toChecksumAddress(e);let r=this.indexes[t];if(void 0===r)for(let e=0;e<1e3;e++)if(t===await this.__addressFromIndex(l,e)){r=e;break}if(void 0===r)throw new Error("Unknown address");return`${this.hdPath}/${this.childrenPath.replace("*",r.toString()).replaceAll("*","0")}`}{const t=s.toChecksumAddress(e),r=this.paths[t];if(void 0===r)throw new Error("Unknown address");return r}}}p.type=c,r.BaseKeyring=p}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/base-eth-keyring",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@keystonehq/base-eth-keyring/dist/base-eth-keyring.cjs.development.js"}],[546,{"@ethereumjs/tx":548,"@keystonehq/bc-ur-registry-eth":553,buffer:2105,"ethereumjs-util":2548,hdkey:4418,uuid:6074},function(){with(this)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0});var n,i,s,o=(n=e("hdkey"))&&"object"==typeof n&&"default"in n?n.default:n,a=e("ethereumjs-util"),u=e("@ethereumjs/tx"),c=e("@keystonehq/bc-ur-registry-eth"),l=e("uuid");!function(e){e.hd="hd",e.pubkey="pubkey"}(i||(i={})),function(e){e.standard="account.standard",e.ledger_live="account.ledger_live",e.ledger_legacy="account.ledger_legacy"}(s||(s={}));class f{constructor(e){this.version=1,this.getInteraction=()=>{throw new Error("KeystoneError#invalid_extends: method getInteraction not implemented, please extend BaseKeyring by overwriting this method.")},this.type="QR Hardware Wallet Device",this.requestSignature=async(e,t,r,n)=>{const i=await this.getInteraction().requestSignature(t,r,n),s=i.getRequestId(),o=i.getSignature();if(s&&l.stringify(s)!==e)throw new Error("KeystoneError#invalid_data: read signature error: mismatched requestId");return{r:o.slice(0,32),s:o.slice(32,64),v:o.slice(64)}},this.__readCryptoHDKey=e=>{var t,r;const n="m/"+e.getOrigin().getPath(),i=null==(t=e.getOrigin().getSourceFingerprint())?void 0:t.toString("hex"),o=(null==(r=e.getChildren())?void 0:r.getPath())||"0/*",a=e.getName();if(e.getNote()===s.standard?this.keyringAccount=s.standard:e.getNote()===s.ledger_legacy&&(this.keyringAccount=s.ledger_legacy),!i)throw new Error("KeystoneError#invalid_data: invalid crypto-hdkey, cannot get source fingerprint");const u=e.getBip32Key();this.xfp=i,this.xpub=u,this.hdPath=n,this.childrenPath=o,void 0!==a&&""!==a&&(this.name=a),this.initialized=!0},this.__readCryptoAccount=e=>{var t,r;const n=null==(t=e.getMasterFingerprint())?void 0:t.toString("hex");if(!n)throw new Error("KeystoneError#invalid_data: invalid crypto-account, cannot get master fingerprint");this.xfp=n,this.initialized=!0;let i=!1;const o=e.getOutputDescriptors();if(!o||0===o.length)throw new Error("KeystoneError#invalid_data: invalid crypto-account, no crypto output found");if(o.length%5!=0)throw new Error("KeystoneError#invalid_data: only support 5x pubkey accounts for now");return null==(r=e.getOutputDescriptors())||r.forEach((e=>{try{const t=e.getHDKey();if(t){const e=t.getKey(),r="M/"+t.getOrigin().getPath(),n="0x"+a.publicToAddress(e,!0).toString("hex");this.name=t.getName(),t.getNote()===s.ledger_live&&(this.keyringAccount=s.ledger_live),void 0===this.paths[a.toChecksumAddress(n)]&&(i=!0),this.paths[a.toChecksumAddress(n)]=r}}catch(e){throw new Error("KeystoneError#invalid_data: "+e)}})),i},this.getName=()=>this.name,this.setAccountToUnlock=e=>{this.unlockedAccount=parseInt(e,10)},this.__getNormalPage=e=>(this.page+=e,this.page<=0&&(this.page=1),new Promise((async(e,t)=>{try{const t=(this.page-1)*this.perPage,r=t+this.perPage,n=[];for(let e=t;e<r;e++){const t=await this.__addressFromIndex("m",e);n.push({address:t,balance:null,index:e}),this.indexes[a.toChecksumAddress(t)]=e}e(n)}catch(e){t(e)}}))),this.__getLedgerLivePage=e=>{const t=this.page+e;return new Promise((async(r,n)=>{try{const n=(t-1)*this.perPage,i=n+this.perPage,s=[];for(let e=n;e<i;e++){const t=await this.__addressFromIndex("m",e);s.push({address:t,balance:null,index:e})}this.page+=e,r(s)}catch(e){n(e)}}))},this.__addressFromIndex=async(e,t)=>{if(this.keyringMode===i.hd){this.checkKeyring(),this.hdk||(this.hdk=o.fromExtendedKey(this.xpub));const r=this.childrenPath.replace("*",String(t)).replaceAll("*","0"),n=this.hdk.derive(`${e}/${r}`),i="0x"+a.publicToAddress(n.publicKey,!0).toString("hex");return a.toChecksumAddress(i)}{const e=Object.keys(this.paths)[t];if(e)return a.toChecksumAddress(e);throw new Error("KeystoneError#pubkey_account.no_expected_account")}},this.page=0,this.perPage=5,this.accounts=[],this.currentAccount=0,this.unlockedAccount=0,this.name="QR Hardware",this.keyringMode=i.hd,this.keyringAccount=s.standard,this.initialized=!1,this.xfp="",this.xpub="",this.hdPath="",this.childrenPath="0/*",this.indexes={},this.paths={},this.deserialize(e)}async readKeyring(){const e=await this.getInteraction().readCryptoHDKeyOrCryptoAccount();e.getRegistryType()===c.extend.RegistryTypes.CRYPTO_HDKEY?(this.keyringMode=i.hd,this.__readCryptoHDKey(e)):(this.keyringMode=i.pubkey,this.__readCryptoAccount(e))}checkKeyring(){if(!this.xfp||!this.xpub||!this.hdPath)throw new Error("KeystoneError#invalid_keyring: keyring not fulfilled, please call function `readKeyring` firstly")}serialize(){return Promise.resolve({initialized:this.initialized,accounts:this.accounts,currentAccount:this.currentAccount,page:this.page,perPage:this.perPage,keyringAccount:this.keyringAccount,keyringMode:this.keyringMode,name:this.name,version:this.version,xfp:this.xfp,xpub:this.xpub,hdPath:this.hdPath,childrenPath:this.childrenPath,indexes:this.indexes,paths:this.paths})}deserialize(e){e&&(this.accounts=e.accounts,this.currentAccount=e.currentAccount,this.page=e.page,this.perPage=e.perPage,this.name=e.name,this.initialized=e.initialized,this.keyringMode=e.keyringMode||i.hd,this.keyringAccount=e.keyringAccount||s.standard,this.xfp=e.xfp,this.xpub=e.xpub,this.hdPath=e.hdPath,this.indexes=e.indexes,this.paths=e.paths,this.childrenPath=e.childrenPath||"0/*")}setCurrentAccount(e){this.currentAccount=e}getCurrentAccount(){return this.currentAccount}getCurrentAddress(){return this.accounts[this.currentAccount]}addAccounts(e=1){return new Promise((async(t,r)=>{try{const r=this.unlockedAccount,n=r+e,i=[];for(let e=r;e<n;e++){const t=await this.__addressFromIndex("m",e);i.push(t),this.page=0,this.unlockedAccount++}this.accounts=this.accounts.concat(i),t(this.accounts)}catch(e){r(e)}}))}getFirstPage(){return this.page=0,this.__getPage(1)}getNextPage(){return this.__getPage(1)}getPreviousPage(){return this.__getPage(-1)}async __getPage(e){return this.initialized||await this.readKeyring(),this.keyringMode===i.hd?this.__getNormalPage(e):this.__getLedgerLivePage(e)}getAccounts(){return Promise.resolve(this.accounts)}removeAccount(e){if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()))}static serializeTx(e){return e.v=new a.BN(e.common.chainId()),e.r=new a.BN(0),e.s=new a.BN(0),e.serialize()}async signTransaction(e,t){const r=await this._pathFromAddress(e),n=t.common.chainId(),i=l.v4(),s=c.EthSignRequest.constructETHRequest(f.serializeTx(t),c.DataType.transaction,r,this.xfp,i,n),{r:o,s:a,v:h}=await this.requestSignature(i,s,"Scan with your Keystone",'After your Keystone has signed the transaction, click on "Scan Keystone" to receive the signature'),d=t.toJSON();return u.Transaction.fromTxData({to:d.to,gasLimit:d.gasLimit,gasPrice:d.gasPrice,data:d.data,nonce:d.nonce,value:d.value,r:o,s:a,v:h},{common:t.common})}signMessage(e,t){return this.signPersonalMessage(e,t)}async signPersonalMessage(e,r){const n=a.stripHexPrefix(r),i=await this._pathFromAddress(e),s=l.v4(),o=c.EthSignRequest.constructETHRequest(t.from(n,"hex"),c.DataType.personalMessage,i,this.xfp,s,void 0,e),{r:u,s:f,v:h}=await this.requestSignature(s,o,"Scan with your Keystone",'After your Keystone has signed this message, click on "Scan Keystone" to receive the signature');return"0x"+t.concat([u,f,h]).toString("hex")}async signTypedData(e,r){const n=await this._pathFromAddress(e),i=l.v4(),s=c.EthSignRequest.constructETHRequest(t.from(JSON.stringify(r),"utf-8"),c.DataType.typedData,n,this.xfp,i,void 0,e),{r:o,s:a,v:u}=await this.requestSignature(i,s,"Scan with your Keystone",'After your Keystone has signed this data, click on "Scan Keystone" to receive the signature');return"0x"+t.concat([o,a,u]).toString("hex")}async _pathFromAddress(e){if(this.keyringMode===i.hd){const t=a.toChecksumAddress(e);let r=this.indexes[t];if(void 0===r)for(let e=0;e<1e3;e++)if(t===await this.__addressFromIndex("m",e)){r=e;break}if(void 0===r)throw new Error("Unknown address");return`${this.hdPath}/${this.childrenPath.replace("*",r.toString()).replaceAll("*","0")}`}{const t=a.toChecksumAddress(e),r=this.paths[t];if(void 0===r)throw new Error("Unknown address");return r}}}f.type="QR Hardware Wallet Device",r.BaseKeyring=f}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/base-eth-keyring",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@keystonehq/base-eth-keyring/dist/base-eth-keyring.cjs.production.min.js"}],[586,{stream:2108},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.storeAsStream=void 0;const n=e("stream");class i extends n.Duplex{constructor(e){super({objectMode:!0}),this.resume(),this.handler=e=>this.push(e),this.obsStore=e,this.obsStore.subscribe(this.handler)}pipe(e,t){const r=super.pipe(e,t);return e.write(this.obsStore.getState()),r}_write(e,t,r){this.obsStore.putState(e),r()}_read(e){return undefined}_destroy(e,t){this.obsStore.unsubscribe(this.handler),super._destroy(e,t)}}r.storeAsStream=function(e){return new i(e)}}}},{package:"@metamask/obs-store",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/obs-store/dist/asStream.js"}],[583,{"./ObservableStore":585},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ComposedStore=void 0;const n=e("./ObservableStore");class i extends n.ObservableStore{constructor(e){super({}),this._children=e||{},Object.keys(this._children).forEach((e=>{const t=this._children[e];this._addChild(e,t)}))}_addChild(e,t){const r=t=>{const r=this.getState();r[e]=t,this.putState(r)};t.subscribe(r),r(t.getState())}}r.ComposedStore=i}}},{package:"@metamask/obs-store",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/obs-store/dist/ComposedStore.js"}],[584,{"./ObservableStore":585},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MergedStore=void 0;const n=e("./ObservableStore");class i extends n.ObservableStore{constructor(e=[]){super({}),this._children=e,e.forEach((e=>this._addChild(e))),this._updateWholeState()}_addChild(e){e.subscribe((()=>this._updateWholeState()))}_updateWholeState(){const e=this._children.map((e=>e.getState())),t=Object.assign({},...e);this.putState(t)}}r.MergedStore=i}}},{package:"@metamask/obs-store",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/obs-store/dist/MergedStore.js"}],[588,{through2:589},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.storeTransformStream=void 0;const n=e("through2");r.storeTransformStream=function(e){return n.obj(((t,r,n)=>{try{return n(null,e(t)),undefined}catch(e){return n(e),undefined}}))}}}},{package:"@metamask/obs-store",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/obs-store/dist/transform.js"}],[585,{"@metamask/safe-event-emitter":1326},function(){with(this)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.ObservableStore=void 0;const i=n(e("@metamask/safe-event-emitter"));class s extends i.default{constructor(e){super(),this._state=e||{}}getState(){return this._getState()}putState(e){this._putState(e),this.emit("update",e)}updateState(e){if(e&&"object"==typeof e){const t=this.getState();this.putState(Object.assign(Object.assign({},t),e))}else this.putState(e)}subscribe(e){this.on("update",e)}unsubscribe(e){this.removeListener("update",e)}_getState(){return this._state}_putState(e){this._state=e}}r.ObservableStore=s}}},{package:"@metamask/obs-store",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/obs-store/dist/ObservableStore.js"}],[24,{"../../../../shared/constants/network":6254,"../../../../shared/constants/transaction":6258},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.formatTxMetaForRpcResult=function(e){const{r:t,s:r,v:n,hash:s,txReceipt:o,txParams:a}=e,{to:u,data:c,nonce:l,gas:f,from:h,value:d,gasPrice:p,accessList:m,maxFeePerGas:y,maxPriorityFeePerGas:g}=a,v={v:n,r:t,s:r,to:u,gas:f,from:h,hash:s,nonce:l,input:c||"0x",value:d||"0x0",accessList:m||null,blockHash:(null==o?void 0:o.blockHash)||null,blockNumber:(null==o?void 0:o.blockNumber)||null,transactionIndex:(null==o?void 0:o.transactionIndex)||null};y&&g?(v.gasPrice=y,v.maxFeePerGas=y,v.maxPriorityFeePerGas=g,v.type=i.TRANSACTION_ENVELOPE_TYPES.FEE_MARKET):(v.gasPrice=p,v.type=i.TRANSACTION_ENVELOPE_TYPES.LEGACY);return v},r.getNetworkDisplayName=void 0;var n=e("../../../../shared/constants/network"),i=e("../../../../shared/constants/transaction");r.getNetworkDisplayName=e=>n.NETWORK_TO_NAME_MAP[e]}}},{package:"<root>",file:"/Users/mac/code/a-mises/metamask-extension/app/scripts/controllers/network/util.js"}],[5929,{"./util":5930},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./util"),i=n.slice,s=n.pluck,o=n.each,a=n.bind,u=n.create,c=n.isList,l=n.isFunction,f=n.isObject;t.exports={createStore:d};var h={version:"2.0.12",enabled:!1,get:function(e,t){var r=this.storage.read(this._namespacePrefix+e);return this._deserialize(r,t)},set:function(e,t){return t===undefined?this.remove(e):(this.storage.write(this._namespacePrefix+e,this._serialize(t)),t)},remove:function(e){this.storage.remove(this._namespacePrefix+e)},each:function(e){var t=this;this.storage.each((function(r,n){e.call(t,t._deserialize(r),(n||"").replace(t._namespaceRegexp,""))}))},clearAll:function(){this.storage.clearAll()},hasNamespace:function(e){return this._namespacePrefix=="__storejs_"+e+"_"},createStore:function(){return d.apply(this,arguments)},addPlugin:function(e){this._addPlugin(e)},namespace:function(e){return d(this.storage,this.plugins,e)}};function d(e,t,r){r||(r=""),e&&!c(e)&&(e=[e]),t&&!c(t)&&(t=[t]);var n=r?"__storejs_"+r+"_":"",d=r?new RegExp("^"+n):null;if(!/^[a-zA-Z0-9_\-]*$/.test(r))throw new Error("store.js namespaces can only have alphanumerics + underscores and dashes");var p={_namespacePrefix:n,_namespaceRegexp:d,_testStorage:function(e){try{var t="__storejs__test__";e.write(t,t);var r=e.read(t)===t;return e.remove(t),r}catch(e){return!1}},_assignPluginFnProp:function(e,t){var r=this[t];this[t]=function(){var t=i(arguments,0),n=this;function s(){if(r)return o(arguments,(function(e,r){t[r]=e})),r.apply(n,t)}var a=[s].concat(t);return e.apply(n,a)}},_serialize:function(e){return JSON.stringify(e)},_deserialize:function(e,t){if(!e)return t;var r="";try{r=JSON.parse(e)}catch(t){r=e}return r!==undefined?r:t},_addStorage:function(e){this.enabled||this._testStorage(e)&&(this.storage=e,this.enabled=!0)},_addPlugin:function(e){var t=this;if(c(e))o(e,(function(e){t._addPlugin(e)}));else if(!s(this.plugins,(function(t){return e===t}))){if(this.plugins.push(e),!l(e))throw new Error("Plugins must be function values that return objects");var r=e.call(this);if(!f(r))throw new Error("Plugins must return an object of function properties");o(r,(function(r,n){if(!l(r))throw new Error("Bad plugin property: "+n+" from plugin "+e.name+". Plugins should only return functions.");t._assignPluginFnProp(r,n)}))}},addStorage:function(e){!function(){var e="undefined"==typeof console?null:console;if(e){(e.warn?e.warn:e.log).apply(e,arguments)}}("store.addStorage(storage) is deprecated. Use createStore([storages])"),this._addStorage(e)}},m=u(p,h,{plugins:[]});return m.raw={},o(m,(function(e,t){l(e)&&(m.raw[t]=a(m,e))})),o(e,(function(e){m._addStorage(e)})),o(t,(function(e){m._addPlugin(e)})),m}}}},{package:"store",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/store/src/store-engine.js"}],[5927,{"./lib/json2":5928},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(){return e("./lib/json2"),{}}}}},{package:"store",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/store/plugins/json2.js"}],[5931,{"./cookieStorage":5932,"./localStorage":5933,"./memoryStorage":5934,"./oldFF-globalStorage":5935,"./oldIE-userDataStorage":5936,"./sessionStorage":5937},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=[e("./localStorage"),e("./oldFF-globalStorage"),e("./oldIE-userDataStorage"),e("./cookieStorage"),e("./sessionStorage"),e("./memoryStorage")]}}},{package:"store",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/store/storages/all.js"}],[172,{"./config":171,"./utils/index":178,"@babel/runtime/helpers/asyncToGenerator":190,"@babel/runtime/helpers/classCallCheck":191,"@babel/runtime/helpers/createClass":193,"@babel/runtime/helpers/defineProperty":194,"@babel/runtime/helpers/interopRequireDefault":200,"@babel/runtime/regenerator":220},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/regenerator")),s=n(e("@babel/runtime/helpers/defineProperty")),o=n(e("@babel/runtime/helpers/asyncToGenerator")),a=n(e("@babel/runtime/helpers/classCallCheck")),u=n(e("@babel/runtime/helpers/createClass"));function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(r,!0).forEach((function(t){(0,s.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f=e("./utils/index"),h=f.throwIfUndefined,d=f.throwIfNotEqualLenArrays,p=e("./config").orbitdb_options,m=function(){function e(t,r,n,i){(0,a.default)(this,e),this._orbitdb=t,this._name=r,this._name.startsWith("3box.space.")&&(this._space=this._name.split(".")[2]),this._ensureConnected=n,this._3id=i}var t,r,n,s,c,f,m,y,g,v;return(0,u.default)(e,[{key:"get",value:(v=(0,o.default)(i.default.mark((function e(t){var r,n,s,o=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&o[1]!==undefined?o[1]:{},e.next=3,this._get(t);case 3:if(n=e.sent){e.next=6;break}return e.abrupt("return",n);case 6:if(!r.metadata){e.next=9;break}return s=this._extractMetadata(n),e.abrupt("return",l({},s,{value:n.value}));case 9:return e.abrupt("return",n.value);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:"getMetadata",value:(g=(0,o.default)(i.default.mark((function e(t){var r;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._get(t);case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return",r);case 5:return e.abrupt("return",this._extractMetadata(r));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return g.apply(this,arguments)})},{key:"set",value:(y=(0,o.default)(i.default.mark((function e(t,r){var n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(t,"key"),this._requireLoad(),this._ensureConnected(),n=(new Date).getTime(),e.next=6,this._db.put(t,{value:r,timeStamp:n});case 6:return e.abrupt("return",!0);case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return y.apply(this,arguments)})},{key:"setMultiple",value:(m=(0,o.default)(i.default.mark((function e(t,r){var n=this;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(t,r),this._requireLoad(),this._ensureConnected(),e.prev=3,e.next=6,t.reduce(function(){var e=(0,o.default)(i.default.mark((function e(t,s,o){var a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return h(s,"key"),a=(new Date).getTime(),e.abrupt("return",n._db.put(s,{value:r[o],timeStamp:a}));case 5:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),Promise.resolve());case 6:return e.abrupt("return",!0);case 9:throw e.prev=9,e.t0=e.catch(3),new Error(e.t0);case 12:case"end":return e.stop()}}),e,this,[[3,9]])}))),function(e,t){return m.apply(this,arguments)})},{key:"remove",value:(f=(0,o.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(t,"key"),this._requireLoad(),this._ensureConnected(),e.next=5,this._db.del(t);case 5:return e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"_extractMetadata",value:function(e){return{timestamp:Math.floor(e.timeStamp/1e3)}}},{key:"_get",value:(c=(0,o.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._requireLoad(),e.abrupt("return",this._db.get(t));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"_sync",value:(s=(0,o.default)(i.default.mark((function e(t){var r=this;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._requireLoad(),!(null!==t&&t!==undefined&&t<=this._db._oplog.values.length)){e.next=4;break}return e.abrupt("return",Promise.resolve());case 4:return e.next=6,new Promise((function(e,n){t||setTimeout((function(){r._db.events.removeAllListeners("replicated"),r._db.events.removeAllListeners("replicate.progress"),e()}),3e3),r._db.events.on("replicated",(function(){t<=r._db._oplog.values.length&&e()}))}));case 6:return e.abrupt("return",this._db.address.toString());case 7:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"_load",value:(n=(0,o.default)(i.default.mark((function e(t){var r,n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this._3id.getKeyringBySpaceName(this._name).getPublicKeys(!0).signingKey,n=l({},p,{format:"dag-pb",accessController:{write:[r],type:"legacy-ipfs-3box",skipManifest:!0}}),!this._space){e.next=6;break}return e.next=5,this._3id.getOdbId(this._space);case 5:n.identity=e.sent;case 6:return e.next=8,this._orbitdb.keyvalue(t||this._name,n);case 8:return this._db=e.sent,e.next=11,this._db.load();case 11:return e.abrupt("return",this._db.address.toString());case 12:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_requireLoad",value:function(){if(!this._db)throw new Error("_load must be called before interacting with the store")}},{key:"close",value:(r=(0,o.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._requireLoad(),e.next=3,this._db.close();case 3:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"all",value:(t=(0,o.default)(i.default.mark((function e(){var t,r,n,s=this,o=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&o[0]!==undefined?o[0]:{},this._requireLoad(),r=this._db.all,n={},Object.keys(r).map((function(e){var i=r[e];t.metadata?n[e]=l({},s._extractMetadata(i),{value:i.value}):n[e]=i.value})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"log",get:function(){return this._db._oplog.values.map((function(e){return{op:e.payload.op,key:e.payload.key,value:e.payload.value?e.payload.value.value:null,timeStamp:e.payload.value?e.payload.value.timeStamp:null}}))}}]),e}();t.exports=m}}},{package:"3box",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/3box/lib/keyValueStore.js"}],[196,{"./superPropBase.js":214},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./superPropBase.js");function i(){return"undefined"!=typeof Reflect&&Reflect.get?(t.exports=i=Reflect.get,t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=i=function(e,t,r){var i=n(e,t);if(i){var s=Object.getOwnPropertyDescriptor(i,t);return s.get?s.get.call(arguments.length<3?e:r):s.value}},t.exports.default=t.exports,t.exports.__esModule=!0),i.apply(this,arguments)}t.exports=i,t.exports.default=t.exports,t.exports.__esModule=!0}}},{package:"@babel/runtime",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/@babel/runtime/helpers/get.js"}],[5409,{cids:2146,multihashes:5282,path:5456},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("path"),i=(e("multihashes"),e("cids")),s=e=>""!==e&&" "!==e;class o{constructor(e,t){this.root=e,this.path=t}toString(){return n.join("/orbitdb",this.root,this.path)}static isValid(e){const t=e.toString().split("/").filter(((t,r)=>!((0===r||1===r)&&0===e.toString().indexOf("/orbit")&&"orbitdb"===t))).filter(s);let r;try{r=t[0].indexOf("zd")>-1||t[0].indexOf("Qm")>-1?new i(t[0]).toBaseEncodedString():null}catch(e){return!1}return null!==r}static parse(e){if(!e)throw new Error(`Not a valid OrbitDB address: ${e}`);if(!o.isValid(e))throw new Error(`Not a valid OrbitDB address: ${e}`);const t=e.toString().split("/").filter(((t,r)=>!((0===r||1===r)&&0===e.toString().indexOf("/orbit")&&"orbitdb"===t))).filter((e=>""!==e&&" "!==e));return new o(t[0],t.slice(1,t.length).join("/"))}}t.exports=o}}},{package:"orbit-db",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/orbit-db/src/orbit-db-address.js"}],[176,{"./api":170,"./config":171,"@babel/runtime/helpers/asyncToGenerator":190,"@babel/runtime/helpers/classCallCheck":191,"@babel/runtime/helpers/createClass":193,"@babel/runtime/helpers/defineProperty":194,"@babel/runtime/helpers/interopRequireDefault":200,"@babel/runtime/regenerator":220,"is-ipfs":4742},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/defineProperty")),s=n(e("@babel/runtime/regenerator")),o=n(e("@babel/runtime/helpers/asyncToGenerator")),a=n(e("@babel/runtime/helpers/classCallCheck")),u=n(e("@babel/runtime/helpers/createClass"));function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(r,!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f=e("is-ipfs"),h=e("./api"),d=e("./config").orbitdb_options,p=function(e){var t=e.split(":");return"did"!==!t[0]&&"3"!==!t[1]&&f.cid(t[2])},m=function(){function e(t,r,n,i,s,o,u){(0,a.default)(this,e),this._orbitdb=t,this._name=r,this._spaceName=r.split(".")[2],this._3id=n,this._subscribe=o,this._ensureConnected=u,this._queuedNewPosts=[],this._members=Boolean(i),this._firstModerator=s||this._3id.getSubDID(this._spaceName)}var t,r,n,i,c,f,m,y,g,v,b,_,w;return(0,u.default)(e,[{key:"post",value:(w=(0,o.default)(s.default.mark((function e(t){var r;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._requireLoad(),this._subscribe(this._address,{firstModerator:this._firstModerator,members:this._members,name:this._name}),this._ensureConnected(this._address,!0),r=Math.floor((new Date).getTime()/1e3),e.abrupt("return",this._db.add({message:t,timestamp:r}));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return w.apply(this,arguments)})},{key:"_getThreadAddress",value:(_=(0,o.default)(s.default.mark((function e(){var t;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._initConfigs();case 2:return e.next=4,this._orbitdb._determineAddress(this._name,"feed",{accessController:this._accessController},!1);case 4:return t=e.sent.toString(),this._address=t,e.abrupt("return",this._address);case 7:case"end":return e.stop()}}),e,this)}))),function(){return _.apply(this,arguments)})},{key:"addModerator",value:(b=(0,o.default)(s.default.mark((function e(t){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._requireLoad(),!t.startsWith("0x")){e.next=5;break}return e.next=4,h.getSpaceDID(t,this._spaceName);case 4:t=e.sent;case 5:if(p(t)){e.next=7;break}throw new Error("addModerator: must provide valid 3ID");case 7:return e.abrupt("return",this._db.access.grant("MODERATOR",t));case 8:case"end":return e.stop()}}),e,this)}))),function(e){return b.apply(this,arguments)})},{key:"listModerators",value:(v=(0,o.default)(s.default.mark((function e(){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._requireLoad(),e.abrupt("return",this._db.access.capabilities.moderators);case 2:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"addMember",value:(g=(0,o.default)(s.default.mark((function e(t){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._requireLoad(),this._throwIfNotMembers(),!t.startsWith("0x")){e.next=6;break}return e.next=5,h.getSpaceDID(t,this._spaceName);case 5:t=e.sent;case 6:if(p(t)){e.next=8;break}throw new Error("addModerator: must provide valid 3ID");case 8:return this._throwIfNotMembers(),e.abrupt("return",this._db.access.grant("MEMBER",t));case 10:case"end":return e.stop()}}),e,this)}))),function(e){return g.apply(this,arguments)})},{key:"listMembers",value:(y=(0,o.default)(s.default.mark((function e(){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._throwIfNotMembers(),this._requireLoad(),e.abrupt("return",this._db.access.capabilities.members);case 3:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)})},{key:"_throwIfNotMembers",value:function(){if(!this._members)throw new Error("Thread: Not a members only thread, function not available")}},{key:"deletePost",value:(m=(0,o.default)(s.default.mark((function e(t){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._requireLoad(),e.abrupt("return",this._db.remove(t));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"getPosts",value:(f=(0,o.default)(s.default.mark((function e(){var t,r=arguments;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&r[0]!==undefined?r[0]:{},this._requireLoad(),t.limit||(t.limit=-1),e.abrupt("return",this._db.iterator(t).collect().map((function(e){var t=e.payload.value,r={postId:e.hash,author:e.identity.id};return Object.assign(r,t)})));case 4:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"onUpdate",value:(c=(0,o.default)(s.default.mark((function e(t){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._requireLoad(),this._db.events.on("replicated",(function(e,r,n,i,s){t()})),this._db.events.on("write",(function(e,r){t()}));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"onNewCapabilities",value:(i=(0,o.default)(s.default.mark((function e(t){var r=this;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._db.access.on("updated",(function(e){t(r._db.access.capabilities)}));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"_load",value:(n=(0,o.default)(s.default.mark((function e(t){var r;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._initConfigs();case 2:return r=this._identity,e.next=5,this._orbitdb.feed(t||this._name,l({},d,{identity:r,accessController:this._accessController}));case 5:return this._db=e.sent,e.next=8,this._db.load();case 8:return this._address=this._db.address.toString(),this._ensureConnected(this._address,!0),e.abrupt("return",this._address);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_requireLoad",value:function(){if(!this._db)throw new Error("_load must be called before interacting with the store")}},{key:"close",value:(r=(0,o.default)(s.default.mark((function e(){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._requireLoad(),e.next=3,this._db.close();case 3:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"_initConfigs",value:(t=(0,o.default)(s.default.mark((function e(){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._identity){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this._3id.getOdbId(this._spaceName);case 4:if(this._identity=e.sent,!this._firstModerator.startsWith("0x")){e.next=9;break}return e.next=8,h.getSpaceDID(this._firstModerator,this._spaceName);case 8:this._firstModerator=e.sent;case 9:this._accessController={type:"thread-access",threadName:this._name,members:this._members,firstModerator:this._firstModerator,identity:this._identity};case 10:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"address",get:function(){return this._db?this._address:null}}]),e}();t.exports=m}}},{package:"3box",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/3box/lib/thread.js"}],[179,{"./index":178,"@babel/runtime/helpers/asyncToGenerator":190,"@babel/runtime/helpers/interopRequireDefault":200,"@babel/runtime/regenerator":220,"did-jwt":181,ethers:183,"https-did-resolver":4426,"muport-did-resolver":5299},function(){with(this)return function(){"use strict";return function(e,t,r){var n,i,s,o,a,u=e("@babel/runtime/helpers/interopRequireDefault"),c=u(e("@babel/runtime/regenerator")),l=u(e("@babel/runtime/helpers/asyncToGenerator")),f=e("./index"),h=f.fetchText,d=f.getMessageConsent,p=e("did-jwt"),m=e("ethers");e("https-did-resolver").default(),e("muport-did-resolver")(),t.exports={verifyGithub:(a=(0,l.default)(c.default.mark((function e(t,r){var n;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r&&""!==r.trim()){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,h(r);case 4:if(-1!==e.sent.indexOf(t)){e.next=7;break}throw new Error("Gist File provided does not contain the correct DID of the user");case 7:return n=r.split("/")[3],e.abrupt("return",{username:n,proof:r});case 9:case"end":return e.stop()}}),e)}))),function(e,t){return a.apply(this,arguments)}),verifyTwitter:(o=(0,l.default)(c.default.mark((function e(t,r){var n,i;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,p.verifyJWT(r);case 4:if((n=e.sent).payload.sub===t){e.next=7;break}throw new Error("Verification not valid for given user");case 7:if((i=n.payload.claim).twitter_handle&&i.twitter_proof){e.next=10;break}throw new Error("The claim for your twitter is not correct");case 10:return e.abrupt("return",{username:i.twitter_handle,proof:i.twitter_proof,verifiedBy:n.payload.iss});case 11:case"end":return e.stop()}}),e)}))),function(e,t){return o.apply(this,arguments)}),verifyEmail:(s=(0,l.default)(c.default.mark((function e(t,r){var n,i;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,p.verifyJWT(r);case 4:if((n=e.sent).payload.sub===t){e.next=7;break}throw new Error("Verification not valid for given user");case 7:if((i=n.payload.claim).email_address){e.next=10;break}throw new Error("The claim for your email address is not correct");case 10:return e.abrupt("return",{email_address:i.email_address,verifiedBy:n.payload.iss});case 11:case"end":return e.stop()}}),e)}))),function(e,t){return s.apply(this,arguments)}),verifyDID:(i=(0,l.default)(c.default.mark((function e(t){var r;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.verifyJWT(t);case 2:return r=e.sent,e.abrupt("return",r.payload.iss);case 4:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)}),verifyEthereum:(n=(0,l.default)(c.default.mark((function e(t,r){var n,i,s;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.version?t.message:t.consent_msg,i=t.version?t.signature:t.consent_signature,s=d(r),n===s){e.next=5;break}throw new Error('Invalid consent message, got: "'.concat(n,'", expected: "').concat(s,'"'));case 5:return e.abrupt("return",m.utils.verifyMessage(n,i));case 6:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)})}}}},{package:"3box",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/3box/lib/utils/verifier.js"}],[4345,{"./types":4346,"cross-fetch/polyfill":4347},function(){with(this)return function(){"use strict";return function(e,t,r){var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(o,a)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=n[2&s[0]?"return":s[0]?"throw":"next"])&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[0,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},o=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&(r[n[i]]=e[n[i]])}return r};Object.defineProperty(r,"__esModule",{value:!0});var a=e("./types"),u=e("./types");r.ClientError=u.ClientError,e("cross-fetch/polyfill");var c=function(){function e(e,t){this.url=e,this.options=t||{}}return e.prototype.rawRequest=function(e,t){return i(this,void 0,void 0,(function(){var r,i,u,c,l,h,d,p,m;return s(this,(function(s){switch(s.label){case 0:return r=this.options,i=r.headers,u=o(r,["headers"]),c=JSON.stringify({query:e,variables:t||undefined}),[4,fetch(this.url,n({method:"POST",headers:Object.assign({"Content-Type":"application/json"},i),body:c},u))];case 1:return[4,f(l=s.sent())];case 2:if(h=s.sent(),l.ok&&!h.errors&&h.data)return d=l.headers,p=l.status,[2,n({},h,{headers:d,status:p})];throw m="string"==typeof h?{error:h}:h,new a.ClientError(n({},m,{status:l.status,headers:l.headers}),{query:e,variables:t})}}))}))},e.prototype.request=function(e,t){return i(this,void 0,void 0,(function(){var r,i,u,c,l,h,d;return s(this,(function(s){switch(s.label){case 0:return r=this.options,i=r.headers,u=o(r,["headers"]),c=JSON.stringify({query:e,variables:t||undefined}),[4,fetch(this.url,n({method:"POST",headers:Object.assign({"Content-Type":"application/json"},i),body:c},u))];case 1:return[4,f(l=s.sent())];case 2:if(h=s.sent(),l.ok&&!h.errors&&h.data)return[2,h.data];throw d="string"==typeof h?{error:h}:h,new a.ClientError(n({},d,{status:l.status}),{query:e,variables:t})}}))}))},e.prototype.setHeaders=function(e){return this.options.headers=e,this},e.prototype.setHeader=function(e,t){var r,n=this.options.headers;return n?n[e]=t:this.options.headers=((r={})[e]=t,r),this},e}();function l(e,t,r){return i(this,void 0,void 0,(function(){return s(this,(function(n){return[2,new c(e).request(t,r)]}))}))}function f(e){return i(this,void 0,void 0,(function(){var t;return s(this,(function(r){return(t=e.headers.get("Content-Type"))&&t.startsWith("application/json")?[2,e.json()]:[2,e.text()]}))}))}r.GraphQLClient=c,r.rawRequest=function(e,t,r){return i(this,void 0,void 0,(function(){return s(this,(function(n){return[2,new c(e).rawRequest(t,r)]}))}))},r.request=l,r.default=l}}},{package:"graphql-request",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/graphql-request/dist/src/index.js"}],[5400,{buffer:2105,"ipfs-pubsub-peer-monitor":4536,logplease:5230,"p-series":5418},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("p-series"),i=e("ipfs-pubsub-peer-monitor"),s=e("logplease"),o=s.create("pubsub",{color:s.Colors.Yellow});s.setLogLevel("ERROR");let a=0;t.exports=class{constructor(e,t){this._ipfs=e,this._id=t,this._subscriptions={},null===this._ipfs.pubsub&&o.error("The provided version of ipfs doesn't have pubsub support. Messages will not be exchanged."),this._handleMessage=this._handleMessage.bind(this),this._ipfs.setMaxListeners&&this._ipfs.setMaxListeners(256)}async subscribe(e,t,r){if(!this._subscriptions[e]&&this._ipfs.pubsub){await this._ipfs.pubsub.subscribe(e,this._handleMessage);const n=new i(this._ipfs.pubsub,e);n.on("join",(t=>{o.debug(`Peer joined ${e}:`),o.debug(t),this._subscriptions[e]?r(e,t):(o.warn("Peer joined a room we don't have a subscription for"),o.warn(e,t))})),n.on("leave",(t=>o.debug(`Peer ${t} left ${e}`))),n.on("error",(e=>o.error(e))),this._subscriptions[e]={topicMonitor:n,onMessage:t,onNewPeer:r},a++,o.debug("Topics open:",a)}}async unsubscribe(e){this._subscriptions[e]&&(await this._ipfs.pubsub.unsubscribe(e,this._handleMessage),this._subscriptions[e].topicMonitor.stop(),delete this._subscriptions[e],o.debug(`Unsubscribed from '${e}'`),a--,o.debug("Topics open:",a))}publish(e,t){this._subscriptions[e]&&this._ipfs.pubsub&&this._ipfs.pubsub.publish(e,r.from(JSON.stringify(t)))}async disconnect(){const e=Object.keys(this._subscriptions);await n(e.map((e=>this.unsubscribe.bind(this,e)))),this._subscriptions={}}async _handleMessage(e){if(e.from===this._id)return;let t,r,n;try{n=e.topicIDs[0],t=JSON.parse(e.data),r=this._subscriptions[n]}catch(t){o.error(t),o.error("Couldn't parse pubsub message:",e)}r&&r.onMessage&&t&&await r.onMessage(n,t)}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"orbit-db-pubsub",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/orbit-db-pubsub/src/ipfs-pubsub.js"}],[183,{},function(){with(this)return function(){"use strict";return function(e,t,r){!function(e){"object"==typeof r&&void 0!==t?t.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).ethers=e()}((function(){return function t(r,n,i){function s(a,u){if(!n[a]){if(!r[a]){var c="function"==typeof e&&e;if(!u&&c)return c(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var f=n[a]={exports:{}};r[a][0].call(f.exports,(function(e){return s(r[a][1][e]||e)}),f,f.exports,t,r,n,i)}return n[a].exports}for(var o="function"==typeof e&&e,a=0;a<i.length;a++)s(i[a]);return s}({1:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.version="4.0.48"},{}],2:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./utils/properties"),i=(s.isSigner=function(e){return n.isType(e,"Signer")},s);function s(){n.setType(this,"Signer")}r.Signer=i},{"./utils/properties":74}],3:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./utils/bignumber");r.AddressZero="0x0000000000000000000000000000000000000000",r.HashZero="0x0000000000000000000000000000000000000000000000000000000000000000",r.EtherSymbol="";var i=n.bigNumberify(-1);r.NegativeOne=i;var s=n.bigNumberify(0);r.Zero=s;var o=n.bigNumberify(1);r.One=o;var a=n.bigNumberify(2);r.Two=a;var u=n.bigNumberify("1000000000000000000");r.WeiPerEther=u;var c=n.bigNumberify("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");r.MaxUint256=c},{"./utils/bignumber":63}],4:[function(e,t,r){var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(r,"__esModule",{value:!0});var o,a=e("./constants"),u=s(e("./errors")),c=e("./utils/abi-coder"),l=e("./utils/address"),f=e("./utils/bignumber"),h=e("./utils/bytes"),d=e("./utils/interface"),p=e("./utils/properties"),m=e("./providers/abstract-provider"),y=e("./abstract-signer"),g=(i(v,o=y.Signer),v.prototype.getAddress=function(){return Promise.resolve(this.address)},v.prototype._fail=function(e,t){return Promise.resolve().then((function(){u.throwError(e,u.UNSUPPORTED_OPERATION,{operation:t})}))},v.prototype.signMessage=function(e){return this._fail("VoidSigner cannot sign messages","signMessage")},v.prototype.sendTransaction=function(e){return this._fail("VoidSigner cannot sign transactions","sendTransaction")},v.prototype.connect=function(e){return new v(this.address,e)},v);function v(e,t){var r=o.call(this)||this;return p.defineReadOnly(r,"address",e),p.defineReadOnly(r,"provider",t),r}r.VoidSigner=g;var b={chainId:!0,data:!0,from:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0};function _(e,t,r){var n=e.interface.functions[t];return function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var s={},o=null;if(t.length===n.inputs.length+1&&"object"==typeof t[t.length-1])for(var l in null!=(s=p.shallowCopy(t.pop())).blockTag&&(o=s.blockTag),delete s.blockTag,s)if(!b[l])throw new Error("unknown transaction override "+l);if(t.length!=n.inputs.length)throw new Error("incorrect number of arguments");return["data","to"].forEach((function(e){null!=s[e]&&u.throwError("cannot override "+e,u.UNSUPPORTED_OPERATION,{operation:e})})),s.to=e._deployed(o).then((function(){return e.addressPromise})),function e(t,r,n){if(Array.isArray(n)){var i=[];return n.forEach((function(n,s){var o=Array.isArray(r)?r[s]:r[n.name];i.push(e(t,o,n))})),Promise.all(i)}if("address"===n.type)return t.resolveName(r);if("tuple"===n.type)return e(t,r,n.components);var s=n.type.match(/(.*)(\[[0-9]*\]$)/);if(s){if(!Array.isArray(r))throw new Error("invalid value for array");var o=[],a={components:n.components,type:s[1]};return r.forEach((function(r){o.push(e(t,r,a))})),Promise.all(o)}return Promise.resolve(r)}(e.provider,t,n.inputs).then((function(t){if(s.data=n.encode(t),"call"===n.type)return r?Promise.resolve(a.Zero):(e.provider||u.throwError("call (constant functions) require a provider or a signer with a provider",u.UNSUPPORTED_OPERATION,{operation:"call"}),["gasLimit","gasPrice","value"].forEach((function(e){if(null!=s[e])throw new Error("call cannot override "+e)})),null==s.from&&e.signer&&(s.from=e.signer.getAddress()),e.provider.call(s,o).then((function(r){var i;h.hexDataLength(r)%32==4&&"0x08c379a0"===h.hexDataSlice(r,0,4)&&(i=c.defaultAbiCoder.decode(["string"],h.hexDataSlice(r,4)),u.throwError("call revert exception",u.CALL_EXCEPTION,{address:e.address,args:t,method:n.signature,errorSignature:"Error(string)",errorArgs:[i],reason:i,transaction:s}));try{var o=n.decode(r);return 1===n.outputs.length&&(o=o[0]),o}catch(i){throw"0x"===r&&0<n.outputs.length&&u.throwError("call exception",u.CALL_EXCEPTION,{address:e.address,method:n.signature,args:t}),i}})));if("transaction"===n.type)return r?(e.provider||u.throwError("estimate gas require a provider or a signer with a provider",u.UNSUPPORTED_OPERATION,{operation:"estimateGas"}),null==s.from&&e.signer&&(s.from=e.signer.getAddress()),e.provider.estimateGas(s)):(null==s.gasLimit&&null!=n.gas&&(s.gasLimit=f.bigNumberify(n.gas).add(21e3)),e.signer||u.throwError("sending a transaction requires a signer",u.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),null!=s.from&&u.throwError("cannot override from in a transaction",u.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),e.signer.sendTransaction(s).then((function(t){var r=t.wait.bind(t);return t.wait=function(t){return r(t).then((function(t){return t.events=t.logs.map((function(r){var n=p.deepCopy(r),i=e.interface.parseLog(r);return i&&(n.args=i.values,n.decode=i.decode,n.event=i.name,n.eventSignature=i.signature),n.removeListener=function(){return e.provider},n.getBlock=function(){return e.provider.getBlock(t.blockHash)},n.getTransaction=function(){return e.provider.getTransaction(t.transactionHash)},n.getTransactionReceipt=function(){return Promise.resolve(t)},n})),t}))},t})));throw new Error("invalid type - "+n.type)}))}}function w(e){return!e.address||null!=e.topics&&0!==e.topics.length?(e.address||"*")+"@"+(e.topics?e.topics.join(":"):""):"*"}var E=(k.prototype.deployed=function(){return this._deployed()},k.prototype._deployed=function(e){var t=this;return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then((function(){return t})):this._deployedPromise=this.provider.getCode(this.address,e).then((function(e){return"0x"===e&&u.throwError("contract not deployed",u.UNSUPPORTED_OPERATION,{contractAddress:t.address,operation:"getDeployed"}),t}))),this._deployedPromise},k.prototype.fallback=function(e){var t=this;this.signer||u.throwError("sending a transaction requires a signer",u.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});var r=p.shallowCopy(e||{});return["from","to"].forEach((function(e){null!=r[e]&&u.throwError("cannot override "+e,u.UNSUPPORTED_OPERATION,{operation:e})})),r.to=this.addressPromise,this.deployed().then((function(){return t.signer.sendTransaction(r)}))},k.prototype.connect=function(e){"string"==typeof e&&(e=new g(e,this.provider));var t=new k(this.address,this.interface,e);return this.deployTransaction&&p.defineReadOnly(t,"deployTransaction",this.deployTransaction),t},k.prototype.attach=function(e){return new k(e,this.interface,this.signer||this.provider)},k.isIndexed=function(e){return d.Interface.isIndexed(e)},k.prototype._getEventFilter=function(e){var t=this;if("string"==typeof e){if("*"===e)return{prepareEvent:function(e){var r=t.interface.parseLog(e);return r&&(e.args=r.values,e.decode=r.decode,e.event=r.name,e.eventSignature=r.signature),[e]},eventTag:"*",filter:{address:this.address}};-1!==e.indexOf("(")&&(e=c.formatSignature(c.parseSignature("event "+e)));var r=this.interface.events[e];r||u.throwError("unknown event - "+e,u.INVALID_ARGUMENT,{argumnet:"eventName",value:e});var n={address:this.address,topics:[r.topic]};return{prepareEvent:function(e){var t=r.decode(e.data,e.topics);e.args=t;var n=Array.prototype.slice.call(t);return n.push(e),n},event:r,eventTag:w(n),filter:n}}var i={address:this.address},s=null;if(e.topics&&e.topics[0])for(var o in i.topics=e.topics,this.interface.events)if(-1!==o.indexOf("(")){var a=this.interface.events[o];if(a.topic===e.topics[0].toLowerCase()){s=a;break}}return{prepareEvent:function(e){if(!s)return[e];var t=s.decode(e.data,e.topics);e.args=t;var r=Array.prototype.slice.call(t);return r.push(e),r},event:s,eventTag:w(i),filter:i}},k.prototype._addEventListener=function(e,t,r){var n=this;function i(r){var i=p.deepCopy(r),s=e.prepareEvent(i);e.event&&(i.decode=e.event.decode,i.event=e.event.name,i.eventSignature=e.event.signature),i.removeListener=function(){n.removeListener(e.filter,t)},i.getBlock=function(){return n.provider.getBlock(r.blockHash)},i.getTransaction=function(){return n.provider.getTransaction(r.transactionHash)},i.getTransactionReceipt=function(){return n.provider.getTransactionReceipt(r.transactionHash)},n.emit.apply(n,[e.filter].concat(s))}this.provider||u.throwError("events require a provider or a signer with a provider",u.UNSUPPORTED_OPERATION,{operation:"once"}),this.provider.on(e.filter,i),this._events.push({eventFilter:e,listener:t,wrappedListener:i,once:r})},k.prototype.on=function(e,t){return this._addEventListener(this._getEventFilter(e),t,!1),this},k.prototype.once=function(e,t){return this._addEventListener(this._getEventFilter(e),t,!0),this},k.prototype.addListener=function(e,t){return this.on(e,t)},k.prototype.emit=function(e){for(var t=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(!this.provider)return!1;var i=!1,s=this._getEventFilter(e);return this._events=this._events.filter((function(e){return e.eventFilter.eventTag!==s.eventTag||(setTimeout((function(){e.listener.apply(t,r)}),0),i=!0,!e.once)})),i},k.prototype.listenerCount=function(e){if(!this.provider)return 0;var t=this._getEventFilter(e);return this._events.filter((function(e){return e.eventFilter.eventTag===t.eventTag})).length},k.prototype.listeners=function(e){if(!this.provider)return[];var t=this._getEventFilter(e);return this._events.filter((function(e){return e.eventFilter.eventTag===t.eventTag})).map((function(e){return e.listener}))},k.prototype.removeAllListeners=function(e){var t=this;if(!this.provider)return this;var r=this._getEventFilter(e);return this._events=this._events.filter((function(e){return e.eventFilter.eventTag!==r.eventTag||(t.provider.removeListener(e.eventFilter.filter,e.wrappedListener),!1)})),this},k.prototype.removeListener=function(e,t){var r=this;if(!this.provider)return this;var n=!1,i=this._getEventFilter(e);return this._events=this._events.filter((function(e){return e.eventFilter.eventTag!==i.eventTag||e.listener!==t||(r.provider.removeListener(e.eventFilter.filter,e.wrappedListener),!!n||!(n=!0))})),this},k);function k(e,t,r){var n=this;if(u.checkNew(this,k),d.Interface.isInterface(t)?p.defineReadOnly(this,"interface",t):p.defineReadOnly(this,"interface",new d.Interface(t)),y.Signer.isSigner(r)?(p.defineReadOnly(this,"provider",r.provider),p.defineReadOnly(this,"signer",r)):m.Provider.isProvider(r)?(p.defineReadOnly(this,"provider",r),p.defineReadOnly(this,"signer",null)):u.throwError("invalid signer or provider",u.INVALID_ARGUMENT,{arg:"signerOrProvider",value:r}),p.defineReadOnly(this,"estimate",{}),p.defineReadOnly(this,"functions",{}),p.defineReadOnly(this,"filters",{}),Object.keys(this.interface.events).forEach((function(e){var t=n.interface.events[e];p.defineReadOnly(n.filters,e,(function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return{address:n.address,topics:t.encodeTopics(e)}}))})),this._events=[],p.defineReadOnly(this,"address",e),this.provider)p.defineReadOnly(this,"addressPromise",this.provider.resolveName(e).then((function(e){if(null==e)throw new Error("name not found");return e})).catch((function(e){throw e})));else try{p.defineReadOnly(this,"addressPromise",Promise.resolve(l.getAddress(e)))}catch(t){u.throwError("provider is required to use non-address contract address",u.INVALID_ARGUMENT,{argument:"addressOrName",value:e})}Object.keys(this.interface.functions).forEach((function(e){var t=_(n,e,!1);null==n[e]?p.defineReadOnly(n,e,t):u.warn("WARNING: Multiple definitions for "+e),null==n.functions[e]&&(p.defineReadOnly(n.functions,e,t),p.defineReadOnly(n.estimate,e,_(n,e,!0)))}))}r.Contract=E;var A=(S.prototype.getDeployTransaction=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r={};if(e.length===this.interface.deployFunction.inputs.length+1)for(var n in r=p.shallowCopy(e.pop()))if(!b[n])throw new Error("unknown transaction override "+n);return["data","from","to"].forEach((function(e){null!=r[e]&&u.throwError("cannot override "+e,u.UNSUPPORTED_OPERATION,{operation:e})})),u.checkArgumentCount(e.length,this.interface.deployFunction.inputs.length," in Contract constructor"),r.data=this.interface.deployFunction.encode(this.bytecode,e),r},S.prototype.deploy=function(){for(var e=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=this.getDeployTransaction.apply(this,t);return this.signer.sendTransaction(n).then((function(t){var r=new E(l.getContractAddress(t),e.interface,e.signer);return p.defineReadOnly(r,"deployTransaction",t),r}))},S.prototype.attach=function(e){return new E(e,this.interface,this.signer)},S.prototype.connect=function(e){return new S(this.interface,this.bytecode,e)},S.fromSolidity=function(e,t){null==e&&u.throwError("missing compiler output",u.MISSING_ARGUMENT,{argument:"compilerOutput"}),"string"==typeof e&&(e=JSON.parse(e));var r=e.abi,n=null;return e.bytecode?n=e.bytecode:e.evm&&e.evm.bytecode&&(n=e.evm.bytecode),new S(r,n,t)},S);function S(e,t,r){var n=null;"string"==typeof t?n=t:h.isArrayish(t)?n=h.hexlify(t):"string"==typeof t.object?n=t.object:u.throwError("bytecode must be a valid hex string",u.INVALID_ARGUMENT,{arg:"bytecode",value:t}),"0x"!==n.substring(0,2)&&(n="0x"+n),h.isHexString(n)||u.throwError("bytecode must be a valid hex string",u.INVALID_ARGUMENT,{arg:"bytecode",value:t}),n.length%2!=0&&u.throwError("bytecode must be valid data (even length)",u.INVALID_ARGUMENT,{arg:"bytecode",value:t}),p.defineReadOnly(this,"bytecode",n),d.Interface.isInterface(e)?p.defineReadOnly(this,"interface",e):p.defineReadOnly(this,"interface",new d.Interface(e)),r&&!y.Signer.isSigner(r)&&u.throwError("invalid signer",u.INVALID_ARGUMENT,{arg:"signer",value:null}),p.defineReadOnly(this,"signer",r||null)}r.ContractFactory=A},{"./abstract-signer":2,"./constants":3,"./errors":5,"./providers/abstract-provider":50,"./utils/abi-coder":59,"./utils/address":60,"./utils/bignumber":63,"./utils/bytes":64,"./utils/interface":69,"./utils/properties":74}],5:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./_version");r.UNKNOWN_ERROR="UNKNOWN_ERROR",r.NOT_IMPLEMENTED="NOT_IMPLEMENTED",r.MISSING_NEW="MISSING_NEW",r.CALL_EXCEPTION="CALL_EXCEPTION",r.INVALID_ARGUMENT="INVALID_ARGUMENT",r.MISSING_ARGUMENT="MISSING_ARGUMENT",r.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",r.NUMERIC_FAULT="NUMERIC_FAULT",r.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",r.NONCE_EXPIRED="NONCE_EXPIRED",r.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED";var i=!(r.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION"),s=!1;function o(e,t,i){if(s)throw new Error("unknown error");t=t||r.UNKNOWN_ERROR,i=i||{};var o=[];Object.keys(i).forEach((function(e){try{o.push(e+"="+JSON.stringify(i[e]))}catch(t){o.push(e+"="+JSON.stringify(i[e].toString()))}})),o.push("version="+n.version);var a=e;o.length&&(e+=" ("+o.join(", ")+")");var u=new Error(e);throw u.reason=a,u.code=t,Object.keys(i).forEach((function(e){u[e]=i[e]})),u}r.throwError=o,r.checkNew=function(e,t){e instanceof t||o("missing new",r.MISSING_NEW,{name:t.name})},r.checkArgumentCount=function(e,t,n){n=n||"",e<t&&o("missing argument"+n,r.MISSING_ARGUMENT,{count:e,expectedCount:t}),t<e&&o("too many arguments"+n,r.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})},r.setCensorship=function(e,t){i&&o("error censorship permanent",r.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),s=!!e,i=!!t},r.checkNormalize=function(){try{if(["NFD","NFC","NFKD","NFKC"].forEach((function(e){try{"test".normalize(e)}catch(t){throw new Error("missing "+e)}})),String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(e){o("platform missing String.prototype.normalize",r.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:e.message})}};var a={debug:1,default:2,info:2,warn:3,error:4,off:5},u=a.default;function c(e,t){u>a[e]||console.log.apply(console,t)}function l(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];c("warn",e)}r.setLogLevel=function(e){var t=a[e];null!=t?u=t:l("invliad log level - "+e)},r.warn=l,r.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];c("info",e)}},{"./_version":1}],6:[function(e,t,r){var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(r,"__esModule",{value:!0});var i=e("./contract");r.Contract=i.Contract,r.ContractFactory=i.ContractFactory,r.VoidSigner=i.VoidSigner;var s=e("./abstract-signer");r.Signer=s.Signer;var o=e("./wallet");r.Wallet=o.Wallet;var a=n(e("./constants"));r.constants=a;var u=n(e("./errors"));r.errors=u;var c=n(e("./providers"));r.providers=c;var l=n(e("./utils"));r.utils=l;var f=n(e("./wordlists"));r.wordlists=f;var h=e("./utils/shims");r.platform=h.platform;var d=e("./_version");r.version=d.version,r.getDefaultProvider=function(e){null==e&&(e="homestead");var t=l.getNetwork(e);return t&&t._defaultProvider||u.throwError("unsupported getDefaultProvider network",u.UNSUPPORTED_OPERATION,{operation:"getDefaultProvider",network:e}),t._defaultProvider(c)}},{"./_version":1,"./abstract-signer":2,"./constants":3,"./contract":4,"./errors":5,"./providers":54,"./utils":68,"./utils/shims":80,"./wallet":88,"./wordlists":89}],7:[function(e,t,r){var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(r,"__esModule",{value:!0});var i=n(e("./ethers"));r.ethers=i,function(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}(e("./ethers"))},{"./ethers":6}],8:[function(e,t,r){!function(e){function n(e){return parseInt(e)===e}function i(e){if(n(e.length)){for(var t=0;t<e.length;t++)if(!n(e[t])||e[t]<0||255<e[t])return;return 1}}function s(e,t){if(e.buffer&&ArrayBuffer.isView(e)&&"Uint8Array"===e.name)return t&&(e=e.slice?e.slice():Array.prototype.slice.call(e)),e;if(Array.isArray(e)){if(!i(e))throw new Error("Array contains invalid value: "+e);return new Uint8Array(e)}if(n(e.length)&&i(e))return new Uint8Array(e);throw new Error("unsupported array-like object")}function o(e){return new Uint8Array(e)}function a(e,t,r,n,i){null==n&&null==i||(e=e.slice?e.slice(n,i):Array.prototype.slice.call(e,n,i)),t.set(e,r)}var u,c={toBytes:function(e){var t=[],r=0;for(e=encodeURI(e);r<e.length;){var n=e.charCodeAt(r++);37===n?(t.push(parseInt(e.substr(r,2),16)),r+=2):t.push(n)}return s(t)},fromBytes:function(e){for(var t=[],r=0;r<e.length;){var n=e[r];n<128?(t.push(String.fromCharCode(n)),r++):191<n&&n<224?(t.push(String.fromCharCode((31&n)<<6|63&e[r+1])),r+=2):(t.push(String.fromCharCode((15&n)<<12|(63&e[r+1])<<6|63&e[r+2])),r+=3)}return t.join("")}},l=(u="0123456789abcdef",{toBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},fromBytes:function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];t.push(u[(240&n)>>4]+u[15&n])}return t.join("")}}),f={16:10,24:12,32:14},h=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],d=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],p=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],m=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],y=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],g=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],v=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],b=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],_=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],w=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],E=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],k=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],A=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],S=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],x=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function I(e){for(var t=[],r=0;r<e.length;r+=4)t.push(e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3]);return t}var T=function(e){if(!(this instanceof T))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:s(e,!0)}),this._prepare()};T.prototype._prepare=function(){var e=f[this.key.length];if(null==e)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var t=0;t<=e;t++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);var r,n=4*(e+1),i=this.key.length/4,s=I(this.key);for(t=0;t<i;t++)r=t>>2,this._Ke[r][t%4]=s[t],this._Kd[e-r][t%4]=s[t];for(var o,a=0,u=i;u<n;){if(o=s[i-1],s[0]^=d[o>>16&255]<<24^d[o>>8&255]<<16^d[255&o]<<8^d[o>>24&255]^h[a]<<24,a+=1,8!=i)for(t=1;t<i;t++)s[t]^=s[t-1];else{for(t=1;t<i/2;t++)s[t]^=s[t-1];for(o=s[i/2-1],s[i/2]^=d[255&o]^d[o>>8&255]<<8^d[o>>16&255]<<16^d[o>>24&255]<<24,t=i/2+1;t<i;t++)s[t]^=s[t-1]}for(t=0;t<i&&u<n;)c=u>>2,l=u%4,this._Ke[c][l]=s[t],this._Kd[e-c][l]=s[t++],u++}for(var c=1;c<e;c++)for(var l=0;l<4;l++)o=this._Kd[c][l],this._Kd[c][l]=k[o>>24&255]^A[o>>16&255]^S[o>>8&255]^x[255&o]},T.prototype.encrypt=function(e){if(16!=e.length)throw new Error("invalid plaintext size (must be 16 bytes)");for(var t=this._Ke.length-1,r=[0,0,0,0],n=I(e),i=0;i<4;i++)n[i]^=this._Ke[0][i];for(var s=1;s<t;s++){for(i=0;i<4;i++)r[i]=m[n[i]>>24&255]^y[n[(i+1)%4]>>16&255]^g[n[(i+2)%4]>>8&255]^v[255&n[(i+3)%4]]^this._Ke[s][i];n=r.slice()}var a,u=o(16);for(i=0;i<4;i++)a=this._Ke[t][i],u[4*i]=255&(d[n[i]>>24&255]^a>>24),u[4*i+1]=255&(d[n[(i+1)%4]>>16&255]^a>>16),u[4*i+2]=255&(d[n[(i+2)%4]>>8&255]^a>>8),u[4*i+3]=255&(d[255&n[(i+3)%4]]^a);return u},T.prototype.decrypt=function(e){if(16!=e.length)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var t=this._Kd.length-1,r=[0,0,0,0],n=I(e),i=0;i<4;i++)n[i]^=this._Kd[0][i];for(var s=1;s<t;s++){for(i=0;i<4;i++)r[i]=b[n[i]>>24&255]^_[n[(i+3)%4]>>16&255]^w[n[(i+2)%4]>>8&255]^E[255&n[(i+1)%4]]^this._Kd[s][i];n=r.slice()}var a,u=o(16);for(i=0;i<4;i++)a=this._Kd[t][i],u[4*i]=255&(p[n[i]>>24&255]^a>>24),u[4*i+1]=255&(p[n[(i+3)%4]>>16&255]^a>>16),u[4*i+2]=255&(p[n[(i+2)%4]>>8&255]^a>>8),u[4*i+3]=255&(p[255&n[(i+1)%4]]^a);return u};var P=function(e){if(!(this instanceof P))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new T(e)};P.prototype.encrypt=function(e){if((e=s(e)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var t=o(e.length),r=o(16),n=0;n<e.length;n+=16)a(e,r,0,n,n+16),a(r=this._aes.encrypt(r),t,n);return t},P.prototype.decrypt=function(e){if((e=s(e)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var t=o(e.length),r=o(16),n=0;n<e.length;n+=16)a(e,r,0,n,n+16),a(r=this._aes.decrypt(r),t,n);return t};var N=function(e,t){if(!(this instanceof N))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else t=o(16);this._lastCipherblock=s(t,!0),this._aes=new T(e)};N.prototype.encrypt=function(e){if((e=s(e)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var t=o(e.length),r=o(16),n=0;n<e.length;n+=16){a(e,r,0,n,n+16);for(var i=0;i<16;i++)r[i]^=this._lastCipherblock[i];this._lastCipherblock=this._aes.encrypt(r),a(this._lastCipherblock,t,n)}return t},N.prototype.decrypt=function(e){if((e=s(e)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var t=o(e.length),r=o(16),n=0;n<e.length;n+=16){a(e,r,0,n,n+16),r=this._aes.decrypt(r);for(var i=0;i<16;i++)t[n+i]=r[i]^this._lastCipherblock[i];a(e,this._lastCipherblock,0,n,n+16)}return t};var C=function(e,t,r){if(!(this instanceof C))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 size)")}else t=o(16);r=r||1,this.segmentSize=r,this._shiftRegister=s(t,!0),this._aes=new T(e)};C.prototype.encrypt=function(e){if(e.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var t,r=s(e,!0),n=0;n<r.length;n+=this.segmentSize){t=this._aes.encrypt(this._shiftRegister);for(var i=0;i<this.segmentSize;i++)r[n+i]^=t[i];a(this._shiftRegister,this._shiftRegister,0,this.segmentSize),a(r,this._shiftRegister,16-this.segmentSize,n,n+this.segmentSize)}return r},C.prototype.decrypt=function(e){if(e.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var t,r=s(e,!0),n=0;n<r.length;n+=this.segmentSize){t=this._aes.encrypt(this._shiftRegister);for(var i=0;i<this.segmentSize;i++)r[n+i]^=t[i];a(this._shiftRegister,this._shiftRegister,0,this.segmentSize),a(e,this._shiftRegister,16-this.segmentSize,n,n+this.segmentSize)}return r};var R=function(e,t){if(!(this instanceof R))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else t=o(16);this._lastPrecipher=s(t,!0),this._lastPrecipherIndex=16,this._aes=new T(e)};R.prototype.encrypt=function(e){for(var t=s(e,!0),r=0;r<t.length;r++)16===this._lastPrecipherIndex&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),t[r]^=this._lastPrecipher[this._lastPrecipherIndex++];return t},R.prototype.decrypt=R.prototype.encrypt;var O=function(e){if(!(this instanceof O))throw Error("Counter must be instanitated with `new`");0===e||e||(e=1),"number"==typeof e?(this._counter=o(16),this.setValue(e)):this.setBytes(e)};O.prototype.setValue=function(e){if("number"!=typeof e||parseInt(e)!=e)throw new Error("invalid counter value (must be an integer)");for(var t=15;0<=t;--t)this._counter[t]=e%256,e>>=8},O.prototype.setBytes=function(e){if(16!=(e=s(e,!0)).length)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=e},O.prototype.increment=function(){for(var e=15;0<=e;e--){if(255!==this._counter[e]){this._counter[e]++;break}this._counter[e]=0}};var M=function(e,t){if(!(this instanceof M))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",t instanceof O||(t=new O(t)),this._counter=t,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new T(e)};M.prototype.encrypt=function(e){for(var t=s(e,!0),r=0;r<t.length;r++)16===this._remainingCounterIndex&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),t[r]^=this._remainingCounter[this._remainingCounterIndex++];return t},M.prototype.decrypt=M.prototype.encrypt;var D={AES:T,Counter:O,ModeOfOperation:{ecb:P,cbc:N,cfb:C,ofb:R,ctr:M},utils:{hex:l,utf8:c},padding:{pkcs7:{pad:function(e){var t=16-(e=s(e,!0)).length%16,r=o(e.length+t);a(e,r);for(var n=e.length;n<r.length;n++)r[n]=t;return r},strip:function(e){if((e=s(e,!0)).length<16)throw new Error("PKCS#7 invalid length");var t=e[e.length-1];if(16<t)throw new Error("PKCS#7 padding byte out of range");for(var r=e.length-t,n=0;n<t;n++)if(e[r+n]!==t)throw new Error("PKCS#7 invalid padding byte");var i=o(r);return a(e,i,0,0,r),i}}},_arrayTest:{coerceArray:s,createArray:o,copyArray:a}};void 0!==r?t.exports=D:(e.aesjs&&(D._aesjs=e.aesjs),e.aesjs=D)}(this)},{}],9:[function(e,t,r){!function(t,r){function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){function r(){}e.super_=t,r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function s(e,t,r){if(s.isBN(e))return e;this.negative=0,this.words=null,this.length=0,(this.red=null)!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var o;"object"==typeof t?t.exports=s:r.BN=s,(s.BN=s).wordSize=26;try{o=e("buffer").Buffer}catch(t){}function a(e,t,r){for(var n=0,i=Math.min(e.length,r),s=t;s<i;s++){var o=e.charCodeAt(s)-48;n<<=4,n|=49<=o&&o<=54?o-49+10:17<=o&&o<=22?o-17+10:15&o}return n}function u(e,t,r,n){for(var i=0,s=Math.min(e.length,r),o=t;o<s;o++){var a=e.charCodeAt(o)-48;i*=n,i+=49<=a?a-49+10:17<=a?a-17+10:a}return i}s.isBN=function(e){return e instanceof s||null!==e&&"object"==typeof e&&e.constructor.wordSize===s.wordSize&&Array.isArray(e.words)},s.max=function(e,t){return 0<e.cmp(t)?e:t},s.min=function(e,t){return e.cmp(t)<0?e:t},s.prototype._init=function(e,t,r){if("number"==typeof e)return this._initNumber(e,t,r);if("object"==typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&2<=t&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&i++,16===t?this._parseHex(e,i):this._parseBase(e,t,i),"-"===e[0]&&(this.negative=1),this.strip(),"le"===r&&this._initArray(this.toArray(),t,r)},s.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},s.prototype._initArray=function(e,t,r){if(n("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i,s,o=0;o<this.length;o++)this.words[o]=0;var a=0;if("be"===r)for(o=e.length-1,i=0;0<=o;o-=3)s=e[o]|e[o-1]<<8|e[o-2]<<16,this.words[i]|=s<<a&67108863,this.words[i+1]=s>>>26-a&67108863,26<=(a+=24)&&(a-=26,i++);else if("le"===r)for(i=o=0;o<e.length;o+=3)s=e[o]|e[o+1]<<8|e[o+2]<<16,this.words[i]|=s<<a&67108863,this.words[i+1]=s>>>26-a&67108863,26<=(a+=24)&&(a-=26,i++);return this.strip()},s.prototype._parseHex=function(e,t){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r,n=0;n<this.length;n++)this.words[n]=0;for(var i=0,s=(n=e.length-6,0);t<=n;n-=6)r=a(e,n,n+6),this.words[s]|=r<<i&67108863,this.words[s+1]|=r>>>26-i&4194303,26<=(i+=24)&&(i-=26,s++);n+6!==t&&(r=a(e,t,n+6),this.words[s]|=r<<i&67108863,this.words[s+1]|=r>>>26-i&4194303),this.strip()},s.prototype._parseBase=function(e,t,r){this.words=[0];for(var n=0,i=this.length=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var s=e.length-r,o=s%n,a=Math.min(s,s-o)+r,c=0,l=r;l<a;l+=n)c=u(e,l,l+n,t),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!=o){var f=1;for(c=u(e,l,e.length,t),l=0;l<o;l++)f*=t;this.imuln(f),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}},s.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},s.prototype.clone=function(){var e=new s(null);return this.copy(e),e},s.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function h(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0,i=(n=(r.length=n)-1|0,67108863&(f=(0|e.words[0])*(0|t.words[0]))),s=f/67108864|0;r.words[0]=i;for(var o=1;o<n;o++){for(var a=s>>>26,u=67108863&s,c=Math.min(o,t.length-1),l=Math.max(0,o-e.length+1);l<=c;l++){var f,h=o-l|0;a+=(f=(0|e.words[h])*(0|t.words[l])+u)/67108864|0,u=67108863&f}r.words[o]=0|u,s=0|a}return 0!==s?r.words[o]=0|s:r.length--,r.strip()}s.prototype.toString=function(e,t){if(t=0|t||1,16===(e=e||10)||"hex"===e){u="";for(var r=0,i=0,s=0;s<this.length;s++){var o=this.words[s],a=(16777215&(o<<r|i)).toString(16),u=0!=(i=o>>>24-r&16777215)||s!==this.length-1?c[6-a.length]+a+u:a+u;26<=(r+=2)&&(r-=26,s--)}for(0!==i&&(u=i.toString(16)+u);u.length%t!=0;)u="0"+u;return 0!==this.negative&&(u="-"+u),u}if(e===(0|e)&&2<=e&&e<=36){var h=l[e],d=f[e];for(u="",(p=this.clone()).negative=0;!p.isZero();){var p,m=p.modn(d).toString(e);u=(p=p.idivn(d)).isZero()?m+u:c[h-m.length]+m+u}for(this.isZero()&&(u="0"+u);u.length%t!=0;)u="0"+u;return 0!==this.negative&&(u="-"+u),u}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:2<this.length&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(e,t){return n(void 0!==o),this.toArrayLike(o,e,t)},s.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},s.prototype.toArrayLike=function(e,t,r){var i=this.byteLength(),s=r||Math.max(1,i);n(i<=s,"byte array longer than desired length"),n(0<s,"Requested array length <= 0"),this.strip();var o,a,u="le"===t,c=new e(s),l=this.clone();if(u){for(a=0;!l.isZero();a++)o=l.andln(255),l.iushrn(8),c[a]=o;for(;a<s;a++)c[a]=0}else{for(a=0;a<s-i;a++)c[a]=0;for(a=0;!l.isZero();a++)o=l.andln(255),l.iushrn(8),c[s-a-1]=o}return c},Math.clz32?s.prototype._countBits=function(e){return 32-Math.clz32(e)}:s.prototype._countBits=function(e){var t=e,r=0;return 4096<=t&&(r+=13,t>>>=13),64<=t&&(r+=7,t>>>=7),8<=t&&(r+=4,t>>>=4),2<=t&&(r+=2,t>>>=2),r+t},s.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 0==(8191&t)&&(r+=13,t>>>=13),0==(127&t)&&(r+=7,t>>>=7),0==(15&t)&&(r+=4,t>>>=4),0==(3&t)&&(r+=2,t>>>=2),0==(1&t)&&r++,r},s.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},s.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},s.prototype.ior=function(e){return n(0==(this.negative|e.negative)),this.iuor(e)},s.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},s.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},s.prototype.iuand=function(e){for(var t=this.length>e.length?e:this,r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},s.prototype.iand=function(e){return n(0==(this.negative|e.negative)),this.iuand(e)},s.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},s.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},s.prototype.iuxor=function(e){for(var t,r=this.length>e.length?(t=this,e):(t=e,this),n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this.strip()},s.prototype.ixor=function(e){return n(0==(this.negative|e.negative)),this.iuxor(e)},s.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},s.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},s.prototype.inotn=function(e){n("number"==typeof e&&0<=e);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),0<r&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return 0<r&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},s.prototype.notn=function(e){return this.clone().inotn(e)},s.prototype.setn=function(e,t){n("number"==typeof e&&0<=e);var r=e/26|0,i=e%26;return this._expand(1+r),this.words[r]=t?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},s.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();n=this.length>e.length?(r=this,e):(r=e,this);for(var i=0,s=0;s<n.length;s++)t=(0|r.words[s])+(0|n.words[s])+i,this.words[s]=67108863&t,i=t>>>26;for(;0!==i&&s<r.length;s++)t=(0|r.words[s])+i,this.words[s]=67108863&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this},s.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},s.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;n=0<i?(r=this,e):(r=e,this);for(var s=0,o=0;o<n.length;o++)s=(t=(0|r.words[o])-(0|n.words[o])+s)>>26,this.words[o]=67108863&t;for(;0!==s&&o<r.length;o++)s=(t=(0|r.words[o])+s)>>26,this.words[o]=67108863&t;if(0===s&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(e){return this.clone().isub(e)};var d=function(e,t,r){var n,i,s,o=e.words,a=t.words,u=r.words,c=0|o[0],l=8191&c,f=c>>>13,h=0|o[1],d=8191&h,p=h>>>13,m=0|o[2],y=8191&m,g=m>>>13,v=0|o[3],b=8191&v,_=v>>>13,w=0|o[4],E=8191&w,k=w>>>13,A=0|o[5],S=8191&A,x=A>>>13,I=0|o[6],T=8191&I,P=I>>>13,N=0|o[7],C=8191&N,R=N>>>13,O=0|o[8],M=8191&O,D=O>>>13,L=0|o[9],B=8191&L,U=L>>>13,j=0|a[0],K=8191&j,F=j>>>13,V=0|a[1],H=8191&V,G=V>>>13,q=0|a[2],z=8191&q,W=q>>>13,Y=0|a[3],Z=8191&Y,J=Y>>>13,$=0|a[4],X=8191&$,Q=$>>>13,ee=0|a[5],te=8191&ee,re=ee>>>13,ne=0|a[6],ie=8191&ne,se=ne>>>13,oe=0|a[7],ae=8191&oe,ue=oe>>>13,ce=0|a[8],le=8191&ce,fe=ce>>>13,he=0|a[9],de=8191&he,pe=he>>>13;r.negative=e.negative^t.negative,r.length=19;var me=(0+Math.imul(l,K)|0)+((8191&(i=Math.imul(l,F)+Math.imul(f,K)|0))<<13)|0,ye=(Math.imul(f,F)+(i>>>13)|0)+(me>>>26)|0;me&=67108863,n=Math.imul(d,K),i=Math.imul(d,F)+Math.imul(p,K)|0,s=Math.imul(p,F);var ge=(ye+(n+Math.imul(l,H)|0)|0)+((8191&(i=(i+Math.imul(l,G)|0)+Math.imul(f,H)|0))<<13)|0;ye=((s+Math.imul(f,G)|0)+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(y,K),i=Math.imul(y,F)+Math.imul(g,K)|0,s=Math.imul(g,F),n=n+Math.imul(d,H)|0,i=(i+Math.imul(d,G)|0)+Math.imul(p,H)|0,s=s+Math.imul(p,G)|0;var ve=(ye+(n+Math.imul(l,z)|0)|0)+((8191&(i=(i+Math.imul(l,W)|0)+Math.imul(f,z)|0))<<13)|0;ye=((s+Math.imul(f,W)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(b,K),i=Math.imul(b,F)+Math.imul(_,K)|0,s=Math.imul(_,F),n=n+Math.imul(y,H)|0,i=(i+Math.imul(y,G)|0)+Math.imul(g,H)|0,s=s+Math.imul(g,G)|0,n=n+Math.imul(d,z)|0,i=(i+Math.imul(d,W)|0)+Math.imul(p,z)|0,s=s+Math.imul(p,W)|0;var be=(ye+(n+Math.imul(l,Z)|0)|0)+((8191&(i=(i+Math.imul(l,J)|0)+Math.imul(f,Z)|0))<<13)|0;ye=((s+Math.imul(f,J)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(E,K),i=Math.imul(E,F)+Math.imul(k,K)|0,s=Math.imul(k,F),n=n+Math.imul(b,H)|0,i=(i+Math.imul(b,G)|0)+Math.imul(_,H)|0,s=s+Math.imul(_,G)|0,n=n+Math.imul(y,z)|0,i=(i+Math.imul(y,W)|0)+Math.imul(g,z)|0,s=s+Math.imul(g,W)|0,n=n+Math.imul(d,Z)|0,i=(i+Math.imul(d,J)|0)+Math.imul(p,Z)|0,s=s+Math.imul(p,J)|0;var _e=(ye+(n+Math.imul(l,X)|0)|0)+((8191&(i=(i+Math.imul(l,Q)|0)+Math.imul(f,X)|0))<<13)|0;ye=((s+Math.imul(f,Q)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(S,K),i=Math.imul(S,F)+Math.imul(x,K)|0,s=Math.imul(x,F),n=n+Math.imul(E,H)|0,i=(i+Math.imul(E,G)|0)+Math.imul(k,H)|0,s=s+Math.imul(k,G)|0,n=n+Math.imul(b,z)|0,i=(i+Math.imul(b,W)|0)+Math.imul(_,z)|0,s=s+Math.imul(_,W)|0,n=n+Math.imul(y,Z)|0,i=(i+Math.imul(y,J)|0)+Math.imul(g,Z)|0,s=s+Math.imul(g,J)|0,n=n+Math.imul(d,X)|0,i=(i+Math.imul(d,Q)|0)+Math.imul(p,X)|0,s=s+Math.imul(p,Q)|0;var we=(ye+(n+Math.imul(l,te)|0)|0)+((8191&(i=(i+Math.imul(l,re)|0)+Math.imul(f,te)|0))<<13)|0;ye=((s+Math.imul(f,re)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(T,K),i=Math.imul(T,F)+Math.imul(P,K)|0,s=Math.imul(P,F),n=n+Math.imul(S,H)|0,i=(i+Math.imul(S,G)|0)+Math.imul(x,H)|0,s=s+Math.imul(x,G)|0,n=n+Math.imul(E,z)|0,i=(i+Math.imul(E,W)|0)+Math.imul(k,z)|0,s=s+Math.imul(k,W)|0,n=n+Math.imul(b,Z)|0,i=(i+Math.imul(b,J)|0)+Math.imul(_,Z)|0,s=s+Math.imul(_,J)|0,n=n+Math.imul(y,X)|0,i=(i+Math.imul(y,Q)|0)+Math.imul(g,X)|0,s=s+Math.imul(g,Q)|0,n=n+Math.imul(d,te)|0,i=(i+Math.imul(d,re)|0)+Math.imul(p,te)|0,s=s+Math.imul(p,re)|0;var Ee=(ye+(n+Math.imul(l,ie)|0)|0)+((8191&(i=(i+Math.imul(l,se)|0)+Math.imul(f,ie)|0))<<13)|0;ye=((s+Math.imul(f,se)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(C,K),i=Math.imul(C,F)+Math.imul(R,K)|0,s=Math.imul(R,F),n=n+Math.imul(T,H)|0,i=(i+Math.imul(T,G)|0)+Math.imul(P,H)|0,s=s+Math.imul(P,G)|0,n=n+Math.imul(S,z)|0,i=(i+Math.imul(S,W)|0)+Math.imul(x,z)|0,s=s+Math.imul(x,W)|0,n=n+Math.imul(E,Z)|0,i=(i+Math.imul(E,J)|0)+Math.imul(k,Z)|0,s=s+Math.imul(k,J)|0,n=n+Math.imul(b,X)|0,i=(i+Math.imul(b,Q)|0)+Math.imul(_,X)|0,s=s+Math.imul(_,Q)|0,n=n+Math.imul(y,te)|0,i=(i+Math.imul(y,re)|0)+Math.imul(g,te)|0,s=s+Math.imul(g,re)|0,n=n+Math.imul(d,ie)|0,i=(i+Math.imul(d,se)|0)+Math.imul(p,ie)|0,s=s+Math.imul(p,se)|0;var ke=(ye+(n+Math.imul(l,ae)|0)|0)+((8191&(i=(i+Math.imul(l,ue)|0)+Math.imul(f,ae)|0))<<13)|0;ye=((s+Math.imul(f,ue)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(M,K),i=Math.imul(M,F)+Math.imul(D,K)|0,s=Math.imul(D,F),n=n+Math.imul(C,H)|0,i=(i+Math.imul(C,G)|0)+Math.imul(R,H)|0,s=s+Math.imul(R,G)|0,n=n+Math.imul(T,z)|0,i=(i+Math.imul(T,W)|0)+Math.imul(P,z)|0,s=s+Math.imul(P,W)|0,n=n+Math.imul(S,Z)|0,i=(i+Math.imul(S,J)|0)+Math.imul(x,Z)|0,s=s+Math.imul(x,J)|0,n=n+Math.imul(E,X)|0,i=(i+Math.imul(E,Q)|0)+Math.imul(k,X)|0,s=s+Math.imul(k,Q)|0,n=n+Math.imul(b,te)|0,i=(i+Math.imul(b,re)|0)+Math.imul(_,te)|0,s=s+Math.imul(_,re)|0,n=n+Math.imul(y,ie)|0,i=(i+Math.imul(y,se)|0)+Math.imul(g,ie)|0,s=s+Math.imul(g,se)|0,n=n+Math.imul(d,ae)|0,i=(i+Math.imul(d,ue)|0)+Math.imul(p,ae)|0,s=s+Math.imul(p,ue)|0;var Ae=(ye+(n+Math.imul(l,le)|0)|0)+((8191&(i=(i+Math.imul(l,fe)|0)+Math.imul(f,le)|0))<<13)|0;ye=((s+Math.imul(f,fe)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(B,K),i=Math.imul(B,F)+Math.imul(U,K)|0,s=Math.imul(U,F),n=n+Math.imul(M,H)|0,i=(i+Math.imul(M,G)|0)+Math.imul(D,H)|0,s=s+Math.imul(D,G)|0,n=n+Math.imul(C,z)|0,i=(i+Math.imul(C,W)|0)+Math.imul(R,z)|0,s=s+Math.imul(R,W)|0,n=n+Math.imul(T,Z)|0,i=(i+Math.imul(T,J)|0)+Math.imul(P,Z)|0,s=s+Math.imul(P,J)|0,n=n+Math.imul(S,X)|0,i=(i+Math.imul(S,Q)|0)+Math.imul(x,X)|0,s=s+Math.imul(x,Q)|0,n=n+Math.imul(E,te)|0,i=(i+Math.imul(E,re)|0)+Math.imul(k,te)|0,s=s+Math.imul(k,re)|0,n=n+Math.imul(b,ie)|0,i=(i+Math.imul(b,se)|0)+Math.imul(_,ie)|0,s=s+Math.imul(_,se)|0,n=n+Math.imul(y,ae)|0,i=(i+Math.imul(y,ue)|0)+Math.imul(g,ae)|0,s=s+Math.imul(g,ue)|0,n=n+Math.imul(d,le)|0,i=(i+Math.imul(d,fe)|0)+Math.imul(p,le)|0,s=s+Math.imul(p,fe)|0;var Se=(ye+(n+Math.imul(l,de)|0)|0)+((8191&(i=(i+Math.imul(l,pe)|0)+Math.imul(f,de)|0))<<13)|0;ye=((s+Math.imul(f,pe)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(B,H),i=Math.imul(B,G)+Math.imul(U,H)|0,s=Math.imul(U,G),n=n+Math.imul(M,z)|0,i=(i+Math.imul(M,W)|0)+Math.imul(D,z)|0,s=s+Math.imul(D,W)|0,n=n+Math.imul(C,Z)|0,i=(i+Math.imul(C,J)|0)+Math.imul(R,Z)|0,s=s+Math.imul(R,J)|0,n=n+Math.imul(T,X)|0,i=(i+Math.imul(T,Q)|0)+Math.imul(P,X)|0,s=s+Math.imul(P,Q)|0,n=n+Math.imul(S,te)|0,i=(i+Math.imul(S,re)|0)+Math.imul(x,te)|0,s=s+Math.imul(x,re)|0,n=n+Math.imul(E,ie)|0,i=(i+Math.imul(E,se)|0)+Math.imul(k,ie)|0,s=s+Math.imul(k,se)|0,n=n+Math.imul(b,ae)|0,i=(i+Math.imul(b,ue)|0)+Math.imul(_,ae)|0,s=s+Math.imul(_,ue)|0,n=n+Math.imul(y,le)|0,i=(i+Math.imul(y,fe)|0)+Math.imul(g,le)|0,s=s+Math.imul(g,fe)|0;var xe=(ye+(n+Math.imul(d,de)|0)|0)+((8191&(i=(i+Math.imul(d,pe)|0)+Math.imul(p,de)|0))<<13)|0;ye=((s+Math.imul(p,pe)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul(B,z),i=Math.imul(B,W)+Math.imul(U,z)|0,s=Math.imul(U,W),n=n+Math.imul(M,Z)|0,i=(i+Math.imul(M,J)|0)+Math.imul(D,Z)|0,s=s+Math.imul(D,J)|0,n=n+Math.imul(C,X)|0,i=(i+Math.imul(C,Q)|0)+Math.imul(R,X)|0,s=s+Math.imul(R,Q)|0,n=n+Math.imul(T,te)|0,i=(i+Math.imul(T,re)|0)+Math.imul(P,te)|0,s=s+Math.imul(P,re)|0,n=n+Math.imul(S,ie)|0,i=(i+Math.imul(S,se)|0)+Math.imul(x,ie)|0,s=s+Math.imul(x,se)|0,n=n+Math.imul(E,ae)|0,i=(i+Math.imul(E,ue)|0)+Math.imul(k,ae)|0,s=s+Math.imul(k,ue)|0,n=n+Math.imul(b,le)|0,i=(i+Math.imul(b,fe)|0)+Math.imul(_,le)|0,s=s+Math.imul(_,fe)|0;var Ie=(ye+(n+Math.imul(y,de)|0)|0)+((8191&(i=(i+Math.imul(y,pe)|0)+Math.imul(g,de)|0))<<13)|0;ye=((s+Math.imul(g,pe)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul(B,Z),i=Math.imul(B,J)+Math.imul(U,Z)|0,s=Math.imul(U,J),n=n+Math.imul(M,X)|0,i=(i+Math.imul(M,Q)|0)+Math.imul(D,X)|0,s=s+Math.imul(D,Q)|0,n=n+Math.imul(C,te)|0,i=(i+Math.imul(C,re)|0)+Math.imul(R,te)|0,s=s+Math.imul(R,re)|0,n=n+Math.imul(T,ie)|0,i=(i+Math.imul(T,se)|0)+Math.imul(P,ie)|0,s=s+Math.imul(P,se)|0,n=n+Math.imul(S,ae)|0,i=(i+Math.imul(S,ue)|0)+Math.imul(x,ae)|0,s=s+Math.imul(x,ue)|0,n=n+Math.imul(E,le)|0,i=(i+Math.imul(E,fe)|0)+Math.imul(k,le)|0,s=s+Math.imul(k,fe)|0;var Te=(ye+(n+Math.imul(b,de)|0)|0)+((8191&(i=(i+Math.imul(b,pe)|0)+Math.imul(_,de)|0))<<13)|0;ye=((s+Math.imul(_,pe)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(B,X),i=Math.imul(B,Q)+Math.imul(U,X)|0,s=Math.imul(U,Q),n=n+Math.imul(M,te)|0,i=(i+Math.imul(M,re)|0)+Math.imul(D,te)|0,s=s+Math.imul(D,re)|0,n=n+Math.imul(C,ie)|0,i=(i+Math.imul(C,se)|0)+Math.imul(R,ie)|0,s=s+Math.imul(R,se)|0,n=n+Math.imul(T,ae)|0,i=(i+Math.imul(T,ue)|0)+Math.imul(P,ae)|0,s=s+Math.imul(P,ue)|0,n=n+Math.imul(S,le)|0,i=(i+Math.imul(S,fe)|0)+Math.imul(x,le)|0,s=s+Math.imul(x,fe)|0;var Pe=(ye+(n+Math.imul(E,de)|0)|0)+((8191&(i=(i+Math.imul(E,pe)|0)+Math.imul(k,de)|0))<<13)|0;ye=((s+Math.imul(k,pe)|0)+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(B,te),i=Math.imul(B,re)+Math.imul(U,te)|0,s=Math.imul(U,re),n=n+Math.imul(M,ie)|0,i=(i+Math.imul(M,se)|0)+Math.imul(D,ie)|0,s=s+Math.imul(D,se)|0,n=n+Math.imul(C,ae)|0,i=(i+Math.imul(C,ue)|0)+Math.imul(R,ae)|0,s=s+Math.imul(R,ue)|0,n=n+Math.imul(T,le)|0,i=(i+Math.imul(T,fe)|0)+Math.imul(P,le)|0,s=s+Math.imul(P,fe)|0;var Ne=(ye+(n+Math.imul(S,de)|0)|0)+((8191&(i=(i+Math.imul(S,pe)|0)+Math.imul(x,de)|0))<<13)|0;ye=((s+Math.imul(x,pe)|0)+(i>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,n=Math.imul(B,ie),i=Math.imul(B,se)+Math.imul(U,ie)|0,s=Math.imul(U,se),n=n+Math.imul(M,ae)|0,i=(i+Math.imul(M,ue)|0)+Math.imul(D,ae)|0,s=s+Math.imul(D,ue)|0,n=n+Math.imul(C,le)|0,i=(i+Math.imul(C,fe)|0)+Math.imul(R,le)|0,s=s+Math.imul(R,fe)|0;var Ce=(ye+(n+Math.imul(T,de)|0)|0)+((8191&(i=(i+Math.imul(T,pe)|0)+Math.imul(P,de)|0))<<13)|0;ye=((s+Math.imul(P,pe)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul(B,ae),i=Math.imul(B,ue)+Math.imul(U,ae)|0,s=Math.imul(U,ue),n=n+Math.imul(M,le)|0,i=(i+Math.imul(M,fe)|0)+Math.imul(D,le)|0,s=s+Math.imul(D,fe)|0;var Re=(ye+(n+Math.imul(C,de)|0)|0)+((8191&(i=(i+Math.imul(C,pe)|0)+Math.imul(R,de)|0))<<13)|0;ye=((s+Math.imul(R,pe)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,n=Math.imul(B,le),i=Math.imul(B,fe)+Math.imul(U,le)|0,s=Math.imul(U,fe);var Oe=(ye+(n+Math.imul(M,de)|0)|0)+((8191&(i=(i+Math.imul(M,pe)|0)+Math.imul(D,de)|0))<<13)|0;ye=((s+Math.imul(D,pe)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863;var Me=(ye+Math.imul(B,de)|0)+((8191&(i=Math.imul(B,pe)+Math.imul(U,de)|0))<<13)|0;return ye=(Math.imul(U,pe)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,u[0]=me,u[1]=ge,u[2]=ve,u[3]=be,u[4]=_e,u[5]=we,u[6]=Ee,u[7]=ke,u[8]=Ae,u[9]=Se,u[10]=xe,u[11]=Ie,u[12]=Te,u[13]=Pe,u[14]=Ne,u[15]=Ce,u[16]=Re,u[17]=Oe,u[18]=Me,0!=ye&&(u[19]=ye,r.length++),r};function p(e,t,r){return(new m).mulp(e,t,r)}function m(e,t){this.x=e,this.y=t}Math.imul||(d=h),s.prototype.mulTo=function(e,t){var r=this.length+e.length,n=(10===this.length&&10===e.length?d:r<63?h:r<1024?function(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,s=0;s<r.length-1;s++){for(var o=i,a=(i=0,67108863&n),u=Math.min(s,t.length-1),c=Math.max(0,s-e.length+1);c<=u;c++){var l=s-c,f=(0|e.words[l])*(0|t.words[c]),h=67108863&f;a=67108863&(h=h+a|0);i+=(o=(o=o+(f/67108864|0)|0)+(h>>>26)|0)>>>26,o&=67108863}r.words[s]=a,n=o,o=i}return 0!==n?r.words[s]=n:r.length--,r.strip()}:p)(this,e,t);return n},m.prototype.makeRBT=function(e){for(var t=new Array(e),r=s.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},m.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,i=0;i<t;i++)n|=(1&e)<<t-i-1,e>>=1;return n},m.prototype.permute=function(e,t,r,n,i,s){for(var o=0;o<s;o++)n[o]=t[e[o]],i[o]=r[e[o]]},m.prototype.transform=function(e,t,r,n,i,s){this.permute(s,e,t,r,n,i);for(var o=1;o<i;o<<=1)for(var a=o<<1,u=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),l=0;l<i;l+=a)for(var f=u,h=c,d=0;d<o;d++){var p=r[l+d],m=n[l+d],y=f*(v=r[l+d+o])-h*(g=n[l+d+o]),g=f*g+h*v,v=y;r[l+d]=p+v,n[l+d]=m+g,r[l+d+o]=p-v,n[l+d+o]=m-g,d!==a&&(y=u*f-c*h,h=u*h+c*f,f=y)}},m.prototype.guessLen13b=function(e,t){for(var r=1&(i=1|Math.max(t,e)),n=0,i=i/2|0;i;i>>>=1)n++;return 1<<n+1+r},m.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=e[n];e[n]=e[r-n-1],e[r-n-1]=i,i=t[n],t[n]=-t[r-n-1],t[r-n-1]=-i}},m.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var i=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&i,r=i<67108864?0:i/67108864|0}return e},m.prototype.convert13b=function(e,t,r,i){for(var s=0,o=0;o<t;o++)s+=0|e[o],r[2*o]=8191&s,s>>>=13,r[2*o+1]=8191&s,s>>>=13;for(o=2*t;o<i;++o)r[o]=0;n(0===s),n(0==(-8192&s))},m.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},m.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(n),s=this.stub(n),o=new Array(n),a=new Array(n),u=new Array(n),c=new Array(n),l=new Array(n),f=new Array(n),h=r.words;h.length=n,this.convert13b(e.words,e.length,o,n),this.convert13b(t.words,t.length,c,n),this.transform(o,s,a,u,n,i),this.transform(c,s,l,f,n,i);for(var d=0;d<n;d++){var p=a[d]*l[d]-u[d]*f[d];u[d]=a[d]*f[d]+u[d]*l[d],a[d]=p}return this.conjugate(a,u,n),this.transform(a,u,h,s,n,i),this.conjugate(h,s,n),this.normalize13b(h,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r.strip()},s.prototype.mul=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},s.prototype.mulf=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),p(this,e,t)},s.prototype.imul=function(e){return this.clone().mulTo(e,this)},s.prototype.imuln=function(e){n("number"==typeof e),n(e<67108864);for(var t=0,r=0;r<this.length;r++){var i=(0|this.words[r])*e,s=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=s>>>26,this.words[r]=67108863&s}return 0!==t&&(this.words[r]=t,this.length++),this},s.prototype.muln=function(e){return this.clone().imuln(e)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=(e.words[n]&1<<i)>>>i}return t}(e);if(0===t.length)return new s(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var i=r.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(r=r.mul(i));return r},s.prototype.iushln=function(e){n("number"==typeof e&&0<=e);var t=e%26,r=(e-t)/26,i=67108863>>>26-t<<26-t;if(0!=t){for(var s=0,o=0;o<this.length;o++){var a=this.words[o]&i,u=(0|this.words[o])-a<<t;this.words[o]=u|s,s=a>>>26-t}s&&(this.words[o]=s,this.length++)}if(0!=r){for(o=this.length-1;0<=o;o--)this.words[o+r]=this.words[o];for(o=0;o<r;o++)this.words[o]=0;this.length+=r}return this.strip()},s.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},s.prototype.iushrn=function(e,t,r){var i;n("number"==typeof e&&0<=e),i=t?(t-t%26)/26:0;var s=e%26,o=Math.min((e-s)/26,this.length),a=67108863^67108863>>>s<<s,u=r;if(i-=o,i=Math.max(0,i),u){for(var c=0;c<o;c++)u.words[c]=this.words[c];u.length=o}if(0!==o)if(this.length>o)for(this.length-=o,c=0;c<this.length;c++)this.words[c]=this.words[c+o];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;0<=c&&(0!==l||i<=c);c--){var f=0|this.words[c];this.words[c]=l<<26-s|f>>>s,l=f&a}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},s.prototype.shln=function(e){return this.clone().ishln(e)},s.prototype.ushln=function(e){return this.clone().iushln(e)},s.prototype.shrn=function(e){return this.clone().ishrn(e)},s.prototype.ushrn=function(e){return this.clone().iushrn(e)},s.prototype.testn=function(e){n("number"==typeof e&&0<=e);var t=e%26,r=(e-t)/26,i=1<<t;return!(this.length<=r||!(this.words[r]&i))},s.prototype.imaskn=function(e){n("number"==typeof e&&0<=e);var t,r=e%26,i=(e-r)/26;return n(0===this.negative,"imaskn works only with positive numbers"),this.length<=i?this:(0!=r&&i++,this.length=Math.min(i,this.length),0!=r&&(t=67108863^67108863>>>r<<r,this.words[this.length-1]&=t),this.strip())},s.prototype.maskn=function(e){return this.clone().imaskn(e)},s.prototype.iaddn=function(e){return n("number"==typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?(1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0):(this.negative=0,this.isubn(e),this.negative=1),this):this._iaddn(e)},s.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&67108864<=this.words[t];t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},s.prototype.isubn=function(e){if(n("number"==typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,--this.words[t+1];return this.strip()},s.prototype.addn=function(e){return this.clone().iaddn(e)},s.prototype.subn=function(e){return this.clone().isubn(e)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(e,t,r){var i,s=e.length+r;this._expand(s);for(var o=0,a=0;a<e.length;a++){i=(0|this.words[a+r])+o;var u=(0|e.words[a])*t;o=((i-=67108863&u)>>26)-(u/67108864|0);this.words[a+r]=67108863&i}for(;a<this.length-r;a++)o=(i=(0|this.words[a+r])+o)>>26,this.words[a+r]=67108863&i;if(0===o)return this.strip();for(n(-1===o),a=o=0;a<this.length;a++)o=(i=-(0|this.words[a])+o)>>26,this.words[a]=67108863&i;return this.negative=1,this.strip()},s.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),i=e,o=0|i.words[i.length-1];0!=(r=26-this._countBits(o))&&(i=i.ushln(r),n.iushln(r),o=0|i.words[i.length-1]);var a,u=n.length-i.length;if("mod"!==t){(a=new s(null)).length=1+u,a.words=new Array(a.length);for(var c=0;c<a.length;c++)a.words[c]=0}var l=n.clone()._ishlnsubmul(i,1,u);0===l.negative&&(n=l,a&&(a.words[u]=1));for(var f=u-1;0<=f;f--){var h=67108864*(0|n.words[i.length+f])+(0|n.words[i.length+f-1]);h=Math.min(h/o|0,67108863);for(n._ishlnsubmul(i,h,f);0!==n.negative;)h--,n.negative=0,n._ishlnsubmul(i,1,f),n.isZero()||(n.negative^=1);a&&(a.words[f]=h)}return a&&a.strip(),n.strip(),"div"!==t&&0!=r&&n.iushrn(r),{div:a||null,mod:n}},s.prototype.divmod=function(e,t,r){return n(!e.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(i=a.div.neg()),"div"!==t&&(o=a.mod.neg(),r&&0!==o.negative&&o.iadd(e)),{div:i,mod:o}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(i=a.div.neg()),{div:i,mod:a.mod}):0!=(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(o=a.mod.neg(),r&&0!==o.negative&&o.isub(e)),{div:a.div,mod:o}):e.length>this.length||this.cmp(e)<0?{div:new s(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new s(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new s(this.modn(e.words[0]))}:this._wordDiv(e,t);var i,o,a},s.prototype.div=function(e){return this.divmod(e,"div",!1).div},s.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},s.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},s.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),s=r.cmp(n);return s<0||1===i&&0===s?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},s.prototype.modn=function(e){n(e<=67108863);for(var t=(1<<26)%e,r=0,i=this.length-1;0<=i;i--)r=(t*r+(0|this.words[i]))%e;return r},s.prototype.idivn=function(e){n(e<=67108863);for(var t=0,r=this.length-1;0<=r;r--){var i=(0|this.words[r])+67108864*t;this.words[r]=i/e|0,t=i%e}return this.strip()},s.prototype.divn=function(e){return this.clone().idivn(e)},s.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());for(var t=this,r=e.clone(),i=(t=0!==t.negative?t.umod(e):t.clone(),new s(1)),o=new s(0),a=new s(0),u=new s(1),c=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++c;for(var l=r.clone(),f=t.clone();!t.isZero();){for(var h=0,d=1;0==(t.words[0]&d)&&h<26;++h,d<<=1);if(0<h)for(t.iushrn(h);0<h--;)(i.isOdd()||o.isOdd())&&(i.iadd(l),o.isub(f)),i.iushrn(1),o.iushrn(1);for(var p=0,m=1;0==(r.words[0]&m)&&p<26;++p,m<<=1);if(0<p)for(r.iushrn(p);0<p--;)(a.isOdd()||u.isOdd())&&(a.iadd(l),u.isub(f)),a.iushrn(1),u.iushrn(1);0<=t.cmp(r)?(t.isub(r),i.isub(a),o.isub(u)):(r.isub(t),a.isub(i),u.isub(o))}return{a:a,b:u,gcd:r.iushln(c)}},s.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());for(var t,r=this,i=e.clone(),o=(r=0!==r.negative?r.umod(e):r.clone(),new s(1)),a=new s(0),u=i.clone();0<r.cmpn(1)&&0<i.cmpn(1);){for(var c=0,l=1;0==(r.words[0]&l)&&c<26;++c,l<<=1);if(0<c)for(r.iushrn(c);0<c--;)o.isOdd()&&o.iadd(u),o.iushrn(1);for(var f=0,h=1;0==(i.words[0]&h)&&f<26;++f,h<<=1);if(0<f)for(i.iushrn(f);0<f--;)a.isOdd()&&a.iadd(u),a.iushrn(1);0<=r.cmp(i)?(r.isub(i),o.isub(a)):(i.isub(r),a.isub(o))}return(t=0===r.cmpn(1)?o:a).cmpn(0)<0&&t.iadd(e),t},s.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0;for(var n=r.negative=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=t.cmp(r);if(i<0){var s=t;t=r,r=s}else if(0===i||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},s.prototype.invm=function(e){return this.egcd(e).a.umod(e)},s.prototype.isEven=function(){return 0==(1&this.words[0])},s.prototype.isOdd=function(){return 1==(1&this.words[0])},s.prototype.andln=function(e){return this.words[0]&e},s.prototype.bincn=function(e){n("number"==typeof e);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return this._expand(1+r),this.words[r]|=i,this;for(var s=i,o=r;0!==s&&o<this.length;o++){var a=0|this.words[o];s=(a+=s)>>>26;a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(e){var t,r,i=e<0;return 0===this.negative||i?0===this.negative&&i?1:(this.strip(),r=1<this.length?1:(i&&(e=-e),n(e<=67108863,"Number is too big"),(t=0|this.words[0])===e?0:t<e?-1:1),0!==this.negative?0|-r:r):-1},s.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},s.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;0<=r;r--){var n=0|this.words[r],i=0|e.words[r];if(n!=i){n<i?t=-1:i<n&&(t=1);break}}return t},s.prototype.gtn=function(e){return 1===this.cmpn(e)},s.prototype.gt=function(e){return 1===this.cmp(e)},s.prototype.gten=function(e){return 0<=this.cmpn(e)},s.prototype.gte=function(e){return 0<=this.cmp(e)},s.prototype.ltn=function(e){return-1===this.cmpn(e)},s.prototype.lt=function(e){return-1===this.cmp(e)},s.prototype.lten=function(e){return this.cmpn(e)<=0},s.prototype.lte=function(e){return this.cmp(e)<=0},s.prototype.eqn=function(e){return 0===this.cmpn(e)},s.prototype.eq=function(e){return 0===this.cmp(e)},s.red=function(e){return new E(e)},s.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(e){return this.red=e,this},s.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},s.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},s.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},s.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},s.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},s.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},s.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},s.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var y={k256:null,p224:null,p192:null,p25519:null};function g(e,t){this.name=e,this.p=new s(t,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){g.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){g.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){g.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function w(){g.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function E(e){var t;"string"==typeof e?(t=s._prime(e),this.m=t.p,this.prime=t):(n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null)}function k(e){E.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}g.prototype._tmp=function(){var e=new s(null);return e.words=new Array(Math.ceil(this.n/13)),e},g.prototype.ireduce=function(e){for(var t,r=e;this.split(r,this.tmp),(t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength())>this.n;);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):0<n?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},g.prototype.split=function(e,t){e.iushrn(this.n,0,t)},g.prototype.imulK=function(e){return e.imul(this.k)},i(v,g),v.prototype.split=function(e,t){for(var r=Math.min(e.length,9),n=0;n<r;n++)t.words[n]=e.words[n];if(t.length=r,e.length<=9)return e.words[0]=0,void(e.length=1);var i=e.words[9];for(t.words[t.length++]=4194303&i,n=10;n<e.length;n++){var s=0|e.words[n];e.words[n-10]=(4194303&s)<<4|i>>>22,i=s}i>>>=22,0===(e.words[n-10]=i)&&10<e.length?e.length-=10:e.length-=9},v.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(b,g),i(_,g),i(w,g),w.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},s._prime=function(e){if(y[e])return y[e];var t;if("k256"===e)t=new v;else if("p224"===e)t=new b;else if("p192"===e)t=new _;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new w}return y[e]=t},E.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},E.prototype._verify2=function(e,t){n(0==(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},E.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},E.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},E.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return 0<=r.cmp(this.m)&&r.isub(this.m),r._forceRed(this)},E.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return 0<=r.cmp(this.m)&&r.isub(this.m),r},E.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},E.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},E.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},E.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},E.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},E.prototype.isqr=function(e){return this.imul(e,e.clone())},E.prototype.sqr=function(e){return this.mul(e,e)},E.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2==1),3===t){var r=this.m.add(new s(1)).iushrn(2);return this.pow(e,r)}for(var i=this.m.subn(1),o=0;!i.isZero()&&0===i.andln(1);)o++,i.iushrn(1);n(!i.isZero());for(var a=new s(1).toRed(this),u=a.redNeg(),c=this.m.subn(1).iushrn(1),l=new s(2*(l=this.m.bitLength())*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var f=this.pow(l,i),h=this.pow(e,i.addn(1).iushrn(1)),d=this.pow(e,i),p=o;0!==d.cmp(a);){for(var m=d,y=0;0!==m.cmp(a);y++)m=m.redSqr();n(y<p);var g=this.pow(f,new s(1).iushln(p-y-1));h=h.redMul(g),f=g.redSqr(),d=d.redMul(f),p=y}return h},E.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},E.prototype.pow=function(e,t){if(t.isZero())return new s(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new s(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var i=r[0],o=0,a=0,u=t.bitLength()%26;for(0===u&&(u=26),n=t.length-1;0<=n;n--){for(var c=t.words[n],l=u-1;0<=l;l--){var f=c>>l&1;i!==r[0]&&(i=this.sqr(i)),0!=f||0!==o?(o<<=1,o|=f,(4==++a||0===n&&0===l)&&(i=this.mul(i,r[o]),o=a=0)):a=0}u=26}return i},E.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},E.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},s.mont=function(e){return new k(e)},i(k,E),k.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},k.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},k.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return 0<=i.cmp(this.m)?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},k.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new s(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return 0<=i.cmp(this.m)?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},k.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===t||t,this)},{buffer:11}],10:[function(e,t,r){(function(e){t.exports=function(t){var r=new Uint8Array(t);return(e.crypto||e.msCrypto).getRandomValues(r),r}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],11:[function(e,t,r){},{}],12:[function(e,t,r){var n=r;n.version=e("../package.json").version,n.utils=e("./elliptic/utils"),n.rand=e("brorand"),n.curve=e("./elliptic/curve"),n.curves=e("./elliptic/curves"),n.ec=e("./elliptic/ec"),n.eddsa=e("./elliptic/eddsa")},{"../package.json":25,"./elliptic/curve":15,"./elliptic/curves":18,"./elliptic/ec":19,"./elliptic/eddsa":22,"./elliptic/utils":24,brorand:10}],13:[function(e,t,r){var n=e("bn.js"),i=e("../utils"),s=i.getNAF,o=i.getJSF,a=i.assert;function u(e,t){this.type=e,this.p=new n(t.p,16),this.red=t.prime?n.red(t.prime):n.mont(this.p),this.zero=new n(0).toRed(this.red),this.one=new n(1).toRed(this.red),this.two=new n(2).toRed(this.red),this.n=t.n&&new n(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||0<r.cmpn(100)?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function c(e,t){this.curve=e,this.type=t,this.precomputed=null}(t.exports=u).prototype.point=function(){throw new Error("Not implemented")},u.prototype.validate=function(){throw new Error("Not implemented")},u.prototype._fixedNafMul=function(e,t){a(e.precomputed);var r=e._getDoubles(),n=s(t,1,this._bitLength),i=(1<<r.step+1)-(r.step%2==0?2:1);i/=3;for(var o=[],u=0;u<n.length;u+=r.step){var c=0;for(t=u+r.step-1;u<=t;t--)c=(c<<1)+n[t];o.push(c)}for(var l=this.jpoint(null,null,null),f=this.jpoint(null,null,null),h=i;0<h;h--){for(u=0;u<o.length;u++)(c=o[u])===h?f=f.mixedAdd(r.points[u]):c===-h&&(f=f.mixedAdd(r.points[u].neg()));l=l.add(f)}return l.toP()},u.prototype._wnafMul=function(e,t){for(var r=e._getNAFPoints(4),n=r.wnd,i=r.points,o=s(t,n,this._bitLength),u=this.jpoint(null,null,null),c=o.length-1;0<=c;c--){for(t=0;0<=c&&0===o[c];c--)t++;if(0<=c&&t++,u=u.dblp(t),c<0)break;var l=o[c];a(0!==l),u="affine"===e.type?0<l?u.mixedAdd(i[l-1>>1]):u.mixedAdd(i[-l-1>>1].neg()):0<l?u.add(i[l-1>>1]):u.add(i[-l-1>>1].neg())}return"affine"===e.type?u.toP():u},u.prototype._wnafMulAdd=function(e,t,r,n,i){for(var a=this._wnafT1,u=this._wnafT2,c=this._wnafT3,l=0,f=0;f<n;f++){var h=(S=t[f])._getNAFPoints(e);a[f]=h.wnd,u[f]=h.points}for(f=n-1;1<=f;f-=2){var d=f-1,p=f;if(1===a[d]&&1===a[p]){var m=[t[d],null,null,t[p]];0===t[d].y.cmp(t[p].y)?(m[1]=t[d].add(t[p]),m[2]=t[d].toJ().mixedAdd(t[p].neg())):0===t[d].y.cmp(t[p].y.redNeg())?(m[1]=t[d].toJ().mixedAdd(t[p]),m[2]=t[d].add(t[p].neg())):(m[1]=t[d].toJ().mixedAdd(t[p]),m[2]=t[d].toJ().mixedAdd(t[p].neg()));var y=[-3,-1,-5,-7,0,7,5,1,3],g=o(r[d],r[p]);l=Math.max(g[0].length,l);c[d]=new Array(l),c[p]=new Array(l);for(var v=0;v<l;v++){var b=0|g[0][v],_=0|g[1][v];c[d][v]=y[3*(1+b)+(1+_)],c[p][v]=0,u[d]=m}}else c[d]=s(r[d],a[d],this._bitLength),c[p]=s(r[p],a[p],this._bitLength),l=Math.max(c[d].length,l),l=Math.max(c[p].length,l)}var w=this.jpoint(null,null,null),E=this._wnafT4;for(f=l;0<=f;f--){for(var k=0;0<=f;){var A=!0;for(v=0;v<n;v++)E[v]=0|c[v][f],0!==E[v]&&(A=!1);if(!A)break;k++,f--}if(0<=f&&k++,w=w.dblp(k),f<0)break;for(v=0;v<n;v++){var S,x=E[v];0!==x&&(0<x?S=u[v][x-1>>1]:x<0&&(S=u[v][-x-1>>1].neg()),w="affine"===S.type?w.mixedAdd(S):w.add(S))}}for(f=0;f<n;f++)u[f]=null;return i?w:w.toP()},(u.BasePoint=c).prototype.eq=function(){throw new Error("Not implemented")},c.prototype.validate=function(){return this.curve.validate(this)},u.prototype.decodePoint=function(e,t){e=i.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*r)return 6===e[0]?a(e[e.length-1]%2==0):7===e[0]&&a(e[e.length-1]%2==1),this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw new Error("Unknown point format")},c.prototype.encodeCompressed=function(e){return this.encode(e,!0)},c.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},c.prototype.encode=function(e,t){return i.encode(this._encode(t),e)},c.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},c.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},c.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<t;i+=e){for(var s=0;s<e;s++)n=n.dbl();r.push(n)}return{step:e,points:r}},c.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,n=1==r?null:this.dbl(),i=1;i<r;i++)t[i]=t[i-1].add(n);return{wnd:e,points:t}},c.prototype._getBeta=function(){return null},c.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t}},{"../utils":24,"bn.js":9}],14:[function(e,t,r){t.exports={}},{}],15:[function(e,t,r){var n=r;n.base=e("./base"),n.short=e("./short"),n.mont=e("./mont"),n.edwards=e("./edwards")},{"./base":13,"./edwards":14,"./mont":16,"./short":17}],16:[function(e,t,r){arguments[4][14][0].apply(r,arguments)},{dup:14}],17:[function(e,t,r){var n=e("../utils"),i=e("bn.js"),s=e("inherits"),o=e("./base"),a=n.assert;function u(e){o.call(this,"short",e),this.a=new i(e.a,16).toRed(this.red),this.b=new i(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function c(e,t,r,n){o.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new i(t,16),this.y=new i(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function l(e,t,r,n){o.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new i(0)):(this.x=new i(t,16),this.y=new i(r,16),this.z=new i(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}s(u,o),(t.exports=u).prototype._getEndomorphism=function(e){var t,r,n,s;if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3))return n=e.beta?new i(e.beta,16).toRed(this.red):(n=(r=this._getEndoRoots(this.p))[0].cmp(r[1])<0?r[0]:r[1]).toRed(this.red),e.lambda?t=new i(e.lambda,16):(s=this._getEndoRoots(this.n),0===this.g.mul(s[0]).x.cmp(this.g.x.redMul(n))?t=s[0]:(t=s[1],a(0===this.g.mul(t).x.cmp(this.g.x.redMul(n))))),{beta:n,lambda:t,basis:e.basis?e.basis.map((function(e){return{a:new i(e.a,16),b:new i(e.b,16)}})):this._getEndoBasis(t)}},u.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:i.mont(e),r=new i(2).toRed(t).redInvm(),n=r.redNeg(),s=new i(3).toRed(t).redNeg().redSqrt().redMul(r);return[n.redAdd(s).fromRed(),n.redSub(s).fromRed()]},u.prototype._getEndoBasis=function(e){for(var t,r,n,s,o,a,u,c=this.n.ushrn(Math.floor(this.n.bitLength()/2)),l=e,f=this.n.clone(),h=new i(1),d=new i(0),p=new i(0),m=new i(1),y=0;0!==l.cmpn(0);){var g=f.div(l),v=f.sub(g.mul(l)),b=p.sub(g.mul(h)),_=m.sub(g.mul(d));if(!n&&v.cmp(c)<0)t=u.neg(),r=h,n=v.neg(),s=b;else if(n&&2==++y)break;f=l,l=u=v,p=h,h=b,m=d,d=_}o=v.neg(),a=b;var w=n.sqr().add(s.sqr());return 0<=o.sqr().add(a.sqr()).cmp(w)&&(o=t,a=r),n.negative&&(n=n.neg(),s=s.neg()),o.negative&&(o=o.neg(),a=a.neg()),[{a:n,b:s},{a:o,b:a}]},u.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],n=t[1],i=n.b.mul(e).divRound(this.n),s=r.b.neg().mul(e).divRound(this.n),o=i.mul(r.a),a=s.mul(n.a),u=i.mul(r.b),c=s.mul(n.b);return{k1:e.sub(o).sub(a),k2:u.add(c).neg()}},u.prototype.pointFromX=function(e,t){(e=new i(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var s=n.fromRed().isOdd();return(t&&!s||!t&&s)&&(n=n.redNeg()),this.point(e,n)},u.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,n=this.a.redMul(t),i=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},u.prototype._endoWnafMulAdd=function(e,t,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,s=0;s<e.length;s++){var o=this._endoSplit(t[s]),a=e[s],u=a._getBeta();o.k1.negative&&(o.k1.ineg(),a=a.neg(!0)),o.k2.negative&&(o.k2.ineg(),u=u.neg(!0)),n[2*s]=a,n[2*s+1]=u,i[2*s]=o.k1,i[2*s+1]=o.k2}for(var c=this._wnafMulAdd(1,n,i,2*s,r),l=0;l<2*s;l++)n[l]=null,i[l]=null;return c},s(c,o.BasePoint),u.prototype.point=function(e,t,r){return new c(this,e,t,r)},u.prototype.pointFromJSON=function(e,t){return c.fromJSON(this,e,t)},c.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t,r,n=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);return e&&(t=this.curve,r=function(e){return t.point(e.x.redMul(t.endo.beta),e.y)},(e.beta=n).precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(r)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(r)}}),n}},c.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},c.fromJSON=function(e,t,r){"string"==typeof t&&(t=JSON.parse(t));var n=e.point(t[0],t[1],r);if(!t[2])return n;function i(t){return e.point(t[0],t[1],r)}var s=t[2];return n.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[n].concat(s.doubles.points.map(i))},naf:s.naf&&{wnd:s.naf.wnd,points:[n].concat(s.naf.points.map(i))}},n},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return this.inf},c.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},c.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),n=e.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(n),s=i.redSqr().redISub(this.x.redAdd(this.x)),o=i.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,o)},c.prototype.getX=function(){return this.x.fromRed()},c.prototype.getY=function(){return this.y.fromRed()},c.prototype.mul=function(e){return e=new i(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},c.prototype.mulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},c.prototype.jmulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},c.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},c.prototype.neg=function(e){if(this.inf)return this;var t,r,n=this.curve.point(this.x,this.y.redNeg());return e&&this.precomputed&&(t=this.precomputed,r=function(e){return e.neg()},n.precomputed={naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(r)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(r)}}),n},c.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},s(l,o.BasePoint),u.prototype.jpoint=function(e,t,r){return new l(this,e,t,r)},l.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(r,n)},l.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},l.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(t),i=e.x.redMul(r),s=this.y.redMul(t.redMul(e.z)),o=e.y.redMul(r.redMul(this.z)),a=n.redSub(i),u=s.redSub(o);if(0===a.cmpn(0))return 0!==u.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=a.redSqr(),l=c.redMul(a),f=n.redMul(c),h=u.redSqr().redIAdd(l).redISub(f).redISub(f),d=u.redMul(f.redISub(h)).redISub(s.redMul(l)),p=this.z.redMul(e.z).redMul(a);return this.curve.jpoint(h,d,p)},l.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,n=e.x.redMul(t),i=this.y,s=e.y.redMul(t).redMul(this.z),o=r.redSub(n),a=i.redSub(s);if(0===o.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=o.redSqr(),c=u.redMul(o),l=r.redMul(u),f=a.redSqr().redIAdd(c).redISub(l).redISub(l),h=a.redMul(l.redISub(f)).redISub(i.redMul(c)),d=this.z.redMul(o);return this.curve.jpoint(f,h,d)},l.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var t=this,r=0;r<e;r++)t=t.dbl();return t}var n=this.curve.a,i=this.curve.tinv,s=this.x,o=this.y,a=this.z,u=a.redSqr().redSqr(),c=o.redAdd(o);for(r=0;r<e;r++){var l=s.redSqr(),f=c.redSqr(),h=f.redSqr(),d=l.redAdd(l).redIAdd(l).redIAdd(n.redMul(u)),p=s.redMul(f),m=d.redSqr().redISub(p.redAdd(p)),y=p.redISub(m),g=(g=d.redMul(y)).redIAdd(g).redISub(h),v=c.redMul(a);r+1<e&&(u=u.redMul(h)),s=m,a=v,c=g}return this.curve.jpoint(s,c.redMul(i),a)},l.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},l.prototype._zeroDbl=function(){var e,t,r,n,i,s,o,a,u,c,l,f,h,d,p,m,y=this.zOne?(r=this.x.redSqr(),i=(n=this.y.redSqr()).redSqr(),s=(s=this.x.redAdd(n).redSqr().redISub(r).redISub(i)).redIAdd(s),a=(o=r.redAdd(r).redIAdd(r)).redSqr().redISub(s).redISub(s),u=(u=(u=i.redIAdd(i)).redIAdd(u)).redIAdd(u),e=a,t=o.redMul(s.redISub(a)).redISub(u),this.y.redAdd(this.y)):(c=this.x.redSqr(),f=(l=this.y.redSqr()).redSqr(),h=(h=this.x.redAdd(l).redSqr().redISub(c).redISub(f)).redIAdd(h),p=(d=c.redAdd(c).redIAdd(c)).redSqr(),m=(m=(m=f.redIAdd(f)).redIAdd(m)).redIAdd(m),e=p.redISub(h).redISub(h),t=d.redMul(h.redISub(e)).redISub(m),(y=this.y.redMul(this.z)).redIAdd(y));return this.curve.jpoint(e,t,y)},l.prototype._threeDbl=function(){var e,t,r,n,i,s,o,a,u,c,l,f,h,d,p,m,y;return this.zOne?(r=this.x.redSqr(),i=(n=this.y.redSqr()).redSqr(),s=(s=this.x.redAdd(n).redSqr().redISub(r).redISub(i)).redIAdd(s),u=a=(o=r.redAdd(r).redIAdd(r).redIAdd(this.curve.a)).redSqr().redISub(s).redISub(s),c=(c=(c=i.redIAdd(i)).redIAdd(c)).redIAdd(c),e=o.redMul(s.redISub(a)).redISub(c),t=this.y.redAdd(this.y)):(l=this.z.redSqr(),f=this.y.redSqr(),h=this.x.redMul(f),d=(d=this.x.redSub(l).redMul(this.x.redAdd(l))).redAdd(d).redIAdd(d),m=(p=(p=h.redIAdd(h)).redIAdd(p)).redAdd(p),u=d.redSqr().redISub(m),t=this.y.redAdd(this.z).redSqr().redISub(f).redISub(l),y=(y=(y=(y=f.redSqr()).redIAdd(y)).redIAdd(y)).redIAdd(y),e=d.redMul(p.redISub(u)).redISub(y)),this.curve.jpoint(u,e,t)},l.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),s=t.redSqr(),o=r.redSqr(),a=s.redAdd(s).redIAdd(s).redIAdd(e.redMul(i)),u=t.redAdd(t),c=(u=u.redIAdd(u)).redMul(o),l=a.redSqr().redISub(c.redAdd(c)),f=c.redISub(l),h=o.redSqr();h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var d=a.redMul(f).redISub(h),p=r.redAdd(r).redMul(n);return this.curve.jpoint(l,d,p)},l.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),n=t.redSqr(),i=e.redAdd(e).redIAdd(e),s=i.redSqr(),o=this.x.redAdd(t).redSqr().redISub(e).redISub(n),a=(o=(o=(o=o.redIAdd(o)).redAdd(o).redIAdd(o)).redISub(s)).redSqr(),u=n.redIAdd(n);u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var c=i.redIAdd(o).redSqr().redISub(s).redISub(a).redISub(u),l=t.redMul(c);l=(l=l.redIAdd(l)).redIAdd(l);var f=this.x.redMul(a).redISub(l);f=(f=f.redIAdd(f)).redIAdd(f);var h=this.y.redMul(c.redMul(u.redISub(c)).redISub(o.redMul(a)));h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var d=this.z.redAdd(o).redSqr().redISub(r).redISub(a);return this.curve.jpoint(f,h,d)},l.prototype.mul=function(e,t){return e=new i(e,t),this.curve._wnafMul(this,e)},l.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var n=t.redMul(this.z),i=r.redMul(e.z);return 0===this.y.redMul(i).redISub(e.y.redMul(n)).cmpn(0)},l.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var n=e.clone(),i=this.curve.redN.redMul(t);;){if(n.iadd(this.curve.n),0<=n.cmp(this.curve.p))return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},l.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},l.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},{"../utils":24,"./base":13,"bn.js":9,inherits:39}],18:[function(e,t,r){var n,i=r,s=e("hash.js"),o=e("./curve"),a=e("./utils").assert;function u(e){"short"===e.type?this.curve=new o.short(e):"edwards"===e.type?this.curve=new o.edwards(e):this.curve=new o.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,a(this.g.validate(),"Invalid curve"),a(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function c(e,t){Object.defineProperty(i,e,{configurable:!0,enumerable:!0,get:function(){var r=new u(t);return Object.defineProperty(i,e,{configurable:!0,enumerable:!0,value:r}),r}})}i.PresetCurve=u,c("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:s.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),c("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:s.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),c("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:s.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),c("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:s.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),c("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:s.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),c("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:s.sha256,gRed:!1,g:["9"]}),c("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:s.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{n=e("./precomputed/secp256k1")}catch(e){n=void 0}c("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:s.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",n]})},{"./curve":15,"./precomputed/secp256k1":23,"./utils":24,"hash.js":26}],19:[function(e,t,r){var n=e("bn.js"),i=e("hmac-drbg"),s=e("../utils"),o=e("../curves"),a=e("brorand"),u=s.assert,c=e("./key"),l=e("./signature");function f(e){if(!(this instanceof f))return new f(e);"string"==typeof e&&(u(o.hasOwnProperty(e),"Unknown curve "+e),e=o[e]),e instanceof o.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}(t.exports=f).prototype.keyPair=function(e){return new c(this,e)},f.prototype.keyFromPrivate=function(e,t){return c.fromPrivate(this,e,t)},f.prototype.keyFromPublic=function(e,t){return c.fromPublic(this,e,t)},f.prototype.genKeyPair=function(e){e=e||{};for(var t=new i({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||a(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),s=this.n.sub(new n(2));;){var o=new n(t.generate(r));if(!(0<o.cmp(s)))return o.iaddn(1),this.keyFromPrivate(o)}},f.prototype._truncateToN=function(e,t){var r=8*e.byteLength()-this.n.bitLength();return 0<r&&(e=e.ushrn(r)),!t&&0<=e.cmp(this.n)?e.sub(this.n):e},f.prototype.sign=function(e,t,r,s){"object"==typeof r&&(s=r,r=null),s=s||{},t=this.keyFromPrivate(t,r),e=this._truncateToN(new n(e,16));for(var o=this.n.byteLength(),a=t.getPrivate().toArray("be",o),u=e.toArray("be",o),c=new i({hash:this.hash,entropy:a,nonce:u,pers:s.pers,persEnc:s.persEnc||"utf8"}),f=this.n.sub(new n(1)),h=0;;h++){var d=s.k?s.k(h):new n(c.generate(this.n.byteLength()));if(!((d=this._truncateToN(d,!0)).cmpn(1)<=0||0<=d.cmp(f))){var p=this.g.mul(d);if(!p.isInfinity()){var m=p.getX(),y=m.umod(this.n);if(0!==y.cmpn(0)){var g=d.invm(this.n).mul(y.mul(t.getPrivate()).iadd(e));if(0!==(g=g.umod(this.n)).cmpn(0)){var v=(p.getY().isOdd()?1:0)|(0!==m.cmp(y)?2:0);return s.canonical&&0<g.cmp(this.nh)&&(g=this.n.sub(g),v^=1),new l({r:y,s:g,recoveryParam:v})}}}}}},f.prototype.verify=function(e,t,r,i){e=this._truncateToN(new n(e,16)),r=this.keyFromPublic(r,i);var s=(t=new l(t,"hex")).r,o=t.s;if(s.cmpn(1)<0||0<=s.cmp(this.n))return!1;if(o.cmpn(1)<0||0<=o.cmp(this.n))return!1;var a,u=o.invm(this.n),c=u.mul(e).umod(this.n),f=u.mul(s).umod(this.n);return this.curve._maxwellTrick?!(a=this.g.jmulAdd(c,r.getPublic(),f)).isInfinity()&&a.eqXToP(s):!(a=this.g.mulAdd(c,r.getPublic(),f)).isInfinity()&&0===a.getX().umod(this.n).cmp(s)},f.prototype.recoverPubKey=function(e,t,r,i){u((3&r)===r,"The recovery param is more than two bits"),t=new l(t,i);var s=this.n,o=new n(e),a=t.r,c=t.s,f=1&r,h=r>>1;if(0<=a.cmp(this.curve.p.umod(this.curve.n))&&h)throw new Error("Unable to find sencond key candinate");a=h?this.curve.pointFromX(a.add(this.curve.n),f):this.curve.pointFromX(a,f);var d=t.r.invm(s),p=s.sub(o).mul(d).umod(s),m=c.mul(d).umod(s);return this.g.mulAdd(p,a,m)},f.prototype.getKeyRecoveryParam=function(e,t,r,n){if(null!==(t=new l(t,n)).recoveryParam)return t.recoveryParam;for(var i,s=0;s<4;s++){try{i=this.recoverPubKey(e,t,s)}catch(e){continue}if(i.eq(r))return s}throw new Error("Unable to find valid recovery factor")}},{"../curves":18,"../utils":24,"./key":20,"./signature":21,"bn.js":9,brorand:10,"hmac-drbg":38}],20:[function(e,t,r){var n=e("bn.js"),i=e("../utils").assert;function s(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}(t.exports=s).fromPublic=function(e,t,r){return t instanceof s?t:new s(e,{pub:t,pubEnc:r})},s.fromPrivate=function(e,t,r){return t instanceof s?t:new s(e,{priv:t,privEnc:r})},s.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},s.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},s.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},s.prototype._importPrivate=function(e,t){this.priv=new n(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},s.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?i(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||i(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},s.prototype.derive=function(e){return e.mul(this.priv).getX()},s.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},s.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},s.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{"../utils":24,"bn.js":9}],21:[function(e,t,r){var n=e("bn.js"),i=e("../utils"),s=i.assert;function o(e,t){if(e instanceof o)return e;this._importDER(e,t)||(s(e.r&&e.s,"Signature without r or s"),this.r=new n(e.r,16),this.s=new n(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}function a(){this.place=0}function u(e,t){var r=e[t.place++];if(!(128&r))return r;var n=15&r;if(0==n||4<n)return!1;for(var i=0,s=0,o=t.place;s<n;s++,o++)i<<=8,i|=e[o],i>>>=0;return!(i<=127)&&(t.place=o,i)}function c(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return 0===t?e:e.slice(t)}function l(e,t){if(t<128)e.push(t);else{var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}}(t.exports=o).prototype._importDER=function(e,t){e=i.toArray(e,t);var r=new a;if(48!==e[r.place++])return!1;var s=u(e,r);if(!1===s)return!1;if(s+r.place!==e.length)return!1;if(2!==e[r.place++])return!1;var o=u(e,r);if(!1===o)return!1;var c=e.slice(r.place,o+r.place);if(r.place+=o,2!==e[r.place++])return!1;var l=u(e,r);if(!1===l)return!1;if(e.length!==l+r.place)return!1;var f=e.slice(r.place,l+r.place);if(0===c[0]){if(!(128&c[1]))return!1;c=c.slice(1)}if(0===f[0]){if(!(128&f[1]))return!1;f=f.slice(1)}return this.r=new n(c),this.s=new n(f),!(this.recoveryParam=null)},o.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r)),t=c(t),r=c(r);!(r[0]||128&r[1]);)r=r.slice(1);var n=[2];l(n,t.length),(n=n.concat(t)).push(2),l(n,r.length);var s=n.concat(r),o=[48];return l(o,s.length),o=o.concat(s),i.encode(o,e)}},{"../utils":24,"bn.js":9}],22:[function(e,t,r){arguments[4][14][0].apply(r,arguments)},{dup:14}],23:[function(e,t,r){t.exports=void 0},{}],24:[function(e,t,r){var n=r,i=e("bn.js"),s=e("minimalistic-assert"),o=e("minimalistic-crypto-utils");n.assert=s,n.toArray=o.toArray,n.zero2=o.zero2,n.toHex=o.toHex,n.encode=o.encode,n.getNAF=function(e,t,r){var n=new Array(Math.max(e.bitLength(),r)+1);n.fill(0);for(var i=1<<t+1,s=e.clone(),o=0;o<n.length;o++){var a,u=s.andln(i-1);s.isOdd()?(a=(i>>1)-1<u?(i>>1)-u:u,s.isubn(a)):a=0,n[o]=a,s.iushrn(1)}return n},n.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var n=0,i=0;0<e.cmpn(-n)||0<t.cmpn(-i);){var s,o,a,u=e.andln(3)+n&3,c=t.andln(3)+i&3;3===u&&(u=-1),3===c&&(c=-1),s=0==(1&u)?0:3!=(o=e.andln(7)+n&7)&&5!==o||2!==c?u:-u,r[0].push(s),a=0==(1&c)?0:3!=(o=t.andln(7)+i&7)&&5!==o||2!==u?c:-c,r[1].push(a),2*n===s+1&&(n=1-n),2*i===a+1&&(i=1-i),e.iushrn(1),t.iushrn(1)}return r},n.cachedProperty=function(e,t,r){var n="_"+t;e.prototype[t]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}},n.parseBytes=function(e){return"string"==typeof e?n.toArray(e,"hex"):e},n.intFromLE=function(e){return new i(e,"hex","le")}},{"bn.js":9,"minimalistic-assert":41,"minimalistic-crypto-utils":42}],25:[function(e,t,r){t.exports={version:"6.5.3"}},{}],26:[function(e,t,r){var n=r;n.utils=e("./hash/utils"),n.common=e("./hash/common"),n.sha=e("./hash/sha"),n.ripemd=e("./hash/ripemd"),n.hmac=e("./hash/hmac"),n.sha1=n.sha.sha1,n.sha256=n.sha.sha256,n.sha224=n.sha.sha224,n.sha384=n.sha.sha384,n.sha512=n.sha.sha512,n.ripemd160=n.ripemd.ripemd160},{"./hash/common":27,"./hash/hmac":28,"./hash/ripemd":29,"./hash/sha":30,"./hash/utils":37}],27:[function(e,t,r){var n=e("./utils"),i=e("minimalistic-assert");function s(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}(r.BlockHash=s).prototype.update=function(e,t){if(e=n.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var r=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-r,e.length),0===this.pending.length&&(this.pending=null),e=n.join32(e,0,e.length-r,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this},s.prototype.digest=function(e){return this.update(this._pad()),i(null===this.pending),this._digest(e)},s.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,n=new Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++)n[i]=0;if(e<<=3,"big"===this.endian){for(var s=8;s<this.padLength;s++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=e>>>24&255,n[i++]=e>>>16&255,n[i++]=e>>>8&255,n[i++]=255&e}else for(n[i++]=255&e,n[i++]=e>>>8&255,n[i++]=e>>>16&255,n[i++]=e>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,s=8;s<this.padLength;s++)n[i++]=0;return n}},{"./utils":37,"minimalistic-assert":41}],28:[function(e,t,r){var n=e("./utils"),i=e("minimalistic-assert");function s(e,t,r){if(!(this instanceof s))return new s(e,t,r);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(n.toArray(t,r))}(t.exports=s).prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),i(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},s.prototype.update=function(e,t){return this.inner.update(e,t),this},s.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}},{"./utils":37,"minimalistic-assert":41}],29:[function(e,t,r){var n=e("./utils"),i=e("./common"),s=n.rotl32,o=n.sum32,a=n.sum32_3,u=n.sum32_4,c=i.BlockHash;function l(){if(!(this instanceof l))return new l;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function f(e,t,r,n){return e<=15?t^r^n:e<=31?t&r|~t&n:e<=47?(t|~r)^n:e<=63?t&n|r&~n:t^(r|~n)}n.inherits(l,c),(r.ripemd160=l).blockSize=512,l.outSize=160,l.hmacStrength=192,l.padLength=64,l.prototype._update=function(e,t){for(var r,n,i=_=this.h[0],c=A=this.h[1],l=k=this.h[2],y=E=this.h[3],g=w=this.h[4],v=0;v<80;v++){var b=o(s(u(_,f(v,A,k,E),e[h[v]+t],(n=v)<=15?0:n<=31?1518500249:n<=47?1859775393:n<=63?2400959708:2840853838),p[v]),w),_=w,w=E,E=s(k,10),k=A,A=b;b=o(s(u(i,f(79-v,c,l,y),e[d[v]+t],(r=v)<=15?1352829926:r<=31?1548603684:r<=47?1836072691:r<=63?2053994217:0),m[v]),g),i=g,g=y,y=s(l,10),l=c,c=b}b=a(this.h[1],k,y),this.h[1]=a(this.h[2],E,g),this.h[2]=a(this.h[3],w,i),this.h[3]=a(this.h[4],_,c),this.h[4]=a(this.h[0],A,l),this.h[0]=b},l.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"little"):n.split32(this.h,"little")};var h=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],d=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],p=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],m=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},{"./common":27,"./utils":37}],30:[function(e,t,r){r.sha1=e("./sha/1"),r.sha224=e("./sha/224"),r.sha256=e("./sha/256"),r.sha384=e("./sha/384"),r.sha512=e("./sha/512")},{"./sha/1":31,"./sha/224":32,"./sha/256":33,"./sha/384":34,"./sha/512":35}],31:[function(e,t,r){arguments[4][14][0].apply(r,arguments)},{dup:14}],32:[function(e,t,r){arguments[4][14][0].apply(r,arguments)},{dup:14}],33:[function(e,t,r){var n=e("../utils"),i=e("../common"),s=e("./common"),o=e("minimalistic-assert"),a=n.sum32,u=n.sum32_4,c=n.sum32_5,l=s.ch32,f=s.maj32,h=s.s0_256,d=s.s1_256,p=s.g0_256,m=s.g1_256,y=i.BlockHash,g=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function v(){if(!(this instanceof v))return new v;y.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=g,this.W=new Array(64)}n.inherits(v,y),(t.exports=v).blockSize=512,v.outSize=256,v.hmacStrength=192,v.padLength=64,v.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=u(m(r[n-2]),r[n-7],p(r[n-15]),r[n-16]);var i=this.h[0],s=this.h[1],y=this.h[2],g=this.h[3],v=this.h[4],b=this.h[5],_=this.h[6],w=this.h[7];for(o(this.k.length===r.length),n=0;n<r.length;n++){var E=c(w,d(v),l(v,b,_),this.k[n],r[n]),k=a(h(i),f(i,s,y));w=_,_=b,b=v,v=a(g,E),g=y,y=s,s=i,i=a(E,k)}this.h[0]=a(this.h[0],i),this.h[1]=a(this.h[1],s),this.h[2]=a(this.h[2],y),this.h[3]=a(this.h[3],g),this.h[4]=a(this.h[4],v),this.h[5]=a(this.h[5],b),this.h[6]=a(this.h[6],_),this.h[7]=a(this.h[7],w)},v.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},{"../common":27,"../utils":37,"./common":36,"minimalistic-assert":41}],34:[function(e,t,r){arguments[4][14][0].apply(r,arguments)},{dup:14}],35:[function(e,t,r){var n=e("../utils"),i=e("../common"),s=e("minimalistic-assert"),o=n.rotr64_hi,a=n.rotr64_lo,u=n.shr64_hi,c=n.shr64_lo,l=n.sum64,f=n.sum64_hi,h=n.sum64_lo,d=n.sum64_4_hi,p=n.sum64_4_lo,m=n.sum64_5_hi,y=n.sum64_5_lo,g=i.BlockHash,v=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function b(){if(!(this instanceof b))return new b;g.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=v,this.W=new Array(160)}n.inherits(b,g),(t.exports=b).blockSize=1024,b.outSize=512,b.hmacStrength=192,b.padLength=128,b.prototype._prepareBlock=function(e,t){for(var r=this.W,n=0;n<32;n++)r[n]=e[t+n];for(;n<r.length;n+=2){var i=function(e,t){var r=o(e,t,19)^o(t,e,29)^u(e,t,6);return r<0&&(r+=4294967296),r}(r[n-4],r[n-3]),s=function(e,t){var r=a(e,t,19)^a(t,e,29)^c(e,t,6);return r<0&&(r+=4294967296),r}(r[n-4],r[n-3]),l=r[n-14],f=r[n-13],h=function(e,t){var r=o(e,t,1)^o(e,t,8)^u(e,t,7);return r<0&&(r+=4294967296),r}(r[n-30],r[n-29]),m=function(e,t){var r=a(e,t,1)^a(e,t,8)^c(e,t,7);return r<0&&(r+=4294967296),r}(r[n-30],r[n-29]),y=r[n-32],g=r[n-31];r[n]=d(i,s,l,f,h,m,y,g),r[n+1]=p(i,s,l,f,h,m,y,g)}},b.prototype._update=function(e,t){this._prepareBlock(e,t);var r=this.W,n=this.h[0],i=this.h[1],u=this.h[2],c=this.h[3],d=this.h[4],p=this.h[5],g=this.h[6],v=this.h[7],b=this.h[8],_=this.h[9],w=this.h[10],E=this.h[11],k=this.h[12],A=this.h[13],S=this.h[14],x=this.h[15];s(this.k.length===r.length);for(var I=0;I<r.length;I+=2){var T=S,P=x,N=function(e,t){var r=o(e,t,14)^o(e,t,18)^o(t,e,9);return r<0&&(r+=4294967296),r}(b,_),C=function(e,t){var r=a(e,t,14)^a(e,t,18)^a(t,e,9);return r<0&&(r+=4294967296),r}(b,_),R=function(e,t,r){var n=e&t^~e&r;return n<0&&(n+=4294967296),n}(b,w,k),O=function(e,t,r){var n=e&t^~e&r;return n<0&&(n+=4294967296),n}(_,E,A),M=this.k[I],D=this.k[I+1],L=r[I],B=r[I+1],U=m(T,P,N,C,R,O,M,D,L,B),j=y(T,P,N,C,R,O,M,D,L,B),K=(T=function(e,t){var r=o(e,t,28)^o(t,e,2)^o(t,e,7);return r<0&&(r+=4294967296),r}(n,i),P=function(e,t){var r=a(e,t,28)^a(t,e,2)^a(t,e,7);return r<0&&(r+=4294967296),r}(n,i),N=function(e,t,r){var n=e&t^e&r^t&r;return n<0&&(n+=4294967296),n}(n,u,d),C=function(e,t,r){var n=e&t^e&r^t&r;return n<0&&(n+=4294967296),n}(i,c,p),f(T,P,N,C)),F=h(T,P,N,C);S=k,x=A,k=w,A=E,w=b,E=_,b=f(g,v,U,j),_=h(v,v,U,j),g=d,v=p,d=u,p=c,u=n,c=i,n=f(U,j,K,F),i=h(U,j,K,F)}l(this.h,0,n,i),l(this.h,2,u,c),l(this.h,4,d,p),l(this.h,6,g,v),l(this.h,8,b,_),l(this.h,10,w,E),l(this.h,12,k,A),l(this.h,14,S,x)},b.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},{"../common":27,"../utils":37,"minimalistic-assert":41}],36:[function(e,t,r){var n=e("../utils").rotr32;function i(e,t,r){return e&t^~e&r}function s(e,t,r){return e&t^e&r^t&r}r.ft_1=function(e,t,r,n){return 0===e?i(t,r,n):1===e||3===e?t^r^n:2===e?s(t,r,n):void 0},r.ch32=i,r.maj32=s,r.p32=function(e,t,r){return e^t^r},r.s0_256=function(e){return n(e,2)^n(e,13)^n(e,22)},r.s1_256=function(e){return n(e,6)^n(e,11)^n(e,25)},r.g0_256=function(e){return n(e,7)^n(e,18)^e>>>3},r.g1_256=function(e){return n(e,17)^n(e,19)^e>>>10}},{"../utils":37}],37:[function(e,t,r){var n=e("minimalistic-assert"),i=e("inherits");function s(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function o(e){return 1===e.length?"0"+e:e}function a(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}r.inherits=i,r.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16))}else for(var n=0;n<e.length;n++){var i=e.charCodeAt(n),s=i>>8,o=255&i;s?r.push(s,o):r.push(o)}else for(n=0;n<e.length;n++)r[n]=0|e[n];return r},r.toHex=function(e){for(var t="",r=0;r<e.length;r++)t+=o(e[r].toString(16));return t},r.htonl=s,r.toHex32=function(e,t){for(var r="",n=0;n<e.length;n++){var i=e[n];"little"===t&&(i=s(i)),r+=a(i.toString(16))}return r},r.zero2=o,r.zero8=a,r.join32=function(e,t,r,i){var s=r-t;n(s%4==0);for(var o=new Array(s/4),a=0,u=t;a<o.length;a++,u+=4){var c="big"===i?e[u]<<24|e[u+1]<<16|e[u+2]<<8|e[u+3]:e[u+3]<<24|e[u+2]<<16|e[u+1]<<8|e[u];o[a]=c>>>0}return o},r.split32=function(e,t){for(var r=new Array(4*e.length),n=0,i=0;n<e.length;n++,i+=4){var s=e[n];"big"===t?(r[i]=s>>>24,r[i+1]=s>>>16&255,r[i+2]=s>>>8&255,r[i+3]=255&s):(r[i+3]=s>>>24,r[i+2]=s>>>16&255,r[i+1]=s>>>8&255,r[i]=255&s)}return r},r.rotr32=function(e,t){return e>>>t|e<<32-t},r.rotl32=function(e,t){return e<<t|e>>>32-t},r.sum32=function(e,t){return e+t>>>0},r.sum32_3=function(e,t,r){return e+t+r>>>0},r.sum32_4=function(e,t,r,n){return e+t+r+n>>>0},r.sum32_5=function(e,t,r,n,i){return e+t+r+n+i>>>0},r.sum64=function(e,t,r,n){var i=e[t],s=n+e[t+1]>>>0,o=(s<n?1:0)+r+i;e[t]=o>>>0,e[t+1]=s},r.sum64_hi=function(e,t,r,n){return(t+n>>>0<t?1:0)+e+r>>>0},r.sum64_lo=function(e,t,r,n){return t+n>>>0},r.sum64_4_hi=function(e,t,r,n,i,s,o,a){var u=0,c=t;return u+=(c=c+n>>>0)<t?1:0,u+=(c=c+s>>>0)<s?1:0,e+r+i+o+(u+=(c=c+a>>>0)<a?1:0)>>>0},r.sum64_4_lo=function(e,t,r,n,i,s,o,a){return t+n+s+a>>>0},r.sum64_5_hi=function(e,t,r,n,i,s,o,a,u,c){var l=0,f=t;return l+=(f=f+n>>>0)<t?1:0,l+=(f=f+s>>>0)<s?1:0,l+=(f=f+a>>>0)<a?1:0,e+r+i+o+u+(l+=(f=f+c>>>0)<c?1:0)>>>0},r.sum64_5_lo=function(e,t,r,n,i,s,o,a,u,c){return t+n+s+a+c>>>0},r.rotr64_hi=function(e,t,r){return(t<<32-r|e>>>r)>>>0},r.rotr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0},r.shr64_hi=function(e,t,r){return e>>>r},r.shr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0}},{inherits:39,"minimalistic-assert":41}],38:[function(e,t,r){var n=e("hash.js"),i=e("minimalistic-crypto-utils"),s=e("minimalistic-assert");function o(e){if(!(this instanceof o))return new o(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=i.toArray(e.entropy,e.entropyEnc||"hex"),r=i.toArray(e.nonce,e.nonceEnc||"hex"),n=i.toArray(e.pers,e.persEnc||"hex");s(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,n)}(t.exports=o).prototype._init=function(e,t,r){var n=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},o.prototype._hmac=function(){return new n.hmac(this.hash,this.K)},o.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},o.prototype.reseed=function(e,t,r,n){"string"!=typeof t&&(n=r,r=t,t=null),e=i.toArray(e,t),r=i.toArray(r,n),s(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},o.prototype.generate=function(e,t,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(n=r,r=t,t=null),r&&(r=i.toArray(r,n||"hex"),this._update(r));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(r),this._reseed++,i.encode(o,t)}},{"hash.js":26,"minimalistic-assert":41,"minimalistic-crypto-utils":42}],39:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(e,t){var r;t&&(e.super_=t,(r=function(){}).prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e)}},{}],40:[function(e,t,r){(function(e,r){!function(){var n="object"==typeof window?window:{};!n.JS_SHA3_NO_NODE_JS&&"object"==typeof e&&e.versions&&e.versions.node&&(n=r);for(var i=!n.JS_SHA3_NO_COMMON_JS&&"object"==typeof t&&t.exports,s="0123456789abcdef".split(""),o=[0,8,16,24],a=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],u=[224,256,384,512],c=["hex","buffer","arrayBuffer","array"],l=function(e,t,r){return function(n){return new w(e,t,e).update(n)[r]()}},f=function(e,t,r){return function(n,i){return new w(e,t,i).update(n)[r]()}},h=function(e,t){var r=l(e,t,"hex");r.create=function(){return new w(e,t,e)},r.update=function(e){return r.create().update(e)};for(var n=0;n<c.length;++n){var i=c[n];r[i]=l(e,t,i)}return r},d=[{name:"keccak",padding:[1,256,65536,16777216],bits:u,createMethod:h},{name:"sha3",padding:[6,1536,393216,100663296],bits:u,createMethod:h},{name:"shake",padding:[31,7936,2031616,520093696],bits:[128,256],createMethod:function(e,t){var r=f(e,t,"hex");r.create=function(r){return new w(e,t,r)},r.update=function(e,t){return r.create(t).update(e)};for(var n=0;n<c.length;++n){var i=c[n];r[i]=f(e,t,i)}return r}}],p={},m=[],y=0;y<d.length;++y)for(var g=d[y],v=g.bits,b=0;b<v.length;++b){var _=g.name+"_"+v[b];m.push(_),p[_]=g.createMethod(v[b],g.padding)}function w(e,t,r){this.blocks=[],this.s=[],this.padding=t,this.outputBits=r,this.reset=!0,this.block=0,this.start=0,this.blockCount=1600-(e<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var n=0;n<50;++n)this.s[n]=0}w.prototype.update=function(e){var t="string"!=typeof e;t&&e.constructor===ArrayBuffer&&(e=new Uint8Array(e));for(var r,n,i=e.length,s=this.blocks,a=this.byteCount,u=this.blockCount,c=0,l=this.s;c<i;){if(this.reset)for(this.reset=!1,s[0]=this.block,r=1;r<u+1;++r)s[r]=0;if(t)for(r=this.start;c<i&&r<a;++c)s[r>>2]|=e[c]<<o[3&r++];else for(r=this.start;c<i&&r<a;++c)(n=e.charCodeAt(c))<128?s[r>>2]|=n<<o[3&r++]:(n<2048?s[r>>2]|=(192|n>>6)<<o[3&r++]:(n<55296||57344<=n?s[r>>2]|=(224|n>>12)<<o[3&r++]:(n=65536+((1023&n)<<10|1023&e.charCodeAt(++c)),s[r>>2]|=(240|n>>18)<<o[3&r++],s[r>>2]|=(128|n>>12&63)<<o[3&r++]),s[r>>2]|=(128|n>>6&63)<<o[3&r++]),s[r>>2]|=(128|63&n)<<o[3&r++]);if(a<=(this.lastByteIndex=r)){for(this.start=r-a,this.block=s[u],r=0;r<u;++r)l[r]^=s[r];E(l),this.reset=!0}else this.start=r}return this},w.prototype.finalize=function(){var e=this.blocks,t=this.lastByteIndex,r=this.blockCount,n=this.s;if(e[t>>2]|=this.padding[3&t],this.lastByteIndex===this.byteCount)for(e[0]=e[r],t=1;t<r+1;++t)e[t]=0;for(e[r-1]|=2147483648,t=0;t<r;++t)n[t]^=e[t];E(n)},w.prototype.toString=w.prototype.hex=function(){this.finalize();for(var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,a=0,u="";a<n;){for(o=0;o<t&&a<n;++o,++a)e=r[o],u+=s[e>>4&15]+s[15&e]+s[e>>12&15]+s[e>>8&15]+s[e>>20&15]+s[e>>16&15]+s[e>>28&15]+s[e>>24&15];a%t==0&&(E(r),o=0)}return i&&(e=r[o],0<i&&(u+=s[e>>4&15]+s[15&e]),1<i&&(u+=s[e>>12&15]+s[e>>8&15]),2<i&&(u+=s[e>>20&15]+s[e>>16&15])),u},w.prototype.buffer=w.prototype.arrayBuffer=function(){this.finalize();for(var e=this.blockCount,t=this.s,r=this.outputBlocks,n=this.extraBytes,i=0,s=0,o=this.outputBits>>3,a=n?new ArrayBuffer(r+1<<2):new ArrayBuffer(o),u=new Uint32Array(a);s<r;){for(i=0;i<e&&s<r;++i,++s)u[s]=t[i];s%e==0&&E(t)}return n&&(u[i]=t[i],a=a.slice(0,o)),a},w.prototype.digest=w.prototype.array=function(){this.finalize();for(var e,t,r=this.blockCount,n=this.s,i=this.outputBlocks,s=this.extraBytes,o=0,a=0,u=[];a<i;){for(o=0;o<r&&a<i;++o,++a)e=a<<2,t=n[o],u[e]=255&t,u[e+1]=t>>8&255,u[e+2]=t>>16&255,u[e+3]=t>>24&255;a%r==0&&E(n)}return s&&(e=a<<2,t=n[o],0<s&&(u[e]=255&t),1<s&&(u[e+1]=t>>8&255),2<s&&(u[e+2]=t>>16&255)),u};var E=function(e){for(var t,r,n,i,s,o,u,c,l,f,h,d,p,m,y,g,v,b,_,w,E,k,A,S,x,I,T,P,N,C,R,O,M,D,L,B,U,j,K,F,V,H,G,q,z,W,Y,Z,J,$,X,Q,ee,te,re,ne,ie,se,oe,ae,ue,ce,le=0;le<48;le+=2)n=e[0]^e[10]^e[20]^e[30]^e[40],i=e[1]^e[11]^e[21]^e[31]^e[41],s=e[2]^e[12]^e[22]^e[32]^e[42],o=e[3]^e[13]^e[23]^e[33]^e[43],u=e[4]^e[14]^e[24]^e[34]^e[44],c=e[5]^e[15]^e[25]^e[35]^e[45],l=e[6]^e[16]^e[26]^e[36]^e[46],f=e[7]^e[17]^e[27]^e[37]^e[47],t=(h=e[8]^e[18]^e[28]^e[38]^e[48])^(s<<1|o>>>31),r=(d=e[9]^e[19]^e[29]^e[39]^e[49])^(o<<1|s>>>31),e[0]^=t,e[1]^=r,e[10]^=t,e[11]^=r,e[20]^=t,e[21]^=r,e[30]^=t,e[31]^=r,e[40]^=t,e[41]^=r,t=n^(u<<1|c>>>31),r=i^(c<<1|u>>>31),e[2]^=t,e[3]^=r,e[12]^=t,e[13]^=r,e[22]^=t,e[23]^=r,e[32]^=t,e[33]^=r,e[42]^=t,e[43]^=r,t=s^(l<<1|f>>>31),r=o^(f<<1|l>>>31),e[4]^=t,e[5]^=r,e[14]^=t,e[15]^=r,e[24]^=t,e[25]^=r,e[34]^=t,e[35]^=r,e[44]^=t,e[45]^=r,t=u^(h<<1|d>>>31),r=c^(d<<1|h>>>31),e[6]^=t,e[7]^=r,e[16]^=t,e[17]^=r,e[26]^=t,e[27]^=r,e[36]^=t,e[37]^=r,e[46]^=t,e[47]^=r,t=l^(n<<1|i>>>31),r=f^(i<<1|n>>>31),e[8]^=t,e[9]^=r,e[18]^=t,e[19]^=r,e[28]^=t,e[29]^=r,e[38]^=t,e[39]^=r,e[48]^=t,e[49]^=r,p=e[0],m=e[1],z=e[11]<<4|e[10]>>>28,W=e[10]<<4|e[11]>>>28,T=e[20]<<3|e[21]>>>29,P=e[21]<<3|e[20]>>>29,oe=e[31]<<9|e[30]>>>23,ae=e[30]<<9|e[31]>>>23,V=e[40]<<18|e[41]>>>14,H=e[41]<<18|e[40]>>>14,M=e[2]<<1|e[3]>>>31,D=e[3]<<1|e[2]>>>31,y=e[13]<<12|e[12]>>>20,g=e[12]<<12|e[13]>>>20,Y=e[22]<<10|e[23]>>>22,Z=e[23]<<10|e[22]>>>22,N=e[33]<<13|e[32]>>>19,C=e[32]<<13|e[33]>>>19,ue=e[42]<<2|e[43]>>>30,ce=e[43]<<2|e[42]>>>30,ee=e[5]<<30|e[4]>>>2,te=e[4]<<30|e[5]>>>2,L=e[14]<<6|e[15]>>>26,B=e[15]<<6|e[14]>>>26,v=e[25]<<11|e[24]>>>21,b=e[24]<<11|e[25]>>>21,J=e[34]<<15|e[35]>>>17,$=e[35]<<15|e[34]>>>17,R=e[45]<<29|e[44]>>>3,O=e[44]<<29|e[45]>>>3,A=e[6]<<28|e[7]>>>4,S=e[7]<<28|e[6]>>>4,re=e[17]<<23|e[16]>>>9,ne=e[16]<<23|e[17]>>>9,U=e[26]<<25|e[27]>>>7,j=e[27]<<25|e[26]>>>7,_=e[36]<<21|e[37]>>>11,w=e[37]<<21|e[36]>>>11,X=e[47]<<24|e[46]>>>8,Q=e[46]<<24|e[47]>>>8,G=e[8]<<27|e[9]>>>5,q=e[9]<<27|e[8]>>>5,x=e[18]<<20|e[19]>>>12,I=e[19]<<20|e[18]>>>12,ie=e[29]<<7|e[28]>>>25,se=e[28]<<7|e[29]>>>25,K=e[38]<<8|e[39]>>>24,F=e[39]<<8|e[38]>>>24,E=e[48]<<14|e[49]>>>18,k=e[49]<<14|e[48]>>>18,e[0]=p^~y&v,e[1]=m^~g&b,e[10]=A^~x&T,e[11]=S^~I&P,e[20]=M^~L&U,e[21]=D^~B&j,e[30]=G^~z&Y,e[31]=q^~W&Z,e[40]=ee^~re&ie,e[41]=te^~ne&se,e[2]=y^~v&_,e[3]=g^~b&w,e[12]=x^~T&N,e[13]=I^~P&C,e[22]=L^~U&K,e[23]=B^~j&F,e[32]=z^~Y&J,e[33]=W^~Z&$,e[42]=re^~ie&oe,e[43]=ne^~se&ae,e[4]=v^~_&E,e[5]=b^~w&k,e[14]=T^~N&R,e[15]=P^~C&O,e[24]=U^~K&V,e[25]=j^~F&H,e[34]=Y^~J&X,e[35]=Z^~$&Q,e[44]=ie^~oe&ue,e[45]=se^~ae&ce,e[6]=_^~E&p,e[7]=w^~k&m,e[16]=N^~R&A,e[17]=C^~O&S,e[26]=K^~V&M,e[27]=F^~H&D,e[36]=J^~X&G,e[37]=$^~Q&q,e[46]=oe^~ue&ee,e[47]=ae^~ce&te,e[8]=E^~p&y,e[9]=k^~m&g,e[18]=R^~A&x,e[19]=O^~S&I,e[28]=V^~M&L,e[29]=H^~D&B,e[38]=X^~G&z,e[39]=Q^~q&W,e[48]=ue^~ee&re,e[49]=ce^~te&ne,e[0]^=a[le],e[1]^=a[le+1]};if(i)t.exports=p;else for(y=0;y<m.length;++y)n[m[y]]=p[m[y]]}()}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:43}],41:[function(e,t,r){(t.exports=function(e,t){if(!e)throw new Error(t||"Assertion failed")}).equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)}},{}],42:[function(e,t,r){var n=r;function i(e){return 1===e.length?"0"+e:e}function s(e){for(var t="",r=0;r<e.length;r++)t+=i(e[r].toString(16));return t}n.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!=typeof e){for(var n=0;n<e.length;n++)r[n]=0|e[n];return r}if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16));else for(n=0;n<e.length;n++){var i=e.charCodeAt(n),s=i>>8,o=255&i;s?r.push(s,o):r.push(o)}return r},n.zero2=i,n.toHex=s,n.encode=function(e,t){return"hex"===t?s(e):e}},{}],43:[function(e,t,r){t.exports={browser:!0}},{}],44:[function(e,t,r){(function(e){function n(e){var t=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],r=1779033703,n=3144134277,i=1013904242,s=2773480762,o=1359893119,a=2600822924,u=528734635,c=1541459225,l=new Array(64);function f(e){for(var f=0,h=e.length;64<=h;){for(var d,p,m,y,g=r,v=n,b=i,_=s,w=o,E=a,k=u,A=c,S=0;S<16;S++)p=f+4*S,l[S]=(255&e[p])<<24|(255&e[p+1])<<16|(255&e[p+2])<<8|255&e[p+3];for(S=16;S<64;S++)m=((d=l[S-2])>>>17|d<<15)^(d>>>19|d<<13)^d>>>10,y=((d=l[S-15])>>>7|d<<25)^(d>>>18|d<<14)^d>>>3,l[S]=(m+l[S-7]|0)+(y+l[S-16]|0)|0;for(S=0;S<64;S++)m=(((w>>>6|w<<26)^(w>>>11|w<<21)^(w>>>25|w<<7))+(w&E^~w&k)|0)+(A+(t[S]+l[S]|0)|0)|0,y=((g>>>2|g<<30)^(g>>>13|g<<19)^(g>>>22|g<<10))+(g&v^g&b^v&b)|0,A=k,k=E,E=w,w=_+m|0,_=b,b=v,v=g,g=m+y|0;r=r+g|0,n=n+v|0,i=i+b|0,s=s+_|0,o=o+w|0,a=a+E|0,u=u+k|0,c=c+A|0,f+=64,h-=64}}f(e);var h,d=e.length%64,p=e.length/536870912|0,m=e.length<<3,y=d<56?56:120,g=e.slice(e.length-d,e.length);for(g.push(128),h=1+d;h<y;h++)g.push(0);return g.push(p>>>24&255),g.push(p>>>16&255),g.push(p>>>8&255),g.push(p>>>0&255),g.push(m>>>24&255),g.push(m>>>16&255),g.push(m>>>8&255),g.push(m>>>0&255),f(g),[r>>>24&255,r>>>16&255,r>>>8&255,r>>>0&255,n>>>24&255,n>>>16&255,n>>>8&255,n>>>0&255,i>>>24&255,i>>>16&255,i>>>8&255,i>>>0&255,s>>>24&255,s>>>16&255,s>>>8&255,s>>>0&255,o>>>24&255,o>>>16&255,o>>>8&255,o>>>0&255,a>>>24&255,a>>>16&255,a>>>8&255,a>>>0&255,u>>>24&255,u>>>16&255,u>>>8&255,u>>>0&255,c>>>24&255,c>>>16&255,c>>>8&255,c>>>0&255]}function i(e,t,r){e=e.length<=64?e:n(e);for(var i=64+t.length+4,s=new Array(i),o=new Array(64),a=[],u=0;u<64;u++)s[u]=54;for(u=0;u<e.length;u++)s[u]^=e[u];for(u=0;u<t.length;u++)s[64+u]=t[u];for(u=i-4;u<i;u++)s[u]=0;for(u=0;u<64;u++)o[u]=92;for(u=0;u<e.length;u++)o[u]^=e[u];function c(){for(var e=i-1;i-4<=e;e--){if(s[e]++,s[e]<=255)return;s[e]=0}}for(;32<=r;)c(),a=a.concat(n(o.concat(n(s)))),r-=32;return 0<r&&(c(),a=a.concat(n(o.concat(n(s))).slice(0,r))),a}function s(e,t,r,n,i){var s;for(u(e,16*(2*r-1),i,0,16),s=0;s<2*r;s++)a(e,16*s,i,16),function(e,t){u(e,0,t,0,16);for(var r=8;0<r;r-=2)t[4]^=o(t[0]+t[12],7),t[8]^=o(t[4]+t[0],9),t[12]^=o(t[8]+t[4],13),t[0]^=o(t[12]+t[8],18),t[9]^=o(t[5]+t[1],7),t[13]^=o(t[9]+t[5],9),t[1]^=o(t[13]+t[9],13),t[5]^=o(t[1]+t[13],18),t[14]^=o(t[10]+t[6],7),t[2]^=o(t[14]+t[10],9),t[6]^=o(t[2]+t[14],13),t[10]^=o(t[6]+t[2],18),t[3]^=o(t[15]+t[11],7),t[7]^=o(t[3]+t[15],9),t[11]^=o(t[7]+t[3],13),t[15]^=o(t[11]+t[7],18),t[1]^=o(t[0]+t[3],7),t[2]^=o(t[1]+t[0],9),t[3]^=o(t[2]+t[1],13),t[0]^=o(t[3]+t[2],18),t[6]^=o(t[5]+t[4],7),t[7]^=o(t[6]+t[5],9),t[4]^=o(t[7]+t[6],13),t[5]^=o(t[4]+t[7],18),t[11]^=o(t[10]+t[9],7),t[8]^=o(t[11]+t[10],9),t[9]^=o(t[8]+t[11],13),t[10]^=o(t[9]+t[8],18),t[12]^=o(t[15]+t[14],7),t[13]^=o(t[12]+t[15],9),t[14]^=o(t[13]+t[12],13),t[15]^=o(t[14]+t[13],18);for(r=0;r<16;++r)e[r]+=t[r]}(i,n),u(i,0,e,t+16*s,16);for(s=0;s<r;s++)u(e,t+2*s*16,e,16*s,16);for(s=0;s<r;s++)u(e,t+16*(2*s+1),e,16*(s+r),16)}function o(e,t){return e<<t|e>>>32-t}function a(e,t,r,n){for(var i=0;i<n;i++)r[i]^=e[t+i]}function u(e,t,r,n,i){for(;i--;)r[n++]=e[t++]}function c(e){if(e&&"number"==typeof e.length){for(var t=0;t<e.length;t++){if("number"!=typeof e[t])return;var r=parseInt(e[t]);if(r!=e[t]||r<0||256<=r)return}return 1}}function l(e,t){var r=parseInt(e);if(e!=r)throw new Error("invalid "+t);return r}function f(t,r,n,o,f,h,p){if(!p)throw new Error("missing callback");if(n=l(n,"N"),o=l(o,"r"),f=l(f,"p"),h=l(h,"dkLen"),0===n||0!=(n&n-1))throw new Error("N must be power of 2");if(d/128/o<n)throw new Error("N too large");if(d/128/f<o)throw new Error("r too large");if(!c(t))throw new Error("password must be an array or buffer");if(t=Array.prototype.slice.call(t),!c(r))throw new Error("salt must be an array or buffer");r=Array.prototype.slice.call(r);for(var m=i(t,r,128*f*o),y=new Uint32Array(32*f*o),g=0;g<y.length;g++){var v=4*g;y[g]=(255&m[3+v])<<24|(255&m[2+v])<<16|(255&m[1+v])<<8|(255&m[0+v])<<0}var b,_,w=new Uint32Array(64*o),E=new Uint32Array(32*o*n),k=32*o,A=new Uint32Array(16),S=new Uint32Array(16),x=f*n*2,I=0,T=null,P=!1,N=0,C=0,R=parseInt(1e3/o),O=void 0!==e?e:setTimeout,M=function(){if(P)return p(new Error("cancelled"),I/x);switch(N){case 0:u(y,_=32*C*o,w,0,k),N=1,b=0;case 1:R<(r=n-b)&&(r=R);for(var e=0;e<r;e++)u(w,0,E,(b+e)*k,k),s(w,k,o,A,S);if(b+=r,I+=r,(c=parseInt(1e3*I/x))!==T){if(P=p(null,I/x))break;T=c}if(b<n)break;b=0,N=2;case 2:var r;R<(r=n-b)&&(r=R);var c;for(e=0;e<r;e++){var l=w[16*(2*o-1)]&n-1;a(E,l*k,w,k),s(w,k,o,A,S)}if(b+=r,I+=r,(c=parseInt(1e3*I/x))!==T){if(P=p(null,I/x))break;T=c}if(b<n)break;if(u(w,0,y,_,k),++C<f){N=0;break}for(m=[],e=0;e<y.length;e++)m.push(y[e]>>0&255),m.push(y[e]>>8&255),m.push(y[e]>>16&255),m.push(y[e]>>24&255);var d=i(t,m,h);return p(null,1,d)}O(M)};M()}var h,d;h=this,d=2147483647,void 0!==r?t.exports=f:h&&(h.scrypt&&(h._scrypt=h.scrypt),h.scrypt=f)}).call(this,e("timers").setImmediate)},{timers:46}],45:[function(e,t,r){(function(e,t,r){!function(t,r){var n,i,s,o,a,u,c,l,f;function h(e){return i[n]=d.apply(r,e),n++}function d(e){var t=[].slice.call(arguments,1);return function(){"function"==typeof e?e.apply(r,t):new Function(""+e)()}}function p(e){if(s)setTimeout(d(p,e),0);else{var t=i[e];if(t){s=!0;try{t()}finally{m(e),s=!1}}}}function m(e){delete i[e]}function y(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(l)&&p(+e.data.slice(l.length))}t.setImmediate||(n=1,s=!(i={}),o=t.document,f=(f=Object.getPrototypeOf&&Object.getPrototypeOf(t))&&f.setTimeout?f:t,a="[object process]"==={}.toString.call(t.process)?function(){var t=h(arguments);return e.nextTick(d(p,t)),t}:function(){if(t.postMessage&&!t.importScripts){var e=!0,r=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=r,e}}()?(l="setImmediate$"+Math.random()+"$",t.addEventListener?t.addEventListener("message",y,!1):t.attachEvent("onmessage",y),function(){var e=h(arguments);return t.postMessage(l+e,"*"),e}):t.MessageChannel?((c=new MessageChannel).port1.onmessage=function(e){p(e.data)},function(){var e=h(arguments);return c.port2.postMessage(e),e}):o&&"onreadystatechange"in o.createElement("script")?(u=o.documentElement,function(){var e=h(arguments),t=o.createElement("script");return t.onreadystatechange=function(){p(e),t.onreadystatechange=null,u.removeChild(t),t=null},u.appendChild(t),e}):function(){var e=h(arguments);return setTimeout(d(p,e),0),e},f.setImmediate=a,f.clearImmediate=m)}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("timers").clearImmediate)},{_process:43,timers:46}],46:[function(e,t,r){(function(e){t.exports={setImmediate:e.setImmediate}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],47:[function(e,t,r){(function(e){var r,n,i;e.crypto&&crypto.getRandomValues&&(r=new Uint8Array(16),n=function(){return crypto.getRandomValues(r),r}),n||(i=new Array(16),n=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}),t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],48:[function(e,t,r){for(var n=e("./rng"),i=[],s={},o=0;o<256;o++)i[o]=(o+256).toString(16).substr(1),s[i[o]]=o;function a(e,t){var r=t||0;return i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]}var u=n(),c=[1|u[0],u[1],u[2],u[3],u[4],u[5]],l=16383&(u[6]<<8|u[7]),f=0,h=0;function d(e,t,r){var i=t&&r||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||n)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var o=0;o<16;o++)t[i+o]=s[o];return t||a(s)}var p=d;p.v1=function(e,t,r){var n=t&&r||0,i=t||[],s=void 0!==(e=e||{}).clockseq?e.clockseq:l,o=void 0!==e.msecs?e.msecs:(new Date).getTime(),u=void 0!==e.nsecs?e.nsecs:h+1,d=o-f+(u-h)/1e4;if(d<0&&void 0===e.clockseq&&(s=s+1&16383),(d<0||f<o)&&void 0===e.nsecs&&(u=0),1e4<=u)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");f=o,l=s;var p=(1e4*(268435455&(o+=122192928e5))+(h=u))%4294967296;i[n++]=p>>>24&255,i[n++]=p>>>16&255,i[n++]=p>>>8&255,i[n++]=255&p;var m=o/4294967296*1e4&268435455;i[n++]=m>>>8&255,i[n++]=255&m,i[n++]=m>>>24&15|16,i[n++]=m>>>16&255,i[n++]=s>>>8|128,i[n++]=255&s;for(var y=e.node||c,g=0;g<6;g++)i[n+g]=y[g];return t||a(i)},p.v4=d,p.parse=function(e,t,r){var n=t&&r||0,i=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,(function(e){i<16&&(t[n+i++]=s[e])}));i<16;)t[n+i++]=0;return t},p.unparse=a,t.exports=p},{"./rng":47}],49:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});try{t.exports.XMLHttpRequest=XMLHttpRequest}catch(e){console.log("Warning: XMLHttpRequest is not defined"),t.exports.XMLHttpRequest=null}},{}],50:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("../utils/properties"),i=(s.isProvider=function(e){return n.isType(e,"Provider")},s);function s(){n.setType(this,"Provider")}r.Provider=i},{"../utils/properties":74}],51:[function(e,t,r){var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(r,"__esModule",{value:!0});var o=e("../utils/address"),a=e("../utils/bignumber"),u=e("../utils/bytes"),c=e("../constants"),l=e("../utils/hash"),f=e("../utils/networks"),h=e("../utils/properties"),d=e("../utils/rlp"),p=e("../utils/transaction"),m=e("../utils/utf8"),y=e("../utils/web"),g=s(e("../errors")),v=e("./abstract-provider");function b(e,t){var r={};for(var n in e)try{var i=e[n](t[n]);void 0!==i&&(r[n]=i)}catch(e){throw e.checkKey=n,e.checkValue=t[n],e}return r}function _(e,t){return function(r){return null==r?t:e(r)}}function w(e){return function(t){if(!Array.isArray(t))throw new Error("not an array");var r=[];return t.forEach((function(t){r.push(e(t))})),r}}function E(e,t){return"string"==typeof e&&(t||"0x"===e.substring(0,2)||(e="0x"+e),32===u.hexDataLength(e))?e.toLowerCase():(g.throwError("invalid hash",g.INVALID_ARGUMENT,{arg:"hash",value:e}),null)}function k(e){return a.bigNumberify(e).toNumber()}function A(e){if(!u.isHexString(e))throw new Error("invalid uint256");for(;e.length<66;)e="0x0"+e.substring(2);return e}function S(e){if(null==e)return"latest";if("earliest"===e)return"0x0";if("latest"===e||"pending"===e)return e;if("number"==typeof e)return u.hexStripZeros(u.hexlify(e));if(u.isHexString(e))return u.hexStripZeros(e);throw new Error("invalid blockTag")}var x={hash:E,blockHash:_(E,null),blockNumber:_(k,null),transactionIndex:_(k,null),confirmations:_(k,null),from:o.getAddress,gasPrice:a.bigNumberify,gasLimit:a.bigNumberify,to:_(o.getAddress,null),value:a.bigNumberify,nonce:k,data:u.hexlify,r:_(A),s:_(A),v:_(k),creates:_(o.getAddress,null),raw:_(u.hexlify)};function I(e){var t;null!=e.gas&&null==e.gasLimit&&(e.gasLimit=e.gas),e.to&&a.bigNumberify(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),null!=e.input&&null==e.data&&(e.data=e.input),null==e.to&&null==e.creates&&(e.creates=o.getContractAddress(e)),e.raw||e.v&&e.r&&e.s&&(t=[u.stripZeros(u.hexlify(e.nonce)),u.stripZeros(u.hexlify(e.gasPrice)),u.stripZeros(u.hexlify(e.gasLimit)),e.to||"0x",u.stripZeros(u.hexlify(e.value||"0x")),u.hexlify(e.data||"0x"),u.stripZeros(u.hexlify(e.v||"0x")),u.stripZeros(u.hexlify(e.r)),u.stripZeros(u.hexlify(e.s))],e.raw=d.encode(t));var r=b(x,e),n=e.networkId;return null!=e.chainId&&null==n&&null==r.v&&(n=e.chainId),u.isHexString(n)&&(n=a.bigNumberify(n).toNumber()),"number"!=typeof n&&null!=r.v&&((n=(r.v-35)/2)<0&&(n=0),n=parseInt(n)),"number"!=typeof n&&(n=0),r.networkId=n,null==r.chainId&&null!=n&&(r.chainId=n),r.blockHash&&"x"===r.blockHash.replace(/0/g,"")&&(r.blockHash=null),r}var T={hash:E,parentHash:E,number:k,timestamp:k,nonce:_(u.hexlify),difficulty:function(e){var t=a.bigNumberify(e);try{return t.toNumber()}catch(e){}return null},gasLimit:a.bigNumberify,gasUsed:a.bigNumberify,miner:o.getAddress,extraData:u.hexlify,transactions:_(w(E))},P=h.shallowCopy(T);function N(e,t){return null!=e.author&&null==e.miner&&(e.miner=e.author),b(t?P:T,e)}P.transactions=_(w(I));var C={from:_(o.getAddress),nonce:_(k),gasLimit:_(a.bigNumberify),gasPrice:_(a.bigNumberify),to:_(o.getAddress),value:_(a.bigNumberify),data:_(u.hexlify)};function R(e){return b(C,e)}var O={transactionLogIndex:_(k),transactionIndex:k,blockNumber:k,transactionHash:E,address:o.getAddress,topics:w(E),data:u.hexlify,logIndex:k,blockHash:E},M={to:_(o.getAddress,null),from:_(o.getAddress,null),contractAddress:_(o.getAddress,null),transactionIndex:k,root:_(E),gasUsed:a.bigNumberify,logsBloom:_(u.hexlify),blockHash:E,transactionHash:E,logs:w((function(e){return b(O,e)})),blockNumber:k,confirmations:_(k,null),cumulativeGasUsed:a.bigNumberify,status:_(k)};function D(e){return Array.isArray(e)?e.forEach((function(e){D(e)})):null!=e&&E(e),e}var L,B={fromBlock:_(S,void 0),toBlock:_(S,void 0),address:_(o.getAddress,void 0),topics:_(D,void 0)},U={blockHash:_(E,void 0),address:_(o.getAddress,void 0),topics:_(D,void 0)},j={blockNumber:_(k),blockHash:_(E),transactionIndex:k,removed:_((function(e){if("boolean"==typeof e)return e;if("string"==typeof e){if("true"===e)return!0;if("false"===e)return!1}throw new Error("invaid boolean - "+e)})),address:o.getAddress,data:(L=u.hexlify,"0x",function(e){return e?L(e):"0x"}),topics:w(E),transactionHash:E,logIndex:k};function K(e){return b(j,e)}function F(e){return e.map((function(e){return"string"==typeof e?e:Array.isArray(e)?(e.forEach((function(e){null!==e&&32!==u.hexDataLength(e)&&g.throwError("invalid topic",g.INVALID_ARGUMENT,{argument:"topic",value:e})})),e.join(",")):null===e?"":g.throwError("invalid topic value",g.INVALID_ARGUMENT,{argument:"topic",value:e})})).join("&")}function V(e){if("string"==typeof e){if(20===u.hexDataLength(e))return"address:"+o.getAddress(e);if(e=e.toLowerCase(),32===u.hexDataLength(e))return"tx:"+e;if(-1===e.indexOf(":"))return e}else{if(Array.isArray(e))return"filter::"+F(e);if(e&&"object"==typeof e)return"filter:"+(e.address||"")+":"+F(e.topics||[])}throw new Error("invalid event - "+e)}function H(){return(new Date).getTime()}var G,q=(i(z,G=v.Provider),z.prototype._doPoll=function(){var e=this;this.getBlockNumber().then((function(t){if(e.polling&&(e._setFastBlockNumber(t),t!==e._lastBlockNumber)){-2===e._emitted.block&&(e._emitted.block=t-1);for(var r=e._emitted.block+1;r<=t;r++)e.emit("block",r);e._emitted.block!==t&&(e._emitted.block=t,Object.keys(e._emitted).forEach((function(r){var n;"block"===r||"pending"!==(n=e._emitted[r])&&12<t-n&&delete e._emitted[r]}))),-2===e._lastBlockNumber&&(e._lastBlockNumber=t-1);var n={},i={};return e._events.forEach((function(e){i[e.tag]=!0})),Object.keys(i).forEach((function(r){var i=r.split(":");switch(i[0]){case"tx":var s=i[1];e.getTransactionReceipt(s).then((function(t){return t&&null!=t.blockNumber&&(e._emitted["t:"+s]=t.blockNumber,e.emit(s,t)),null})).catch((function(t){e.emit("error",t)}));break;case"address":var o=i[1];e._balances[o]&&(n[o]=e._balances[o]),e.getBalance(o,"latest").then((function(t){var r=e._balances[o];if(!r||!t.eq(r))return e._balances[o]=t,e.emit(o,t),null})).catch((function(t){e.emit("error",t)}));break;case"filter":var a=i[2].split(/&/g).map((function(e){var t=e.split(",");return 1===t.length?""===t[0]?null:e:t.map((function(e){return""===e?null:e}))})),u={address:i[1],fromBlock:e._lastBlockNumber+1,toBlock:t,topics:a};u.address||delete u.address,e.getLogs(u).then((function(t){if(0!==t.length)return t.forEach((function(t){e._emitted["b:"+t.blockHash]=t.blockNumber,e._emitted["t:"+t.transactionHash]=t.blockNumber,e.emit(u,t)})),null})).catch((function(t){e.emit("error",t)}))}})),e._lastBlockNumber=t,e._balances=n,null}})).catch((function(e){})),this.doPoll()},z.prototype.resetEventsBlock=function(e){this._lastBlockNumber=e-1,this.polling&&this._doPoll()},Object.defineProperty(z.prototype,"network",{get:function(){return this._network},enumerable:!0,configurable:!0}),z.prototype.getNetwork=function(){return this.ready},Object.defineProperty(z.prototype,"blockNumber",{get:function(){return this._fastBlockNumber},enumerable:!0,configurable:!0}),Object.defineProperty(z.prototype,"polling",{get:function(){return null!=this._poller},set:function(e){var t=this;setTimeout((function(){e&&!t._poller?(t._poller=setInterval(t._doPoll.bind(t),t.pollingInterval),t._doPoll()):!e&&t._poller&&(clearInterval(t._poller),t._poller=null)}),0)},enumerable:!0,configurable:!0}),Object.defineProperty(z.prototype,"pollingInterval",{get:function(){return this._pollingInterval},set:function(e){var t=this;if("number"!=typeof e||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval((function(){t._doPoll()}),this._pollingInterval))},enumerable:!0,configurable:!0}),z.prototype._getFastBlockNumber=function(){var e=this,t=H();return t-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=t,this._fastBlockNumberPromise=this.getBlockNumber().then((function(t){return(null==e._fastBlockNumber||t>e._fastBlockNumber)&&(e._fastBlockNumber=t),e._fastBlockNumber}))),this._fastBlockNumberPromise},z.prototype._setFastBlockNumber=function(e){null!=this._fastBlockNumber&&e<this._fastBlockNumber||(this._fastQueryDate=H(),(null==this._fastBlockNumber||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))},z.prototype.waitForTransaction=function(e,t){var r=this;return null==t&&(t=1),this.getTransactionReceipt(e).then((function(n){return 0===t||n&&n.confirmations>=t?n:new Promise((function(n){var i=function(s){s.confirmations<t||(r.removeListener(e,i),n(s))};r.on(e,i)}))}))},z.prototype.getBlockNumber=function(){var e=this;return this.ready.then((function(){return e.perform("getBlockNumber",{}).then((function(t){var r=parseInt(t);if(r!=t)throw new Error("invalid response - getBlockNumber");return e._setFastBlockNumber(r),r}))}))},z.prototype.getGasPrice=function(){var e=this;return this.ready.then((function(){return e.perform("getGasPrice",{}).then((function(e){return a.bigNumberify(e)}))}))},z.prototype.getBalance=function(e,t){var r=this;return this.ready.then((function(){return h.resolveProperties({addressOrName:e,blockTag:t}).then((function(e){var t=e.addressOrName,n=e.blockTag;return r._getAddress(t).then((function(e){var t={address:e,blockTag:S(n)};return r.perform("getBalance",t).then((function(e){return a.bigNumberify(e)}))}))}))}))},z.prototype.getTransactionCount=function(e,t){var r=this;return this.ready.then((function(){return h.resolveProperties({addressOrName:e,blockTag:t}).then((function(e){var t=e.addressOrName,n=e.blockTag;return r._getAddress(t).then((function(e){var t={address:e,blockTag:S(n)};return r.perform("getTransactionCount",t).then((function(e){return a.bigNumberify(e).toNumber()}))}))}))}))},z.prototype.getCode=function(e,t){var r=this;return this.ready.then((function(){return h.resolveProperties({addressOrName:e,blockTag:t}).then((function(e){var t=e.addressOrName,n=e.blockTag;return r._getAddress(t).then((function(e){var t={address:e,blockTag:S(n)};return r.perform("getCode",t).then((function(e){return u.hexlify(e)}))}))}))}))},z.prototype.getStorageAt=function(e,t,r){var n=this;return this.ready.then((function(){return h.resolveProperties({addressOrName:e,position:t,blockTag:r}).then((function(e){var t=e.addressOrName,r=e.position,i=e.blockTag;return n._getAddress(t).then((function(e){var t={address:e,blockTag:S(i),position:u.hexStripZeros(u.hexlify(r))};return n.perform("getStorageAt",t).then((function(e){return u.hexlify(e)}))}))}))}))},z.prototype.sendTransaction=function(e){var t=this;return this.ready.then((function(){return h.resolveProperties({signedTransaction:e}).then((function(e){var r=e.signedTransaction,n={signedTransaction:u.hexlify(r)};return t.perform("sendTransaction",n).then((function(e){return t._wrapTransaction(p.parse(r),e)}),(function(e){throw e.transaction=p.parse(r),e.transaction.hash&&(e.transactionHash=e.transaction.hash),e}))}))}))},z.prototype._wrapTransaction=function(e,t){var r=this;if(null!=t&&32!==u.hexDataLength(t))throw new Error("invalid response - sendTransaction");var n=e;return null!=t&&e.hash!==t&&g.throwError("Transaction hash mismatch from Provider.sendTransaction.",g.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:t}),n.wait=function(t){return 0!==t&&(r._emitted["t:"+e.hash]="pending"),r.waitForTransaction(e.hash,t).then((function(n){return null==n&&0===t?null:(r._emitted["t:"+e.hash]=n.blockNumber,0===n.status&&g.throwError("transaction failed",g.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e}),n)}))},n},z.prototype.call=function(e,t){var r=this,n=h.shallowCopy(e);return this.ready.then((function(){return h.resolveProperties({blockTag:t,tx:n}).then((function(e){var t=e.blockTag,n=e.tx;return r._resolveNames(n,["to","from"]).then((function(e){var n={blockTag:S(t),transaction:R(e)};return r.perform("call",n).then((function(e){return u.hexlify(e)}))}))}))}))},z.prototype.estimateGas=function(e){var t=this,r={to:e.to,from:e.from,data:e.data,gasPrice:e.gasPrice,value:e.value};return this.ready.then((function(){return h.resolveProperties(r).then((function(e){return t._resolveNames(e,["to","from"]).then((function(e){var r={transaction:R(e)};return t.perform("estimateGas",r).then((function(e){return a.bigNumberify(e)}))}))}))}))},z.prototype.getBlock=function(e,t){var r=this;return this.ready.then((function(){return h.resolveProperties({blockHashOrBlockTag:e}).then((function(e){var n=e.blockHashOrBlockTag;try{var i=u.hexlify(n);if(32===u.hexDataLength(i))return y.poll((function(){return r.perform("getBlock",{blockHash:i,includeTransactions:!!t}).then((function(e){return null==e?null==r._emitted["b:"+i]?null:void 0:N(e,t)}))}),{onceBlock:r})}catch(e){}try{var s=-128,o=S(n);return u.isHexString(o)&&(s=parseInt(o.substring(2),16)),y.poll((function(){return r.perform("getBlock",{blockTag:o,includeTransactions:!!t}).then((function(e){return null!=e?N(e,t):s<=r._emitted.block?void 0:null}))}),{onceBlock:r})}catch(e){}throw new Error("invalid block hash or block tag")}))}))},z.prototype.getTransaction=function(e){var t=this;return this.ready.then((function(){return h.resolveProperties({transactionHash:e}).then((function(e){var r=e.transactionHash,n={transactionHash:E(r,!0)};return y.poll((function(){return t.perform("getTransaction",n).then((function(e){if(null==e)return null==t._emitted["t:"+r]?null:void 0;var n=z.checkTransactionResponse(e);if(null==n.blockNumber)n.confirmations=0;else if(null==n.confirmations)return t._getFastBlockNumber().then((function(e){var r=e-n.blockNumber+1;return r<=0&&(r=1),n.confirmations=r,t._wrapTransaction(n)}));return t._wrapTransaction(n)}))}),{onceBlock:t})}))}))},z.prototype.getTransactionReceipt=function(e){var t=this;return this.ready.then((function(){return h.resolveProperties({transactionHash:e}).then((function(e){var r=e.transactionHash,n={transactionHash:E(r,!0)};return y.poll((function(){return t.perform("getTransactionReceipt",n).then((function(e){if(null==e)return null==t._emitted["t:"+r]?null:void 0;if(null!=e.blockHash){var n,i,s=((i=b(M,n=e)).logs.forEach((function(e,t){null==e.transactionLogIndex&&(e.transactionLogIndex=t)})),null!=n.status&&(i.byzantium=!0),i);if(null==s.blockNumber)s.confirmations=0;else if(null==s.confirmations)return t._getFastBlockNumber().then((function(e){var t=e-s.blockNumber+1;return t<=0&&(t=1),s.confirmations=t,s}));return s}}))}),{onceBlock:t})}))}))},z.prototype.getLogs=function(e){var t=this;return this.ready.then((function(){return h.resolveProperties(e).then((function(e){return t._resolveNames(e,["address"]).then((function(e){var r,n={filter:(r=e)&&r.blockHash?b(U,r):b(B,r)};return t.perform("getLogs",n).then((function(e){return w(K)(e)}))}))}))}))},z.prototype.getEtherPrice=function(){var e=this;return this.ready.then((function(){return e.perform("getEtherPrice",{}).then((function(e){return e}))}))},z.prototype._getAddress=function(e){return this.resolveName(e).then((function(t){return null==t&&g.throwError("ENS name not configured",g.UNSUPPORTED_OPERATION,{operation:"resolveName("+JSON.stringify(e)+")"}),t}))},z.prototype._resolveNames=function(e,t){var r=[],n=h.shallowCopy(e);return t.forEach((function(e){null!=n[e]&&r.push(this._getAddress(n[e]).then((function(t){n[e]=t})))}),this),Promise.all(r).then((function(){return n}))},z.prototype._getResolver=function(e){var t=this;return this.getNetwork().then((function(r){r.ensAddress||g.throwError("network does not support ENS",g.UNSUPPORTED_OPERATION,{operation:"ENS",network:r.name});var n="0x0178b8bf"+l.namehash(e).substring(2),i={to:r.ensAddress,data:n};return t.call(i).then((function(e){if(32!==u.hexDataLength(e))return null;var t=o.getAddress(u.hexDataSlice(e,12));return t===c.AddressZero?null:t}))}))},z.prototype.resolveName=function(e){var t=this;if(e instanceof Promise)return e.then((function(e){return t.resolveName(e)}));try{return Promise.resolve(o.getAddress(e))}catch(t){if(u.isHexString(e))throw t}var r=this,n=l.namehash(e);return this._getResolver(e).then((function(e){if(null==e)return null;var t={to:e,data:"0x3b3b57de"+n.substring(2)};return r.call(t)})).then((function(e){if(32!==u.hexDataLength(e))return null;var t=o.getAddress(u.hexDataSlice(e,12));return t===c.AddressZero?null:t}))},z.prototype.lookupAddress=function(e){var t=this;if(e instanceof Promise)return e.then((function(e){return t.lookupAddress(e)}));var r=(e=o.getAddress(e)).substring(2)+".addr.reverse",n=l.namehash(r),i=this;return this._getResolver(r).then((function(e){if(!e)return null;var t={to:e,data:"0x691f3431"+n.substring(2)};return i.call(t)})).then((function(t){if(null==t)return null;if((t=t.substring(2)).length<64)return null;if((t=t.substring(64)).length<64)return null;var r=a.bigNumberify("0x"+t.substring(0,64)).toNumber();if(2*r>(t=t.substring(64)).length)return null;var n=m.toUtf8String("0x"+t.substring(0,2*r));return i.resolveName(n).then((function(t){return t!=e?null:n}))}))},z.checkTransactionResponse=I,z.prototype.doPoll=function(){},z.prototype.perform=function(e,t){return g.throwError(e+" not implemented",g.NOT_IMPLEMENTED,{operation:e}),null},z.prototype._startPending=function(){g.warn("WARNING: this provider does not support pending events")},z.prototype._stopPending=function(){},z.prototype._addEventListener=function(e,t,r){this._events.push({tag:V(e),listener:t,once:r}),"pending"===e&&this._startPending(),this.polling=!0},z.prototype.on=function(e,t){return this._addEventListener(e,t,!1),this},z.prototype.once=function(e,t){return this._addEventListener(e,t,!0),this},z.prototype.addEventListener=function(e,t){return this.on(e,t)},z.prototype.emit=function(e){for(var t=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=!1,s=V(e);return this._events=this._events.filter((function(e){return e.tag!==s||(setTimeout((function(){e.listener.apply(t,r)}),0),i=!0,!e.once)})),0===this.listenerCount()&&(this.polling=!1),i},z.prototype.listenerCount=function(e){if(!e)return this._events.length;var t=V(e);return this._events.filter((function(e){return e.tag===t})).length},z.prototype.listeners=function(e){var t=V(e);return this._events.filter((function(e){return e.tag===t})).map((function(e){return e.listener}))},z.prototype.removeAllListeners=function(e){var t;return null==e?(this._events=[],this._stopPending()):(t=V(e),this._events=this._events.filter((function(e){return e.tag!==t})),"pending"===e&&this._stopPending()),0===this._events.length&&(this.polling=!1),this},z.prototype.removeListener=function(e,t){var r=!1,n=V(e);return this._events=this._events.filter((function(e){return e.tag!==n||e.listener!=t||!!r||!(r=!0)})),"pending"===e&&0===this.listenerCount("pending")&&this._stopPending(),0===this.listenerCount()&&(this.polling=!1),this},z);function z(e){var t,r=G.call(this)||this;return g.checkNew(r,v.Provider),e instanceof Promise?(h.defineReadOnly(r,"ready",e.then((function(e){return h.defineReadOnly(r,"_network",e),e}))),r.ready.catch((function(e){}))):(t=f.getNetwork(null==e?"homestead":e))?(h.defineReadOnly(r,"_network",t),h.defineReadOnly(r,"ready",Promise.resolve(r._network))):g.throwError("invalid network",g.INVALID_ARGUMENT,{arg:"network",value:e}),r._lastBlockNumber=-2,r._balances={},r._events=[],r._pollingInterval=4e3,r._emitted={block:-2},r._fastQueryDate=0,r}r.BaseProvider=q,h.defineReadOnly(v.Provider,"inherits",h.inheritable(v.Provider))},{"../constants":3,"../errors":5,"../utils/address":60,"../utils/bignumber":63,"../utils/bytes":64,"../utils/hash":65,"../utils/networks":72,"../utils/properties":74,"../utils/rlp":76,"../utils/transaction":83,"../utils/utf8":85,"../utils/web":86,"./abstract-provider":50}],52:[function(e,t,r){var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(r,"__esModule",{value:!0});var o=e("./base-provider"),a=e("../utils/bytes"),u=e("../utils/properties"),c=e("../utils/web"),l=s(e("../errors"));function f(e){var t,r=[];for(var n in e)null!=e[n]&&(t=a.hexlify(e[n]),{gasLimit:!0,gasPrice:!0,nonce:!0,value:!0}[n]&&(t=a.hexStripZeros(t)),r.push(n+"="+t));return r.join("&")}function h(e){if(0==e.status&&("No records found"===e.message||"No transactions found"===e.message))return e.result;if(1==e.status&&"OK"==e.message)return e.result;var t=new Error("invalid response");throw t.result=JSON.stringify(e),t}function d(e){if("2.0"!=e.jsonrpc)throw(t=new Error("invalid response")).result=JSON.stringify(e),t;if(e.error){var t=new Error(e.error.message||"unknown error");throw e.error.code&&(t.code=e.error.code),e.error.data&&(t.data=e.error.data),t}return e.result}function p(e){if("pending"===e)throw new Error("pending not supported");return"latest"===e?e:parseInt(e.substring(2),16)}var m,y=(i(g,m=o.BaseProvider),g.prototype.perform=function(e,t){var r,n=this,i=this.baseUrl,s="";function o(e,t){return c.fetchJson(e,null,t||d).then((function(t){return n.emit("debug",{action:"perform",request:e,response:t,provider:n}),t}))}switch(this.apiKey&&(s+="&apikey="+this.apiKey),e){case"getBlockNumber":return o(i+="/api?module=proxy&action=eth_blockNumber"+s);case"getGasPrice":return o(i+="/api?module=proxy&action=eth_gasPrice"+s);case"getBalance":return i+="/api?module=account&action=balance&address="+t.address,o(i+="&tag="+t.blockTag+s,h);case"getTransactionCount":return i+="/api?module=proxy&action=eth_getTransactionCount&address="+t.address,o(i+="&tag="+t.blockTag+s);case"getCode":return i+="/api?module=proxy&action=eth_getCode&address="+t.address,o(i+="&tag="+t.blockTag+s,d);case"getStorageAt":return i+="/api?module=proxy&action=eth_getStorageAt&address="+t.address,i+="&position="+t.position,o(i+="&tag="+t.blockTag+s,d);case"sendTransaction":return i+="/api?module=proxy&action=eth_sendRawTransaction&hex="+t.signedTransaction,o(i+=s).catch((function(e){throw e.responseText&&(0<=e.responseText.toLowerCase().indexOf("insufficient funds")&&l.throwError("insufficient funds",l.INSUFFICIENT_FUNDS,{}),0<=e.responseText.indexOf("same hash was already imported")&&l.throwError("nonce has already been used",l.NONCE_EXPIRED,{}),0<=e.responseText.indexOf("another transaction with same nonce")&&l.throwError("replacement fee too low",l.REPLACEMENT_UNDERPRICED,{})),e}));case"getBlock":return t.blockTag?(i+="/api?module=proxy&action=eth_getBlockByNumber&tag="+t.blockTag,t.includeTransactions?i+="&boolean=true":i+="&boolean=false",o(i+=s)):Promise.reject(new Error("getBlock by blockHash not implemeneted"));case"getTransaction":return i+="/api?module=proxy&action=eth_getTransactionByHash&txhash="+t.transactionHash,o(i+=s);case"getTransactionReceipt":return i+="/api?module=proxy&action=eth_getTransactionReceipt&txhash="+t.transactionHash,o(i+=s);case"call":return i+="/api?module=proxy&action=eth_call"+(r=(r=f(t.transaction))&&"&"+r),"latest"!==t.blockTag?Promise.reject(new Error("EtherscanProvider does not support blockTag for call")):o(i+=s);case"estimateGas":return i+="/api?module=proxy&action=eth_estimateGas&"+(r=(r=f(t.transaction))&&"&"+r),o(i+=s);case"getLogs":i+="/api?module=logs&action=getLogs";try{if(t.filter.fromBlock&&(i+="&fromBlock="+p(t.filter.fromBlock)),t.filter.toBlock&&(i+="&toBlock="+p(t.filter.toBlock)),t.filter.blockHash)try{l.throwError("Etherscan does not support blockHash filters",l.UNSUPPORTED_OPERATION,{operation:"getLogs(blockHash)"})}catch(e){return Promise.reject(e)}if(t.filter.address&&(i+="&address="+t.filter.address),t.filter.topics&&0<t.filter.topics.length){if(1<t.filter.topics.length)throw new Error("unsupported topic format");var a=t.filter.topics[0];if("string"!=typeof a||66!==a.length)throw new Error("unsupported topic0 format");i+="&topic0="+a}}catch(e){return Promise.reject(e)}var u=this;return o(i+=s,h).then((function(e){var t={},r=Promise.resolve();return e.forEach((function(e){r=r.then((function(){return null!=e.blockHash?null:(e.blockHash=t[e.transactionHash],null==e.blockHash?u.getTransaction(e.transactionHash).then((function(r){return t[e.transactionHash]=r.blockHash,e.blockHash=r.blockHash,null})):null)}))})),r.then((function(){return e}))}));case"getEtherPrice":return"homestead"!==this.network.name?Promise.resolve(0):(i+="/api?module=stats&action=ethprice",o(i+=s,h).then((function(e){return parseFloat(e.ethusd)})))}return m.prototype.perform.call(this,e,t)},g.prototype.getHistory=function(e,t,r){var n=this,i=this.baseUrl,s="";return this.apiKey&&(s+="&apikey="+this.apiKey),null==t&&(t=0),null==r&&(r=99999999),this.resolveName(e).then((function(e){return i+="/api?module=account&action=txlist&address="+e,i+="&startblock="+t,i+="&endblock="+r,i+="&sort=asc"+s,c.fetchJson(i,null,h).then((function(e){n.emit("debug",{action:"getHistory",request:i,response:e,provider:n});var t=[];return e.forEach((function(e){["contractAddress","to"].forEach((function(t){""==e[t]&&delete e[t]})),null==e.creates&&null!=e.contractAddress&&(e.creates=e.contractAddress);var r=o.BaseProvider.checkTransactionResponse(e);e.timeStamp&&(r.timestamp=parseInt(e.timeStamp)),t.push(r)})),t}))}))},g);function g(e,t){var r=m.call(this,e)||this;l.checkNew(r,g);var n="invalid";r.network&&(n=r.network.name);var i=null;switch(n){case"homestead":i="https://api.etherscan.io";break;case"ropsten":i="https://api-ropsten.etherscan.io";break;case"rinkeby":i="https://api-rinkeby.etherscan.io";break;case"kovan":i="https://api-kovan.etherscan.io";break;case"goerli":i="https://api-goerli.etherscan.io";break;default:throw new Error("unsupported network")}return u.defineReadOnly(r,"baseUrl",i),u.defineReadOnly(r,"apiKey",t||"8FG3JMZ9USS4NTA6YKEKHINU56SEPPVBJR"),r}r.EtherscanProvider=y},{"../errors":5,"../utils/bytes":64,"../utils/properties":74,"../utils/web":86,"./base-provider":51}],53:[function(e,t,r){var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(r,"__esModule",{value:!0});var o=e("./base-provider"),a=s(e("../errors"));function u(e){var t=!0,r=null;return e.forEach((function(n){null!=n?null!=r?r.name===n.name&&r.chainId===n.chainId&&(r.ensAddress===n.ensAddress||null==r.ensAddress&&null==n.ensAddress)||a.throwError("provider mismatch",a.INVALID_ARGUMENT,{arg:"networks",value:e}):r=n:t=!1})),t}var c,l=(i(f,c=o.BaseProvider),Object.defineProperty(f.prototype,"providers",{get:function(){return this._providers.slice(0)},enumerable:!0,configurable:!0}),f.prototype.perform=function(e,t){var r=this.providers;return new Promise((function(n,i){var s=null;!function o(){r.length?r.shift().perform(e,t).then((function(e){return n(e)})).catch((function(e){s=s||e,setTimeout(o,0)})):i(s)}()}))},f);function f(e){var t,r=this;if(0===e.length)throw new Error("no providers");return r=u(e.map((function(e){return e.network})))?c.call(this,e[0].network)||this:(t=Promise.all(e.map((function(e){return e.getNetwork()}))).then((function(e){return u(e)||a.throwError("getNetwork returned null",a.UNKNOWN_ERROR,{}),e[0]})),c.call(this,t)||this),a.checkNew(r,f),r._providers=e.slice(0),r}r.FallbackProvider=l},{"../errors":5,"./base-provider":51}],54:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./abstract-provider");r.Provider=n.Provider;var i=e("./base-provider");r.BaseProvider=i.BaseProvider;var s=e("./etherscan-provider");r.EtherscanProvider=s.EtherscanProvider;var o=e("./fallback-provider");r.FallbackProvider=o.FallbackProvider;var a=e("./ipc-provider");r.IpcProvider=a.IpcProvider;var u=e("./infura-provider");r.InfuraProvider=u.InfuraProvider;var c=e("./json-rpc-provider");r.JsonRpcProvider=c.JsonRpcProvider,r.JsonRpcSigner=c.JsonRpcSigner;var l=e("./web3-provider");r.Web3Provider=l.Web3Provider},{"./abstract-provider":50,"./base-provider":51,"./etherscan-provider":52,"./fallback-provider":53,"./infura-provider":55,"./ipc-provider":56,"./json-rpc-provider":57,"./web3-provider":58}],55:[function(e,t,r){var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(r,"__esModule",{value:!0});var o,a=e("./json-rpc-provider"),u=e("../utils/bytes"),c=e("../utils/networks"),l=e("../utils/properties"),f=s(e("../errors")),h=(i(d,o=a.JsonRpcProvider),d.prototype._startPending=function(){f.warn("WARNING: INFURA does not support pending filters")},d.prototype.getSigner=function(e){return f.throwError("INFURA does not support signing",f.UNSUPPORTED_OPERATION,{operation:"getSigner"})},d.prototype.listAccounts=function(){return Promise.resolve([])},d);function d(e,t){var r=this,n=c.getNetwork(null==e?"homestead":e);null==t&&(t="7d0d81d0919f4f05b9ab6634be01ee73");var i=null;switch(n.name){case"homestead":i="mainnet.infura.io";break;case"ropsten":i="ropsten.infura.io";break;case"rinkeby":i="rinkeby.infura.io";break;case"goerli":i="goerli.infura.io";break;case"kovan":i="kovan.infura.io";break;default:f.throwError("unsupported network",f.INVALID_ARGUMENT,{argument:"network",value:e})}return u.isHexString("0x"+t,16)?(r=o.call(this,"https://"+i+"/v3/"+t,n)||this,l.defineReadOnly(r,"apiAccessToken",null),l.defineReadOnly(r,"projectId",t)):(f.warn("The legacy INFURA apiAccesToken API is deprecated; please upgrade to a Project ID instead (see INFURA dshboard; https://infura.io)"),r=o.call(this,"https://"+i+"/"+t,n)||this,l.defineReadOnly(r,"apiAccessToken",t),l.defineReadOnly(r,"projectId",null)),f.checkNew(r,d),r}r.InfuraProvider=h},{"../errors":5,"../utils/bytes":64,"../utils/networks":72,"../utils/properties":74,"./json-rpc-provider":57}],56:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})},{}],57:[function(e,t,r){var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(r,"__esModule",{value:!0});var o=e("./base-provider"),a=e("../abstract-signer"),u=s(e("../errors")),c=e("../utils/address"),l=e("../utils/bytes"),f=e("../utils/networks"),h=e("../utils/properties"),d=e("../utils/utf8"),p=e("../utils/web");function m(e){if(e.error){var t=new Error(e.error.message);throw t.code=e.error.code,t.data=e.error.data,t}return e.result}function y(e){return e?e.toLowerCase():e}var g,v={},b=42,_=(i(w,g=a.Signer),w.prototype.getAddress=function(){var e=this;return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then((function(t){return t.length<=e._index&&u.throwError("unknown account #"+e._index,u.UNSUPPORTED_OPERATION,{operation:"getAddress"}),e._address=c.getAddress(t[e._index]),e._address}))},w.prototype.getBalance=function(e){return this.provider.getBalance(this.getAddress(),e)},w.prototype.getTransactionCount=function(e){return this.provider.getTransactionCount(this.getAddress(),e)},w.prototype.sendUncheckedTransaction=function(e){var t=this;e=h.shallowCopy(e);var r,n=this.getAddress().then((function(e){return e&&e.toLowerCase()}));return null==e.gasLimit&&((r=h.shallowCopy(e)).from=n,e.gasLimit=this.provider.estimateGas(r)),Promise.all([h.resolveProperties(e),n]).then((function(e){var r=e[0],n=A.hexlifyTransaction(r);return n.from=e[1],t.provider.send("eth_sendTransaction",[n]).then((function(e){return e}),(function(e){throw e.responseText&&(0<=e.responseText.indexOf("insufficient funds")&&u.throwError("insufficient funds",u.INSUFFICIENT_FUNDS,{transaction:r}),0<=e.responseText.indexOf("nonce too low")&&u.throwError("nonce has already been used",u.NONCE_EXPIRED,{transaction:r}),0<=e.responseText.indexOf("replacement transaction underpriced")&&u.throwError("replacement fee too low",u.REPLACEMENT_UNDERPRICED,{transaction:r})),e}))}))},w.prototype.sendTransaction=function(e){var t=this;return this.sendUncheckedTransaction(e).then((function(e){return p.poll((function(){return t.provider.getTransaction(e).then((function(r){if(null!==r)return t.provider._wrapTransaction(r,e)}))}),{fastRetry:250,onceBlock:t.provider}).catch((function(t){throw t.transactionHash=e,t}))}))},w.prototype.signMessage=function(e){var t=this,r="string"==typeof e?d.toUtf8Bytes(e):e;return this.getAddress().then((function(e){return t.provider.send("eth_sign",[e.toLowerCase(),l.hexlify(r)])}))},w.prototype.unlock=function(e){var t=this.provider;return this.getAddress().then((function(r){return t.send("personal_unlockAccount",[r.toLowerCase(),e,null])}))},w);function w(e,t,r){var n=g.call(this)||this;if(u.checkNew(n,w),e!==v)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");return h.defineReadOnly(n,"provider",t),r?"string"==typeof r?h.defineReadOnly(n,"_address",c.getAddress(r)):"number"==typeof r?h.defineReadOnly(n,"_index",r):u.throwError("invalid address or index",u.INVALID_ARGUMENT,{argument:"addressOrIndex",value:r}):h.defineReadOnly(n,"_index",0),n}r.JsonRpcSigner=_;var E,k={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0},A=(i(S,E=o.BaseProvider),S.prototype.getSigner=function(e){return new _(v,this,e)},S.prototype.listAccounts=function(){return this.send("eth_accounts",[]).then((function(e){return e.map((function(e){return c.getAddress(e)}))}))},S.prototype.send=function(e,t){var r=this,n={method:e,params:t,id:b++,jsonrpc:"2.0"};return p.fetchJson(this.connection,JSON.stringify(n),m).then((function(e){return r.emit("debug",{action:"send",request:n,response:e,provider:r}),e}))},S.prototype.perform=function(e,t){switch(e){case"getBlockNumber":return this.send("eth_blockNumber",[]);case"getGasPrice":return this.send("eth_gasPrice",[]);case"getBalance":return this.send("eth_getBalance",[y(t.address),t.blockTag]);case"getTransactionCount":return this.send("eth_getTransactionCount",[y(t.address),t.blockTag]);case"getCode":return this.send("eth_getCode",[y(t.address),t.blockTag]);case"getStorageAt":return this.send("eth_getStorageAt",[y(t.address),t.position,t.blockTag]);case"sendTransaction":return this.send("eth_sendRawTransaction",[t.signedTransaction]).catch((function(e){throw e.responseText&&(0<e.responseText.indexOf("insufficient funds")&&u.throwError("insufficient funds",u.INSUFFICIENT_FUNDS,{}),0<e.responseText.indexOf("nonce too low")&&u.throwError("nonce has already been used",u.NONCE_EXPIRED,{}),0<e.responseText.indexOf("replacement transaction underpriced")&&u.throwError("replacement fee too low",u.REPLACEMENT_UNDERPRICED,{})),e}));case"getBlock":return t.blockTag?this.send("eth_getBlockByNumber",[t.blockTag,!!t.includeTransactions]):t.blockHash?this.send("eth_getBlockByHash",[t.blockHash,!!t.includeTransactions]):Promise.reject(new Error("invalid block tag or block hash"));case"getTransaction":return this.send("eth_getTransactionByHash",[t.transactionHash]);case"getTransactionReceipt":return this.send("eth_getTransactionReceipt",[t.transactionHash]);case"call":return this.send("eth_call",[S.hexlifyTransaction(t.transaction,{from:!0}),t.blockTag]);case"estimateGas":return this.send("eth_estimateGas",[S.hexlifyTransaction(t.transaction,{from:!0})]);case"getLogs":return t.filter&&null!=t.filter.address&&(t.filter.address=y(t.filter.address)),this.send("eth_getLogs",[t.filter])}return u.throwError(e+" not implemented",u.NOT_IMPLEMENTED,{operation:e}),null},S.prototype._startPending=function(){var e,t;null==this._pendingFilter&&(t=(e=this).send("eth_newPendingTransactionFilter",[]),(this._pendingFilter=t).then((function(r){return function n(){e.send("eth_getFilterChanges",[r]).then((function(r){if(e._pendingFilter!=t)return null;var n=Promise.resolve();return r.forEach((function(t){e._emitted["t:"+t.toLowerCase()]="pending",n=n.then((function(){return e.getTransaction(t).then((function(t){return e.emit("pending",t),null}))}))})),n.then((function(){return 1e3,new Promise((function(e){setTimeout((function(){e()}),1e3)}))}))})).then((function(){return e._pendingFilter==t?(setTimeout((function(){n()}),0),null):void e.send("eth_uninstallFilter",[r])})).catch((function(e){}))}(),r})).catch((function(e){})))},S.prototype._stopPending=function(){this._pendingFilter=null},S.hexlifyTransaction=function(e,t){var r=h.shallowCopy(k);if(t)for(var n in t)t[n]&&(r[n]=!0);h.checkProperties(e,r);var i={};return["gasLimit","gasPrice","nonce","value"].forEach((function(t){var r;null!=e[t]&&(r=l.hexStripZeros(l.hexlify(e[t])),"gasLimit"===t&&(t="gas"),i[t]=r)})),["from","to","data"].forEach((function(t){null!=e[t]&&(i[t]=l.hexlify(e[t]))})),i},S);function S(e,t){var r,n=this;return"string"==typeof e&&null===t&&f.getNetwork(e)&&(t=e,e=null),n=t?E.call(this,t)||this:(r=new Promise((function(e,t){setTimeout((function(){n.send("net_version",[]).then((function(t){return e(f.getNetwork(parseInt(t)))})).catch((function(e){t(e)}))}))})),E.call(this,r)||this),u.checkNew(n,S),e=e||"http://localhost:8545",n.connection="string"==typeof e?{url:e}:e,n}r.JsonRpcProvider=A},{"../abstract-signer":2,"../errors":5,"../utils/address":60,"../utils/bytes":64,"../utils/networks":72,"../utils/properties":74,"../utils/utf8":85,"../utils/web":86,"./base-provider":51}],58:[function(e,t,r){var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(r,"__esModule",{value:!0});var o,a=e("./json-rpc-provider"),u=e("../utils/properties"),c=s(e("../errors")),l=42,f=(i(h,o=a.JsonRpcProvider),h.prototype.send=function(e,t){var r=this;return"eth_sign"==e&&this._web3Provider.isMetaMask&&(e="personal_sign",t=[t[1],t[0]]),new Promise((function(n,i){var s={method:e,params:t,id:l++,jsonrpc:"2.0"};r._sendAsync(s,(function(e,t){if(e)i(e);else{if(t.error){var r=new Error(t.error.message);return r.code=t.error.code,r.data=t.error.data,void i(r)}n(t.result)}}))}))},h);function h(e,t){var r=o.call(this,e.host||e.path||"",t)||this;return c.checkNew(r,h),e&&(e.sendAsync?r._sendAsync=e.sendAsync.bind(e):e.send&&(r._sendAsync=e.send.bind(e))),e&&r._sendAsync||c.throwError("invalid web3Provider",c.INVALID_ARGUMENT,{arg:"web3Provider",value:e}),u.defineReadOnly(r,"_web3Provider",e),u.defineReadOnly(r,"provider",e),r}r.Web3Provider=f},{"../errors":5,"../utils/properties":74,"./json-rpc-provider":57}],59:[function(e,t,r){var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(r,"__esModule",{value:!0});var o=e("../constants"),a=s(e("../errors")),u=e("./address"),c=e("./bignumber"),l=e("./bytes"),f=e("./utf8"),h=e("./properties"),d=new RegExp(/^bytes([0-9]*)$/),p=new RegExp(/^(u?int)([0-9]*)$/),m=new RegExp(/^(.*)\[([0-9]*)\]$/);r.defaultCoerceFunc=function(e,t){var r=e.match(p);return r&&parseInt(r[2])<=48?t.toNumber():t};var y=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$"),g=new RegExp("^[A-Za-z_][A-Za-z0-9_]*$");function v(e){return e.match(/^uint($|[^1-9])/)?e="uint256"+e.substring(4):e.match(/^int($|[^1-9])/)&&(e="int256"+e.substring(3)),e}function b(e,t){var r=e;function n(e){throw new Error('unexpected character "'+r[e]+'" at position '+e+' in "'+r+'"')}e=e.replace(/\s/g," ");for(var i={type:"",name:"",state:{allowType:!0}},s=i,o=0;o<e.length;o++){var a=e[o];switch(a){case"(":s.state.allowParams||n(o),s.state.allowType=!1,s.type=v(s.type),s.components=[{type:"",name:"",parent:s,state:{allowType:!0}}],s=s.components[0];break;case")":delete s.state,t&&"indexed"===s.name&&(s.indexed=!0,s.name=""),s.type=v(s.type);var u=s;(s=s.parent)||n(o),delete u.parent,s.state.allowParams=!1,s.state.allowName=!0,s.state.allowArray=!0;break;case",":delete s.state,t&&"indexed"===s.name&&(s.indexed=!0,s.name=""),s.type=v(s.type);var c={type:"",name:"",parent:s.parent,state:{allowType:!0}};s.parent.components.push(c),delete s.parent,s=c;break;case" ":s.state.allowType&&""!==s.type&&(s.type=v(s.type),delete s.state.allowType,s.state.allowName=!0,s.state.allowParams=!0),s.state.allowName&&""!==s.name&&(t&&"indexed"===s.name?(s.indexed=!0,s.name=""):s.state.allowName=!1);break;case"[":s.state.allowArray||n(o),s.type+=a,s.state.allowArray=!1,s.state.allowName=!1,s.state.readArray=!0;break;case"]":s.state.readArray||n(o),s.type+=a,s.state.readArray=!1,s.state.allowArray=!0,s.state.allowName=!0;break;default:s.state.allowType?(s.type+=a,s.state.allowParams=!0,s.state.allowArray=!0):s.state.allowName?(s.name+=a,delete s.state.allowArray):s.state.readArray?s.type+=a:n(o)}}if(s.parent)throw new Error("unexpected eof");return delete i.state,t&&"indexed"===s.name&&(s.indexed=!0,s.name=""),i.type=v(i.type),i}function _(e){return oe(r.defaultCoerceFunc,e).type}function w(e,t,r,n,i){this.coerceFunc=e,this.name=t,this.type=r,this.localName=n,this.dynamic=i}r.parseParamType=function(e){return b(e,!0)},r.formatParamType=_,r.formatSignature=function(e){return e.name+"("+e.inputs.map(_).join(",")+")"},r.parseSignature=function(e){if("string"==typeof e)return"event "===(e=(e=(e=e.replace(/\s/g," ")).replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," ")).trim()).substring(0,6)?function(e){var t={anonymous:!1,inputs:[],name:"",type:"event"},r=e.match(y);if(!r)throw new Error("invalid event: "+e);if(t.name=r[1].trim(),ie(r[2]).forEach((function(e){(e=b(e,!0)).indexed=!!e.indexed,t.inputs.push(e)})),r[3].split(" ").forEach((function(e){switch(e){case"anonymous":t.anonymous=!0;break;case"":break;default:a.info("unknown modifier: "+e)}})),t.name&&!t.name.match(g))throw new Error('invalid identifier: "'+t.name+'"');return t}(e.substring(6).trim()):("function "===e.substring(0,9)&&(e=e.substring(9)),function(e){var t={constant:!1,gas:null,inputs:[],name:"",outputs:[],payable:!1,stateMutability:null,type:"function"},r=e.split("@");if(1!==r.length){if(2<r.length)throw new Error("invalid signature");if(!r[1].match(/^[0-9]+$/))throw new Error("invalid signature gas");t.gas=c.bigNumberify(r[1]),e=r[0]}var n=(r=e.split(" returns "))[0].match(y);if(!n)throw new Error("invalid signature");if(t.name=n[1].trim(),!t.name.match(g))throw new Error('invalid identifier: "'+n[1]+'"');if(ie(n[2]).forEach((function(e){t.inputs.push(b(e))})),n[3].split(" ").forEach((function(e){switch(e){case"constant":t.constant=!0;break;case"payable":t.payable=!0,t.stateMutability="payable";break;case"pure":t.constant=!0,t.stateMutability="pure";break;case"view":t.constant=!0,t.stateMutability="view";break;case"external":case"public":case"":break;default:a.info("unknown modifier: "+e)}})),1<r.length){var i=r[1].match(y);if(""!=i[1].trim()||""!=i[3].trim())throw new Error("unexpected tokens");ie(i[2]).forEach((function(e){t.outputs.push(b(e))}))}if("constructor"===t.name){if(t.type="constructor",t.outputs.length)throw new Error("constructor may not have outputs");delete t.name,delete t.outputs}return t}(e.trim()));throw new Error("unknown signature")};var E,k=(i(A,E=w),A.prototype.encode=function(e){return this.coder.encode(e)},A.prototype.decode=function(e,t){return this.coder.decode(e,t)},A);function A(e){var t=E.call(this,e.coerceFunc,e.name,e.type,void 0,e.dynamic)||this;return h.defineReadOnly(t,"coder",e),t}var S,x=(i(I,S=w),I.prototype.encode=function(e){return l.arrayify([])},I.prototype.decode=function(e,t){if(t>e.length)throw new Error("invalid null");return{consumed:0,value:this.coerceFunc("null",void 0)}},I);function I(e,t){return S.call(this,e,"null","",t,!1)||this}var T,P=(i(N,T=w),N.prototype.encode=function(e){try{var t=c.bigNumberify(e);if(this.signed){var r=o.MaxUint256.maskn(8*this.size-1);if(t.gt(r))throw new Error("out-of-bounds");if(r=r.add(o.One).mul(o.NegativeOne),t.lt(r))throw new Error("out-of-bounds")}else if(t.lt(o.Zero)||t.gt(o.MaxUint256.maskn(8*this.size)))throw new Error("out-of-bounds");return t=t.toTwos(8*this.size).maskn(8*this.size),this.signed&&(t=t.fromTwos(8*this.size).toTwos(256)),l.padZeros(l.arrayify(t),32)}catch(t){a.throwError("invalid number value",a.INVALID_ARGUMENT,{arg:this.localName,coderType:this.name,value:e})}return null},N.prototype.decode=function(e,t){e.length<t+32&&a.throwError("insufficient data for "+this.name+" type",a.INVALID_ARGUMENT,{arg:this.localName,coderType:this.name,value:l.hexlify(e.slice(t,t+32))});var r=32-this.size,n=c.bigNumberify(e.slice(t+r,t+32));n=this.signed?n.fromTwos(8*this.size):n.maskn(8*this.size);return{consumed:32,value:this.coerceFunc(this.name,n)}},N);function N(e,t,r,n){var i=this,s=(r?"int":"uint")+8*t;return(i=T.call(this,e,s,s,n,!1)||this).size=t,i.signed=r,i}var C,R=new P((function(e,t){return t}),32,!1,"none"),O=(i(M,C=w),M.prototype.encode=function(e){return R.encode(e?1:0)},M.prototype.decode=function(e,t){try{var r=R.decode(e,t)}catch(e){throw"insufficient data for uint256 type"===e.reason&&a.throwError("insufficient data for boolean type",a.INVALID_ARGUMENT,{arg:this.localName,coderType:"boolean",value:e.value}),e}return{consumed:r.consumed,value:this.coerceFunc("bool",!r.value.isZero())}},M);function M(e,t){return C.call(this,e,"bool","bool",t,!1)||this}var D,L=(i(B,D=w),B.prototype.encode=function(e){var t=new Uint8Array(32);try{var r=l.arrayify(e);if(r.length!==this.length)throw new Error("incorrect data length");t.set(r)}catch(t){a.throwError("invalid "+this.name+" value",a.INVALID_ARGUMENT,{arg:this.localName,coderType:this.name,value:t.value||e})}return t},B.prototype.decode=function(e,t){return e.length<t+32&&a.throwError("insufficient data for "+this.name+" type",a.INVALID_ARGUMENT,{arg:this.localName,coderType:this.name,value:l.hexlify(e.slice(t,t+32))}),{consumed:32,value:this.coerceFunc(this.name,l.hexlify(e.slice(t,t+this.length)))}},B);function B(e,t,r){var n=this,i="bytes"+t;return(n=D.call(this,e,i,i,r,!1)||this).length=t,n}var U,j=(i(K,U=w),K.prototype.encode=function(e){var t=new Uint8Array(32);try{t.set(l.arrayify(u.getAddress(e)),12)}catch(t){a.throwError("invalid address",a.INVALID_ARGUMENT,{arg:this.localName,coderType:"address",value:e})}return t},K.prototype.decode=function(e,t){return e.length<t+32&&a.throwError("insufficient data for address type",a.INVALID_ARGUMENT,{arg:this.localName,coderType:"address",value:l.hexlify(e.slice(t,t+32))}),{consumed:32,value:this.coerceFunc("address",u.getAddress(l.hexlify(e.slice(t+12,t+32))))}},K);function K(e,t){return U.call(this,e,"address","address",t,!1)||this}function F(e){var t=32*Math.ceil(e.length/32),r=new Uint8Array(t-e.length);return l.concat([R.encode(e.length),e,r])}function V(e,t,r){e.length<t+32&&a.throwError("insufficient data for dynamicBytes length",a.INVALID_ARGUMENT,{arg:r,coderType:"dynamicBytes",value:l.hexlify(e.slice(t,t+32))});var n=R.decode(e,t).value;try{n=n.toNumber()}catch(e){a.throwError("dynamic bytes count too large",a.INVALID_ARGUMENT,{arg:r,coderType:"dynamicBytes",value:n.toString()})}return e.length<t+32+n&&a.throwError("insufficient data for dynamicBytes type",a.INVALID_ARGUMENT,{arg:r,coderType:"dynamicBytes",value:l.hexlify(e.slice(t,t+32+n))}),{consumed:32+32*Math.ceil(n/32),value:e.slice(t+32,t+32+n)}}var H,G=(i(q,H=w),q.prototype.encode=function(e){try{return F(l.arrayify(e))}catch(e){a.throwError("invalid bytes value",a.INVALID_ARGUMENT,{arg:this.localName,coderType:"bytes",value:e.value})}return null},q.prototype.decode=function(e,t){var r=V(e,t,this.localName);return r.value=this.coerceFunc("bytes",l.hexlify(r.value)),r},q);function q(e,t){return H.call(this,e,"bytes","bytes",t,!0)||this}var z,W=(i(Y,z=w),Y.prototype.encode=function(e){return"string"!=typeof e&&a.throwError("invalid string value",a.INVALID_ARGUMENT,{arg:this.localName,coderType:"string",value:e}),F(f.toUtf8Bytes(e))},Y.prototype.decode=function(e,t){var r=V(e,t,this.localName);return r.value=this.coerceFunc("string",f.toUtf8String(r.value)),r},Y);function Y(e,t){return z.call(this,e,"string","string",t,!0)||this}function Z(e){return 32*Math.ceil(e/32)}function J(e,t){var r;Array.isArray(t)||(t&&"object"==typeof t?(r=[],e.forEach((function(e){r.push(t[e.localName])})),t=r):a.throwError("invalid tuple value",a.INVALID_ARGUMENT,{coderType:"tuple",value:t})),e.length!==t.length&&a.throwError("types/value length mismatch",a.INVALID_ARGUMENT,{coderType:"tuple",value:t});var n=[];e.forEach((function(e,r){n.push({dynamic:e.dynamic,value:e.encode(t[r])})}));var i=0,s=0;n.forEach((function(e){e.dynamic?(i+=32,s+=Z(e.value.length)):i+=Z(e.value.length)}));var o=0,u=i,c=new Uint8Array(i+s);return n.forEach((function(e){e.dynamic?(c.set(R.encode(u),o),o+=32,c.set(e.value,u),u+=Z(e.value.length)):(c.set(e.value,o),o+=Z(e.value.length))})),c}function $(e,t,r){var n=r,i=0,s=[];return e.forEach((function(e){var o,a;e.dynamic?(o=R.decode(t,r),(a=e.decode(t,n+o.value.toNumber())).consumed=o.consumed):a=e.decode(t,r),null!=a.value&&s.push(a.value),r+=a.consumed,i+=a.consumed})),e.forEach((function(e,t){var r=e.localName;r&&("length"===r&&(r="_length"),null==s[r]&&(s[r]=s[t]))})),{value:s,consumed:i}}var X,Q=(i(ee,X=w),ee.prototype.encode=function(e){Array.isArray(e)||a.throwError("expected array value",a.INVALID_ARGUMENT,{arg:this.localName,coderType:"array",value:e});var t=this.length,r=new Uint8Array(0);-1===t&&(t=e.length,r=R.encode(t)),a.checkArgumentCount(t,e.length," in coder array"+(this.localName?" "+this.localName:""));for(var n=[],i=0;i<e.length;i++)n.push(this.coder);return l.concat([r,J(n,e)])},ee.prototype.decode=function(e,t){var r=0,n=this.length;if(-1===n){try{var i=R.decode(e,t)}catch(e){a.throwError("insufficient data for dynamic array length",a.INVALID_ARGUMENT,{arg:this.localName,coderType:"array",value:e.value})}try{n=i.value.toNumber()}catch(e){a.throwError("array count too large",a.INVALID_ARGUMENT,{arg:this.localName,coderType:"array",value:i.value.toString()})}r+=i.consumed,t+=i.consumed}for(var s=[],o=0;o<n;o++)s.push(new k(this.coder));var u=$(s,e,t);return u.consumed+=r,u.value=this.coerceFunc(this.type,u.value),u},ee);function ee(e,t,r,n){var i=this,s=t.type+"["+(0<=r?r:"")+"]",o=-1===r||t.dynamic;return(i=X.call(this,e,"array",s,n,o)||this).coder=t,i.length=r,i}var te,re=(i(ne,te=w),ne.prototype.encode=function(e){return J(this.coders,e)},ne.prototype.decode=function(e,t){var r=$(this.coders,e,t);return r.value=this.coerceFunc(this.type,r.value),r},ne);function ne(e,t,r){var n=this,i=!1,s=[];t.forEach((function(e){e.dynamic&&(i=!0),s.push(e.type)}));var o="tuple("+s.join(",")+")";return(n=te.call(this,e,"tuple",o,r,i)||this).coders=t,n}function ie(e){e=e.trim();for(var t=[],r="",n=0,i=0;i<e.length;i++){var s=e[i];if(","===s&&0===n)t.push(r),r="";else if(r+=s,"("===s)n++;else if(")"===s&&-1==--n)throw new Error("unbalanced parenthsis")}return r&&t.push(r),t}var se={address:j,bool:O,string:W,bytes:G};function oe(e,t){var r=se[t.type];if(r)return new r(e,t.name);var n,i,s,o,u=t.type.match(p);if(u)return(0===(c=parseInt(u[2]||"256"))||256<c||c%8!=0)&&a.throwError("invalid "+u[1]+" bit length",a.INVALID_ARGUMENT,{arg:"param",value:t}),new P(e,c/8,"int"===u[1],t.name);if(u=t.type.match(d))return(0===(c=parseInt(u[1]))||32<c)&&a.throwError("invalid bytes length",a.INVALID_ARGUMENT,{arg:"param",value:t}),new L(e,c,t.name);if(u=t.type.match(m)){var c=parseInt(u[2]||"-1");return(t=h.shallowCopy(t)).type=u[1],t=h.deepCopy(t),new Q(e,oe(e,t),c,t.name)}return"tuple"===t.type.substring(0,5)?(n=e,i=t.components,s=t.name,o=[],(i=i||[]).forEach((function(e){o.push(oe(n,e))})),new re(n,o,s)):""===t.type?new x(e,t.name):(a.throwError("invalid type",a.INVALID_ARGUMENT,{arg:"type",value:t.type}),null)}var ae=(ue.prototype.encode=function(e,t){e.length!==t.length&&a.throwError("types/values length mismatch",a.INVALID_ARGUMENT,{count:{types:e.length,values:t.length},value:{types:e,values:t}});var r=[];return e.forEach((function(e){var t="string"==typeof e?b(e):e;r.push(oe(this.coerceFunc,t))}),this),l.hexlify(new re(this.coerceFunc,r,"_").encode(t))},ue.prototype.decode=function(e,t){var r=[];return e.forEach((function(e){var t="string"==typeof e?b(e):h.deepCopy(e);r.push(oe(this.coerceFunc,t))}),this),new re(this.coerceFunc,r,"_").decode(l.arrayify(t),0).value},ue);function ue(e){a.checkNew(this,ue),e=e||r.defaultCoerceFunc,h.defineReadOnly(this,"coerceFunc",e)}r.AbiCoder=ae,r.defaultAbiCoder=new ae},{"../constants":3,"../errors":5,"./address":60,"./bignumber":63,"./bytes":64,"./properties":74,"./utf8":85}],60:[function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var i=n(e("bn.js")),s=e("./bytes"),o=e("./keccak256"),a=e("./rlp"),u=e("../errors");function c(e){"string"==typeof e&&e.match(/^0x[0-9A-Fa-f]{40}$/)||u.throwError("invalid address",u.INVALID_ARGUMENT,{arg:"address",value:e});for(var t=(e=e.toLowerCase()).substring(2).split(""),r=new Uint8Array(40),n=0;n<40;n++)r[n]=t[n].charCodeAt(0);r=s.arrayify(o.keccak256(r));for(var i=0;i<40;i+=2)8<=r[i>>1]>>4&&(t[i]=t[i].toUpperCase()),8<=(15&r[i>>1])&&(t[i+1]=t[i+1].toUpperCase());return"0x"+t.join("")}for(var l={},f=0;f<10;f++)l[String(f)]=String(f);for(f=0;f<26;f++)l[String.fromCharCode(65+f)]=String(10+f);var h,d=Math.floor((h=9007199254740991,Math.log10?Math.log10(h):Math.log(h)/Math.LN10));function p(e){e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00";var t="";for(e.split("").forEach((function(e){t+=l[e]}));t.length>=d;){var r=t.substring(0,d);t=parseInt(r,10)%97+t.substring(r.length)}for(var n=String(98-parseInt(t,10)%97);n.length<2;)n="0"+n;return n}function m(e){var t=null;if("string"!=typeof e&&u.throwError("invalid address",u.INVALID_ARGUMENT,{arg:"address",value:e}),e.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==e.substring(0,2)&&(e="0x"+e),t=c(e),e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&t!==e&&u.throwError("bad address checksum",u.INVALID_ARGUMENT,{arg:"address",value:e});else if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(e.substring(2,4)!==p(e)&&u.throwError("bad icap checksum",u.INVALID_ARGUMENT,{arg:"address",value:e}),t=new i.default.BN(e.substring(4),36).toString(16);t.length<40;)t="0"+t;t=c("0x"+t)}else u.throwError("invalid address",u.INVALID_ARGUMENT,{arg:"address",value:e});return t}r.getAddress=m,r.getIcapAddress=function(e){for(var t=new i.default.BN(m(e).substring(2),16).toString(36).toUpperCase();t.length<30;)t="0"+t;return"XE"+p("XE00"+t)+t},r.getContractAddress=function(e){if(!e.from)throw new Error("missing from address");var t=e.nonce;return m("0x"+o.keccak256(a.encode([m(e.from),s.stripZeros(s.hexlify(t))])).substring(26))},r.getCreate2Address=function(e){var t=e.initCodeHash;e.initCode&&(t?o.keccak256(e.initCode)!==t&&u.throwError("initCode/initCodeHash mismatch",u.INVALID_ARGUMENT,{arg:"options",value:e}):t=o.keccak256(e.initCode)),t||u.throwError("missing initCode or initCodeHash",u.INVALID_ARGUMENT,{arg:"options",value:e});var r=m(e.from),n=s.arrayify(e.salt);return 32!==n.length&&u.throwError("invalid salt",u.INVALID_ARGUMENT,{arg:"options",value:e}),m("0x"+o.keccak256(s.concat(["0xff",r,n,t])).substring(26))}},{"../errors":5,"./bytes":64,"./keccak256":71,"./rlp":76,"bn.js":9}],61:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("../utils/bytes");t.exports={decode:function(e){e=atob(e);for(var t=[],r=0;r<e.length;r++)t.push(e.charCodeAt(r));return n.arrayify(t)},encode:function(e){e=n.arrayify(e);for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}}},{"../utils/bytes":64}],62:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./bytes"),i=e("./properties"),s=(o.prototype.encode=function(e){var t=n.arrayify(e);if(0===t.length)return"";for(var r=[0],i=0;i<t.length;++i){for(var s=t[i],o=0;o<r.length;++o)s+=r[o]<<8,r[o]=s%this.base,s=s/this.base|0;for(;0<s;)r.push(s%this.base),s=s/this.base|0}for(var a="",u=0;0===t[u]&&u<t.length-1;++u)a+=this._leader;for(var c=r.length-1;0<=c;--c)a+=this.alphabet[r[c]];return a},o.prototype.decode=function(e){if("string"!=typeof e)throw new TypeError("Expected String");var t=[];if(0===e.length)return new Uint8Array(t);t.push(0);for(var r=0;r<e.length;r++){var i=this._alphabetMap[e[r]];if(void 0===i)throw new Error("Non-base"+this.base+" character");for(var s=i,o=0;o<t.length;++o)s+=t[o]*this.base,t[o]=255&s,s>>=8;for(;0<s;)t.push(255&s),s>>=8}for(var a=0;e[a]===this._leader&&a<e.length-1;++a)t.push(0);return n.arrayify(new Uint8Array(t.reverse()))},o);function o(e){i.defineReadOnly(this,"alphabet",e),i.defineReadOnly(this,"base",e.length),i.defineReadOnly(this,"_alphabetMap",{}),i.defineReadOnly(this,"_leader",e.charAt(0));for(var t=0;t<e.length;t++)this._alphabetMap[e.charAt(t)]=t}var a=new(r.BaseX=s)("abcdefghijklmnopqrstuvwxyz234567");r.Base32=a;var u=new s("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");r.Base58=u},{"./bytes":64,"./properties":74}],63:[function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(r,"__esModule",{value:!0});var s=n(e("bn.js")),o=e("./bytes"),a=e("./properties"),u=i(e("../errors")),c=new s.default.BN(-1);function l(e){var t=e.toString(16);return"-"===t[0]?t.length%2==0?"-0x0"+t.substring(1):"-0x"+t.substring(1):t.length%2==1?"0x0"+t:"0x"+t}function f(e){return d(y(e))}function h(e){return new p(l(e))}function d(e){var t=e._hex;return"-"===t[0]?new s.default.BN(t.substring(3),16).mul(c):new s.default.BN(t.substring(2),16)}var p=(m.prototype.fromTwos=function(e){return h(d(this).fromTwos(e))},m.prototype.toTwos=function(e){return h(d(this).toTwos(e))},m.prototype.abs=function(){return"-"===this._hex[0]?h(d(this).mul(c)):this},m.prototype.add=function(e){return h(d(this).add(f(e)))},m.prototype.sub=function(e){return h(d(this).sub(f(e)))},m.prototype.div=function(e){return y(e).isZero()&&u.throwError("division by zero",u.NUMERIC_FAULT,{operation:"divide",fault:"division by zero"}),h(d(this).div(f(e)))},m.prototype.mul=function(e){return h(d(this).mul(f(e)))},m.prototype.mod=function(e){return h(d(this).mod(f(e)))},m.prototype.pow=function(e){return h(d(this).pow(f(e)))},m.prototype.maskn=function(e){return h(d(this).maskn(e))},m.prototype.eq=function(e){return d(this).eq(f(e))},m.prototype.lt=function(e){return d(this).lt(f(e))},m.prototype.lte=function(e){return d(this).lte(f(e))},m.prototype.gt=function(e){return d(this).gt(f(e))},m.prototype.gte=function(e){return d(this).gte(f(e))},m.prototype.isZero=function(){return d(this).isZero()},m.prototype.toNumber=function(){try{return d(this).toNumber()}catch(e){u.throwError("overflow",u.NUMERIC_FAULT,{operation:"setValue",fault:"overflow",details:e.message})}return null},m.prototype.toString=function(){return d(this).toString(10)},m.prototype.toHexString=function(){return this._hex},m.isBigNumber=function(e){return a.isType(e,"BigNumber")},m);function m(e){if(u.checkNew(this,m),a.setType(this,"BigNumber"),"string"==typeof e)o.isHexString(e)?("0x"==e&&(e="0x0"),a.defineReadOnly(this,"_hex",e)):"-"===e[0]&&o.isHexString(e.substring(1))?a.defineReadOnly(this,"_hex",e):e.match(/^-?[0-9]*$/)?(""==e&&(e="0"),a.defineReadOnly(this,"_hex",l(new s.default.BN(e)))):u.throwError("invalid BigNumber string value",u.INVALID_ARGUMENT,{arg:"value",value:e});else if("number"==typeof e){parseInt(String(e))!==e&&u.throwError("underflow",u.NUMERIC_FAULT,{operation:"setValue",fault:"underflow",value:e,outputValue:parseInt(String(e))});try{a.defineReadOnly(this,"_hex",l(new s.default.BN(e)))}catch(e){u.throwError("overflow",u.NUMERIC_FAULT,{operation:"setValue",fault:"overflow",details:e.message})}}else e instanceof m?a.defineReadOnly(this,"_hex",e._hex):e.toHexString?a.defineReadOnly(this,"_hex",l(f(e.toHexString()))):e._hex&&o.isHexString(e._hex)?a.defineReadOnly(this,"_hex",e._hex):o.isArrayish(e)?a.defineReadOnly(this,"_hex",l(new s.default.BN(o.hexlify(e).substring(2),16))):u.throwError("invalid BigNumber value",u.INVALID_ARGUMENT,{arg:"value",value:e})}function y(e){return p.isBigNumber(e)?e:new p(e)}r.BigNumber=p,r.bigNumberify=y},{"../errors":5,"./bytes":64,"./properties":74,"bn.js":9}],64:[function(e,t,r){var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(r,"__esModule",{value:!0});var i=n(e("../errors"));function s(e){return!!e.toHexString}function o(e){return e.slice||(e.slice=function(){var t=Array.prototype.slice.call(arguments);return o(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function a(e){if(!e||parseInt(String(e.length))!=e.length||"string"==typeof e)return!1;for(var t=0;t<e.length;t++){var r=e[t];if(r<0||256<=r||parseInt(String(r))!=r)return!1}return!0}function u(e){if(null==e&&i.throwError("cannot convert null value to array",i.INVALID_ARGUMENT,{arg:"value",value:e}),s(e)&&(e=e.toHexString()),"string"!=typeof e)return a(e)?o(new Uint8Array(e)):(i.throwError("invalid arrayify value",null,{arg:"value",value:e,type:typeof e}),null);var t=e.match(/^(0x)?[0-9a-fA-F]*$/);t||i.throwError("invalid hexidecimal string",i.INVALID_ARGUMENT,{arg:"value",value:e}),"0x"!==t[1]&&i.throwError("hex string must have 0x prefix",i.INVALID_ARGUMENT,{arg:"value",value:e}),(e=e.substring(2)).length%2&&(e="0"+e);for(var r=[],n=0;n<e.length;n+=2)r.push(parseInt(e.substr(n,2),16));return o(new Uint8Array(r))}function c(e){for(var t=[],r=0,n=0;n<e.length;n++){var i=u(e[n]);t.push(i),r+=i.length}var s=new Uint8Array(r),a=0;for(n=0;n<t.length;n++)s.set(t[n],a),a+=t[n].length;return o(s)}function l(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}r.isHexable=s,r.isArrayish=a,r.arrayify=u,r.concat=c,r.stripZeros=function(e){var t=u(e);if(0===t.length)return t;for(var r=0;0===t[r];)r++;return r&&(t=t.slice(r)),t},r.padZeros=function(e,t){if(t<(e=u(e)).length)throw new Error("cannot pad");var r=new Uint8Array(t);return r.set(e,t-e.length),o(r)},r.isHexString=l;var f="0123456789abcdef";function h(e){if(s(e))return e.toHexString();if("number"==typeof e){e<0&&i.throwError("cannot hexlify negative value",i.INVALID_ARGUMENT,{arg:"value",value:e}),9007199254740991<=e&&i.throwError("out-of-range",i.NUMERIC_FAULT,{operartion:"hexlify",fault:"out-of-safe-range"});for(var t="";e;)t=f[15&e]+t,e=Math.floor(e/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if("string"==typeof e){var r=e.match(/^(0x)?[0-9a-fA-F]*$/);return r||i.throwError("invalid hexidecimal string",i.INVALID_ARGUMENT,{arg:"value",value:e}),"0x"!==r[1]&&i.throwError("hex string must have 0x prefix",i.INVALID_ARGUMENT,{arg:"value",value:e}),e.length%2&&(e="0x0"+e.substring(2)),e}if(a(e)){for(var n=[],o=0;o<e.length;o++){var u=e[o];n.push(f[(240&u)>>4]+f[15&u])}return"0x"+n.join("")}return i.throwError("invalid hexlify value",null,{arg:"value",value:e}),"never"}function d(e,t){for(l(e)||i.throwError("invalid hex string",i.INVALID_ARGUMENT,{arg:"value",value:e});e.length<2*t+2;)e="0x0"+e.substring(2);return e}function p(e){var t,r=0,n="0x",s="0x";if((t=e)&&null!=t.r&&null!=t.s){null==e.v&&null==e.recoveryParam&&i.throwError("at least on of recoveryParam or v must be specified",i.INVALID_ARGUMENT,{argument:"signature",value:e}),n=d(e.r,32),s=d(e.s,32),"string"==typeof(r=e.v)&&(r=parseInt(r,16));var o=e.recoveryParam;null==o&&null!=e.v&&(o=1-r%2),r=27+o}else{var a=u(e);if(65!==a.length)throw new Error("invalid signature");n=h(a.slice(0,32)),s=h(a.slice(32,64)),27!==(r=a[64])&&28!==r&&(r=27+r%2)}return{r:n,s:s,recoveryParam:r-27,v:r}}r.hexlify=h,r.hexDataLength=function(e){return l(e)&&e.length%2==0?(e.length-2)/2:null},r.hexDataSlice=function(e,t,r){return l(e)||i.throwError("invalid hex data",i.INVALID_ARGUMENT,{arg:"value",value:e}),e.length%2!=0&&i.throwError("hex data length must be even",i.INVALID_ARGUMENT,{arg:"value",value:e}),t=2+2*t,null!=r?"0x"+e.substring(t,2+2*r):"0x"+e.substring(t)},r.hexStripZeros=function(e){for(l(e)||i.throwError("invalid hex string",i.INVALID_ARGUMENT,{arg:"value",value:e});3<e.length&&"0x0"===e.substring(0,3);)e="0x"+e.substring(3);return e},r.hexZeroPad=d,r.splitSignature=p,r.joinSignature=function(e){return h(c([(e=p(e)).r,e.s,e.recoveryParam?"0x1c":"0x1b"]))}},{"../errors":5}],65:[function(e,t,r){var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(r,"__esModule",{value:!0});var i=n(e("../errors")),s=e("./bytes"),o=e("./utf8"),a=e("./keccak256"),u=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),c=new RegExp("^((.*)\\.)?([^.]+)$"),l=new RegExp("^[a-z0-9.-]*$");r.namehash=function(e){"string"!=typeof e&&i.throwError("invalid address - "+String(e),i.INVALID_ARGUMENT,{argument:"name",value:e}),(e=e.toLowerCase()).match(l)||i.throwError("contains invalid UseSTD3ASCIIRules characters",i.INVALID_ARGUMENT,{argument:"name",value:e});for(var t=u;e.length;){var r=e.match(c),n=o.toUtf8Bytes(r[3]);t=a.keccak256(s.concat([t,a.keccak256(n)]));e=r[2]||""}return s.hexlify(t)},r.id=function(e){return a.keccak256(o.toUtf8Bytes(e))},r.hashMessage=function(e){return a.keccak256(s.concat([o.toUtf8Bytes("Ethereum Signed Message:\n"),o.toUtf8Bytes(String(e.length)),"string"==typeof e?o.toUtf8Bytes(e):e]))}},{"../errors":5,"./bytes":64,"./keccak256":71,"./utf8":85}],66:[function(e,t,r){var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(r,"__esModule",{value:!0});var i=n(e("../errors")),s=e("../wordlists/lang-en"),o=e("./basex"),a=e("./bytes"),u=e("./bignumber"),c=e("./utf8"),l=e("./pbkdf2"),f=e("./hmac"),h=e("./properties"),d=e("./secp256k1"),p=e("./sha2"),m=u.bigNumberify("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),y=c.toUtf8Bytes("Bitcoin seed"),g=2147483648;function v(e){return(1<<e)-1<<8-e}function b(e){return a.hexZeroPad(a.hexlify(e),32)}function _(e){var t=a.hexDataSlice(p.sha256(p.sha256(e)),0,4);return o.Base58.encode(a.concat([e,t]))}var w={};r.defaultPath="m/44'/60'/0'/0/0";var E=(Object.defineProperty(k.prototype,"extendedKey",{get:function(){if(256<=this.depth)throw new Error("Depth too large!");return _(a.concat([null!=this.privateKey?"0x0488ADE4":"0x0488B21E",a.hexlify(this.depth),this.parentFingerprint,a.hexZeroPad(a.hexlify(this.index),4),this.chainCode,null!=this.privateKey?a.concat(["0x00",this.privateKey]):this.publicKey]))},enumerable:!0,configurable:!0}),k.prototype.neuter=function(){return new k(w,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,null,this.path)},k.prototype._derive=function(e){if(4294967295<e)throw new Error("invalid index - "+String(e));var t=this.path;t&&(t+="/"+(e&~g));var r=new Uint8Array(37);if(e&g){if(!this.privateKey)throw new Error("cannot derive child of neutered node");r.set(a.arrayify(this.privateKey),1),t&&(t+="'")}else r.set(a.arrayify(this.publicKey));for(var n=24;0<=n;n-=8)r[33+(n>>3)]=e>>24-n&255;var i=f.computeHmac(f.SupportedAlgorithms.sha512,this.chainCode,r),s=i.slice(0,32),o=i.slice(32),c=null,l=null;return this.privateKey?c=b(u.bigNumberify(s).add(this.privateKey).mod(m)):l=new d.KeyPair(a.hexlify(s))._addPoint(this.publicKey),new k(w,c,l,this.fingerprint,b(o),e,this.depth+1,this.mnemonic,t)},k.prototype.derivePath=function(e){var t=e.split("/");if(0===t.length||"m"===t[0]&&0!==this.depth)throw new Error("invalid path - "+e);"m"===t[0]&&t.shift();for(var r=this,n=0;n<t.length;n++){var i=t[n];if(i.match(/^[0-9]+'$/)){var s=parseInt(i.substring(0,i.length-1));if(g<=s)throw new Error("invalid path index - "+i);r=r._derive(g+s)}else{if(!i.match(/^[0-9]+$/))throw new Error("invalid path component - "+i);if(s=parseInt(i),g<=s)throw new Error("invalid path index - "+i);r=r._derive(s)}}return r},k.isHDNode=function(e){return h.isType(e,"HDNode")},k);function k(e,t,r,n,s,o,u,c,l){if(i.checkNew(this,k),e!==w)throw new Error("HDNode constructor cannot be called directly");var f;t?(f=new d.KeyPair(t),h.defineReadOnly(this,"privateKey",f.privateKey),h.defineReadOnly(this,"publicKey",f.compressedPublicKey)):(h.defineReadOnly(this,"privateKey",null),h.defineReadOnly(this,"publicKey",a.hexlify(r))),h.defineReadOnly(this,"parentFingerprint",n),h.defineReadOnly(this,"fingerprint",a.hexDataSlice(p.ripemd160(p.sha256(this.publicKey)),0,4)),h.defineReadOnly(this,"address",d.computeAddress(this.publicKey)),h.defineReadOnly(this,"chainCode",s),h.defineReadOnly(this,"index",o),h.defineReadOnly(this,"depth",u),h.defineReadOnly(this,"mnemonic",c),h.defineReadOnly(this,"path",l),h.setType(this,"HDNode")}function A(e,t){var r=a.arrayify(e);if(r.length<16||64<r.length)throw new Error("invalid seed");var n=a.arrayify(f.computeHmac(f.SupportedAlgorithms.sha512,y,r));return new E(w,b(n.slice(0,32)),null,"0x00000000",b(n.slice(32)),0,0,t,"m")}function S(e,t){t=t||"";var r=c.toUtf8Bytes("mnemonic"+t,c.UnicodeNormalizationForm.NFKD);return a.hexlify(l.pbkdf2(c.toUtf8Bytes(e,c.UnicodeNormalizationForm.NFKD),r,2048,64,"sha512"))}function x(e,t){t=t||s.langEn,i.checkNormalize();var r=t.split(e);if(r.length%3!=0)throw new Error("invalid mnemonic");for(var n=a.arrayify(new Uint8Array(Math.ceil(11*r.length/8))),o=0,u=0;u<r.length;u++){var c=t.getWordIndex(r[u].normalize("NFKD"));if(-1===c)throw new Error("invalid mnemonic");for(var l=0;l<11;l++)c&1<<10-l&&(n[o>>3]|=1<<7-o%8),o++}var f=32*r.length/3,h=v(r.length/3),d=a.arrayify(p.sha256(n.slice(0,f/8)))[0];if((d&=h)!=(n[n.length-1]&h))throw new Error("invalid checksum");return a.hexlify(n.slice(0,f/8))}function I(e,t){if((e=a.arrayify(e)).length%4!=0||e.length<16||32<e.length)throw new Error("invalid entropy");for(var r=[0],n=11,i=0;i<e.length;i++)8<n?(r[r.length-1]<<=8,r[r.length-1]|=e[i],n-=8):(r[r.length-1]<<=n,r[r.length-1]|=e[i]>>8-n,r.push(e[i]&(1<<8-n)-1),n+=3);var o=a.arrayify(p.sha256(e))[0],u=e.length/4;return o&=v(u),r[r.length-1]<<=u,r[r.length-1]|=o>>8-u,(t=t||s.langEn).join(r.map((function(e){return t.getWord(e)})))}r.HDNode=E,r.fromExtendedKey=function(e){var t=o.Base58.decode(e);82===t.length&&_(t.slice(0,78))===e||i.throwError("invalid extended key",i.INVALID_ARGUMENT,{argument:"extendedKey",value:"[REDACTED]"});var r=t[4],n=a.hexlify(t.slice(5,9)),s=parseInt(a.hexlify(t.slice(9,13)).substring(2),16),u=a.hexlify(t.slice(13,45)),c=t.slice(45,78);switch(a.hexlify(t.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new E(w,null,a.hexlify(c),n,u,s,r,null,null);case"0x0488ade4":case"0x04358394":if(0!==c[0])break;return new E(w,a.hexlify(c.slice(1)),null,n,u,s,r,null,null)}return i.throwError("invalid extended key",i.INVALID_ARGUMENT,{argument:"extendedKey",value:"[REDACTED]"})},r.fromMnemonic=function(e,t,r){return A(S(e=I(x(e,t),t),r),e)},r.fromSeed=function(e){return A(e,null)},r.mnemonicToSeed=S,r.mnemonicToEntropy=x,r.entropyToMnemonic=I,r.isValidMnemonic=function(e,t){try{return x(e,t),!0}catch(e){}return!1}},{"../errors":5,"../wordlists/lang-en":90,"./basex":62,"./bignumber":63,"./bytes":64,"./hmac":67,"./pbkdf2":73,"./properties":74,"./secp256k1":77,"./sha2":79,"./utf8":85}],67:[function(e,t,r){var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(r,"__esModule",{value:!0});var i,s,o=n(e("hash.js")),a=e("../utils/bytes"),u=n(e("../errors"));(s=i=r.SupportedAlgorithms||(r.SupportedAlgorithms={})).sha256="sha256",s.sha512="sha512",r.computeHmac=function(e,t,r){return i[e]||u.throwError("unsupported algorithm "+e,u.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:e}),a.arrayify(o.hmac(o[e],a.arrayify(t)).update(a.arrayify(r)).digest())}},{"../errors":5,"../utils/bytes":64,"hash.js":26}],68:[function(e,t,r){var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(r,"__esModule",{value:!0});var i=e("./abi-coder");r.AbiCoder=i.AbiCoder,r.defaultAbiCoder=i.defaultAbiCoder,r.formatSignature=i.formatSignature,r.formatParamType=i.formatParamType,r.parseSignature=i.parseSignature,r.parseParamType=i.parseParamType;var s=e("./address");r.getAddress=s.getAddress,r.getContractAddress=s.getContractAddress,r.getCreate2Address=s.getCreate2Address,r.getIcapAddress=s.getIcapAddress;var o=n(e("./base64"));r.base64=o;var a=e("./bignumber");r.BigNumber=a.BigNumber,r.bigNumberify=a.bigNumberify;var u=e("./bytes");r.arrayify=u.arrayify,r.concat=u.concat,r.hexDataSlice=u.hexDataSlice,r.hexDataLength=u.hexDataLength,r.hexlify=u.hexlify,r.hexStripZeros=u.hexStripZeros,r.hexZeroPad=u.hexZeroPad,r.isHexString=u.isHexString,r.joinSignature=u.joinSignature,r.padZeros=u.padZeros,r.splitSignature=u.splitSignature,r.stripZeros=u.stripZeros;var c=e("./hash");r.hashMessage=c.hashMessage,r.id=c.id,r.namehash=c.namehash;var l=n(e("./hdnode"));r.HDNode=l;var f=e("./interface");r.Interface=f.Interface;var h=e("./json-wallet");r.getJsonWalletAddress=h.getJsonWalletAddress;var d=e("./keccak256");r.keccak256=d.keccak256;var p=e("./sha2");r.sha256=p.sha256;var m=e("./solidity");r.solidityKeccak256=m.keccak256,r.solidityPack=m.pack,r.soliditySha256=m.sha256;var y=e("./random-bytes");r.randomBytes=y.randomBytes;var g=e("./networks");r.getNetwork=g.getNetwork;var v=e("./properties");r.checkProperties=v.checkProperties,r.deepCopy=v.deepCopy,r.defineReadOnly=v.defineReadOnly,r.resolveProperties=v.resolveProperties,r.shallowCopy=v.shallowCopy;var b=n(e("./rlp"));r.RLP=b;var _=e("./secp256k1");r.computeAddress=_.computeAddress,r.computePublicKey=_.computePublicKey,r.recoverAddress=_.recoverAddress,r.recoverPublicKey=_.recoverPublicKey,r.verifyMessage=_.verifyMessage;var w=e("./signing-key");r.SigningKey=w.SigningKey;var E=e("./transaction");r.populateTransaction=E.populateTransaction;var k=e("./transaction");r.parseTransaction=k.parse,r.serializeTransaction=k.serialize;var A=e("./utf8");r.formatBytes32String=A.formatBytes32String,r.parseBytes32String=A.parseBytes32String,r.toUtf8Bytes=A.toUtf8Bytes,r.toUtf8String=A.toUtf8String;var S=e("./units");r.commify=S.commify,r.formatEther=S.formatEther,r.parseEther=S.parseEther,r.formatUnits=S.formatUnits,r.parseUnits=S.parseUnits;var x=e("./web");r.fetchJson=x.fetchJson,r.poll=x.poll;var I=e("./hmac");r.SupportedAlgorithms=I.SupportedAlgorithms;var T=e("./utf8");r.UnicodeNormalizationForm=T.UnicodeNormalizationForm;var P=e("./wordlist");r.Wordlist=P.Wordlist},{"./abi-coder":59,"./address":60,"./base64":61,"./bignumber":63,"./bytes":64,"./hash":65,"./hdnode":66,"./hmac":67,"./interface":69,"./json-wallet":70,"./keccak256":71,"./networks":72,"./properties":74,"./random-bytes":75,"./rlp":76,"./secp256k1":77,"./sha2":79,"./signing-key":81,"./solidity":82,"./transaction":83,"./units":84,"./utf8":85,"./web":86,"./wordlist":87}],69:[function(e,t,r){var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};function o(e){for(var t in p.setType(this,"Description"),e)p.defineReadOnly(this,t,p.deepCopy(e[t],!0));Object.freeze(this)}Object.defineProperty(r,"__esModule",{value:!0});var a,u=e("./address"),c=e("./abi-coder"),l=e("./bignumber"),f=e("./bytes"),h=e("./hash"),d=e("./keccak256"),p=e("./properties"),m=s(e("../errors")),y=function(e){p.setType(this,"Indexed"),p.defineReadOnly(this,"hash",e)},g=(i(v,a=o),v.prototype.encode=function(e,t){f.isHexString(e)||m.throwError("invalid contract bytecode",m.INVALID_ARGUMENT,{arg:"bytecode",value:e}),m.checkArgumentCount(t.length,this.inputs.length," in Interface constructor");try{return e+c.defaultAbiCoder.encode(this.inputs,t).substring(2)}catch(e){m.throwError("invalid constructor argument",m.INVALID_ARGUMENT,{arg:e.arg,reason:e.reason,value:e.value})}return null},v);function v(){return null!==a&&a.apply(this,arguments)||this}var b,_=(i(w,b=o),w.prototype.encode=function(e){m.checkArgumentCount(e.length,this.inputs.length," in interface function "+this.name);try{return this.sighash+c.defaultAbiCoder.encode(this.inputs,e).substring(2)}catch(e){m.throwError("invalid input argument",m.INVALID_ARGUMENT,{arg:e.arg,reason:e.reason,value:e.value})}return null},w.prototype.decode=function(e){try{return c.defaultAbiCoder.decode(this.outputs,f.arrayify(e))}catch(t){m.throwError("invalid data for function output",m.INVALID_ARGUMENT,{arg:"data",errorArg:t.arg,errorValue:t.value,value:e,reason:t.reason})}},w);function w(){return null!==b&&b.apply(this,arguments)||this}var E,k=(i(A,E=o),A);function A(){return null!==E&&E.apply(this,arguments)||this}var S,x=(i(I,S=o),I.prototype.encodeTopics=function(e){var t=this;e.length>this.inputs.length&&m.throwError("too many arguments for "+this.name,m.UNEXPECTED_ARGUMENT,{maxCount:e.length,expectedCount:this.inputs.length});var r=[];for(this.anonymous||r.push(this.topic),e.forEach((function(e,n){var i=t.inputs[n];i.indexed?null==e?r.push(null):"string"===i.type?r.push(h.id(e)):"bytes"===i.type?r.push(d.keccak256(e)):-1!==i.type.indexOf("[")||"tuple"===i.type.substring(0,5)?m.throwError("filtering with tuples or arrays not implemented yet; bug us on GitHub",m.NOT_IMPLEMENTED,{operation:"filter(array|tuple)"}):("address"===i.type&&u.getAddress(e),r.push(f.hexZeroPad(f.hexlify(e),32).toLowerCase())):null!=e&&m.throwError("cannot filter non-indexed parameters; must be null",m.INVALID_ARGUMENT,{argument:i.name||n,value:e})}));r.length&&null===r[r.length-1];)r.pop();return r},I.prototype.decode=function(e,t){null==t||this.anonymous||(t=t.slice(1));var r,n=[],i=[],s=[];this.inputs.forEach((function(e,t){e.indexed?"string"===e.type||"bytes"===e.type||0<=e.type.indexOf("[")||"tuple"===e.type.substring(0,5)?(n.push({type:"bytes32",name:e.name||""}),s.push(!0)):(n.push(e),s.push(!1)):(i.push(e),s.push(!1))})),null!=t&&(r=c.defaultAbiCoder.decode(n,f.concat(t)));var o=c.defaultAbiCoder.decode(i,f.arrayify(e)),a={},u=0,l=0;return this.inputs.forEach((function(e,n){e.indexed?null==t?a[n]=new y(null):s[n]?a[n]=new y(r[l++]):a[n]=r[l++]:a[n]=o[u++],e.name&&(a[e.name]=a[n])})),a.length=this.inputs.length,new k(a)},I);function I(){return null!==S&&S.apply(this,arguments)||this}var T,P=(i(N,T=o),N);function N(){return null!==T&&T.apply(this,arguments)||this}var C,R=(i(O,C=o),O);function O(){return null!==C&&C.apply(this,arguments)||this}function M(e){switch(e.type){case"constructor":var t=new g({inputs:e.inputs,payable:null==e.payable||!!e.payable});this.deployFunction||(this.deployFunction=t);break;case"function":var r=c.formatSignature(e).replace(/tuple/g,""),n=h.id(r).substring(0,10),i=!1;null!=e.constant?i=e.constant:null!=e.stateMutability&&(i="view"==e.stateMutability||"pure"==e.stateMutability),t=new _({inputs:e.inputs,outputs:e.outputs,gas:e.gas,payable:null==e.payable||!!e.payable,type:i?"call":"transaction",name:e.name,signature:r,sighash:n}),e.name&&(null==this.functions[e.name]?p.defineReadOnly(this.functions,e.name,t):m.warn("WARNING: Multiple definitions for "+e.name)),null==this.functions[t.signature]&&p.defineReadOnly(this.functions,t.signature,t);break;case"event":r=c.formatSignature(e).replace(/tuple/g,""),t=new x({name:e.name,signature:r,inputs:e.inputs,topic:h.id(r),anonymous:!!e.anonymous}),e.name&&null==this.events[e.name]&&p.defineReadOnly(this.events,e.name,t),null==this.events[t.signature]&&p.defineReadOnly(this.events,t.signature,t);break;case"receive":case"fallback":break;default:m.warn("WARNING: unsupported ABI type - "+e.type)}}var D=(L.prototype.parseTransaction=function(e){var t=e.data.substring(0,10).toLowerCase();for(var r in this.functions)if(-1!==r.indexOf("(")){var n=this.functions[r];if(n.sighash===t){var i=c.defaultAbiCoder.decode(n.inputs,"0x"+e.data.substring(10));return new P({args:i,decode:n.decode,name:n.name,signature:n.signature,sighash:n.sighash,value:l.bigNumberify(e.value||"0")})}}return null},L.prototype.parseLog=function(e){for(var t in this.events)if(-1!==t.indexOf("(")){var r=this.events[t];if(!r.anonymous&&r.topic===e.topics[0])return new R({decode:r.decode,name:r.name,signature:r.signature,topic:r.topic,values:r.decode(e.data,e.topics)})}return null},L.isInterface=function(e){return p.isType(e,"Interface")},L.isIndexed=function(e){return p.isType(e,"Indexed")},L);function L(e){if(m.checkNew(this,L),"string"==typeof e){try{e=JSON.parse(e)}catch(t){m.throwError("could not parse ABI JSON",m.INVALID_ARGUMENT,{arg:"abi",errorMessage:t.message,value:e})}if(!Array.isArray(e))return m.throwError("invalid abi",m.INVALID_ARGUMENT,{arg:"abi",value:e}),null}p.defineReadOnly(this,"functions",{}),p.defineReadOnly(this,"events",{});var t=[];e.forEach((function(e){"string"==typeof e&&(e=c.parseSignature(e)),t.push(e)})),p.defineReadOnly(this,"abi",p.deepCopy(t,!0)),t.forEach(M,this),this.deployFunction||M.call(this,{type:"constructor",inputs:[]}),p.setType(this,"Interface")}r.Interface=D},{"../errors":5,"./abi-coder":59,"./address":60,"./bignumber":63,"./bytes":64,"./hash":65,"./keccak256":71,"./properties":74}],70:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./address");function i(e){try{var t=JSON.parse(e)}catch(e){return!1}return t.encseed&&t.ethaddr}function s(e){try{var t=JSON.parse(e)}catch(e){return!1}return!(!t.version||parseInt(t.version)!==t.version||3!==parseInt(t.version))}r.isCrowdsaleWallet=i,r.isSecretStorageWallet=s,r.getJsonWalletAddress=function(e){if(i(e))try{return n.getAddress(JSON.parse(e).ethaddr)}catch(e){return null}if(s(e))try{return n.getAddress(JSON.parse(e).address)}catch(e){return null}return null}},{"./address":60}],71:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("js-sha3"),i=e("./bytes");r.keccak256=function(e){return"0x"+n.keccak_256(i.arrayify(e))}},{"./bytes":64,"js-sha3":40}],72:[function(e,t,r){var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(r,"__esModule",{value:!0});var i=n(e("../errors"));function s(e){return function(t){var r=[];return t.InfuraProvider&&r.push(new t.InfuraProvider(e)),t.EtherscanProvider&&r.push(new t.EtherscanProvider(e)),0===r.length?null:t.FallbackProvider?new t.FallbackProvider(r):r[0]}}function o(e,t){return function(r){return r.JsonRpcProvider?new r.JsonRpcProvider(e,t):null}}var a={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:s("homestead")},u={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:s("ropsten")},c={unspecified:{chainId:0,name:"unspecified"},homestead:a,mainnet:a,morden:{chainId:2,name:"morden"},ropsten:u,testnet:u,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:s("rinkeby")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:s("goerli")},kovan:{chainId:42,name:"kovan",_defaultProvider:s("kovan")},classic:{chainId:61,name:"classic",_defaultProvider:o("https://web3.gastracker.io","classic")},classicTestnet:{chainId:62,name:"classicTestnet",_defaultProvider:o("https://web3.gastracker.io/morden","classicTestnet")}};r.getNetwork=function(e){if(null==e)return null;if("number"==typeof e){for(var t in c){var r=c[t];if(r.chainId===e)return{name:r.name,chainId:r.chainId,ensAddress:r.ensAddress||null,_defaultProvider:r._defaultProvider||null}}return{chainId:e,name:"unknown"}}if("string"==typeof e){var n=c[e];return null==n?null:{name:n.name,chainId:n.chainId,ensAddress:n.ensAddress,_defaultProvider:n._defaultProvider||null}}var s=c[e.name];return s?(0!==e.chainId&&e.chainId!==s.chainId&&i.throwError("network chainId mismatch",i.INVALID_ARGUMENT,{arg:"network",value:e}),{name:e.name,chainId:s.chainId,ensAddress:e.ensAddress||s.ensAddress||null,_defaultProvider:e._defaultProvider||s._defaultProvider||null}):("number"!=typeof e.chainId&&i.throwError("invalid network chainId",i.INVALID_ARGUMENT,{arg:"network",value:e}),e)}},{"../errors":5}],73:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("../utils/bytes"),i=e("./hmac");r.pbkdf2=function(e,t,r,s,o){var a;e=n.arrayify(e),t=n.arrayify(t);var u,c,l=1,f=new Uint8Array(s),h=new Uint8Array(t.length+4);h.set(t);for(var d=1;d<=l;d++){h[t.length]=d>>24&255,h[t.length+1]=d>>16&255,h[t.length+2]=d>>8&255,h[t.length+3]=255&d;var p=i.computeHmac(o,e,h);a||(a=p.length,c=new Uint8Array(a),u=s-((l=Math.ceil(s/a))-1)*a),c.set(p);for(var m=1;m<r;m++){p=i.computeHmac(o,e,p);for(var y=0;y<a;y++)c[y]^=p[y]}var g=(d-1)*a,v=d===l?u:a;f.set(n.arrayify(c).slice(0,v),g)}return n.arrayify(f)}},{"../utils/bytes":64,"./hmac":67}],74:[function(e,t,r){var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(r,"__esModule",{value:!0});var i=n(e("../errors"));function s(e,t,r){Object.defineProperty(e,t,{enumerable:!0,value:r,writable:!1})}function o(e,t){return e&&e._ethersType===t}r.defineReadOnly=s,r.setType=function(e,t){Object.defineProperty(e,"_ethersType",{configurable:!1,value:t,writable:!1})},r.isType=o,r.resolveProperties=function(e){var t={},r=[];return Object.keys(e).forEach((function(n){var i=e[n];i instanceof Promise?r.push(i.then((function(e){return t[n]=e,null}))):t[n]=i})),Promise.all(r).then((function(){return t}))},r.checkProperties=function(e,t){e&&"object"==typeof e||i.throwError("invalid object",i.INVALID_ARGUMENT,{argument:"object",value:e}),Object.keys(e).forEach((function(r){t[r]||i.throwError("invalid object key - "+r,i.INVALID_ARGUMENT,{argument:"transaction",value:e,key:r})}))},r.shallowCopy=function(e){var t={};for(var r in e)t[r]=e[r];return t};var a={boolean:!0,number:!0,string:!0};r.deepCopy=function e(t,r){if(null==t||a[typeof t])return t;if(Array.isArray(t)){var n=t.map((function(t){return e(t,r)}));return r&&Object.freeze(n),n}if("object"==typeof t){if(o(t,"BigNumber"))return t;if(o(t,"Description"))return t;if(o(t,"Indexed"))return t;for(var i in n={},t){var u=t[i];void 0!==u&&s(n,i,e(u,r))}return r&&Object.freeze(n),n}if("function"==typeof t)return t;throw new Error("Cannot deepCopy "+typeof t)},r.inheritable=function e(t){return function(r){var n,i;i=t,(n=r).super_=i,n.prototype=Object.create(i.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),s(r,"inherits",e(r))}}},{"../errors":5}],75:[function(e,t,r){(function(t){Object.defineProperty(r,"__esModule",{value:!0});var n=e("../utils/bytes"),i=e("../utils/properties"),s=t.crypto||t.msCrypto;function o(e){if(e<=0||1024<e||parseInt(String(e))!=e)throw new Error("invalid length");var t=new Uint8Array(e);return s.getRandomValues(t),n.arrayify(t)}s&&s.getRandomValues||(console.log("WARNING: Missing strong random number source; using weak randomBytes"),s={getRandomValues:function(e){for(var t=0;t<20;t++)for(var r=0;r<e.length;r++)t?e[r]^=Math.trunc(256*Math.random()):e[r]=Math.trunc(256*Math.random());return e},_weakCrypto:!0}),r.randomBytes=o,!0===s._weakCrypto&&i.defineReadOnly(o,"_weakCrypto",!0)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../utils/bytes":64,"../utils/properties":74}],76:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./bytes");function i(e){for(var t=[];e;)t.unshift(255&e),e>>=8;return t}function s(e,t,r){for(var n=0,i=0;i<r;i++)n=256*n+e[t+i];return n}function o(e,t,r,n){for(var i=[];r<t+1+n;){var s=a(e,r);if(i.push(s.result),t+1+n<(r+=s.consumed))throw new Error("invalid rlp")}return{consumed:1+n,result:i}}function a(e,t){if(0===e.length)throw new Error("invalid rlp data");if(248<=e[t]){if(t+1+(r=e[t]-247)>e.length)throw new Error("too short");if(t+1+r+(i=s(e,t+1,r))>e.length)throw new Error("to short");return o(e,t,t+1+r,r+i)}if(192<=e[t]){if(t+1+(i=e[t]-192)>e.length)throw new Error("invalid rlp data");return o(e,t,t+1,i)}if(184<=e[t]){var r;if(t+1+(r=e[t]-183)>e.length)throw new Error("invalid rlp data");if(t+1+r+(i=s(e,t+1,r))>e.length)throw new Error("invalid rlp data");return{consumed:1+r+i,result:n.hexlify(e.slice(t+1+r,t+1+r+i))}}if(128<=e[t]){var i;if(t+1+(i=e[t]-128)>e.length)throw new Error("invalid rlp data");return{consumed:1+i,result:n.hexlify(e.slice(t+1,t+1+i))}}return{consumed:1,result:n.hexlify(e[t])}}r.encode=function(e){return n.hexlify(function e(t){if(Array.isArray(t)){var r=[];return t.forEach((function(t){r=r.concat(e(t))})),r.length<=55?(r.unshift(192+r.length),r):((s=i(r.length)).unshift(247+s.length),s.concat(r))}var s,o=Array.prototype.slice.call(n.arrayify(t));return 1===o.length&&o[0]<=127?o:o.length<=55?(o.unshift(128+o.length),o):((s=i(o.length)).unshift(183+s.length),s.concat(o))}(e))},r.decode=function(e){var t=n.arrayify(e),r=a(t,0);if(r.consumed!==t.length)throw new Error("invalid rlp data");return r.result}},{"./bytes":64}],77:[function(e,t,r){var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(r,"__esModule",{value:!0});var i=e("elliptic"),s=e("./address"),o=e("./bytes"),a=e("./hash"),u=e("./keccak256"),c=e("./properties"),l=n(e("../errors")),f=null;function h(){return f=f||new i.ec("secp256k1")}var d=(p.prototype.sign=function(e){var t=h().keyFromPrivate(o.arrayify(this.privateKey)).sign(o.arrayify(e),{canonical:!0});return{recoveryParam:t.recoveryParam,r:o.hexZeroPad("0x"+t.r.toString(16),32),s:o.hexZeroPad("0x"+t.s.toString(16),32),v:27+t.recoveryParam}},p.prototype.computeSharedSecret=function(e){var t=h().keyFromPrivate(o.arrayify(this.privateKey)),r=h().keyFromPublic(o.arrayify(m(e)));return o.hexZeroPad("0x"+t.derive(r.getPublic()).toString(16),32)},p.prototype._addPoint=function(e){var t=h().keyFromPublic(o.arrayify(this.publicKey)),r=h().keyFromPublic(o.arrayify(e));return"0x"+t.pub.add(r.pub).encodeCompressed("hex")},p);function p(e){var t=h().keyFromPrivate(o.arrayify(e));c.defineReadOnly(this,"privateKey",o.hexlify(t.priv.toArray("be",32))),c.defineReadOnly(this,"publicKey","0x"+t.getPublic(!1,"hex")),c.defineReadOnly(this,"compressedPublicKey","0x"+t.getPublic(!0,"hex")),c.defineReadOnly(this,"publicKeyBytes",t.getPublic().encode(null,!0))}function m(e,t){var r=o.arrayify(e);if(32!==r.length)return 33===r.length?t?o.hexlify(r):"0x"+h().keyFromPublic(r).getPublic(!1,"hex"):65===r.length?t?"0x"+h().keyFromPublic(r).getPublic(!0,"hex"):o.hexlify(r):(l.throwError("invalid public or private key",l.INVALID_ARGUMENT,{arg:"key",value:"[REDACTED]"}),null);var n=new d(r);return t?n.compressedPublicKey:n.publicKey}function y(e){var t="0x"+m(e).slice(4);return s.getAddress("0x"+u.keccak256(t).substring(26))}function g(e,t){var r=o.splitSignature(t),n={r:o.arrayify(r.r),s:o.arrayify(r.s)};return"0x"+h().recoverPubKey(o.arrayify(e),n,r.recoveryParam).encode("hex",!1)}function v(e,t){return y(g(o.arrayify(e),t))}r.KeyPair=d,r.computePublicKey=m,r.computeAddress=y,r.recoverPublicKey=g,r.recoverAddress=v,r.verifyMessage=function(e,t){return v(a.hashMessage(e),t)}},{"../errors":5,"./address":60,"./bytes":64,"./hash":65,"./keccak256":71,"./properties":74,elliptic:12}],78:[function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(r,"__esModule",{value:!0});var s=n(e("aes-js")),o=n(e("scrypt-js")),a=n(e("uuid")),u=e("./signing-key"),c=i(e("./hdnode")),l=e("./address"),f=e("./bytes"),h=e("./pbkdf2"),d=e("./keccak256"),p=e("./utf8"),m=e("./random-bytes");function y(e){return"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),f.arrayify(e)}function g(e,t){for(e=String(e);e.length<t;)e="0"+e;return e}function v(e){return"string"==typeof e?p.toUtf8Bytes(e,p.UnicodeNormalizationForm.NFKC):f.arrayify(e)}function b(e,t){for(var r=e,n=t.toLowerCase().split("/"),i=0;i<n.length;i++){var s=null;for(var o in r)if(o.toLowerCase()===n[i]){s=r[o];break}if(null===s)return null;r=s}return r}r.decryptCrowdsale=function(e,t){var r=JSON.parse(e);t=v(t);var n=l.getAddress(b(r,"ethaddr")),i=y(b(r,"encseed"));if(!i||i.length%16!=0)throw new Error("invalid encseed");for(var o=h.pbkdf2(t,t,2e3,32,"sha256").slice(0,16),a=i.slice(0,16),c=i.slice(16),m=new s.default.ModeOfOperation.cbc(o,a),g=f.arrayify(m.decrypt(c)),_=(g=s.default.padding.pkcs7.strip(g),""),w=0;w<g.length;w++)_+=String.fromCharCode(g[w]);var E=p.toUtf8Bytes(_),k=new u.SigningKey(d.keccak256(E));if(k.address!==n)throw new Error("corrupt crowdsale wallet");return k},r.decrypt=function(e,t,r){function n(e,t){var r,n,o=y(b(i,"crypto/ciphertext"));if(f.hexlify((r=e.slice(16,32),n=o,d.keccak256(f.concat([r,n])))).substring(2)!==b(i,"crypto/mac").toLowerCase())return t(new Error("invalid password")),null;var a=function(e,t){if("aes-128-ctr"!==b(i,"crypto/cipher"))return null;var r=y(b(i,"crypto/cipherparams/iv")),n=new s.default.Counter(r),o=new s.default.ModeOfOperation.ctr(e,n);return f.arrayify(o.decrypt(t))}(e.slice(0,16),o),h=e.slice(32,64);if(!a)return t(new Error("unsupported cipher")),null;var p=new u.SigningKey(a);if(i.address&&p.address!==l.getAddress(i.address))return t(new Error("address mismatch")),null;var m=b(i,"x-ethers/locale");if("0.1"===b(i,"x-ethers/version")&&(null==m||"en"===m)){var g=y(b(i,"x-ethers/mnemonicCiphertext")),v=y(b(i,"x-ethers/mnemonicCounter")),_=new s.default.Counter(v),w=new s.default.ModeOfOperation.ctr(h,_),E=b(i,"x-ethers/path")||c.defaultPath,k=f.arrayify(w.decrypt(g)),A=c.entropyToMnemonic(k),S=c.fromMnemonic(A).derivePath(E);if(S.privateKey!=f.hexlify(a))return t(new Error("mnemonic mismatch")),null;p=new u.SigningKey(S)}return p}var i=JSON.parse(e),a=v(t);return new Promise((function(e,t){var s=b(i,"crypto/kdf");if(s&&"string"==typeof s)if("scrypt"===s.toLowerCase()){var u=y(b(i,"crypto/kdfparams/salt")),c=parseInt(b(i,"crypto/kdfparams/n")),l=parseInt(b(i,"crypto/kdfparams/r")),d=parseInt(b(i,"crypto/kdfparams/p"));if(!c||!l||!d)return void t(new Error("unsupported key-derivation function parameters"));if(0!=(c&c-1))return void t(new Error("unsupported key-derivation function parameter value for N"));if(32!==(g=parseInt(b(i,"crypto/kdfparams/dklen"))))return void t(new Error("unsupported key-derivation derived-key length"));r&&r(0),o.default(a,u,c,l,d,64,(function(i,s,o){if(i)i.progress=s,t(i);else if(o){var a=n(o=f.arrayify(o),t);if(!a)return;r&&r(1),e(a)}else if(r)return r(s)}))}else if("pbkdf2"===s.toLowerCase()){u=y(b(i,"crypto/kdfparams/salt"));var p=null,m=b(i,"crypto/kdfparams/prf");if("hmac-sha256"===m)p="sha256";else{if("hmac-sha512"!==m)return void t(new Error("unsupported prf"));p="sha512"}var g,v=parseInt(b(i,"crypto/kdfparams/c"));if(32!==(g=parseInt(b(i,"crypto/kdfparams/dklen"))))return void t(new Error("unsupported key-derivation derived-key length"));var _=n(h.pbkdf2(a,u,v,g,p),t);if(!_)return;e(_)}else t(new Error("unsupported key-derivation function"));else t(new Error("unsupported key-derivation function"))}))},r.encrypt=function(e,t,r,n){"function"!=typeof r||n||(n=r,r={}),r=r||{};var i;if(32!==(i=u.SigningKey.isSigningKey(e)?f.arrayify(e.privateKey):f.arrayify(e)).length)throw new Error("invalid private key");var l=v(t),h=null;if(r.entropy&&(h=f.arrayify(r.entropy)),r.mnemonic)if(h){if(c.entropyToMnemonic(h)!==r.mnemonic)throw new Error("entropy and mnemonic mismatch")}else h=f.arrayify(c.mnemonicToEntropy(r.mnemonic,r.wordlist));var p=r.path;h&&!p&&(p=c.defaultPath);var y=(y=r.client)||"ethers.js",b=r.salt?f.arrayify(r.salt):m.randomBytes(32),_=null;if(r.iv){if(16!==(_=f.arrayify(r.iv)).length)throw new Error("invalid iv")}else _=m.randomBytes(16);var w=null;if(r.uuid){if(16!==(w=f.arrayify(r.uuid)).length)throw new Error("invalid uuid")}else w=m.randomBytes(16);var E=1<<17,k=8,A=1;return r.scrypt&&(r.scrypt.N&&(E=r.scrypt.N),r.scrypt.r&&(k=r.scrypt.r),r.scrypt.p&&(A=r.scrypt.p)),new Promise((function(e,t){n&&n(0),o.default(l,b,E,k,A,64,(function(o,c,l){if(o)o.progress=c,t(o);else if(l){var v,S,x,I,T,P,N=(l=f.arrayify(l)).slice(0,16),C=l.slice(16,32),R=l.slice(32,64),O=new u.SigningKey(i).address,M=new s.default.Counter(_),D=new s.default.ModeOfOperation.ctr(N,M),L=f.arrayify(D.encrypt(i)),B=d.keccak256(f.concat([C,L])),U={address:O.substring(2).toLowerCase(),id:a.default.v4({random:w}),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:f.hexlify(_).substring(2)},ciphertext:f.hexlify(L).substring(2),kdf:"scrypt",kdfparams:{salt:f.hexlify(b).substring(2),n:E,dklen:32,p:A,r:k},mac:B.substring(2)}};h&&(v=m.randomBytes(16),S=new s.default.Counter(v),x=new s.default.ModeOfOperation.ctr(R,S),I=f.arrayify(x.encrypt(h)),P=(T=new Date).getUTCFullYear()+"-"+g(T.getUTCMonth()+1,2)+"-"+g(T.getUTCDate(),2)+"T"+g(T.getUTCHours(),2)+"-"+g(T.getUTCMinutes(),2)+"-"+g(T.getUTCSeconds(),2)+".0Z",U["x-ethers"]={client:y,gethFilename:"UTC--"+P+"--"+U.address,mnemonicCounter:f.hexlify(v).substring(2),mnemonicCiphertext:f.hexlify(I).substring(2),path:p,version:"0.1"},r.wordlist&&"string"==typeof r.wordlist.locale&&(U["x-ethers"].locale=r.wordlist.locale)),n&&n(1),e(JSON.stringify(U))}else if(n)return n(c)}))}))}},{"./address":60,"./bytes":64,"./hdnode":66,"./keccak256":71,"./pbkdf2":73,"./random-bytes":75,"./signing-key":81,"./utf8":85,"aes-js":8,"scrypt-js":44,uuid:48}],79:[function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var i=n(e("hash.js")),s=e("./bytes");r.ripemd160=function(e){return"0x"+i.default.ripemd160().update(s.arrayify(e)).digest("hex")},r.sha256=function(e){return"0x"+i.default.sha256().update(s.arrayify(e)).digest("hex")},r.sha512=function(e){return"0x"+i.default.sha512().update(s.arrayify(e)).digest("hex")}},{"./bytes":64,"hash.js":26}],80:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),e("setimmediate"),r.platform="browser"},{setimmediate:45}],81:[function(e,t,r){var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(r,"__esModule",{value:!0});var i=e("./hdnode"),s=e("./bytes"),o=e("./properties"),a=e("./secp256k1"),u=n(e("../errors")),c=(l.prototype.signDigest=function(e){return this.keyPair.sign(e)},l.prototype.computeSharedSecret=function(e){return this.keyPair.computeSharedSecret(s.arrayify(e))},l.isSigningKey=function(e){return o.isType(e,"SigningKey")},l);function l(e){u.checkNew(this,l);var t=i.HDNode.isHDNode(e)?(o.defineReadOnly(this,"mnemonic",e.mnemonic),o.defineReadOnly(this,"path",e.path),s.arrayify(e.privateKey)):("string"==typeof e&&e.match(/^[0-9a-f]*$/i)&&64===e.length&&(e="0x"+e),s.arrayify(e));try{32!==t.length&&u.throwError("exactly 32 bytes required",u.INVALID_ARGUMENT,{arg:"privateKey",value:"[REDACTED]"})}catch(e){var r={arg:"privateKey",reason:e.reason,value:"[REDACTED]"};e.value&&("number"==typeof e.value.length&&(r.length=e.value.length),r.type=typeof e.value),u.throwError("invalid private key",e.code,r)}o.defineReadOnly(this,"privateKey",s.hexlify(t)),o.defineReadOnly(this,"keyPair",new a.KeyPair(t)),o.defineReadOnly(this,"publicKey",this.keyPair.publicKey),o.defineReadOnly(this,"address",a.computeAddress(this.keyPair.publicKey)),o.setType(this,"SigningKey")}r.SigningKey=c},{"../errors":5,"./bytes":64,"./hdnode":66,"./properties":74,"./secp256k1":77}],82:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./bignumber"),i=e("./bytes"),s=e("./utf8"),o=e("./keccak256"),a=e("./sha2"),u=new RegExp("^bytes([0-9]+)$"),c=new RegExp("^(u?int)([0-9]*)$"),l=new RegExp("^(.*)\\[([0-9]*)\\]$");function f(e,t){if(e.length!=t.length)throw new Error("type/value count mismatch");var r=[];return e.forEach((function(e,o){r.push(function e(t,r,o){switch(t){case"address":return o?i.padZeros(r,32):i.arrayify(r);case"string":return s.toUtf8Bytes(r);case"bytes":return i.arrayify(r);case"bool":return r=r?"0x01":"0x00",o?i.padZeros(r,32):i.arrayify(r)}var a=t.match(c);if(a){if((f=parseInt(a[2]||"256"))%8!=0||0===f||256<f)throw new Error("invalid number type - "+t);return o&&(f=256),r=n.bigNumberify(r).toTwos(f),i.padZeros(r,f/8)}if(a=t.match(u)){var f=parseInt(a[1]);if(String(f)!=a[1]||0===f||32<f)throw new Error("invalid number type - "+t);if(i.arrayify(r).byteLength!==f)throw new Error("invalid value for "+t);return o?i.arrayify((r+"0000000000000000000000000000000000000000000000000000000000000000").substring(0,66)):r}if((a=t.match(l))&&Array.isArray(r)){var h=a[1];if(parseInt(a[2]||String(r.length))!=r.length)throw new Error("invalid value for "+t);var d=[];return r.forEach((function(t){d.push(e(h,t,!0))})),i.concat(d)}throw new Error("unknown type - "+t)}(e,t[o]))})),i.hexlify(i.concat(r))}r.pack=f,r.keccak256=function(e,t){return o.keccak256(f(e,t))},r.sha256=function(e,t){return a.sha256(f(e,t))}},{"./bignumber":63,"./bytes":64,"./keccak256":71,"./sha2":79,"./utf8":85}],83:[function(e,t,r){var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(r,"__esModule",{value:!0});var i=e("../constants"),s=n(e("../errors")),o=e("./secp256k1"),a=e("./address"),u=e("./bignumber"),c=e("./bytes"),l=e("./keccak256"),f=e("./properties"),h=n(e("./rlp")),d=e("../providers/abstract-provider");function p(e){return"0x"===e?i.Zero:u.bigNumberify(e)}var m=[{name:"nonce",maxLength:32},{name:"gasPrice",maxLength:32},{name:"gasLimit",maxLength:32},{name:"to",length:20},{name:"value",maxLength:32},{name:"data"}],y={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0};r.serialize=function(e,t){f.checkProperties(e,y);var r=[];m.forEach((function(t){var n=e[t.name]||[];n=c.arrayify(c.hexlify(n));t.length&&n.length!==t.length&&0<n.length&&s.throwError("invalid length for "+t.name,s.INVALID_ARGUMENT,{arg:"transaction"+t.name,value:n}),t.maxLength&&(n=c.stripZeros(n)).length>t.maxLength&&s.throwError("invalid length for "+t.name,s.INVALID_ARGUMENT,{arg:"transaction"+t.name,value:n}),r.push(c.hexlify(n))})),null!=e.chainId&&0!==e.chainId&&(r.push(c.hexlify(e.chainId)),r.push("0x"),r.push("0x"));var n=h.encode(r);if(!t)return n;var i=c.splitSignature(t),o=27+i.recoveryParam;return 9===r.length&&(r.pop(),r.pop(),r.pop(),o+=2*e.chainId+8),r.push(c.hexlify(o)),r.push(c.stripZeros(c.arrayify(i.r))),r.push(c.stripZeros(c.arrayify(i.s))),h.encode(r)},r.parse=function(e){var t=h.decode(e);9!==t.length&&6!==t.length&&s.throwError("invalid raw transaction",s.INVALID_ARGUMENT,{arg:"rawTransactin",value:e});var r,n={nonce:p(t[0]).toNumber(),gasPrice:p(t[1]),gasLimit:p(t[2]),to:"0x"===(r=t[3])?null:a.getAddress(r),value:p(t[4]),data:t[5],chainId:0};if(6===t.length)return n;try{n.v=u.bigNumberify(t[6]).toNumber()}catch(e){return s.info(e),n}if(n.r=c.hexZeroPad(t[7],32),n.s=c.hexZeroPad(t[8],32),u.bigNumberify(n.r).isZero()&&u.bigNumberify(n.s).isZero())n.chainId=n.v,n.v=0;else{n.chainId=Math.floor((n.v-35)/2),n.chainId<0&&(n.chainId=0);var i=n.v-27,f=t.slice(0,6);0!==n.chainId&&(f.push(c.hexlify(n.chainId)),f.push("0x"),f.push("0x"),i-=2*n.chainId+8);var d=l.keccak256(h.encode(f));try{n.from=o.recoverAddress(d,{r:c.hexlify(n.r),s:c.hexlify(n.s),recoveryParam:i})}catch(e){s.info(e)}n.hash=l.keccak256(e)}return n},r.populateTransaction=function(e,t,r){d.Provider.isProvider(t)||s.throwError("missing provider",s.INVALID_ARGUMENT,{argument:"provider",value:t}),f.checkProperties(e,y);var n,i=f.shallowCopy(e);return null!=i.to&&(i.to=t.resolveName(i.to)),null==i.gasPrice&&(i.gasPrice=t.getGasPrice()),null==i.nonce&&(i.nonce=t.getTransactionCount(r)),null==i.gasLimit&&((n=f.shallowCopy(i)).from=r,i.gasLimit=t.estimateGas(n)),null==i.chainId&&(i.chainId=t.getNetwork().then((function(e){return e.chainId}))),f.resolveProperties(i)}},{"../constants":3,"../errors":5,"../providers/abstract-provider":50,"./address":60,"./bignumber":63,"./bytes":64,"./keccak256":71,"./properties":74,"./rlp":76,"./secp256k1":77}],84:[function(e,t,r){var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(r,"__esModule",{value:!0});var i,s=e("../constants"),o=n(e("../errors")),a=e("./bignumber"),u={};function c(e){return{decimals:e.length-1,tenPower:a.bigNumberify(e)}}function l(e){var t=u[String(e).toLowerCase()];if(!t&&"number"==typeof e&&parseInt(String(e))==e&&0<=e&&e<=256){for(var r="1",n=0;n<e;n++)r+="0";t=c(r)}return t||o.throwError("invalid unitType",o.INVALID_ARGUMENT,{argument:"name",value:e}),t}function f(e,t){var r=l(t),n=(e=a.bigNumberify(e)).lt(s.Zero);n&&(e=e.mul(s.NegativeOne));for(var i=e.mod(r.tenPower).toString();i.length<r.decimals;)i="0"+i;return i=i.match(/^([0-9]*[1-9]|0)(0*)/)[1],e=e.div(r.tenPower).toString()+"."+i,n&&(e="-"+e),e}function h(e,t){null==t&&(t=18);var r=l(t);if("string"==typeof e&&e.match(/^-?[0-9.,]+$/)||o.throwError("invalid decimal value",o.INVALID_ARGUMENT,{arg:"value",value:e}),0===r.decimals)return a.bigNumberify(e);var n="-"===e.substring(0,1);n&&(e=e.substring(1)),"."===e&&o.throwError("missing value",o.INVALID_ARGUMENT,{arg:"value",value:e});var i=e.split(".");2<i.length&&o.throwError("too many decimal points",o.INVALID_ARGUMENT,{arg:"value",value:e});var u=i[0],c=i[1];u=u||"0";for((c=c||"0").length>r.decimals&&o.throwError("underflow occurred",o.NUMERIC_FAULT,{operation:"division",fault:"underflow"});c.length<r.decimals;)c+="0";var f=a.bigNumberify(u),h=a.bigNumberify(c),d=f.mul(r.tenPower).add(h);return n&&(d=d.mul(s.NegativeOne)),d}i="1",["wei","kwei","Mwei","Gwei","szabo","finney","ether"].forEach((function(e){var t=c(i);u[e.toLowerCase()]=t,u[String(t.decimals)]=t,i+="000"})),r.commify=function(e){var t=String(e).split(".");(2<t.length||!t[0].match(/^-?[0-9]*$/)||t[1]&&!t[1].match(/^[0-9]*$/)||"."===e||"-."===e)&&o.throwError("invalid value",o.INVALID_ARGUMENT,{argument:"value",value:e});var r=t[0],n="";for("-"===r.substring(0,1)&&(n="-",r=r.substring(1));"0"===r.substring(0,1);)r=r.substring(1);""===r&&(r="0");var i="";2===t.length&&(i="."+(t[1]||"0"));for(var s=[];r.length;){if(r.length<=3){s.unshift(r);break}var a=r.length-3;s.unshift(r.substring(a)),r=r.substring(0,a)}return n+s.join(",")+i},r.formatUnits=f,r.parseUnits=h,r.formatEther=function(e){return f(e,18)},r.parseEther=function(e){return h(e,18)}},{"../constants":3,"../errors":5,"./bignumber":63}],85:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i,s=e("../constants"),o=e("../errors"),a=e("./bytes");function u(e,t){void 0===t&&(t=n.current),t!=n.current&&(o.checkNormalize(),e=e.normalize(t));for(var r=[],i=0;i<e.length;i++){var s=e.charCodeAt(i);if(s<128)r.push(s);else if(s<2048)r.push(s>>6|192),r.push(63&s|128);else if(55296==(64512&s)){i++;var u=e.charCodeAt(i);if(i>=e.length||56320!=(64512&u))throw new Error("invalid utf-8 string");s=65536+((1023&s)<<10)+(1023&u),r.push(s>>18|240),r.push(s>>12&63|128),r.push(s>>6&63|128),r.push(63&s|128)}else r.push(s>>12|224),r.push(s>>6&63|128),r.push(63&s|128)}return a.arrayify(r)}function c(e,t){e=a.arrayify(e);for(var r="",n=0;n<e.length;){var i=e[n++];if(i>>7!=0){var s=null,o=null;if(192==(224&i))s=1,o=127;else if(224==(240&i))s=2,o=2047;else{if(240!=(248&i)){if(t)continue;if(128==(192&i))throw new Error("invalid utf8 byte sequence; unexpected continuation byte");throw new Error("invalid utf8 byte sequence; invalid prefix")}s=3,o=65535}if(n+s>e.length){if(!t)throw new Error("invalid utf8 byte sequence; too short");for(;n<e.length&&e[n]>>6==2;n++);}else{for(var u=i&(1<<8-s-1)-1,c=0;c<s;c++){var l=e[n];if(128!=(192&l)){u=null;break}u=u<<6|63&l,n++}if(null!==u)if(u<=o){if(!t)throw new Error("invalid utf8 byte sequence; overlong")}else if(1114111<u){if(!t)throw new Error("invalid utf8 byte sequence; out-of-range")}else if(55296<=u&&u<=57343){if(!t)throw new Error("invalid utf8 byte sequence; utf-16 surrogate")}else u<=65535?r+=String.fromCharCode(u):(u-=65536,r+=String.fromCharCode(55296+(u>>10&1023),56320+(1023&u)));else if(!t)throw new Error("invalid utf8 byte sequence; invalid continuation byte")}}else r+=String.fromCharCode(i)}return r}(i=n=r.UnicodeNormalizationForm||(r.UnicodeNormalizationForm={})).current="",i.NFC="NFC",i.NFD="NFD",i.NFKC="NFKC",i.NFKD="NFKD",r.toUtf8Bytes=u,r.toUtf8String=c,r.formatBytes32String=function(e){var t=u(e);if(31<t.length)throw new Error("bytes32 string must be less than 32 bytes");return a.hexlify(a.concat([t,s.HashZero]).slice(0,32))},r.parseBytes32String=function(e){var t=a.arrayify(e);if(32!==t.length)throw new Error("invalid bytes32 - not 32 bytes long");if(0!==t[31])throw new Error("invalid bytes32 string - no null terminator");for(var r=31;0===t[r-1];)r--;return c(t.slice(0,r))}},{"../constants":3,"../errors":5,"./bytes":64}],86:[function(e,t,r){var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(r,"__esModule",{value:!0});var i=e("xmlhttprequest"),s=e("./base64"),o=e("./properties"),a=e("./utf8"),u=n(e("../errors"));r.fetchJson=function(e,t,r){var n,o={},c=null,l=12e4;if("string"==typeof e)c=e;else if("object"==typeof e){if(null==e.url&&u.throwError("missing URL",u.MISSING_ARGUMENT,{arg:"url"}),c=e.url,"number"==typeof e.timeout&&0<e.timeout&&(l=e.timeout),e.headers)for(var f in e.headers)o[f.toLowerCase()]={key:f,value:String(e.headers[f])};null!=e.user&&null!=e.password&&("https:"!==c.substring(0,6)&&!0!==e.allowInsecure&&u.throwError("basic authentication requires a secure https url",u.INVALID_ARGUMENT,{arg:"url",url:c,user:e.user,password:"[REDACTED]"}),n=e.user+":"+e.password,o.authorization={key:"Authorization",value:"Basic "+s.encode(a.toUtf8Bytes(n))})}return new Promise((function(e,n){function s(){null!=u&&(clearTimeout(u),u=null)}var a=new i.XMLHttpRequest,u=null;u=setTimeout((function(){null!=u&&(u=null,n(new Error("timeout")),setTimeout((function(){a.abort()}),0))}),l);t?(a.open("POST",c,!0),o["content-type"]={key:"Content-Type",value:"application/json"}):a.open("GET",c,!0),Object.keys(o).forEach((function(e){var t=o[e];a.setRequestHeader(t.key,t.value)})),a.onreadystatechange=function(){if(4===a.readyState){if(200!=a.status){s();var i=new Error("invalid response - "+a.status);return i.statusCode=a.status,a.responseText&&(i.responseText=a.responseText),void n(i)}var o=null;try{o=JSON.parse(a.responseText)}catch(i){s();var u=new Error("invalid json response");return u.orginialError=i,u.responseText=a.responseText,null!=t&&(u.requestBody=t),u.url=c,void n(u)}if(r)try{o=r(o)}catch(i){return s(),i.url=c,i.body=t,i.responseText=a.responseText,void n(i)}s(),e(o)}},a.onerror=function(e){s(),n(e)};try{null!=t?a.send(t):a.send()}catch(u){s();var f=new Error("connection error");f.error=u,n(f)}}))},r.poll=function(e,t){return t=t||{},null==(t=o.shallowCopy(t)).floor&&(t.floor=0),null==t.ceiling&&(t.ceiling=1e4),null==t.interval&&(t.interval=250),new Promise((function(r,n){var i=null,s=!1,o=function(){return!s&&(s=!0,i&&clearTimeout(i),!0)};t.timeout&&(i=setTimeout((function(){o()&&n(new Error("timeout"))}),t.timeout));var a=t.fastRetry||null,u=0;!function i(){return e().then((function(e){var n;return void 0!==e?o()&&r(e):t.onceBlock?t.onceBlock.once("block",i):s||(u++,(n=t.interval*parseInt(String(Math.random()*Math.pow(2,u))))<t.floor&&(n=t.floor),n>t.ceiling&&(n=t.ceiling),a&&(u--,n=a,a=null),setTimeout(i,n)),null}),(function(e){o()&&n(e)}))}()}))}},{"../errors":5,"./base64":61,"./properties":74,"./utf8":85,xmlhttprequest:49}],87:[function(e,t,r){(function(t){Object.defineProperty(r,"__esModule",{value:!0});var n=e("../utils/hash"),i=e("../utils/properties");r.check=function(e){for(var t=[],r=0;r<2048;r++){var i=e.getWord(r);if(r!==e.getWordIndex(i))return"0x";t.push(i)}return n.id(t.join("\n")+"\n")};var s=(o.prototype.split=function(e){return e.toLowerCase().split(/ +/g)},o.prototype.join=function(e){return e.join(" ")},o);function o(e){i.defineReadOnly(this,"locale",e)}r.Wordlist=s,r.register=function(e,t){t=t||e.locale}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../utils/hash":65,"../utils/properties":74}],88:[function(e,t,r){var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(r,"__esModule",{value:!0});var o,a=e("./utils/bytes"),u=e("./utils/hash"),c=e("./utils/hdnode"),l=e("./utils/json-wallet"),f=e("./utils/keccak256"),h=e("./utils/properties"),d=e("./utils/random-bytes"),p=s(e("./utils/secret-storage")),m=e("./utils/signing-key"),y=e("./utils/transaction"),g=e("./abstract-signer"),v=e("./providers/abstract-provider"),b=s(e("./errors")),_=(i(w,o=g.Signer),Object.defineProperty(w.prototype,"address",{get:function(){return this.signingKey.address},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"mnemonic",{get:function(){return this.signingKey.mnemonic},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"path",{get:function(){return this.signingKey.path},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"privateKey",{get:function(){return this.signingKey.privateKey},enumerable:!0,configurable:!0}),w.prototype.connect=function(e){return v.Provider.isProvider(e)||b.throwError("invalid provider",b.INVALID_ARGUMENT,{argument:"provider",value:e}),new w(this.signingKey,e)},w.prototype.getAddress=function(){return Promise.resolve(this.address)},w.prototype.sign=function(e){var t=this;return h.resolveProperties(e).then((function(e){var r=y.serialize(e),n=t.signingKey.signDigest(f.keccak256(r));return y.serialize(e,n)}))},w.prototype.signMessage=function(e){return Promise.resolve(a.joinSignature(this.signingKey.signDigest(u.hashMessage(e))))},w.prototype.getBalance=function(e){if(!this.provider)throw new Error("missing provider");return this.provider.getBalance(this.address,e)},w.prototype.getTransactionCount=function(e){if(!this.provider)throw new Error("missing provider");return this.provider.getTransactionCount(this.address,e)},w.prototype.sendTransaction=function(e){var t=this;if(!this.provider)throw new Error("missing provider");return null==e.nonce&&((e=h.shallowCopy(e)).nonce=this.getTransactionCount("pending")),y.populateTransaction(e,this.provider,this.address).then((function(e){return t.sign(e).then((function(e){return t.provider.sendTransaction(e)}))}))},w.prototype.encrypt=function(e,t,r){if("function"!=typeof t||r||(r=t,t={}),r&&"function"!=typeof r)throw new Error("invalid callback");return t=t||{},this.mnemonic&&((t=h.shallowCopy(t)).mnemonic=this.mnemonic,t.path=this.path),p.encrypt(this.privateKey,e,t,r)},w.createRandom=function(e){var t=d.randomBytes(16);(e=e||{}).extraEntropy&&(t=a.arrayify(f.keccak256(a.concat([t,e.extraEntropy])).substring(0,34)));var r=c.entropyToMnemonic(t,e.locale);return w.fromMnemonic(r,e.path,e.locale)},w.fromEncryptedJson=function(e,t,r){if(l.isCrowdsaleWallet(e))try{r&&r(0);var n=p.decryptCrowdsale(e,t);return r&&r(1),Promise.resolve(new w(n))}catch(e){return Promise.reject(e)}else if(l.isSecretStorageWallet(e))return p.decrypt(e,t,r).then((function(e){return new w(e)}));return Promise.reject("invalid wallet JSON")},w.fromMnemonic=function(e,t,r){return t=t||c.defaultPath,new w(c.fromMnemonic(e,r).derivePath(t))},w);function w(e,t){var r=o.call(this)||this;return b.checkNew(r,w),m.SigningKey.isSigningKey(e)?h.defineReadOnly(r,"signingKey",e):h.defineReadOnly(r,"signingKey",new m.SigningKey(e)),h.defineReadOnly(r,"provider",t),r}r.Wallet=_},{"./abstract-signer":2,"./errors":5,"./providers/abstract-provider":50,"./utils/bytes":64,"./utils/hash":65,"./utils/hdnode":66,"./utils/json-wallet":70,"./utils/keccak256":71,"./utils/properties":74,"./utils/random-bytes":75,"./utils/secret-storage":78,"./utils/signing-key":81,"./utils/transaction":83}],89:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("../wordlists/lang-en").langEn;r.en=n},{"../wordlists/lang-en":90}],90:[function(e,t,r){var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var s,o=e("../utils/wordlist"),a=null;function u(e){if(null==a&&(a="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo".replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),"0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"!==o.check(e)))throw a=null,new Error("BIP39 Wordlist for en (English) FAILED")}function c(){return s.call(this,"en")||this}var l=new(i(c,s=o.Wordlist),c.prototype.getWord=function(e){return u(this),a[e]},c.prototype.getWordIndex=function(e){return u(this),a.indexOf(e)},c);r.langEn=l,o.register(l)},{"../utils/wordlist":87}]},{},[7])(7)}))}}},{package:"ethers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/3box/node_modules/ethers/dist/ethers.min.js"}],[4763,{_process:5480},function(){with(this)return function(){"use strict";return function(e,t,r){(function(e){(function(){
/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.9.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */
!function(){var r="input is invalid type",n="object"==typeof window,i=n?window:{};i.JS_SHA256_NO_WINDOW&&(n=!1);var s=!n&&"object"==typeof self,o=!i.JS_SHA256_NO_NODE_JS&&"object"==typeof e&&e.versions&&e.versions.node;o?i=global:s&&(i=self);var a=!i.JS_SHA256_NO_COMMON_JS&&"object"==typeof t&&t.exports,u="function"==typeof define&&define.amd,c=!i.JS_SHA256_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,l="0123456789abcdef".split(""),f=[-2147483648,8388608,32768,128],h=[24,16,8,0],d=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],p=["hex","array","digest","arrayBuffer"],m=[];!i.JS_SHA256_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!c||!i.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});var y=function(e,t){return function(r){return new w(t,!0).update(r)[e]()}},g=function(e){var t=y("hex",e);o&&(t=v(t,e)),t.create=function(){return new w(e)},t.update=function(e){return t.create().update(e)};for(var r=0;r<p.length;++r){var n=p[r];t[n]=y(n,e)}return t},v=function(e,t){var n=(0,eval)("require('crypto')"),i=(0,eval)("require('buffer').Buffer"),s=t?"sha224":"sha256";return function(t){if("string"==typeof t)return n.createHash(s).update(t,"utf8").digest("hex");if(null===t||t===undefined)throw new Error(r);return t.constructor===ArrayBuffer&&(t=new Uint8Array(t)),Array.isArray(t)||ArrayBuffer.isView(t)||t.constructor===i?n.createHash(s).update(new i(t)).digest("hex"):e(t)}},b=function(e,t){return function(r,n){return new E(r,t,!0).update(n)[e]()}},_=function(e){var t=b("hex",e);t.create=function(t){return new E(t,e)},t.update=function(e,r){return t.create(e).update(r)};for(var r=0;r<p.length;++r){var n=p[r];t[n]=b(n,e)}return t};function w(e,t){t?(m[0]=m[16]=m[1]=m[2]=m[3]=m[4]=m[5]=m[6]=m[7]=m[8]=m[9]=m[10]=m[11]=m[12]=m[13]=m[14]=m[15]=0,this.blocks=m):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=e}function E(e,t,n){var i,s=typeof e;if("string"===s){var o,a=[],u=e.length,l=0;for(i=0;i<u;++i)(o=e.charCodeAt(i))<128?a[l++]=o:o<2048?(a[l++]=192|o>>6,a[l++]=128|63&o):o<55296||o>=57344?(a[l++]=224|o>>12,a[l++]=128|o>>6&63,a[l++]=128|63&o):(o=65536+((1023&o)<<10|1023&e.charCodeAt(++i)),a[l++]=240|o>>18,a[l++]=128|o>>12&63,a[l++]=128|o>>6&63,a[l++]=128|63&o);e=a}else{if("object"!==s)throw new Error(r);if(null===e)throw new Error(r);if(c&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||c&&ArrayBuffer.isView(e)))throw new Error(r)}e.length>64&&(e=new w(t,!0).update(e).array());var f=[],h=[];for(i=0;i<64;++i){var d=e[i]||0;f[i]=92^d,h[i]=54^d}w.call(this,t,n),this.update(h),this.oKeyPad=f,this.inner=!0,this.sharedMemory=n}w.prototype.update=function(e){if(!this.finalized){var t,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(r);if(null===e)throw new Error(r);if(c&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||c&&ArrayBuffer.isView(e)))throw new Error(r);t=!0}for(var i,s,o=0,a=e.length,u=this.blocks;o<a;){if(this.hashed&&(this.hashed=!1,u[0]=this.block,u[16]=u[1]=u[2]=u[3]=u[4]=u[5]=u[6]=u[7]=u[8]=u[9]=u[10]=u[11]=u[12]=u[13]=u[14]=u[15]=0),t)for(s=this.start;o<a&&s<64;++o)u[s>>2]|=e[o]<<h[3&s++];else for(s=this.start;o<a&&s<64;++o)(i=e.charCodeAt(o))<128?u[s>>2]|=i<<h[3&s++]:i<2048?(u[s>>2]|=(192|i>>6)<<h[3&s++],u[s>>2]|=(128|63&i)<<h[3&s++]):i<55296||i>=57344?(u[s>>2]|=(224|i>>12)<<h[3&s++],u[s>>2]|=(128|i>>6&63)<<h[3&s++],u[s>>2]|=(128|63&i)<<h[3&s++]):(i=65536+((1023&i)<<10|1023&e.charCodeAt(++o)),u[s>>2]|=(240|i>>18)<<h[3&s++],u[s>>2]|=(128|i>>12&63)<<h[3&s++],u[s>>2]|=(128|i>>6&63)<<h[3&s++],u[s>>2]|=(128|63&i)<<h[3&s++]);this.lastByteIndex=s,this.bytes+=s-this.start,s>=64?(this.block=u[16],this.start=s-64,this.hash(),this.hashed=!0):this.start=s}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},w.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>2]|=f[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},w.prototype.hash=function(){var e,t,r,n,i,s,o,a,u,c=this.h0,l=this.h1,f=this.h2,h=this.h3,p=this.h4,m=this.h5,y=this.h6,g=this.h7,v=this.blocks;for(e=16;e<64;++e)t=((i=v[e-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,r=((i=v[e-2])>>>17|i<<15)^(i>>>19|i<<13)^i>>>10,v[e]=v[e-16]+t+v[e-7]+r<<0;for(u=l&f,e=0;e<64;e+=4)this.first?(this.is224?(s=300032,g=(i=v[0]-1413257819)-150054599<<0,h=i+24177077<<0):(s=704751109,g=(i=v[0]-210244248)-1521486534<<0,h=i+143694565<<0),this.first=!1):(t=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),n=(s=c&l)^c&f^u,g=h+(i=g+(r=(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))+(p&m^~p&y)+d[e]+v[e])<<0,h=i+(t+n)<<0),t=(h>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10),n=(o=h&c)^h&l^s,y=f+(i=y+(r=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7))+(g&p^~g&m)+d[e+1]+v[e+1])<<0,t=((f=i+(t+n)<<0)>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),n=(a=f&h)^f&c^o,m=l+(i=m+(r=(y>>>6|y<<26)^(y>>>11|y<<21)^(y>>>25|y<<7))+(y&g^~y&p)+d[e+2]+v[e+2])<<0,t=((l=i+(t+n)<<0)>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),n=(u=l&f)^l&h^a,p=c+(i=p+(r=(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7))+(m&y^~m&g)+d[e+3]+v[e+3])<<0,c=i+(t+n)<<0;this.h0=this.h0+c<<0,this.h1=this.h1+l<<0,this.h2=this.h2+f<<0,this.h3=this.h3+h<<0,this.h4=this.h4+p<<0,this.h5=this.h5+m<<0,this.h6=this.h6+y<<0,this.h7=this.h7+g<<0},w.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,n=this.h3,i=this.h4,s=this.h5,o=this.h6,a=this.h7,u=l[e>>28&15]+l[e>>24&15]+l[e>>20&15]+l[e>>16&15]+l[e>>12&15]+l[e>>8&15]+l[e>>4&15]+l[15&e]+l[t>>28&15]+l[t>>24&15]+l[t>>20&15]+l[t>>16&15]+l[t>>12&15]+l[t>>8&15]+l[t>>4&15]+l[15&t]+l[r>>28&15]+l[r>>24&15]+l[r>>20&15]+l[r>>16&15]+l[r>>12&15]+l[r>>8&15]+l[r>>4&15]+l[15&r]+l[n>>28&15]+l[n>>24&15]+l[n>>20&15]+l[n>>16&15]+l[n>>12&15]+l[n>>8&15]+l[n>>4&15]+l[15&n]+l[i>>28&15]+l[i>>24&15]+l[i>>20&15]+l[i>>16&15]+l[i>>12&15]+l[i>>8&15]+l[i>>4&15]+l[15&i]+l[s>>28&15]+l[s>>24&15]+l[s>>20&15]+l[s>>16&15]+l[s>>12&15]+l[s>>8&15]+l[s>>4&15]+l[15&s]+l[o>>28&15]+l[o>>24&15]+l[o>>20&15]+l[o>>16&15]+l[o>>12&15]+l[o>>8&15]+l[o>>4&15]+l[15&o];return this.is224||(u+=l[a>>28&15]+l[a>>24&15]+l[a>>20&15]+l[a>>16&15]+l[a>>12&15]+l[a>>8&15]+l[a>>4&15]+l[15&a]),u},w.prototype.toString=w.prototype.hex,w.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,n=this.h3,i=this.h4,s=this.h5,o=this.h6,a=this.h7,u=[e>>24&255,e>>16&255,e>>8&255,255&e,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24&255,r>>16&255,r>>8&255,255&r,n>>24&255,n>>16&255,n>>8&255,255&n,i>>24&255,i>>16&255,i>>8&255,255&i,s>>24&255,s>>16&255,s>>8&255,255&s,o>>24&255,o>>16&255,o>>8&255,255&o];return this.is224||u.push(a>>24&255,a>>16&255,a>>8&255,255&a),u},w.prototype.array=w.prototype.digest,w.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(this.is224?28:32),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),t.setUint32(20,this.h5),t.setUint32(24,this.h6),this.is224||t.setUint32(28,this.h7),e},E.prototype=new w,E.prototype.finalize=function(){if(w.prototype.finalize.call(this),this.inner){this.inner=!1;var e=this.array();w.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(e),w.prototype.finalize.call(this)}};var k=g();k.sha256=k,k.sha224=g(!0),k.sha256.hmac=_(),k.sha224.hmac=_(!0),a?t.exports=k:(i.sha256=k.sha256,i.sha224=k.sha224,u&&define((function(){return k})))}()}).call(this)}).call(this,e("_process"))}}},{package:"js-sha256",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/js-sha256/src/sha256.js"}],[5282,{"./constants":5281,bs58:2113,buffer:2105,varint:6096},function(){with(this)return function(){"use strict";return function(e,t,r){(function(t){(function(){const n=e("bs58"),i=e("./constants");r.names=i.names,r.codes=i.codes,r.defaultLengths=i.defaultLengths;const s=e("varint");function o(e){r.decode(e)}r.toHexString=function(e){if(!t.isBuffer(e))throw new Error("must be passed a buffer");return e.toString("hex")},r.fromHexString=function(e){return t.from(e,"hex")},r.toB58String=function(e){if(!t.isBuffer(e))throw new Error("must be passed a buffer");return n.encode(e)},r.fromB58String=function(e){let r=e;return t.isBuffer(e)&&(r=e.toString()),t.from(n.decode(r))},r.decode=function(e){if(!t.isBuffer(e))throw new Error("multihash must be a Buffer");if(e.length<3)throw new Error("multihash too short. must be > 3 bytes.");const n=s.decode(e);if(!r.isValidCode(n))throw new Error(`multihash unknown function code: 0x${n.toString(16)}`);e=e.slice(s.decode.bytes);const o=s.decode(e);if(o<1)throw new Error(`multihash invalid length: 0x${o.toString(16)}`);if((e=e.slice(s.decode.bytes)).length!==o)throw new Error(`multihash length inconsistent: 0x${e.toString("hex")}`);return{code:n,name:i.codes[n],length:o,digest:e}},r.encode=function(e,n,i){if(!e||n===undefined)throw new Error("multihash encode requires at least two args: digest, code");const o=r.coerceCode(n);if(!t.isBuffer(e))throw new Error("digest should be a Buffer");if(null==i&&(i=e.length),i&&e.length!==i)throw new Error("digest length should be equal to specified length.");return t.concat([t.from(s.encode(o)),t.from(s.encode(i)),e])},r.coerceCode=function(e){let t=e;if("string"==typeof e){if(i.names[e]===undefined)throw new Error(`Unrecognized hash function named: ${e}`);t=i.names[e]}if("number"!=typeof t)throw new Error(`Hash function code should be a number. Got: ${t}`);if(i.codes[t]===undefined&&!r.isAppCode(t))throw new Error(`Unrecognized function code: ${t}`);return t},r.isAppCode=function(e){return e>0&&e<16},r.isValidCode=function(e){return!!r.isAppCode(e)||!!i.codes[e]},r.validate=o,r.prefix=function(e){return o(e),e.slice(0,2)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"multihashes",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/multihashes/src/index.js"}],[4496,{"./default-access-controller":4487,"./entry":4490,"./entry-index":4488,"./g-set":4491,"./lamport-clock":4492,"./log-errors":4493,"./log-io":4494,"./log-sorting":4495,"./utils":4499,buffer:2105,"p-each-series":5413},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("p-each-series"),i=e("./g-set"),s=e("./entry"),o=e("./log-io"),a=e("./log-errors"),u=e("./lamport-clock"),c=e("./log-sorting"),{LastWriteWins:l,NoZeroes:f}=c,h=e("./default-access-controller"),{isDefined:d,findUniques:p}=e("./utils"),m=e("./entry-index"),y=e=>e.hash,g=(e,t)=>e.concat(t),v=e=>e.next,b=(e,t)=>Math.max(e,t.clock.time),_=(e,t)=>(e[t.hash]=t,e);class w extends i{constructor(e,t,{logId:r,access:n,entries:i,heads:s,clock:o,sortFn:c}={}){if(!d(e))throw a.IPFSNotDefinedError();if(!d(t))throw new Error("Identity is required");if(d(n)||(n=new h),d(i)&&!Array.isArray(i))throw new Error("'entries' argument must be an array of Entry instances");if(d(s)&&!Array.isArray(s))throw new Error("'heads' argument must be an array");d(c)||(c=l),super(),this._sortFn=f(c),this._storage=e,this._id=r||(new Date).getTime().toString(),this._access=n,this._identity=t,i=i||[],this._entryIndex=new m(i.reduce(_,{})),s=s||w.findHeads(i),this._headsIndex=s.reduce(_,{}),this._nextsIndex={};i.forEach((e=>e.next.forEach((t=>this._nextsIndex[t]=e.hash)))),this._length=i.length;const p=Math.max(o?o.time:0,this.heads.reduce(b,0));this._clock=new u(this._identity.publicKey,p)}get id(){return this._id}get clock(){return this._clock}get length(){return this._length}get values(){return Object.values(this.traverse(this.heads)).reverse()}get heads(){return Object.values(this._headsIndex).sort(this._sortFn).reverse()}get tails(){return w.findTails(this.values)}get tailHashes(){return w.findTailHashes(this.values)}setIdentity(e){this._identity=e;const t=Math.max(this.clock.time,this.heads.reduce(b,0));this._clock=new u(this._identity.publicKey,t)}get(e){return this._entryIndex.get(e)}has(e){return this._entryIndex.get(e.hash||e)!==undefined}traverse(e,t=-1,r){var n=e.sort(this._sortFn).reverse();let i={},s={},o=0;const a=e=>this.get(e),u=e=>{e&&!i[e.hash]&&(n=[e,...n].sort(this._sortFn).reverse(),i[e.hash]=!0)};for(;n.length>0&&(-1===t||o<t);){const e=n.shift();if(o++,s[e.hash]=e,e.next.map(a).filter(d).forEach(u),e.hash===r)break}return s}async append(e,t=1){const r=Math.max(this.clock.time,this.heads.reduce(b,0))+1;this._clock=new u(this.clock.id,r);const n=this.traverse(this.heads,Math.max(t,this.heads.length)),i=this.heads.reverse().reduce(_,{}),o=Object.keys(Object.assign({},i,n)),a=await s.create(this._storage,this._identity,this.id,e,o,this.clock);if(!await this._access.canAppend(a,this._identity.provider))throw new Error(`Could not append entry, key "${this._identity.id}" is not allowed to write to the log`);return this._entryIndex.set(a.hash,a),o.forEach((e=>this._nextsIndex[e]=a.hash)),this._headsIndex={},this._headsIndex[a.hash]=a,this._length++,a}iterator({gt:e=undefined,gte:t=undefined,lt:r=undefined,lte:n=undefined,amount:i=-1}={}){if(0===i)return function*(){}();if("string"==typeof n&&(n=[this.get(n)]),"string"==typeof r&&(r=[this.get(this.get(r).next)]),n&&!Array.isArray(n))throw a.LtOrLteMustBeStringOrArray();if(r&&!Array.isArray(r))throw a.LtOrLteMustBeStringOrArray();let s=n||r||this.heads,o=t?this.get(t).hash:e?this.get(e).hash:null,u=o?-1:i||-1,c=this.traverse(s,u,o),l=Object.values(c);return e&&l.pop(),(e||t)&&i>-1&&(l=l.slice(l.length-i,l.length)),function*(){for(let e in l)yield l[e]}()}async join(e,t=-1){if(!d(e))throw a.LogNotDefinedError();if(!w.isLog(e))throw a.NotALogError();if(this.id!==e.id)return;const r=w.difference(e,this),i=this._identity.provider,o=async e=>{if(!await this._access.canAppend(e,i))throw new Error(`Could not append entry, key "${e.identity.id}" is not allowed to write to the log`)},c=Object.values(r);await n(c,(async e=>{await o(e),await(async e=>{const t=await s.verify(i,e),r=e.identity?e.identity.publicKey:e.key;if(!t)throw new Error(`Could not validate signature "${e.sig}" for entry "${e.hash}" and key "${r}"`)})(e)}));Object.values(r).forEach((e=>{this.get(e.hash)||this._length++,e.next.forEach((t=>this._nextsIndex[t]=e.hash))})),this._entryIndex.add(r);const l=Object.values(r).map(v).reduce(g,[]),f=w.findHeads(Object.values(Object.assign({},this._headsIndex,e._headsIndex))).filter((e=>!l.find((t=>t===e.hash)))).filter((e=>!this._nextsIndex[e.hash])).reduce(_,{});if(this._headsIndex=f,t>-1){let e=this.values;e=e.slice(-t),this._entryIndex=null,this._entryIndex=new m(e.reduce(_,{})),this._headsIndex=w.findHeads(e).reduce(_,{}),this._length=this._entryIndex.length}const h=Object.values(this._headsIndex).reduce(b,0);return this._clock=new u(this.clock.id,Math.max(this.clock.time,h)),this}toJSON(){return{id:this.id,heads:this.heads.sort(this._sortFn).reverse().map(y)}}toSnapshot(){return{id:this.id,heads:this.heads,values:this.values}}toBuffer(){return r.from(JSON.stringify(this.toJSON()))}toString(e){return this.values.slice().reverse().map(((t,r)=>{const n=s.findChildren(t,this.values).length;let i=new Array(Math.max(n-1,0));return i=n>1?i.fill("  "):i,i=n>0?i.concat([""]):i,i.join("")+(e?e(t.payload):t.payload)})).join("\n")}static isLog(e){return e.id!==undefined&&e.heads!==undefined&&e._entryIndex!==undefined}toMultihash({format:e}={}){return o.toMultihash(this._storage,this,{format:e})}static async fromMultihash(e,t,r,{access:n,length:i=-1,exclude:s,onProgressCallback:a,sortFn:c,timeout:l,format:f}={}){const h=await o.fromMultihash(e,r,{length:i,exclude:s,onProgressCallback:a,timeout:l,format:f});return new w(e,t,{logId:h.id,access:n,entries:h.values,heads:h.heads,clock:new u(h.clock.id,h.clock.time),sortFn:c})}static async fromEntryHash(e,t,r,{logId:n,access:i,length:s=-1,exclude:a,onProgressCallback:u,sortFn:c,timeout:l}){const f=await o.fromEntryHash(e,r,{length:s,exclude:a,onProgressCallback:u,timeout:l});return new w(e,t,{logId:n,access:i,entries:f.values,sortFn:c})}static async fromJSON(e,t,r,{access:n,length:i=-1,timeout:s,onProgressCallback:a,sortFn:u}={}){const c=await o.fromJSON(e,r,{length:i,timeout:s,onProgressCallback:a});return new w(e,t,{logId:c.id,access:n,entries:c.values,sortFn:u})}static async fromEntry(e,t,r,{access:n,length:i=-1,exclude:s,onProgressCallback:a,timeout:u,sortFn:c}={}){const l=await o.fromEntry(e,r,{length:i,exclude:s,onProgressCallback:a,timeout:u});return new w(e,t,{logId:l.id,access:n,entries:l.values,sortFn:c})}static findHeads(e){var t=e.reduce(((e,t,r,n)=>(t.next.forEach((r=>e[r]=t.hash)),e)),{});return e.filter((e=>t[e.hash]===undefined)).sort(((e,t)=>e.clock.id>t.clock.id))}static findTails(e){var t={},r=[],n={},i=[];e.forEach((e=>{0===e.next.length&&r.push(e);e.next.forEach((r=>{t[r]||(t[r]=[]),t[r].push(e)})),i=i.concat(e.next),n[e.hash]=!0}));const o=i.filter((e=>n[e]===undefined)).map((e=>t[e])).reduce(((e,t,r,n)=>e.concat(p(t,"hash"))),[]).concat(r);return p(o,"hash").sort(s.compare)}static findTailHashes(e){var t={};return e.forEach((e=>t[e.hash]=!0)),e.reduce(((e,r,n,i)=>(r.next.reverse().forEach((r=>{t[r]===undefined&&e.splice(0,0,r)})),e)),[])}static difference(e,t){let r=Object.keys(e._headsIndex),n={},i={};const s=e=>{n[e]||t.get(e)||(r.push(e),n[e]=!0)};for(;r.length>0;){const o=r.shift(),a=e.get(o);a&&!t.get(o)&&a.id===t.id&&(i[a.hash]=a,n[a.hash]=!0,a.next.forEach(s))}return i}}t.exports=w,t.exports.Sorting=c,t.exports.AccessController=h}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"ipfs-log",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/ipfs-log/src/log.js"}],[181,{"@stablelib/utf8":1569,buffer:2105,"did-resolver":2301,elliptic:2342,"js-sha256":4763,"js-sha3":182,tweetnacl:6055,"uport-base64url":6064},function(){with(this)return function(){"use strict";return function(e,t,r){(function(t){(function(){function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var i=e("js-sha256"),s=e("js-sha3"),o=e("elliptic"),a=n(e("tweetnacl")),u=e("@stablelib/utf8"),c=e("buffer"),l=n(e("uport-base64url")),f=n(e("did-resolver"));function h(e){return c.Buffer.from(i.sha256.arrayBuffer(e))}function d(e){return"0x"+(t=c.Buffer.from(e.slice(2),"hex"),c.Buffer.from(s.keccak_256.arrayBuffer(t))).slice(-20).toString("hex");var t}var p=new o.ec("secp256k1");function m(e,t){return void 0===t&&(t=64),e.length===t?e:"0".repeat(t-e.length)+e}function y(e){return new Uint8Array(Array.prototype.slice.call(t.from(e,"base64"),0))}var g=new o.ec("secp256k1");function v(e,t){void 0===t&&(t=!1);var r=l.toBuffer(e);if(r.length!==(t?65:64))throw new Error("wrong signature length");var n={r:r.slice(0,32).toString("hex"),s:r.slice(32,64).toString("hex")};return t&&(n.recoveryParam=r[64]),n}var b={ES256K:function(e,t,r){var n=h(e),i=v(t),s=r.find((function(e){return g.keyFromPublic(e.publicKeyHex,"hex").verify(n,i)}));if(!s)throw new Error("Signature invalid for JWT");return s},"ES256K-R":function(e,t,r){var n=v(t,!0),i=h(e),s=g.recoverPubKey(i,n,n.recoveryParam),o=s.encode("hex"),a=s.encode("hex",!0),u=d(o),c=r.find((function(e){var t=e.publicKeyHex;return t===o||t===a||e.ethereumAddress===u}));if(!c)throw new Error("Signature invalid for JWT");return c},Ed25519:function(e,t,r){var n=u.encode(e),i=y(l.toBase64(t)),s=r.find((function(e){return a.sign.detached.verify(n,i,y(e.publicKeyBase64))}));if(!s)throw new Error("Signature invalid for JWT");return s}};function _(e){var t=b[e];if(!t)throw new Error("Unsupported algorithm "+e);return t}function w(e){return"object"==typeof e&&"r"in e&&"s"in e}function E(e){return function(t,r){try{return Promise.resolve(r(t)).then((function(t){if(w(t))return function(r){var n=t.r,i=t.s,s=t.recoveryParam,o=c.Buffer.alloc(e?65:64);if(c.Buffer.from(n,"hex").copy(o,0),c.Buffer.from(i,"hex").copy(o,32),e){if(void 0===s)throw new Error("Signer did not return a recoveryParam");o[64]=s}return l.encode(o)}();throw new Error("expected a signer function that returns a signature object instead of string")}))}catch(e){return Promise.reject(e)}}}_.toSignatureObject=v;var k={ES256K:E(),"ES256K-R":E(!0),Ed25519:function(e,t){try{return Promise.resolve(t(e)).then((function(e){if(w(e))throw new Error("expected a signer function that returns a string instead of signature object");return e}))}catch(e){return Promise.reject(e)}}},A={ES256K:["Secp256k1VerificationKey2018","Secp256k1SignatureVerificationKey2018","EcdsaPublicKeySecp256k1"],"ES256K-R":["Secp256k1VerificationKey2018","Secp256k1SignatureVerificationKey2018","EcdsaPublicKeySecp256k1"],Ed25519:["ED25519SignatureVerification"]};function S(e){return l.encode(JSON.stringify(e))}function x(e){return e.match(/^[123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz]+$/)}function I(e){if(e.match(/^did:/))return e;if(x(e))return"did:uport:"+e;throw new Error("Not a valid DID '"+e+"'")}function T(e){if(!e)throw new Error("no JWT passed into decodeJWT");var t=e.match(/^([a-zA-Z0-9_-]+)\.([a-zA-Z0-9_-]+)\.([a-zA-Z0-9_-]+)$/);if(t)return{header:JSON.parse(l.decode(t[1])),payload:JSON.parse(l.decode(t[2])),signature:t[3],data:t[1]+"."+t[2]};throw new Error("Incorrect format JWT")}r.SimpleSigner=function(e){var t=p.keyFromPrivate(e);return function(e){try{var r=t.sign(h(e)),n=r.s,i=r.recoveryParam;return Promise.resolve({r:m(r.r.toString("hex")),s:m(n.toString("hex")),recoveryParam:i})}catch(e){return Promise.reject(e)}}},r.NaclSigner=function(e){var t=y(e);return function(e){try{var r=u.encode(e),n=a.sign.detached(r,t),i=l.encode(c.Buffer.from(n));return Promise.resolve(i)}catch(e){return Promise.reject(e)}}},r.verifyJWT=function(e,t){void 0===t&&(t={auth:null,audience:null,callbackUrl:null});try{var r=t.audience?I(t.audience):void 0,n=T(e),i=n.payload,s=n.header,o=n.signature,a=n.data;return Promise.resolve(function(e,t,r){try{var n=A[e];if(!n||0===n.length)throw new Error("No supported signature types for algorithm "+e);var i=I(t);return Promise.resolve(f(i)).then((function(t){if(!t)throw new Error("Unable to resolve DID document for "+i);var s=!r||(t.authentication||[]).map((function(e){return e.publicKey})),o=(t.publicKey||[]).filter((function(e){var t=e.type,i=e.id;return n.find((function(e){return e===t&&(!r||Array.isArray(s)&&s.indexOf(i)>=0)}))}));if(r&&(!o||0===o.length))throw new Error("DID document for "+i+" does not have public keys suitable for authenticationg user");if(!o||0===o.length)throw new Error("DID document for "+i+" does not have public keys for "+e);return{authenticators:o,issuer:i,doc:t}}))}catch(e){return Promise.reject(e)}}(s.alg,i.iss,t.auth)).then((function(n){var u,c=n.doc,l=n.authenticators,f=n.issuer,h=_(s.alg)(a,o,l),d=Math.floor(Date.now()/1e3);if(h){if(i.iat&&i.iat>d+300)throw new Error("JWT not valid yet (issued in the future): iat: "+i.iat+" > now: "+d);if(i.exp&&i.exp<=d-300)throw new Error("JWT has expired: exp: "+i.exp+" < now: "+d);if(i.aud)if((u=i.aud)&&(u.match(/^did:/)||x(u))){if(!r)throw new Error("JWT audience is required but your app address has not been configured");if(r!==I(i.aud))throw new Error("JWT audience does not match your DID: aud: "+i.aud+" !== yours: "+r)}else{if(!t.callbackUrl)throw new Error("JWT audience matching your callback url is required but one wasn't passed in");if(i.aud!==t.callbackUrl)throw new Error("JWT audience does not match the callback url: aud: "+i.aud+" !== url: "+t.callbackUrl)}return{payload:i,doc:c,issuer:f,signer:h,jwt:e}}}))}catch(e){return Promise.reject(e)}},r.createJWT=function(e,t){var r=t.issuer,n=t.signer,i=t.alg,s=t.expiresIn;try{if(!n)throw new Error("No Signer functionality has been configured");if(!r)throw new Error("No issuing DID has been configured");var o={typ:"JWT",alg:i||"ES256K"},a={iat:Math.floor(Date.now()/1e3),exp:void 0};if(s){if("number"!=typeof s)throw new Error("JWT expiresIn is not a number");a.exp=a.iat+Math.floor(s)}var u=[S(o),S(Object.assign({},a,e,{iss:r}))].join("."),c=function(e){var t=k[e];if(!t)throw new Error("Unsupported algorithm "+e);return t}(o.alg);return Promise.resolve(c(u,n)).then((function(e){return[u,e].join(".")}))}catch(e){return Promise.reject(e)}},r.decodeJWT=T,r.toEthereumAddress=d}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"did-jwt",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/3box/node_modules/did-jwt/lib/index.js"}],[4485,{},function(){with(this)return function(){"use strict";return function(e,t,r){const n="GENESIS";class i{constructor(e,t){this._ipfs=e,this._content={id:`did:${t}:GENESIS`}}get DID(){if(this._content.id.includes(n))throw new Error("DID is not available before commit");return this._content.id}static async load(e,t){const r=new i(e);return r._content=await i.cidToDocument(e,t),r._content.previousDocument={"/":t.toString()},r}addPublicKey(e,t,r,n,i){this._content.publicKey||(this._content.publicKey=[]);let s={id:`${this._content.id}#${e}`,type:t};s[r]=n,i&&(s.owner=i),this._content.publicKey.push(s)}removePublicKey(e){const t=this._content.publicKey.findIndex((t=>t.id.endsWith(e)));this._content.publicKey.splice(t,1),this._content.publicKey.length||delete this._content.publicKey}addAuthentication(e,t){this._content.authentication||(this._content.authentication=[]),this._content.authentication.push({type:e,publicKey:`${this._content.id}#${t}`})}removeAuthentication(e){const t=this._content.authentication.findIndex((t=>t.publicKey.endsWith(e)));this._content.authentication.splice(t,1),this._content.authentication.length||delete this._content.authentication}addService(e,t,r,n){this._content.service||(this._content.service=[]),this._content.service.push(Object.assign({id:`${this._content.id};${e}`,type:t,serviceEndpoint:r},n))}removeService(e){const t=this._content.service.findIndex((t=>t.id.endsWith(e)));this._content.service.splice(t,1),this._content.service.length||delete this._content.service}setRevocationMethod(e){this._content.revocationMethod=e}addCustomProperty(e,t){this._content[e]=t}removeCustomProperty(e){delete this._content[e]}async commit(e={}){this._content.created?e.noTimestamp||(this._content.updated=new Date(Date.now()).toISOString()):(this._content["@context"]="https://w3id.org/did/v1",e.noTimestamp||(this._content.created=new Date(Date.now()).toISOString()));const t=await this._ipfs.dag.put(this._content,{format:"dag-cbor",hashAlg:"sha2-256"});return this._content=await i.cidToDocument(this._ipfs,t),this._content.previousDocument={"/":t.toString()},t}static async cidToDocument(e,t){let r=(await e.dag.get(t)).value;if(r.id.includes(n)){const e=new RegExp(n,"gi");r.id=r.id.replace(e,t),r.publicKey&&(r.publicKey=JSON.parse(JSON.stringify(r.publicKey).replace(e,t))),r.authentication&&(r.authentication=JSON.parse(JSON.stringify(r.authentication).replace(e,t))),r.service&&(r.service=JSON.parse(JSON.stringify(r.service).replace(e,t)))}return r.previousDocument&&(r.previousDocument={"/":r.previousDocument.toString()}),r}}t.exports=i}}},{package:"ipfs-did-document",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/ipfs-did-document/index.js"}],[4528,{"./lib/XMLHttpRequest":4529},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./lib/XMLHttpRequest");function i(e){if(!(this instanceof i))throw new Error('[ipfs-mini] IPFS instance must be instantiated with "new" flag (e.g. var ipfs = new IPFS("http://localhost:8545");).');this.setProvider(e||{})}function s(){}function o(e){return new Promise(e)}function a(e){e(s,s)}t.exports=i,i.prototype.setProvider=function(e){if("object"!=typeof e)throw new Error(`[ifpsjs] provider must be type Object, got '${typeof e}'.`);var t=this.provider=Object.assign({host:"127.0.0.1",pinning:!0,port:"5001",protocol:"http",base:"/api/v0"},e||{});this.requestBase=String(`${t.protocol}://${t.host}:${t.port}${t.base}`)},i.prototype.sendAsync=function(e,t){var r=this,i=new n,u=e||{};return(t?a:o)((function(n,o){function a(e,r){return(t||s)(e,u.takeHash&&r?r.Hash:r),e?o(e):!e&&r?n(u.takeHash?r.Hash:r):void 0}i.onreadystatechange=function(){if(4===i.readyState&&1!==i.timeout)if(200!==i.status)a(new Error(`[ipfs-mini] status ${i.status}: ${i.responseText}`),null);else try{a(null,u.jsonParse?JSON.parse(i.responseText):i.responseText)}catch(e){a(new Error(`[ipfs-mini] while parsing data: '${String(i.responseText)}', error: ${String(e)} with provider: '${r.requestBase}'`,null))}};try{var c=r.provider.pinning&&"/add"===e.uri?"?pin=true":"";u.payload?i.open("POST",`${r.requestBase}${e.uri}${c}`):i.open("GET",`${r.requestBase}${e.uri}${c}`),u.accept&&i.setRequestHeader("accept",u.accept),u.payload&&u.boundary?(i.setRequestHeader("Content-Type",`multipart/form-data; boundary=${u.boundary}`),i.send(u.payload)):i.send()}catch(e){a(e,null)}}))},i.prototype.add=function(e,t){var r="object"==typeof e&&e.isBuffer?e.toString("binary"):e,n=function(e){for(;;){var t=`----IPFSMini${1e5*Math.random()}.${1e5*Math.random()}`;if(-1===e.indexOf(t))return t}}(r),i=`--${n}\r\nContent-Disposition: form-data; name="path"\r\nContent-Type: application/octet-stream\r\n\r\n${r}\r\n--${n}--`;return this.sendAsync({jsonParse:!0,accept:"application/json",uri:"/add",takeHash:!0,payload:i,boundary:n},t)},i.prototype.addJSON=function(e,t){return this.add(JSON.stringify(e),t)},i.prototype.stat=function(e,t){return this.sendAsync({jsonParse:!0,uri:`/object/stat/${e}`},t)},i.prototype.cat=function(e,t){return this.sendAsync({uri:`/cat/${e}`},t)},i.prototype.catJSON=function(e,t){return this.sendAsync({uri:`/cat/${e}`,jsonParse:!0},t)}}}},{package:"ipfs-mini",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/ipfs-mini/src/index.js"}],[5379,{"./src/identities":5380},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("./src/identities");t.exports=n}}},{package:"orbit-db-identity-provider",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/orbit-db-identity-provider/index.js"}],[169,{"../utils/index":178,"@babel/runtime/helpers/classCallCheck":191,"@babel/runtime/helpers/createClass":193,"@babel/runtime/helpers/interopRequireDefault":200,buffer:2105,"did-jwt":181,elliptic:2342,ethers:183,tweetnacl:6055,"tweetnacl-util":6054},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass")),o=e("ethers").utils.HDNode,a=e("tweetnacl");a.util=e("tweetnacl-util");var u=e("did-jwt").SimpleSigner,c=e("../utils/index").sha256,l=new(0,e("elliptic").ec)("secp256k1"),f=function(){function e(t){(0,i.default)(this,e),this._seed=t;var n=o.fromSeed(this._seed),s=n.derivePath("m/7696500'/0'/0'");this.signingKey=s.derivePath("0");var u=r.from(s.derivePath("2").privateKey.slice(2),"hex");this.asymEncryptionKey=a.box.keyPair.fromSecretKey(new Uint8Array(u)),this.symEncryptionKey=new Uint8Array(r.from(s.derivePath("3").privateKey.slice(2),"hex")),this.ethereumKey=n.derivePath("m/44'/60'/0'/0").derivePath("0")}return(0,s.default)(e,[{key:"asymEncrypt",value:function(e,t,r){r=r||h(),t=a.util.decodeBase64(t),"string"==typeof e&&(e=a.util.decodeUTF8(e));var n=a.box(e,r,t,this.asymEncryptionKey.secretKey);return{nonce:a.util.encodeBase64(r),ciphertext:a.util.encodeBase64(n)}}},{key:"asymDecrypt",value:function(e,t,n,i){t=a.util.decodeBase64(t),e=a.util.decodeBase64(e),n=a.util.decodeBase64(n);var s=a.box.open(e,n,t,this.asymEncryptionKey.secretKey);return i?s?r.from(s):null:s?a.util.encodeUTF8(s):null}},{key:"symEncrypt",value:function(e,t){return d(e,this.symEncryptionKey,t)}},{key:"symDecrypt",value:function(e,t,r){return p(e,this.symEncryptionKey,t,r)}},{key:"getJWTSigner",value:function(){return u(this.signingKey.privateKey.slice(2))}},{key:"getDBSalt",value:function(){return c(this.signingKey.derivePath("0").privateKey.slice(2))}},{key:"getPublicKeys",value:function(e){var t=this.signingKey.publicKey.slice(2),n=this.ethereumKey.publicKey.slice(2);return e&&(t=l.keyFromPublic(r.from(t,"hex")).getPublic(!1,"hex"),n=l.keyFromPublic(r.from(n,"hex")).getPublic(!1,"hex")),{signingKey:t,ethereumKey:n,asymEncryptionKey:a.util.encodeBase64(this.asymEncryptionKey.publicKey)}}},{key:"serialize",value:function(){return this._seed}}]),e}(),h=function(){return a.randomBytes(24)},d=function(e,t,r){r=r||h(),"string"==typeof e&&(e=a.util.decodeUTF8(e));var n=a.secretbox(e,r,t);return{nonce:a.util.encodeBase64(r),ciphertext:a.util.encodeBase64(n)}},p=function(e,t,n,i){e=a.util.decodeBase64(e),n=a.util.decodeBase64(n);var s=a.secretbox.open(e,n,t);return i?s?r.from(s):null:s?a.util.encodeUTF8(s):null};t.exports=f}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/3box/lib/3id/keyring.js"}],[184,{"@babel/runtime/helpers/asyncToGenerator":190,"@babel/runtime/helpers/interopRequireDefault":200,"@babel/runtime/regenerator":220,base64url:1972,"did-jwt":2300,"did-resolver":2301,"ipfs-did-document":4485},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/regenerator")),s=n(e("@babel/runtime/helpers/asyncToGenerator")),o=e("did-jwt"),a=n(e("ipfs-did-document")),u=n(e("base64url")),c=e("did-resolver"),l=["signingKey","managementKey","encryptionKey"],f=["subSigningKey","subEncryptionKey"];function h(e,t,r){return d.apply(this,arguments)}function d(){return(d=(0,s.default)(i.default.mark((function e(t,r,n){var s,o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.default.cidToDocument(t,r);case 3:if(p(s=e.sent),!s.root){e.next=14;break}if(!n){e.next=8;break}throw new Error("Only one layer subDoc allowed");case 8:return e.next=10,h(t,s.root.split(":")[2],!0);case 10:return o=e.sent,e.next=13,y(s);case 13:s=v(o,s);case 14:e.next=26;break;case 16:return e.prev=16,e.t0=e.catch(0),e.prev=18,e.next=21,t.pin.rm(r);case 21:e.next=25;break;case 23:e.prev=23,e.t1=e.catch(18);case 25:throw new Error("Invalid 3ID");case 26:return e.abrupt("return",s);case 27:case"end":return e.stop()}}),e,null,[[0,16],[18,23]])})))).apply(this,arguments)}function p(e){var t=l;if(!e||!e.publicKey||!e.authentication)throw new Error("Not a valid 3ID");if(e.root&&(t=f,!e.space))throw new Error("Not a valid 3ID");e.publicKey.map((function(e){var r=e.id.split("#")[1];if(!t.includes(r))throw new Error("Not a valid 3ID")}))}function m(e){return u.default.encode(JSON.stringify(e))}function y(e){return g.apply(this,arguments)}function g(){return(g=(0,s.default)(i.default.mark((function e(t){var r,n,s,a,u;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.publicKey.find((function(e){return e.id.includes(f[0])})).publicKeyHex,n=t.publicKey.find((function(e){return e.id.includes(f[1])})).publicKeyBase64,s=m({iat:null,subSigningKey:r,subEncryptionKey:n,space:t.space,iss:t.root}),a=m({typ:"JWT",alg:t.proof.alg}),u="".concat(a,".").concat(s,".").concat(t.proof.signature),e.next=7,(0,o.verifyJWT)(u);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e,t){return t.publicKey=e.publicKey.concat(t.publicKey),t}t.exports=function(e){arguments.length>1&&undefined,(0,c.registerMethod)("3",(function(t,r){var n=r.id;return h(e,n)}))}}}},{package:"3id-resolver",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/3id-resolver/lib/register.js"}],[5360,{"./access-controller-manifest":5359,"./ipfs-access-controller":5361,"./legacy-ipfs-access-controller":5362,"./orbitdb-access-controller":5363},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("./access-controller-manifest");let i={"legacy-ipfs":e("./legacy-ipfs-access-controller"),ipfs:e("./ipfs-access-controller"),orbitdb:e("./orbitdb-access-controller")};const s=e=>{if(!o.isSupported(e))throw new Error(`AccessController type '${e}' is not supported`);return i[e]};class o{static isSupported(e){return Object.keys(i).includes(e)}static addAccessController(e){if(!e.AccessController)throw new Error("AccessController class needs to be given as an option");if(!e.AccessController.type||"string"!=typeof e.AccessController.type)throw new Error("Given AccessController class needs to implement: static get type() { /* return a string */}.");i[e.AccessController.type]=e.AccessController}static addAccessControllers(e){const t=e.AccessControllers;if(!t)throw new Error("AccessController classes need to be given as an option");t.forEach((e=>{o.addAccessController({AccessController:e})}))}static removeAccessController(e){delete i[e]}static async resolve(e,t,r={}){const{type:i,params:o}=await n.resolve(e._ipfs,t,r),a=s(i),u=await a.create(e,Object.assign({},r,o));return await u.load(o.address),u}static async create(e,t,r={}){const i=s(t),o=await i.create(e,r),a=await o.save();return await n.create(e._ipfs,t,a)}}t.exports=o}}},{package:"orbit-db-access-controllers",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/orbit-db-access-controllers/src/access-controllers.js"}],[164,{},function(){with(this)return function(){"use strict";return function(e,t,r){const n="moderator-access",i="MODERATOR";class s{constructor(e,t){this._capabilityTypes=[i],this._write=[],this._firstModerator=e,this._write.push(this._firstModerator),this._members=Boolean(t.members),this._members&&this._capabilityTypes.push("MEMBER")}static get type(){return n}isMod(e){return this._write.includes(e)}isValidCapability(e){return this._capabilityTypes.includes(e)}get firstModerator(){return this._firstModerator}async canAppend(e,t){const r=e.identity.id,n=e.payload.value.capability,s=e.payload.value.id,o=this.isMod(r),a=this.isValidCapability(n);return!!(o&&a&&await(async()=>t.verifyIdentity(e.identity))())&&(n===i&&this._write.push(s),!0)}async load(e){const t=e.split("/"),r=t.pop();this._members="members"===r;const n=r.includes("mod")?r:t.pop();this._firstModerator=n.split("_")[1]}async save(){let e=`${n}/mod_${this._firstModerator}`;return e+=this._members?"/members":"",{address:e}}static async create(e,t={}){if(!t.firstModerator)throw new Error("Moderator AC: firstModerator required");return new s(t.firstModerator,t)}}t.exports=s}}},{package:"3box-orbitdb-plugins",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js"}],[163,{"did-resolver":2301,"orbit-db-io":5385,"safe-buffer":5800},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("orbit-db-io"),i=e("safe-buffer").Buffer,s=e("did-resolver").default;class o{constructor(e,t){this._ipfs=e,this._write=Array.from(t.write||[])}static get type(){return"legacy-ipfs-3box"}get write(){return this._write}async canAppend(e,t){const r=0===e.v?e.key:await(async e=>{const t=await s(e);return t.publicKey.find((e=>{const r=e.id.split("#");return r[0]===t.id&&("subSigningKey"===r[1]||"signingKey"===r[1])})).publicKeyHex})(e.identity.id);return!(!this.write.includes(r)&&!this.write.includes("*"))&&(0===e.v||await t.verifyIdentity(e.identity))}async load(e){0===e.indexOf("/ipfs")&&(e=e.split("/")[2]);try{const t=await n.read(this._ipfs,e);this._write=t.write}catch(e){console.log("LegacyIPFS3BoxAccessController.load ERROR:",e)}}async save(e){let t;const r={admin:[],write:this.write,read:[]};try{t=await n.write(this._ipfs,"raw",i.from(JSON.stringify(r,null,2)),{format:"dag-pb"})}catch(e){console.log("LegacyIPFS3BoxAccessController.save ERROR:",e)}return{address:t,skipManifest:!0}}static async create(e,t={}){return t={...t,write:t.write||[e.identity.publicKey]},new o(e._ipfs,t)}}t.exports=o}}},{package:"3box-orbitdb-plugins",file:"/Users/mac/code/a-mises/metamask-extension/node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js"}]],[],{});