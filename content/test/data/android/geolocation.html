<!DOCTYPE html>
<html>
    <head>
        <title>Geolocation</title>
        <script>
            var positionCount = 0;

            function gotPos(position) {
                positionCount++;
                window.document.title = 'Count:' + positionCount;
            }
            function errorCallback(error){
                window.document.title = 'deny';
                console.log('navigator.getCurrentPosition error: ', error);
            }
            function initiate_getCurrentPosition() {
                navigator.geolocation.getCurrentPosition(
                    gotPos, errorCallback, { });
            }
            function initiate_watchPosition() {
                navigator.geolocation.watchPosition(
                    gotPos, errorCallback, { });
            }

            // The modal permission dialog requires a user gesture to trigger.
            // Hook up a click event listener to run a specified method (which
            // may be changed by the test).
            var functionToRun = 'initiate_getCurrentPosition()';
            function runFunctionOnClick() {
                eval(functionToRun);
            }

            window.addEventListener('load', () => {
                window.addEventListener('click', runFunctionOnClick);
            });
        </script>
    </head>
    <body>
    </body>
</html>
